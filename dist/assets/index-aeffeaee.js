function $3(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const c in i)if(c!=="default"&&!(c in e)){const u=Object.getOwnPropertyDescriptor(i,c);u&&Object.defineProperty(e,c,u.get?u:{enumerable:!0,get:()=>i[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&i(p)}).observe(document,{childList:!0,subtree:!0});function n(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(c){if(c.ep)return;c.ep=!0;const u=n(c);fetch(c.href,u)}})();var Ai=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var U3={exports:{}},B_={},j3={exports:{}},rr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg=Symbol.for("react.element"),WN=Symbol.for("react.portal"),qN=Symbol.for("react.fragment"),HN=Symbol.for("react.strict_mode"),ZN=Symbol.for("react.profiler"),XN=Symbol.for("react.provider"),KN=Symbol.for("react.context"),YN=Symbol.for("react.forward_ref"),QN=Symbol.for("react.suspense"),JN=Symbol.for("react.memo"),e$=Symbol.for("react.lazy"),wA=Symbol.iterator;function t$(e){return e===null||typeof e!="object"?null:(e=wA&&e[wA]||e["@@iterator"],typeof e=="function"?e:null)}var V3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G3=Object.assign,W3={};function df(e,t,n){this.props=e,this.context=t,this.refs=W3,this.updater=n||V3}df.prototype.isReactComponent={};df.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};df.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function q3(){}q3.prototype=df.prototype;function OE(e,t,n){this.props=e,this.context=t,this.refs=W3,this.updater=n||V3}var DE=OE.prototype=new q3;DE.constructor=OE;G3(DE,df.prototype);DE.isPureReactComponent=!0;var SA=Array.isArray,H3=Object.prototype.hasOwnProperty,zE={current:null},Z3={key:!0,ref:!0,__self:!0,__source:!0};function X3(e,t,n){var i,c={},u=null,p=null;if(t!=null)for(i in t.ref!==void 0&&(p=t.ref),t.key!==void 0&&(u=""+t.key),t)H3.call(t,i)&&!Z3.hasOwnProperty(i)&&(c[i]=t[i]);var o=arguments.length-2;if(o===1)c.children=n;else if(1<o){for(var x=Array(o),S=0;S<o;S++)x[S]=arguments[S+2];c.children=x}if(e&&e.defaultProps)for(i in o=e.defaultProps,o)c[i]===void 0&&(c[i]=o[i]);return{$$typeof:zg,type:e,key:u,ref:p,props:c,_owner:zE.current}}function n$(e,t){return{$$typeof:zg,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function FE(e){return typeof e=="object"&&e!==null&&e.$$typeof===zg}function r$(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var EA=/\/+/g;function Jb(e,t){return typeof e=="object"&&e!==null&&e.key!=null?r$(""+e.key):t.toString(36)}function Sv(e,t,n,i,c){var u=typeof e;(u==="undefined"||u==="boolean")&&(e=null);var p=!1;if(e===null)p=!0;else switch(u){case"string":case"number":p=!0;break;case"object":switch(e.$$typeof){case zg:case WN:p=!0}}if(p)return p=e,c=c(p),e=i===""?"."+Jb(p,0):i,SA(c)?(n="",e!=null&&(n=e.replace(EA,"$&/")+"/"),Sv(c,t,n,"",function(S){return S})):c!=null&&(FE(c)&&(c=n$(c,n+(!c.key||p&&p.key===c.key?"":(""+c.key).replace(EA,"$&/")+"/")+e)),t.push(c)),1;if(p=0,i=i===""?".":i+":",SA(e))for(var o=0;o<e.length;o++){u=e[o];var x=i+Jb(u,o);p+=Sv(u,t,n,x,c)}else if(x=t$(e),typeof x=="function")for(e=x.call(e),o=0;!(u=e.next()).done;)u=u.value,x=i+Jb(u,o++),p+=Sv(u,t,n,x,c);else if(u==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return p}function z0(e,t,n){if(e==null)return e;var i=[],c=0;return Sv(e,i,"","",function(u){return t.call(n,u,c++)}),i}function i$(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var _o={current:null},Ev={transition:null},o$={ReactCurrentDispatcher:_o,ReactCurrentBatchConfig:Ev,ReactCurrentOwner:zE};rr.Children={map:z0,forEach:function(e,t,n){z0(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return z0(e,function(){t++}),t},toArray:function(e){return z0(e,function(t){return t})||[]},only:function(e){if(!FE(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};rr.Component=df;rr.Fragment=qN;rr.Profiler=ZN;rr.PureComponent=OE;rr.StrictMode=HN;rr.Suspense=QN;rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o$;rr.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=G3({},e.props),c=e.key,u=e.ref,p=e._owner;if(t!=null){if(t.ref!==void 0&&(u=t.ref,p=zE.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(x in t)H3.call(t,x)&&!Z3.hasOwnProperty(x)&&(i[x]=t[x]===void 0&&o!==void 0?o[x]:t[x])}var x=arguments.length-2;if(x===1)i.children=n;else if(1<x){o=Array(x);for(var S=0;S<x;S++)o[S]=arguments[S+2];i.children=o}return{$$typeof:zg,type:e.type,key:c,ref:u,props:i,_owner:p}};rr.createContext=function(e){return e={$$typeof:KN,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:XN,_context:e},e.Consumer=e};rr.createElement=X3;rr.createFactory=function(e){var t=X3.bind(null,e);return t.type=e,t};rr.createRef=function(){return{current:null}};rr.forwardRef=function(e){return{$$typeof:YN,render:e}};rr.isValidElement=FE;rr.lazy=function(e){return{$$typeof:e$,_payload:{_status:-1,_result:e},_init:i$}};rr.memo=function(e,t){return{$$typeof:JN,type:e,compare:t===void 0?null:t}};rr.startTransition=function(e){var t=Ev.transition;Ev.transition={};try{e()}finally{Ev.transition=t}};rr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};rr.useCallback=function(e,t){return _o.current.useCallback(e,t)};rr.useContext=function(e){return _o.current.useContext(e)};rr.useDebugValue=function(){};rr.useDeferredValue=function(e){return _o.current.useDeferredValue(e)};rr.useEffect=function(e,t){return _o.current.useEffect(e,t)};rr.useId=function(){return _o.current.useId()};rr.useImperativeHandle=function(e,t,n){return _o.current.useImperativeHandle(e,t,n)};rr.useInsertionEffect=function(e,t){return _o.current.useInsertionEffect(e,t)};rr.useLayoutEffect=function(e,t){return _o.current.useLayoutEffect(e,t)};rr.useMemo=function(e,t){return _o.current.useMemo(e,t)};rr.useReducer=function(e,t,n){return _o.current.useReducer(e,t,n)};rr.useRef=function(e){return _o.current.useRef(e)};rr.useState=function(e){return _o.current.useState(e)};rr.useSyncExternalStore=function(e,t,n){return _o.current.useSyncExternalStore(e,t,n)};rr.useTransition=function(){return _o.current.useTransition()};rr.version="18.2.0";j3.exports=rr;var X=j3.exports;const Xe=uf(X),B2=$3({__proto__:null,default:Xe},[X]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a$=X,s$=Symbol.for("react.element"),l$=Symbol.for("react.fragment"),c$=Object.prototype.hasOwnProperty,u$=a$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d$={key:!0,ref:!0,__self:!0,__source:!0};function K3(e,t,n){var i,c={},u=null,p=null;n!==void 0&&(u=""+n),t.key!==void 0&&(u=""+t.key),t.ref!==void 0&&(p=t.ref);for(i in t)c$.call(t,i)&&!d$.hasOwnProperty(i)&&(c[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)c[i]===void 0&&(c[i]=t[i]);return{$$typeof:s$,type:e,key:u,ref:p,props:c,_owner:u$.current}}B_.Fragment=l$;B_.jsx=K3;B_.jsxs=K3;U3.exports=B_;var BE=U3.exports;const Cc=BE.Fragment,ne=BE.jsx,Yt=BE.jsxs;var N2={},Y3={exports:{}},ea={},Q3={exports:{}},J3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Me,Ce){var Te=Me.length;Me.push(Ce);e:for(;0<Te;){var Ve=Te-1>>>1,we=Me[Ve];if(0<c(we,Ce))Me[Ve]=Ce,Me[Te]=we,Te=Ve;else break e}}function n(Me){return Me.length===0?null:Me[0]}function i(Me){if(Me.length===0)return null;var Ce=Me[0],Te=Me.pop();if(Te!==Ce){Me[0]=Te;e:for(var Ve=0,we=Me.length,be=we>>>1;Ve<be;){var Ue=2*(Ve+1)-1,nt=Me[Ue],at=Ue+1,At=Me[at];if(0>c(nt,Te))at<we&&0>c(At,nt)?(Me[Ve]=At,Me[at]=Te,Ve=at):(Me[Ve]=nt,Me[Ue]=Te,Ve=Ue);else if(at<we&&0>c(At,Te))Me[Ve]=At,Me[at]=Te,Ve=at;else break e}}return Ce}function c(Me,Ce){var Te=Me.sortIndex-Ce.sortIndex;return Te!==0?Te:Me.id-Ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var p=Date,o=p.now();e.unstable_now=function(){return p.now()-o}}var x=[],S=[],M=1,k=null,L=3,j=!1,F=!1,V=!1,oe=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Z(Me){for(var Ce=n(S);Ce!==null;){if(Ce.callback===null)i(S);else if(Ce.startTime<=Me)i(S),Ce.sortIndex=Ce.expirationTime,t(x,Ce);else break;Ce=n(S)}}function Q(Me){if(V=!1,Z(Me),!F)if(n(x)!==null)F=!0,Qe(ae);else{var Ce=n(S);Ce!==null&&gt(Q,Ce.startTime-Me)}}function ae(Me,Ce){F=!1,V&&(V=!1,B(ke),ke=-1),j=!0;var Te=L;try{for(Z(Ce),k=n(x);k!==null&&(!(k.expirationTime>Ce)||Me&&!pe());){var Ve=k.callback;if(typeof Ve=="function"){k.callback=null,L=k.priorityLevel;var we=Ve(k.expirationTime<=Ce);Ce=e.unstable_now(),typeof we=="function"?k.callback=we:k===n(x)&&i(x),Z(Ce)}else i(x);k=n(x)}if(k!==null)var be=!0;else{var Ue=n(S);Ue!==null&&gt(Q,Ue.startTime-Ce),be=!1}return be}finally{k=null,L=Te,j=!1}}var ue=!1,de=null,ke=-1,J=5,G=-1;function pe(){return!(e.unstable_now()-G<J)}function $e(){if(de!==null){var Me=e.unstable_now();G=Me;var Ce=!0;try{Ce=de(!0,Me)}finally{Ce?Ge():(ue=!1,de=null)}}else ue=!1}var Ge;if(typeof $=="function")Ge=function(){$($e)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,Ze=Ae.port2;Ae.port1.onmessage=$e,Ge=function(){Ze.postMessage(null)}}else Ge=function(){oe($e,0)};function Qe(Me){de=Me,ue||(ue=!0,Ge())}function gt(Me,Ce){ke=oe(function(){Me(e.unstable_now())},Ce)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Me){Me.callback=null},e.unstable_continueExecution=function(){F||j||(F=!0,Qe(ae))},e.unstable_forceFrameRate=function(Me){0>Me||125<Me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<Me?Math.floor(1e3/Me):5},e.unstable_getCurrentPriorityLevel=function(){return L},e.unstable_getFirstCallbackNode=function(){return n(x)},e.unstable_next=function(Me){switch(L){case 1:case 2:case 3:var Ce=3;break;default:Ce=L}var Te=L;L=Ce;try{return Me()}finally{L=Te}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Me,Ce){switch(Me){case 1:case 2:case 3:case 4:case 5:break;default:Me=3}var Te=L;L=Me;try{return Ce()}finally{L=Te}},e.unstable_scheduleCallback=function(Me,Ce,Te){var Ve=e.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?Ve+Te:Ve):Te=Ve,Me){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=Te+we,Me={id:M++,callback:Ce,priorityLevel:Me,startTime:Te,expirationTime:we,sortIndex:-1},Te>Ve?(Me.sortIndex=Te,t(S,Me),n(x)===null&&Me===n(S)&&(V?(B(ke),ke=-1):V=!0,gt(Q,Te-Ve))):(Me.sortIndex=we,t(x,Me),F||j||(F=!0,Qe(ae))),Me},e.unstable_shouldYield=pe,e.unstable_wrapCallback=function(Me){var Ce=L;return function(){var Te=L;L=Ce;try{return Me.apply(this,arguments)}finally{L=Te}}}})(J3);Q3.exports=J3;var h$=Q3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eO=X,Jo=h$;function jt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tO=new Set,sg={};function td(e,t){Gh(e,t),Gh(e+"Capture",t)}function Gh(e,t){for(sg[e]=t,e=0;e<t.length;e++)tO.add(t[e])}var tl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$2=Object.prototype.hasOwnProperty,f$=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,TA={},CA={};function p$(e){return $2.call(CA,e)?!0:$2.call(TA,e)?!1:f$.test(e)?CA[e]=!0:(TA[e]=!0,!1)}function m$(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function g$(e,t,n,i){if(t===null||typeof t>"u"||m$(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function xo(e,t,n,i,c,u,p){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=c,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=u,this.removeEmptyString=p}var Ki={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ki[e]=new xo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ki[t]=new xo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ki[e]=new xo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ki[e]=new xo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ki[e]=new xo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ki[e]=new xo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ki[e]=new xo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ki[e]=new xo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ki[e]=new xo(e,5,!1,e.toLowerCase(),null,!1,!1)});var NE=/[\-:]([a-z])/g;function $E(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(NE,$E);Ki[t]=new xo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(NE,$E);Ki[t]=new xo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(NE,$E);Ki[t]=new xo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ki[e]=new xo(e,1,!1,e.toLowerCase(),null,!1,!1)});Ki.xlinkHref=new xo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ki[e]=new xo(e,1,!1,e.toLowerCase(),null,!0,!0)});function UE(e,t,n,i){var c=Ki.hasOwnProperty(t)?Ki[t]:null;(c!==null?c.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(g$(t,n,c,i)&&(n=null),i||c===null?p$(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):c.mustUseProperty?e[c.propertyName]=n===null?c.type===3?!1:"":n:(t=c.attributeName,i=c.attributeNamespace,n===null?e.removeAttribute(t):(c=c.type,n=c===3||c===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var ul=eO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F0=Symbol.for("react.element"),mh=Symbol.for("react.portal"),gh=Symbol.for("react.fragment"),jE=Symbol.for("react.strict_mode"),U2=Symbol.for("react.profiler"),nO=Symbol.for("react.provider"),rO=Symbol.for("react.context"),VE=Symbol.for("react.forward_ref"),j2=Symbol.for("react.suspense"),V2=Symbol.for("react.suspense_list"),GE=Symbol.for("react.memo"),Ql=Symbol.for("react.lazy"),iO=Symbol.for("react.offscreen"),RA=Symbol.iterator;function tm(e){return e===null||typeof e!="object"?null:(e=RA&&e[RA]||e["@@iterator"],typeof e=="function"?e:null)}var hi=Object.assign,ew;function Pm(e){if(ew===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ew=t&&t[1]||""}return`
`+ew+e}var tw=!1;function nw(e,t){if(!e||tw)return"";tw=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(S){var i=S}Reflect.construct(e,[],t)}else{try{t.call()}catch(S){i=S}e.call(t.prototype)}else{try{throw Error()}catch(S){i=S}e()}}catch(S){if(S&&i&&typeof S.stack=="string"){for(var c=S.stack.split(`
`),u=i.stack.split(`
`),p=c.length-1,o=u.length-1;1<=p&&0<=o&&c[p]!==u[o];)o--;for(;1<=p&&0<=o;p--,o--)if(c[p]!==u[o]){if(p!==1||o!==1)do if(p--,o--,0>o||c[p]!==u[o]){var x=`
`+c[p].replace(" at new "," at ");return e.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",e.displayName)),x}while(1<=p&&0<=o);break}}}finally{tw=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Pm(e):""}function y$(e){switch(e.tag){case 5:return Pm(e.type);case 16:return Pm("Lazy");case 13:return Pm("Suspense");case 19:return Pm("SuspenseList");case 0:case 2:case 15:return e=nw(e.type,!1),e;case 11:return e=nw(e.type.render,!1),e;case 1:return e=nw(e.type,!0),e;default:return""}}function G2(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case gh:return"Fragment";case mh:return"Portal";case U2:return"Profiler";case jE:return"StrictMode";case j2:return"Suspense";case V2:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case rO:return(e.displayName||"Context")+".Consumer";case nO:return(e._context.displayName||"Context")+".Provider";case VE:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case GE:return t=e.displayName||null,t!==null?t:G2(e.type)||"Memo";case Ql:t=e._payload,e=e._init;try{return G2(e(t))}catch{}}return null}function v$(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G2(t);case 8:return t===jE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function _c(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function oO(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function _$(e){var t=oO(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var c=n.get,u=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(p){i=""+p,u.call(this,p)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(p){i=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function B0(e){e._valueTracker||(e._valueTracker=_$(e))}function aO(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=oO(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Vv(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function W2(e,t){var n=t.checked;return hi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function MA(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=_c(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function sO(e,t){t=t.checked,t!=null&&UE(e,"checked",t,!1)}function q2(e,t){sO(e,t);var n=_c(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?H2(e,t.type,n):t.hasOwnProperty("defaultValue")&&H2(e,t.type,_c(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function AA(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function H2(e,t,n){(t!=="number"||Vv(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Im=Array.isArray;function Ih(e,t,n,i){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&i&&(e[n].defaultSelected=!0)}else{for(n=""+_c(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,i&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Z2(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(jt(91));return hi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function kA(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(jt(92));if(Im(n)){if(1<n.length)throw Error(jt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:_c(n)}}function lO(e,t){var n=_c(t.value),i=_c(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function PA(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function cO(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function X2(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?cO(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var N0,uO=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,c){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(N0=N0||document.createElement("div"),N0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=N0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function lg(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Um={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},x$=["Webkit","ms","Moz","O"];Object.keys(Um).forEach(function(e){x$.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Um[t]=Um[e]})});function dO(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Um.hasOwnProperty(e)&&Um[e]?(""+t).trim():t+"px"}function hO(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,c=dO(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,c):e[n]=c}}var b$=hi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function K2(e,t){if(t){if(b$[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(jt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(jt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(jt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(jt(62))}}function Y2(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Q2=null;function WE(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var J2=null,Lh=null,Oh=null;function IA(e){if(e=Ng(e)){if(typeof J2!="function")throw Error(jt(280));var t=e.stateNode;t&&(t=V_(t),J2(e.stateNode,e.type,t))}}function fO(e){Lh?Oh?Oh.push(e):Oh=[e]:Lh=e}function pO(){if(Lh){var e=Lh,t=Oh;if(Oh=Lh=null,IA(e),t)for(e=0;e<t.length;e++)IA(t[e])}}function mO(e,t){return e(t)}function gO(){}var rw=!1;function yO(e,t,n){if(rw)return e(t,n);rw=!0;try{return mO(e,t,n)}finally{rw=!1,(Lh!==null||Oh!==null)&&(gO(),pO())}}function cg(e,t){var n=e.stateNode;if(n===null)return null;var i=V_(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(jt(231,t,typeof n));return n}var eS=!1;if(tl)try{var nm={};Object.defineProperty(nm,"passive",{get:function(){eS=!0}}),window.addEventListener("test",nm,nm),window.removeEventListener("test",nm,nm)}catch{eS=!1}function w$(e,t,n,i,c,u,p,o,x){var S=Array.prototype.slice.call(arguments,3);try{t.apply(n,S)}catch(M){this.onError(M)}}var jm=!1,Gv=null,Wv=!1,tS=null,S$={onError:function(e){jm=!0,Gv=e}};function E$(e,t,n,i,c,u,p,o,x){jm=!1,Gv=null,w$.apply(S$,arguments)}function T$(e,t,n,i,c,u,p,o,x){if(E$.apply(this,arguments),jm){if(jm){var S=Gv;jm=!1,Gv=null}else throw Error(jt(198));Wv||(Wv=!0,tS=S)}}function nd(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function vO(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function LA(e){if(nd(e)!==e)throw Error(jt(188))}function C$(e){var t=e.alternate;if(!t){if(t=nd(e),t===null)throw Error(jt(188));return t!==e?null:e}for(var n=e,i=t;;){var c=n.return;if(c===null)break;var u=c.alternate;if(u===null){if(i=c.return,i!==null){n=i;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===n)return LA(c),e;if(u===i)return LA(c),t;u=u.sibling}throw Error(jt(188))}if(n.return!==i.return)n=c,i=u;else{for(var p=!1,o=c.child;o;){if(o===n){p=!0,n=c,i=u;break}if(o===i){p=!0,i=c,n=u;break}o=o.sibling}if(!p){for(o=u.child;o;){if(o===n){p=!0,n=u,i=c;break}if(o===i){p=!0,i=u,n=c;break}o=o.sibling}if(!p)throw Error(jt(189))}}if(n.alternate!==i)throw Error(jt(190))}if(n.tag!==3)throw Error(jt(188));return n.stateNode.current===n?e:t}function _O(e){return e=C$(e),e!==null?xO(e):null}function xO(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=xO(e);if(t!==null)return t;e=e.sibling}return null}var bO=Jo.unstable_scheduleCallback,OA=Jo.unstable_cancelCallback,R$=Jo.unstable_shouldYield,M$=Jo.unstable_requestPaint,vi=Jo.unstable_now,A$=Jo.unstable_getCurrentPriorityLevel,qE=Jo.unstable_ImmediatePriority,wO=Jo.unstable_UserBlockingPriority,qv=Jo.unstable_NormalPriority,k$=Jo.unstable_LowPriority,SO=Jo.unstable_IdlePriority,N_=null,_s=null;function P$(e){if(_s&&typeof _s.onCommitFiberRoot=="function")try{_s.onCommitFiberRoot(N_,e,void 0,(e.current.flags&128)===128)}catch{}}var Qa=Math.clz32?Math.clz32:O$,I$=Math.log,L$=Math.LN2;function O$(e){return e>>>=0,e===0?32:31-(I$(e)/L$|0)|0}var $0=64,U0=4194304;function Lm(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Hv(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,c=e.suspendedLanes,u=e.pingedLanes,p=n&268435455;if(p!==0){var o=p&~c;o!==0?i=Lm(o):(u&=p,u!==0&&(i=Lm(u)))}else p=n&~c,p!==0?i=Lm(p):u!==0&&(i=Lm(u));if(i===0)return 0;if(t!==0&&t!==i&&!(t&c)&&(c=i&-i,u=t&-t,c>=u||c===16&&(u&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-Qa(t),c=1<<n,i|=e[n],t&=~c;return i}function D$(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function z$(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,c=e.expirationTimes,u=e.pendingLanes;0<u;){var p=31-Qa(u),o=1<<p,x=c[p];x===-1?(!(o&n)||o&i)&&(c[p]=D$(o,t)):x<=t&&(e.expiredLanes|=o),u&=~o}}function nS(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function EO(){var e=$0;return $0<<=1,!($0&4194240)&&($0=64),e}function iw(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Fg(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Qa(t),e[t]=n}function F$(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var c=31-Qa(n),u=1<<c;t[c]=0,i[c]=-1,e[c]=-1,n&=~u}}function HE(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Qa(n),c=1<<i;c&t|e[i]&t&&(e[i]|=t),n&=~c}}var Pr=0;function TO(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var CO,ZE,RO,MO,AO,rS=!1,j0=[],lc=null,cc=null,uc=null,ug=new Map,dg=new Map,rc=[],B$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function DA(e,t){switch(e){case"focusin":case"focusout":lc=null;break;case"dragenter":case"dragleave":cc=null;break;case"mouseover":case"mouseout":uc=null;break;case"pointerover":case"pointerout":ug.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dg.delete(t.pointerId)}}function rm(e,t,n,i,c,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:u,targetContainers:[c]},t!==null&&(t=Ng(t),t!==null&&ZE(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function N$(e,t,n,i,c){switch(t){case"focusin":return lc=rm(lc,e,t,n,i,c),!0;case"dragenter":return cc=rm(cc,e,t,n,i,c),!0;case"mouseover":return uc=rm(uc,e,t,n,i,c),!0;case"pointerover":var u=c.pointerId;return ug.set(u,rm(ug.get(u)||null,e,t,n,i,c)),!0;case"gotpointercapture":return u=c.pointerId,dg.set(u,rm(dg.get(u)||null,e,t,n,i,c)),!0}return!1}function kO(e){var t=Lu(e.target);if(t!==null){var n=nd(t);if(n!==null){if(t=n.tag,t===13){if(t=vO(n),t!==null){e.blockedOn=t,AO(e.priority,function(){RO(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Tv(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=iS(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Q2=i,n.target.dispatchEvent(i),Q2=null}else return t=Ng(n),t!==null&&ZE(t),e.blockedOn=n,!1;t.shift()}return!0}function zA(e,t,n){Tv(e)&&n.delete(t)}function $$(){rS=!1,lc!==null&&Tv(lc)&&(lc=null),cc!==null&&Tv(cc)&&(cc=null),uc!==null&&Tv(uc)&&(uc=null),ug.forEach(zA),dg.forEach(zA)}function im(e,t){e.blockedOn===t&&(e.blockedOn=null,rS||(rS=!0,Jo.unstable_scheduleCallback(Jo.unstable_NormalPriority,$$)))}function hg(e){function t(c){return im(c,e)}if(0<j0.length){im(j0[0],e);for(var n=1;n<j0.length;n++){var i=j0[n];i.blockedOn===e&&(i.blockedOn=null)}}for(lc!==null&&im(lc,e),cc!==null&&im(cc,e),uc!==null&&im(uc,e),ug.forEach(t),dg.forEach(t),n=0;n<rc.length;n++)i=rc[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<rc.length&&(n=rc[0],n.blockedOn===null);)kO(n),n.blockedOn===null&&rc.shift()}var Dh=ul.ReactCurrentBatchConfig,Zv=!0;function U$(e,t,n,i){var c=Pr,u=Dh.transition;Dh.transition=null;try{Pr=1,XE(e,t,n,i)}finally{Pr=c,Dh.transition=u}}function j$(e,t,n,i){var c=Pr,u=Dh.transition;Dh.transition=null;try{Pr=4,XE(e,t,n,i)}finally{Pr=c,Dh.transition=u}}function XE(e,t,n,i){if(Zv){var c=iS(e,t,n,i);if(c===null)pw(e,t,i,Xv,n),DA(e,i);else if(N$(c,e,t,n,i))i.stopPropagation();else if(DA(e,i),t&4&&-1<B$.indexOf(e)){for(;c!==null;){var u=Ng(c);if(u!==null&&CO(u),u=iS(e,t,n,i),u===null&&pw(e,t,i,Xv,n),u===c)break;c=u}c!==null&&i.stopPropagation()}else pw(e,t,i,null,n)}}var Xv=null;function iS(e,t,n,i){if(Xv=null,e=WE(i),e=Lu(e),e!==null)if(t=nd(e),t===null)e=null;else if(n=t.tag,n===13){if(e=vO(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xv=e,null}function PO(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(A$()){case qE:return 1;case wO:return 4;case qv:case k$:return 16;case SO:return 536870912;default:return 16}default:return 16}}var ac=null,KE=null,Cv=null;function IO(){if(Cv)return Cv;var e,t=KE,n=t.length,i,c="value"in ac?ac.value:ac.textContent,u=c.length;for(e=0;e<n&&t[e]===c[e];e++);var p=n-e;for(i=1;i<=p&&t[n-i]===c[u-i];i++);return Cv=c.slice(e,1<i?1-i:void 0)}function Rv(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function V0(){return!0}function FA(){return!1}function ta(e){function t(n,i,c,u,p){this._reactName=n,this._targetInst=c,this.type=i,this.nativeEvent=u,this.target=p,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(u):u[o]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?V0:FA,this.isPropagationStopped=FA,this}return hi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=V0)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=V0)},persist:function(){},isPersistent:V0}),t}var hf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},YE=ta(hf),Bg=hi({},hf,{view:0,detail:0}),V$=ta(Bg),ow,aw,om,$_=hi({},Bg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:QE,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==om&&(om&&e.type==="mousemove"?(ow=e.screenX-om.screenX,aw=e.screenY-om.screenY):aw=ow=0,om=e),ow)},movementY:function(e){return"movementY"in e?e.movementY:aw}}),BA=ta($_),G$=hi({},$_,{dataTransfer:0}),W$=ta(G$),q$=hi({},Bg,{relatedTarget:0}),sw=ta(q$),H$=hi({},hf,{animationName:0,elapsedTime:0,pseudoElement:0}),Z$=ta(H$),X$=hi({},hf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),K$=ta(X$),Y$=hi({},hf,{data:0}),NA=ta(Y$),Q$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},J$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},e8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t8(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=e8[e])?!!t[e]:!1}function QE(){return t8}var n8=hi({},Bg,{key:function(e){if(e.key){var t=Q$[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Rv(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?J$[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:QE,charCode:function(e){return e.type==="keypress"?Rv(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Rv(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),r8=ta(n8),i8=hi({},$_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$A=ta(i8),o8=hi({},Bg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:QE}),a8=ta(o8),s8=hi({},hf,{propertyName:0,elapsedTime:0,pseudoElement:0}),l8=ta(s8),c8=hi({},$_,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),u8=ta(c8),d8=[9,13,27,32],JE=tl&&"CompositionEvent"in window,Vm=null;tl&&"documentMode"in document&&(Vm=document.documentMode);var h8=tl&&"TextEvent"in window&&!Vm,LO=tl&&(!JE||Vm&&8<Vm&&11>=Vm),UA=String.fromCharCode(32),jA=!1;function OO(e,t){switch(e){case"keyup":return d8.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DO(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var yh=!1;function f8(e,t){switch(e){case"compositionend":return DO(t);case"keypress":return t.which!==32?null:(jA=!0,UA);case"textInput":return e=t.data,e===UA&&jA?null:e;default:return null}}function p8(e,t){if(yh)return e==="compositionend"||!JE&&OO(e,t)?(e=IO(),Cv=KE=ac=null,yh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return LO&&t.locale!=="ko"?null:t.data;default:return null}}var m8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function VA(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!m8[e.type]:t==="textarea"}function zO(e,t,n,i){fO(i),t=Kv(t,"onChange"),0<t.length&&(n=new YE("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Gm=null,fg=null;function g8(e){HO(e,0)}function U_(e){var t=xh(e);if(aO(t))return e}function y8(e,t){if(e==="change")return t}var FO=!1;if(tl){var lw;if(tl){var cw="oninput"in document;if(!cw){var GA=document.createElement("div");GA.setAttribute("oninput","return;"),cw=typeof GA.oninput=="function"}lw=cw}else lw=!1;FO=lw&&(!document.documentMode||9<document.documentMode)}function WA(){Gm&&(Gm.detachEvent("onpropertychange",BO),fg=Gm=null)}function BO(e){if(e.propertyName==="value"&&U_(fg)){var t=[];zO(t,fg,e,WE(e)),yO(g8,t)}}function v8(e,t,n){e==="focusin"?(WA(),Gm=t,fg=n,Gm.attachEvent("onpropertychange",BO)):e==="focusout"&&WA()}function _8(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return U_(fg)}function x8(e,t){if(e==="click")return U_(t)}function b8(e,t){if(e==="input"||e==="change")return U_(t)}function w8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var es=typeof Object.is=="function"?Object.is:w8;function pg(e,t){if(es(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var c=n[i];if(!$2.call(t,c)||!es(e[c],t[c]))return!1}return!0}function qA(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function HA(e,t){var n=qA(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qA(n)}}function NO(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?NO(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $O(){for(var e=window,t=Vv();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Vv(e.document)}return t}function eT(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function S8(e){var t=$O(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&NO(n.ownerDocument.documentElement,n)){if(i!==null&&eT(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=n.textContent.length,u=Math.min(i.start,c);i=i.end===void 0?u:Math.min(i.end,c),!e.extend&&u>i&&(c=i,i=u,u=c),c=HA(n,u);var p=HA(n,i);c&&p&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==p.node||e.focusOffset!==p.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),u>i?(e.addRange(t),e.extend(p.node,p.offset)):(t.setEnd(p.node,p.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var E8=tl&&"documentMode"in document&&11>=document.documentMode,vh=null,oS=null,Wm=null,aS=!1;function ZA(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;aS||vh==null||vh!==Vv(i)||(i=vh,"selectionStart"in i&&eT(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Wm&&pg(Wm,i)||(Wm=i,i=Kv(oS,"onSelect"),0<i.length&&(t=new YE("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=vh)))}function G0(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _h={animationend:G0("Animation","AnimationEnd"),animationiteration:G0("Animation","AnimationIteration"),animationstart:G0("Animation","AnimationStart"),transitionend:G0("Transition","TransitionEnd")},uw={},UO={};tl&&(UO=document.createElement("div").style,"AnimationEvent"in window||(delete _h.animationend.animation,delete _h.animationiteration.animation,delete _h.animationstart.animation),"TransitionEvent"in window||delete _h.transitionend.transition);function j_(e){if(uw[e])return uw[e];if(!_h[e])return e;var t=_h[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in UO)return uw[e]=t[n];return e}var jO=j_("animationend"),VO=j_("animationiteration"),GO=j_("animationstart"),WO=j_("transitionend"),qO=new Map,XA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rc(e,t){qO.set(e,t),td(t,[e])}for(var dw=0;dw<XA.length;dw++){var hw=XA[dw],T8=hw.toLowerCase(),C8=hw[0].toUpperCase()+hw.slice(1);Rc(T8,"on"+C8)}Rc(jO,"onAnimationEnd");Rc(VO,"onAnimationIteration");Rc(GO,"onAnimationStart");Rc("dblclick","onDoubleClick");Rc("focusin","onFocus");Rc("focusout","onBlur");Rc(WO,"onTransitionEnd");Gh("onMouseEnter",["mouseout","mouseover"]);Gh("onMouseLeave",["mouseout","mouseover"]);Gh("onPointerEnter",["pointerout","pointerover"]);Gh("onPointerLeave",["pointerout","pointerover"]);td("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));td("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));td("onBeforeInput",["compositionend","keypress","textInput","paste"]);td("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));td("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));td("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Om="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),R8=new Set("cancel close invalid load scroll toggle".split(" ").concat(Om));function KA(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,T$(i,t,void 0,e),e.currentTarget=null}function HO(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],c=i.event;i=i.listeners;e:{var u=void 0;if(t)for(var p=i.length-1;0<=p;p--){var o=i[p],x=o.instance,S=o.currentTarget;if(o=o.listener,x!==u&&c.isPropagationStopped())break e;KA(c,o,S),u=x}else for(p=0;p<i.length;p++){if(o=i[p],x=o.instance,S=o.currentTarget,o=o.listener,x!==u&&c.isPropagationStopped())break e;KA(c,o,S),u=x}}}if(Wv)throw e=tS,Wv=!1,tS=null,e}function Vr(e,t){var n=t[dS];n===void 0&&(n=t[dS]=new Set);var i=e+"__bubble";n.has(i)||(ZO(t,e,2,!1),n.add(i))}function fw(e,t,n){var i=0;t&&(i|=4),ZO(n,e,i,t)}var W0="_reactListening"+Math.random().toString(36).slice(2);function mg(e){if(!e[W0]){e[W0]=!0,tO.forEach(function(n){n!=="selectionchange"&&(R8.has(n)||fw(n,!1,e),fw(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[W0]||(t[W0]=!0,fw("selectionchange",!1,t))}}function ZO(e,t,n,i){switch(PO(t)){case 1:var c=U$;break;case 4:c=j$;break;default:c=XE}n=c.bind(null,t,n,e),c=void 0,!eS||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),i?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function pw(e,t,n,i,c){var u=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var p=i.tag;if(p===3||p===4){var o=i.stateNode.containerInfo;if(o===c||o.nodeType===8&&o.parentNode===c)break;if(p===4)for(p=i.return;p!==null;){var x=p.tag;if((x===3||x===4)&&(x=p.stateNode.containerInfo,x===c||x.nodeType===8&&x.parentNode===c))return;p=p.return}for(;o!==null;){if(p=Lu(o),p===null)return;if(x=p.tag,x===5||x===6){i=u=p;continue e}o=o.parentNode}}i=i.return}yO(function(){var S=u,M=WE(n),k=[];e:{var L=qO.get(e);if(L!==void 0){var j=YE,F=e;switch(e){case"keypress":if(Rv(n)===0)break e;case"keydown":case"keyup":j=r8;break;case"focusin":F="focus",j=sw;break;case"focusout":F="blur",j=sw;break;case"beforeblur":case"afterblur":j=sw;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=BA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=W$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=a8;break;case jO:case VO:case GO:j=Z$;break;case WO:j=l8;break;case"scroll":j=V$;break;case"wheel":j=u8;break;case"copy":case"cut":case"paste":j=K$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=$A}var V=(t&4)!==0,oe=!V&&e==="scroll",B=V?L!==null?L+"Capture":null:L;V=[];for(var $=S,Z;$!==null;){Z=$;var Q=Z.stateNode;if(Z.tag===5&&Q!==null&&(Z=Q,B!==null&&(Q=cg($,B),Q!=null&&V.push(gg($,Q,Z)))),oe)break;$=$.return}0<V.length&&(L=new j(L,F,null,n,M),k.push({event:L,listeners:V}))}}if(!(t&7)){e:{if(L=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",L&&n!==Q2&&(F=n.relatedTarget||n.fromElement)&&(Lu(F)||F[nl]))break e;if((j||L)&&(L=M.window===M?M:(L=M.ownerDocument)?L.defaultView||L.parentWindow:window,j?(F=n.relatedTarget||n.toElement,j=S,F=F?Lu(F):null,F!==null&&(oe=nd(F),F!==oe||F.tag!==5&&F.tag!==6)&&(F=null)):(j=null,F=S),j!==F)){if(V=BA,Q="onMouseLeave",B="onMouseEnter",$="mouse",(e==="pointerout"||e==="pointerover")&&(V=$A,Q="onPointerLeave",B="onPointerEnter",$="pointer"),oe=j==null?L:xh(j),Z=F==null?L:xh(F),L=new V(Q,$+"leave",j,n,M),L.target=oe,L.relatedTarget=Z,Q=null,Lu(M)===S&&(V=new V(B,$+"enter",F,n,M),V.target=Z,V.relatedTarget=oe,Q=V),oe=Q,j&&F)t:{for(V=j,B=F,$=0,Z=V;Z;Z=ih(Z))$++;for(Z=0,Q=B;Q;Q=ih(Q))Z++;for(;0<$-Z;)V=ih(V),$--;for(;0<Z-$;)B=ih(B),Z--;for(;$--;){if(V===B||B!==null&&V===B.alternate)break t;V=ih(V),B=ih(B)}V=null}else V=null;j!==null&&YA(k,L,j,V,!1),F!==null&&oe!==null&&YA(k,oe,F,V,!0)}}e:{if(L=S?xh(S):window,j=L.nodeName&&L.nodeName.toLowerCase(),j==="select"||j==="input"&&L.type==="file")var ae=y8;else if(VA(L))if(FO)ae=b8;else{ae=_8;var ue=v8}else(j=L.nodeName)&&j.toLowerCase()==="input"&&(L.type==="checkbox"||L.type==="radio")&&(ae=x8);if(ae&&(ae=ae(e,S))){zO(k,ae,n,M);break e}ue&&ue(e,L,S),e==="focusout"&&(ue=L._wrapperState)&&ue.controlled&&L.type==="number"&&H2(L,"number",L.value)}switch(ue=S?xh(S):window,e){case"focusin":(VA(ue)||ue.contentEditable==="true")&&(vh=ue,oS=S,Wm=null);break;case"focusout":Wm=oS=vh=null;break;case"mousedown":aS=!0;break;case"contextmenu":case"mouseup":case"dragend":aS=!1,ZA(k,n,M);break;case"selectionchange":if(E8)break;case"keydown":case"keyup":ZA(k,n,M)}var de;if(JE)e:{switch(e){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else yh?OO(e,n)&&(ke="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(ke="onCompositionStart");ke&&(LO&&n.locale!=="ko"&&(yh||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&yh&&(de=IO()):(ac=M,KE="value"in ac?ac.value:ac.textContent,yh=!0)),ue=Kv(S,ke),0<ue.length&&(ke=new NA(ke,e,null,n,M),k.push({event:ke,listeners:ue}),de?ke.data=de:(de=DO(n),de!==null&&(ke.data=de)))),(de=h8?f8(e,n):p8(e,n))&&(S=Kv(S,"onBeforeInput"),0<S.length&&(M=new NA("onBeforeInput","beforeinput",null,n,M),k.push({event:M,listeners:S}),M.data=de))}HO(k,t)})}function gg(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kv(e,t){for(var n=t+"Capture",i=[];e!==null;){var c=e,u=c.stateNode;c.tag===5&&u!==null&&(c=u,u=cg(e,n),u!=null&&i.unshift(gg(e,u,c)),u=cg(e,t),u!=null&&i.push(gg(e,u,c))),e=e.return}return i}function ih(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function YA(e,t,n,i,c){for(var u=t._reactName,p=[];n!==null&&n!==i;){var o=n,x=o.alternate,S=o.stateNode;if(x!==null&&x===i)break;o.tag===5&&S!==null&&(o=S,c?(x=cg(n,u),x!=null&&p.unshift(gg(n,x,o))):c||(x=cg(n,u),x!=null&&p.push(gg(n,x,o)))),n=n.return}p.length!==0&&e.push({event:t,listeners:p})}var M8=/\r\n?/g,A8=/\u0000|\uFFFD/g;function QA(e){return(typeof e=="string"?e:""+e).replace(M8,`
`).replace(A8,"")}function q0(e,t,n){if(t=QA(t),QA(e)!==t&&n)throw Error(jt(425))}function Yv(){}var sS=null,lS=null;function cS(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var uS=typeof setTimeout=="function"?setTimeout:void 0,k8=typeof clearTimeout=="function"?clearTimeout:void 0,JA=typeof Promise=="function"?Promise:void 0,P8=typeof queueMicrotask=="function"?queueMicrotask:typeof JA<"u"?function(e){return JA.resolve(null).then(e).catch(I8)}:uS;function I8(e){setTimeout(function(){throw e})}function mw(e,t){var n=t,i=0;do{var c=n.nextSibling;if(e.removeChild(n),c&&c.nodeType===8)if(n=c.data,n==="/$"){if(i===0){e.removeChild(c),hg(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=c}while(n);hg(t)}function dc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ek(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ff=Math.random().toString(36).slice(2),gs="__reactFiber$"+ff,yg="__reactProps$"+ff,nl="__reactContainer$"+ff,dS="__reactEvents$"+ff,L8="__reactListeners$"+ff,O8="__reactHandles$"+ff;function Lu(e){var t=e[gs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[nl]||n[gs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ek(e);e!==null;){if(n=e[gs])return n;e=ek(e)}return t}e=n,n=e.parentNode}return null}function Ng(e){return e=e[gs]||e[nl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function xh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(jt(33))}function V_(e){return e[yg]||null}var hS=[],bh=-1;function Mc(e){return{current:e}}function qr(e){0>bh||(e.current=hS[bh],hS[bh]=null,bh--)}function $r(e,t){bh++,hS[bh]=e.current,e.current=t}var xc={},uo=Mc(xc),Io=Mc(!1),Gu=xc;function Wh(e,t){var n=e.type.contextTypes;if(!n)return xc;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var c={},u;for(u in n)c[u]=t[u];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Lo(e){return e=e.childContextTypes,e!=null}function Qv(){qr(Io),qr(uo)}function tk(e,t,n){if(uo.current!==xc)throw Error(jt(168));$r(uo,t),$r(Io,n)}function XO(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var c in i)if(!(c in t))throw Error(jt(108,v$(e)||"Unknown",c));return hi({},n,i)}function Jv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xc,Gu=uo.current,$r(uo,e),$r(Io,Io.current),!0}function nk(e,t,n){var i=e.stateNode;if(!i)throw Error(jt(169));n?(e=XO(e,t,Gu),i.__reactInternalMemoizedMergedChildContext=e,qr(Io),qr(uo),$r(uo,e)):qr(Io),$r(Io,n)}var Zs=null,G_=!1,gw=!1;function KO(e){Zs===null?Zs=[e]:Zs.push(e)}function D8(e){G_=!0,KO(e)}function Ac(){if(!gw&&Zs!==null){gw=!0;var e=0,t=Pr;try{var n=Zs;for(Pr=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}Zs=null,G_=!1}catch(c){throw Zs!==null&&(Zs=Zs.slice(e+1)),bO(qE,Ac),c}finally{Pr=t,gw=!1}}return null}var wh=[],Sh=0,e_=null,t_=0,ma=[],ga=0,Wu=null,Ys=1,Qs="";function Eu(e,t){wh[Sh++]=t_,wh[Sh++]=e_,e_=e,t_=t}function YO(e,t,n){ma[ga++]=Ys,ma[ga++]=Qs,ma[ga++]=Wu,Wu=e;var i=Ys;e=Qs;var c=32-Qa(i)-1;i&=~(1<<c),n+=1;var u=32-Qa(t)+c;if(30<u){var p=c-c%5;u=(i&(1<<p)-1).toString(32),i>>=p,c-=p,Ys=1<<32-Qa(t)+c|n<<c|i,Qs=u+e}else Ys=1<<u|n<<c|i,Qs=e}function tT(e){e.return!==null&&(Eu(e,1),YO(e,1,0))}function nT(e){for(;e===e_;)e_=wh[--Sh],wh[Sh]=null,t_=wh[--Sh],wh[Sh]=null;for(;e===Wu;)Wu=ma[--ga],ma[ga]=null,Qs=ma[--ga],ma[ga]=null,Ys=ma[--ga],ma[ga]=null}var Ko=null,Xo=null,ei=!1,Ka=null;function QO(e,t){var n=ya(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function rk(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ko=e,Xo=dc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ko=e,Xo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Wu!==null?{id:Ys,overflow:Qs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ya(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ko=e,Xo=null,!0):!1;default:return!1}}function fS(e){return(e.mode&1)!==0&&(e.flags&128)===0}function pS(e){if(ei){var t=Xo;if(t){var n=t;if(!rk(e,t)){if(fS(e))throw Error(jt(418));t=dc(n.nextSibling);var i=Ko;t&&rk(e,t)?QO(i,n):(e.flags=e.flags&-4097|2,ei=!1,Ko=e)}}else{if(fS(e))throw Error(jt(418));e.flags=e.flags&-4097|2,ei=!1,Ko=e}}}function ik(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ko=e}function H0(e){if(e!==Ko)return!1;if(!ei)return ik(e),ei=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!cS(e.type,e.memoizedProps)),t&&(t=Xo)){if(fS(e))throw JO(),Error(jt(418));for(;t;)QO(e,t),t=dc(t.nextSibling)}if(ik(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(jt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Xo=dc(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Xo=null}}else Xo=Ko?dc(e.stateNode.nextSibling):null;return!0}function JO(){for(var e=Xo;e;)e=dc(e.nextSibling)}function qh(){Xo=Ko=null,ei=!1}function rT(e){Ka===null?Ka=[e]:Ka.push(e)}var z8=ul.ReactCurrentBatchConfig;function Ha(e,t){if(e&&e.defaultProps){t=hi({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var n_=Mc(null),r_=null,Eh=null,iT=null;function oT(){iT=Eh=r_=null}function aT(e){var t=n_.current;qr(n_),e._currentValue=t}function mS(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function zh(e,t){r_=e,iT=Eh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Po=!0),e.firstContext=null)}function xa(e){var t=e._currentValue;if(iT!==e)if(e={context:e,memoizedValue:t,next:null},Eh===null){if(r_===null)throw Error(jt(308));Eh=e,r_.dependencies={lanes:0,firstContext:e}}else Eh=Eh.next=e;return t}var Ou=null;function sT(e){Ou===null?Ou=[e]:Ou.push(e)}function eD(e,t,n,i){var c=t.interleaved;return c===null?(n.next=n,sT(t)):(n.next=c.next,c.next=n),t.interleaved=n,rl(e,i)}function rl(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Jl=!1;function lT(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tD(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Js(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function hc(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,lr&2){var c=i.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),i.pending=t,rl(e,n)}return c=i.interleaved,c===null?(t.next=t,sT(i)):(t.next=c.next,c.next=t),i.interleaved=t,rl(e,n)}function Mv(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,HE(e,n)}}function ok(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var c=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var p={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};u===null?c=u=p:u=u.next=p,n=n.next}while(n!==null);u===null?c=u=t:u=u.next=t}else c=u=t;n={baseState:i.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function i_(e,t,n,i){var c=e.updateQueue;Jl=!1;var u=c.firstBaseUpdate,p=c.lastBaseUpdate,o=c.shared.pending;if(o!==null){c.shared.pending=null;var x=o,S=x.next;x.next=null,p===null?u=S:p.next=S,p=x;var M=e.alternate;M!==null&&(M=M.updateQueue,o=M.lastBaseUpdate,o!==p&&(o===null?M.firstBaseUpdate=S:o.next=S,M.lastBaseUpdate=x))}if(u!==null){var k=c.baseState;p=0,M=S=x=null,o=u;do{var L=o.lane,j=o.eventTime;if((i&L)===L){M!==null&&(M=M.next={eventTime:j,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var F=e,V=o;switch(L=t,j=n,V.tag){case 1:if(F=V.payload,typeof F=="function"){k=F.call(j,k,L);break e}k=F;break e;case 3:F.flags=F.flags&-65537|128;case 0:if(F=V.payload,L=typeof F=="function"?F.call(j,k,L):F,L==null)break e;k=hi({},k,L);break e;case 2:Jl=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,L=c.effects,L===null?c.effects=[o]:L.push(o))}else j={eventTime:j,lane:L,tag:o.tag,payload:o.payload,callback:o.callback,next:null},M===null?(S=M=j,x=k):M=M.next=j,p|=L;if(o=o.next,o===null){if(o=c.shared.pending,o===null)break;L=o,o=L.next,L.next=null,c.lastBaseUpdate=L,c.shared.pending=null}}while(1);if(M===null&&(x=k),c.baseState=x,c.firstBaseUpdate=S,c.lastBaseUpdate=M,t=c.shared.interleaved,t!==null){c=t;do p|=c.lane,c=c.next;while(c!==t)}else u===null&&(c.shared.lanes=0);Hu|=p,e.lanes=p,e.memoizedState=k}}function ak(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],c=i.callback;if(c!==null){if(i.callback=null,i=n,typeof c!="function")throw Error(jt(191,c));c.call(i)}}}var nD=new eO.Component().refs;function gS(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:hi({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var W_={isMounted:function(e){return(e=e._reactInternals)?nd(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=yo(),c=pc(e),u=Js(i,c);u.payload=t,n!=null&&(u.callback=n),t=hc(e,u,c),t!==null&&(Ja(t,e,c,i),Mv(t,e,c))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=yo(),c=pc(e),u=Js(i,c);u.tag=1,u.payload=t,n!=null&&(u.callback=n),t=hc(e,u,c),t!==null&&(Ja(t,e,c,i),Mv(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=yo(),i=pc(e),c=Js(n,i);c.tag=2,t!=null&&(c.callback=t),t=hc(e,c,i),t!==null&&(Ja(t,e,i,n),Mv(t,e,i))}};function sk(e,t,n,i,c,u,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,u,p):t.prototype&&t.prototype.isPureReactComponent?!pg(n,i)||!pg(c,u):!0}function rD(e,t,n){var i=!1,c=xc,u=t.contextType;return typeof u=="object"&&u!==null?u=xa(u):(c=Lo(t)?Gu:uo.current,i=t.contextTypes,u=(i=i!=null)?Wh(e,c):xc),t=new t(n,u),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=W_,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=u),t}function lk(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&W_.enqueueReplaceState(t,t.state,null)}function yS(e,t,n,i){var c=e.stateNode;c.props=n,c.state=e.memoizedState,c.refs=nD,lT(e);var u=t.contextType;typeof u=="object"&&u!==null?c.context=xa(u):(u=Lo(t)?Gu:uo.current,c.context=Wh(e,u)),c.state=e.memoizedState,u=t.getDerivedStateFromProps,typeof u=="function"&&(gS(e,t,u,n),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&W_.enqueueReplaceState(c,c.state,null),i_(e,n,c,i),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function am(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(jt(309));var i=n.stateNode}if(!i)throw Error(jt(147,e));var c=i,u=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===u?t.ref:(t=function(p){var o=c.refs;o===nD&&(o=c.refs={}),p===null?delete o[u]:o[u]=p},t._stringRef=u,t)}if(typeof e!="string")throw Error(jt(284));if(!n._owner)throw Error(jt(290,e))}return e}function Z0(e,t){throw e=Object.prototype.toString.call(t),Error(jt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ck(e){var t=e._init;return t(e._payload)}function iD(e){function t(B,$){if(e){var Z=B.deletions;Z===null?(B.deletions=[$],B.flags|=16):Z.push($)}}function n(B,$){if(!e)return null;for(;$!==null;)t(B,$),$=$.sibling;return null}function i(B,$){for(B=new Map;$!==null;)$.key!==null?B.set($.key,$):B.set($.index,$),$=$.sibling;return B}function c(B,$){return B=mc(B,$),B.index=0,B.sibling=null,B}function u(B,$,Z){return B.index=Z,e?(Z=B.alternate,Z!==null?(Z=Z.index,Z<$?(B.flags|=2,$):Z):(B.flags|=2,$)):(B.flags|=1048576,$)}function p(B){return e&&B.alternate===null&&(B.flags|=2),B}function o(B,$,Z,Q){return $===null||$.tag!==6?($=Sw(Z,B.mode,Q),$.return=B,$):($=c($,Z),$.return=B,$)}function x(B,$,Z,Q){var ae=Z.type;return ae===gh?M(B,$,Z.props.children,Q,Z.key):$!==null&&($.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===Ql&&ck(ae)===$.type)?(Q=c($,Z.props),Q.ref=am(B,$,Z),Q.return=B,Q):(Q=Ov(Z.type,Z.key,Z.props,null,B.mode,Q),Q.ref=am(B,$,Z),Q.return=B,Q)}function S(B,$,Z,Q){return $===null||$.tag!==4||$.stateNode.containerInfo!==Z.containerInfo||$.stateNode.implementation!==Z.implementation?($=Ew(Z,B.mode,Q),$.return=B,$):($=c($,Z.children||[]),$.return=B,$)}function M(B,$,Z,Q,ae){return $===null||$.tag!==7?($=$u(Z,B.mode,Q,ae),$.return=B,$):($=c($,Z),$.return=B,$)}function k(B,$,Z){if(typeof $=="string"&&$!==""||typeof $=="number")return $=Sw(""+$,B.mode,Z),$.return=B,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case F0:return Z=Ov($.type,$.key,$.props,null,B.mode,Z),Z.ref=am(B,null,$),Z.return=B,Z;case mh:return $=Ew($,B.mode,Z),$.return=B,$;case Ql:var Q=$._init;return k(B,Q($._payload),Z)}if(Im($)||tm($))return $=$u($,B.mode,Z,null),$.return=B,$;Z0(B,$)}return null}function L(B,$,Z,Q){var ae=$!==null?$.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number")return ae!==null?null:o(B,$,""+Z,Q);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case F0:return Z.key===ae?x(B,$,Z,Q):null;case mh:return Z.key===ae?S(B,$,Z,Q):null;case Ql:return ae=Z._init,L(B,$,ae(Z._payload),Q)}if(Im(Z)||tm(Z))return ae!==null?null:M(B,$,Z,Q,null);Z0(B,Z)}return null}function j(B,$,Z,Q,ae){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return B=B.get(Z)||null,o($,B,""+Q,ae);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case F0:return B=B.get(Q.key===null?Z:Q.key)||null,x($,B,Q,ae);case mh:return B=B.get(Q.key===null?Z:Q.key)||null,S($,B,Q,ae);case Ql:var ue=Q._init;return j(B,$,Z,ue(Q._payload),ae)}if(Im(Q)||tm(Q))return B=B.get(Z)||null,M($,B,Q,ae,null);Z0($,Q)}return null}function F(B,$,Z,Q){for(var ae=null,ue=null,de=$,ke=$=0,J=null;de!==null&&ke<Z.length;ke++){de.index>ke?(J=de,de=null):J=de.sibling;var G=L(B,de,Z[ke],Q);if(G===null){de===null&&(de=J);break}e&&de&&G.alternate===null&&t(B,de),$=u(G,$,ke),ue===null?ae=G:ue.sibling=G,ue=G,de=J}if(ke===Z.length)return n(B,de),ei&&Eu(B,ke),ae;if(de===null){for(;ke<Z.length;ke++)de=k(B,Z[ke],Q),de!==null&&($=u(de,$,ke),ue===null?ae=de:ue.sibling=de,ue=de);return ei&&Eu(B,ke),ae}for(de=i(B,de);ke<Z.length;ke++)J=j(de,B,ke,Z[ke],Q),J!==null&&(e&&J.alternate!==null&&de.delete(J.key===null?ke:J.key),$=u(J,$,ke),ue===null?ae=J:ue.sibling=J,ue=J);return e&&de.forEach(function(pe){return t(B,pe)}),ei&&Eu(B,ke),ae}function V(B,$,Z,Q){var ae=tm(Z);if(typeof ae!="function")throw Error(jt(150));if(Z=ae.call(Z),Z==null)throw Error(jt(151));for(var ue=ae=null,de=$,ke=$=0,J=null,G=Z.next();de!==null&&!G.done;ke++,G=Z.next()){de.index>ke?(J=de,de=null):J=de.sibling;var pe=L(B,de,G.value,Q);if(pe===null){de===null&&(de=J);break}e&&de&&pe.alternate===null&&t(B,de),$=u(pe,$,ke),ue===null?ae=pe:ue.sibling=pe,ue=pe,de=J}if(G.done)return n(B,de),ei&&Eu(B,ke),ae;if(de===null){for(;!G.done;ke++,G=Z.next())G=k(B,G.value,Q),G!==null&&($=u(G,$,ke),ue===null?ae=G:ue.sibling=G,ue=G);return ei&&Eu(B,ke),ae}for(de=i(B,de);!G.done;ke++,G=Z.next())G=j(de,B,ke,G.value,Q),G!==null&&(e&&G.alternate!==null&&de.delete(G.key===null?ke:G.key),$=u(G,$,ke),ue===null?ae=G:ue.sibling=G,ue=G);return e&&de.forEach(function($e){return t(B,$e)}),ei&&Eu(B,ke),ae}function oe(B,$,Z,Q){if(typeof Z=="object"&&Z!==null&&Z.type===gh&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case F0:e:{for(var ae=Z.key,ue=$;ue!==null;){if(ue.key===ae){if(ae=Z.type,ae===gh){if(ue.tag===7){n(B,ue.sibling),$=c(ue,Z.props.children),$.return=B,B=$;break e}}else if(ue.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===Ql&&ck(ae)===ue.type){n(B,ue.sibling),$=c(ue,Z.props),$.ref=am(B,ue,Z),$.return=B,B=$;break e}n(B,ue);break}else t(B,ue);ue=ue.sibling}Z.type===gh?($=$u(Z.props.children,B.mode,Q,Z.key),$.return=B,B=$):(Q=Ov(Z.type,Z.key,Z.props,null,B.mode,Q),Q.ref=am(B,$,Z),Q.return=B,B=Q)}return p(B);case mh:e:{for(ue=Z.key;$!==null;){if($.key===ue)if($.tag===4&&$.stateNode.containerInfo===Z.containerInfo&&$.stateNode.implementation===Z.implementation){n(B,$.sibling),$=c($,Z.children||[]),$.return=B,B=$;break e}else{n(B,$);break}else t(B,$);$=$.sibling}$=Ew(Z,B.mode,Q),$.return=B,B=$}return p(B);case Ql:return ue=Z._init,oe(B,$,ue(Z._payload),Q)}if(Im(Z))return F(B,$,Z,Q);if(tm(Z))return V(B,$,Z,Q);Z0(B,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"?(Z=""+Z,$!==null&&$.tag===6?(n(B,$.sibling),$=c($,Z),$.return=B,B=$):(n(B,$),$=Sw(Z,B.mode,Q),$.return=B,B=$),p(B)):n(B,$)}return oe}var Hh=iD(!0),oD=iD(!1),$g={},xs=Mc($g),vg=Mc($g),_g=Mc($g);function Du(e){if(e===$g)throw Error(jt(174));return e}function cT(e,t){switch($r(_g,t),$r(vg,e),$r(xs,$g),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:X2(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=X2(t,e)}qr(xs),$r(xs,t)}function Zh(){qr(xs),qr(vg),qr(_g)}function aD(e){Du(_g.current);var t=Du(xs.current),n=X2(t,e.type);t!==n&&($r(vg,e),$r(xs,n))}function uT(e){vg.current===e&&(qr(xs),qr(vg))}var ui=Mc(0);function o_(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yw=[];function dT(){for(var e=0;e<yw.length;e++)yw[e]._workInProgressVersionPrimary=null;yw.length=0}var Av=ul.ReactCurrentDispatcher,vw=ul.ReactCurrentBatchConfig,qu=0,di=null,Oi=null,Ui=null,a_=!1,qm=!1,xg=0,F8=0;function ao(){throw Error(jt(321))}function hT(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!es(e[n],t[n]))return!1;return!0}function fT(e,t,n,i,c,u){if(qu=u,di=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Av.current=e===null||e.memoizedState===null?U8:j8,e=n(i,c),qm){u=0;do{if(qm=!1,xg=0,25<=u)throw Error(jt(301));u+=1,Ui=Oi=null,t.updateQueue=null,Av.current=V8,e=n(i,c)}while(qm)}if(Av.current=s_,t=Oi!==null&&Oi.next!==null,qu=0,Ui=Oi=di=null,a_=!1,t)throw Error(jt(300));return e}function pT(){var e=xg!==0;return xg=0,e}function fs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ui===null?di.memoizedState=Ui=e:Ui=Ui.next=e,Ui}function ba(){if(Oi===null){var e=di.alternate;e=e!==null?e.memoizedState:null}else e=Oi.next;var t=Ui===null?di.memoizedState:Ui.next;if(t!==null)Ui=t,Oi=e;else{if(e===null)throw Error(jt(310));Oi=e,e={memoizedState:Oi.memoizedState,baseState:Oi.baseState,baseQueue:Oi.baseQueue,queue:Oi.queue,next:null},Ui===null?di.memoizedState=Ui=e:Ui=Ui.next=e}return Ui}function bg(e,t){return typeof t=="function"?t(e):t}function _w(e){var t=ba(),n=t.queue;if(n===null)throw Error(jt(311));n.lastRenderedReducer=e;var i=Oi,c=i.baseQueue,u=n.pending;if(u!==null){if(c!==null){var p=c.next;c.next=u.next,u.next=p}i.baseQueue=c=u,n.pending=null}if(c!==null){u=c.next,i=i.baseState;var o=p=null,x=null,S=u;do{var M=S.lane;if((qu&M)===M)x!==null&&(x=x.next={lane:0,action:S.action,hasEagerState:S.hasEagerState,eagerState:S.eagerState,next:null}),i=S.hasEagerState?S.eagerState:e(i,S.action);else{var k={lane:M,action:S.action,hasEagerState:S.hasEagerState,eagerState:S.eagerState,next:null};x===null?(o=x=k,p=i):x=x.next=k,di.lanes|=M,Hu|=M}S=S.next}while(S!==null&&S!==u);x===null?p=i:x.next=o,es(i,t.memoizedState)||(Po=!0),t.memoizedState=i,t.baseState=p,t.baseQueue=x,n.lastRenderedState=i}if(e=n.interleaved,e!==null){c=e;do u=c.lane,di.lanes|=u,Hu|=u,c=c.next;while(c!==e)}else c===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xw(e){var t=ba(),n=t.queue;if(n===null)throw Error(jt(311));n.lastRenderedReducer=e;var i=n.dispatch,c=n.pending,u=t.memoizedState;if(c!==null){n.pending=null;var p=c=c.next;do u=e(u,p.action),p=p.next;while(p!==c);es(u,t.memoizedState)||(Po=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),n.lastRenderedState=u}return[u,i]}function sD(){}function lD(e,t){var n=di,i=ba(),c=t(),u=!es(i.memoizedState,c);if(u&&(i.memoizedState=c,Po=!0),i=i.queue,mT(dD.bind(null,n,i,e),[e]),i.getSnapshot!==t||u||Ui!==null&&Ui.memoizedState.tag&1){if(n.flags|=2048,wg(9,uD.bind(null,n,i,c,t),void 0,null),ji===null)throw Error(jt(349));qu&30||cD(n,t,c)}return c}function cD(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=di.updateQueue,t===null?(t={lastEffect:null,stores:null},di.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function uD(e,t,n,i){t.value=n,t.getSnapshot=i,hD(t)&&fD(e)}function dD(e,t,n){return n(function(){hD(t)&&fD(e)})}function hD(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!es(e,n)}catch{return!0}}function fD(e){var t=rl(e,1);t!==null&&Ja(t,e,1,-1)}function uk(e){var t=fs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bg,lastRenderedState:e},t.queue=e,e=e.dispatch=$8.bind(null,di,e),[t.memoizedState,e]}function wg(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=di.updateQueue,t===null?(t={lastEffect:null,stores:null},di.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function pD(){return ba().memoizedState}function kv(e,t,n,i){var c=fs();di.flags|=e,c.memoizedState=wg(1|t,n,void 0,i===void 0?null:i)}function q_(e,t,n,i){var c=ba();i=i===void 0?null:i;var u=void 0;if(Oi!==null){var p=Oi.memoizedState;if(u=p.destroy,i!==null&&hT(i,p.deps)){c.memoizedState=wg(t,n,u,i);return}}di.flags|=e,c.memoizedState=wg(1|t,n,u,i)}function dk(e,t){return kv(8390656,8,e,t)}function mT(e,t){return q_(2048,8,e,t)}function mD(e,t){return q_(4,2,e,t)}function gD(e,t){return q_(4,4,e,t)}function yD(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function vD(e,t,n){return n=n!=null?n.concat([e]):null,q_(4,4,yD.bind(null,t,e),n)}function gT(){}function _D(e,t){var n=ba();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&hT(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function xD(e,t){var n=ba();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&hT(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function bD(e,t,n){return qu&21?(es(n,t)||(n=EO(),di.lanes|=n,Hu|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Po=!0),e.memoizedState=n)}function B8(e,t){var n=Pr;Pr=n!==0&&4>n?n:4,e(!0);var i=vw.transition;vw.transition={};try{e(!1),t()}finally{Pr=n,vw.transition=i}}function wD(){return ba().memoizedState}function N8(e,t,n){var i=pc(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},SD(e))ED(t,n);else if(n=eD(e,t,n,i),n!==null){var c=yo();Ja(n,e,i,c),TD(n,t,i)}}function $8(e,t,n){var i=pc(e),c={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(SD(e))ED(t,c);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var p=t.lastRenderedState,o=u(p,n);if(c.hasEagerState=!0,c.eagerState=o,es(o,p)){var x=t.interleaved;x===null?(c.next=c,sT(t)):(c.next=x.next,x.next=c),t.interleaved=c;return}}catch{}finally{}n=eD(e,t,c,i),n!==null&&(c=yo(),Ja(n,e,i,c),TD(n,t,i))}}function SD(e){var t=e.alternate;return e===di||t!==null&&t===di}function ED(e,t){qm=a_=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function TD(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,HE(e,n)}}var s_={readContext:xa,useCallback:ao,useContext:ao,useEffect:ao,useImperativeHandle:ao,useInsertionEffect:ao,useLayoutEffect:ao,useMemo:ao,useReducer:ao,useRef:ao,useState:ao,useDebugValue:ao,useDeferredValue:ao,useTransition:ao,useMutableSource:ao,useSyncExternalStore:ao,useId:ao,unstable_isNewReconciler:!1},U8={readContext:xa,useCallback:function(e,t){return fs().memoizedState=[e,t===void 0?null:t],e},useContext:xa,useEffect:dk,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,kv(4194308,4,yD.bind(null,t,e),n)},useLayoutEffect:function(e,t){return kv(4194308,4,e,t)},useInsertionEffect:function(e,t){return kv(4,2,e,t)},useMemo:function(e,t){var n=fs();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=fs();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=N8.bind(null,di,e),[i.memoizedState,e]},useRef:function(e){var t=fs();return e={current:e},t.memoizedState=e},useState:uk,useDebugValue:gT,useDeferredValue:function(e){return fs().memoizedState=e},useTransition:function(){var e=uk(!1),t=e[0];return e=B8.bind(null,e[1]),fs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=di,c=fs();if(ei){if(n===void 0)throw Error(jt(407));n=n()}else{if(n=t(),ji===null)throw Error(jt(349));qu&30||cD(i,t,n)}c.memoizedState=n;var u={value:n,getSnapshot:t};return c.queue=u,dk(dD.bind(null,i,u,e),[e]),i.flags|=2048,wg(9,uD.bind(null,i,u,n,t),void 0,null),n},useId:function(){var e=fs(),t=ji.identifierPrefix;if(ei){var n=Qs,i=Ys;n=(i&~(1<<32-Qa(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=xg++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=F8++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},j8={readContext:xa,useCallback:_D,useContext:xa,useEffect:mT,useImperativeHandle:vD,useInsertionEffect:mD,useLayoutEffect:gD,useMemo:xD,useReducer:_w,useRef:pD,useState:function(){return _w(bg)},useDebugValue:gT,useDeferredValue:function(e){var t=ba();return bD(t,Oi.memoizedState,e)},useTransition:function(){var e=_w(bg)[0],t=ba().memoizedState;return[e,t]},useMutableSource:sD,useSyncExternalStore:lD,useId:wD,unstable_isNewReconciler:!1},V8={readContext:xa,useCallback:_D,useContext:xa,useEffect:mT,useImperativeHandle:vD,useInsertionEffect:mD,useLayoutEffect:gD,useMemo:xD,useReducer:xw,useRef:pD,useState:function(){return xw(bg)},useDebugValue:gT,useDeferredValue:function(e){var t=ba();return Oi===null?t.memoizedState=e:bD(t,Oi.memoizedState,e)},useTransition:function(){var e=xw(bg)[0],t=ba().memoizedState;return[e,t]},useMutableSource:sD,useSyncExternalStore:lD,useId:wD,unstable_isNewReconciler:!1};function Xh(e,t){try{var n="",i=t;do n+=y$(i),i=i.return;while(i);var c=n}catch(u){c=`
Error generating stack: `+u.message+`
`+u.stack}return{value:e,source:t,stack:c,digest:null}}function bw(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function vS(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var G8=typeof WeakMap=="function"?WeakMap:Map;function CD(e,t,n){n=Js(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){c_||(c_=!0,MS=i),vS(e,t)},n}function RD(e,t,n){n=Js(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var c=t.value;n.payload=function(){return i(c)},n.callback=function(){vS(e,t)}}var u=e.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(n.callback=function(){vS(e,t),typeof i!="function"&&(fc===null?fc=new Set([this]):fc.add(this));var p=t.stack;this.componentDidCatch(t.value,{componentStack:p!==null?p:""})}),n}function hk(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new G8;var c=new Set;i.set(t,c)}else c=i.get(t),c===void 0&&(c=new Set,i.set(t,c));c.has(n)||(c.add(n),e=iU.bind(null,e,t,n),t.then(e,e))}function fk(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function pk(e,t,n,i,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Js(-1,1),t.tag=2,hc(n,t,1))),n.lanes|=1),e)}var W8=ul.ReactCurrentOwner,Po=!1;function go(e,t,n,i){t.child=e===null?oD(t,null,n,i):Hh(t,e.child,n,i)}function mk(e,t,n,i,c){n=n.render;var u=t.ref;return zh(t,c),i=fT(e,t,n,i,u,c),n=pT(),e!==null&&!Po?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,il(e,t,c)):(ei&&n&&tT(t),t.flags|=1,go(e,t,i,c),t.child)}function gk(e,t,n,i,c){if(e===null){var u=n.type;return typeof u=="function"&&!ET(u)&&u.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=u,MD(e,t,u,i,c)):(e=Ov(n.type,null,i,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!(e.lanes&c)){var p=u.memoizedProps;if(n=n.compare,n=n!==null?n:pg,n(p,i)&&e.ref===t.ref)return il(e,t,c)}return t.flags|=1,e=mc(u,i),e.ref=t.ref,e.return=t,t.child=e}function MD(e,t,n,i,c){if(e!==null){var u=e.memoizedProps;if(pg(u,i)&&e.ref===t.ref)if(Po=!1,t.pendingProps=i=u,(e.lanes&c)!==0)e.flags&131072&&(Po=!0);else return t.lanes=e.lanes,il(e,t,c)}return _S(e,t,n,i,c)}function AD(e,t,n){var i=t.pendingProps,c=i.children,u=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},$r(Ch,Ho),Ho|=n;else{if(!(n&1073741824))return e=u!==null?u.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,$r(Ch,Ho),Ho|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=u!==null?u.baseLanes:n,$r(Ch,Ho),Ho|=i}else u!==null?(i=u.baseLanes|n,t.memoizedState=null):i=n,$r(Ch,Ho),Ho|=i;return go(e,t,c,n),t.child}function kD(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _S(e,t,n,i,c){var u=Lo(n)?Gu:uo.current;return u=Wh(t,u),zh(t,c),n=fT(e,t,n,i,u,c),i=pT(),e!==null&&!Po?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,il(e,t,c)):(ei&&i&&tT(t),t.flags|=1,go(e,t,n,c),t.child)}function yk(e,t,n,i,c){if(Lo(n)){var u=!0;Jv(t)}else u=!1;if(zh(t,c),t.stateNode===null)Pv(e,t),rD(t,n,i),yS(t,n,i,c),i=!0;else if(e===null){var p=t.stateNode,o=t.memoizedProps;p.props=o;var x=p.context,S=n.contextType;typeof S=="object"&&S!==null?S=xa(S):(S=Lo(n)?Gu:uo.current,S=Wh(t,S));var M=n.getDerivedStateFromProps,k=typeof M=="function"||typeof p.getSnapshotBeforeUpdate=="function";k||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(o!==i||x!==S)&&lk(t,p,i,S),Jl=!1;var L=t.memoizedState;p.state=L,i_(t,i,p,c),x=t.memoizedState,o!==i||L!==x||Io.current||Jl?(typeof M=="function"&&(gS(t,n,M,i),x=t.memoizedState),(o=Jl||sk(t,n,o,i,L,x,S))?(k||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(t.flags|=4194308)):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=x),p.props=i,p.state=x,p.context=S,i=o):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{p=t.stateNode,tD(e,t),o=t.memoizedProps,S=t.type===t.elementType?o:Ha(t.type,o),p.props=S,k=t.pendingProps,L=p.context,x=n.contextType,typeof x=="object"&&x!==null?x=xa(x):(x=Lo(n)?Gu:uo.current,x=Wh(t,x));var j=n.getDerivedStateFromProps;(M=typeof j=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(o!==k||L!==x)&&lk(t,p,i,x),Jl=!1,L=t.memoizedState,p.state=L,i_(t,i,p,c);var F=t.memoizedState;o!==k||L!==F||Io.current||Jl?(typeof j=="function"&&(gS(t,n,j,i),F=t.memoizedState),(S=Jl||sk(t,n,S,i,L,F,x)||!1)?(M||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(i,F,x),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(i,F,x)),typeof p.componentDidUpdate=="function"&&(t.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof p.componentDidUpdate!="function"||o===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=F),p.props=i,p.state=F,p.context=x,i=S):(typeof p.componentDidUpdate!="function"||o===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),i=!1)}return xS(e,t,n,i,u,c)}function xS(e,t,n,i,c,u){kD(e,t);var p=(t.flags&128)!==0;if(!i&&!p)return c&&nk(t,n,!1),il(e,t,u);i=t.stateNode,W8.current=t;var o=p&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&p?(t.child=Hh(t,e.child,null,u),t.child=Hh(t,null,o,u)):go(e,t,o,u),t.memoizedState=i.state,c&&nk(t,n,!0),t.child}function PD(e){var t=e.stateNode;t.pendingContext?tk(e,t.pendingContext,t.pendingContext!==t.context):t.context&&tk(e,t.context,!1),cT(e,t.containerInfo)}function vk(e,t,n,i,c){return qh(),rT(c),t.flags|=256,go(e,t,n,i),t.child}var bS={dehydrated:null,treeContext:null,retryLane:0};function wS(e){return{baseLanes:e,cachePool:null,transitions:null}}function ID(e,t,n){var i=t.pendingProps,c=ui.current,u=!1,p=(t.flags&128)!==0,o;if((o=p)||(o=e!==null&&e.memoizedState===null?!1:(c&2)!==0),o?(u=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),$r(ui,c&1),e===null)return pS(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(p=i.children,e=i.fallback,u?(i=t.mode,u=t.child,p={mode:"hidden",children:p},!(i&1)&&u!==null?(u.childLanes=0,u.pendingProps=p):u=X_(p,i,0,null),e=$u(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=wS(n),t.memoizedState=bS,e):yT(t,p));if(c=e.memoizedState,c!==null&&(o=c.dehydrated,o!==null))return q8(e,t,p,i,o,c,n);if(u){u=i.fallback,p=t.mode,c=e.child,o=c.sibling;var x={mode:"hidden",children:i.children};return!(p&1)&&t.child!==c?(i=t.child,i.childLanes=0,i.pendingProps=x,t.deletions=null):(i=mc(c,x),i.subtreeFlags=c.subtreeFlags&14680064),o!==null?u=mc(o,u):(u=$u(u,p,n,null),u.flags|=2),u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,p=e.child.memoizedState,p=p===null?wS(n):{baseLanes:p.baseLanes|n,cachePool:null,transitions:p.transitions},u.memoizedState=p,u.childLanes=e.childLanes&~n,t.memoizedState=bS,i}return u=e.child,e=u.sibling,i=mc(u,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function yT(e,t){return t=X_({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function X0(e,t,n,i){return i!==null&&rT(i),Hh(t,e.child,null,n),e=yT(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function q8(e,t,n,i,c,u,p){if(n)return t.flags&256?(t.flags&=-257,i=bw(Error(jt(422))),X0(e,t,p,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(u=i.fallback,c=t.mode,i=X_({mode:"visible",children:i.children},c,0,null),u=$u(u,c,p,null),u.flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,t.mode&1&&Hh(t,e.child,null,p),t.child.memoizedState=wS(p),t.memoizedState=bS,u);if(!(t.mode&1))return X0(e,t,p,null);if(c.data==="$!"){if(i=c.nextSibling&&c.nextSibling.dataset,i)var o=i.dgst;return i=o,u=Error(jt(419)),i=bw(u,i,void 0),X0(e,t,p,i)}if(o=(p&e.childLanes)!==0,Po||o){if(i=ji,i!==null){switch(p&-p){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(i.suspendedLanes|p)?0:c,c!==0&&c!==u.retryLane&&(u.retryLane=c,rl(e,c),Ja(i,e,c,-1))}return ST(),i=bw(Error(jt(421))),X0(e,t,p,i)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=oU.bind(null,e),c._reactRetry=t,null):(e=u.treeContext,Xo=dc(c.nextSibling),Ko=t,ei=!0,Ka=null,e!==null&&(ma[ga++]=Ys,ma[ga++]=Qs,ma[ga++]=Wu,Ys=e.id,Qs=e.overflow,Wu=t),t=yT(t,i.children),t.flags|=4096,t)}function _k(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),mS(e.return,t,n)}function ww(e,t,n,i,c){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:c}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=i,u.tail=n,u.tailMode=c)}function LD(e,t,n){var i=t.pendingProps,c=i.revealOrder,u=i.tail;if(go(e,t,i.children,n),i=ui.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_k(e,n,t);else if(e.tag===19)_k(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if($r(ui,i),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&o_(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),ww(t,!1,c,n,u);break;case"backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&o_(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}ww(t,!0,n,null,u);break;case"together":ww(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Pv(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function il(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Hu|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(jt(153));if(t.child!==null){for(e=t.child,n=mc(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=mc(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function H8(e,t,n){switch(t.tag){case 3:PD(t),qh();break;case 5:aD(t);break;case 1:Lo(t.type)&&Jv(t);break;case 4:cT(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,c=t.memoizedProps.value;$r(n_,i._currentValue),i._currentValue=c;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?($r(ui,ui.current&1),t.flags|=128,null):n&t.child.childLanes?ID(e,t,n):($r(ui,ui.current&1),e=il(e,t,n),e!==null?e.sibling:null);$r(ui,ui.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return LD(e,t,n);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),$r(ui,ui.current),i)break;return null;case 22:case 23:return t.lanes=0,AD(e,t,n)}return il(e,t,n)}var OD,SS,DD,zD;OD=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};SS=function(){};DD=function(e,t,n,i){var c=e.memoizedProps;if(c!==i){e=t.stateNode,Du(xs.current);var u=null;switch(n){case"input":c=W2(e,c),i=W2(e,i),u=[];break;case"select":c=hi({},c,{value:void 0}),i=hi({},i,{value:void 0}),u=[];break;case"textarea":c=Z2(e,c),i=Z2(e,i),u=[];break;default:typeof c.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Yv)}K2(n,i);var p;n=null;for(S in c)if(!i.hasOwnProperty(S)&&c.hasOwnProperty(S)&&c[S]!=null)if(S==="style"){var o=c[S];for(p in o)o.hasOwnProperty(p)&&(n||(n={}),n[p]="")}else S!=="dangerouslySetInnerHTML"&&S!=="children"&&S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(sg.hasOwnProperty(S)?u||(u=[]):(u=u||[]).push(S,null));for(S in i){var x=i[S];if(o=c!=null?c[S]:void 0,i.hasOwnProperty(S)&&x!==o&&(x!=null||o!=null))if(S==="style")if(o){for(p in o)!o.hasOwnProperty(p)||x&&x.hasOwnProperty(p)||(n||(n={}),n[p]="");for(p in x)x.hasOwnProperty(p)&&o[p]!==x[p]&&(n||(n={}),n[p]=x[p])}else n||(u||(u=[]),u.push(S,n)),n=x;else S==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,o=o?o.__html:void 0,x!=null&&o!==x&&(u=u||[]).push(S,x)):S==="children"?typeof x!="string"&&typeof x!="number"||(u=u||[]).push(S,""+x):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&(sg.hasOwnProperty(S)?(x!=null&&S==="onScroll"&&Vr("scroll",e),u||o===x||(u=[])):(u=u||[]).push(S,x))}n&&(u=u||[]).push("style",n);var S=u;(t.updateQueue=S)&&(t.flags|=4)}};zD=function(e,t,n,i){n!==i&&(t.flags|=4)};function sm(e,t){if(!ei)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function so(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var c=e.child;c!==null;)n|=c.lanes|c.childLanes,i|=c.subtreeFlags&14680064,i|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)n|=c.lanes|c.childLanes,i|=c.subtreeFlags,i|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Z8(e,t,n){var i=t.pendingProps;switch(nT(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return so(t),null;case 1:return Lo(t.type)&&Qv(),so(t),null;case 3:return i=t.stateNode,Zh(),qr(Io),qr(uo),dT(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(H0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ka!==null&&(PS(Ka),Ka=null))),SS(e,t),so(t),null;case 5:uT(t);var c=Du(_g.current);if(n=t.type,e!==null&&t.stateNode!=null)DD(e,t,n,i,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(jt(166));return so(t),null}if(e=Du(xs.current),H0(t)){i=t.stateNode,n=t.type;var u=t.memoizedProps;switch(i[gs]=t,i[yg]=u,e=(t.mode&1)!==0,n){case"dialog":Vr("cancel",i),Vr("close",i);break;case"iframe":case"object":case"embed":Vr("load",i);break;case"video":case"audio":for(c=0;c<Om.length;c++)Vr(Om[c],i);break;case"source":Vr("error",i);break;case"img":case"image":case"link":Vr("error",i),Vr("load",i);break;case"details":Vr("toggle",i);break;case"input":MA(i,u),Vr("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!u.multiple},Vr("invalid",i);break;case"textarea":kA(i,u),Vr("invalid",i)}K2(n,u),c=null;for(var p in u)if(u.hasOwnProperty(p)){var o=u[p];p==="children"?typeof o=="string"?i.textContent!==o&&(u.suppressHydrationWarning!==!0&&q0(i.textContent,o,e),c=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(u.suppressHydrationWarning!==!0&&q0(i.textContent,o,e),c=["children",""+o]):sg.hasOwnProperty(p)&&o!=null&&p==="onScroll"&&Vr("scroll",i)}switch(n){case"input":B0(i),AA(i,u,!0);break;case"textarea":B0(i),PA(i);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(i.onclick=Yv)}i=c,t.updateQueue=i,i!==null&&(t.flags|=4)}else{p=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=cO(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=p.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=p.createElement(n,{is:i.is}):(e=p.createElement(n),n==="select"&&(p=e,i.multiple?p.multiple=!0:i.size&&(p.size=i.size))):e=p.createElementNS(e,n),e[gs]=t,e[yg]=i,OD(e,t,!1,!1),t.stateNode=e;e:{switch(p=Y2(n,i),n){case"dialog":Vr("cancel",e),Vr("close",e),c=i;break;case"iframe":case"object":case"embed":Vr("load",e),c=i;break;case"video":case"audio":for(c=0;c<Om.length;c++)Vr(Om[c],e);c=i;break;case"source":Vr("error",e),c=i;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),c=i;break;case"details":Vr("toggle",e),c=i;break;case"input":MA(e,i),c=W2(e,i),Vr("invalid",e);break;case"option":c=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},c=hi({},i,{value:void 0}),Vr("invalid",e);break;case"textarea":kA(e,i),c=Z2(e,i),Vr("invalid",e);break;default:c=i}K2(n,c),o=c;for(u in o)if(o.hasOwnProperty(u)){var x=o[u];u==="style"?hO(e,x):u==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&uO(e,x)):u==="children"?typeof x=="string"?(n!=="textarea"||x!=="")&&lg(e,x):typeof x=="number"&&lg(e,""+x):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(sg.hasOwnProperty(u)?x!=null&&u==="onScroll"&&Vr("scroll",e):x!=null&&UE(e,u,x,p))}switch(n){case"input":B0(e),AA(e,i,!1);break;case"textarea":B0(e),PA(e);break;case"option":i.value!=null&&e.setAttribute("value",""+_c(i.value));break;case"select":e.multiple=!!i.multiple,u=i.value,u!=null?Ih(e,!!i.multiple,u,!1):i.defaultValue!=null&&Ih(e,!!i.multiple,i.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Yv)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return so(t),null;case 6:if(e&&t.stateNode!=null)zD(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(jt(166));if(n=Du(_g.current),Du(xs.current),H0(t)){if(i=t.stateNode,n=t.memoizedProps,i[gs]=t,(u=i.nodeValue!==n)&&(e=Ko,e!==null))switch(e.tag){case 3:q0(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&q0(i.nodeValue,n,(e.mode&1)!==0)}u&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[gs]=t,t.stateNode=i}return so(t),null;case 13:if(qr(ui),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ei&&Xo!==null&&t.mode&1&&!(t.flags&128))JO(),qh(),t.flags|=98560,u=!1;else if(u=H0(t),i!==null&&i.dehydrated!==null){if(e===null){if(!u)throw Error(jt(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(jt(317));u[gs]=t}else qh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;so(t),u=!1}else Ka!==null&&(PS(Ka),Ka=null),u=!0;if(!u)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||ui.current&1?Di===0&&(Di=3):ST())),t.updateQueue!==null&&(t.flags|=4),so(t),null);case 4:return Zh(),SS(e,t),e===null&&mg(t.stateNode.containerInfo),so(t),null;case 10:return aT(t.type._context),so(t),null;case 17:return Lo(t.type)&&Qv(),so(t),null;case 19:if(qr(ui),u=t.memoizedState,u===null)return so(t),null;if(i=(t.flags&128)!==0,p=u.rendering,p===null)if(i)sm(u,!1);else{if(Di!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(p=o_(e),p!==null){for(t.flags|=128,sm(u,!1),i=p.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)u=n,e=i,u.flags&=14680066,p=u.alternate,p===null?(u.childLanes=0,u.lanes=e,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=p.childLanes,u.lanes=p.lanes,u.child=p.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=p.memoizedProps,u.memoizedState=p.memoizedState,u.updateQueue=p.updateQueue,u.type=p.type,e=p.dependencies,u.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return $r(ui,ui.current&1|2),t.child}e=e.sibling}u.tail!==null&&vi()>Kh&&(t.flags|=128,i=!0,sm(u,!1),t.lanes=4194304)}else{if(!i)if(e=o_(p),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),sm(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!ei)return so(t),null}else 2*vi()-u.renderingStartTime>Kh&&n!==1073741824&&(t.flags|=128,i=!0,sm(u,!1),t.lanes=4194304);u.isBackwards?(p.sibling=t.child,t.child=p):(n=u.last,n!==null?n.sibling=p:t.child=p,u.last=p)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=vi(),t.sibling=null,n=ui.current,$r(ui,i?n&1|2:n&1),t):(so(t),null);case 22:case 23:return wT(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Ho&1073741824&&(so(t),t.subtreeFlags&6&&(t.flags|=8192)):so(t),null;case 24:return null;case 25:return null}throw Error(jt(156,t.tag))}function X8(e,t){switch(nT(t),t.tag){case 1:return Lo(t.type)&&Qv(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Zh(),qr(Io),qr(uo),dT(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return uT(t),null;case 13:if(qr(ui),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(jt(340));qh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return qr(ui),null;case 4:return Zh(),null;case 10:return aT(t.type._context),null;case 22:case 23:return wT(),null;case 24:return null;default:return null}}var K0=!1,co=!1,K8=typeof WeakSet=="function"?WeakSet:Set,fn=null;function Th(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){yi(e,t,i)}else n.current=null}function ES(e,t,n){try{n()}catch(i){yi(e,t,i)}}var xk=!1;function Y8(e,t){if(sS=Zv,e=$O(),eT(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var c=i.anchorOffset,u=i.focusNode;i=i.focusOffset;try{n.nodeType,u.nodeType}catch{n=null;break e}var p=0,o=-1,x=-1,S=0,M=0,k=e,L=null;t:for(;;){for(var j;k!==n||c!==0&&k.nodeType!==3||(o=p+c),k!==u||i!==0&&k.nodeType!==3||(x=p+i),k.nodeType===3&&(p+=k.nodeValue.length),(j=k.firstChild)!==null;)L=k,k=j;for(;;){if(k===e)break t;if(L===n&&++S===c&&(o=p),L===u&&++M===i&&(x=p),(j=k.nextSibling)!==null)break;k=L,L=k.parentNode}k=j}n=o===-1||x===-1?null:{start:o,end:x}}else n=null}n=n||{start:0,end:0}}else n=null;for(lS={focusedElem:e,selectionRange:n},Zv=!1,fn=t;fn!==null;)if(t=fn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,fn=e;else for(;fn!==null;){t=fn;try{var F=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(F!==null){var V=F.memoizedProps,oe=F.memoizedState,B=t.stateNode,$=B.getSnapshotBeforeUpdate(t.elementType===t.type?V:Ha(t.type,V),oe);B.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var Z=t.stateNode.containerInfo;Z.nodeType===1?Z.textContent="":Z.nodeType===9&&Z.documentElement&&Z.removeChild(Z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(jt(163))}}catch(Q){yi(t,t.return,Q)}if(e=t.sibling,e!==null){e.return=t.return,fn=e;break}fn=t.return}return F=xk,xk=!1,F}function Hm(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var c=i=i.next;do{if((c.tag&e)===e){var u=c.destroy;c.destroy=void 0,u!==void 0&&ES(t,n,u)}c=c.next}while(c!==i)}}function H_(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function TS(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function FD(e){var t=e.alternate;t!==null&&(e.alternate=null,FD(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[gs],delete t[yg],delete t[dS],delete t[L8],delete t[O8])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function BD(e){return e.tag===5||e.tag===3||e.tag===4}function bk(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||BD(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function CS(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Yv));else if(i!==4&&(e=e.child,e!==null))for(CS(e,t,n),e=e.sibling;e!==null;)CS(e,t,n),e=e.sibling}function RS(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(RS(e,t,n),e=e.sibling;e!==null;)RS(e,t,n),e=e.sibling}var qi=null,Xa=!1;function Wl(e,t,n){for(n=n.child;n!==null;)ND(e,t,n),n=n.sibling}function ND(e,t,n){if(_s&&typeof _s.onCommitFiberUnmount=="function")try{_s.onCommitFiberUnmount(N_,n)}catch{}switch(n.tag){case 5:co||Th(n,t);case 6:var i=qi,c=Xa;qi=null,Wl(e,t,n),qi=i,Xa=c,qi!==null&&(Xa?(e=qi,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):qi.removeChild(n.stateNode));break;case 18:qi!==null&&(Xa?(e=qi,n=n.stateNode,e.nodeType===8?mw(e.parentNode,n):e.nodeType===1&&mw(e,n),hg(e)):mw(qi,n.stateNode));break;case 4:i=qi,c=Xa,qi=n.stateNode.containerInfo,Xa=!0,Wl(e,t,n),qi=i,Xa=c;break;case 0:case 11:case 14:case 15:if(!co&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){c=i=i.next;do{var u=c,p=u.destroy;u=u.tag,p!==void 0&&(u&2||u&4)&&ES(n,t,p),c=c.next}while(c!==i)}Wl(e,t,n);break;case 1:if(!co&&(Th(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(o){yi(n,t,o)}Wl(e,t,n);break;case 21:Wl(e,t,n);break;case 22:n.mode&1?(co=(i=co)||n.memoizedState!==null,Wl(e,t,n),co=i):Wl(e,t,n);break;default:Wl(e,t,n)}}function wk(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new K8),t.forEach(function(i){var c=aU.bind(null,e,i);n.has(i)||(n.add(i),i.then(c,c))})}}function Ga(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var c=n[i];try{var u=e,p=t,o=p;e:for(;o!==null;){switch(o.tag){case 5:qi=o.stateNode,Xa=!1;break e;case 3:qi=o.stateNode.containerInfo,Xa=!0;break e;case 4:qi=o.stateNode.containerInfo,Xa=!0;break e}o=o.return}if(qi===null)throw Error(jt(160));ND(u,p,c),qi=null,Xa=!1;var x=c.alternate;x!==null&&(x.return=null),c.return=null}catch(S){yi(c,t,S)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)$D(t,e),t=t.sibling}function $D(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ga(t,e),hs(e),i&4){try{Hm(3,e,e.return),H_(3,e)}catch(V){yi(e,e.return,V)}try{Hm(5,e,e.return)}catch(V){yi(e,e.return,V)}}break;case 1:Ga(t,e),hs(e),i&512&&n!==null&&Th(n,n.return);break;case 5:if(Ga(t,e),hs(e),i&512&&n!==null&&Th(n,n.return),e.flags&32){var c=e.stateNode;try{lg(c,"")}catch(V){yi(e,e.return,V)}}if(i&4&&(c=e.stateNode,c!=null)){var u=e.memoizedProps,p=n!==null?n.memoizedProps:u,o=e.type,x=e.updateQueue;if(e.updateQueue=null,x!==null)try{o==="input"&&u.type==="radio"&&u.name!=null&&sO(c,u),Y2(o,p);var S=Y2(o,u);for(p=0;p<x.length;p+=2){var M=x[p],k=x[p+1];M==="style"?hO(c,k):M==="dangerouslySetInnerHTML"?uO(c,k):M==="children"?lg(c,k):UE(c,M,k,S)}switch(o){case"input":q2(c,u);break;case"textarea":lO(c,u);break;case"select":var L=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!u.multiple;var j=u.value;j!=null?Ih(c,!!u.multiple,j,!1):L!==!!u.multiple&&(u.defaultValue!=null?Ih(c,!!u.multiple,u.defaultValue,!0):Ih(c,!!u.multiple,u.multiple?[]:"",!1))}c[yg]=u}catch(V){yi(e,e.return,V)}}break;case 6:if(Ga(t,e),hs(e),i&4){if(e.stateNode===null)throw Error(jt(162));c=e.stateNode,u=e.memoizedProps;try{c.nodeValue=u}catch(V){yi(e,e.return,V)}}break;case 3:if(Ga(t,e),hs(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{hg(t.containerInfo)}catch(V){yi(e,e.return,V)}break;case 4:Ga(t,e),hs(e);break;case 13:Ga(t,e),hs(e),c=e.child,c.flags&8192&&(u=c.memoizedState!==null,c.stateNode.isHidden=u,!u||c.alternate!==null&&c.alternate.memoizedState!==null||(xT=vi())),i&4&&wk(e);break;case 22:if(M=n!==null&&n.memoizedState!==null,e.mode&1?(co=(S=co)||M,Ga(t,e),co=S):Ga(t,e),hs(e),i&8192){if(S=e.memoizedState!==null,(e.stateNode.isHidden=S)&&!M&&e.mode&1)for(fn=e,M=e.child;M!==null;){for(k=fn=M;fn!==null;){switch(L=fn,j=L.child,L.tag){case 0:case 11:case 14:case 15:Hm(4,L,L.return);break;case 1:Th(L,L.return);var F=L.stateNode;if(typeof F.componentWillUnmount=="function"){i=L,n=L.return;try{t=i,F.props=t.memoizedProps,F.state=t.memoizedState,F.componentWillUnmount()}catch(V){yi(i,n,V)}}break;case 5:Th(L,L.return);break;case 22:if(L.memoizedState!==null){Ek(k);continue}}j!==null?(j.return=L,fn=j):Ek(k)}M=M.sibling}e:for(M=null,k=e;;){if(k.tag===5){if(M===null){M=k;try{c=k.stateNode,S?(u=c.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(o=k.stateNode,x=k.memoizedProps.style,p=x!=null&&x.hasOwnProperty("display")?x.display:null,o.style.display=dO("display",p))}catch(V){yi(e,e.return,V)}}}else if(k.tag===6){if(M===null)try{k.stateNode.nodeValue=S?"":k.memoizedProps}catch(V){yi(e,e.return,V)}}else if((k.tag!==22&&k.tag!==23||k.memoizedState===null||k===e)&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===e)break e;for(;k.sibling===null;){if(k.return===null||k.return===e)break e;M===k&&(M=null),k=k.return}M===k&&(M=null),k.sibling.return=k.return,k=k.sibling}}break;case 19:Ga(t,e),hs(e),i&4&&wk(e);break;case 21:break;default:Ga(t,e),hs(e)}}function hs(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(BD(n)){var i=n;break e}n=n.return}throw Error(jt(160))}switch(i.tag){case 5:var c=i.stateNode;i.flags&32&&(lg(c,""),i.flags&=-33);var u=bk(e);RS(e,u,c);break;case 3:case 4:var p=i.stateNode.containerInfo,o=bk(e);CS(e,o,p);break;default:throw Error(jt(161))}}catch(x){yi(e,e.return,x)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Q8(e,t,n){fn=e,UD(e)}function UD(e,t,n){for(var i=(e.mode&1)!==0;fn!==null;){var c=fn,u=c.child;if(c.tag===22&&i){var p=c.memoizedState!==null||K0;if(!p){var o=c.alternate,x=o!==null&&o.memoizedState!==null||co;o=K0;var S=co;if(K0=p,(co=x)&&!S)for(fn=c;fn!==null;)p=fn,x=p.child,p.tag===22&&p.memoizedState!==null?Tk(c):x!==null?(x.return=p,fn=x):Tk(c);for(;u!==null;)fn=u,UD(u),u=u.sibling;fn=c,K0=o,co=S}Sk(e)}else c.subtreeFlags&8772&&u!==null?(u.return=c,fn=u):Sk(e)}}function Sk(e){for(;fn!==null;){var t=fn;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:co||H_(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!co)if(n===null)i.componentDidMount();else{var c=t.elementType===t.type?n.memoizedProps:Ha(t.type,n.memoizedProps);i.componentDidUpdate(c,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var u=t.updateQueue;u!==null&&ak(t,u,i);break;case 3:var p=t.updateQueue;if(p!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ak(t,p,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var x=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&n.focus();break;case"img":x.src&&(n.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var S=t.alternate;if(S!==null){var M=S.memoizedState;if(M!==null){var k=M.dehydrated;k!==null&&hg(k)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(jt(163))}co||t.flags&512&&TS(t)}catch(L){yi(t,t.return,L)}}if(t===e){fn=null;break}if(n=t.sibling,n!==null){n.return=t.return,fn=n;break}fn=t.return}}function Ek(e){for(;fn!==null;){var t=fn;if(t===e){fn=null;break}var n=t.sibling;if(n!==null){n.return=t.return,fn=n;break}fn=t.return}}function Tk(e){for(;fn!==null;){var t=fn;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{H_(4,t)}catch(x){yi(t,n,x)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var c=t.return;try{i.componentDidMount()}catch(x){yi(t,c,x)}}var u=t.return;try{TS(t)}catch(x){yi(t,u,x)}break;case 5:var p=t.return;try{TS(t)}catch(x){yi(t,p,x)}}}catch(x){yi(t,t.return,x)}if(t===e){fn=null;break}var o=t.sibling;if(o!==null){o.return=t.return,fn=o;break}fn=t.return}}var J8=Math.ceil,l_=ul.ReactCurrentDispatcher,vT=ul.ReactCurrentOwner,_a=ul.ReactCurrentBatchConfig,lr=0,ji=null,Mi=null,Xi=0,Ho=0,Ch=Mc(0),Di=0,Sg=null,Hu=0,Z_=0,_T=0,Zm=null,ko=null,xT=0,Kh=1/0,qs=null,c_=!1,MS=null,fc=null,Y0=!1,sc=null,u_=0,Xm=0,AS=null,Iv=-1,Lv=0;function yo(){return lr&6?vi():Iv!==-1?Iv:Iv=vi()}function pc(e){return e.mode&1?lr&2&&Xi!==0?Xi&-Xi:z8.transition!==null?(Lv===0&&(Lv=EO()),Lv):(e=Pr,e!==0||(e=window.event,e=e===void 0?16:PO(e.type)),e):1}function Ja(e,t,n,i){if(50<Xm)throw Xm=0,AS=null,Error(jt(185));Fg(e,n,i),(!(lr&2)||e!==ji)&&(e===ji&&(!(lr&2)&&(Z_|=n),Di===4&&ic(e,Xi)),Oo(e,i),n===1&&lr===0&&!(t.mode&1)&&(Kh=vi()+500,G_&&Ac()))}function Oo(e,t){var n=e.callbackNode;z$(e,t);var i=Hv(e,e===ji?Xi:0);if(i===0)n!==null&&OA(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&OA(n),t===1)e.tag===0?D8(Ck.bind(null,e)):KO(Ck.bind(null,e)),P8(function(){!(lr&6)&&Ac()}),n=null;else{switch(TO(i)){case 1:n=qE;break;case 4:n=wO;break;case 16:n=qv;break;case 536870912:n=SO;break;default:n=qv}n=XD(n,jD.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function jD(e,t){if(Iv=-1,Lv=0,lr&6)throw Error(jt(327));var n=e.callbackNode;if(Fh()&&e.callbackNode!==n)return null;var i=Hv(e,e===ji?Xi:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=d_(e,i);else{t=i;var c=lr;lr|=2;var u=GD();(ji!==e||Xi!==t)&&(qs=null,Kh=vi()+500,Nu(e,t));do try{nU();break}catch(o){VD(e,o)}while(1);oT(),l_.current=u,lr=c,Mi!==null?t=0:(ji=null,Xi=0,t=Di)}if(t!==0){if(t===2&&(c=nS(e),c!==0&&(i=c,t=kS(e,c))),t===1)throw n=Sg,Nu(e,0),ic(e,i),Oo(e,vi()),n;if(t===6)ic(e,i);else{if(c=e.current.alternate,!(i&30)&&!eU(c)&&(t=d_(e,i),t===2&&(u=nS(e),u!==0&&(i=u,t=kS(e,u))),t===1))throw n=Sg,Nu(e,0),ic(e,i),Oo(e,vi()),n;switch(e.finishedWork=c,e.finishedLanes=i,t){case 0:case 1:throw Error(jt(345));case 2:Tu(e,ko,qs);break;case 3:if(ic(e,i),(i&130023424)===i&&(t=xT+500-vi(),10<t)){if(Hv(e,0)!==0)break;if(c=e.suspendedLanes,(c&i)!==i){yo(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=uS(Tu.bind(null,e,ko,qs),t);break}Tu(e,ko,qs);break;case 4:if(ic(e,i),(i&4194240)===i)break;for(t=e.eventTimes,c=-1;0<i;){var p=31-Qa(i);u=1<<p,p=t[p],p>c&&(c=p),i&=~u}if(i=c,i=vi()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*J8(i/1960))-i,10<i){e.timeoutHandle=uS(Tu.bind(null,e,ko,qs),i);break}Tu(e,ko,qs);break;case 5:Tu(e,ko,qs);break;default:throw Error(jt(329))}}}return Oo(e,vi()),e.callbackNode===n?jD.bind(null,e):null}function kS(e,t){var n=Zm;return e.current.memoizedState.isDehydrated&&(Nu(e,t).flags|=256),e=d_(e,t),e!==2&&(t=ko,ko=n,t!==null&&PS(t)),e}function PS(e){ko===null?ko=e:ko.push.apply(ko,e)}function eU(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var c=n[i],u=c.getSnapshot;c=c.value;try{if(!es(u(),c))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ic(e,t){for(t&=~_T,t&=~Z_,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Qa(t),i=1<<n;e[n]=-1,t&=~i}}function Ck(e){if(lr&6)throw Error(jt(327));Fh();var t=Hv(e,0);if(!(t&1))return Oo(e,vi()),null;var n=d_(e,t);if(e.tag!==0&&n===2){var i=nS(e);i!==0&&(t=i,n=kS(e,i))}if(n===1)throw n=Sg,Nu(e,0),ic(e,t),Oo(e,vi()),n;if(n===6)throw Error(jt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tu(e,ko,qs),Oo(e,vi()),null}function bT(e,t){var n=lr;lr|=1;try{return e(t)}finally{lr=n,lr===0&&(Kh=vi()+500,G_&&Ac())}}function Zu(e){sc!==null&&sc.tag===0&&!(lr&6)&&Fh();var t=lr;lr|=1;var n=_a.transition,i=Pr;try{if(_a.transition=null,Pr=1,e)return e()}finally{Pr=i,_a.transition=n,lr=t,!(lr&6)&&Ac()}}function wT(){Ho=Ch.current,qr(Ch)}function Nu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,k8(n)),Mi!==null)for(n=Mi.return;n!==null;){var i=n;switch(nT(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Qv();break;case 3:Zh(),qr(Io),qr(uo),dT();break;case 5:uT(i);break;case 4:Zh();break;case 13:qr(ui);break;case 19:qr(ui);break;case 10:aT(i.type._context);break;case 22:case 23:wT()}n=n.return}if(ji=e,Mi=e=mc(e.current,null),Xi=Ho=t,Di=0,Sg=null,_T=Z_=Hu=0,ko=Zm=null,Ou!==null){for(t=0;t<Ou.length;t++)if(n=Ou[t],i=n.interleaved,i!==null){n.interleaved=null;var c=i.next,u=n.pending;if(u!==null){var p=u.next;u.next=c,i.next=p}n.pending=i}Ou=null}return e}function VD(e,t){do{var n=Mi;try{if(oT(),Av.current=s_,a_){for(var i=di.memoizedState;i!==null;){var c=i.queue;c!==null&&(c.pending=null),i=i.next}a_=!1}if(qu=0,Ui=Oi=di=null,qm=!1,xg=0,vT.current=null,n===null||n.return===null){Di=1,Sg=t,Mi=null;break}e:{var u=e,p=n.return,o=n,x=t;if(t=Xi,o.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var S=x,M=o,k=M.tag;if(!(M.mode&1)&&(k===0||k===11||k===15)){var L=M.alternate;L?(M.updateQueue=L.updateQueue,M.memoizedState=L.memoizedState,M.lanes=L.lanes):(M.updateQueue=null,M.memoizedState=null)}var j=fk(p);if(j!==null){j.flags&=-257,pk(j,p,o,u,t),j.mode&1&&hk(u,S,t),t=j,x=S;var F=t.updateQueue;if(F===null){var V=new Set;V.add(x),t.updateQueue=V}else F.add(x);break e}else{if(!(t&1)){hk(u,S,t),ST();break e}x=Error(jt(426))}}else if(ei&&o.mode&1){var oe=fk(p);if(oe!==null){!(oe.flags&65536)&&(oe.flags|=256),pk(oe,p,o,u,t),rT(Xh(x,o));break e}}u=x=Xh(x,o),Di!==4&&(Di=2),Zm===null?Zm=[u]:Zm.push(u),u=p;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t;var B=CD(u,x,t);ok(u,B);break e;case 1:o=x;var $=u.type,Z=u.stateNode;if(!(u.flags&128)&&(typeof $.getDerivedStateFromError=="function"||Z!==null&&typeof Z.componentDidCatch=="function"&&(fc===null||!fc.has(Z)))){u.flags|=65536,t&=-t,u.lanes|=t;var Q=RD(u,o,t);ok(u,Q);break e}}u=u.return}while(u!==null)}qD(n)}catch(ae){t=ae,Mi===n&&n!==null&&(Mi=n=n.return);continue}break}while(1)}function GD(){var e=l_.current;return l_.current=s_,e===null?s_:e}function ST(){(Di===0||Di===3||Di===2)&&(Di=4),ji===null||!(Hu&268435455)&&!(Z_&268435455)||ic(ji,Xi)}function d_(e,t){var n=lr;lr|=2;var i=GD();(ji!==e||Xi!==t)&&(qs=null,Nu(e,t));do try{tU();break}catch(c){VD(e,c)}while(1);if(oT(),lr=n,l_.current=i,Mi!==null)throw Error(jt(261));return ji=null,Xi=0,Di}function tU(){for(;Mi!==null;)WD(Mi)}function nU(){for(;Mi!==null&&!R$();)WD(Mi)}function WD(e){var t=ZD(e.alternate,e,Ho);e.memoizedProps=e.pendingProps,t===null?qD(e):Mi=t,vT.current=null}function qD(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=X8(n,t),n!==null){n.flags&=32767,Mi=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Di=6,Mi=null;return}}else if(n=Z8(n,t,Ho),n!==null){Mi=n;return}if(t=t.sibling,t!==null){Mi=t;return}Mi=t=e}while(t!==null);Di===0&&(Di=5)}function Tu(e,t,n){var i=Pr,c=_a.transition;try{_a.transition=null,Pr=1,rU(e,t,n,i)}finally{_a.transition=c,Pr=i}return null}function rU(e,t,n,i){do Fh();while(sc!==null);if(lr&6)throw Error(jt(327));n=e.finishedWork;var c=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(jt(177));e.callbackNode=null,e.callbackPriority=0;var u=n.lanes|n.childLanes;if(F$(e,u),e===ji&&(Mi=ji=null,Xi=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Y0||(Y0=!0,XD(qv,function(){return Fh(),null})),u=(n.flags&15990)!==0,n.subtreeFlags&15990||u){u=_a.transition,_a.transition=null;var p=Pr;Pr=1;var o=lr;lr|=4,vT.current=null,Y8(e,n),$D(n,e),S8(lS),Zv=!!sS,lS=sS=null,e.current=n,Q8(n),M$(),lr=o,Pr=p,_a.transition=u}else e.current=n;if(Y0&&(Y0=!1,sc=e,u_=c),u=e.pendingLanes,u===0&&(fc=null),P$(n.stateNode),Oo(e,vi()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)c=t[n],i(c.value,{componentStack:c.stack,digest:c.digest});if(c_)throw c_=!1,e=MS,MS=null,e;return u_&1&&e.tag!==0&&Fh(),u=e.pendingLanes,u&1?e===AS?Xm++:(Xm=0,AS=e):Xm=0,Ac(),null}function Fh(){if(sc!==null){var e=TO(u_),t=_a.transition,n=Pr;try{if(_a.transition=null,Pr=16>e?16:e,sc===null)var i=!1;else{if(e=sc,sc=null,u_=0,lr&6)throw Error(jt(331));var c=lr;for(lr|=4,fn=e.current;fn!==null;){var u=fn,p=u.child;if(fn.flags&16){var o=u.deletions;if(o!==null){for(var x=0;x<o.length;x++){var S=o[x];for(fn=S;fn!==null;){var M=fn;switch(M.tag){case 0:case 11:case 15:Hm(8,M,u)}var k=M.child;if(k!==null)k.return=M,fn=k;else for(;fn!==null;){M=fn;var L=M.sibling,j=M.return;if(FD(M),M===S){fn=null;break}if(L!==null){L.return=j,fn=L;break}fn=j}}}var F=u.alternate;if(F!==null){var V=F.child;if(V!==null){F.child=null;do{var oe=V.sibling;V.sibling=null,V=oe}while(V!==null)}}fn=u}}if(u.subtreeFlags&2064&&p!==null)p.return=u,fn=p;else e:for(;fn!==null;){if(u=fn,u.flags&2048)switch(u.tag){case 0:case 11:case 15:Hm(9,u,u.return)}var B=u.sibling;if(B!==null){B.return=u.return,fn=B;break e}fn=u.return}}var $=e.current;for(fn=$;fn!==null;){p=fn;var Z=p.child;if(p.subtreeFlags&2064&&Z!==null)Z.return=p,fn=Z;else e:for(p=$;fn!==null;){if(o=fn,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:H_(9,o)}}catch(ae){yi(o,o.return,ae)}if(o===p){fn=null;break e}var Q=o.sibling;if(Q!==null){Q.return=o.return,fn=Q;break e}fn=o.return}}if(lr=c,Ac(),_s&&typeof _s.onPostCommitFiberRoot=="function")try{_s.onPostCommitFiberRoot(N_,e)}catch{}i=!0}return i}finally{Pr=n,_a.transition=t}}return!1}function Rk(e,t,n){t=Xh(n,t),t=CD(e,t,1),e=hc(e,t,1),t=yo(),e!==null&&(Fg(e,1,t),Oo(e,t))}function yi(e,t,n){if(e.tag===3)Rk(e,e,n);else for(;t!==null;){if(t.tag===3){Rk(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(fc===null||!fc.has(i))){e=Xh(n,e),e=RD(t,e,1),t=hc(t,e,1),e=yo(),t!==null&&(Fg(t,1,e),Oo(t,e));break}}t=t.return}}function iU(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=yo(),e.pingedLanes|=e.suspendedLanes&n,ji===e&&(Xi&n)===n&&(Di===4||Di===3&&(Xi&130023424)===Xi&&500>vi()-xT?Nu(e,0):_T|=n),Oo(e,t)}function HD(e,t){t===0&&(e.mode&1?(t=U0,U0<<=1,!(U0&130023424)&&(U0=4194304)):t=1);var n=yo();e=rl(e,t),e!==null&&(Fg(e,t,n),Oo(e,n))}function oU(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),HD(e,n)}function aU(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,c=e.memoizedState;c!==null&&(n=c.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(jt(314))}i!==null&&i.delete(t),HD(e,n)}var ZD;ZD=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Io.current)Po=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Po=!1,H8(e,t,n);Po=!!(e.flags&131072)}else Po=!1,ei&&t.flags&1048576&&YO(t,t_,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Pv(e,t),e=t.pendingProps;var c=Wh(t,uo.current);zh(t,n),c=fT(null,t,i,e,c,n);var u=pT();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lo(i)?(u=!0,Jv(t)):u=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,lT(t),c.updater=W_,t.stateNode=c,c._reactInternals=t,yS(t,i,e,n),t=xS(null,t,i,!0,u,n)):(t.tag=0,ei&&u&&tT(t),go(null,t,c,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Pv(e,t),e=t.pendingProps,c=i._init,i=c(i._payload),t.type=i,c=t.tag=lU(i),e=Ha(i,e),c){case 0:t=_S(null,t,i,e,n);break e;case 1:t=yk(null,t,i,e,n);break e;case 11:t=mk(null,t,i,e,n);break e;case 14:t=gk(null,t,i,Ha(i.type,e),n);break e}throw Error(jt(306,i,""))}return t;case 0:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:Ha(i,c),_S(e,t,i,c,n);case 1:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:Ha(i,c),yk(e,t,i,c,n);case 3:e:{if(PD(t),e===null)throw Error(jt(387));i=t.pendingProps,u=t.memoizedState,c=u.element,tD(e,t),i_(t,i,null,n);var p=t.memoizedState;if(i=p.element,u.isDehydrated)if(u={element:i,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){c=Xh(Error(jt(423)),t),t=vk(e,t,i,n,c);break e}else if(i!==c){c=Xh(Error(jt(424)),t),t=vk(e,t,i,n,c);break e}else for(Xo=dc(t.stateNode.containerInfo.firstChild),Ko=t,ei=!0,Ka=null,n=oD(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qh(),i===c){t=il(e,t,n);break e}go(e,t,i,n)}t=t.child}return t;case 5:return aD(t),e===null&&pS(t),i=t.type,c=t.pendingProps,u=e!==null?e.memoizedProps:null,p=c.children,cS(i,c)?p=null:u!==null&&cS(i,u)&&(t.flags|=32),kD(e,t),go(e,t,p,n),t.child;case 6:return e===null&&pS(t),null;case 13:return ID(e,t,n);case 4:return cT(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Hh(t,null,i,n):go(e,t,i,n),t.child;case 11:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:Ha(i,c),mk(e,t,i,c,n);case 7:return go(e,t,t.pendingProps,n),t.child;case 8:return go(e,t,t.pendingProps.children,n),t.child;case 12:return go(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,c=t.pendingProps,u=t.memoizedProps,p=c.value,$r(n_,i._currentValue),i._currentValue=p,u!==null)if(es(u.value,p)){if(u.children===c.children&&!Io.current){t=il(e,t,n);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var o=u.dependencies;if(o!==null){p=u.child;for(var x=o.firstContext;x!==null;){if(x.context===i){if(u.tag===1){x=Js(-1,n&-n),x.tag=2;var S=u.updateQueue;if(S!==null){S=S.shared;var M=S.pending;M===null?x.next=x:(x.next=M.next,M.next=x),S.pending=x}}u.lanes|=n,x=u.alternate,x!==null&&(x.lanes|=n),mS(u.return,n,t),o.lanes|=n;break}x=x.next}}else if(u.tag===10)p=u.type===t.type?null:u.child;else if(u.tag===18){if(p=u.return,p===null)throw Error(jt(341));p.lanes|=n,o=p.alternate,o!==null&&(o.lanes|=n),mS(p,n,t),p=u.sibling}else p=u.child;if(p!==null)p.return=u;else for(p=u;p!==null;){if(p===t){p=null;break}if(u=p.sibling,u!==null){u.return=p.return,p=u;break}p=p.return}u=p}go(e,t,c.children,n),t=t.child}return t;case 9:return c=t.type,i=t.pendingProps.children,zh(t,n),c=xa(c),i=i(c),t.flags|=1,go(e,t,i,n),t.child;case 14:return i=t.type,c=Ha(i,t.pendingProps),c=Ha(i.type,c),gk(e,t,i,c,n);case 15:return MD(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:Ha(i,c),Pv(e,t),t.tag=1,Lo(i)?(e=!0,Jv(t)):e=!1,zh(t,n),rD(t,i,c),yS(t,i,c,n),xS(null,t,i,!0,e,n);case 19:return LD(e,t,n);case 22:return AD(e,t,n)}throw Error(jt(156,t.tag))};function XD(e,t){return bO(e,t)}function sU(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ya(e,t,n,i){return new sU(e,t,n,i)}function ET(e){return e=e.prototype,!(!e||!e.isReactComponent)}function lU(e){if(typeof e=="function")return ET(e)?1:0;if(e!=null){if(e=e.$$typeof,e===VE)return 11;if(e===GE)return 14}return 2}function mc(e,t){var n=e.alternate;return n===null?(n=ya(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ov(e,t,n,i,c,u){var p=2;if(i=e,typeof e=="function")ET(e)&&(p=1);else if(typeof e=="string")p=5;else e:switch(e){case gh:return $u(n.children,c,u,t);case jE:p=8,c|=8;break;case U2:return e=ya(12,n,t,c|2),e.elementType=U2,e.lanes=u,e;case j2:return e=ya(13,n,t,c),e.elementType=j2,e.lanes=u,e;case V2:return e=ya(19,n,t,c),e.elementType=V2,e.lanes=u,e;case iO:return X_(n,c,u,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case nO:p=10;break e;case rO:p=9;break e;case VE:p=11;break e;case GE:p=14;break e;case Ql:p=16,i=null;break e}throw Error(jt(130,e==null?e:typeof e,""))}return t=ya(p,n,t,c),t.elementType=e,t.type=i,t.lanes=u,t}function $u(e,t,n,i){return e=ya(7,e,i,t),e.lanes=n,e}function X_(e,t,n,i){return e=ya(22,e,i,t),e.elementType=iO,e.lanes=n,e.stateNode={isHidden:!1},e}function Sw(e,t,n){return e=ya(6,e,null,t),e.lanes=n,e}function Ew(e,t,n){return t=ya(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function cU(e,t,n,i,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=iw(0),this.expirationTimes=iw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=iw(0),this.identifierPrefix=i,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function TT(e,t,n,i,c,u,p,o,x){return e=new cU(e,t,n,o,x),t===1?(t=1,u===!0&&(t|=8)):t=0,u=ya(3,null,null,t),e.current=u,u.stateNode=e,u.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lT(u),e}function uU(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mh,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function KD(e){if(!e)return xc;e=e._reactInternals;e:{if(nd(e)!==e||e.tag!==1)throw Error(jt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(jt(171))}if(e.tag===1){var n=e.type;if(Lo(n))return XO(e,n,t)}return t}function YD(e,t,n,i,c,u,p,o,x){return e=TT(n,i,!0,e,c,u,p,o,x),e.context=KD(null),n=e.current,i=yo(),c=pc(n),u=Js(i,c),u.callback=t??null,hc(n,u,c),e.current.lanes=c,Fg(e,c,i),Oo(e,i),e}function K_(e,t,n,i){var c=t.current,u=yo(),p=pc(c);return n=KD(n),t.context===null?t.context=n:t.pendingContext=n,t=Js(u,p),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=hc(c,t,p),e!==null&&(Ja(e,c,p,u),Mv(e,c,p)),p}function h_(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Mk(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function CT(e,t){Mk(e,t),(e=e.alternate)&&Mk(e,t)}function dU(){return null}var QD=typeof reportError=="function"?reportError:function(e){console.error(e)};function RT(e){this._internalRoot=e}Y_.prototype.render=RT.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(jt(409));K_(e,t,null,null)};Y_.prototype.unmount=RT.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Zu(function(){K_(null,e,null,null)}),t[nl]=null}};function Y_(e){this._internalRoot=e}Y_.prototype.unstable_scheduleHydration=function(e){if(e){var t=MO();e={blockedOn:null,target:e,priority:t};for(var n=0;n<rc.length&&t!==0&&t<rc[n].priority;n++);rc.splice(n,0,e),n===0&&kO(e)}};function MT(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Q_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ak(){}function hU(e,t,n,i,c){if(c){if(typeof i=="function"){var u=i;i=function(){var S=h_(p);u.call(S)}}var p=YD(t,i,e,0,null,!1,!1,"",Ak);return e._reactRootContainer=p,e[nl]=p.current,mg(e.nodeType===8?e.parentNode:e),Zu(),p}for(;c=e.lastChild;)e.removeChild(c);if(typeof i=="function"){var o=i;i=function(){var S=h_(x);o.call(S)}}var x=TT(e,0,!1,null,null,!1,!1,"",Ak);return e._reactRootContainer=x,e[nl]=x.current,mg(e.nodeType===8?e.parentNode:e),Zu(function(){K_(t,x,n,i)}),x}function J_(e,t,n,i,c){var u=n._reactRootContainer;if(u){var p=u;if(typeof c=="function"){var o=c;c=function(){var x=h_(p);o.call(x)}}K_(t,p,e,c)}else p=hU(n,t,e,c,i);return h_(p)}CO=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Lm(t.pendingLanes);n!==0&&(HE(t,n|1),Oo(t,vi()),!(lr&6)&&(Kh=vi()+500,Ac()))}break;case 13:Zu(function(){var i=rl(e,1);if(i!==null){var c=yo();Ja(i,e,1,c)}}),CT(e,1)}};ZE=function(e){if(e.tag===13){var t=rl(e,134217728);if(t!==null){var n=yo();Ja(t,e,134217728,n)}CT(e,134217728)}};RO=function(e){if(e.tag===13){var t=pc(e),n=rl(e,t);if(n!==null){var i=yo();Ja(n,e,t,i)}CT(e,t)}};MO=function(){return Pr};AO=function(e,t){var n=Pr;try{return Pr=e,t()}finally{Pr=n}};J2=function(e,t,n){switch(t){case"input":if(q2(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var c=V_(i);if(!c)throw Error(jt(90));aO(i),q2(i,c)}}}break;case"textarea":lO(e,n);break;case"select":t=n.value,t!=null&&Ih(e,!!n.multiple,t,!1)}};mO=bT;gO=Zu;var fU={usingClientEntryPoint:!1,Events:[Ng,xh,V_,fO,pO,bT]},lm={findFiberByHostInstance:Lu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},pU={bundleType:lm.bundleType,version:lm.version,rendererPackageName:lm.rendererPackageName,rendererConfig:lm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ul.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=_O(e),e===null?null:e.stateNode},findFiberByHostInstance:lm.findFiberByHostInstance||dU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Q0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Q0.isDisabled&&Q0.supportsFiber)try{N_=Q0.inject(pU),_s=Q0}catch{}}ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fU;ea.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!MT(t))throw Error(jt(200));return uU(e,t,null,n)};ea.createRoot=function(e,t){if(!MT(e))throw Error(jt(299));var n=!1,i="",c=QD;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=TT(e,1,!1,null,null,n,!1,i,c),e[nl]=t.current,mg(e.nodeType===8?e.parentNode:e),new RT(t)};ea.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(jt(188)):(e=Object.keys(e).join(","),Error(jt(268,e)));return e=_O(t),e=e===null?null:e.stateNode,e};ea.flushSync=function(e){return Zu(e)};ea.hydrate=function(e,t,n){if(!Q_(t))throw Error(jt(200));return J_(null,e,t,!0,n)};ea.hydrateRoot=function(e,t,n){if(!MT(e))throw Error(jt(405));var i=n!=null&&n.hydratedSources||null,c=!1,u="",p=QD;if(n!=null&&(n.unstable_strictMode===!0&&(c=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onRecoverableError!==void 0&&(p=n.onRecoverableError)),t=YD(t,null,e,1,n??null,c,!1,u,p),e[nl]=t.current,mg(e),i)for(e=0;e<i.length;e++)n=i[e],c=n._getVersion,c=c(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,c]:t.mutableSourceEagerHydrationData.push(n,c);return new Y_(t)};ea.render=function(e,t,n){if(!Q_(t))throw Error(jt(200));return J_(null,e,t,!1,n)};ea.unmountComponentAtNode=function(e){if(!Q_(e))throw Error(jt(40));return e._reactRootContainer?(Zu(function(){J_(null,null,e,!1,function(){e._reactRootContainer=null,e[nl]=null})}),!0):!1};ea.unstable_batchedUpdates=bT;ea.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Q_(n))throw Error(jt(200));if(e==null||e._reactInternals===void 0)throw Error(jt(38));return J_(e,t,n,!1,i)};ea.version="18.2.0-next-9e3b772b8-20220608";function JD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JD)}catch(e){console.error(e)}}JD(),Y3.exports=ea;var bc=Y3.exports;const Rh=uf(bc);var kk=bc;N2.createRoot=kk.createRoot,N2.hydrateRoot=kk.hydrateRoot;/**
 * @remix-run/router v1.6.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xr(){return xr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},xr.apply(this,arguments)}var Ci;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ci||(Ci={}));const Pk="popstate";function mU(e){e===void 0&&(e={});function t(i,c){let{pathname:u,search:p,hash:o}=i.location;return Eg("",{pathname:u,search:p,hash:o},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(i,c){return typeof c=="string"?c:Ug(c)}return yU(t,n,null,e)}function ar(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Yh(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function gU(){return Math.random().toString(36).substr(2,8)}function Ik(e,t){return{usr:e.state,key:e.key,idx:t}}function Eg(e,t,n,i){return n===void 0&&(n=null),xr({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?dl(t):t,{state:n,key:t&&t.key||i||gU()})}function Ug(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function dl(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function yU(e,t,n,i){i===void 0&&(i={});let{window:c=document.defaultView,v5Compat:u=!1}=i,p=c.history,o=Ci.Pop,x=null,S=M();S==null&&(S=0,p.replaceState(xr({},p.state,{idx:S}),""));function M(){return(p.state||{idx:null}).idx}function k(){o=Ci.Pop;let oe=M(),B=oe==null?null:oe-S;S=oe,x&&x({action:o,location:V.location,delta:B})}function L(oe,B){o=Ci.Push;let $=Eg(V.location,oe,B);n&&n($,oe),S=M()+1;let Z=Ik($,S),Q=V.createHref($);try{p.pushState(Z,"",Q)}catch{c.location.assign(Q)}u&&x&&x({action:o,location:V.location,delta:1})}function j(oe,B){o=Ci.Replace;let $=Eg(V.location,oe,B);n&&n($,oe),S=M();let Z=Ik($,S),Q=V.createHref($);p.replaceState(Z,"",Q),u&&x&&x({action:o,location:V.location,delta:0})}function F(oe){let B=c.location.origin!=="null"?c.location.origin:c.location.href,$=typeof oe=="string"?oe:Ug(oe);return ar(B,"No window.location.(origin|href) available to create URL for href: "+$),new URL($,B)}let V={get action(){return o},get location(){return e(c,p)},listen(oe){if(x)throw new Error("A history only accepts one active listener");return c.addEventListener(Pk,k),x=oe,()=>{c.removeEventListener(Pk,k),x=null}},createHref(oe){return t(c,oe)},createURL:F,encodeLocation(oe){let B=F(oe);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:L,replace:j,go(oe){return p.go(oe)}};return V}var Li;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Li||(Li={}));const vU=new Set(["lazy","caseSensitive","path","id","index","children"]);function _U(e){return e.index===!0}function ez(e,t,n,i){return n===void 0&&(n=[]),i===void 0&&(i={}),e.map((c,u)=>{let p=[...n,u],o=typeof c.id=="string"?c.id:p.join("-");if(ar(c.index!==!0||!c.children,"Cannot specify children on an index route"),ar(!i[o],'Found a route id collision on id "'+o+`".  Route id's must be globally unique within Data Router usages`),_U(c)){let x=xr({},c,t(c),{id:o});return i[o]=x,x}else{let x=xr({},c,t(c),{id:o,children:void 0});return i[o]=x,c.children&&(x.children=ez(c.children,t,p,i)),x}})}function Mh(e,t,n){n===void 0&&(n="/");let i=typeof t=="string"?dl(t):t,c=jg(i.pathname||"/",n);if(c==null)return null;let u=tz(e);xU(u);let p=null;for(let o=0;p==null&&o<u.length;++o)p=AU(u[o],IU(c));return p}function tz(e,t,n,i){t===void 0&&(t=[]),n===void 0&&(n=[]),i===void 0&&(i="");let c=(u,p,o)=>{let x={relativePath:o===void 0?u.path||"":o,caseSensitive:u.caseSensitive===!0,childrenIndex:p,route:u};x.relativePath.startsWith("/")&&(ar(x.relativePath.startsWith(i),'Absolute route path "'+x.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),x.relativePath=x.relativePath.slice(i.length));let S=gc([i,x.relativePath]),M=n.concat(x);u.children&&u.children.length>0&&(ar(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+S+'".')),tz(u.children,t,M,S)),!(u.path==null&&!u.index)&&t.push({path:S,score:RU(S,u.index),routesMeta:M})};return e.forEach((u,p)=>{var o;if(u.path===""||!((o=u.path)!=null&&o.includes("?")))c(u,p);else for(let x of nz(u.path))c(u,p,x)}),t}function nz(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,c=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return c?[u,""]:[u];let p=nz(i.join("/")),o=[];return o.push(...p.map(x=>x===""?u:[u,x].join("/"))),c&&o.push(...p),o.map(x=>e.startsWith("/")&&x===""?"/":x)}function xU(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:MU(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const bU=/^:\w+$/,wU=3,SU=2,EU=1,TU=10,CU=-2,Lk=e=>e==="*";function RU(e,t){let n=e.split("/"),i=n.length;return n.some(Lk)&&(i+=CU),t&&(i+=SU),n.filter(c=>!Lk(c)).reduce((c,u)=>c+(bU.test(u)?wU:u===""?EU:TU),i)}function MU(e,t){return e.length===t.length&&e.slice(0,-1).every((i,c)=>i===t[c])?e[e.length-1]-t[t.length-1]:0}function AU(e,t){let{routesMeta:n}=e,i={},c="/",u=[];for(let p=0;p<n.length;++p){let o=n[p],x=p===n.length-1,S=c==="/"?t:t.slice(c.length)||"/",M=kU({path:o.relativePath,caseSensitive:o.caseSensitive,end:x},S);if(!M)return null;Object.assign(i,M.params);let k=o.route;u.push({params:i,pathname:gc([c,M.pathname]),pathnameBase:zU(gc([c,M.pathnameBase])),route:k}),M.pathnameBase!=="/"&&(c=gc([c,M.pathnameBase]))}return u}function kU(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=PU(e.path,e.caseSensitive,e.end),c=t.match(n);if(!c)return null;let u=c[0],p=u.replace(/(.)\/+$/,"$1"),o=c.slice(1);return{params:i.reduce((S,M,k)=>{if(M==="*"){let L=o[k]||"";p=u.slice(0,u.length-L.length).replace(/(.)\/+$/,"$1")}return S[M]=LU(o[k]||"",M),S},{}),pathname:u,pathnameBase:p,pattern:e}}function PU(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Yh(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(p,o)=>(i.push(o),"/([^\\/]+)"));return e.endsWith("*")?(i.push("*"),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,t?void 0:"i"),i]}function IU(e){try{return decodeURI(e)}catch(t){return Yh(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function LU(e,t){try{return decodeURIComponent(e)}catch(n){return Yh(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function jg(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}function OU(e,t){t===void 0&&(t="/");let{pathname:n,search:i="",hash:c=""}=typeof e=="string"?dl(e):e;return{pathname:n?n.startsWith("/")?n:DU(n,t):t,search:FU(i),hash:BU(c)}}function DU(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?n.length>1&&n.pop():c!=="."&&n.push(c)}),n.length>1?n.join("/"):"/"}function Tw(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function AT(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function rz(e,t,n,i){i===void 0&&(i=!1);let c;typeof e=="string"?c=dl(e):(c=xr({},e),ar(!c.pathname||!c.pathname.includes("?"),Tw("?","pathname","search",c)),ar(!c.pathname||!c.pathname.includes("#"),Tw("#","pathname","hash",c)),ar(!c.search||!c.search.includes("#"),Tw("#","search","hash",c)));let u=e===""||c.pathname==="",p=u?"/":c.pathname,o;if(i||p==null)o=n;else{let k=t.length-1;if(p.startsWith("..")){let L=p.split("/");for(;L[0]==="..";)L.shift(),k-=1;c.pathname=L.join("/")}o=k>=0?t[k]:"/"}let x=OU(c,o),S=p&&p!=="/"&&p.endsWith("/"),M=(u||p===".")&&n.endsWith("/");return!x.pathname.endsWith("/")&&(S||M)&&(x.pathname+="/"),x}const gc=e=>e.join("/").replace(/\/\/+/g,"/"),zU=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),FU=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,BU=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Cw=function(t,n){n===void 0&&(n=302);let i=n;typeof i=="number"?i={status:i}:typeof i.status>"u"&&(i.status=302);let c=new Headers(i.headers);return c.set("Location",t),new Response(null,xr({},i,{headers:c}))};class kT{constructor(t,n,i,c){c===void 0&&(c=!1),this.status=t,this.statusText=n||"",this.internal=c,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function iz(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const oz=["post","put","patch","delete"],NU=new Set(oz),$U=["get",...oz],UU=new Set($U),jU=new Set([301,302,303,307,308]),VU=new Set([307,308]),Rw={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},GU={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},Ok={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},az=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",WU=!sz,qU=e=>({hasErrorBoundary:!!e.hasErrorBoundary});function HU(e){ar(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let t;if(e.mapRouteProperties)t=e.mapRouteProperties;else if(e.detectErrorBoundary){let Ne=e.detectErrorBoundary;t=Je=>({hasErrorBoundary:Ne(Je)})}else t=qU;let n={},i=ez(e.routes,t,void 0,n),c,u=e.basename||"/",p=xr({v7_normalizeFormMethod:!1,v7_prependBasename:!1},e.future),o=null,x=new Set,S=null,M=null,k=null,L=e.hydrationData!=null,j=Mh(i,e.history.location,u),F=null;if(j==null){let Ne=Za(404,{pathname:e.history.location.pathname}),{matches:Je,route:ut}=Uk(i);j=Je,F={[ut.id]:Ne}}let V=!j.some(Ne=>Ne.route.lazy)&&(!j.some(Ne=>Ne.route.loader)||e.hydrationData!=null),oe,B={historyAction:e.history.action,location:e.history.location,matches:j,initialized:V,navigation:Rw,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||F,fetchers:new Map,blockers:new Map},$=Ci.Pop,Z=!1,Q,ae=!1,ue=!1,de=[],ke=[],J=new Map,G=0,pe=-1,$e=new Map,Ge=new Set,Ae=new Map,Ze=new Map,Qe=new Map,gt=!1;function Me(){return o=e.history.listen(Ne=>{let{action:Je,location:ut,delta:Ut}=Ne;if(gt){gt=!1;return}Yh(Qe.size===0||Ut!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Qt=$t({currentLocation:B.location,nextLocation:ut,historyAction:Je});if(Qt&&Ut!=null){gt=!0,e.history.go(Ut*-1),cr(Qt,{state:"blocked",location:ut,proceed(){cr(Qt,{state:"proceeding",proceed:void 0,reset:void 0,location:ut}),e.history.go(Ut)},reset(){Lr(Qt),Ve({blockers:new Map(oe.state.blockers)})}});return}return nt(Je,ut)}),B.initialized||nt(Ci.Pop,B.location),oe}function Ce(){o&&o(),x.clear(),Q&&Q.abort(),B.fetchers.forEach((Ne,Je)=>wn(Je)),B.blockers.forEach((Ne,Je)=>Lr(Je))}function Te(Ne){return x.add(Ne),()=>x.delete(Ne)}function Ve(Ne){B=xr({},B,Ne),x.forEach(Je=>Je(B))}function we(Ne,Je){var ut,Ut;let Qt=B.actionData!=null&&B.navigation.formMethod!=null&&Hs(B.navigation.formMethod)&&B.navigation.state==="loading"&&((ut=Ne.state)==null?void 0:ut._isRedirect)!==!0,Be;Je.actionData?Object.keys(Je.actionData).length>0?Be=Je.actionData:Be=null:Qt?Be=B.actionData:Be=null;let De=Je.loaderData?$k(B.loaderData,Je.loaderData,Je.matches||[],Je.errors):B.loaderData;for(let[mt]of Qe)Lr(mt);let dt=Z===!0||B.navigation.formMethod!=null&&Hs(B.navigation.formMethod)&&((Ut=Ne.state)==null?void 0:Ut._isRedirect)!==!0;c&&(i=c,c=void 0),Ve(xr({},Je,{actionData:Be,loaderData:De,historyAction:$,location:Ne,initialized:!0,navigation:Rw,revalidation:"idle",restoreScrollPosition:vn(Ne,Je.matches||B.matches),preventScrollReset:dt,blockers:new Map(B.blockers)})),ae||$===Ci.Pop||($===Ci.Push?e.history.push(Ne,Ne.state):$===Ci.Replace&&e.history.replace(Ne,Ne.state)),$=Ci.Pop,Z=!1,ae=!1,ue=!1,de=[],ke=[]}async function be(Ne,Je){if(typeof Ne=="number"){e.history.go(Ne);return}let ut=IS(B.location,B.matches,u,p.v7_prependBasename,Ne,Je==null?void 0:Je.fromRouteId,Je==null?void 0:Je.relative),{path:Ut,submission:Qt,error:Be}=Dk(p.v7_normalizeFormMethod,!1,ut,Je),De=B.location,dt=Eg(B.location,Ut,Je&&Je.state);dt=xr({},dt,e.history.encodeLocation(dt));let mt=Je&&Je.replace!=null?Je.replace:void 0,re=Ci.Push;mt===!0?re=Ci.Replace:mt===!1||Qt!=null&&Hs(Qt.formMethod)&&Qt.formAction===B.location.pathname+B.location.search&&(re=Ci.Replace);let W=Je&&"preventScrollReset"in Je?Je.preventScrollReset===!0:void 0,Y=$t({currentLocation:De,nextLocation:dt,historyAction:re});if(Y){cr(Y,{state:"blocked",location:dt,proceed(){cr(Y,{state:"proceeding",proceed:void 0,reset:void 0,location:dt}),be(Ne,Je)},reset(){Lr(Y),Ve({blockers:new Map(B.blockers)})}});return}return await nt(re,dt,{submission:Qt,pendingError:Be,preventScrollReset:W,replace:Je&&Je.replace})}function Ue(){if(ln(),Ve({revalidation:"loading"}),B.navigation.state!=="submitting"){if(B.navigation.state==="idle"){nt(B.historyAction,B.location,{startUninterruptedRevalidation:!0});return}nt($||B.historyAction,B.navigation.location,{overrideNavigation:B.navigation})}}async function nt(Ne,Je,ut){Q&&Q.abort(),Q=null,$=Ne,ae=(ut&&ut.startUninterruptedRevalidation)===!0,mn(B.location,B.matches),Z=(ut&&ut.preventScrollReset)===!0;let Ut=c||i,Qt=ut&&ut.overrideNavigation,Be=Mh(Ut,Je,u);if(!Be){let se=Za(404,{pathname:Je.pathname}),{matches:ge,route:Se}=Uk(Ut);nn(),we(Je,{matches:ge,loaderData:{},errors:{[Se.id]:se}});return}if(QU(B.location,Je)&&!(ut&&ut.submission&&Hs(ut.submission.formMethod))){we(Je,{matches:Be});return}Q=new AbortController;let De=um(e.history,Je,Q.signal,ut&&ut.submission),dt,mt;if(ut&&ut.pendingError)mt={[Ah(Be).route.id]:ut.pendingError};else if(ut&&ut.submission&&Hs(ut.submission.formMethod)){let se=await at(De,Je,ut.submission,Be,{replace:ut.replace});if(se.shortCircuited)return;dt=se.pendingActionData,mt=se.pendingActionError,Qt=xr({state:"loading",location:Je},ut.submission),De=new Request(De.url,{signal:De.signal})}let{shortCircuited:re,loaderData:W,errors:Y}=await At(De,Je,Be,Qt,ut&&ut.submission,ut&&ut.fetcherSubmission,ut&&ut.replace,dt,mt);re||(Q=null,we(Je,xr({matches:Be},dt?{actionData:dt}:{},{loaderData:W,errors:Y})))}async function at(Ne,Je,ut,Ut,Qt){ln();let Be=xr({state:"submitting",location:Je},ut);Ve({navigation:Be});let De,dt=LS(Ut,Je);if(!dt.route.action&&!dt.route.lazy)De={type:Li.error,error:Za(405,{method:Ne.method,pathname:Je.pathname,routeId:dt.route.id})};else if(De=await cm("action",Ne,dt,Ut,n,t,u),Ne.signal.aborted)return{shortCircuited:!0};if(Bh(De)){let mt;return Qt&&Qt.replace!=null?mt=Qt.replace:mt=De.location===B.location.pathname+B.location.search,await Nt(B,De,{submission:ut,replace:mt}),{shortCircuited:!0}}if(Km(De)){let mt=Ah(Ut,dt.route.id);return(Qt&&Qt.replace)!==!0&&($=Ci.Push),{pendingActionData:{},pendingActionError:{[mt.route.id]:De.error}}}if(zu(De))throw Za(400,{type:"defer-action"});return{pendingActionData:{[dt.route.id]:De.data}}}async function At(Ne,Je,ut,Ut,Qt,Be,De,dt,mt){let re=Ut;re||(re=xr({state:"loading",location:Je,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},Qt));let W=Qt||Be?Qt||Be:re.formMethod&&re.formAction&&re.formData&&re.formEncType?{formMethod:re.formMethod,formAction:re.formAction,formData:re.formData,formEncType:re.formEncType}:void 0,Y=c||i,[se,ge]=zk(e.history,B,ut,W,Je,ue,de,ke,Ae,Y,u,dt,mt);if(nn(rn=>!(ut&&ut.some(gn=>gn.route.id===rn))||se&&se.some(gn=>gn.route.id===rn)),se.length===0&&ge.length===0){let rn=sr();return we(Je,xr({matches:ut,loaderData:{},errors:mt||null},dt?{actionData:dt}:{},rn?{fetchers:new Map(B.fetchers)}:{})),{shortCircuited:!0}}if(!ae){ge.forEach(gn=>{let Cn=B.fetchers.get(gn.key),ir={state:"loading",data:Cn&&Cn.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};B.fetchers.set(gn.key,ir)});let rn=dt||B.actionData;Ve(xr({navigation:re},rn?Object.keys(rn).length===0?{actionData:null}:{actionData:rn}:{},ge.length>0?{fetchers:new Map(B.fetchers)}:{}))}pe=++G,ge.forEach(rn=>{rn.controller&&J.set(rn.key,rn.controller)});let Se=()=>ge.forEach(rn=>hn(rn.key));Q&&Q.signal.addEventListener("abort",Se);let{results:je,loaderResults:We,fetcherResults:Ie}=await Ht(B.matches,ut,se,ge,Ne);if(Ne.signal.aborted)return{shortCircuited:!0};Q&&Q.signal.removeEventListener("abort",Se),ge.forEach(rn=>J.delete(rn.key));let Ke=jk(je);if(Ke)return await Nt(B,Ke,{replace:De}),{shortCircuited:!0};let{loaderData:bt,errors:Dt}=Nk(B,ut,se,We,mt,ge,Ie,Ze);Ze.forEach((rn,gn)=>{rn.subscribe(Cn=>{(Cn||rn.done)&&Ze.delete(gn)})});let Et=sr(),_n=In(pe),En=Et||_n||ge.length>0;return xr({loaderData:bt,errors:Dt},En?{fetchers:new Map(B.fetchers)}:{})}function Ft(Ne){return B.fetchers.get(Ne)||GU}function Rt(Ne,Je,ut,Ut){if(WU)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");J.has(Ne)&&hn(Ne);let Qt=c||i,Be=IS(B.location,B.matches,u,p.v7_prependBasename,ut,Je,Ut==null?void 0:Ut.relative),De=Mh(Qt,Be,u);if(!De){Kt(Ne,Je,Za(404,{pathname:Be}));return}let{path:dt,submission:mt}=Dk(p.v7_normalizeFormMethod,!0,Be,Ut),re=LS(De,dt);if(Z=(Ut&&Ut.preventScrollReset)===!0,mt&&Hs(mt.formMethod)){Mt(Ne,Je,dt,re,De,mt);return}Ae.set(Ne,{routeId:Je,path:dt}),ct(Ne,Je,dt,re,De,mt)}async function Mt(Ne,Je,ut,Ut,Qt,Be){if(ln(),Ae.delete(Ne),!Ut.route.action&&!Ut.route.lazy){let Gn=Za(405,{method:Be.formMethod,pathname:ut,routeId:Je});Kt(Ne,Je,Gn);return}let De=B.fetchers.get(Ne),dt=xr({state:"submitting"},Be,{data:De&&De.data," _hasFetcherDoneAnything ":!0});B.fetchers.set(Ne,dt),Ve({fetchers:new Map(B.fetchers)});let mt=new AbortController,re=um(e.history,ut,mt.signal,Be);J.set(Ne,mt);let W=await cm("action",re,Ut,Qt,n,t,u);if(re.signal.aborted){J.get(Ne)===mt&&J.delete(Ne);return}if(Bh(W)){J.delete(Ne),Ge.add(Ne);let Gn=xr({state:"loading"},Be,{data:void 0," _hasFetcherDoneAnything ":!0});return B.fetchers.set(Ne,Gn),Ve({fetchers:new Map(B.fetchers)}),Nt(B,W,{submission:Be,isFetchActionRedirect:!0})}if(Km(W)){Kt(Ne,Je,W.error);return}if(zu(W))throw Za(400,{type:"defer-action"});let Y=B.navigation.location||B.location,se=um(e.history,Y,mt.signal),ge=c||i,Se=B.navigation.state!=="idle"?Mh(ge,B.navigation.location,u):B.matches;ar(Se,"Didn't find any matches after fetcher action");let je=++G;$e.set(Ne,je);let We=xr({state:"loading",data:W.data},Be,{" _hasFetcherDoneAnything ":!0});B.fetchers.set(Ne,We);let[Ie,Ke]=zk(e.history,B,Se,Be,Y,ue,de,ke,Ae,ge,u,{[Ut.route.id]:W.data},void 0);Ke.filter(Gn=>Gn.key!==Ne).forEach(Gn=>{let Hr=Gn.key,Ln=B.fetchers.get(Hr),ur={state:"loading",data:Ln&&Ln.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};B.fetchers.set(Hr,ur),Gn.controller&&J.set(Hr,Gn.controller)}),Ve({fetchers:new Map(B.fetchers)});let bt=()=>Ke.forEach(Gn=>hn(Gn.key));mt.signal.addEventListener("abort",bt);let{results:Dt,loaderResults:Et,fetcherResults:_n}=await Ht(B.matches,Se,Ie,Ke,se);if(mt.signal.aborted)return;mt.signal.removeEventListener("abort",bt),$e.delete(Ne),J.delete(Ne),Ke.forEach(Gn=>J.delete(Gn.key));let En=jk(Dt);if(En)return Nt(B,En);let{loaderData:rn,errors:gn}=Nk(B,B.matches,Ie,Et,void 0,Ke,_n,Ze),Cn={state:"idle",data:W.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};B.fetchers.set(Ne,Cn);let ir=In(je);B.navigation.state==="loading"&&je>pe?(ar($,"Expected pending action"),Q&&Q.abort(),we(B.navigation.location,{matches:Se,loaderData:rn,errors:gn,fetchers:new Map(B.fetchers)})):(Ve(xr({errors:gn,loaderData:$k(B.loaderData,rn,Se,gn)},ir?{fetchers:new Map(B.fetchers)}:{})),ue=!1)}async function ct(Ne,Je,ut,Ut,Qt,Be){let De=B.fetchers.get(Ne),dt=xr({state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},Be,{data:De&&De.data," _hasFetcherDoneAnything ":!0});B.fetchers.set(Ne,dt),Ve({fetchers:new Map(B.fetchers)});let mt=new AbortController,re=um(e.history,ut,mt.signal);J.set(Ne,mt);let W=await cm("loader",re,Ut,Qt,n,t,u);if(zu(W)&&(W=await dz(W,re.signal,!0)||W),J.get(Ne)===mt&&J.delete(Ne),re.signal.aborted)return;if(Bh(W)){Ge.add(Ne),await Nt(B,W);return}if(Km(W)){let se=Ah(B.matches,Je);B.fetchers.delete(Ne),Ve({fetchers:new Map(B.fetchers),errors:{[se.route.id]:W.error}});return}ar(!zu(W),"Unhandled fetcher deferred data");let Y={state:"idle",data:W.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};B.fetchers.set(Ne,Y),Ve({fetchers:new Map(B.fetchers)})}async function Nt(Ne,Je,ut){var Ut;let{submission:Qt,replace:Be,isFetchActionRedirect:De}=ut===void 0?{}:ut;Je.revalidate&&(ue=!0);let dt=Eg(Ne.location,Je.location,xr({_isRedirect:!0},De?{_isFetchActionRedirect:!0}:{}));if(ar(dt,"Expected a location on the redirect navigation"),az.test(Je.location)&&sz&&typeof((Ut=window)==null?void 0:Ut.location)<"u"){let ge=e.history.createURL(Je.location),Se=jg(ge.pathname,u)==null;if(window.location.origin!==ge.origin||Se){Be?window.location.replace(Je.location):window.location.assign(Je.location);return}}Q=null;let mt=Be===!0?Ci.Replace:Ci.Push,{formMethod:re,formAction:W,formEncType:Y,formData:se}=Ne.navigation;!Qt&&re&&W&&se&&Y&&(Qt={formMethod:re,formAction:W,formEncType:Y,formData:se}),VU.has(Je.status)&&Qt&&Hs(Qt.formMethod)?await nt(mt,dt,{submission:xr({},Qt,{formAction:Je.location}),preventScrollReset:Z}):De?await nt(mt,dt,{overrideNavigation:{state:"loading",location:dt,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},fetcherSubmission:Qt,preventScrollReset:Z}):await nt(mt,dt,{overrideNavigation:{state:"loading",location:dt,formMethod:Qt?Qt.formMethod:void 0,formAction:Qt?Qt.formAction:void 0,formEncType:Qt?Qt.formEncType:void 0,formData:Qt?Qt.formData:void 0},preventScrollReset:Z})}async function Ht(Ne,Je,ut,Ut,Qt){let Be=await Promise.all([...ut.map(mt=>cm("loader",Qt,mt,Je,n,t,u)),...Ut.map(mt=>mt.matches&&mt.match&&mt.controller?cm("loader",um(e.history,mt.path,mt.controller.signal),mt.match,mt.matches,n,t,u):{type:Li.error,error:Za(404,{pathname:mt.path})})]),De=Be.slice(0,ut.length),dt=Be.slice(ut.length);return await Promise.all([Vk(Ne,ut,De,De.map(()=>Qt.signal),!1,B.loaderData),Vk(Ne,Ut.map(mt=>mt.match),dt,Ut.map(mt=>mt.controller?mt.controller.signal:null),!0)]),{results:Be,loaderResults:De,fetcherResults:dt}}function ln(){ue=!0,de.push(...nn()),Ae.forEach((Ne,Je)=>{J.has(Je)&&(ke.push(Je),hn(Je))})}function Kt(Ne,Je,ut){let Ut=Ah(B.matches,Je);wn(Ne),Ve({errors:{[Ut.route.id]:ut},fetchers:new Map(B.fetchers)})}function wn(Ne){J.has(Ne)&&hn(Ne),Ae.delete(Ne),$e.delete(Ne),Ge.delete(Ne),B.fetchers.delete(Ne)}function hn(Ne){let Je=J.get(Ne);ar(Je,"Expected fetch controller: "+Ne),Je.abort(),J.delete(Ne)}function Xn(Ne){for(let Je of Ne){let Ut={state:"idle",data:Ft(Je).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};B.fetchers.set(Je,Ut)}}function sr(){let Ne=[],Je=!1;for(let ut of Ge){let Ut=B.fetchers.get(ut);ar(Ut,"Expected fetcher: "+ut),Ut.state==="loading"&&(Ge.delete(ut),Ne.push(ut),Je=!0)}return Xn(Ne),Je}function In(Ne){let Je=[];for(let[ut,Ut]of $e)if(Ut<Ne){let Qt=B.fetchers.get(ut);ar(Qt,"Expected fetcher: "+ut),Qt.state==="loading"&&(hn(ut),$e.delete(ut),Je.push(ut))}return Xn(Je),Je.length>0}function qn(Ne,Je){let ut=B.blockers.get(Ne)||Ok;return Qe.get(Ne)!==Je&&Qe.set(Ne,Je),ut}function Lr(Ne){B.blockers.delete(Ne),Qe.delete(Ne)}function cr(Ne,Je){let ut=B.blockers.get(Ne)||Ok;ar(ut.state==="unblocked"&&Je.state==="blocked"||ut.state==="blocked"&&Je.state==="blocked"||ut.state==="blocked"&&Je.state==="proceeding"||ut.state==="blocked"&&Je.state==="unblocked"||ut.state==="proceeding"&&Je.state==="unblocked","Invalid blocker state transition: "+ut.state+" -> "+Je.state),B.blockers.set(Ne,Je),Ve({blockers:new Map(B.blockers)})}function $t(Ne){let{currentLocation:Je,nextLocation:ut,historyAction:Ut}=Ne;if(Qe.size===0)return;Qe.size>1&&Yh(!1,"A router only supports one blocker at a time");let Qt=Array.from(Qe.entries()),[Be,De]=Qt[Qt.length-1],dt=B.blockers.get(Be);if(!(dt&&dt.state==="proceeding")&&De({currentLocation:Je,nextLocation:ut,historyAction:Ut}))return Be}function nn(Ne){let Je=[];return Ze.forEach((ut,Ut)=>{(!Ne||Ne(Ut))&&(ut.cancel(),Je.push(Ut),Ze.delete(Ut))}),Je}function Sn(Ne,Je,ut){if(S=Ne,k=Je,M=ut||(Ut=>Ut.key),!L&&B.navigation===Rw){L=!0;let Ut=vn(B.location,B.matches);Ut!=null&&Ve({restoreScrollPosition:Ut})}return()=>{S=null,k=null,M=null}}function mn(Ne,Je){if(S&&M&&k){let ut=Je.map(Qt=>Gk(Qt,B.loaderData)),Ut=M(Ne,ut)||Ne.key;S[Ut]=k()}}function vn(Ne,Je){if(S&&M&&k){let ut=Je.map(Be=>Gk(Be,B.loaderData)),Ut=M(Ne,ut)||Ne.key,Qt=S[Ut];if(typeof Qt=="number")return Qt}return null}function an(Ne){c=Ne}return oe={get basename(){return u},get state(){return B},get routes(){return i},initialize:Me,subscribe:Te,enableScrollRestoration:Sn,navigate:be,fetch:Rt,revalidate:Ue,createHref:Ne=>e.history.createHref(Ne),encodeLocation:Ne=>e.history.encodeLocation(Ne),getFetcher:Ft,deleteFetcher:wn,dispose:Ce,getBlocker:qn,deleteBlocker:Lr,_internalFetchControllers:J,_internalActiveDeferreds:Ze,_internalSetRoutes:an},oe}function ZU(e){return e!=null&&"formData"in e}function IS(e,t,n,i,c,u,p){let o,x;if(u!=null&&p!=="path"){o=[];for(let M of t)if(o.push(M),M.route.id===u){x=M;break}}else o=t,x=t[t.length-1];let S=rz(c||".",AT(o).map(M=>M.pathnameBase),jg(e.pathname,n)||e.pathname,p==="path");return c==null&&(S.search=e.search,S.hash=e.hash),(c==null||c===""||c===".")&&x&&x.route.index&&!PT(S.search)&&(S.search=S.search?S.search.replace(/^\?/,"?index&"):"?index"),i&&n!=="/"&&(S.pathname=S.pathname==="/"?n:gc([n,S.pathname])),Ug(S)}function Dk(e,t,n,i){if(!i||!ZU(i))return{path:n};if(i.formMethod&&!tj(i.formMethod))return{path:n,error:Za(405,{method:i.formMethod})};let c;if(i.formData){let o=i.formMethod||"get";if(c={formMethod:e?o.toUpperCase():o.toLowerCase(),formAction:uz(n),formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:i.formData},Hs(c.formMethod))return{path:n,submission:c}}let u=dl(n),p=cz(i.formData);return t&&u.search&&PT(u.search)&&p.append("index",""),u.search="?"+p,{path:Ug(u),submission:c}}function XU(e,t){let n=e;if(t){let i=e.findIndex(c=>c.route.id===t);i>=0&&(n=e.slice(0,i))}return n}function zk(e,t,n,i,c,u,p,o,x,S,M,k,L){let j=L?Object.values(L)[0]:k?Object.values(k)[0]:void 0,F=e.createURL(t.location),V=e.createURL(c),oe=L?Object.keys(L)[0]:void 0,$=XU(n,oe).filter((Q,ae)=>{if(Q.route.lazy)return!0;if(Q.route.loader==null)return!1;if(KU(t.loaderData,t.matches[ae],Q)||p.some(ke=>ke===Q.route.id))return!0;let ue=t.matches[ae],de=Q;return Fk(Q,xr({currentUrl:F,currentParams:ue.params,nextUrl:V,nextParams:de.params},i,{actionResult:j,defaultShouldRevalidate:u||F.pathname+F.search===V.pathname+V.search||F.search!==V.search||lz(ue,de)}))}),Z=[];return x.forEach((Q,ae)=>{if(!n.some(J=>J.route.id===Q.routeId))return;let ue=Mh(S,Q.path,M);if(!ue){Z.push({key:ae,routeId:Q.routeId,path:Q.path,matches:null,match:null,controller:null});return}let de=LS(ue,Q.path);if(o.includes(ae)){Z.push({key:ae,routeId:Q.routeId,path:Q.path,matches:ue,match:de,controller:new AbortController});return}Fk(de,xr({currentUrl:F,currentParams:t.matches[t.matches.length-1].params,nextUrl:V,nextParams:n[n.length-1].params},i,{actionResult:j,defaultShouldRevalidate:u}))&&Z.push({key:ae,routeId:Q.routeId,path:Q.path,matches:ue,match:de,controller:new AbortController})}),[$,Z]}function KU(e,t,n){let i=!t||n.route.id!==t.route.id,c=e[n.route.id]===void 0;return i||c}function lz(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function Fk(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}async function Bk(e,t,n){if(!e.lazy)return;let i=await e.lazy();if(!e.lazy)return;let c=n[e.id];ar(c,"No route found in manifest");let u={};for(let p in i){let x=c[p]!==void 0&&p!=="hasErrorBoundary";Yh(!x,'Route "'+c.id+'" has a static property "'+p+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+p+'" will be ignored.')),!x&&!vU.has(p)&&(u[p]=i[p])}Object.assign(c,u),Object.assign(c,xr({},t(c),{lazy:void 0}))}async function cm(e,t,n,i,c,u,p,o,x,S){o===void 0&&(o=!1),x===void 0&&(x=!1);let M,k,L,j=oe=>{let B,$=new Promise((Z,Q)=>B=Q);return L=()=>B(),t.signal.addEventListener("abort",L),Promise.race([oe({request:t,params:n.params,context:S}),$])};try{let oe=n.route[e];if(n.route.lazy)if(oe)k=(await Promise.all([j(oe),Bk(n.route,u,c)]))[0];else if(await Bk(n.route,u,c),oe=n.route[e],oe)k=await j(oe);else if(e==="action"){let B=new URL(t.url),$=B.pathname+B.search;throw Za(405,{method:t.method,pathname:$,routeId:n.route.id})}else return{type:Li.data,data:void 0};else if(oe)k=await j(oe);else{let B=new URL(t.url),$=B.pathname+B.search;throw Za(404,{pathname:$})}ar(k!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(oe){M=Li.error,k=oe}finally{L&&t.signal.removeEventListener("abort",L)}if(ej(k)){let oe=k.status;if(jU.has(oe)){let Z=k.headers.get("Location");if(ar(Z,"Redirects returned/thrown from loaders/actions must have a Location header"),!az.test(Z))Z=IS(new URL(t.url),i.slice(0,i.indexOf(n)+1),p,!0,Z);else if(!o){let Q=new URL(t.url),ae=Z.startsWith("//")?new URL(Q.protocol+Z):new URL(Z),ue=jg(ae.pathname,p)!=null;ae.origin===Q.origin&&ue&&(Z=ae.pathname+ae.search+ae.hash)}if(o)throw k.headers.set("Location",Z),k;return{type:Li.redirect,status:oe,location:Z,revalidate:k.headers.get("X-Remix-Revalidate")!==null}}if(x)throw{type:M||Li.data,response:k};let B,$=k.headers.get("Content-Type");return $&&/\bapplication\/json\b/.test($)?B=await k.json():B=await k.text(),M===Li.error?{type:M,error:new kT(oe,k.statusText,B),headers:k.headers}:{type:Li.data,data:B,statusCode:k.status,headers:k.headers}}if(M===Li.error)return{type:M,error:k};if(JU(k)){var F,V;return{type:Li.deferred,deferredData:k,statusCode:(F=k.init)==null?void 0:F.status,headers:((V=k.init)==null?void 0:V.headers)&&new Headers(k.init.headers)}}return{type:Li.data,data:k}}function um(e,t,n,i){let c=e.createURL(uz(t)).toString(),u={signal:n};if(i&&Hs(i.formMethod)){let{formMethod:p,formEncType:o,formData:x}=i;u.method=p.toUpperCase(),u.body=o==="application/x-www-form-urlencoded"?cz(x):x}return new Request(c,u)}function cz(e){let t=new URLSearchParams;for(let[n,i]of e.entries())t.append(n,i instanceof File?i.name:i);return t}function YU(e,t,n,i,c){let u={},p=null,o,x=!1,S={};return n.forEach((M,k)=>{let L=t[k].route.id;if(ar(!Bh(M),"Cannot handle redirect results in processLoaderData"),Km(M)){let j=Ah(e,L),F=M.error;i&&(F=Object.values(i)[0],i=void 0),p=p||{},p[j.route.id]==null&&(p[j.route.id]=F),u[L]=void 0,x||(x=!0,o=iz(M.error)?M.error.status:500),M.headers&&(S[L]=M.headers)}else zu(M)?(c.set(L,M.deferredData),u[L]=M.deferredData.data):u[L]=M.data,M.statusCode!=null&&M.statusCode!==200&&!x&&(o=M.statusCode),M.headers&&(S[L]=M.headers)}),i&&(p=i,u[Object.keys(i)[0]]=void 0),{loaderData:u,errors:p,statusCode:o||200,loaderHeaders:S}}function Nk(e,t,n,i,c,u,p,o){let{loaderData:x,errors:S}=YU(t,n,i,c,o);for(let M=0;M<u.length;M++){let{key:k,match:L,controller:j}=u[M];ar(p!==void 0&&p[M]!==void 0,"Did not find corresponding fetcher result");let F=p[M];if(!(j&&j.signal.aborted))if(Km(F)){let V=Ah(e.matches,L==null?void 0:L.route.id);S&&S[V.route.id]||(S=xr({},S,{[V.route.id]:F.error})),e.fetchers.delete(k)}else if(Bh(F))ar(!1,"Unhandled fetcher revalidation redirect");else if(zu(F))ar(!1,"Unhandled fetcher deferred data");else{let V={state:"idle",data:F.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};e.fetchers.set(k,V)}}return{loaderData:x,errors:S}}function $k(e,t,n,i){let c=xr({},t);for(let u of n){let p=u.route.id;if(t.hasOwnProperty(p)?t[p]!==void 0&&(c[p]=t[p]):e[p]!==void 0&&u.route.loader&&(c[p]=e[p]),i&&i.hasOwnProperty(p))break}return c}function Ah(e,t){return(t?e.slice(0,e.findIndex(i=>i.route.id===t)+1):[...e]).reverse().find(i=>i.route.hasErrorBoundary===!0)||e[0]}function Uk(e){let t=e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Za(e,t){let{pathname:n,routeId:i,method:c,type:u}=t===void 0?{}:t,p="Unknown Server Error",o="Unknown @remix-run/router error";return e===400?(p="Bad Request",c&&n&&i?o="You made a "+c+' request to "'+n+'" but '+('did not provide a `loader` for route "'+i+'", ')+"so there is no way to handle the request.":u==="defer-action"&&(o="defer() is not supported in actions")):e===403?(p="Forbidden",o='Route "'+i+'" does not match URL "'+n+'"'):e===404?(p="Not Found",o='No route matches URL "'+n+'"'):e===405&&(p="Method Not Allowed",c&&n&&i?o="You made a "+c.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+i+'", ')+"so there is no way to handle the request.":c&&(o='Invalid request method "'+c.toUpperCase()+'"')),new kT(e||500,p,new Error(o),!0)}function jk(e){for(let t=e.length-1;t>=0;t--){let n=e[t];if(Bh(n))return n}}function uz(e){let t=typeof e=="string"?dl(e):e;return Ug(xr({},t,{hash:""}))}function QU(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function zu(e){return e.type===Li.deferred}function Km(e){return e.type===Li.error}function Bh(e){return(e&&e.type)===Li.redirect}function JU(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function ej(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function tj(e){return UU.has(e.toLowerCase())}function Hs(e){return NU.has(e.toLowerCase())}async function Vk(e,t,n,i,c,u){for(let p=0;p<n.length;p++){let o=n[p],x=t[p];if(!x)continue;let S=e.find(k=>k.route.id===x.route.id),M=S!=null&&!lz(S,x)&&(u&&u[x.route.id])!==void 0;if(zu(o)&&(c||M)){let k=i[p];ar(k,"Expected an AbortSignal for revalidating fetcher deferred result"),await dz(o,k,c).then(L=>{L&&(n[p]=L||n[p])})}}}async function dz(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:Li.data,data:e.deferredData.unwrappedData}}catch(c){return{type:Li.error,error:c}}return{type:Li.data,data:e.deferredData.data}}}function PT(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Gk(e,t){let{route:n,pathname:i,params:c}=e;return{id:n.id,pathname:i,params:c,data:t[n.id],handle:n.handle}}function LS(e,t){let n=typeof t=="string"?dl(t).search:t.search;if(e[e.length-1].route.index&&PT(n||""))return e[e.length-1];let i=AT(e);return i[i.length-1]}/**
 * React Router v6.11.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function f_(){return f_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},f_.apply(this,arguments)}const IT=X.createContext(null),hz=X.createContext(null),e1=X.createContext(null),t1=X.createContext(null),kc=X.createContext({outlet:null,matches:[],isDataRoute:!1}),fz=X.createContext(null);function n1(){return X.useContext(t1)!=null}function r1(){return n1()||ar(!1),X.useContext(t1).location}function pz(e){X.useContext(e1).static||X.useLayoutEffect(e)}function nj(){let{isDataRoute:e}=X.useContext(kc);return e?gj():rj()}function rj(){n1()||ar(!1);let{basename:e,navigator:t}=X.useContext(e1),{matches:n}=X.useContext(kc),{pathname:i}=r1(),c=JSON.stringify(AT(n).map(o=>o.pathnameBase)),u=X.useRef(!1);return pz(()=>{u.current=!0}),X.useCallback(function(o,x){if(x===void 0&&(x={}),!u.current)return;if(typeof o=="number"){t.go(o);return}let S=rz(o,JSON.parse(c),i,x.relative==="path");e!=="/"&&(S.pathname=S.pathname==="/"?e:gc([e,S.pathname])),(x.replace?t.replace:t.push)(S,x.state,x)},[e,t,c,i])}const mz=X.createContext(null);function Fo(){return X.useContext(mz)}function ij(e){let t=X.useContext(kc).outlet;return t&&X.createElement(mz.Provider,{value:e},t)}function oj(){let{matches:e}=X.useContext(kc),t=e[e.length-1];return t?t.params:{}}function aj(e,t,n){n1()||ar(!1);let{navigator:i}=X.useContext(e1),{matches:c}=X.useContext(kc),u=c[c.length-1],p=u?u.params:{};u&&u.pathname;let o=u?u.pathnameBase:"/";u&&u.route;let x=r1(),S;if(t){var M;let V=typeof t=="string"?dl(t):t;o==="/"||(M=V.pathname)!=null&&M.startsWith(o)||ar(!1),S=V}else S=x;let k=S.pathname||"/",L=o==="/"?k:k.slice(o.length)||"/",j=Mh(e,{pathname:L}),F=dj(j&&j.map(V=>Object.assign({},V,{params:Object.assign({},p,V.params),pathname:gc([o,i.encodeLocation?i.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?o:gc([o,i.encodeLocation?i.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),c,n);return t&&F?X.createElement(t1.Provider,{value:{location:f_({pathname:"/",search:"",hash:"",state:null,key:"default"},S),navigationType:Ci.Pop}},F):F}function sj(){let e=mj(),t=iz(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},u=null;return X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},t),n?X.createElement("pre",{style:c},n):null,u)}const lj=X.createElement(sj,null);class cj extends X.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?X.createElement(kc.Provider,{value:this.props.routeContext},X.createElement(fz.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uj(e){let{routeContext:t,match:n,children:i}=e,c=X.useContext(IT);return c&&c.static&&c.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=n.route.id),X.createElement(kc.Provider,{value:t},i)}function dj(e,t,n){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),e==null){var c;if((c=n)!=null&&c.errors)e=n.matches;else return null}let u=e,p=(i=n)==null?void 0:i.errors;if(p!=null){let o=u.findIndex(x=>x.route.id&&(p==null?void 0:p[x.route.id]));o>=0||ar(!1),u=u.slice(0,Math.min(u.length,o+1))}return u.reduceRight((o,x,S)=>{let M=x.route.id?p==null?void 0:p[x.route.id]:null,k=null;n&&(k=x.route.errorElement||lj);let L=t.concat(u.slice(0,S+1)),j=()=>{let F;return M?F=k:x.route.Component?F=X.createElement(x.route.Component,null):x.route.element?F=x.route.element:F=o,X.createElement(uj,{match:x,routeContext:{outlet:o,matches:L,isDataRoute:n!=null},children:F})};return n&&(x.route.ErrorBoundary||x.route.errorElement||S===0)?X.createElement(cj,{location:n.location,revalidation:n.revalidation,component:k,error:M,children:j(),routeContext:{outlet:null,matches:L,isDataRoute:!0}}):j()},null)}var OS;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"})(OS||(OS={}));var Tg;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"})(Tg||(Tg={}));function hj(e){let t=X.useContext(IT);return t||ar(!1),t}function fj(e){let t=X.useContext(hz);return t||ar(!1),t}function pj(e){let t=X.useContext(kc);return t||ar(!1),t}function gz(e){let t=pj(),n=t.matches[t.matches.length-1];return n.route.id||ar(!1),n.route.id}function mj(){var e;let t=X.useContext(fz),n=fj(Tg.UseRouteError),i=gz(Tg.UseRouteError);return t||((e=n.errors)==null?void 0:e[i])}function gj(){let{router:e}=hj(OS.UseNavigateStable),t=gz(Tg.UseNavigateStable),n=X.useRef(!1);return pz(()=>{n.current=!0}),X.useCallback(function(c,u){u===void 0&&(u={}),n.current&&(typeof c=="number"?e.navigate(c):e.navigate(c,f_({fromRouteId:t},u)))},[e,t])}function yj(e){let{fallbackElement:t,router:n}=e,[i,c]=X.useState(n.state);X.useLayoutEffect(()=>n.subscribe(c),[n,c]);let u=X.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:x=>n.navigate(x),push:(x,S,M)=>n.navigate(x,{state:S,preventScrollReset:M==null?void 0:M.preventScrollReset}),replace:(x,S,M)=>n.navigate(x,{replace:!0,state:S,preventScrollReset:M==null?void 0:M.preventScrollReset})}),[n]),p=n.basename||"/",o=X.useMemo(()=>({router:n,navigator:u,static:!1,basename:p}),[n,u,p]);return X.createElement(X.Fragment,null,X.createElement(IT.Provider,{value:o},X.createElement(hz.Provider,{value:i},X.createElement(_j,{basename:n.basename,location:n.state.location,navigationType:n.state.historyAction,navigator:u},n.state.initialized?X.createElement(vj,{routes:n.routes,state:i}):t))),null)}function vj(e){let{routes:t,state:n}=e;return aj(t,void 0,n)}function LT(e){return ij(e.context)}function _j(e){let{basename:t="/",children:n=null,location:i,navigationType:c=Ci.Pop,navigator:u,static:p=!1}=e;n1()&&ar(!1);let o=t.replace(/^\/*/,"/"),x=X.useMemo(()=>({basename:o,navigator:u,static:p}),[o,u,p]);typeof i=="string"&&(i=dl(i));let{pathname:S="/",search:M="",hash:k="",state:L=null,key:j="default"}=i,F=X.useMemo(()=>{let V=jg(S,o);return V==null?null:{location:{pathname:V,search:M,hash:k,state:L,key:j},navigationType:c}},[o,S,M,k,L,j,c]);return F==null?null:X.createElement(e1.Provider,{value:x},X.createElement(t1.Provider,{children:n,value:F}))}var Wk;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(Wk||(Wk={}));new Promise(()=>{});function xj(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:X.createElement(e.Component),Component:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:X.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.11.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function p_(){return p_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},p_.apply(this,arguments)}function bj(e,t){return HU({basename:t==null?void 0:t.basename,future:p_({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:mU({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||wj(),routes:e,mapRouteProperties:xj}).initialize()}function wj(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=p_({},t,{errors:Sj(t.errors)})),t}function Sj(e){if(!e)return null;let t=Object.entries(e),n={};for(let[i,c]of t)if(c&&c.__type==="RouteErrorResponse")n[i]=new kT(c.status,c.statusText,c.data,c.internal===!0);else if(c&&c.__type==="Error"){let u=new Error(c.message);u.stack="",n[i]=u}else n[i]=c;return n}var qk;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(qk||(qk={}));var Hk;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Hk||(Hk={}));function Ej(e){const t=new Error(e);if(t.stack===void 0)try{throw t}catch{}return t}var Tj=Ej,Hn=Tj;function Cj(e){return!!e&&typeof e.then=="function"}var Wr=Cj;function Rj(e,t){if(e!=null)return e;throw Hn(t??"Got unexpected null or undefined")}var ti=Rj;function jn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class i1{getValue(){throw Hn("BaseLoadable")}toPromise(){throw Hn("BaseLoadable")}valueMaybe(){throw Hn("BaseLoadable")}valueOrThrow(){throw Hn(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw Hn("BaseLoadable")}promiseOrThrow(){throw Hn(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw Hn("BaseLoadable")}errorOrThrow(){throw Hn(`Loadable expected error, but in "${this.state}" state`)}is(t){return t.state===this.state&&t.contents===this.contents}map(t){throw Hn("BaseLoadable")}}class Mj extends i1{constructor(t){super(),jn(this,"state","hasValue"),jn(this,"contents",void 0),this.contents=t}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(t){try{const n=t(this.contents);return Wr(n)?Xu(n):Qh(n)?n:Vg(n)}catch(n){return Wr(n)?Xu(n.next(()=>this.map(t))):o1(n)}}}class Aj extends i1{constructor(t){super(),jn(this,"state","hasError"),jn(this,"contents",void 0),this.contents=t}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(t){return this}}class yz extends i1{constructor(t){super(),jn(this,"state","loading"),jn(this,"contents",void 0),this.contents=t}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(t){return Xu(this.contents.then(n=>{const i=t(n);if(Qh(i)){const c=i;switch(c.state){case"hasValue":return c.contents;case"hasError":throw c.contents;case"loading":return c.contents}}return i}).catch(n=>{if(Wr(n))return n.then(()=>this.map(t).contents);throw n}))}}function Vg(e){return Object.freeze(new Mj(e))}function o1(e){return Object.freeze(new Aj(e))}function Xu(e){return Object.freeze(new yz(e))}function vz(){return Object.freeze(new yz(new Promise(()=>{})))}function kj(e){return e.every(t=>t.state==="hasValue")?Vg(e.map(t=>t.contents)):e.some(t=>t.state==="hasError")?o1(ti(e.find(t=>t.state==="hasError"),"Invalid loadable passed to loadableAll").contents):Xu(Promise.all(e.map(t=>t.contents)))}function _z(e){const n=(Array.isArray(e)?e:Object.getOwnPropertyNames(e).map(c=>e[c])).map(c=>Qh(c)?c:Wr(c)?Xu(c):Vg(c)),i=kj(n);return Array.isArray(e)?i:i.map(c=>Object.getOwnPropertyNames(e).reduce((u,p,o)=>({...u,[p]:c[o]}),{}))}function Qh(e){return e instanceof i1}const Pj={of:e=>Wr(e)?Xu(e):Qh(e)?e:Vg(e),error:e=>o1(e),loading:()=>vz(),all:_z,isLoadable:Qh};var rd={loadableWithValue:Vg,loadableWithError:o1,loadableWithPromise:Xu,loadableLoading:vz,loadableAll:_z,isLoadable:Qh,RecoilLoadable:Pj},Ij=rd.loadableWithValue,Lj=rd.loadableWithError,Oj=rd.loadableWithPromise,Dj=rd.loadableLoading,zj=rd.loadableAll,Fj=rd.isLoadable,Bj=rd.RecoilLoadable,Gg=Object.freeze({__proto__:null,loadableWithValue:Ij,loadableWithError:Lj,loadableWithPromise:Oj,loadableLoading:Dj,loadableAll:zj,isLoadable:Fj,RecoilLoadable:Bj});const DS={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0,RECOIL_GKS_ENABLED:new Set(["recoil_hamt_2020","recoil_sync_external_store","recoil_suppress_rerender_in_callback","recoil_memory_managament_2020"])};function Nj(e,t){var n,i;const c=(n=process.env[e])===null||n===void 0||(i=n.toLowerCase())===null||i===void 0?void 0:i.trim();if(c==null||c==="")return;if(!["true","false"].includes(c))throw Hn(`({}).${e} value must be 'true', 'false', or empty: ${c}`);t(c==="true")}function $j(e,t){var n;const i=(n=process.env[e])===null||n===void 0?void 0:n.trim();i==null||i===""||t(i.split(/\s*,\s*|\s+/))}function Uj(){var e;typeof process>"u"||((e=process)===null||e===void 0?void 0:e.env)!=null&&(Nj("RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED",t=>{DS.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=t}),$j("RECOIL_GKS_ENABLED",t=>{t.forEach(n=>{DS.RECOIL_GKS_ENABLED.add(n)})}))}Uj();var pf=DS;function a1(e){return pf.RECOIL_GKS_ENABLED.has(e)}a1.setPass=e=>{pf.RECOIL_GKS_ENABLED.add(e)};a1.setFail=e=>{pf.RECOIL_GKS_ENABLED.delete(e)};a1.clear=()=>{pf.RECOIL_GKS_ENABLED.clear()};var Br=a1;function jj(e,t,{error:n}={}){return null}var Vj=jj,OT=Vj,Mw,Aw,kw;const Gj=(Mw=Xe.createMutableSource)!==null&&Mw!==void 0?Mw:Xe.unstable_createMutableSource,xz=(Aw=Xe.useMutableSource)!==null&&Aw!==void 0?Aw:Xe.unstable_useMutableSource,bz=(kw=Xe.useSyncExternalStore)!==null&&kw!==void 0?kw:Xe.unstable_useSyncExternalStore;function Wj(){var e;const{ReactCurrentDispatcher:t,ReactCurrentOwner:n}=Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return((e=t==null?void 0:t.current)!==null&&e!==void 0?e:n.currentDispatcher).useSyncExternalStore!=null}function qj(){return Br("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:Br("recoil_sync_external_store")&&bz!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:Br("recoil_mutable_source")&&xz!=null&&typeof window<"u"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?Br("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:Br("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function Hj(){return!1}var Wg={createMutableSource:Gj,useMutableSource:xz,useSyncExternalStore:bz,currentRendererSupportsUseSyncExternalStore:Wj,reactMode:qj,isFastRefreshEnabled:Hj};class DT{constructor(t){jn(this,"key",void 0),this.key=t}toJSON(){return{key:this.key}}}class wz extends DT{}class Sz extends DT{}function Zj(e){return e instanceof wz||e instanceof Sz}var s1={AbstractRecoilValue:DT,RecoilState:wz,RecoilValueReadOnly:Sz,isRecoilValue:Zj},Xj=s1.AbstractRecoilValue,Kj=s1.RecoilState,Yj=s1.RecoilValueReadOnly,Qj=s1.isRecoilValue,Jh=Object.freeze({__proto__:null,AbstractRecoilValue:Xj,RecoilState:Kj,RecoilValueReadOnly:Yj,isRecoilValue:Qj});function Jj(e,t){return function*(){let n=0;for(const i of e)yield t(i,n++)}()}var l1=Jj;class Ez{}const eV=new Ez,Ku=new Map,zT=new Map;function tV(e){return l1(e,t=>ti(zT.get(t)))}function nV(e){if(Ku.has(e)){const t=`Duplicate atom key "${e}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(t)}}function rV(e){pf.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&nV(e.key),Ku.set(e.key,e);const t=e.set==null?new Jh.RecoilValueReadOnly(e.key):new Jh.RecoilState(e.key);return zT.set(e.key,t),t}class Tz extends Error{}function iV(e){const t=Ku.get(e);if(t==null)throw new Tz(`Missing definition for RecoilValue: "${e}""`);return t}function oV(e){return Ku.get(e)}const m_=new Map;function aV(e){var t;if(!Br("recoil_memory_managament_2020"))return;const n=Ku.get(e);if(n!=null&&(t=n.shouldDeleteConfigOnRelease)!==null&&t!==void 0&&t.call(n)){var i;Ku.delete(e),(i=Cz(e))===null||i===void 0||i(),m_.delete(e)}}function sV(e,t){Br("recoil_memory_managament_2020")&&(t===void 0?m_.delete(e):m_.set(e,t))}function Cz(e){return m_.get(e)}var $o={nodes:Ku,recoilValues:zT,registerNode:rV,getNode:iV,getNodeMaybe:oV,deleteNodeConfigIfPossible:aV,setConfigDeletionHandler:sV,getConfigDeletionHandler:Cz,recoilValuesForKeys:tV,NodeMissingError:Tz,DefaultValue:Ez,DEFAULT_VALUE:eV};function lV(e,t){t()}var cV={enqueueExecution:lV};function uV(e,t){return t={exports:{}},e(t,t.exports),t.exports}var dV=uV(function(e){var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Be){return typeof Be}:function(Be){return Be&&typeof Symbol=="function"&&Be.constructor===Symbol&&Be!==Symbol.prototype?"symbol":typeof Be},n={},i=5,c=Math.pow(2,i),u=c-1,p=c/2,o=c/4,x={},S=function(De){return function(){return De}},M=n.hash=function(Be){var De=typeof Be>"u"?"undefined":t(Be);if(De==="number")return Be;De!=="string"&&(Be+="");for(var dt=0,mt=0,re=Be.length;mt<re;++mt){var W=Be.charCodeAt(mt);dt=(dt<<5)-dt+W|0}return dt},k=function(De){return De-=De>>1&1431655765,De=(De&858993459)+(De>>2&858993459),De=De+(De>>4)&252645135,De+=De>>8,De+=De>>16,De&127},L=function(De,dt){return dt>>>De&u},j=function(De){return 1<<De},F=function(De,dt){return k(De&dt-1)},V=function(De,dt,mt,re){var W=re;if(!De){var Y=re.length;W=new Array(Y);for(var se=0;se<Y;++se)W[se]=re[se]}return W[dt]=mt,W},oe=function(De,dt,mt){var re=mt.length-1,W=0,Y=0,se=mt;if(De)W=Y=dt;else for(se=new Array(re);W<dt;)se[Y++]=mt[W++];for(++W;W<=re;)se[Y++]=mt[W++];return De&&(se.length=re),se},B=function(De,dt,mt,re){var W=re.length;if(De){for(var Y=W;Y>=dt;)re[Y--]=re[Y];return re[dt]=mt,re}for(var se=0,ge=0,Se=new Array(W+1);se<dt;)Se[ge++]=re[se++];for(Se[dt]=mt;se<W;)Se[++ge]=re[se++];return Se},$=1,Z=2,Q=3,ae=4,ue={__hamt_isEmpty:!0},de=function(De){return De===ue||De&&De.__hamt_isEmpty},ke=function(De,dt,mt,re){return{type:$,edit:De,hash:dt,key:mt,value:re,_modify:Me}},J=function(De,dt,mt){return{type:Z,edit:De,hash:dt,children:mt,_modify:Ce}},G=function(De,dt,mt){return{type:Q,edit:De,mask:dt,children:mt,_modify:Te}},pe=function(De,dt,mt){return{type:ae,edit:De,size:dt,children:mt,_modify:Ve}},$e=function(De){return De===ue||De.type===$||De.type===Z},Ge=function(De,dt,mt,re,W){for(var Y=[],se=re,ge=0,Se=0;se;++Se)se&1&&(Y[Se]=W[ge++]),se>>>=1;return Y[dt]=mt,pe(De,ge+1,Y)},Ae=function(De,dt,mt,re){for(var W=new Array(dt-1),Y=0,se=0,ge=0,Se=re.length;ge<Se;++ge)if(ge!==mt){var je=re[ge];je&&!de(je)&&(W[Y++]=je,se|=1<<ge)}return G(De,se,W)},Ze=function Be(De,dt,mt,re,W,Y){if(mt===W)return J(De,mt,[Y,re]);var se=L(dt,mt),ge=L(dt,W);return G(De,j(se)|j(ge),se===ge?[Be(De,dt+i,mt,re,W,Y)]:se<ge?[re,Y]:[Y,re])},Qe=function(De,dt,mt,re,W,Y,se,ge){for(var Se=W.length,je=0;je<Se;++je){var We=W[je];if(mt(se,We.key)){var Ie=We.value,Ke=Y(Ie);return Ke===Ie?W:Ke===x?(--ge.value,oe(De,je,W)):V(De,je,ke(dt,re,se,Ke),W)}}var bt=Y();return bt===x?W:(++ge.value,V(De,Se,ke(dt,re,se,bt),W))},gt=function(De,dt){return De===dt.edit},Me=function(De,dt,mt,re,W,Y,se){if(dt(Y,this.key)){var ge=re(this.value);return ge===this.value?this:ge===x?(--se.value,ue):gt(De,this)?(this.value=ge,this):ke(De,W,Y,ge)}var Se=re();return Se===x?this:(++se.value,Ze(De,mt,this.hash,this,W,ke(De,W,Y,Se)))},Ce=function(De,dt,mt,re,W,Y,se){if(W===this.hash){var ge=gt(De,this),Se=Qe(ge,De,dt,this.hash,this.children,re,Y,se);return Se===this.children?this:Se.length>1?J(De,this.hash,Se):Se[0]}var je=re();return je===x?this:(++se.value,Ze(De,mt,this.hash,this,W,ke(De,W,Y,je)))},Te=function(De,dt,mt,re,W,Y,se){var ge=this.mask,Se=this.children,je=L(mt,W),We=j(je),Ie=F(ge,We),Ke=ge&We,bt=Ke?Se[Ie]:ue,Dt=bt._modify(De,dt,mt+i,re,W,Y,se);if(bt===Dt)return this;var Et=gt(De,this),_n=ge,En=void 0;if(Ke&&de(Dt)){if(_n&=~We,!_n)return ue;if(Se.length<=2&&$e(Se[Ie^1]))return Se[Ie^1];En=oe(Et,Ie,Se)}else if(!Ke&&!de(Dt)){if(Se.length>=p)return Ge(De,je,Dt,ge,Se);_n|=We,En=B(Et,Ie,Dt,Se)}else En=V(Et,Ie,Dt,Se);return Et?(this.mask=_n,this.children=En,this):G(De,_n,En)},Ve=function(De,dt,mt,re,W,Y,se){var ge=this.size,Se=this.children,je=L(mt,W),We=Se[je],Ie=(We||ue)._modify(De,dt,mt+i,re,W,Y,se);if(We===Ie)return this;var Ke=gt(De,this),bt=void 0;if(de(We)&&!de(Ie))++ge,bt=V(Ke,je,Ie,Se);else if(!de(We)&&de(Ie)){if(--ge,ge<=o)return Ae(De,ge,je,Se);bt=V(Ke,je,ue,Se)}else bt=V(Ke,je,Ie,Se);return Ke?(this.size=ge,this.children=bt,this):pe(De,ge,bt)};ue._modify=function(Be,De,dt,mt,re,W,Y){var se=mt();return se===x?ue:(++Y.value,ke(Be,re,W,se))};function we(Be,De,dt,mt,re){this._editable=Be,this._edit=De,this._config=dt,this._root=mt,this._size=re}we.prototype.setTree=function(Be,De){return this._editable?(this._root=Be,this._size=De,this):Be===this._root?this:new we(this._editable,this._edit,this._config,Be,De)};var be=n.tryGetHash=function(Be,De,dt,mt){for(var re=mt._root,W=0,Y=mt._config.keyEq;;)switch(re.type){case $:return Y(dt,re.key)?re.value:Be;case Z:{if(De===re.hash)for(var se=re.children,ge=0,Se=se.length;ge<Se;++ge){var je=se[ge];if(Y(dt,je.key))return je.value}return Be}case Q:{var We=L(W,De),Ie=j(We);if(re.mask&Ie){re=re.children[F(re.mask,Ie)],W+=i;break}return Be}case ae:{if(re=re.children[L(W,De)],re){W+=i;break}return Be}default:return Be}};we.prototype.tryGetHash=function(Be,De,dt){return be(Be,De,dt,this)};var Ue=n.tryGet=function(Be,De,dt){return be(Be,dt._config.hash(De),De,dt)};we.prototype.tryGet=function(Be,De){return Ue(Be,De,this)};var nt=n.getHash=function(Be,De,dt){return be(void 0,Be,De,dt)};we.prototype.getHash=function(Be,De){return nt(Be,De,this)},n.get=function(Be,De){return be(void 0,De._config.hash(Be),Be,De)},we.prototype.get=function(Be,De){return Ue(De,Be,this)};var at=n.has=function(Be,De,dt){return be(x,Be,De,dt)!==x};we.prototype.hasHash=function(Be,De){return at(Be,De,this)};var At=n.has=function(Be,De){return at(De._config.hash(Be),Be,De)};we.prototype.has=function(Be){return At(Be,this)};var Ft=function(De,dt){return De===dt};n.make=function(Be){return new we(0,0,{keyEq:Be&&Be.keyEq||Ft,hash:Be&&Be.hash||M},ue,0)},n.empty=n.make();var Rt=n.isEmpty=function(Be){return Be&&!!de(Be._root)};we.prototype.isEmpty=function(){return Rt(this)};var Mt=n.modifyHash=function(Be,De,dt,mt){var re={value:mt._size},W=mt._root._modify(mt._editable?mt._edit:NaN,mt._config.keyEq,0,Be,De,dt,re);return mt.setTree(W,re.value)};we.prototype.modifyHash=function(Be,De,dt){return Mt(dt,Be,De,this)};var ct=n.modify=function(Be,De,dt){return Mt(Be,dt._config.hash(De),De,dt)};we.prototype.modify=function(Be,De){return ct(De,Be,this)};var Nt=n.setHash=function(Be,De,dt,mt){return Mt(S(dt),Be,De,mt)};we.prototype.setHash=function(Be,De,dt){return Nt(Be,De,dt,this)};var Ht=n.set=function(Be,De,dt){return Nt(dt._config.hash(Be),Be,De,dt)};we.prototype.set=function(Be,De){return Ht(Be,De,this)};var ln=S(x),Kt=n.removeHash=function(Be,De,dt){return Mt(ln,Be,De,dt)};we.prototype.removeHash=we.prototype.deleteHash=function(Be,De){return Kt(Be,De,this)};var wn=n.remove=function(Be,De){return Kt(De._config.hash(Be),Be,De)};we.prototype.remove=we.prototype.delete=function(Be){return wn(Be,this)};var hn=n.beginMutation=function(Be){return new we(Be._editable+1,Be._edit+1,Be._config,Be._root,Be._size)};we.prototype.beginMutation=function(){return hn(this)};var Xn=n.endMutation=function(Be){return Be._editable=Be._editable&&Be._editable-1,Be};we.prototype.endMutation=function(){return Xn(this)};var sr=n.mutate=function(Be,De){var dt=hn(De);return Be(dt),Xn(dt)};we.prototype.mutate=function(Be){return sr(Be,this)};var In=function(De){return De&&qn(De[0],De[1],De[2],De[3],De[4])},qn=function(De,dt,mt,re,W){for(;mt<De;){var Y=dt[mt++];if(Y&&!de(Y))return Lr(Y,re,[De,dt,mt,re,W])}return In(W)},Lr=function(De,dt,mt){switch(De.type){case $:return{value:dt(De),rest:mt};case Z:case ae:case Q:var re=De.children;return qn(re.length,re,0,dt,mt);default:return In(mt)}},cr={done:!0};function $t(Be){this.v=Be}$t.prototype.next=function(){if(!this.v)return cr;var Be=this.v;return this.v=In(Be.rest),Be},$t.prototype[Symbol.iterator]=function(){return this};var nn=function(De,dt){return new $t(Lr(De._root,dt))},Sn=function(De){return[De.key,De.value]},mn=n.entries=function(Be){return nn(Be,Sn)};we.prototype.entries=we.prototype[Symbol.iterator]=function(){return mn(this)};var vn=function(De){return De.key},an=n.keys=function(Be){return nn(Be,vn)};we.prototype.keys=function(){return an(this)};var Ne=function(De){return De.value},Je=n.values=we.prototype.values=function(Be){return nn(Be,Ne)};we.prototype.values=function(){return Je(this)};var ut=n.fold=function(Be,De,dt){var mt=dt._root;if(mt.type===$)return Be(De,mt.value,mt.key);for(var re=[mt.children],W=void 0;W=re.pop();)for(var Y=0,se=W.length;Y<se;){var ge=W[Y++];ge&&ge.type&&(ge.type===$?De=Be(De,ge.value,ge.key):re.push(ge.children))}return De};we.prototype.fold=function(Be,De){return ut(Be,De,this)};var Ut=n.forEach=function(Be,De){return ut(function(dt,mt,re){return Be(mt,re,De)},null,De)};we.prototype.forEach=function(Be){return Ut(Be,this)};var Qt=n.count=function(Be){return Be._size};we.prototype.count=function(){return Qt(this)},Object.defineProperty(we.prototype,"size",{get:we.prototype.count}),e.exports?e.exports=n:(void 0).hamt=n});class hV{constructor(t){jn(this,"_map",void 0),this._map=new Map(t==null?void 0:t.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(t){return this._map.get(t)}has(t){return this._map.has(t)}set(t,n){return this._map.set(t,n),this}delete(t){return this._map.delete(t),this}clone(){return BT(this)}toMap(){return new Map(this._map)}}class FT{constructor(t){if(jn(this,"_hamt",dV.empty.beginMutation()),t instanceof FT){const n=t._hamt.endMutation();t._hamt=n.beginMutation(),this._hamt=n.beginMutation()}else if(t)for(const[n,i]of t.entries())this._hamt.set(n,i)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(t){return this._hamt.get(t)}has(t){return this._hamt.has(t)}set(t,n){return this._hamt.set(t,n),this}delete(t){return this._hamt.delete(t),this}clone(){return BT(this)}toMap(){return new Map(this._hamt)}}function BT(e){return Br("recoil_hamt_2020")?new FT(e):new hV(e)}var fV={persistentMap:BT},pV=fV.persistentMap,mV=Object.freeze({__proto__:null,persistentMap:pV});function gV(e,...t){const n=new Set;e:for(const i of e){for(const c of t)if(c.has(i))continue e;n.add(i)}return n}var Ym=gV;function yV(e,t){const n=new Map;return e.forEach((i,c)=>{n.set(c,t(i,c))}),n}var g_=yV;function vV(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function _V(e){return{nodeDeps:g_(e.nodeDeps,t=>new Set(t)),nodeToNodeSubscriptions:g_(e.nodeToNodeSubscriptions,t=>new Set(t))}}function Pw(e,t,n,i){const{nodeDeps:c,nodeToNodeSubscriptions:u}=n,p=c.get(e);if(p&&i&&p!==i.nodeDeps.get(e))return;c.set(e,t);const o=p==null?t:Ym(t,p);for(const x of o)u.has(x)||u.set(x,new Set),ti(u.get(x)).add(e);if(p){const x=Ym(p,t);for(const S of x){if(!u.has(S))return;const M=ti(u.get(S));M.delete(e),M.size===0&&u.delete(S)}}}function xV(e,t,n,i){var c,u,p,o;const x=n.getState();i===x.currentTree.version||i===((c=x.nextTree)===null||c===void 0?void 0:c.version)||((u=x.previousTree)===null||u===void 0||u.version);const S=n.getGraph(i);if(Pw(e,t,S),i===((p=x.previousTree)===null||p===void 0?void 0:p.version)){const k=n.getGraph(x.currentTree.version);Pw(e,t,k,S)}if(i===((o=x.previousTree)===null||o===void 0?void 0:o.version)||i===x.currentTree.version){var M;const k=(M=x.nextTree)===null||M===void 0?void 0:M.version;if(k!==void 0){const L=n.getGraph(k);Pw(e,t,L,S)}}}var qg={cloneGraph:_V,graph:vV,saveDepsToStore:xV};let bV=0;const wV=()=>bV++;let SV=0;const EV=()=>SV++;let TV=0;const CV=()=>TV++;var c1={getNextTreeStateVersion:wV,getNextStoreID:EV,getNextComponentID:CV};const{persistentMap:Zk}=mV,{graph:RV}=qg,{getNextTreeStateVersion:Rz}=c1;function Mz(){const e=Rz();return{version:e,stateID:e,transactionMetadata:{},dirtyAtoms:new Set,atomValues:Zk(),nonvalidatedAtoms:Zk()}}function MV(){const e=Mz();return{currentTree:e,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(e.version,RV()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var Az={makeEmptyTreeState:Mz,makeEmptyStoreState:MV,getNextTreeStateVersion:Rz};class kz{}function AV(){return new kz}var u1={RetentionZone:kz,retentionZone:AV};function kV(e,t){const n=new Set(e);return n.add(t),n}function PV(e,t){const n=new Set(e);return n.delete(t),n}function IV(e,t,n){const i=new Map(e);return i.set(t,n),i}function LV(e,t,n){const i=new Map(e);return i.set(t,n(i.get(t))),i}function OV(e,t){const n=new Map(e);return n.delete(t),n}function DV(e,t){const n=new Map(e);return t.forEach(i=>n.delete(i)),n}var Pz={setByAddingToSet:kV,setByDeletingFromSet:PV,mapBySettingInMap:IV,mapByUpdatingInMap:LV,mapByDeletingFromMap:OV,mapByDeletingMultipleFromMap:DV};function*zV(e,t){let n=0;for(const i of e)t(i,n++)&&(yield i)}var NT=zV;function FV(e,t){return new Proxy(e,{get:(i,c)=>(!(c in i)&&c in t&&(i[c]=t[c]()),i[c]),ownKeys:i=>Object.keys(i)})}var Iz=FV;const{getNode:Hg,getNodeMaybe:BV,recoilValuesForKeys:Xk}=$o,{RetentionZone:Kk}=u1,{setByAddingToSet:NV}=Pz,$V=Object.freeze(new Set);class UV extends Error{}function jV(e,t,n){if(!Br("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:i}=e.getState().retention;function c(u){let p=i.get(u);p||i.set(u,p=new Set),p.add(t)}if(n instanceof Kk)c(n);else if(Array.isArray(n))for(const u of n)c(u);return()=>{if(!Br("recoil_memory_managament_2020"))return;const{retention:u}=e.getState();function p(o){const x=u.nodesRetainedByZone.get(o);x==null||x.delete(t),x&&x.size===0&&u.nodesRetainedByZone.delete(o)}if(n instanceof Kk)p(n);else if(Array.isArray(n))for(const o of n)p(o)}}function $T(e,t,n,i){const c=e.getState();if(c.nodeCleanupFunctions.has(n))return;const u=Hg(n),p=jV(e,n,u.retainedBy),o=u.init(e,t,i);c.nodeCleanupFunctions.set(n,()=>{o(),p()})}function VV(e,t,n){$T(e,e.getState().currentTree,t,n)}function GV(e,t){var n;const i=e.getState();(n=i.nodeCleanupFunctions.get(t))===null||n===void 0||n(),i.nodeCleanupFunctions.delete(t)}function WV(e,t,n){return $T(e,t,n,"get"),Hg(n).get(e,t)}function Lz(e,t,n){return Hg(n).peek(e,t)}function qV(e,t,n){var i;const c=BV(t);return c==null||(i=c.invalidate)===null||i===void 0||i.call(c,e),{...e,atomValues:e.atomValues.clone().delete(t),nonvalidatedAtoms:e.nonvalidatedAtoms.clone().set(t,n),dirtyAtoms:NV(e.dirtyAtoms,t)}}function HV(e,t,n,i){const c=Hg(n);if(c.set==null)throw new UV(`Attempt to set read-only RecoilValue: ${n}`);const u=c.set;return $T(e,t,n,"set"),u(e,t,i)}function ZV(e,t,n){const i=e.getState(),c=e.getGraph(t.version),u=Hg(n).nodeType;return Iz({type:u},{loadable:()=>Lz(e,t,n),isActive:()=>i.knownAtoms.has(n)||i.knownSelectors.has(n),isSet:()=>u==="selector"?!1:t.atomValues.has(n),isModified:()=>t.dirtyAtoms.has(n),deps:()=>{var p;return Xk((p=c.nodeDeps.get(n))!==null&&p!==void 0?p:[])},subscribers:()=>{var p,o;return{nodes:Xk(NT(Oz(e,t,new Set([n])),x=>x!==n)),components:l1((p=(o=i.nodeToComponentSubscriptions.get(n))===null||o===void 0?void 0:o.values())!==null&&p!==void 0?p:[],([x])=>({name:x}))}}})}function Oz(e,t,n){const i=new Set,c=Array.from(n),u=e.getGraph(t.version);for(let o=c.pop();o;o=c.pop()){var p;i.add(o);const x=(p=u.nodeToNodeSubscriptions.get(o))!==null&&p!==void 0?p:$V;for(const S of x)i.has(S)||c.push(S)}return i}var Pc={getNodeLoadable:WV,peekNodeLoadable:Lz,setNodeValue:HV,initializeNode:VV,cleanUpNode:GV,setUnvalidatedAtomValue_DEPRECATED:qV,peekNodeInfo:ZV,getDownstreamNodes:Oz};let Dz=null;function XV(e){Dz=e}function KV(){var e;(e=Dz)===null||e===void 0||e()}var zz={setInvalidateMemoizedSnapshot:XV,invalidateMemoizedSnapshot:KV};const{getDownstreamNodes:YV,getNodeLoadable:Fz,setNodeValue:QV}=Pc,{getNextComponentID:JV}=c1,{getNode:e9,getNodeMaybe:Bz}=$o,{DefaultValue:UT}=$o,{reactMode:t9}=Wg,{AbstractRecoilValue:n9,RecoilState:r9,RecoilValueReadOnly:i9,isRecoilValue:o9}=Jh,{invalidateMemoizedSnapshot:a9}=zz;function s9(e,{key:t},n=e.getState().currentTree){var i,c;const u=e.getState();n.version===u.currentTree.version||n.version===((i=u.nextTree)===null||i===void 0?void 0:i.version)||(n.version,(c=u.previousTree)===null||c===void 0||c.version);const p=Fz(e,n,t);return p.state==="loading"&&p.contents.catch(()=>{}),p}function l9(e,t){const n=e.clone();return t.forEach((i,c)=>{i.state==="hasValue"&&i.contents instanceof UT?n.delete(c):n.set(c,i)}),n}function c9(e,t,{key:n},i){if(typeof i=="function"){const c=Fz(e,t,n);if(c.state==="loading"){const u=`Tried to set atom or selector "${n}" using an updater function while the current state is pending, this is not currently supported.`;throw Hn(u)}else if(c.state==="hasError")throw c.contents;return i(c.contents)}else return i}function u9(e,t,n){if(n.type==="set"){const{recoilValue:c,valueOrUpdater:u}=n,p=c9(e,t,c,u),o=QV(e,t,c.key,p);for(const[x,S]of o.entries())zS(t,x,S)}else if(n.type==="setLoadable"){const{recoilValue:{key:c},loadable:u}=n;zS(t,c,u)}else if(n.type==="markModified"){const{recoilValue:{key:c}}=n;t.dirtyAtoms.add(c)}else if(n.type==="setUnvalidated"){var i;const{recoilValue:{key:c},unvalidatedValue:u}=n,p=Bz(c);p==null||(i=p.invalidate)===null||i===void 0||i.call(p,t),t.atomValues.delete(c),t.nonvalidatedAtoms.set(c,u),t.dirtyAtoms.add(c)}else OT(`Unknown action ${n.type}`)}function zS(e,t,n){n.state==="hasValue"&&n.contents instanceof UT?e.atomValues.delete(t):e.atomValues.set(t,n),e.dirtyAtoms.add(t),e.nonvalidatedAtoms.delete(t)}function Nz(e,t){e.replaceState(n=>{const i=$z(n);for(const c of t)u9(e,i,c);return Uz(e,i),a9(),i})}function d1(e,t){if(Qm.length){const n=Qm[Qm.length-1];let i=n.get(e);i||n.set(e,i=[]),i.push(t)}else Nz(e,[t])}const Qm=[];function d9(){const e=new Map;return Qm.push(e),()=>{for(const[t,n]of e)Nz(t,n);Qm.pop()}}function $z(e){return{...e,atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(e.dirtyAtoms)}}function Uz(e,t){const n=YV(e,t,t.dirtyAtoms);for(const u of n){var i,c;(i=Bz(u))===null||i===void 0||(c=i.invalidate)===null||c===void 0||c.call(i,t)}}function jz(e,t,n){d1(e,{type:"set",recoilValue:t,valueOrUpdater:n})}function h9(e,t,n){if(n instanceof UT)return jz(e,t,n);d1(e,{type:"setLoadable",recoilValue:t,loadable:n})}function f9(e,t){d1(e,{type:"markModified",recoilValue:t})}function p9(e,t,n){d1(e,{type:"setUnvalidated",recoilValue:t,unvalidatedValue:n})}function m9(e,{key:t},n,i=null){const c=JV(),u=e.getState();u.nodeToComponentSubscriptions.has(t)||u.nodeToComponentSubscriptions.set(t,new Map),ti(u.nodeToComponentSubscriptions.get(t)).set(c,[i??"<not captured>",n]);const p=t9();if(p.early&&(p.mode==="LEGACY"||p.mode==="MUTABLE_SOURCE")){const o=e.getState().nextTree;o&&o.dirtyAtoms.has(t)&&n(o)}return{release:()=>{const o=e.getState(),x=o.nodeToComponentSubscriptions.get(t);x===void 0||!x.has(c)||(x.delete(c),x.size===0&&o.nodeToComponentSubscriptions.delete(t))}}}function g9(e,t){var n;const{currentTree:i}=e.getState(),c=e9(t.key);(n=c.clearCache)===null||n===void 0||n.call(c,e,i)}var ws={RecoilValueReadOnly:i9,AbstractRecoilValue:n9,RecoilState:r9,getRecoilValueAsLoadable:s9,setRecoilValue:jz,setRecoilValueLoadable:h9,markRecoilValueModified:f9,setUnvalidatedRecoilValue:p9,subscribeToRecoilValue:m9,isRecoilValue:o9,applyAtomValueWrites:l9,batchStart:d9,writeLoadableToTreeState:zS,invalidateDownstreams:Uz,copyTreeState:$z,refreshRecoilValue:g9};function y9(e,t,n){const i=e.entries();let c=i.next();for(;!c.done;){const u=c.value;if(t.call(n,u[1],u[0],e))return!0;c=i.next()}return!1}var v9=y9;const{cleanUpNode:_9}=Pc,{deleteNodeConfigIfPossible:x9,getNode:Vz}=$o,{RetentionZone:Gz}=u1,b9=12e4,Wz=new Set;function qz(e,t){const n=e.getState(),i=n.currentTree;if(n.nextTree)return;const c=new Set;for(const p of t)if(p instanceof Gz)for(const o of T9(n,p))c.add(o);else c.add(p);const u=w9(e,c);for(const p of u)E9(e,i,p)}function w9(e,t){const n=e.getState(),i=n.currentTree,c=e.getGraph(i.version),u=new Set,p=new Set;return o(t),u;function o(x){const S=new Set,M=S9(e,i,x,u,p);for(const F of M){var k;if(Vz(F).retainedBy==="recoilRoot"){p.add(F);continue}if(((k=n.retention.referenceCounts.get(F))!==null&&k!==void 0?k:0)>0){p.add(F);continue}if(Hz(F).some(oe=>n.retention.referenceCounts.get(oe))){p.add(F);continue}const V=c.nodeToNodeSubscriptions.get(F);if(V&&v9(V,oe=>p.has(oe))){p.add(F);continue}u.add(F),S.add(F)}const L=new Set;for(const F of S)for(const V of(j=c.nodeDeps.get(F))!==null&&j!==void 0?j:Wz){var j;u.has(V)||L.add(V)}L.size&&o(L)}}function S9(e,t,n,i,c){const u=e.getGraph(t.version),p=[],o=new Set;for(;n.size>0;)x(ti(n.values().next().value));return p;function x(S){if(i.has(S)||c.has(S)){n.delete(S);return}if(o.has(S))return;const M=u.nodeToNodeSubscriptions.get(S);if(M)for(const k of M)x(k);o.add(S),n.delete(S),p.push(S)}}function E9(e,t,n){if(!Br("recoil_memory_managament_2020"))return;_9(e,n);const i=e.getState();i.knownAtoms.delete(n),i.knownSelectors.delete(n),i.nodeTransactionSubscriptions.delete(n),i.retention.referenceCounts.delete(n);const c=Hz(n);for(const x of c){var u;(u=i.retention.nodesRetainedByZone.get(x))===null||u===void 0||u.delete(n)}t.atomValues.delete(n),t.dirtyAtoms.delete(n),t.nonvalidatedAtoms.delete(n);const p=i.graphsByVersion.get(t.version);if(p){const x=p.nodeDeps.get(n);if(x!==void 0){p.nodeDeps.delete(n);for(const S of x){var o;(o=p.nodeToNodeSubscriptions.get(S))===null||o===void 0||o.delete(n)}}p.nodeToNodeSubscriptions.delete(n)}x9(n)}function T9(e,t){var n;return(n=e.retention.nodesRetainedByZone.get(t))!==null&&n!==void 0?n:Wz}function Hz(e){const t=Vz(e).retainedBy;return t===void 0||t==="components"||t==="recoilRoot"?[]:t instanceof Gz?[t]:t}function C9(e,t){const n=e.getState();n.nextTree?n.retention.retainablesToCheckForRelease.add(t):qz(e,new Set([t]))}function R9(e,t,n){var i;if(!Br("recoil_memory_managament_2020"))return;const c=e.getState().retention.referenceCounts,u=((i=c.get(t))!==null&&i!==void 0?i:0)+n;u===0?Zz(e,t):c.set(t,u)}function Zz(e,t){if(!Br("recoil_memory_managament_2020"))return;e.getState().retention.referenceCounts.delete(t),C9(e,t)}function M9(e){if(!Br("recoil_memory_managament_2020"))return;const t=e.getState();qz(e,t.retention.retainablesToCheckForRelease),t.retention.retainablesToCheckForRelease.clear()}function A9(e){return e===void 0?"recoilRoot":e}var id={SUSPENSE_TIMEOUT_MS:b9,updateRetainCount:R9,updateRetainCountToZero:Zz,releaseScheduledRetainablesNow:M9,retainedByOptionWithDefault:A9};const{unstable_batchedUpdates:k9}=Rh;var P9={unstable_batchedUpdates:k9};const{unstable_batchedUpdates:I9}=P9;var L9={unstable_batchedUpdates:I9};const{batchStart:O9}=ws,{unstable_batchedUpdates:D9}=L9;let jT=D9||(e=>e());const z9=e=>{jT=e},F9=()=>jT,B9=e=>{jT(()=>{let t=()=>{};try{t=O9(),e()}finally{t()}})};var h1={getBatcher:F9,setBatcher:z9,batchUpdates:B9};function*N9(e){for(const t of e)for(const n of t)yield n}var Xz=N9;const Kz=typeof Window>"u"||typeof window>"u",$9=e=>!Kz&&(e===window||e instanceof Window),U9=typeof navigator<"u"&&navigator.product==="ReactNative";var f1={isSSR:Kz,isReactNative:U9,isWindow:$9};function j9(e,t){let n;return(...i)=>{n||(n={});const c=t(...i);return Object.hasOwnProperty.call(n,c)||(n[c]=e(...i)),n[c]}}function V9(e,t){let n,i;return(...c)=>{const u=t(...c);return n===u||(n=u,i=e(...c)),i}}function G9(e,t){let n,i;return[(...p)=>{const o=t(...p);return n===o||(n=o,i=e(...p)),i},()=>{n=null}]}var W9={memoizeWithArgsHash:j9,memoizeOneWithArgsHash:V9,memoizeOneWithArgsHashAndInvalidation:G9};const{batchUpdates:FS}=h1,{initializeNode:q9,peekNodeInfo:H9}=Pc,{graph:Z9}=qg,{getNextStoreID:X9}=c1,{DEFAULT_VALUE:K9,recoilValues:Yk,recoilValuesForKeys:Qk}=$o,{AbstractRecoilValue:Y9,getRecoilValueAsLoadable:Q9,setRecoilValue:Jk,setUnvalidatedRecoilValue:J9}=ws,{updateRetainCount:Dv}=id,{setInvalidateMemoizedSnapshot:e7}=zz,{getNextTreeStateVersion:t7,makeEmptyStoreState:n7}=Az,{isSSR:r7}=f1,{memoizeOneWithArgsHashAndInvalidation:i7}=W9;class p1{constructor(t,n){jn(this,"_store",void 0),jn(this,"_refCount",1),jn(this,"getLoadable",i=>(this.checkRefCount_INTERNAL(),Q9(this._store,i))),jn(this,"getPromise",i=>(this.checkRefCount_INTERNAL(),this.getLoadable(i).toPromise())),jn(this,"getNodes_UNSTABLE",i=>{if(this.checkRefCount_INTERNAL(),(i==null?void 0:i.isModified)===!0){if((i==null?void 0:i.isInitialized)===!1)return[];const p=this._store.getState().currentTree;return Qk(p.dirtyAtoms)}const c=this._store.getState().knownAtoms,u=this._store.getState().knownSelectors;return(i==null?void 0:i.isInitialized)==null?Yk.values():i.isInitialized===!0?Qk(Xz([c,u])):NT(Yk.values(),({key:p})=>!c.has(p)&&!u.has(p))}),jn(this,"getInfo_UNSTABLE",({key:i})=>(this.checkRefCount_INTERNAL(),H9(this._store,this._store.getState().currentTree,i))),jn(this,"map",i=>{this.checkRefCount_INTERNAL();const c=new BS(this,FS);return i(c),c}),jn(this,"asyncMap",async i=>{this.checkRefCount_INTERNAL();const c=new BS(this,FS);return c.retain(),await i(c),c.autoRelease_INTERNAL(),c}),this._store={storeID:X9(),parentStoreID:n,getState:()=>t,replaceState:i=>{t.currentTree=i(t.currentTree)},getGraph:i=>{const c=t.graphsByVersion;if(c.has(i))return ti(c.get(i));const u=Z9();return c.set(i,u),u},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw Hn("Cannot subscribe to Snapshots")}};for(const i of this._store.getState().knownAtoms)q9(this._store,i,"get"),Dv(this._store,i,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0,this._refCount++;let t=!1;return()=>{t||(t=!0,this._release())}}autoRelease_INTERNAL(){r7||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(t=>t()),this._store.getState().nodeCleanupFunctions.clear(),!Br("recoil_memory_managament_2020"))return}else this._refCount<0}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){Br("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function Yz(e,t,n=!1){const i=e.getState(),c=n?t7():t.version;return{currentTree:{version:n?c:t.version,stateID:n?c:t.stateID,transactionMetadata:{...t.transactionMetadata},dirtyAtoms:new Set(t.dirtyAtoms),atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(i.knownAtoms),knownSelectors:new Set(i.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(c,e.getGraph(t.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(l1(i.nodeCleanupFunctions.entries(),([u])=>[u,()=>{}]))}}function o7(e){const t=new p1(n7());return e!=null?t.map(e):t}const[eP,Qz]=i7((e,t)=>{var n;const i=e.getState(),c=t==="latest"?(n=i.nextTree)!==null&&n!==void 0?n:i.currentTree:ti(i.previousTree);return new p1(Yz(e,c),e.storeID)},(e,t)=>{var n,i;return String(t)+String(e.storeID)+String((n=e.getState().nextTree)===null||n===void 0?void 0:n.version)+String(e.getState().currentTree.version)+String((i=e.getState().previousTree)===null||i===void 0?void 0:i.version)});e7(Qz);function a7(e,t="latest"){const n=eP(e,t);return n.isRetained()?n:(Qz(),eP(e,t))}class BS extends p1{constructor(t,n){super(Yz(t.getStore_INTERNAL(),t.getStore_INTERNAL().getState().currentTree,!0),t.getStoreID()),jn(this,"_batch",void 0),jn(this,"set",(i,c)=>{this.checkRefCount_INTERNAL();const u=this.getStore_INTERNAL();this._batch(()=>{Dv(u,i.key,1),Jk(this.getStore_INTERNAL(),i,c)})}),jn(this,"reset",i=>{this.checkRefCount_INTERNAL();const c=this.getStore_INTERNAL();this._batch(()=>{Dv(c,i.key,1),Jk(this.getStore_INTERNAL(),i,K9)})}),jn(this,"setUnvalidatedAtomValues_DEPRECATED",i=>{this.checkRefCount_INTERNAL();const c=this.getStore_INTERNAL();FS(()=>{for(const[u,p]of i.entries())Dv(c,u,1),J9(c,new Y9(u),p)})}),this._batch=n}}var m1={Snapshot:p1,MutableSnapshot:BS,freshSnapshot:o7,cloneSnapshot:a7},s7=m1.Snapshot,l7=m1.MutableSnapshot,c7=m1.freshSnapshot,u7=m1.cloneSnapshot,g1=Object.freeze({__proto__:null,Snapshot:s7,MutableSnapshot:l7,freshSnapshot:c7,cloneSnapshot:u7});function d7(...e){const t=new Set;for(const n of e)for(const i of n)t.add(i);return t}var h7=d7;const{useRef:f7}=Xe;function p7(e){const t=f7(e);return t.current===e&&typeof e=="function"&&(t.current=e()),t}var tP=p7;const{getNextTreeStateVersion:m7,makeEmptyStoreState:Jz}=Az,{cleanUpNode:g7,getDownstreamNodes:y7,initializeNode:v7,setNodeValue:_7,setUnvalidatedAtomValue_DEPRECATED:x7}=Pc,{graph:b7}=qg,{cloneGraph:w7}=qg,{getNextStoreID:e4}=c1,{createMutableSource:Iw,reactMode:t4}=Wg,{applyAtomValueWrites:S7}=ws,{releaseScheduledRetainablesNow:n4}=id,{freshSnapshot:E7}=g1,{useCallback:T7,useContext:r4,useEffect:NS,useMemo:C7,useRef:R7,useState:M7}=Xe;function dm(){throw Hn("This component must be used inside a <RecoilRoot> component.")}const i4=Object.freeze({storeID:e4(),getState:dm,replaceState:dm,getGraph:dm,subscribeToTransactions:dm,addTransactionMetadata:dm});let $S=!1;function nP(e){if($S)throw Hn("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const t=e.getState();if(t.nextTree===null){Br("recoil_memory_managament_2020")&&Br("recoil_release_on_cascading_update_killswitch_2021")&&t.commitDepth>0&&n4(e);const n=t.currentTree.version,i=m7();t.nextTree={...t.currentTree,version:i,stateID:i,dirtyAtoms:new Set,transactionMetadata:{}},t.graphsByVersion.set(i,w7(ti(t.graphsByVersion.get(n))))}}const o4=Xe.createContext({current:i4}),y1=()=>r4(o4),a4=Xe.createContext(null);function A7(){return r4(a4)}function VT(e,t,n){const i=y7(e,n,n.dirtyAtoms);for(const c of i){const u=t.nodeToComponentSubscriptions.get(c);if(u)for(const[p,[o,x]]of u)x(n)}}function s4(e){const t=e.getState(),n=t.currentTree,i=n.dirtyAtoms;if(i.size){for(const[c,u]of t.nodeTransactionSubscriptions)if(i.has(c))for(const[p,o]of u)o(e);for(const[c,u]of t.transactionSubscriptions)u(e);(!t4().early||t.suspendedComponentResolvers.size>0)&&(VT(e,t,n),t.suspendedComponentResolvers.forEach(c=>c()),t.suspendedComponentResolvers.clear())}t.queuedComponentCallbacks_DEPRECATED.forEach(c=>c(n)),t.queuedComponentCallbacks_DEPRECATED.splice(0,t.queuedComponentCallbacks_DEPRECATED.length)}function k7(e){const t=e.getState();t.commitDepth++;try{const{nextTree:n}=t;if(n==null)return;t.previousTree=t.currentTree,t.currentTree=n,t.nextTree=null,s4(e),t.previousTree!=null?t.graphsByVersion.delete(t.previousTree.version):OT("Ended batch with no previous state, which is unexpected","recoil"),t.previousTree=null,Br("recoil_memory_managament_2020")&&n==null&&n4(e)}finally{t.commitDepth--}}function P7({setNotifyBatcherOfChange:e}){const t=y1(),[,n]=M7([]);return e(()=>n({})),NS(()=>(e(()=>n({})),()=>{e(()=>{})}),[e]),NS(()=>{cV.enqueueExecution("Batcher",()=>{k7(t.current)})}),null}function I7(e,t){const n=Jz();return t({set:(i,c)=>{const u=n.currentTree,p=_7(e,u,i.key,c),o=new Set(p.keys()),x=u.nonvalidatedAtoms.clone();for(const S of o)x.delete(S);n.currentTree={...u,dirtyAtoms:h7(u.dirtyAtoms,o),atomValues:S7(u.atomValues,p),nonvalidatedAtoms:x}},setUnvalidatedAtomValues:i=>{i.forEach((c,u)=>{n.currentTree=x7(n.currentTree,u,c)})}}),n}function L7(e){const t=E7(e),n=t.getStore_INTERNAL().getState();return t.retain(),n.nodeCleanupFunctions.forEach(i=>i()),n.nodeCleanupFunctions.clear(),n}let rP=0;function O7({initializeState_DEPRECATED:e,initializeState:t,store_INTERNAL:n,children:i}){let c;const u=j=>{const F=c.current.graphsByVersion;if(F.has(j))return ti(F.get(j));const V=b7();return F.set(j,V),V},p=(j,F)=>{if(F==null){const{transactionSubscriptions:V}=k.current.getState(),oe=rP++;return V.set(oe,j),{release:()=>{V.delete(oe)}}}else{const{nodeTransactionSubscriptions:V}=k.current.getState();V.has(F)||V.set(F,new Map);const oe=rP++;return ti(V.get(F)).set(oe,j),{release:()=>{const B=V.get(F);B&&(B.delete(oe),B.size===0&&V.delete(F))}}}},o=j=>{nP(k.current);for(const F of Object.keys(j))ti(k.current.getState().nextTree).transactionMetadata[F]=j[F]},x=j=>{nP(k.current);const F=ti(c.current.nextTree);let V;try{$S=!0,V=j(F)}finally{$S=!1}V!==F&&(c.current.nextTree=V,t4().early&&VT(k.current,c.current,V),ti(S.current)())},S=R7(null),M=T7(j=>{S.current=j},[S]),k=tP(()=>n??{storeID:e4(),getState:()=>c.current,replaceState:x,getGraph:u,subscribeToTransactions:p,addTransactionMetadata:o});n!=null&&(k.current=n),c=tP(()=>e!=null?I7(k.current,e):t!=null?L7(t):Jz());const L=C7(()=>Iw==null?void 0:Iw(c,()=>c.current.currentTree.version),[c]);return NS(()=>{const j=k.current;for(const F of new Set(j.getState().knownAtoms))v7(j,F,"get");return()=>{for(const F of j.getState().knownAtoms)g7(j,F)}},[k]),Xe.createElement(o4.Provider,{value:k},Xe.createElement(a4.Provider,{value:L},Xe.createElement(P7,{setNotifyBatcherOfChange:M}),i))}function D7(e){const{override:t,...n}=e,i=y1();return t===!1&&i.current!==i4?e.children:Xe.createElement(O7,n)}function z7(){return y1().current.storeID}var hl={RecoilRoot:D7,useStoreRef:y1,useRecoilMutableSource:A7,useRecoilStoreID:z7,notifyComponents_FOR_TESTING:VT,sendEndOfBatchNotifications_FOR_TESTING:s4};function F7(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}var B7=F7;const{useEffect:N7,useRef:$7}=Xe;function U7(e){const t=$7();return N7(()=>{t.current=e}),t.current}var l4=U7;const{useStoreRef:j7}=hl,{SUSPENSE_TIMEOUT_MS:V7}=id,{updateRetainCount:hm}=id,{RetentionZone:G7}=u1,{useEffect:W7,useRef:q7}=Xe,{isSSR:iP}=f1;function H7(e){if(Br("recoil_memory_managament_2020"))return Z7(e)}function Z7(e){const n=(Array.isArray(e)?e:[e]).map(p=>p instanceof G7?p:p.key),i=j7();W7(()=>{if(!Br("recoil_memory_managament_2020"))return;const p=i.current;if(c.current&&!iP)window.clearTimeout(c.current),c.current=null;else for(const o of n)hm(p,o,1);return()=>{for(const o of n)hm(p,o,-1)}},[i,...n]);const c=q7(),u=l4(n);if(!iP&&(u===void 0||!B7(u,n))){const p=i.current;for(const o of n)hm(p,o,1);if(u)for(const o of u)hm(p,o,-1);c.current&&window.clearTimeout(c.current),c.current=window.setTimeout(()=>{c.current=null;for(const o of n)hm(p,o,-1)},V7)}}var GT=H7;function X7(){return"<component name not available>"}var Zg=X7;const{batchUpdates:K7}=h1,{DEFAULT_VALUE:c4}=$o,{currentRendererSupportsUseSyncExternalStore:Y7,reactMode:mf,useMutableSource:Q7,useSyncExternalStore:J7}=Wg,{useRecoilMutableSource:eG,useStoreRef:Ss}=hl,{AbstractRecoilValue:US,getRecoilValueAsLoadable:Xg,setRecoilValue:y_,setUnvalidatedRecoilValue:tG,subscribeToRecoilValue:ef}=ws,{useCallback:Do,useEffect:tf,useMemo:u4,useRef:Jm,useState:WT}=Xe,{setByAddingToSet:nG}=Pz,{isSSR:rG}=f1;function qT(e,t,n){if(e.state==="hasValue")return e.contents;throw e.state==="loading"?new Promise(c=>{const u=n.current.getState().suspendedComponentResolvers;u.add(c),rG&&Wr(e.contents)&&e.contents.finally(()=>{u.delete(c)})}):e.state==="hasError"?e.contents:Hn(`Invalid value of loadable atom "${t.key}"`)}function iG(){const e=Zg(),t=Ss(),[,n]=WT([]),i=Jm(new Set);i.current=new Set;const c=Jm(new Set),u=Jm(new Map),p=Do(x=>{const S=u.current.get(x);S&&(S.release(),u.current.delete(x))},[u]),o=Do((x,S)=>{u.current.has(S)&&n([])},[]);return tf(()=>{const x=t.current;Ym(i.current,c.current).forEach(S=>{if(u.current.has(S))return;const M=ef(x,new US(S),L=>o(L,S),e);u.current.set(S,M),x.getState().nextTree?x.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{o(x.getState(),S)}):o(x.getState(),S)}),Ym(c.current,i.current).forEach(S=>{p(S)}),c.current=i.current}),tf(()=>{const x=u.current;return Ym(i.current,new Set(x.keys())).forEach(S=>{const M=ef(t.current,new US(S),k=>o(k,S),e);x.set(S,M)}),()=>x.forEach((S,M)=>p(M))},[e,t,p,o]),u4(()=>{function x(F){return V=>{y_(t.current,F,V)}}function S(F){return()=>y_(t.current,F,c4)}function M(F){var V;i.current.has(F.key)||(i.current=nG(i.current,F.key));const oe=t.current.getState();return Xg(t.current,F,mf().early&&(V=oe.nextTree)!==null&&V!==void 0?V:oe.currentTree)}function k(F){const V=M(F);return qT(V,F,t)}function L(F){return[k(F),x(F)]}function j(F){return[M(F),x(F)]}return{getRecoilValue:k,getRecoilValueLoadable:M,getRecoilState:L,getRecoilStateLoadable:j,getSetRecoilState:x,getResetRecoilState:S}},[i,t])}const oG={current:0};function aG(e){const t=Ss(),n=Zg(),i=Do(()=>{var o;const x=t.current,S=x.getState(),M=mf().early&&(o=S.nextTree)!==null&&o!==void 0?o:S.currentTree;return{loadable:Xg(x,e,M),key:e.key}},[t,e]),c=Do(o=>{let x;return()=>{var S,M;const k=o();return(S=x)!==null&&S!==void 0&&S.loadable.is(k.loadable)&&((M=x)===null||M===void 0?void 0:M.key)===k.key?x:(x=k,k)}},[]),u=u4(()=>c(i),[i,c]),p=Do(o=>{const x=t.current;return ef(x,e,o,n).release},[t,e,n]);return J7(p,u,u).loadable}function sG(e){const t=Ss(),n=Do(()=>{var S;const M=t.current,k=M.getState(),L=mf().early&&(S=k.nextTree)!==null&&S!==void 0?S:k.currentTree;return Xg(M,e,L)},[t,e]),i=Do(()=>n(),[n]),c=Zg(),u=Do((S,M)=>{const k=t.current;return ef(k,e,()=>{if(!Br("recoil_suppress_rerender_in_callback"))return M();const j=n();x.current.is(j)||M(),x.current=j},c).release},[t,e,c,n]),p=eG();if(p==null)throw Hn("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const o=Q7(p,i,u),x=Jm(o);return tf(()=>{x.current=o}),o}function jS(e){const t=Ss(),n=Zg(),i=Do(()=>{var x;const S=t.current,M=S.getState(),k=mf().early&&(x=M.nextTree)!==null&&x!==void 0?x:M.currentTree;return Xg(S,e,k)},[t,e]),c=Do(()=>({loadable:i(),key:e.key}),[i,e.key]),u=Do(x=>{const S=c();return x.loadable.is(S.loadable)&&x.key===S.key?x:S},[c]);tf(()=>{const x=ef(t.current,e,S=>{o(u)},n);return o(u),x.release},[n,e,t,u]);const[p,o]=WT(c);return p.key!==e.key?c().loadable:p.loadable}function lG(e){const t=Ss(),[,n]=WT([]),i=Zg(),c=Do(()=>{var o;const x=t.current,S=x.getState(),M=mf().early&&(o=S.nextTree)!==null&&o!==void 0?o:S.currentTree;return Xg(x,e,M)},[t,e]),u=c(),p=Jm(u);return tf(()=>{p.current=u}),tf(()=>{const o=t.current,x=o.getState(),S=ef(o,e,k=>{var L;if(!Br("recoil_suppress_rerender_in_callback"))return n([]);const j=c();(L=p.current)!==null&&L!==void 0&&L.is(j)||n(j),p.current=j},i);if(x.nextTree)o.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{p.current=null,n([])});else{var M;if(!Br("recoil_suppress_rerender_in_callback"))return n([]);const k=c();(M=p.current)!==null&&M!==void 0&&M.is(k)||n(k),p.current=k}return S.release},[i,c,e,t]),u}function HT(e){return Br("recoil_memory_managament_2020")&&GT(e),{TRANSITION_SUPPORT:jS,SYNC_EXTERNAL_STORE:Y7()?aG:jS,MUTABLE_SOURCE:sG,LEGACY:lG}[mf().mode](e)}function d4(e){const t=Ss(),n=HT(e);return qT(n,e,t)}function v1(e){const t=Ss();return Do(n=>{y_(t.current,e,n)},[t,e])}function cG(e){const t=Ss();return Do(()=>{y_(t.current,e,c4)},[t,e])}function uG(e){return[d4(e),v1(e)]}function dG(e){return[HT(e),v1(e)]}function hG(){const e=Ss();return(t,n={})=>{K7(()=>{e.current.addTransactionMetadata(n),t.forEach((i,c)=>tG(e.current,new US(c),i))})}}function h4(e){return Br("recoil_memory_managament_2020")&&GT(e),jS(e)}function f4(e){const t=Ss(),n=h4(e);return qT(n,e,t)}function fG(e){return[f4(e),v1(e)]}var pG={recoilComponentGetRecoilValueCount_FOR_TESTING:oG,useRecoilInterface:iG,useRecoilState:uG,useRecoilStateLoadable:dG,useRecoilValue:d4,useRecoilValueLoadable:HT,useResetRecoilState:cG,useSetRecoilState:v1,useSetUnvalidatedAtomValues:hG,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:h4,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:f4,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:fG};function mG(e,t){const n=new Map;for(const[i,c]of e)t(c,i)&&n.set(i,c);return n}var gG=mG;function yG(e,t){const n=new Set;for(const i of e)t(i)&&n.add(i);return n}var vG=yG;function _G(...e){const t=new Map;for(let n=0;n<e.length;n++){const i=e[n].keys();let c;for(;!(c=i.next()).done;)t.set(c.value,e[n].get(c.value))}return t}var xG=_G;const{batchUpdates:bG}=h1,{DEFAULT_VALUE:wG,getNode:p4,nodes:SG}=$o,{useStoreRef:ZT}=hl,{AbstractRecoilValue:EG,setRecoilValueLoadable:TG}=ws,{SUSPENSE_TIMEOUT_MS:CG}=id,{cloneSnapshot:v_}=g1,{useCallback:_1,useEffect:m4,useRef:oP,useState:RG}=Xe,{isSSR:aP}=f1;function x1(e){const t=ZT();m4(()=>t.current.subscribeToTransactions(e).release,[e,t])}function sP(e){const t=e.atomValues.toMap(),n=g_(gG(t,(i,c)=>{const p=p4(c).persistence_UNSTABLE;return p!=null&&p.type!=="none"&&i.state==="hasValue"}),i=>i.contents);return xG(e.nonvalidatedAtoms.toMap(),n)}function MG(e){x1(_1(t=>{let n=t.getState().previousTree;const i=t.getState().currentTree;n||(n=t.getState().currentTree);const c=sP(i),u=sP(n),p=g_(SG,x=>{var S,M,k,L;return{persistence_UNSTABLE:{type:(S=(M=x.persistence_UNSTABLE)===null||M===void 0?void 0:M.type)!==null&&S!==void 0?S:"none",backButton:(k=(L=x.persistence_UNSTABLE)===null||L===void 0?void 0:L.backButton)!==null&&k!==void 0?k:!1}}}),o=vG(i.dirtyAtoms,x=>c.has(x)||u.has(x));e({atomValues:c,previousAtomValues:u,atomInfo:p,modifiedAtoms:o,transactionMetadata:{...i.transactionMetadata}})},[e]))}function AG(e){x1(_1(t=>{const n=v_(t,"latest"),i=v_(t,"previous");e({snapshot:n,previousSnapshot:i})},[e]))}function kG(){const e=ZT(),[t,n]=RG(()=>v_(e.current)),i=l4(t),c=oP(),u=oP();if(x1(_1(o=>n(v_(o)),[])),m4(()=>{const o=t.retain();if(c.current&&!aP){var x;window.clearTimeout(c.current),c.current=null,(x=u.current)===null||x===void 0||x.call(u),u.current=null}return()=>{window.setTimeout(o,10)}},[t]),i!==t&&!aP){if(c.current){var p;window.clearTimeout(c.current),c.current=null,(p=u.current)===null||p===void 0||p.call(u),u.current=null}u.current=t.retain(),c.current=window.setTimeout(()=>{var o;c.current=null,(o=u.current)===null||o===void 0||o.call(u),u.current=null},CG)}return t}function g4(e,t){var n;const i=e.getState(),c=(n=i.nextTree)!==null&&n!==void 0?n:i.currentTree,u=t.getStore_INTERNAL().getState().currentTree;bG(()=>{const p=new Set;for(const S of[c.atomValues.keys(),u.atomValues.keys()])for(const M of S){var o,x;((o=c.atomValues.get(M))===null||o===void 0?void 0:o.contents)!==((x=u.atomValues.get(M))===null||x===void 0?void 0:x.contents)&&p4(M).shouldRestoreFromSnapshots&&p.add(M)}p.forEach(S=>{TG(e,new EG(S),u.atomValues.has(S)?ti(u.atomValues.get(S)):wG)}),e.replaceState(S=>({...S,stateID:t.getID()}))})}function PG(){const e=ZT();return _1(t=>g4(e.current,t),[e])}var y4={useRecoilSnapshot:kG,gotoSnapshot:g4,useGotoRecoilSnapshot:PG,useRecoilTransactionObserver:AG,useTransactionObservation_DEPRECATED:MG,useTransactionSubscription_DEPRECATED:x1};const{peekNodeInfo:IG}=Pc,{useStoreRef:LG}=hl;function OG(){const e=LG();return({key:t})=>IG(e.current,e.current.getState().currentTree,t)}var DG=OG;const{reactMode:zG}=Wg,{RecoilRoot:FG,useStoreRef:BG}=hl,{useMemo:NG}=Xe;function $G(){zG().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const e=BG().current;return NG(()=>{function t({children:n}){return Xe.createElement(FG,{store_INTERNAL:e},n)}return t},[e])}var UG=$G;const{loadableWithValue:jG}=Gg,{initializeNode:VG}=Pc,{DEFAULT_VALUE:GG,getNode:WG}=$o,{copyTreeState:qG,getRecoilValueAsLoadable:HG,invalidateDownstreams:ZG,writeLoadableToTreeState:XG}=ws;function lP(e){return WG(e.key).nodeType==="atom"}class KG{constructor(t,n){jn(this,"_store",void 0),jn(this,"_treeState",void 0),jn(this,"_changes",void 0),jn(this,"get",i=>{if(this._changes.has(i.key))return this._changes.get(i.key);if(!lP(i))throw Hn("Reading selectors within atomicUpdate is not supported");const c=HG(this._store,i,this._treeState);if(c.state==="hasValue")return c.contents;throw c.state==="hasError"?c.contents:Hn(`Expected Recoil atom ${i.key} to have a value, but it is in a loading state.`)}),jn(this,"set",(i,c)=>{if(!lP(i))throw Hn("Setting selectors within atomicUpdate is not supported");if(typeof c=="function"){const u=this.get(i);this._changes.set(i.key,c(u))}else VG(this._store,i.key,"set"),this._changes.set(i.key,c)}),jn(this,"reset",i=>{this.set(i,GG)}),this._store=t,this._treeState=n,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const t=qG(this._treeState);for(const[n,i]of this._changes)XG(t,n,jG(i));return ZG(this._store,t),t}}function YG(e){return t=>{e.replaceState(n=>{const i=new KG(e,n);return t(i),i.newTreeState_INTERNAL()})}}var QG={atomicUpdater:YG},JG=QG.atomicUpdater,v4=Object.freeze({__proto__:null,atomicUpdater:JG});function eW(e,t){if(!e)throw new Error(t)}var tW=eW,Dm=tW;const{atomicUpdater:nW}=v4,{batchUpdates:rW}=h1,{DEFAULT_VALUE:iW}=$o,{useStoreRef:oW}=hl,{refreshRecoilValue:aW,setRecoilValue:cP}=ws,{cloneSnapshot:sW}=g1,{gotoSnapshot:lW}=y4,{useCallback:cW}=Xe;class _4{}const uW=new _4;function x4(e,t,n,i){let c=uW,u;if(rW(()=>{const o="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof t!="function")throw Hn(o);const x=Iz({...i??{},set:(M,k)=>cP(e,M,k),reset:M=>cP(e,M,iW),refresh:M=>aW(e,M),gotoSnapshot:M=>lW(e,M),transact_UNSTABLE:M=>nW(e)(M)},{snapshot:()=>{const M=sW(e);return u=M.retain(),M}}),S=t(x);if(typeof S!="function")throw Hn(o);c=S(...n)}),c instanceof _4&&Dm(!1),Wr(c))c=c.finally(()=>{var o;(o=u)===null||o===void 0||o()});else{var p;(p=u)===null||p===void 0||p()}return c}function dW(e,t){const n=oW();return cW((...i)=>x4(n.current,e,i),t!=null?[...t,n]:void 0)}var b4={recoilCallback:x4,useRecoilCallback:dW};const{useStoreRef:hW}=hl,{refreshRecoilValue:fW}=ws,{useCallback:pW}=Xe;function mW(e){const t=hW();return pW(()=>{const n=t.current;fW(n,e)},[e,t])}var gW=mW;const{atomicUpdater:yW}=v4,{useStoreRef:vW}=hl,{useMemo:_W}=Xe;function xW(e,t){const n=vW();return _W(()=>(...i)=>{yW(n.current)(u=>{e(u)(...i)})},t!=null?[...t,n]:void 0)}var bW=xW;class wW{constructor(t){jn(this,"value",void 0),this.value=t}}var SW={WrappedValue:wW},EW=SW.WrappedValue,w4=Object.freeze({__proto__:null,WrappedValue:EW});const{isFastRefreshEnabled:TW}=Wg;class uP extends Error{}class CW{constructor(t){var n,i,c;jn(this,"_name",void 0),jn(this,"_numLeafs",void 0),jn(this,"_root",void 0),jn(this,"_onHit",void 0),jn(this,"_onSet",void 0),jn(this,"_mapNodeValue",void 0),this._name=t==null?void 0:t.name,this._numLeafs=0,this._root=null,this._onHit=(n=t==null?void 0:t.onHit)!==null&&n!==void 0?n:()=>{},this._onSet=(i=t==null?void 0:t.onSet)!==null&&i!==void 0?i:()=>{},this._mapNodeValue=(c=t==null?void 0:t.mapNodeValue)!==null&&c!==void 0?c:u=>u}size(){return this._numLeafs}root(){return this._root}get(t,n){var i;return(i=this.getLeafNode(t,n))===null||i===void 0?void 0:i.value}getLeafNode(t,n){if(this._root==null)return;let i=this._root;for(;i;){if(n==null||n.onNodeVisit(i),i.type==="leaf")return this._onHit(i),i;const c=this._mapNodeValue(t(i.nodeKey));i=i.branches.get(c)}}set(t,n,i){const c=()=>{var u,p,o,x;let S,M;for(const[oe,B]of t){var k,L,j;const $=this._root;if(($==null?void 0:$.type)==="leaf")throw this.invalidCacheError();const Z=S;if(S=Z?Z.branches.get(M):$,S=(k=S)!==null&&k!==void 0?k:{type:"branch",nodeKey:oe,parent:Z,branches:new Map,branchKey:M},S.type!=="branch"||S.nodeKey!==oe)throw this.invalidCacheError();Z==null||Z.branches.set(M,S),i==null||(L=i.onNodeVisit)===null||L===void 0||L.call(i,S),M=this._mapNodeValue(B),this._root=(j=this._root)!==null&&j!==void 0?j:S}const F=S?(u=S)===null||u===void 0?void 0:u.branches.get(M):this._root;if(F!=null&&(F.type!=="leaf"||F.branchKey!==M))throw this.invalidCacheError();const V={type:"leaf",value:n,parent:S,branchKey:M};(p=S)===null||p===void 0||p.branches.set(M,V),this._root=(o=this._root)!==null&&o!==void 0?o:V,this._numLeafs++,this._onSet(V),i==null||(x=i.onNodeVisit)===null||x===void 0||x.call(i,V)};try{c()}catch(u){if(u instanceof uP)this.clear(),c();else throw u}}delete(t){const n=this.root();if(!n)return!1;if(t===n)return this._root=null,this._numLeafs=0,!0;let i=t.parent,c=t.branchKey;for(;i;){var u;if(i.branches.delete(c),i===n)return i.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(i.branches.size>0)break;c=(u=i)===null||u===void 0?void 0:u.branchKey,i=i.parent}for(;i!==n;i=i.parent)if(i==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const t=TW()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw OT(t+(this._name!=null?` - ${this._name}`:"")),new uP}}var RW={TreeCache:CW},MW=RW.TreeCache,S4=Object.freeze({__proto__:null,TreeCache:MW});class AW{constructor(t){var n;jn(this,"_maxSize",void 0),jn(this,"_size",void 0),jn(this,"_head",void 0),jn(this,"_tail",void 0),jn(this,"_map",void 0),jn(this,"_keyMapper",void 0),this._maxSize=t.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(n=t.mapKey)!==null&&n!==void 0?n:i=>i}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(t){return this._map.has(this._keyMapper(t))}get(t){const n=this._keyMapper(t),i=this._map.get(n);if(i)return this.set(t,i.value),i.value}set(t,n){const i=this._keyMapper(t);this._map.get(i)&&this.delete(t);const u=this.head(),p={key:t,right:u,left:null,value:n};u?u.left=p:this._tail=p,this._map.set(i,p),this._head=p,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const t=this.tail();t&&this.delete(t.key)}delete(t){const n=this._keyMapper(t);if(!this._size||!this._map.has(n))return;const i=ti(this._map.get(n)),c=i.right,u=i.left;c&&(c.left=i.left),u&&(u.right=i.right),i===this.head()&&(this._head=c),i===this.tail()&&(this._tail=u),this._map.delete(n),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var kW={LRUCache:AW},PW=kW.LRUCache,E4=Object.freeze({__proto__:null,LRUCache:PW});const{LRUCache:IW}=E4,{TreeCache:LW}=S4;function OW({name:e,maxSize:t,mapNodeValue:n=i=>i}){const i=new IW({maxSize:t}),c=new LW({name:e,mapNodeValue:n,onHit:u=>{i.set(u,!0)},onSet:u=>{const p=i.tail();i.set(u,!0),p&&c.size()>t&&c.delete(p.key)}});return c}var dP=OW;function qa(e,t,n){if(typeof e=="string"&&!e.includes('"')&&!e.includes("\\"))return`"${e}"`;switch(typeof e){case"undefined":return"";case"boolean":return e?"true":"false";case"number":case"symbol":return String(e);case"string":return JSON.stringify(e);case"function":if((t==null?void 0:t.allowFunctions)!==!0)throw Hn("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${e.name})__`}if(e===null)return"null";if(typeof e!="object"){var i;return(i=JSON.stringify(e))!==null&&i!==void 0?i:""}if(Wr(e))return"__PROMISE__";if(Array.isArray(e))return`[${e.map((c,u)=>qa(c,t,u.toString()))}]`;if(typeof e.toJSON=="function")return qa(e.toJSON(n),t,n);if(e instanceof Map){const c={};for(const[u,p]of e)c[typeof u=="string"?u:qa(u,t)]=p;return qa(c,t,n)}return e instanceof Set?qa(Array.from(e).sort((c,u)=>qa(c,t).localeCompare(qa(u,t))),t,n):Symbol!==void 0&&e[Symbol.iterator]!=null&&typeof e[Symbol.iterator]=="function"?qa(Array.from(e),t,n):`{${Object.keys(e).filter(c=>e[c]!==void 0).sort().map(c=>`${qa(c,t)}:${qa(e[c],t,c)}`).join(",")}}`}function DW(e,t={allowFunctions:!1}){return qa(e,t)}var b1=DW;const{TreeCache:zW}=S4,J0={equality:"reference",eviction:"keep-all",maxSize:1/0};function FW({equality:e=J0.equality,eviction:t=J0.eviction,maxSize:n=J0.maxSize}=J0,i){const c=BW(e);return NW(t,n,c,i)}function BW(e){switch(e){case"reference":return t=>t;case"value":return t=>b1(t)}throw Hn(`Unrecognized equality policy ${e}`)}function NW(e,t,n,i){switch(e){case"keep-all":return new zW({name:i,mapNodeValue:n});case"lru":return dP({name:i,maxSize:ti(t),mapNodeValue:n});case"most-recent":return dP({name:i,maxSize:1,mapNodeValue:n})}throw Hn(`Unrecognized eviction policy ${e}`)}var $W=FW;function UW(e){return()=>null}var jW={startPerfBlock:UW};const{isLoadable:VW,loadableWithError:ev,loadableWithPromise:GW,loadableWithValue:Lw}=Gg,{WrappedValue:T4}=w4,{getNodeLoadable:tv,peekNodeLoadable:WW,setNodeValue:qW}=Pc,{saveDepsToStore:HW}=qg,{DEFAULT_VALUE:ZW,getConfigDeletionHandler:XW,getNode:KW,registerNode:hP}=$o,{isRecoilValue:YW}=Jh,{markRecoilValueModified:fP}=ws,{retainedByOptionWithDefault:QW}=id,{recoilCallback:JW}=b4,{startPerfBlock:eq}=jW;class C4{}const fm=new C4,pm=[],nv=new Map,tq=(()=>{let e=0;return()=>e++})();function R4(e){let t=null;const{key:n,get:i,cachePolicy_UNSTABLE:c}=e,u=e.set!=null?e.set:void 0,p=new Set,o=$W(c??{equality:"reference",eviction:"keep-all"},n),x=QW(e.retainedBy_UNSTABLE),S=new Map;let M=0;function k(){return!Br("recoil_memory_managament_2020")||M>0}function L(we){return we.getState().knownSelectors.add(n),M++,()=>{M--}}function j(){return XW(n)!==void 0&&!k()}function F(we,be,Ue,nt,at){Qe(be,nt,at),V(we,Ue)}function V(we,be){Ae(we,be)&&Ge(we),B(be,!0)}function oe(we,be){Ae(we,be)&&(ti(G(we)).stateVersions.clear(),B(be,!1))}function B(we,be){const Ue=nv.get(we);if(Ue!=null){for(const nt of Ue)fP(nt,ti(t));be&&nv.delete(we)}}function $(we,be){let Ue=nv.get(be);Ue==null&&nv.set(be,Ue=new Set),Ue.add(we)}function Z(we,be,Ue,nt,at,At){return be.then(Ft=>{if(!k())throw Ge(we),fm;const Rt=Lw(Ft);return F(we,Ue,at,Rt,nt),Ft}).catch(Ft=>{if(!k())throw Ge(we),fm;if(Wr(Ft))return Q(we,Ft,Ue,nt,at,At);const Rt=ev(Ft);throw F(we,Ue,at,Rt,nt),Ft})}function Q(we,be,Ue,nt,at,At){return be.then(Ft=>{if(!k())throw Ge(we),fm;At.loadingDepKey!=null&&At.loadingDepPromise===be?Ue.atomValues.set(At.loadingDepKey,Lw(Ft)):we.getState().knownSelectors.forEach(Nt=>{Ue.atomValues.delete(Nt)});const Rt=de(we,Ue);if(Rt&&Rt.state!=="loading"){if((Ae(we,at)||G(we)==null)&&V(we,at),Rt.state==="hasValue")return Rt.contents;throw Rt.contents}if(!Ae(we,at)){const Nt=J(we,Ue);if(Nt!=null)return Nt.loadingLoadable.contents}const[Mt,ct]=ue(we,Ue,at);if(Mt.state!=="loading"&&F(we,Ue,at,Mt,ct),Mt.state==="hasError")throw Mt.contents;return Mt.contents}).catch(Ft=>{if(Ft instanceof C4)throw fm;if(!k())throw Ge(we),fm;const Rt=ev(Ft);throw F(we,Ue,at,Rt,nt),Ft})}function ae(we,be,Ue,nt){var at,At,Ft,Rt;if(Ae(we,nt)||be.version===((at=we.getState())===null||at===void 0||(At=at.currentTree)===null||At===void 0?void 0:At.version)||be.version===((Ft=we.getState())===null||Ft===void 0||(Rt=Ft.nextTree)===null||Rt===void 0?void 0:Rt.version)){var Mt,ct,Nt;HW(n,Ue,we,(Mt=(ct=we.getState())===null||ct===void 0||(Nt=ct.nextTree)===null||Nt===void 0?void 0:Nt.version)!==null&&Mt!==void 0?Mt:we.getState().currentTree.version)}for(const Ht of Ue)p.add(Ht)}function ue(we,be,Ue){const nt=eq(n);let at=!0,At=!0;const Ft=()=>{nt(),At=!1};let Rt,Mt=!1,ct;const Nt={loadingDepKey:null,loadingDepPromise:null},Ht=new Map;function ln({key:wn}){const hn=tv(we,be,wn);switch(Ht.set(wn,hn),at||(ae(we,be,new Set(Ht.keys()),Ue),oe(we,Ue)),hn.state){case"hasValue":return hn.contents;case"hasError":throw hn.contents;case"loading":throw Nt.loadingDepKey=wn,Nt.loadingDepPromise=hn.contents,hn.contents}throw Hn("Invalid Loadable state")}const Kt=wn=>(...hn)=>{if(At)throw Hn("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return t==null&&Dm(!1),JW(we,wn,hn,{node:t})};try{Rt=i({get:ln,getCallback:Kt}),Rt=YW(Rt)?ln(Rt):Rt,VW(Rt)&&(Rt.state==="hasError"&&(Mt=!0),Rt=Rt.contents),Wr(Rt)?Rt=Z(we,Rt,be,Ht,Ue,Nt).finally(Ft):Ft(),Rt=Rt instanceof T4?Rt.value:Rt}catch(wn){Rt=wn,Wr(Rt)?Rt=Q(we,Rt,be,Ht,Ue,Nt).finally(Ft):(Mt=!0,Ft())}return Mt?ct=ev(Rt):Wr(Rt)?ct=GW(Rt):ct=Lw(Rt),at=!1,$e(we,Ue,Ht),ae(we,be,new Set(Ht.keys()),Ue),[ct,Ht]}function de(we,be){let Ue=be.atomValues.get(n);if(Ue!=null)return Ue;const nt=new Set;try{Ue=o.get(At=>(typeof At!="string"&&Dm(!1),tv(we,be,At).contents),{onNodeVisit:At=>{At.type==="branch"&&At.nodeKey!==n&&nt.add(At.nodeKey)}})}catch(At){throw Hn(`Problem with cache lookup for selector "${n}": ${At.message}`)}if(Ue){var at;be.atomValues.set(n,Ue),ae(we,be,nt,(at=G(we))===null||at===void 0?void 0:at.executionID)}return Ue}function ke(we,be){const Ue=de(we,be);if(Ue!=null)return Ge(we),Ue;const nt=J(we,be);if(nt!=null){var at;return((at=nt.loadingLoadable)===null||at===void 0?void 0:at.state)==="loading"&&$(we,nt.executionID),nt.loadingLoadable}const At=tq(),[Ft,Rt]=ue(we,be,At);return Ft.state==="loading"?(pe(we,At,Ft,Rt,be),$(we,At)):(Ge(we),Qe(be,Ft,Rt)),Ft}function J(we,be){const Ue=Xz([S.has(we)?[ti(S.get(we))]:[],l1(NT(S,([at])=>at!==we),([,at])=>at)]);function nt(at){for(const[At,Ft]of at)if(!tv(we,be,At).is(Ft))return!0;return!1}for(const at of Ue){if(at.stateVersions.get(be.version)||!nt(at.depValuesDiscoveredSoFarDuringAsyncWork))return at.stateVersions.set(be.version,!0),at;at.stateVersions.set(be.version,!1)}}function G(we){return S.get(we)}function pe(we,be,Ue,nt,at){S.set(we,{depValuesDiscoveredSoFarDuringAsyncWork:nt,executionID:be,loadingLoadable:Ue,stateVersions:new Map([[at.version,!0]])})}function $e(we,be,Ue){if(Ae(we,be)){const nt=G(we);nt!=null&&(nt.depValuesDiscoveredSoFarDuringAsyncWork=Ue)}}function Ge(we){S.delete(we)}function Ae(we,be){var Ue;return be===((Ue=G(we))===null||Ue===void 0?void 0:Ue.executionID)}function Ze(we){return Array.from(we.entries()).map(([be,Ue])=>[be,Ue.contents])}function Qe(we,be,Ue){we.atomValues.set(n,be);try{o.set(Ze(Ue),be)}catch(nt){throw Hn(`Problem with setting cache for selector "${n}": ${nt.message}`)}}function gt(we){if(pm.includes(n)){const be=`Recoil selector has circular dependencies: ${pm.slice(pm.indexOf(n)).join(" → ")}`;return ev(Hn(be))}pm.push(n);try{return we()}finally{pm.pop()}}function Me(we,be){const Ue=be.atomValues.get(n);return Ue??o.get(nt=>{var at;return typeof nt!="string"&&Dm(!1),(at=WW(we,be,nt))===null||at===void 0?void 0:at.contents})}function Ce(we,be){return gt(()=>ke(we,be))}function Te(we){we.atomValues.delete(n)}function Ve(we,be){t==null&&Dm(!1);for(const nt of p){var Ue;const at=KW(nt);(Ue=at.clearCache)===null||Ue===void 0||Ue.call(at,we,be)}p.clear(),Te(be),o.clear(),fP(we,t)}return u!=null?t=hP({key:n,nodeType:"selector",peek:Me,get:Ce,set:(be,Ue,nt)=>{let at=!1;const At=new Map;function Ft({key:Nt}){if(at)throw Hn("Recoil: Async selector sets are not currently supported.");const Ht=tv(be,Ue,Nt);if(Ht.state==="hasValue")return Ht.contents;if(Ht.state==="loading"){const ln=`Getting value of asynchronous atom or selector "${Nt}" in a pending state while setting selector "${n}" is not yet supported.`;throw Hn(ln)}else throw Ht.contents}function Rt(Nt,Ht){if(at)throw Hn("Recoil: Async selector sets are not currently supported.");const ln=typeof Ht=="function"?Ht(Ft(Nt)):Ht;qW(be,Ue,Nt.key,ln).forEach((wn,hn)=>At.set(hn,wn))}function Mt(Nt){Rt(Nt,ZW)}const ct=u({set:Rt,get:Ft,reset:Mt},nt);if(ct!==void 0)throw Wr(ct)?Hn("Recoil: Async selector sets are not currently supported."):Hn("Recoil: selector set should be a void function.");return at=!0,At},init:L,invalidate:Te,clearCache:Ve,shouldDeleteConfigOnRelease:j,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:x}):t=hP({key:n,nodeType:"selector",peek:Me,get:Ce,init:L,invalidate:Te,clearCache:Ve,shouldDeleteConfigOnRelease:j,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:x})}R4.value=e=>new T4(e);var nf=R4;const{isLoadable:nq,loadableWithError:Ow,loadableWithPromise:Dw,loadableWithValue:oh}=Gg,{WrappedValue:M4}=w4,{peekNodeInfo:rq}=Pc,{DEFAULT_VALUE:Au,DefaultValue:ec,getConfigDeletionHandler:A4,registerNode:iq,setConfigDeletionHandler:oq}=$o,{isRecoilValue:aq}=Jh,{getRecoilValueAsLoadable:sq,markRecoilValueModified:lq,setRecoilValue:pP,setRecoilValueLoadable:cq}=ws,{retainedByOptionWithDefault:uq}=id,mm=e=>e instanceof M4?e.value:e;function dq(e){const{key:t,persistence_UNSTABLE:n}=e,i=uq(e.retainedBy_UNSTABLE);let c=0;function u($){return Dw($.then(Z=>(p=oh(Z),Z)).catch(Z=>{throw p=Ow(Z),Z}))}let p=Wr(e.default)?u(e.default):nq(e.default)?e.default.state==="loading"?u(e.default.contents):e.default:oh(mm(e.default));p.contents;let o;const x=new Map;function S($){return $}function M($,Z){const Q=Z.then(ae=>{var ue,de;return((de=((ue=$.getState().nextTree)!==null&&ue!==void 0?ue:$.getState().currentTree).atomValues.get(t))===null||de===void 0?void 0:de.contents)===Q&&pP($,B,ae),ae}).catch(ae=>{var ue,de;throw((de=((ue=$.getState().nextTree)!==null&&ue!==void 0?ue:$.getState().currentTree).atomValues.get(t))===null||de===void 0?void 0:de.contents)===Q&&cq($,B,Ow(ae)),ae});return Q}function k($,Z,Q){var ae;c++;const ue=()=>{var Ge;c--,(Ge=x.get($))===null||Ge===void 0||Ge.forEach(Ae=>Ae()),x.delete($)};if($.getState().knownAtoms.add(t),p.state==="loading"){const Ge=()=>{var Ae;((Ae=$.getState().nextTree)!==null&&Ae!==void 0?Ae:$.getState().currentTree).atomValues.has(t)||lq($,B)};p.contents.finally(Ge)}const de=(ae=e.effects)!==null&&ae!==void 0?ae:e.effects_UNSTABLE;if(de!=null){let gt=function(be){if(Ae&&be.key===t){const Ue=Ge;return Ue instanceof ec?L($,Z):Wr(Ue)?Dw(Ue.then(nt=>nt instanceof ec?p.toPromise():nt)):oh(Ue)}return sq($,be)},Me=function(be){return gt(be).toPromise()},Ce=function(be){var Ue;const nt=rq($,(Ue=$.getState().nextTree)!==null&&Ue!==void 0?Ue:$.getState().currentTree,be.key);return Ae&&be.key===t&&!(Ge instanceof ec)?{...nt,isSet:!0,loadable:gt(be)}:nt};var G=gt,pe=Me,$e=Ce;let Ge=Au,Ae=!0,Ze=!1,Qe=null;const Te=be=>Ue=>{if(Ae){const nt=gt(B),at=nt.state==="hasValue"?nt.contents:Au;Ge=typeof Ue=="function"?Ue(at):Ue,Wr(Ge)&&(Ge=Ge.then(At=>(Qe={effect:be,value:At},At)))}else{if(Wr(Ue))throw Hn("Setting atoms to async values is not implemented.");typeof Ue!="function"&&(Qe={effect:be,value:mm(Ue)}),pP($,B,typeof Ue=="function"?nt=>{const at=mm(Ue(nt));return Qe={effect:be,value:at},at}:mm(Ue))}},Ve=be=>()=>Te(be)(Au),we=be=>Ue=>{var nt;const{release:at}=$.subscribeToTransactions(At=>{var Ft;let{currentTree:Rt,previousTree:Mt}=At.getState();Mt||(Mt=Rt);const ct=(Ft=Rt.atomValues.get(t))!==null&&Ft!==void 0?Ft:p;if(ct.state==="hasValue"){var Nt,Ht,ln,Kt;const wn=ct.contents,hn=(Nt=Mt.atomValues.get(t))!==null&&Nt!==void 0?Nt:p,Xn=hn.state==="hasValue"?hn.contents:Au;((Ht=Qe)===null||Ht===void 0?void 0:Ht.effect)!==be||((ln=Qe)===null||ln===void 0?void 0:ln.value)!==wn?Ue(wn,Xn,!Rt.atomValues.has(t)):((Kt=Qe)===null||Kt===void 0?void 0:Kt.effect)===be&&(Qe=null)}},t);x.set($,[...(nt=x.get($))!==null&&nt!==void 0?nt:[],at])};for(const be of de)try{const Ue=be({node:B,storeID:$.storeID,parentStoreID_UNSTABLE:$.parentStoreID,trigger:Q,setSelf:Te(be),resetSelf:Ve(be),onSet:we(be),getPromise:Me,getLoadable:gt,getInfo_UNSTABLE:Ce});if(Ue!=null){var ke;x.set($,[...(ke=x.get($))!==null&&ke!==void 0?ke:[],Ue])}}catch(Ue){Ge=Ue,Ze=!0}if(Ae=!1,!(Ge instanceof ec)){var J;const be=Ze?Ow(Ge):Wr(Ge)?Dw(M($,Ge)):oh(mm(Ge));be.contents,Z.atomValues.set(t,be),(J=$.getState().nextTree)===null||J===void 0||J.atomValues.set(t,be)}}return ue}function L($,Z){var Q,ae;return(Q=(ae=Z.atomValues.get(t))!==null&&ae!==void 0?ae:o)!==null&&Q!==void 0?Q:p}function j($,Z){if(Z.atomValues.has(t))return ti(Z.atomValues.get(t));if(Z.nonvalidatedAtoms.has(t)){if(o!=null)return o;if(n==null)return p;const Q=Z.nonvalidatedAtoms.get(t),ae=n.validator(Q,Au);return o=ae instanceof ec?p:oh(ae),o}else return p}function F(){o=void 0}function V($,Z,Q){if(Z.atomValues.has(t)){const ae=ti(Z.atomValues.get(t));if(ae.state==="hasValue"&&Q===ae.contents)return new Map}else if(!Z.nonvalidatedAtoms.has(t)&&Q instanceof ec)return new Map;return o=void 0,new Map().set(t,oh(Q))}function oe(){return A4(t)!==void 0&&c<=0}const B=iq({key:t,nodeType:"atom",peek:L,get:j,set:V,init:k,invalidate:F,shouldDeleteConfigOnRelease:oe,dangerouslyAllowMutability:e.dangerouslyAllowMutability,persistence_UNSTABLE:e.persistence_UNSTABLE?{type:e.persistence_UNSTABLE.type,backButton:e.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:i});return B}function XT(e){const{...t}=e,n="default"in e?e.default:new Promise(()=>{});return aq(n)?hq({...t,default:n}):dq({...t,default:n})}function hq(e){const t=XT({...e,default:Au,persistence_UNSTABLE:e.persistence_UNSTABLE===void 0?void 0:{...e.persistence_UNSTABLE,validator:i=>i instanceof ec?i:ti(e.persistence_UNSTABLE).validator(i,Au)},effects:e.effects,effects_UNSTABLE:e.effects_UNSTABLE}),n=nf({key:`${e.key}__withFallback`,get:({get:i})=>{const c=i(t);return c instanceof ec?e.default:c},set:({set:i},c)=>i(t,c),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:e.dangerouslyAllowMutability});return oq(n.key,A4(e.key)),n}XT.value=e=>new M4(e);var k4=XT;class fq{constructor(t){var n;jn(this,"_map",void 0),jn(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(n=t==null?void 0:t.mapKey)!==null&&n!==void 0?n:i=>i}size(){return this._map.size}has(t){return this._map.has(this._keyMapper(t))}get(t){return this._map.get(this._keyMapper(t))}set(t,n){this._map.set(this._keyMapper(t),n)}delete(t){this._map.delete(this._keyMapper(t))}clear(){this._map.clear()}}var pq={MapCache:fq},mq=pq.MapCache,gq=Object.freeze({__proto__:null,MapCache:mq});const{LRUCache:mP}=E4,{MapCache:yq}=gq,rv={equality:"reference",eviction:"none",maxSize:1/0};function vq({equality:e=rv.equality,eviction:t=rv.eviction,maxSize:n=rv.maxSize}=rv){const i=_q(e);return xq(t,n,i)}function _q(e){switch(e){case"reference":return t=>t;case"value":return t=>b1(t)}throw Hn(`Unrecognized equality policy ${e}`)}function xq(e,t,n){switch(e){case"keep-all":return new yq({mapKey:n});case"lru":return new mP({mapKey:n,maxSize:ti(t)});case"most-recent":return new mP({mapKey:n,maxSize:1})}throw Hn(`Unrecognized eviction policy ${e}`)}var P4=vq;const{setConfigDeletionHandler:bq}=$o;function wq(e){var t,n;const i=P4({equality:(t=(n=e.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&t!==void 0?t:"value",eviction:"keep-all"});return c=>{var u,p;const o=i.get(c);if(o!=null)return o;const{cachePolicyForParams_UNSTABLE:x,...S}=e,M="default"in e?e.default:new Promise(()=>{}),k=k4({...S,key:`${e.key}__${(u=b1(c))!==null&&u!==void 0?u:"void"}`,default:typeof M=="function"?M(c):M,retainedBy_UNSTABLE:typeof e.retainedBy_UNSTABLE=="function"?e.retainedBy_UNSTABLE(c):e.retainedBy_UNSTABLE,effects:typeof e.effects=="function"?e.effects(c):typeof e.effects_UNSTABLE=="function"?e.effects_UNSTABLE(c):(p=e.effects)!==null&&p!==void 0?p:e.effects_UNSTABLE});return i.set(c,k),bq(k.key,()=>{i.delete(c)}),k}}var Sq=wq;const{setConfigDeletionHandler:Eq}=$o;let Tq=0;function Cq(e){var t,n;const i=P4({equality:(t=(n=e.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&t!==void 0?t:"value",eviction:"keep-all"});return c=>{var u;let p;try{p=i.get(c)}catch(L){throw Hn(`Problem with cache lookup for selector ${e.key}: ${L.message}`)}if(p!=null)return p;const o=`${e.key}__selectorFamily/${(u=b1(c,{allowFunctions:!0}))!==null&&u!==void 0?u:"void"}/${Tq++}`,x=L=>e.get(c)(L),S=e.cachePolicy_UNSTABLE,M=typeof e.retainedBy_UNSTABLE=="function"?e.retainedBy_UNSTABLE(c):e.retainedBy_UNSTABLE;let k;if(e.set!=null){const L=e.set;k=nf({key:o,get:x,set:(F,V)=>L(c)(F,V),cachePolicy_UNSTABLE:S,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:M})}else k=nf({key:o,get:x,cachePolicy_UNSTABLE:S,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:M});return i.set(c,k),Eq(k.key,()=>{i.delete(c)}),k}}var Ic=Cq;const Rq=Ic({key:"__constant",get:e=>()=>e,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function Mq(e){return Rq(e)}var Aq=Mq;const kq=Ic({key:"__error",get:e=>()=>{throw Hn(e)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function Pq(e){return kq(e)}var Iq=Pq;function Lq(e){return e}var Oq=Lq;const{loadableWithError:I4,loadableWithPromise:L4,loadableWithValue:O4}=Gg;function w1(e,t){const n=Array(t.length).fill(void 0),i=Array(t.length).fill(void 0);for(const[c,u]of t.entries())try{n[c]=e(u)}catch(p){i[c]=p}return[n,i]}function Dq(e){return e!=null&&!Wr(e)}function S1(e){return Array.isArray(e)?e:Object.getOwnPropertyNames(e).map(t=>e[t])}function VS(e,t){return Array.isArray(e)?t:Object.getOwnPropertyNames(e).reduce((n,i,c)=>({...n,[i]:t[c]}),{})}function Nh(e,t,n){const i=n.map((c,u)=>c==null?O4(t[u]):Wr(c)?L4(c):I4(c));return VS(e,i)}function zq(e,t){return t.map((n,i)=>n===void 0?e[i]:n)}const Fq=Ic({key:"__waitForNone",get:e=>({get:t})=>{const n=S1(e),[i,c]=w1(t,n);return Nh(e,i,c)},dangerouslyAllowMutability:!0}),Bq=Ic({key:"__waitForAny",get:e=>({get:t})=>{const n=S1(e),[i,c]=w1(t,n);return c.some(u=>!Wr(u))?Nh(e,i,c):new Promise(u=>{for(const[p,o]of c.entries())Wr(o)&&o.then(x=>{i[p]=x,c[p]=void 0,u(Nh(e,i,c))}).catch(x=>{c[p]=x,u(Nh(e,i,c))})})},dangerouslyAllowMutability:!0}),Nq=Ic({key:"__waitForAll",get:e=>({get:t})=>{const n=S1(e),[i,c]=w1(t,n);if(c.every(p=>p==null))return VS(e,i);const u=c.find(Dq);if(u!=null)throw u;return Promise.all(c).then(p=>VS(e,zq(i,p)))},dangerouslyAllowMutability:!0}),$q=Ic({key:"__waitForAllSettled",get:e=>({get:t})=>{const n=S1(e),[i,c]=w1(t,n);return c.every(u=>!Wr(u))?Nh(e,i,c):Promise.all(c.map((u,p)=>Wr(u)?u.then(o=>{i[p]=o,c[p]=void 0}).catch(o=>{i[p]=void 0,c[p]=o}):null)).then(()=>Nh(e,i,c))},dangerouslyAllowMutability:!0}),Uq=Ic({key:"__noWait",get:e=>({get:t})=>{try{return nf.value(O4(t(e)))}catch(n){return nf.value(Wr(n)?L4(n):I4(n))}},dangerouslyAllowMutability:!0});var jq={waitForNone:Fq,waitForAny:Bq,waitForAll:Nq,waitForAllSettled:$q,noWait:Uq};const{RecoilLoadable:Vq}=Gg,{DefaultValue:Gq}=$o,{RecoilRoot:Wq,useRecoilStoreID:qq}=hl,{isRecoilValue:Hq}=Jh,{retentionZone:Zq}=u1,{freshSnapshot:Xq}=g1,{useRecoilState:Kq,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:Yq,useRecoilStateLoadable:Qq,useRecoilValue:Jq,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:eH,useRecoilValueLoadable:tH,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:nH,useResetRecoilState:rH,useSetRecoilState:iH}=pG,{useGotoRecoilSnapshot:oH,useRecoilSnapshot:aH,useRecoilTransactionObserver:sH}=y4,{useRecoilCallback:lH}=b4,{noWait:cH,waitForAll:uH,waitForAllSettled:dH,waitForAny:hH,waitForNone:fH}=jq;var E1={DefaultValue:Gq,isRecoilValue:Hq,RecoilLoadable:Vq,RecoilEnv:pf,RecoilRoot:Wq,useRecoilStoreID:qq,useRecoilBridgeAcrossReactRoots_UNSTABLE:UG,atom:k4,selector:nf,atomFamily:Sq,selectorFamily:Ic,constSelector:Aq,errorSelector:Iq,readOnlySelector:Oq,noWait:cH,waitForNone:fH,waitForAny:hH,waitForAll:uH,waitForAllSettled:dH,useRecoilValue:Jq,useRecoilValueLoadable:tH,useRecoilState:Kq,useRecoilStateLoadable:Qq,useSetRecoilState:iH,useResetRecoilState:rH,useGetRecoilValueInfo_UNSTABLE:DG,useRecoilRefresher_UNSTABLE:gW,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:nH,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:eH,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:Yq,useRecoilCallback:lH,useRecoilTransaction_UNSTABLE:bW,useGotoRecoilSnapshot:oH,useRecoilSnapshot:aH,useRecoilTransactionObserver_UNSTABLE:sH,snapshot_UNSTABLE:Xq,useRetain:GT,retentionZone:Zq},pH=E1.RecoilRoot,KT=E1.atom,Lc=E1.useRecoilState,mH=E1.useResetRecoilState,YT={};Object.defineProperty(YT,"__esModule",{value:!0});var D4=YT.recoilPersist=void 0;const gH=(e={})=>{if(typeof window>"u")return{persistAtom:()=>{}};const{key:t="recoil-persist",storage:n=localStorage}=e,i=({onSet:x,node:S,trigger:M,setSelf:k})=>{if(M==="get"){const L=u();typeof L.then=="function"&&L.then(j=>{j.hasOwnProperty(S.key)&&k(j[S.key])}),L.hasOwnProperty(S.key)&&k(L[S.key])}x(async(L,j,F)=>{const V=u();typeof V.then=="function"?V.then(oe=>c(L,oe,S.key,F)):c(L,V,S.key,F)})},c=(x,S,M,k)=>{k?delete S[M]:S[M]=x,o(S)},u=()=>{const x=n.getItem(t);return x==null?{}:typeof x=="string"?p(x):typeof x.then=="function"?x.then(p):{}},p=x=>{if(x===void 0)return{};try{return JSON.parse(x)}catch(S){return console.error(S),{}}},o=x=>{try{typeof n.mergeItem=="function"?n.mergeItem(t,JSON.stringify(x)):n.setItem(t,JSON.stringify(x))}catch(S){console.error(S)}};return{persistAtom:i}};D4=YT.recoilPersist=gH;const{persistAtom:QT}=D4(),Kg=KT({key:"userState",default:{role:"GUEST",id:0,name:"",first:!1},effects_UNSTABLE:[QT]}),z4=KT({key:"envState",default:{theme:"system"},effects_UNSTABLE:[QT]}),F4=KT({key:"filterState",default:{searchRange:100,preferCategory:["DAILY","GROUP","ADS","INFO","EVENT","PRESENT"]},effects_UNSTABLE:[QT]}),yH={black:"#000",white:"#fff"},Cg=yH,vH={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},ah=vH,_H={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},sh=_H,xH={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},lh=xH,bH={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},ch=bH,wH={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},uh=wH,SH={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},gm=SH,EH={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},ol=EH;function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ee.apply(this,arguments)}function ku(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function B4(e){if(!ku(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=B4(e[n])}),t}function zo(e,t,n={clone:!0}){const i=n.clone?ee({},e):e;return ku(e)&&ku(t)&&Object.keys(t).forEach(c=>{c!=="__proto__"&&(ku(t[c])&&c in e&&ku(e[c])?i[c]=zo(e[c],t[c],n):n.clone?i[c]=ku(t[c])?B4(t[c]):t[c]:i[c]=t[c])}),i}var N4={exports:{}},TH="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",CH=TH,RH=CH;function $4(){}function U4(){}U4.resetWarningCache=$4;var MH=function(){function e(i,c,u,p,o,x){if(x!==RH){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:U4,resetWarningCache:$4};return n.PropTypes=n,n};N4.exports=MH();var AH=N4.exports;function wc(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}var zr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JT=Symbol.for("react.element"),eC=Symbol.for("react.portal"),T1=Symbol.for("react.fragment"),C1=Symbol.for("react.strict_mode"),R1=Symbol.for("react.profiler"),M1=Symbol.for("react.provider"),A1=Symbol.for("react.context"),kH=Symbol.for("react.server_context"),k1=Symbol.for("react.forward_ref"),P1=Symbol.for("react.suspense"),I1=Symbol.for("react.suspense_list"),L1=Symbol.for("react.memo"),O1=Symbol.for("react.lazy"),PH=Symbol.for("react.offscreen"),j4;j4=Symbol.for("react.module.reference");function wa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case JT:switch(e=e.type,e){case T1:case R1:case C1:case P1:case I1:return e;default:switch(e=e&&e.$$typeof,e){case kH:case A1:case k1:case O1:case L1:case M1:return e;default:return t}}case eC:return t}}}zr.ContextConsumer=A1;zr.ContextProvider=M1;zr.Element=JT;zr.ForwardRef=k1;zr.Fragment=T1;zr.Lazy=O1;zr.Memo=L1;zr.Portal=eC;zr.Profiler=R1;zr.StrictMode=C1;zr.Suspense=P1;zr.SuspenseList=I1;zr.isAsyncMode=function(){return!1};zr.isConcurrentMode=function(){return!1};zr.isContextConsumer=function(e){return wa(e)===A1};zr.isContextProvider=function(e){return wa(e)===M1};zr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===JT};zr.isForwardRef=function(e){return wa(e)===k1};zr.isFragment=function(e){return wa(e)===T1};zr.isLazy=function(e){return wa(e)===O1};zr.isMemo=function(e){return wa(e)===L1};zr.isPortal=function(e){return wa(e)===eC};zr.isProfiler=function(e){return wa(e)===R1};zr.isStrictMode=function(e){return wa(e)===C1};zr.isSuspense=function(e){return wa(e)===P1};zr.isSuspenseList=function(e){return wa(e)===I1};zr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===T1||e===R1||e===C1||e===P1||e===I1||e===PH||typeof e=="object"&&e!==null&&(e.$$typeof===O1||e.$$typeof===L1||e.$$typeof===M1||e.$$typeof===A1||e.$$typeof===k1||e.$$typeof===j4||e.getModuleId!==void 0)};zr.typeOf=wa;function St(e){if(typeof e!="string")throw new Error(wc(7));return e.charAt(0).toUpperCase()+e.slice(1)}function GS(...e){return e.reduce((t,n)=>n==null?t:function(...c){t.apply(this,c),n.apply(this,c)},()=>{})}function tC(e,t=166){let n;function i(...c){const u=()=>{e.apply(this,c)};clearTimeout(n),n=setTimeout(u,t)}return i.clear=()=>{clearTimeout(n)},i}function zv(e,t){return X.isValidElement(e)&&t.indexOf(e.type.muiName)!==-1}function _i(e){return e&&e.ownerDocument||document}function Yo(e){return _i(e).defaultView||window}function WS(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const IH=typeof window<"u"?X.useLayoutEffect:X.useEffect,al=IH;let gP=0;function LH(e){const[t,n]=X.useState(e),i=e||t;return X.useEffect(()=>{t==null&&(gP+=1,n(`mui-${gP}`))},[t]),i}const yP=B2["useId"];function V4(e){if(yP!==void 0){const t=yP();return e??t}return LH(e)}function Rg({controlled:e,default:t,name:n,state:i="value"}){const{current:c}=X.useRef(e!==void 0),[u,p]=X.useState(t),o=c?e:u,x=X.useCallback(S=>{c||p(S)},[]);return[o,x]}function va(e){const t=X.useRef(e);return al(()=>{t.current=e}),X.useCallback((...n)=>(0,t.current)(...n),[])}function xi(...e){return X.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{WS(n,t)})},e)}let D1=!0,qS=!1,vP;const OH={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function DH(e){const{type:t,tagName:n}=e;return!!(n==="INPUT"&&OH[t]&&!e.readOnly||n==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function zH(e){e.metaKey||e.altKey||e.ctrlKey||(D1=!0)}function zw(){D1=!1}function FH(){this.visibilityState==="hidden"&&qS&&(D1=!0)}function BH(e){e.addEventListener("keydown",zH,!0),e.addEventListener("mousedown",zw,!0),e.addEventListener("pointerdown",zw,!0),e.addEventListener("touchstart",zw,!0),e.addEventListener("visibilitychange",FH,!0)}function NH(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return D1||DH(t)}function G4(){const e=X.useCallback(c=>{c!=null&&BH(c.ownerDocument)},[]),t=X.useRef(!1);function n(){return t.current?(qS=!0,window.clearTimeout(vP),vP=window.setTimeout(()=>{qS=!1},100),t.current=!1,!0):!1}function i(c){return NH(c)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:i,onBlur:n,ref:e}}function W4(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const $H=e=>{const t=X.useRef({});return X.useEffect(()=>{t.current=e}),t.current},q4=$H,UH={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},jH=UH;function nC(e,t){const n=ee({},t);return Object.keys(e).forEach(i=>{if(i.toString().match(/^(components|slots)$/))n[i]=ee({},e[i],n[i]);else if(i.toString().match(/^(componentsProps|slotProps)$/)){const c=e[i]||{},u=t[i];n[i]={},!u||!Object.keys(u)?n[i]=c:!c||!Object.keys(c)?n[i]=u:(n[i]=ee({},u),Object.keys(c).forEach(p=>{n[i][p]=nC(c[p],u[p])}))}else n[i]===void 0&&(n[i]=e[i])}),n}function $n(e,t,n=void 0){const i={};return Object.keys(e).forEach(c=>{i[c]=e[c].reduce((u,p)=>{if(p){const o=t(p);o!==""&&u.push(o),n&&n[p]&&u.push(n[p])}return u},[]).join(" ")}),i}const _P=e=>e,VH=()=>{let e=_P;return{configure(t){e=t},generate(t){return e(t)},reset(){e=_P}}},GH=VH(),H4=GH,WH={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function Bn(e,t,n="Mui"){const i=WH[t];return i?`${n}-${i}`:`${H4.generate(e)}-${t}`}function Wn(e,t,n="Mui"){const i={};return t.forEach(c=>{i[c]=Bn(e,c,n)}),i}const Yu="$$material";function sn(e,t){if(e==null)return{};var n={},i=Object.keys(e),c,u;for(u=0;u<i.length;u++)c=i[u],!(t.indexOf(c)>=0)&&(n[c]=e[c]);return n}function Z4(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var qH=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,HH=Z4(function(e){return qH.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function ZH(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function XH(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var KH=function(){function e(n){var i=this;this._insertTag=function(c){var u;i.tags.length===0?i.insertionPoint?u=i.insertionPoint.nextSibling:i.prepend?u=i.container.firstChild:u=i.before:u=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(c,u),i.tags.push(c)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(i){i.forEach(this._insertTag)},t.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(XH(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var u=ZH(c);try{u.insertRule(i,u.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(i));this.ctr++},t.flush=function(){this.tags.forEach(function(i){return i.parentNode&&i.parentNode.removeChild(i)}),this.tags=[],this.ctr=0},e}(),lo="-ms-",__="-moz-",Tr="-webkit-",X4="comm",rC="rule",iC="decl",YH="@import",K4="@keyframes",QH="@layer",JH=Math.abs,z1=String.fromCharCode,eZ=Object.assign;function tZ(e,t){return Zi(e,0)^45?(((t<<2^Zi(e,0))<<2^Zi(e,1))<<2^Zi(e,2))<<2^Zi(e,3):0}function Y4(e){return e.trim()}function nZ(e,t){return(e=t.exec(e))?e[0]:e}function Cr(e,t,n){return e.replace(t,n)}function HS(e,t){return e.indexOf(t)}function Zi(e,t){return e.charCodeAt(t)|0}function Mg(e,t,n){return e.slice(t,n)}function ps(e){return e.length}function oC(e){return e.length}function iv(e,t){return t.push(e),e}function rZ(e,t){return e.map(t).join("")}var F1=1,rf=1,Q4=0,Bo=0,Ri=0,gf="";function B1(e,t,n,i,c,u,p){return{value:e,root:t,parent:n,type:i,props:c,children:u,line:F1,column:rf,length:p,return:""}}function ym(e,t){return eZ(B1("",null,null,"",null,null,0),e,{length:-e.length},t)}function iZ(){return Ri}function oZ(){return Ri=Bo>0?Zi(gf,--Bo):0,rf--,Ri===10&&(rf=1,F1--),Ri}function Qo(){return Ri=Bo<Q4?Zi(gf,Bo++):0,rf++,Ri===10&&(rf=1,F1++),Ri}function bs(){return Zi(gf,Bo)}function Fv(){return Bo}function Yg(e,t){return Mg(gf,e,t)}function Ag(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function J4(e){return F1=rf=1,Q4=ps(gf=e),Bo=0,[]}function e5(e){return gf="",e}function Bv(e){return Y4(Yg(Bo-1,ZS(e===91?e+2:e===40?e+1:e)))}function aZ(e){for(;(Ri=bs())&&Ri<33;)Qo();return Ag(e)>2||Ag(Ri)>3?"":" "}function sZ(e,t){for(;--t&&Qo()&&!(Ri<48||Ri>102||Ri>57&&Ri<65||Ri>70&&Ri<97););return Yg(e,Fv()+(t<6&&bs()==32&&Qo()==32))}function ZS(e){for(;Qo();)switch(Ri){case e:return Bo;case 34:case 39:e!==34&&e!==39&&ZS(Ri);break;case 40:e===41&&ZS(e);break;case 92:Qo();break}return Bo}function lZ(e,t){for(;Qo()&&e+Ri!==47+10;)if(e+Ri===42+42&&bs()===47)break;return"/*"+Yg(t,Bo-1)+"*"+z1(e===47?e:Qo())}function cZ(e){for(;!Ag(bs());)Qo();return Yg(e,Bo)}function uZ(e){return e5(Nv("",null,null,null,[""],e=J4(e),0,[0],e))}function Nv(e,t,n,i,c,u,p,o,x){for(var S=0,M=0,k=p,L=0,j=0,F=0,V=1,oe=1,B=1,$=0,Z="",Q=c,ae=u,ue=i,de=Z;oe;)switch(F=$,$=Qo()){case 40:if(F!=108&&Zi(de,k-1)==58){HS(de+=Cr(Bv($),"&","&\f"),"&\f")!=-1&&(B=-1);break}case 34:case 39:case 91:de+=Bv($);break;case 9:case 10:case 13:case 32:de+=aZ(F);break;case 92:de+=sZ(Fv()-1,7);continue;case 47:switch(bs()){case 42:case 47:iv(dZ(lZ(Qo(),Fv()),t,n),x);break;default:de+="/"}break;case 123*V:o[S++]=ps(de)*B;case 125*V:case 59:case 0:switch($){case 0:case 125:oe=0;case 59+M:B==-1&&(de=Cr(de,/\f/g,"")),j>0&&ps(de)-k&&iv(j>32?bP(de+";",i,n,k-1):bP(Cr(de," ","")+";",i,n,k-2),x);break;case 59:de+=";";default:if(iv(ue=xP(de,t,n,S,M,c,o,Z,Q=[],ae=[],k),u),$===123)if(M===0)Nv(de,t,ue,ue,Q,u,k,o,ae);else switch(L===99&&Zi(de,3)===110?100:L){case 100:case 108:case 109:case 115:Nv(e,ue,ue,i&&iv(xP(e,ue,ue,0,0,c,o,Z,c,Q=[],k),ae),c,ae,k,o,i?Q:ae);break;default:Nv(de,ue,ue,ue,[""],ae,0,o,ae)}}S=M=j=0,V=B=1,Z=de="",k=p;break;case 58:k=1+ps(de),j=F;default:if(V<1){if($==123)--V;else if($==125&&V++==0&&oZ()==125)continue}switch(de+=z1($),$*V){case 38:B=M>0?1:(de+="\f",-1);break;case 44:o[S++]=(ps(de)-1)*B,B=1;break;case 64:bs()===45&&(de+=Bv(Qo())),L=bs(),M=k=ps(Z=de+=cZ(Fv())),$++;break;case 45:F===45&&ps(de)==2&&(V=0)}}return u}function xP(e,t,n,i,c,u,p,o,x,S,M){for(var k=c-1,L=c===0?u:[""],j=oC(L),F=0,V=0,oe=0;F<i;++F)for(var B=0,$=Mg(e,k+1,k=JH(V=p[F])),Z=e;B<j;++B)(Z=Y4(V>0?L[B]+" "+$:Cr($,/&\f/g,L[B])))&&(x[oe++]=Z);return B1(e,t,n,c===0?rC:o,x,S,M)}function dZ(e,t,n){return B1(e,t,n,X4,z1(iZ()),Mg(e,2,-2),0)}function bP(e,t,n,i){return B1(e,t,n,iC,Mg(e,0,i),Mg(e,i+1,-1),i)}function $h(e,t){for(var n="",i=oC(e),c=0;c<i;c++)n+=t(e[c],c,e,t)||"";return n}function hZ(e,t,n,i){switch(e.type){case QH:if(e.children.length)break;case YH:case iC:return e.return=e.return||e.value;case X4:return"";case K4:return e.return=e.value+"{"+$h(e.children,i)+"}";case rC:e.value=e.props.join(",")}return ps(n=$h(e.children,i))?e.return=e.value+"{"+n+"}":""}function fZ(e){var t=oC(e);return function(n,i,c,u){for(var p="",o=0;o<t;o++)p+=e[o](n,i,c,u)||"";return p}}function pZ(e){return function(t){t.root||(t=t.return)&&e(t)}}var mZ=function(t,n,i){for(var c=0,u=0;c=u,u=bs(),c===38&&u===12&&(n[i]=1),!Ag(u);)Qo();return Yg(t,Bo)},gZ=function(t,n){var i=-1,c=44;do switch(Ag(c)){case 0:c===38&&bs()===12&&(n[i]=1),t[i]+=mZ(Bo-1,n,i);break;case 2:t[i]+=Bv(c);break;case 4:if(c===44){t[++i]=bs()===58?"&\f":"",n[i]=t[i].length;break}default:t[i]+=z1(c)}while(c=Qo());return t},yZ=function(t,n){return e5(gZ(J4(t),n))},wP=new WeakMap,vZ=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,i=t.parent,c=t.column===i.column&&t.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!wP.get(i))&&!c){wP.set(t,!0);for(var u=[],p=yZ(n,u),o=i.props,x=0,S=0;x<p.length;x++)for(var M=0;M<o.length;M++,S++)t.props[S]=u[x]?p[x].replace(/&\f/g,o[M]):o[M]+" "+p[x]}}},_Z=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function t5(e,t){switch(tZ(e,t)){case 5103:return Tr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Tr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Tr+e+__+e+lo+e+e;case 6828:case 4268:return Tr+e+lo+e+e;case 6165:return Tr+e+lo+"flex-"+e+e;case 5187:return Tr+e+Cr(e,/(\w+).+(:[^]+)/,Tr+"box-$1$2"+lo+"flex-$1$2")+e;case 5443:return Tr+e+lo+"flex-item-"+Cr(e,/flex-|-self/,"")+e;case 4675:return Tr+e+lo+"flex-line-pack"+Cr(e,/align-content|flex-|-self/,"")+e;case 5548:return Tr+e+lo+Cr(e,"shrink","negative")+e;case 5292:return Tr+e+lo+Cr(e,"basis","preferred-size")+e;case 6060:return Tr+"box-"+Cr(e,"-grow","")+Tr+e+lo+Cr(e,"grow","positive")+e;case 4554:return Tr+Cr(e,/([^-])(transform)/g,"$1"+Tr+"$2")+e;case 6187:return Cr(Cr(Cr(e,/(zoom-|grab)/,Tr+"$1"),/(image-set)/,Tr+"$1"),e,"")+e;case 5495:case 3959:return Cr(e,/(image-set\([^]*)/,Tr+"$1$`$1");case 4968:return Cr(Cr(e,/(.+:)(flex-)?(.*)/,Tr+"box-pack:$3"+lo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Tr+e+e;case 4095:case 3583:case 4068:case 2532:return Cr(e,/(.+)-inline(.+)/,Tr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ps(e)-1-t>6)switch(Zi(e,t+1)){case 109:if(Zi(e,t+4)!==45)break;case 102:return Cr(e,/(.+:)(.+)-([^]+)/,"$1"+Tr+"$2-$3$1"+__+(Zi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~HS(e,"stretch")?t5(Cr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Zi(e,t+1)!==115)break;case 6444:switch(Zi(e,ps(e)-3-(~HS(e,"!important")&&10))){case 107:return Cr(e,":",":"+Tr)+e;case 101:return Cr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Tr+(Zi(e,14)===45?"inline-":"")+"box$3$1"+Tr+"$2$3$1"+lo+"$2box$3")+e}break;case 5936:switch(Zi(e,t+11)){case 114:return Tr+e+lo+Cr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Tr+e+lo+Cr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Tr+e+lo+Cr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Tr+e+lo+e+e}return e}var xZ=function(t,n,i,c){if(t.length>-1&&!t.return)switch(t.type){case iC:t.return=t5(t.value,t.length);break;case K4:return $h([ym(t,{value:Cr(t.value,"@","@"+Tr)})],c);case rC:if(t.length)return rZ(t.props,function(u){switch(nZ(u,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return $h([ym(t,{props:[Cr(u,/:(read-\w+)/,":"+__+"$1")]})],c);case"::placeholder":return $h([ym(t,{props:[Cr(u,/:(plac\w+)/,":"+Tr+"input-$1")]}),ym(t,{props:[Cr(u,/:(plac\w+)/,":"+__+"$1")]}),ym(t,{props:[Cr(u,/:(plac\w+)/,lo+"input-$1")]})],c)}return""})}},bZ=[xZ],n5=function(t){var n=t.key;if(n==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(V){var oe=V.getAttribute("data-emotion");oe.indexOf(" ")!==-1&&(document.head.appendChild(V),V.setAttribute("data-s",""))})}var c=t.stylisPlugins||bZ,u={},p,o=[];p=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(V){for(var oe=V.getAttribute("data-emotion").split(" "),B=1;B<oe.length;B++)u[oe[B]]=!0;o.push(V)});var x,S=[vZ,_Z];{var M,k=[hZ,pZ(function(V){M.insert(V)})],L=fZ(S.concat(c,k)),j=function(oe){return $h(uZ(oe),L)};x=function(oe,B,$,Z){M=$,j(oe?oe+"{"+B.styles+"}":B.styles),Z&&(F.inserted[B.name]=!0)}}var F={key:n,sheet:new KH({key:n,container:p,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:u,registered:{},insert:x};return F.sheet.hydrate(o),F},r5={exports:{}},Ir={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vi=typeof Symbol=="function"&&Symbol.for,aC=Vi?Symbol.for("react.element"):60103,sC=Vi?Symbol.for("react.portal"):60106,N1=Vi?Symbol.for("react.fragment"):60107,$1=Vi?Symbol.for("react.strict_mode"):60108,U1=Vi?Symbol.for("react.profiler"):60114,j1=Vi?Symbol.for("react.provider"):60109,V1=Vi?Symbol.for("react.context"):60110,lC=Vi?Symbol.for("react.async_mode"):60111,G1=Vi?Symbol.for("react.concurrent_mode"):60111,W1=Vi?Symbol.for("react.forward_ref"):60112,q1=Vi?Symbol.for("react.suspense"):60113,wZ=Vi?Symbol.for("react.suspense_list"):60120,H1=Vi?Symbol.for("react.memo"):60115,Z1=Vi?Symbol.for("react.lazy"):60116,SZ=Vi?Symbol.for("react.block"):60121,EZ=Vi?Symbol.for("react.fundamental"):60117,TZ=Vi?Symbol.for("react.responder"):60118,CZ=Vi?Symbol.for("react.scope"):60119;function na(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case aC:switch(e=e.type,e){case lC:case G1:case N1:case U1:case $1:case q1:return e;default:switch(e=e&&e.$$typeof,e){case V1:case W1:case Z1:case H1:case j1:return e;default:return t}}case sC:return t}}}function i5(e){return na(e)===G1}Ir.AsyncMode=lC;Ir.ConcurrentMode=G1;Ir.ContextConsumer=V1;Ir.ContextProvider=j1;Ir.Element=aC;Ir.ForwardRef=W1;Ir.Fragment=N1;Ir.Lazy=Z1;Ir.Memo=H1;Ir.Portal=sC;Ir.Profiler=U1;Ir.StrictMode=$1;Ir.Suspense=q1;Ir.isAsyncMode=function(e){return i5(e)||na(e)===lC};Ir.isConcurrentMode=i5;Ir.isContextConsumer=function(e){return na(e)===V1};Ir.isContextProvider=function(e){return na(e)===j1};Ir.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===aC};Ir.isForwardRef=function(e){return na(e)===W1};Ir.isFragment=function(e){return na(e)===N1};Ir.isLazy=function(e){return na(e)===Z1};Ir.isMemo=function(e){return na(e)===H1};Ir.isPortal=function(e){return na(e)===sC};Ir.isProfiler=function(e){return na(e)===U1};Ir.isStrictMode=function(e){return na(e)===$1};Ir.isSuspense=function(e){return na(e)===q1};Ir.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===N1||e===G1||e===U1||e===$1||e===q1||e===wZ||typeof e=="object"&&e!==null&&(e.$$typeof===Z1||e.$$typeof===H1||e.$$typeof===j1||e.$$typeof===V1||e.$$typeof===W1||e.$$typeof===EZ||e.$$typeof===TZ||e.$$typeof===CZ||e.$$typeof===SZ)};Ir.typeOf=na;r5.exports=Ir;var RZ=r5.exports,o5=RZ,MZ={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},AZ={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a5={};a5[o5.ForwardRef]=MZ;a5[o5.Memo]=AZ;var kZ=!0;function PZ(e,t,n){var i="";return n.split(" ").forEach(function(c){e[c]!==void 0?t.push(e[c]+";"):i+=c+" "}),i}var s5=function(t,n,i){var c=t.key+"-"+n.name;(i===!1||kZ===!1)&&t.registered[c]===void 0&&(t.registered[c]=n.styles)},l5=function(t,n,i){s5(t,n,i);var c=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var u=n;do t.insert(n===u?"."+c:"",u,t.sheet,!0),u=u.next;while(u!==void 0)}};function IZ(e){for(var t=0,n,i=0,c=e.length;c>=4;++i,c-=4)n=e.charCodeAt(i)&255|(e.charCodeAt(++i)&255)<<8|(e.charCodeAt(++i)&255)<<16|(e.charCodeAt(++i)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(i+2)&255)<<16;case 2:t^=(e.charCodeAt(i+1)&255)<<8;case 1:t^=e.charCodeAt(i)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var LZ={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},OZ=/[A-Z]|^ms/g,DZ=/_EMO_([^_]+?)_([^]*?)_EMO_/g,c5=function(t){return t.charCodeAt(1)===45},SP=function(t){return t!=null&&typeof t!="boolean"},Fw=Z4(function(e){return c5(e)?e:e.replace(OZ,"-$&").toLowerCase()}),EP=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(DZ,function(i,c,u){return ms={name:c,styles:u,next:ms},c})}return LZ[t]!==1&&!c5(t)&&typeof n=="number"&&n!==0?n+"px":n};function kg(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return ms={name:n.name,styles:n.styles,next:ms},n.name;if(n.styles!==void 0){var i=n.next;if(i!==void 0)for(;i!==void 0;)ms={name:i.name,styles:i.styles,next:ms},i=i.next;var c=n.styles+";";return c}return zZ(e,t,n)}case"function":{if(e!==void 0){var u=ms,p=n(e);return ms=u,kg(e,t,p)}break}}if(t==null)return n;var o=t[n];return o!==void 0?o:n}function zZ(e,t,n){var i="";if(Array.isArray(n))for(var c=0;c<n.length;c++)i+=kg(e,t,n[c])+";";else for(var u in n){var p=n[u];if(typeof p!="object")t!=null&&t[p]!==void 0?i+=u+"{"+t[p]+"}":SP(p)&&(i+=Fw(u)+":"+EP(u,p)+";");else if(Array.isArray(p)&&typeof p[0]=="string"&&(t==null||t[p[0]]===void 0))for(var o=0;o<p.length;o++)SP(p[o])&&(i+=Fw(u)+":"+EP(u,p[o])+";");else{var x=kg(e,t,p);switch(u){case"animation":case"animationName":{i+=Fw(u)+":"+x+";";break}default:i+=u+"{"+x+"}"}}}return i}var TP=/label:\s*([^\s;\n{]+)\s*(;|$)/g,ms,cC=function(t,n,i){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var c=!0,u="";ms=void 0;var p=t[0];p==null||p.raw===void 0?(c=!1,u+=kg(i,n,p)):u+=p[0];for(var o=1;o<t.length;o++)u+=kg(i,n,t[o]),c&&(u+=p[o]);TP.lastIndex=0;for(var x="",S;(S=TP.exec(u))!==null;)x+="-"+S[1];var M=IZ(u)+x;return{name:M,styles:u,next:ms}},FZ=function(t){return t()},u5=B2["useInsertionEffect"]?B2["useInsertionEffect"]:!1,BZ=u5||FZ,CP=u5||X.useLayoutEffect,d5=X.createContext(typeof HTMLElement<"u"?n5({key:"css"}):null),NZ=d5.Provider,h5=function(t){return X.forwardRef(function(n,i){var c=X.useContext(d5);return t(n,c,i)})},X1=X.createContext({}),Qg=h5(function(e,t){var n=e.styles,i=cC([n],void 0,X.useContext(X1)),c=X.useRef();return CP(function(){var u=t.key+"-global",p=new t.sheet.constructor({key:u,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),o=!1,x=document.querySelector('style[data-emotion="'+u+" "+i.name+'"]');return t.sheet.tags.length&&(p.before=t.sheet.tags[0]),x!==null&&(o=!0,x.setAttribute("data-emotion",u),p.hydrate([x])),c.current=[p,o],function(){p.flush()}},[t]),CP(function(){var u=c.current,p=u[0],o=u[1];if(o){u[1]=!1;return}if(i.next!==void 0&&l5(t,i.next,!0),p.tags.length){var x=p.tags[p.tags.length-1].nextElementSibling;p.before=x,p.flush()}t.insert("",i,p,!1)},[t,i.name]),null});function Sc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cC(t)}var Es=function(){var t=Sc.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},$Z=HH,UZ=function(t){return t!=="theme"},RP=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?$Z:UZ},MP=function(t,n,i){var c;if(n){var u=n.shouldForwardProp;c=t.__emotion_forwardProp&&u?function(p){return t.__emotion_forwardProp(p)&&u(p)}:u}return typeof c!="function"&&i&&(c=t.__emotion_forwardProp),c},jZ=function(t){var n=t.cache,i=t.serialized,c=t.isStringTag;return s5(n,i,c),BZ(function(){return l5(n,i,c)}),null},VZ=function e(t,n){var i=t.__emotion_real===t,c=i&&t.__emotion_base||t,u,p;n!==void 0&&(u=n.label,p=n.target);var o=MP(t,n,i),x=o||RP(c),S=!x("as");return function(){var M=arguments,k=i&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(u!==void 0&&k.push("label:"+u+";"),M[0]==null||M[0].raw===void 0)k.push.apply(k,M);else{k.push(M[0][0]);for(var L=M.length,j=1;j<L;j++)k.push(M[j],M[0][j])}var F=h5(function(V,oe,B){var $=S&&V.as||c,Z="",Q=[],ae=V;if(V.theme==null){ae={};for(var ue in V)ae[ue]=V[ue];ae.theme=X.useContext(X1)}typeof V.className=="string"?Z=PZ(oe.registered,Q,V.className):V.className!=null&&(Z=V.className+" ");var de=cC(k.concat(Q),oe.registered,ae);Z+=oe.key+"-"+de.name,p!==void 0&&(Z+=" "+p);var ke=S&&o===void 0?RP($):x,J={};for(var G in V)S&&G==="as"||ke(G)&&(J[G]=V[G]);return J.className=Z,J.ref=B,X.createElement(X.Fragment,null,X.createElement(jZ,{cache:oe,serialized:de,isStringTag:typeof $=="string"}),X.createElement($,J))});return F.displayName=u!==void 0?u:"Styled("+(typeof c=="string"?c:c.displayName||c.name||"Component")+")",F.defaultProps=t.defaultProps,F.__emotion_real=F,F.__emotion_base=c,F.__emotion_styles=k,F.__emotion_forwardProp=o,Object.defineProperty(F,"toString",{value:function(){return"."+p}}),F.withComponent=function(V,oe){return e(V,ee({},n,oe,{shouldForwardProp:MP(F,oe,!0)})).apply(void 0,k)},F}},GZ=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Yi=VZ.bind();GZ.forEach(function(e){Yi[e]=Yi(e)});let XS;typeof document=="object"&&(XS=n5({key:"css",prepend:!0}));function WZ(e){const{injectFirst:t,children:n}=e;return t&&XS?ne(NZ,{value:XS,children:n}):n}function qZ(e){return e==null||Object.keys(e).length===0}function HZ(e){const{styles:t,defaultTheme:n={}}=e;return ne(Qg,{styles:typeof t=="function"?c=>t(qZ(c)?n:c):t})}/**
 * @mui/styled-engine v5.12.3
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function f5(e,t){return Yi(e,t)}const ZZ=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},XZ=["values","unit","step"],KZ=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,i)=>n.val-i.val),t.reduce((n,i)=>ee({},n,{[i.key]:i.val}),{})};function YZ(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:i=5}=e,c=sn(e,XZ),u=KZ(t),p=Object.keys(u);function o(L){return`@media (min-width:${typeof t[L]=="number"?t[L]:L}${n})`}function x(L){return`@media (max-width:${(typeof t[L]=="number"?t[L]:L)-i/100}${n})`}function S(L,j){const F=p.indexOf(j);return`@media (min-width:${typeof t[L]=="number"?t[L]:L}${n}) and (max-width:${(F!==-1&&typeof t[p[F]]=="number"?t[p[F]]:j)-i/100}${n})`}function M(L){return p.indexOf(L)+1<p.length?S(L,p[p.indexOf(L)+1]):o(L)}function k(L){const j=p.indexOf(L);return j===0?o(p[1]):j===p.length-1?x(p[j]):S(L,p[p.indexOf(L)+1]).replace("@media","@media not all and")}return ee({keys:p,values:u,up:o,down:x,between:S,only:M,not:k,unit:n},c)}const QZ={borderRadius:4},JZ=QZ;function eg(e,t){return t?zo(e,t,{clone:!1}):e}const uC={xs:0,sm:600,md:900,lg:1200,xl:1536},AP={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${uC[e]}px)`};function No(e,t,n){const i=e.theme||{};if(Array.isArray(t)){const u=i.breakpoints||AP;return t.reduce((p,o,x)=>(p[u.up(u.keys[x])]=n(t[x]),p),{})}if(typeof t=="object"){const u=i.breakpoints||AP;return Object.keys(t).reduce((p,o)=>{if(Object.keys(u.values||uC).indexOf(o)!==-1){const x=u.up(o);p[x]=n(t[o],o)}else{const x=o;p[x]=t[x]}return p},{})}return n(t)}function p5(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((i,c)=>{const u=e.up(c);return i[u]={},i},{}))||{}}function m5(e,t){return e.reduce((n,i)=>{const c=n[i];return(!c||Object.keys(c).length===0)&&delete n[i],n},t)}function eX(e,...t){const n=p5(e),i=[n,...t].reduce((c,u)=>zo(c,u),{});return m5(Object.keys(n),i)}function tX(e,t){if(typeof e!="object")return{};const n={},i=Object.keys(t);return Array.isArray(e)?i.forEach((c,u)=>{u<e.length&&(n[c]=!0)}):i.forEach(c=>{e[c]!=null&&(n[c]=!0)}),n}function Uu({values:e,breakpoints:t,base:n}){const i=n||tX(e,t),c=Object.keys(i);if(c.length===0)return e;let u;return c.reduce((p,o,x)=>(Array.isArray(e)?(p[o]=e[x]!=null?e[x]:e[u],u=x):typeof e=="object"?(p[o]=e[o]!=null?e[o]:e[u],u=o):p[o]=e,p),{})}function K1(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const i=`vars.${t}`.split(".").reduce((c,u)=>c&&c[u]?c[u]:null,e);if(i!=null)return i}return t.split(".").reduce((i,c)=>i&&i[c]!=null?i[c]:null,e)}function x_(e,t,n,i=n){let c;return typeof e=="function"?c=e(n):Array.isArray(e)?c=e[n]||i:c=K1(e,n)||i,t&&(c=t(c,i,e)),c}function Ar(e){const{prop:t,cssProperty:n=e.prop,themeKey:i,transform:c}=e,u=p=>{if(p[t]==null)return null;const o=p[t],x=p.theme,S=K1(x,i)||{};return No(p,o,k=>{let L=x_(S,c,k);return k===L&&typeof k=="string"&&(L=x_(S,c,`${t}${k==="default"?"":St(k)}`,k)),n===!1?L:{[n]:L}})};return u.propTypes={},u.filterProps=[t],u}function nX(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const rX={m:"margin",p:"padding"},iX={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},kP={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},oX=nX(e=>{if(e.length>2)if(kP[e])e=kP[e];else return[e];const[t,n]=e.split(""),i=rX[t],c=iX[n]||"";return Array.isArray(c)?c.map(u=>i+u):[i+c]}),dC=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],hC=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...dC,...hC];function Jg(e,t,n,i){var c;const u=(c=K1(e,t,!1))!=null?c:n;return typeof u=="number"?p=>typeof p=="string"?p:u*p:Array.isArray(u)?p=>typeof p=="string"?p:u[p]:typeof u=="function"?u:()=>{}}function fC(e){return Jg(e,"spacing",8)}function Qu(e,t){if(typeof t=="string"||t==null)return t;const n=Math.abs(t),i=e(n);return t>=0?i:typeof i=="number"?-i:`-${i}`}function aX(e,t){return n=>e.reduce((i,c)=>(i[c]=Qu(t,n),i),{})}function sX(e,t,n,i){if(t.indexOf(n)===-1)return null;const c=oX(n),u=aX(c,i),p=e[n];return No(e,p,u)}function g5(e,t){const n=fC(e.theme);return Object.keys(e).map(i=>sX(e,t,i,n)).reduce(eg,{})}function mi(e){return g5(e,dC)}mi.propTypes={};mi.filterProps=dC;function gi(e){return g5(e,hC)}gi.propTypes={};gi.filterProps=hC;function lX(e=8){if(e.mui)return e;const t=fC({spacing:e}),n=(...i)=>(i.length===0?[1]:i).map(u=>{const p=t(u);return typeof p=="number"?`${p}px`:p}).join(" ");return n.mui=!0,n}function Y1(...e){const t=e.reduce((i,c)=>(c.filterProps.forEach(u=>{i[u]=c}),i),{}),n=i=>Object.keys(i).reduce((c,u)=>t[u]?eg(c,t[u](i)):c,{});return n.propTypes={},n.filterProps=e.reduce((i,c)=>i.concat(c.filterProps),[]),n}function ys(e){return typeof e!="number"?e:`${e}px solid`}const cX=Ar({prop:"border",themeKey:"borders",transform:ys}),uX=Ar({prop:"borderTop",themeKey:"borders",transform:ys}),dX=Ar({prop:"borderRight",themeKey:"borders",transform:ys}),hX=Ar({prop:"borderBottom",themeKey:"borders",transform:ys}),fX=Ar({prop:"borderLeft",themeKey:"borders",transform:ys}),pX=Ar({prop:"borderColor",themeKey:"palette"}),mX=Ar({prop:"borderTopColor",themeKey:"palette"}),gX=Ar({prop:"borderRightColor",themeKey:"palette"}),yX=Ar({prop:"borderBottomColor",themeKey:"palette"}),vX=Ar({prop:"borderLeftColor",themeKey:"palette"}),Q1=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Jg(e.theme,"shape.borderRadius",4),n=i=>({borderRadius:Qu(t,i)});return No(e,e.borderRadius,n)}return null};Q1.propTypes={};Q1.filterProps=["borderRadius"];Y1(cX,uX,dX,hX,fX,pX,mX,gX,yX,vX,Q1);const J1=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Jg(e.theme,"spacing",8),n=i=>({gap:Qu(t,i)});return No(e,e.gap,n)}return null};J1.propTypes={};J1.filterProps=["gap"];const ex=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Jg(e.theme,"spacing",8),n=i=>({columnGap:Qu(t,i)});return No(e,e.columnGap,n)}return null};ex.propTypes={};ex.filterProps=["columnGap"];const tx=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Jg(e.theme,"spacing",8),n=i=>({rowGap:Qu(t,i)});return No(e,e.rowGap,n)}return null};tx.propTypes={};tx.filterProps=["rowGap"];const _X=Ar({prop:"gridColumn"}),xX=Ar({prop:"gridRow"}),bX=Ar({prop:"gridAutoFlow"}),wX=Ar({prop:"gridAutoColumns"}),SX=Ar({prop:"gridAutoRows"}),EX=Ar({prop:"gridTemplateColumns"}),TX=Ar({prop:"gridTemplateRows"}),CX=Ar({prop:"gridTemplateAreas"}),RX=Ar({prop:"gridArea"});Y1(J1,ex,tx,_X,xX,bX,wX,SX,EX,TX,CX,RX);function Uh(e,t){return t==="grey"?t:e}const MX=Ar({prop:"color",themeKey:"palette",transform:Uh}),AX=Ar({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Uh}),kX=Ar({prop:"backgroundColor",themeKey:"palette",transform:Uh});Y1(MX,AX,kX);function Zo(e){return e<=1&&e!==0?`${e*100}%`:e}const PX=Ar({prop:"width",transform:Zo}),pC=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var i,c,u;return{maxWidth:((i=e.theme)==null||(c=i.breakpoints)==null||(u=c.values)==null?void 0:u[n])||uC[n]||Zo(n)}};return No(e,e.maxWidth,t)}return null};pC.filterProps=["maxWidth"];const IX=Ar({prop:"minWidth",transform:Zo}),LX=Ar({prop:"height",transform:Zo}),OX=Ar({prop:"maxHeight",transform:Zo}),DX=Ar({prop:"minHeight",transform:Zo});Ar({prop:"size",cssProperty:"width",transform:Zo});Ar({prop:"size",cssProperty:"height",transform:Zo});const zX=Ar({prop:"boxSizing"});Y1(PX,pC,IX,LX,OX,DX,zX);const FX={border:{themeKey:"borders",transform:ys},borderTop:{themeKey:"borders",transform:ys},borderRight:{themeKey:"borders",transform:ys},borderBottom:{themeKey:"borders",transform:ys},borderLeft:{themeKey:"borders",transform:ys},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Q1},color:{themeKey:"palette",transform:Uh},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Uh},backgroundColor:{themeKey:"palette",transform:Uh},p:{style:gi},pt:{style:gi},pr:{style:gi},pb:{style:gi},pl:{style:gi},px:{style:gi},py:{style:gi},padding:{style:gi},paddingTop:{style:gi},paddingRight:{style:gi},paddingBottom:{style:gi},paddingLeft:{style:gi},paddingX:{style:gi},paddingY:{style:gi},paddingInline:{style:gi},paddingInlineStart:{style:gi},paddingInlineEnd:{style:gi},paddingBlock:{style:gi},paddingBlockStart:{style:gi},paddingBlockEnd:{style:gi},m:{style:mi},mt:{style:mi},mr:{style:mi},mb:{style:mi},ml:{style:mi},mx:{style:mi},my:{style:mi},margin:{style:mi},marginTop:{style:mi},marginRight:{style:mi},marginBottom:{style:mi},marginLeft:{style:mi},marginX:{style:mi},marginY:{style:mi},marginInline:{style:mi},marginInlineStart:{style:mi},marginInlineEnd:{style:mi},marginBlock:{style:mi},marginBlockStart:{style:mi},marginBlockEnd:{style:mi},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:J1},rowGap:{style:tx},columnGap:{style:ex},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Zo},maxWidth:{style:pC},minWidth:{transform:Zo},height:{transform:Zo},maxHeight:{transform:Zo},minHeight:{transform:Zo},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},nx=FX;function BX(...e){const t=e.reduce((i,c)=>i.concat(Object.keys(c)),[]),n=new Set(t);return e.every(i=>n.size===Object.keys(i).length)}function NX(e,t){return typeof e=="function"?e(t):e}function $X(){function e(n,i,c,u){const p={[n]:i,theme:c},o=u[n];if(!o)return{[n]:i};const{cssProperty:x=n,themeKey:S,transform:M,style:k}=o;if(i==null)return null;if(S==="typography"&&i==="inherit")return{[n]:i};const L=K1(c,S)||{};return k?k(p):No(p,i,F=>{let V=x_(L,M,F);return F===V&&typeof F=="string"&&(V=x_(L,M,`${n}${F==="default"?"":St(F)}`,F)),x===!1?V:{[x]:V}})}function t(n){var i;const{sx:c,theme:u={}}=n||{};if(!c)return null;const p=(i=u.unstable_sxConfig)!=null?i:nx;function o(x){let S=x;if(typeof x=="function")S=x(u);else if(typeof x!="object")return x;if(!S)return null;const M=p5(u.breakpoints),k=Object.keys(M);let L=M;return Object.keys(S).forEach(j=>{const F=NX(S[j],u);if(F!=null)if(typeof F=="object")if(p[j])L=eg(L,e(j,F,u,p));else{const V=No({theme:u},F,oe=>({[j]:oe}));BX(V,F)?L[j]=t({sx:F,theme:u}):L=eg(L,V)}else L=eg(L,e(j,F,u,p))}),m5(k,L)}return Array.isArray(c)?c.map(o):o(c)}return t}const y5=$X();y5.filterProps=["sx"];const rx=y5,UX=["breakpoints","palette","spacing","shape"];function yf(e={},...t){const{breakpoints:n={},palette:i={},spacing:c,shape:u={}}=e,p=sn(e,UX),o=YZ(n),x=lX(c);let S=zo({breakpoints:o,direction:"ltr",components:{},palette:ee({mode:"light"},i),spacing:x,shape:ee({},JZ,u)},p);return S=t.reduce((M,k)=>zo(M,k),S),S.unstable_sxConfig=ee({},nx,p==null?void 0:p.unstable_sxConfig),S.unstable_sx=function(k){return rx({sx:k,theme:this})},S}function jX(e){return Object.keys(e).length===0}function v5(e=null){const t=X.useContext(X1);return!t||jX(t)?e:t}const VX=yf();function ey(e=VX){return v5(e)}function GX({styles:e,themeId:t,defaultTheme:n={}}){const i=ey(n),c=typeof e=="function"?e(t&&i[t]||i):e;return ne(HZ,{styles:c})}const WX=["sx"],qX=e=>{var t,n;const i={systemProps:{},otherProps:{}},c=(t=e==null||(n=e.theme)==null?void 0:n.unstable_sxConfig)!=null?t:nx;return Object.keys(e).forEach(u=>{c[u]?i.systemProps[u]=e[u]:i.otherProps[u]=e[u]}),i};function ty(e){const{sx:t}=e,n=sn(e,WX),{systemProps:i,otherProps:c}=qX(n);let u;return Array.isArray(t)?u=[i,...t]:typeof t=="function"?u=(...p)=>{const o=t(...p);return ku(o)?ee({},i,o):i}:u=ee({},i,t),ee({},c,{sx:u})}function _5(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=_5(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function on(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=_5(e))&&(i&&(i+=" "),i+=t);return i}const HX=["className","component"];function ZX(e={}){const{themeId:t,defaultTheme:n,defaultClassName:i="MuiBox-root",generateClassName:c}=e,u=f5("div",{shouldForwardProp:o=>o!=="theme"&&o!=="sx"&&o!=="as"})(rx);return X.forwardRef(function(x,S){const M=ey(n),k=ty(x),{className:L,component:j="div"}=k,F=sn(k,HX);return ne(u,ee({as:j,ref:S,className:on(L,c?c(i):i),theme:t&&M[t]||M},F))})}const XX=["variant"];function PP(e){return e.length===0}function x5(e){const{variant:t}=e,n=sn(e,XX);let i=t||"";return Object.keys(n).sort().forEach(c=>{c==="color"?i+=PP(i)?e[c]:St(e[c]):i+=`${PP(i)?c:St(c)}${St(e[c].toString())}`}),i}const KX=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function YX(e){return Object.keys(e).length===0}function QX(e){return typeof e=="string"&&e.charCodeAt(0)>96}const JX=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,eK=(e,t)=>{let n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);const i={};return n.forEach(c=>{const u=x5(c.props);i[u]=c.style}),i},tK=(e,t,n,i)=>{var c,u;const{ownerState:p={}}=e,o=[],x=n==null||(c=n.components)==null||(u=c[i])==null?void 0:u.variants;return x&&x.forEach(S=>{let M=!0;Object.keys(S.props).forEach(k=>{p[k]!==S.props[k]&&e[k]!==S.props[k]&&(M=!1)}),M&&o.push(t[x5(S.props)])}),o};function tg(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const nK=yf();function vm({defaultTheme:e,theme:t,themeId:n}){return YX(t)?e:t[n]||t}function b5(e={}){const{themeId:t,defaultTheme:n=nK,rootShouldForwardProp:i=tg,slotShouldForwardProp:c=tg}=e,u=p=>rx(ee({},p,{theme:vm(ee({},p,{defaultTheme:n,themeId:t}))}));return u.__mui_systemSx=!0,(p,o={})=>{ZZ(p,Q=>Q.filter(ae=>!(ae!=null&&ae.__mui_systemSx)));const{name:x,slot:S,skipVariantsResolver:M,skipSx:k,overridesResolver:L}=o,j=sn(o,KX),F=M!==void 0?M:S&&S!=="Root"||!1,V=k||!1;let oe,B=tg;S==="Root"?B=i:S?B=c:QX(p)&&(B=void 0);const $=f5(p,ee({shouldForwardProp:B,label:oe},j)),Z=(Q,...ae)=>{const ue=ae?ae.map(G=>typeof G=="function"&&G.__emotion_real!==G?pe=>G(ee({},pe,{theme:vm(ee({},pe,{defaultTheme:n,themeId:t}))})):G):[];let de=Q;x&&L&&ue.push(G=>{const pe=vm(ee({},G,{defaultTheme:n,themeId:t})),$e=JX(x,pe);if($e){const Ge={};return Object.entries($e).forEach(([Ae,Ze])=>{Ge[Ae]=typeof Ze=="function"?Ze(ee({},G,{theme:pe})):Ze}),L(G,Ge)}return null}),x&&!F&&ue.push(G=>{const pe=vm(ee({},G,{defaultTheme:n,themeId:t}));return tK(G,eK(x,pe),pe,x)}),V||ue.push(u);const ke=ue.length-ae.length;if(Array.isArray(Q)&&ke>0){const G=new Array(ke).fill("");de=[...Q,...G],de.raw=[...Q.raw,...G]}else typeof Q=="function"&&Q.__emotion_real!==Q&&(de=G=>Q(ee({},G,{theme:vm(ee({},G,{defaultTheme:n,themeId:t}))})));const J=$(de,...ue);return p.muiName&&(J.muiName=p.muiName),J};return $.withConfig&&(Z.withConfig=$.withConfig),Z}}const rK=b5(),ix=rK;function iK(e){const{theme:t,name:n,props:i}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?i:nC(t.components[n].defaultProps,i)}function ny({props:e,name:t,defaultTheme:n,themeId:i}){let c=ey(n);return i&&(c=c[i]||c),iK({theme:c,name:t,props:e})}function mC(e,t=0,n=1){return Math.min(Math.max(t,e),n)}function oK(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(i=>i+i)),n?`rgb${n.length===4?"a":""}(${n.map((i,c)=>c<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function Ju(e){if(e.type)return e;if(e.charAt(0)==="#")return Ju(oK(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(wc(9,e));let i=e.substring(t+1,e.length-1),c;if(n==="color"){if(i=i.split(" "),c=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(c)===-1)throw new Error(wc(10,c))}else i=i.split(",");return i=i.map(u=>parseFloat(u)),{type:n,values:i,colorSpace:c}}function ox(e){const{type:t,colorSpace:n}=e;let{values:i}=e;return t.indexOf("rgb")!==-1?i=i.map((c,u)=>u<3?parseInt(c,10):c):t.indexOf("hsl")!==-1&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),t.indexOf("color")!==-1?i=`${n} ${i.join(" ")}`:i=`${i.join(", ")}`,`${t}(${i})`}function aK(e){e=Ju(e);const{values:t}=e,n=t[0],i=t[1]/100,c=t[2]/100,u=i*Math.min(c,1-c),p=(S,M=(S+n/30)%12)=>c-u*Math.max(Math.min(M-3,9-M,1),-1);let o="rgb";const x=[Math.round(p(0)*255),Math.round(p(8)*255),Math.round(p(4)*255)];return e.type==="hsla"&&(o+="a",x.push(t[3])),ox({type:o,values:x})}function IP(e){e=Ju(e);let t=e.type==="hsl"||e.type==="hsla"?Ju(aK(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function sK(e,t){const n=IP(e),i=IP(t);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)}function Gr(e,t){return e=Ju(e),t=mC(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,ox(e)}function gC(e,t){if(e=Ju(e),t=mC(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]*=1-t;return ox(e)}function yC(e,t){if(e=Ju(e),t=mC(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return ox(e)}const lK=X.createContext(null),w5=lK;function S5(){return X.useContext(w5)}const cK=typeof Symbol=="function"&&Symbol.for,uK=cK?Symbol.for("mui.nested"):"__THEME_NESTED__";function dK(e,t){return typeof t=="function"?t(e):ee({},e,t)}function hK(e){const{children:t,theme:n}=e,i=S5(),c=X.useMemo(()=>{const u=i===null?n:dK(i,n);return u!=null&&(u[uK]=i!==null),u},[n,i]);return ne(w5.Provider,{value:c,children:t})}const LP={};function OP(e,t,n,i=!1){return X.useMemo(()=>{const c=e&&t[e]||t;if(typeof n=="function"){const u=n(c),p=e?ee({},t,{[e]:u}):u;return i?()=>p:p}return e?ee({},t,{[e]:n}):ee({},t,n)},[e,t,n,i])}function fK(e){const{children:t,theme:n,themeId:i}=e,c=v5(LP),u=S5()||LP,p=OP(i,c,n),o=OP(i,u,n,!0);return ne(hK,{theme:o,children:ne(X1.Provider,{value:p,children:t})})}const pK=["className","component","disableGutters","fixed","maxWidth","classes"],mK=yf(),gK=ix("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${St(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),yK=e=>ny({props:e,name:"MuiContainer",defaultTheme:mK}),vK=(e,t)=>{const n=x=>Bn(t,x),{classes:i,fixed:c,disableGutters:u,maxWidth:p}=e,o={root:["root",p&&`maxWidth${St(String(p))}`,c&&"fixed",u&&"disableGutters"]};return $n(o,n,i)};function _K(e={}){const{createStyledComponent:t=gK,useThemeProps:n=yK,componentName:i="MuiContainer"}=e,c=t(({theme:p,ownerState:o})=>ee({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!o.disableGutters&&{paddingLeft:p.spacing(2),paddingRight:p.spacing(2),[p.breakpoints.up("sm")]:{paddingLeft:p.spacing(3),paddingRight:p.spacing(3)}}),({theme:p,ownerState:o})=>o.fixed&&Object.keys(p.breakpoints.values).reduce((x,S)=>{const M=S,k=p.breakpoints.values[M];return k!==0&&(x[p.breakpoints.up(M)]={maxWidth:`${k}${p.breakpoints.unit}`}),x},{}),({theme:p,ownerState:o})=>ee({},o.maxWidth==="xs"&&{[p.breakpoints.up("xs")]:{maxWidth:Math.max(p.breakpoints.values.xs,444)}},o.maxWidth&&o.maxWidth!=="xs"&&{[p.breakpoints.up(o.maxWidth)]:{maxWidth:`${p.breakpoints.values[o.maxWidth]}${p.breakpoints.unit}`}}));return X.forwardRef(function(o,x){const S=n(o),{className:M,component:k="div",disableGutters:L=!1,fixed:j=!1,maxWidth:F="lg"}=S,V=sn(S,pK),oe=ee({},S,{component:k,disableGutters:L,fixed:j,maxWidth:F}),B=vK(oe,i);return ne(c,ee({as:k,ownerState:oe,className:on(B.root,M),ref:x},V))})}function sl(e){return e?`Level${e}`:""}function ry(e){return e.unstable_level>0&&e.container}function E5(e){return function(n){return`var(--Grid-${n}Spacing${sl(e.unstable_level)})`}}function vC(e){return function(n){return e.unstable_level===0?`var(--Grid-${n}Spacing)`:`var(--Grid-${n}Spacing${sl(e.unstable_level-1)})`}}function _C(e){return e.unstable_level===0?"var(--Grid-columns)":`var(--Grid-columns${sl(e.unstable_level-1)})`}const xK=(e,t)=>e.filter(n=>t.includes(n)),vf=(e,t,n)=>{const i=e.keys[0];Array.isArray(t)?t.forEach((c,u)=>{n((p,o)=>{u<=e.keys.length-1&&(u===0?Object.assign(p,o):p[e.up(e.keys[u])]=o)},c)}):t&&typeof t=="object"?(Object.keys(t).length>e.keys.length?e.keys:xK(e.keys,Object.keys(t))).forEach(u=>{if(e.keys.indexOf(u)!==-1){const p=t[u];p!==void 0&&n((o,x)=>{i===u?Object.assign(o,x):o[e.up(u)]=x},p)}}):(typeof t=="number"||typeof t=="string")&&n((c,u)=>{Object.assign(c,u)},t)},bK=({theme:e,ownerState:t})=>{const n=E5(t),i={};return vf(e.breakpoints,t.gridSize,(c,u)=>{let p={};u===!0&&(p={flexBasis:0,flexGrow:1,maxWidth:"100%"}),u==="auto"&&(p={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof u=="number"&&(p={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${u} / ${_C(t)}${ry(t)?` + ${n("column")}`:""})`}),c(i,p)}),i},wK=({theme:e,ownerState:t})=>{const n={};return vf(e.breakpoints,t.gridOffset,(i,c)=>{let u={};c==="auto"&&(u={marginLeft:"auto"}),typeof c=="number"&&(u={marginLeft:c===0?"0px":`calc(100% * ${c} / ${_C(t)})`}),i(n,u)}),n},SK=({theme:e,ownerState:t})=>{if(!t.container)return{};const n=ry(t)?{[`--Grid-columns${sl(t.unstable_level)}`]:_C(t)}:{"--Grid-columns":12};return vf(e.breakpoints,t.columns,(i,c)=>{i(n,{[`--Grid-columns${sl(t.unstable_level)}`]:c})}),n},EK=({theme:e,ownerState:t})=>{if(!t.container)return{};const n=vC(t),i=ry(t)?{[`--Grid-rowSpacing${sl(t.unstable_level)}`]:n("row")}:{};return vf(e.breakpoints,t.rowSpacing,(c,u)=>{var p;c(i,{[`--Grid-rowSpacing${sl(t.unstable_level)}`]:typeof u=="string"?u:(p=e.spacing)==null?void 0:p.call(e,u)})}),i},TK=({theme:e,ownerState:t})=>{if(!t.container)return{};const n=vC(t),i=ry(t)?{[`--Grid-columnSpacing${sl(t.unstable_level)}`]:n("column")}:{};return vf(e.breakpoints,t.columnSpacing,(c,u)=>{var p;c(i,{[`--Grid-columnSpacing${sl(t.unstable_level)}`]:typeof u=="string"?u:(p=e.spacing)==null?void 0:p.call(e,u)})}),i},CK=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={};return vf(e.breakpoints,t.direction,(i,c)=>{i(n,{flexDirection:c})}),n},RK=({ownerState:e})=>{const t=E5(e),n=vC(e);return ee({minWidth:0,boxSizing:"border-box"},e.container&&ee({display:"flex",flexWrap:"wrap"},e.wrap&&e.wrap!=="wrap"&&{flexWrap:e.wrap},{margin:`calc(${t("row")} / -2) calc(${t("column")} / -2)`},e.disableEqualOverflow&&{margin:`calc(${t("row")} * -1) 0px 0px calc(${t("column")} * -1)`}),(!e.container||ry(e))&&ee({padding:`calc(${n("row")} / 2) calc(${n("column")} / 2)`},(e.disableEqualOverflow||e.parentDisableEqualOverflow)&&{padding:`${n("row")} 0px 0px ${n("column")}`}))},MK=e=>{const t=[];return Object.entries(e).forEach(([n,i])=>{i!==!1&&i!==void 0&&t.push(`grid-${n}-${String(i)}`)}),t},AK=(e,t="xs")=>{function n(i){return i===void 0?!1:typeof i=="string"&&!Number.isNaN(Number(i))||typeof i=="number"&&i>0}if(n(e))return[`spacing-${t}-${String(e)}`];if(typeof e=="object"&&!Array.isArray(e)){const i=[];return Object.entries(e).forEach(([c,u])=>{n(u)&&i.push(`spacing-${c}-${String(u)}`)}),i}return[]},kK=e=>e===void 0?[]:typeof e=="object"?Object.entries(e).map(([t,n])=>`direction-${t}-${n}`):[`direction-xs-${String(e)}`],PK=["className","children","columns","container","component","direction","wrap","spacing","rowSpacing","columnSpacing","disableEqualOverflow","unstable_level"],IK=yf(),LK=ix("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>t.root});function OK(e){return ny({props:e,name:"MuiGrid",defaultTheme:IK})}function DK(e={}){const{createStyledComponent:t=LK,useThemeProps:n=OK,componentName:i="MuiGrid"}=e,c=X.createContext(void 0),u=(x,S)=>{const{container:M,direction:k,spacing:L,wrap:j,gridSize:F}=x,V={root:["root",M&&"container",j!=="wrap"&&`wrap-xs-${String(j)}`,...kK(k),...MK(F),...M?AK(L,S.breakpoints.keys[0]):[]]};return $n(V,oe=>Bn(i,oe),{})},p=t(SK,TK,EK,bK,CK,RK,wK),o=X.forwardRef(function(S,M){var k,L,j,F,V,oe,B,$;const Z=ey(),Q=n(S),ae=ty(Q),ue=X.useContext(c),{className:de,children:ke,columns:J=12,container:G=!1,component:pe="div",direction:$e="row",wrap:Ge="wrap",spacing:Ae=0,rowSpacing:Ze=Ae,columnSpacing:Qe=Ae,disableEqualOverflow:gt,unstable_level:Me=0}=ae,Ce=sn(ae,PK);let Te=gt;Me&&gt!==void 0&&(Te=S.disableEqualOverflow);const Ve={},we={},be={};Object.entries(Ce).forEach(([ct,Nt])=>{Z.breakpoints.values[ct]!==void 0?Ve[ct]=Nt:Z.breakpoints.values[ct.replace("Offset","")]!==void 0?we[ct.replace("Offset","")]=Nt:be[ct]=Nt});const Ue=(k=S.columns)!=null?k:Me?void 0:J,nt=(L=S.spacing)!=null?L:Me?void 0:Ae,at=(j=(F=S.rowSpacing)!=null?F:S.spacing)!=null?j:Me?void 0:Ze,At=(V=(oe=S.columnSpacing)!=null?oe:S.spacing)!=null?V:Me?void 0:Qe,Ft=ee({},ae,{level:Me,columns:Ue,container:G,direction:$e,wrap:Ge,spacing:nt,rowSpacing:at,columnSpacing:At,gridSize:Ve,gridOffset:we,disableEqualOverflow:(B=($=Te)!=null?$:ue)!=null?B:!1,parentDisableEqualOverflow:ue}),Rt=u(Ft,Z);let Mt=ne(p,ee({ref:M,as:pe,ownerState:Ft,className:on(Rt.root,de)},be,{children:X.Children.map(ke,ct=>{if(X.isValidElement(ct)&&zv(ct,["Grid"])){var Nt;return X.cloneElement(ct,{unstable_level:(Nt=ct.props.unstable_level)!=null?Nt:Me+1})}return ct})}));return Te!==void 0&&Te!==(ue??!1)&&(Mt=ne(c.Provider,{value:Te,children:Mt})),Mt});return o.muiName="Grid",o}const zK=["component","direction","spacing","divider","children","className","useFlexGap"],FK=yf(),BK=ix("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function NK(e){return ny({props:e,name:"MuiStack",defaultTheme:FK})}function $K(e,t){const n=X.Children.toArray(e).filter(Boolean);return n.reduce((i,c,u)=>(i.push(c),u<n.length-1&&i.push(X.cloneElement(t,{key:`separator-${u}`})),i),[])}const UK=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],jK=({ownerState:e,theme:t})=>{let n=ee({display:"flex",flexDirection:"column"},No({theme:t},Uu({values:e.direction,breakpoints:t.breakpoints.values}),i=>({flexDirection:i})));if(e.spacing){const i=fC(t),c=Object.keys(t.breakpoints.values).reduce((x,S)=>((typeof e.spacing=="object"&&e.spacing[S]!=null||typeof e.direction=="object"&&e.direction[S]!=null)&&(x[S]=!0),x),{}),u=Uu({values:e.direction,base:c}),p=Uu({values:e.spacing,base:c});typeof u=="object"&&Object.keys(u).forEach((x,S,M)=>{if(!u[x]){const L=S>0?u[M[S-1]]:"column";u[x]=L}}),n=zo(n,No({theme:t},p,(x,S)=>e.useFlexGap?{gap:Qu(i,x)}:{"& > :not(style) + :not(style)":{margin:0,[`margin${UK(S?u[S]:e.direction)}`]:Qu(i,x)}}))}return n=eX(t.breakpoints,n),n};function VK(e={}){const{createStyledComponent:t=BK,useThemeProps:n=NK,componentName:i="MuiStack"}=e,c=()=>$n({root:["root"]},x=>Bn(i,x),{}),u=t(jK);return X.forwardRef(function(x,S){const M=n(x),k=ty(M),{component:L="div",direction:j="column",spacing:F=0,divider:V,children:oe,className:B,useFlexGap:$=!1}=k,Z=sn(k,zK),Q={direction:j,spacing:F,useFlexGap:$},ae=c();return ne(u,ee({as:L,ownerState:Q,ref:S,className:on(ae.root,B)},Z,{children:V?$K(oe,V):oe}))})}function GK(e,t){return ee({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const WK=["mode","contrastThreshold","tonalOffset"],DP={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Cg.white,default:Cg.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Bw={text:{primary:Cg.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Cg.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function zP(e,t,n,i){const c=i.light||i,u=i.dark||i*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=yC(e.main,c):t==="dark"&&(e.dark=gC(e.main,u)))}function qK(e="light"){return e==="dark"?{main:lh[200],light:lh[50],dark:lh[400]}:{main:lh[700],light:lh[400],dark:lh[800]}}function HK(e="light"){return e==="dark"?{main:sh[200],light:sh[50],dark:sh[400]}:{main:sh[500],light:sh[300],dark:sh[700]}}function ZK(e="light"){return e==="dark"?{main:ah[500],light:ah[300],dark:ah[700]}:{main:ah[700],light:ah[400],dark:ah[800]}}function XK(e="light"){return e==="dark"?{main:ch[400],light:ch[300],dark:ch[700]}:{main:ch[700],light:ch[500],dark:ch[900]}}function KK(e="light"){return e==="dark"?{main:uh[400],light:uh[300],dark:uh[700]}:{main:uh[800],light:uh[500],dark:uh[900]}}function YK(e="light"){return e==="dark"?{main:gm[400],light:gm[300],dark:gm[700]}:{main:"#ed6c02",light:gm[500],dark:gm[900]}}function QK(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:i=.2}=e,c=sn(e,WK),u=e.primary||qK(t),p=e.secondary||HK(t),o=e.error||ZK(t),x=e.info||XK(t),S=e.success||KK(t),M=e.warning||YK(t);function k(V){return sK(V,Bw.text.primary)>=n?Bw.text.primary:DP.text.primary}const L=({color:V,name:oe,mainShade:B=500,lightShade:$=300,darkShade:Z=700})=>{if(V=ee({},V),!V.main&&V[B]&&(V.main=V[B]),!V.hasOwnProperty("main"))throw new Error(wc(11,oe?` (${oe})`:"",B));if(typeof V.main!="string")throw new Error(wc(12,oe?` (${oe})`:"",JSON.stringify(V.main)));return zP(V,"light",$,i),zP(V,"dark",Z,i),V.contrastText||(V.contrastText=k(V.main)),V},j={dark:Bw,light:DP};return zo(ee({common:ee({},Cg),mode:t,primary:L({color:u,name:"primary"}),secondary:L({color:p,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:L({color:o,name:"error"}),warning:L({color:M,name:"warning"}),info:L({color:x,name:"info"}),success:L({color:S,name:"success"}),grey:ol,contrastThreshold:n,getContrastText:k,augmentColor:L,tonalOffset:i},j[t]),c)}const JK=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function eY(e){return Math.round(e*1e5)/1e5}const FP={textTransform:"uppercase"},BP='"Roboto", "Helvetica", "Arial", sans-serif';function tY(e,t){const n=typeof t=="function"?t(e):t,{fontFamily:i=BP,fontSize:c=14,fontWeightLight:u=300,fontWeightRegular:p=400,fontWeightMedium:o=500,fontWeightBold:x=700,htmlFontSize:S=16,allVariants:M,pxToRem:k}=n,L=sn(n,JK),j=c/14,F=k||(B=>`${B/S*j}rem`),V=(B,$,Z,Q,ae)=>ee({fontFamily:i,fontWeight:B,fontSize:F($),lineHeight:Z},i===BP?{letterSpacing:`${eY(Q/$)}em`}:{},ae,M),oe={h1:V(u,96,1.167,-1.5),h2:V(u,60,1.2,-.5),h3:V(p,48,1.167,0),h4:V(p,34,1.235,.25),h5:V(p,24,1.334,0),h6:V(o,20,1.6,.15),subtitle1:V(p,16,1.75,.15),subtitle2:V(o,14,1.57,.1),body1:V(p,16,1.5,.15),body2:V(p,14,1.43,.15),button:V(o,14,1.75,.4,FP),caption:V(p,12,1.66,.4),overline:V(p,12,2.66,1,FP),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return zo(ee({htmlFontSize:S,pxToRem:F,fontFamily:i,fontSize:c,fontWeightLight:u,fontWeightRegular:p,fontWeightMedium:o,fontWeightBold:x},oe),L,{clone:!1})}const nY=.2,rY=.14,iY=.12;function Yr(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${nY})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${rY})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${iY})`].join(",")}const oY=["none",Yr(0,2,1,-1,0,1,1,0,0,1,3,0),Yr(0,3,1,-2,0,2,2,0,0,1,5,0),Yr(0,3,3,-2,0,3,4,0,0,1,8,0),Yr(0,2,4,-1,0,4,5,0,0,1,10,0),Yr(0,3,5,-1,0,5,8,0,0,1,14,0),Yr(0,3,5,-1,0,6,10,0,0,1,18,0),Yr(0,4,5,-2,0,7,10,1,0,2,16,1),Yr(0,5,5,-3,0,8,10,1,0,3,14,2),Yr(0,5,6,-3,0,9,12,1,0,3,16,2),Yr(0,6,6,-3,0,10,14,1,0,4,18,3),Yr(0,6,7,-4,0,11,15,1,0,4,20,3),Yr(0,7,8,-4,0,12,17,2,0,5,22,4),Yr(0,7,8,-4,0,13,19,2,0,5,24,4),Yr(0,7,9,-4,0,14,21,2,0,5,26,4),Yr(0,8,9,-5,0,15,22,2,0,6,28,5),Yr(0,8,10,-5,0,16,24,2,0,6,30,5),Yr(0,8,11,-5,0,17,26,2,0,6,32,5),Yr(0,9,11,-5,0,18,28,2,0,7,34,6),Yr(0,9,12,-6,0,19,29,2,0,7,36,6),Yr(0,10,13,-6,0,20,31,3,0,8,38,7),Yr(0,10,13,-6,0,21,33,3,0,8,40,7),Yr(0,10,14,-6,0,22,35,3,0,8,42,7),Yr(0,11,14,-7,0,23,36,3,0,9,44,8),Yr(0,11,15,-7,0,24,38,3,0,9,46,8)],aY=oY,sY=["duration","easing","delay"],lY={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},cY={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function NP(e){return`${Math.round(e)}ms`}function uY(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function dY(e){const t=ee({},lY,e.easing),n=ee({},cY,e.duration);return ee({getAutoHeightDuration:uY,create:(c=["all"],u={})=>{const{duration:p=n.standard,easing:o=t.easeInOut,delay:x=0}=u;return sn(u,sY),(Array.isArray(c)?c:[c]).map(S=>`${S} ${typeof p=="string"?p:NP(p)} ${o} ${typeof x=="string"?x:NP(x)}`).join(",")}},e,{easing:t,duration:n})}const hY={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},fY=hY,pY=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function fl(e={},...t){const{mixins:n={},palette:i={},transitions:c={},typography:u={}}=e,p=sn(e,pY);if(e.vars)throw new Error(wc(18));const o=QK(i),x=yf(e);let S=zo(x,{mixins:GK(x.breakpoints,n),palette:o,shadows:aY.slice(),typography:tY(o,u),transitions:dY(c),zIndex:ee({},fY)});return S=zo(S,p),S=t.reduce((M,k)=>zo(M,k),S),S.unstable_sxConfig=ee({},nx,p==null?void 0:p.unstable_sxConfig),S.unstable_sx=function(k){return rx({sx:k,theme:this})},S}function mY(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function gY(e){return parseFloat(e)}const yY=fl(),ax=yY;function Gi(){const e=ey(ax);return e[Yu]||e}function Un({props:e,name:t}){return ny({props:e,name:t,defaultTheme:ax,themeId:Yu})}const Sa=e=>tg(e)&&e!=="classes",sx=tg,vY=b5({themeId:Yu,defaultTheme:ax,rootShouldForwardProp:Sa}),Gt=vY,_Y=["theme"];function iy(e){let{theme:t}=e,n=sn(e,_Y);const i=t[Yu];return ne(fK,ee({},n,{themeId:i?Yu:void 0,theme:i||t}))}const xY=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)},$P=xY;function yc(e){return typeof e=="string"}function bY(e,t,n){return e===void 0||yc(e)?t:ee({},t,{ownerState:ee({},t.ownerState,n)})}function wY(e,t,n=(i,c)=>i===c){return e.length===t.length&&e.every((i,c)=>n(i,t[c]))}const SY={disableDefaultClasses:!1},EY=X.createContext(SY);function TY(e){const{disableDefaultClasses:t}=X.useContext(EY);return n=>t?"":e(n)}function CY(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(i=>i.match(/^on[A-Z]/)&&typeof e[i]=="function"&&!t.includes(i)).forEach(i=>{n[i]=e[i]}),n}function KS(e,t){return typeof e=="function"?e(t):e}function UP(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function RY(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:i,externalForwardedProps:c,className:u}=e;if(!t){const j=on(c==null?void 0:c.className,i==null?void 0:i.className,u,n==null?void 0:n.className),F=ee({},n==null?void 0:n.style,c==null?void 0:c.style,i==null?void 0:i.style),V=ee({},n,c,i);return j.length>0&&(V.className=j),Object.keys(F).length>0&&(V.style=F),{props:V,internalRef:void 0}}const p=CY(ee({},c,i)),o=UP(i),x=UP(c),S=t(p),M=on(S==null?void 0:S.className,n==null?void 0:n.className,u,c==null?void 0:c.className,i==null?void 0:i.className),k=ee({},S==null?void 0:S.style,n==null?void 0:n.style,c==null?void 0:c.style,i==null?void 0:i.style),L=ee({},S,n,x,o);return M.length>0&&(L.className=M),Object.keys(k).length>0&&(L.style=k),{props:L,internalRef:S.ref}}const MY=["elementType","externalSlotProps","ownerState"];function fa(e){var t;const{elementType:n,externalSlotProps:i,ownerState:c}=e,u=sn(e,MY),p=KS(i,c),{props:o,internalRef:x}=RY(ee({},u,{externalSlotProps:p})),S=xi(x,p==null?void 0:p.ref,(t=e.additionalProps)==null?void 0:t.ref);return bY(n,ee({},o,{ref:S}),c)}function AY(e){const{badgeContent:t,invisible:n=!1,max:i=99,showZero:c=!1}=e,u=q4({badgeContent:t,max:i});let p=n;n===!1&&t===0&&!c&&(p=!0);const{badgeContent:o,max:x=i}=p?u:e,S=o&&Number(o)>x?`${x}+`:o;return{badgeContent:o,invisible:p,max:x,displayValue:S}}const kY=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function PY(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function IY(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=i=>e.ownerDocument.querySelector(`input[type="radio"]${i}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function LY(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||IY(e))}function OY(e){const t=[],n=[];return Array.from(e.querySelectorAll(kY)).forEach((i,c)=>{const u=PY(i);u===-1||!LY(i)||(u===0?t.push(i):n.push({documentOrder:c,tabIndex:u,node:i}))}),n.sort((i,c)=>i.tabIndex===c.tabIndex?i.documentOrder-c.documentOrder:i.tabIndex-c.tabIndex).map(i=>i.node).concat(t)}function DY(){return!0}function zY(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:i=!1,disableRestoreFocus:c=!1,getTabbable:u=OY,isEnabled:p=DY,open:o}=e,x=X.useRef(!1),S=X.useRef(null),M=X.useRef(null),k=X.useRef(null),L=X.useRef(null),j=X.useRef(!1),F=X.useRef(null),V=xi(t.ref,F),oe=X.useRef(null);X.useEffect(()=>{!o||!F.current||(j.current=!n)},[n,o]),X.useEffect(()=>{if(!o||!F.current)return;const Z=_i(F.current);return F.current.contains(Z.activeElement)||(F.current.hasAttribute("tabIndex")||F.current.setAttribute("tabIndex","-1"),j.current&&F.current.focus()),()=>{c||(k.current&&k.current.focus&&(x.current=!0,k.current.focus()),k.current=null)}},[o]),X.useEffect(()=>{if(!o||!F.current)return;const Z=_i(F.current),Q=de=>{const{current:ke}=F;if(ke!==null){if(!Z.hasFocus()||i||!p()||x.current){x.current=!1;return}if(!ke.contains(Z.activeElement)){if(de&&L.current!==de.target||Z.activeElement!==L.current)L.current=null;else if(L.current!==null)return;if(!j.current)return;let pe=[];if((Z.activeElement===S.current||Z.activeElement===M.current)&&(pe=u(F.current)),pe.length>0){var J,G;const $e=!!((J=oe.current)!=null&&J.shiftKey&&((G=oe.current)==null?void 0:G.key)==="Tab"),Ge=pe[0],Ae=pe[pe.length-1];typeof Ge!="string"&&typeof Ae!="string"&&($e?Ae.focus():Ge.focus())}else ke.focus()}}},ae=de=>{oe.current=de,!(i||!p()||de.key!=="Tab")&&Z.activeElement===F.current&&de.shiftKey&&(x.current=!0,M.current&&M.current.focus())};Z.addEventListener("focusin",Q),Z.addEventListener("keydown",ae,!0);const ue=setInterval(()=>{Z.activeElement&&Z.activeElement.tagName==="BODY"&&Q(null)},50);return()=>{clearInterval(ue),Z.removeEventListener("focusin",Q),Z.removeEventListener("keydown",ae,!0)}},[n,i,c,p,o,u]);const B=Z=>{k.current===null&&(k.current=Z.relatedTarget),j.current=!0,L.current=Z.target;const Q=t.props.onFocus;Q&&Q(Z)},$=Z=>{k.current===null&&(k.current=Z.relatedTarget),j.current=!0};return Yt(X.Fragment,{children:[ne("div",{tabIndex:o?0:-1,onFocus:$,ref:S,"data-testid":"sentinelStart"}),X.cloneElement(t,{ref:V,onFocus:B}),ne("div",{tabIndex:o?0:-1,onFocus:$,ref:M,"data-testid":"sentinelEnd"})]})}function FY(e){return typeof e=="function"?e():e}const BY=X.forwardRef(function(t,n){const{children:i,container:c,disablePortal:u=!1}=t,[p,o]=X.useState(null),x=xi(X.isValidElement(i)?i.ref:null,n);if(al(()=>{u||o(FY(c)||document.body)},[c,u]),al(()=>{if(p&&!u)return WS(n,p),()=>{WS(n,null)}},[n,p,u]),u){if(X.isValidElement(i)){const S={ref:x};return X.cloneElement(i,S)}return ne(X.Fragment,{children:i})}return ne(X.Fragment,{children:p&&bc.createPortal(i,p)})}),NY=BY;function $Y(e){const t=_i(e);return t.body===e?Yo(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function ng(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function jP(e){return parseInt(Yo(e).getComputedStyle(e).paddingRight,10)||0}function UY(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,i=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||i}function VP(e,t,n,i,c){const u=[t,n,...i];[].forEach.call(e.children,p=>{const o=u.indexOf(p)===-1,x=!UY(p);o&&x&&ng(p,c)})}function Nw(e,t){let n=-1;return e.some((i,c)=>t(i)?(n=c,!0):!1),n}function jY(e,t){const n=[],i=e.container;if(!t.disableScrollLock){if($Y(i)){const p=W4(_i(i));n.push({value:i.style.paddingRight,property:"padding-right",el:i}),i.style.paddingRight=`${jP(i)+p}px`;const o=_i(i).querySelectorAll(".mui-fixed");[].forEach.call(o,x=>{n.push({value:x.style.paddingRight,property:"padding-right",el:x}),x.style.paddingRight=`${jP(x)+p}px`})}let u;if(i.parentNode instanceof DocumentFragment)u=_i(i).body;else{const p=i.parentElement,o=Yo(i);u=(p==null?void 0:p.nodeName)==="HTML"&&o.getComputedStyle(p).overflowY==="scroll"?p:i}n.push({value:u.style.overflow,property:"overflow",el:u},{value:u.style.overflowX,property:"overflow-x",el:u},{value:u.style.overflowY,property:"overflow-y",el:u}),u.style.overflow="hidden"}return()=>{n.forEach(({value:u,el:p,property:o})=>{u?p.style.setProperty(o,u):p.style.removeProperty(o)})}}function VY(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class GY{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,n){let i=this.modals.indexOf(t);if(i!==-1)return i;i=this.modals.length,this.modals.push(t),t.modalRef&&ng(t.modalRef,!1);const c=VY(n);VP(n,t.mount,t.modalRef,c,!0);const u=Nw(this.containers,p=>p.container===n);return u!==-1?(this.containers[u].modals.push(t),i):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:c}),i)}mount(t,n){const i=Nw(this.containers,u=>u.modals.indexOf(t)!==-1),c=this.containers[i];c.restore||(c.restore=jY(c,n))}remove(t,n=!0){const i=this.modals.indexOf(t);if(i===-1)return i;const c=Nw(this.containers,p=>p.modals.indexOf(t)!==-1),u=this.containers[c];if(u.modals.splice(u.modals.indexOf(t),1),this.modals.splice(i,1),u.modals.length===0)u.restore&&u.restore(),t.modalRef&&ng(t.modalRef,n),VP(u.container,t.mount,t.modalRef,u.hiddenSiblings,!1),this.containers.splice(c,1);else{const p=u.modals[u.modals.length-1];p.modalRef&&ng(p.modalRef,!1)}return i}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function WY(e){return Bn("MuiModal",e)}Wn("MuiModal",["root","hidden","backdrop"]);const qY=["children","closeAfterTransition","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"],HY=e=>{const{open:t,exited:n}=e;return $n({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},TY(WY))};function ZY(e){return typeof e=="function"?e():e}function XY(e){return e?e.props.hasOwnProperty("in"):!1}const KY=new GY,YY=X.forwardRef(function(t,n){var i,c;const{children:u,closeAfterTransition:p=!1,container:o,disableAutoFocus:x=!1,disableEnforceFocus:S=!1,disableEscapeKeyDown:M=!1,disablePortal:k=!1,disableRestoreFocus:L=!1,disableScrollLock:j=!1,hideBackdrop:F=!1,keepMounted:V=!1,manager:oe=KY,onBackdropClick:B,onClose:$,onKeyDown:Z,open:Q,onTransitionEnter:ae,onTransitionExited:ue,slotProps:de={},slots:ke={}}=t,J=sn(t,qY),G=oe,[pe,$e]=X.useState(!Q),Ge=X.useRef({}),Ae=X.useRef(null),Ze=X.useRef(null),Qe=xi(Ze,n),gt=XY(u),Me=(i=t["aria-hidden"])!=null?i:!0,Ce=()=>_i(Ae.current),Te=()=>(Ge.current.modalRef=Ze.current,Ge.current.mountNode=Ae.current,Ge.current),Ve=()=>{G.mount(Te(),{disableScrollLock:j}),Ze.current&&(Ze.current.scrollTop=0)},we=va(()=>{const hn=ZY(o)||Ce().body;G.add(Te(),hn),Ze.current&&Ve()}),be=X.useCallback(()=>G.isTopModal(Te()),[G]),Ue=va(hn=>{Ae.current=hn,!(!hn||!Ze.current)&&(Q&&be()?Ve():ng(Ze.current,Me))}),nt=X.useCallback(()=>{G.remove(Te(),Me)},[G,Me]);X.useEffect(()=>()=>{nt()},[nt]),X.useEffect(()=>{Q?we():(!gt||!p)&&nt()},[Q,nt,gt,p,we]);const at=ee({},t,{closeAfterTransition:p,disableAutoFocus:x,disableEnforceFocus:S,disableEscapeKeyDown:M,disablePortal:k,disableRestoreFocus:L,disableScrollLock:j,exited:pe,hideBackdrop:F,keepMounted:V}),At=HY(at),Ft=()=>{$e(!1),ae&&ae()},Rt=()=>{$e(!0),ue&&ue(),p&&nt()},Mt=hn=>{hn.target===hn.currentTarget&&(B&&B(hn),$&&$(hn,"backdropClick"))},ct=hn=>{Z&&Z(hn),!(hn.key!=="Escape"||!be())&&(M||(hn.stopPropagation(),$&&$(hn,"escapeKeyDown")))},Nt={};u.props.tabIndex===void 0&&(Nt.tabIndex="-1"),gt&&(Nt.onEnter=GS(Ft,u.props.onEnter),Nt.onExited=GS(Rt,u.props.onExited));const Ht=(c=ke.root)!=null?c:"div",ln=fa({elementType:Ht,externalSlotProps:de.root,externalForwardedProps:J,additionalProps:{ref:Qe,role:"presentation",onKeyDown:ct},className:At.root,ownerState:at}),Kt=ke.backdrop,wn=fa({elementType:Kt,externalSlotProps:de.backdrop,additionalProps:{"aria-hidden":!0,onClick:Mt,open:Q},className:At.backdrop,ownerState:at});return!V&&!Q&&(!gt||pe)?null:ne(NY,{ref:Ue,container:o,disablePortal:k,children:Yt(Ht,ee({},ln,{children:[!F&&Kt?ne(Kt,ee({},wn)):null,ne(zY,{disableEnforceFocus:S,disableAutoFocus:x,disableRestoreFocus:L,isEnabled:be,open:Q,children:X.cloneElement(u,Nt)})]}))})}),QY=YY;function JY(e){const{children:t,defer:n=!1,fallback:i=null}=e,[c,u]=X.useState(!1);return al(()=>{n||u(!0)},[n]),X.useEffect(()=>{n&&u(!0)},[n]),ne(X.Fragment,{children:c?t:i})}const eQ=2;function T5(e,t){return e-t}function _m(e,t,n){return e==null?t:Math.min(Math.max(t,e),n)}function GP(e,t){var n;const{index:i}=(n=e.reduce((c,u,p)=>{const o=Math.abs(t-u);return c===null||o<c.distance||o===c.distance?{distance:o,index:p}:c},null))!=null?n:{};return i}function ov(e,t){if(t.current!==void 0&&e.changedTouches){const n=e;for(let i=0;i<n.changedTouches.length;i+=1){const c=n.changedTouches[i];if(c.identifier===t.current)return{x:c.clientX,y:c.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function b_(e,t,n){return(e-t)*100/(n-t)}function tQ(e,t,n){return(n-t)*e+t}function nQ(e){if(Math.abs(e)<1){const n=e.toExponential().split("e-"),i=n[0].split(".")[1];return(i?i.length:0)+parseInt(n[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}function rQ(e,t,n){const i=Math.round((e-n)/t)*t+n;return Number(i.toFixed(nQ(t)))}function WP({values:e,newValue:t,index:n}){const i=e.slice();return i[n]=t,i.sort(T5)}function av({sliderRef:e,activeIndex:t,setActive:n}){var i,c;const u=_i(e.current);if(!((i=e.current)!=null&&i.contains(u.activeElement))||Number(u==null||(c=u.activeElement)==null?void 0:c.getAttribute("data-index"))!==t){var p;(p=e.current)==null||p.querySelector(`[type="range"][data-index="${t}"]`).focus()}n&&n(t)}function sv(e,t){return typeof e=="number"&&typeof t=="number"?e===t:typeof e=="object"&&typeof t=="object"?wY(e,t):!1}const iQ={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},oQ=e=>e;let lv;function $w(){return lv===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?lv=CSS.supports("touch-action","none"):lv=!0),lv}function aQ(e){const{"aria-labelledby":t,defaultValue:n,disabled:i=!1,disableSwap:c=!1,isRtl:u=!1,marks:p=!1,max:o=100,min:x=0,name:S,onChange:M,onChangeCommitted:k,orientation:L="horizontal",rootRef:j,scale:F=oQ,step:V=1,tabIndex:oe,value:B}=e,$=X.useRef(),[Z,Q]=X.useState(-1),[ae,ue]=X.useState(-1),[de,ke]=X.useState(!1),J=X.useRef(0),[G,pe]=Rg({controlled:B,default:n??x,name:"Slider"}),$e=M&&(($t,nn,Sn)=>{const mn=$t.nativeEvent||$t,vn=new mn.constructor(mn.type,mn);Object.defineProperty(vn,"target",{writable:!0,value:{value:nn,name:S}}),M(vn,nn,Sn)}),Ge=Array.isArray(G);let Ae=Ge?G.slice().sort(T5):[G];Ae=Ae.map($t=>_m($t,x,o));const Ze=p===!0&&V!==null?[...Array(Math.floor((o-x)/V)+1)].map(($t,nn)=>({value:x+V*nn})):p||[],Qe=Ze.map($t=>$t.value),{isFocusVisibleRef:gt,onBlur:Me,onFocus:Ce,ref:Te}=G4(),[Ve,we]=X.useState(-1),be=X.useRef(),Ue=xi(Te,be),nt=xi(j,Ue),at=$t=>nn=>{var Sn;const mn=Number(nn.currentTarget.getAttribute("data-index"));Ce(nn),gt.current===!0&&we(mn),ue(mn),$t==null||(Sn=$t.onFocus)==null||Sn.call($t,nn)},At=$t=>nn=>{var Sn;Me(nn),gt.current===!1&&we(-1),ue(-1),$t==null||(Sn=$t.onBlur)==null||Sn.call($t,nn)};al(()=>{if(i&&be.current.contains(document.activeElement)){var $t;($t=document.activeElement)==null||$t.blur()}},[i]),i&&Z!==-1&&Q(-1),i&&Ve!==-1&&we(-1);const Ft=$t=>nn=>{var Sn;(Sn=$t.onChange)==null||Sn.call($t,nn);const mn=Number(nn.currentTarget.getAttribute("data-index")),vn=Ae[mn],an=Qe.indexOf(vn);let Ne=nn.target.valueAsNumber;if(Ze&&V==null&&(Ne=Ne<vn?Qe[an-1]:Qe[an+1]),Ne=_m(Ne,x,o),Ze&&V==null){const Je=Qe.indexOf(Ae[mn]);Ne=Ne<Ae[mn]?Qe[Je-1]:Qe[Je+1]}if(Ge){c&&(Ne=_m(Ne,Ae[mn-1]||-1/0,Ae[mn+1]||1/0));const Je=Ne;Ne=WP({values:Ae,newValue:Ne,index:mn});let ut=mn;c||(ut=Ne.indexOf(Je)),av({sliderRef:be,activeIndex:ut})}pe(Ne),we(mn),$e&&!sv(Ne,G)&&$e(nn,Ne,mn),k&&k(nn,Ne)},Rt=X.useRef();let Mt=L;u&&L==="horizontal"&&(Mt+="-reverse");const ct=({finger:$t,move:nn=!1})=>{const{current:Sn}=be,{width:mn,height:vn,bottom:an,left:Ne}=Sn.getBoundingClientRect();let Je;Mt.indexOf("vertical")===0?Je=(an-$t.y)/vn:Je=($t.x-Ne)/mn,Mt.indexOf("-reverse")!==-1&&(Je=1-Je);let ut;if(ut=tQ(Je,x,o),V)ut=rQ(ut,V,x);else{const Qt=GP(Qe,ut);ut=Qe[Qt]}ut=_m(ut,x,o);let Ut=0;if(Ge){nn?Ut=Rt.current:Ut=GP(Ae,ut),c&&(ut=_m(ut,Ae[Ut-1]||-1/0,Ae[Ut+1]||1/0));const Qt=ut;ut=WP({values:Ae,newValue:ut,index:Ut}),c&&nn||(Ut=ut.indexOf(Qt),Rt.current=Ut)}return{newValue:ut,activeIndex:Ut}},Nt=va($t=>{const nn=ov($t,$);if(!nn)return;if(J.current+=1,$t.type==="mousemove"&&$t.buttons===0){Ht($t);return}const{newValue:Sn,activeIndex:mn}=ct({finger:nn,move:!0});av({sliderRef:be,activeIndex:mn,setActive:Q}),pe(Sn),!de&&J.current>eQ&&ke(!0),$e&&!sv(Sn,G)&&$e($t,Sn,mn)}),Ht=va($t=>{const nn=ov($t,$);if(ke(!1),!nn)return;const{newValue:Sn}=ct({finger:nn,move:!0});Q(-1),$t.type==="touchend"&&ue(-1),k&&k($t,Sn),$.current=void 0,Kt()}),ln=va($t=>{if(i)return;$w()||$t.preventDefault();const nn=$t.changedTouches[0];nn!=null&&($.current=nn.identifier);const Sn=ov($t,$);if(Sn!==!1){const{newValue:vn,activeIndex:an}=ct({finger:Sn});av({sliderRef:be,activeIndex:an,setActive:Q}),pe(vn),$e&&!sv(vn,G)&&$e($t,vn,an)}J.current=0;const mn=_i(be.current);mn.addEventListener("touchmove",Nt),mn.addEventListener("touchend",Ht)}),Kt=X.useCallback(()=>{const $t=_i(be.current);$t.removeEventListener("mousemove",Nt),$t.removeEventListener("mouseup",Ht),$t.removeEventListener("touchmove",Nt),$t.removeEventListener("touchend",Ht)},[Ht,Nt]);X.useEffect(()=>{const{current:$t}=be;return $t.addEventListener("touchstart",ln,{passive:$w()}),()=>{$t.removeEventListener("touchstart",ln,{passive:$w()}),Kt()}},[Kt,ln]),X.useEffect(()=>{i&&Kt()},[i,Kt]);const wn=$t=>nn=>{var Sn;if((Sn=$t.onMouseDown)==null||Sn.call($t,nn),i||nn.defaultPrevented||nn.button!==0)return;nn.preventDefault();const mn=ov(nn,$);if(mn!==!1){const{newValue:an,activeIndex:Ne}=ct({finger:mn});av({sliderRef:be,activeIndex:Ne,setActive:Q}),pe(an),$e&&!sv(an,G)&&$e(nn,an,Ne)}J.current=0;const vn=_i(be.current);vn.addEventListener("mousemove",Nt),vn.addEventListener("mouseup",Ht)},hn=b_(Ge?Ae[0]:x,x,o),Xn=b_(Ae[Ae.length-1],x,o)-hn,sr=($t={})=>{const nn={onMouseDown:wn($t||{})},Sn=ee({},$t,nn);return ee({ref:nt},Sn)},In=$t=>nn=>{var Sn;(Sn=$t.onMouseOver)==null||Sn.call($t,nn);const mn=Number(nn.currentTarget.getAttribute("data-index"));ue(mn)},qn=$t=>nn=>{var Sn;(Sn=$t.onMouseLeave)==null||Sn.call($t,nn),ue(-1)};return{active:Z,axis:Mt,axisProps:iQ,dragging:de,focusedThumbIndex:Ve,getHiddenInputProps:($t={})=>{var nn;const Sn={onChange:Ft($t||{}),onFocus:at($t||{}),onBlur:At($t||{})},mn=ee({},$t,Sn);return ee({tabIndex:oe,"aria-labelledby":t,"aria-orientation":L,"aria-valuemax":F(o),"aria-valuemin":F(x),name:S,type:"range",min:e.min,max:e.max,step:(nn=e.step)!=null?nn:void 0,disabled:i},mn,{style:ee({},jH,{direction:u?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:sr,getThumbProps:($t={})=>{const nn={onMouseOver:In($t||{}),onMouseLeave:qn($t||{})};return ee({},$t,nn)},marks:Ze,open:ae,range:Ge,rootRef:nt,trackLeap:Xn,trackOffset:hn,values:Ae}}const sQ=["onChange","maxRows","minRows","style","value"];function cv(e){return parseInt(e,10)||0}const lQ={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function qP(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflow}const cQ=X.forwardRef(function(t,n){const{onChange:i,maxRows:c,minRows:u=1,style:p,value:o}=t,x=sn(t,sQ),{current:S}=X.useRef(o!=null),M=X.useRef(null),k=xi(n,M),L=X.useRef(null),j=X.useRef(0),[F,V]=X.useState({outerHeightStyle:0}),oe=X.useCallback(()=>{const ae=M.current,de=Yo(ae).getComputedStyle(ae);if(de.width==="0px")return{outerHeightStyle:0};const ke=L.current;ke.style.width=de.width,ke.value=ae.value||t.placeholder||"x",ke.value.slice(-1)===`
`&&(ke.value+=" ");const J=de.boxSizing,G=cv(de.paddingBottom)+cv(de.paddingTop),pe=cv(de.borderBottomWidth)+cv(de.borderTopWidth),$e=ke.scrollHeight;ke.value="x";const Ge=ke.scrollHeight;let Ae=$e;u&&(Ae=Math.max(Number(u)*Ge,Ae)),c&&(Ae=Math.min(Number(c)*Ge,Ae)),Ae=Math.max(Ae,Ge);const Ze=Ae+(J==="border-box"?G+pe:0),Qe=Math.abs(Ae-$e)<=1;return{outerHeightStyle:Ze,overflow:Qe}},[c,u,t.placeholder]),B=(ae,ue)=>{const{outerHeightStyle:de,overflow:ke}=ue;return j.current<20&&(de>0&&Math.abs((ae.outerHeightStyle||0)-de)>1||ae.overflow!==ke)?(j.current+=1,{overflow:ke,outerHeightStyle:de}):ae},$=X.useCallback(()=>{const ae=oe();qP(ae)||V(ue=>B(ue,ae))},[oe]),Z=()=>{const ae=oe();qP(ae)||bc.flushSync(()=>{V(ue=>B(ue,ae))})};X.useEffect(()=>{const ae=tC(()=>{j.current=0,M.current&&Z()});let ue;const de=M.current,ke=Yo(de);return ke.addEventListener("resize",ae),typeof ResizeObserver<"u"&&(ue=new ResizeObserver(ae),ue.observe(de)),()=>{ae.clear(),ke.removeEventListener("resize",ae),ue&&ue.disconnect()}}),al(()=>{$()}),X.useEffect(()=>{j.current=0},[o]);const Q=ae=>{j.current=0,S||$(),i&&i(ae)};return Yt(X.Fragment,{children:[ne("textarea",ee({value:o,onChange:Q,ref:k,rows:u,style:ee({height:F.outerHeightStyle,overflow:F.overflow?"hidden":void 0},p)},x)),ne("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:L,tabIndex:-1,style:ee({},lQ.shadow,p,{padding:0})})]})}),uQ=cQ;function dQ(e){return Bn("MuiSvgIcon",e)}Wn("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const hQ=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],fQ=e=>{const{color:t,fontSize:n,classes:i}=e,c={root:["root",t!=="inherit"&&`color${St(t)}`,`fontSize${St(n)}`]};return $n(c,dQ,i)},pQ=Gt("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${St(n.color)}`],t[`fontSize${St(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var n,i,c,u,p,o,x,S,M,k,L,j,F,V,oe,B,$;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:(n=e.transitions)==null||(i=n.create)==null?void 0:i.call(n,"fill",{duration:(c=e.transitions)==null||(u=c.duration)==null?void 0:u.shorter}),fontSize:{inherit:"inherit",small:((p=e.typography)==null||(o=p.pxToRem)==null?void 0:o.call(p,20))||"1.25rem",medium:((x=e.typography)==null||(S=x.pxToRem)==null?void 0:S.call(x,24))||"1.5rem",large:((M=e.typography)==null||(k=M.pxToRem)==null?void 0:k.call(M,35))||"2.1875rem"}[t.fontSize],color:(L=(j=(e.vars||e).palette)==null||(F=j[t.color])==null?void 0:F.main)!=null?L:{action:(V=(e.vars||e).palette)==null||(oe=V.action)==null?void 0:oe.active,disabled:(B=(e.vars||e).palette)==null||($=B.action)==null?void 0:$.disabled,inherit:void 0}[t.color]}}),C5=X.forwardRef(function(t,n){const i=Un({props:t,name:"MuiSvgIcon"}),{children:c,className:u,color:p="inherit",component:o="svg",fontSize:x="medium",htmlColor:S,inheritViewBox:M=!1,titleAccess:k,viewBox:L="0 0 24 24"}=i,j=sn(i,hQ),F=ee({},i,{color:p,component:o,fontSize:x,instanceFontSize:t.fontSize,inheritViewBox:M,viewBox:L}),V={};M||(V.viewBox=L);const oe=fQ(F);return Yt(pQ,ee({as:o,className:on(oe.root,u),focusable:"false",color:S,"aria-hidden":k?void 0:!0,role:k?"img":void 0,ref:n},V,j,{ownerState:F,children:[c,k?ne("title",{children:k}):null]}))});C5.muiName="SvgIcon";const HP=C5;function oy(e,t){function n(i,c){return ne(HP,ee({"data-testid":`${t}Icon`,ref:c},i,{children:e}))}return n.muiName=HP.muiName,X.memo(X.forwardRef(n))}function YS(e,t){return YS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,c){return i.__proto__=c,i},YS(e,t)}function Oc(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,YS(e,t)}const ZP={disabled:!1},w_=Xe.createContext(null);var mQ=function(t){return t.scrollTop},zm="unmounted",Cu="exited",Ru="entering",ph="entered",QS="exiting",pl=function(e){Oc(t,e);function t(i,c){var u;u=e.call(this,i,c)||this;var p=c,o=p&&!p.isMounting?i.enter:i.appear,x;return u.appearStatus=null,i.in?o?(x=Cu,u.appearStatus=Ru):x=ph:i.unmountOnExit||i.mountOnEnter?x=zm:x=Cu,u.state={status:x},u.nextCallback=null,u}t.getDerivedStateFromProps=function(c,u){var p=c.in;return p&&u.status===zm?{status:Cu}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(c){var u=null;if(c!==this.props){var p=this.state.status;this.props.in?p!==Ru&&p!==ph&&(u=Ru):(p===Ru||p===ph)&&(u=QS)}this.updateStatus(!1,u)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var c=this.props.timeout,u,p,o;return u=p=o=c,c!=null&&typeof c!="number"&&(u=c.exit,p=c.enter,o=c.appear!==void 0?c.appear:p),{exit:u,enter:p,appear:o}},n.updateStatus=function(c,u){if(c===void 0&&(c=!1),u!==null)if(this.cancelNextCallback(),u===Ru){if(this.props.unmountOnExit||this.props.mountOnEnter){var p=this.props.nodeRef?this.props.nodeRef.current:Rh.findDOMNode(this);p&&mQ(p)}this.performEnter(c)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Cu&&this.setState({status:zm})},n.performEnter=function(c){var u=this,p=this.props.enter,o=this.context?this.context.isMounting:c,x=this.props.nodeRef?[o]:[Rh.findDOMNode(this),o],S=x[0],M=x[1],k=this.getTimeouts(),L=o?k.appear:k.enter;if(!c&&!p||ZP.disabled){this.safeSetState({status:ph},function(){u.props.onEntered(S)});return}this.props.onEnter(S,M),this.safeSetState({status:Ru},function(){u.props.onEntering(S,M),u.onTransitionEnd(L,function(){u.safeSetState({status:ph},function(){u.props.onEntered(S,M)})})})},n.performExit=function(){var c=this,u=this.props.exit,p=this.getTimeouts(),o=this.props.nodeRef?void 0:Rh.findDOMNode(this);if(!u||ZP.disabled){this.safeSetState({status:Cu},function(){c.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:QS},function(){c.props.onExiting(o),c.onTransitionEnd(p.exit,function(){c.safeSetState({status:Cu},function(){c.props.onExited(o)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(c,u){u=this.setNextCallback(u),this.setState(c,u)},n.setNextCallback=function(c){var u=this,p=!0;return this.nextCallback=function(o){p&&(p=!1,u.nextCallback=null,c(o))},this.nextCallback.cancel=function(){p=!1},this.nextCallback},n.onTransitionEnd=function(c,u){this.setNextCallback(u);var p=this.props.nodeRef?this.props.nodeRef.current:Rh.findDOMNode(this),o=c==null&&!this.props.addEndListener;if(!p||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var x=this.props.nodeRef?[this.nextCallback]:[p,this.nextCallback],S=x[0],M=x[1];this.props.addEndListener(S,M)}c!=null&&setTimeout(this.nextCallback,c)},n.render=function(){var c=this.state.status;if(c===zm)return null;var u=this.props,p=u.children;u.in,u.mountOnEnter,u.unmountOnExit,u.appear,u.enter,u.exit,u.timeout,u.addEndListener,u.onEnter,u.onEntering,u.onEntered,u.onExit,u.onExiting,u.onExited,u.nodeRef;var o=sn(u,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Xe.createElement(w_.Provider,{value:null},typeof p=="function"?p(c,o):Xe.cloneElement(Xe.Children.only(p),o))},t}(Xe.Component);pl.contextType=w_;pl.propTypes={};function dh(){}pl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:dh,onEntering:dh,onEntered:dh,onExit:dh,onExiting:dh,onExited:dh};pl.UNMOUNTED=zm;pl.EXITED=Cu;pl.ENTERING=Ru;pl.ENTERED=ph;pl.EXITING=QS;const lx=pl;function gQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xC(e,t){var n=function(u){return t&&X.isValidElement(u)?t(u):u},i=Object.create(null);return e&&X.Children.map(e,function(c){return c}).forEach(function(c){i[c.key]=n(c)}),i}function yQ(e,t){e=e||{},t=t||{};function n(M){return M in t?t[M]:e[M]}var i=Object.create(null),c=[];for(var u in e)u in t?c.length&&(i[u]=c,c=[]):c.push(u);var p,o={};for(var x in t){if(i[x])for(p=0;p<i[x].length;p++){var S=i[x][p];o[i[x][p]]=n(S)}o[x]=n(x)}for(p=0;p<c.length;p++)o[c[p]]=n(c[p]);return o}function Fu(e,t,n){return n[t]!=null?n[t]:e.props[t]}function vQ(e,t){return xC(e.children,function(n){return X.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:Fu(n,"appear",e),enter:Fu(n,"enter",e),exit:Fu(n,"exit",e)})})}function _Q(e,t,n){var i=xC(e.children),c=yQ(t,i);return Object.keys(c).forEach(function(u){var p=c[u];if(X.isValidElement(p)){var o=u in t,x=u in i,S=t[u],M=X.isValidElement(S)&&!S.props.in;x&&(!o||M)?c[u]=X.cloneElement(p,{onExited:n.bind(null,p),in:!0,exit:Fu(p,"exit",e),enter:Fu(p,"enter",e)}):!x&&o&&!M?c[u]=X.cloneElement(p,{in:!1}):x&&o&&X.isValidElement(S)&&(c[u]=X.cloneElement(p,{onExited:n.bind(null,p),in:S.props.in,exit:Fu(p,"exit",e),enter:Fu(p,"enter",e)}))}}),c}var xQ=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},bQ={component:"div",childFactory:function(t){return t}},bC=function(e){Oc(t,e);function t(i,c){var u;u=e.call(this,i,c)||this;var p=u.handleExited.bind(gQ(u));return u.state={contextValue:{isMounting:!0},handleExited:p,firstRender:!0},u}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(c,u){var p=u.children,o=u.handleExited,x=u.firstRender;return{children:x?vQ(c,o):_Q(c,p,o),firstRender:!1}},n.handleExited=function(c,u){var p=xC(this.props.children);c.key in p||(c.props.onExited&&c.props.onExited(u),this.mounted&&this.setState(function(o){var x=ee({},o.children);return delete x[c.key],{children:x}}))},n.render=function(){var c=this.props,u=c.component,p=c.childFactory,o=sn(c,["component","childFactory"]),x=this.state.contextValue,S=xQ(this.state.children).map(p);return delete o.appear,delete o.enter,delete o.exit,u===null?Xe.createElement(w_.Provider,{value:x},S):Xe.createElement(w_.Provider,{value:x},Xe.createElement(u,o,S))},t}(Xe.Component);bC.propTypes={};bC.defaultProps=bQ;const wQ=bC,cx=e=>e.scrollTop;function ll(e,t){var n,i;const{timeout:c,easing:u,style:p={}}=e;return{duration:(n=p.transitionDuration)!=null?n:typeof c=="number"?c:c[t.mode]||0,easing:(i=p.transitionTimingFunction)!=null?i:typeof u=="object"?u[t.mode]:u,delay:p.transitionDelay}}function SQ(e){return Bn("MuiPaper",e)}Wn("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const EQ=["className","component","elevation","square","variant"],TQ=e=>{const{square:t,elevation:n,variant:i,classes:c}=e,u={root:["root",i,!t&&"rounded",i==="elevation"&&`elevation${n}`]};return $n(u,SQ,c)},CQ=Gt("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(({theme:e,ownerState:t})=>{var n;return ee({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&ee({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${Gr("#fff",$P(t.elevation))}, ${Gr("#fff",$P(t.elevation))})`},e.vars&&{backgroundImage:(n=e.vars.overlays)==null?void 0:n[t.elevation]}))}),RQ=X.forwardRef(function(t,n){const i=Un({props:t,name:"MuiPaper"}),{className:c,component:u="div",elevation:p=1,square:o=!1,variant:x="elevation"}=i,S=sn(i,EQ),M=ee({},i,{component:u,elevation:p,square:o,variant:x}),k=TQ(M);return ne(CQ,ee({as:u,ownerState:M,className:on(k.root,c),ref:n},S))}),ay=RQ;function MQ(e){const{className:t,classes:n,pulsate:i=!1,rippleX:c,rippleY:u,rippleSize:p,in:o,onExited:x,timeout:S}=e,[M,k]=X.useState(!1),L=on(t,n.ripple,n.rippleVisible,i&&n.ripplePulsate),j={width:p,height:p,top:-(p/2)+u,left:-(p/2)+c},F=on(n.child,M&&n.childLeaving,i&&n.childPulsate);return!o&&!M&&k(!0),X.useEffect(()=>{if(!o&&x!=null){const V=setTimeout(x,S);return()=>{clearTimeout(V)}}},[x,o,S]),ne("span",{className:L,style:j,children:ne("span",{className:F})})}const AQ=Wn("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),pa=AQ,kQ=["center","classes","className"];let ux=e=>e,XP,KP,YP,QP;const JS=550,PQ=80,IQ=Es(XP||(XP=ux`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),LQ=Es(KP||(KP=ux`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),OQ=Es(YP||(YP=ux`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),DQ=Gt("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),zQ=Gt(MQ,{name:"MuiTouchRipple",slot:"Ripple"})(QP||(QP=ux`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),pa.rippleVisible,IQ,JS,({theme:e})=>e.transitions.easing.easeInOut,pa.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,pa.child,pa.childLeaving,LQ,JS,({theme:e})=>e.transitions.easing.easeInOut,pa.childPulsate,OQ,({theme:e})=>e.transitions.easing.easeInOut),FQ=X.forwardRef(function(t,n){const i=Un({props:t,name:"MuiTouchRipple"}),{center:c=!1,classes:u={},className:p}=i,o=sn(i,kQ),[x,S]=X.useState([]),M=X.useRef(0),k=X.useRef(null);X.useEffect(()=>{k.current&&(k.current(),k.current=null)},[x]);const L=X.useRef(!1),j=X.useRef(null),F=X.useRef(null),V=X.useRef(null);X.useEffect(()=>()=>{clearTimeout(j.current)},[]);const oe=X.useCallback(Q=>{const{pulsate:ae,rippleX:ue,rippleY:de,rippleSize:ke,cb:J}=Q;S(G=>[...G,ne(zQ,{classes:{ripple:on(u.ripple,pa.ripple),rippleVisible:on(u.rippleVisible,pa.rippleVisible),ripplePulsate:on(u.ripplePulsate,pa.ripplePulsate),child:on(u.child,pa.child),childLeaving:on(u.childLeaving,pa.childLeaving),childPulsate:on(u.childPulsate,pa.childPulsate)},timeout:JS,pulsate:ae,rippleX:ue,rippleY:de,rippleSize:ke},M.current)]),M.current+=1,k.current=J},[u]),B=X.useCallback((Q={},ae={},ue=()=>{})=>{const{pulsate:de=!1,center:ke=c||ae.pulsate,fakeElement:J=!1}=ae;if((Q==null?void 0:Q.type)==="mousedown"&&L.current){L.current=!1;return}(Q==null?void 0:Q.type)==="touchstart"&&(L.current=!0);const G=J?null:V.current,pe=G?G.getBoundingClientRect():{width:0,height:0,left:0,top:0};let $e,Ge,Ae;if(ke||Q===void 0||Q.clientX===0&&Q.clientY===0||!Q.clientX&&!Q.touches)$e=Math.round(pe.width/2),Ge=Math.round(pe.height/2);else{const{clientX:Ze,clientY:Qe}=Q.touches&&Q.touches.length>0?Q.touches[0]:Q;$e=Math.round(Ze-pe.left),Ge=Math.round(Qe-pe.top)}if(ke)Ae=Math.sqrt((2*pe.width**2+pe.height**2)/3),Ae%2===0&&(Ae+=1);else{const Ze=Math.max(Math.abs((G?G.clientWidth:0)-$e),$e)*2+2,Qe=Math.max(Math.abs((G?G.clientHeight:0)-Ge),Ge)*2+2;Ae=Math.sqrt(Ze**2+Qe**2)}Q!=null&&Q.touches?F.current===null&&(F.current=()=>{oe({pulsate:de,rippleX:$e,rippleY:Ge,rippleSize:Ae,cb:ue})},j.current=setTimeout(()=>{F.current&&(F.current(),F.current=null)},PQ)):oe({pulsate:de,rippleX:$e,rippleY:Ge,rippleSize:Ae,cb:ue})},[c,oe]),$=X.useCallback(()=>{B({},{pulsate:!0})},[B]),Z=X.useCallback((Q,ae)=>{if(clearTimeout(j.current),(Q==null?void 0:Q.type)==="touchend"&&F.current){F.current(),F.current=null,j.current=setTimeout(()=>{Z(Q,ae)});return}F.current=null,S(ue=>ue.length>0?ue.slice(1):ue),k.current=ae},[]);return X.useImperativeHandle(n,()=>({pulsate:$,start:B,stop:Z}),[$,B,Z]),ne(DQ,ee({className:on(pa.root,u.root,p),ref:V},o,{children:ne(wQ,{component:null,exit:!0,children:x})}))}),BQ=FQ;function NQ(e){return Bn("MuiButtonBase",e)}const $Q=Wn("MuiButtonBase",["root","disabled","focusVisible"]),UQ=$Q,jQ=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],VQ=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:i,classes:c}=e,p=$n({root:["root",t&&"disabled",n&&"focusVisible"]},NQ,c);return n&&i&&(p.root+=` ${i}`),p},GQ=Gt("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${UQ.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),WQ=X.forwardRef(function(t,n){const i=Un({props:t,name:"MuiButtonBase"}),{action:c,centerRipple:u=!1,children:p,className:o,component:x="button",disabled:S=!1,disableRipple:M=!1,disableTouchRipple:k=!1,focusRipple:L=!1,LinkComponent:j="a",onBlur:F,onClick:V,onContextMenu:oe,onDragLeave:B,onFocus:$,onFocusVisible:Z,onKeyDown:Q,onKeyUp:ae,onMouseDown:ue,onMouseLeave:de,onMouseUp:ke,onTouchEnd:J,onTouchMove:G,onTouchStart:pe,tabIndex:$e=0,TouchRippleProps:Ge,touchRippleRef:Ae,type:Ze}=i,Qe=sn(i,jQ),gt=X.useRef(null),Me=X.useRef(null),Ce=xi(Me,Ae),{isFocusVisibleRef:Te,onFocus:Ve,onBlur:we,ref:be}=G4(),[Ue,nt]=X.useState(!1);S&&Ue&&nt(!1),X.useImperativeHandle(c,()=>({focusVisible:()=>{nt(!0),gt.current.focus()}}),[]);const[at,At]=X.useState(!1);X.useEffect(()=>{At(!0)},[]);const Ft=at&&!M&&!S;X.useEffect(()=>{Ue&&L&&!M&&at&&Me.current.pulsate()},[M,L,Ue,at]);function Rt(an,Ne,Je=k){return va(ut=>(Ne&&Ne(ut),!Je&&Me.current&&Me.current[an](ut),!0))}const Mt=Rt("start",ue),ct=Rt("stop",oe),Nt=Rt("stop",B),Ht=Rt("stop",ke),ln=Rt("stop",an=>{Ue&&an.preventDefault(),de&&de(an)}),Kt=Rt("start",pe),wn=Rt("stop",J),hn=Rt("stop",G),Xn=Rt("stop",an=>{we(an),Te.current===!1&&nt(!1),F&&F(an)},!1),sr=va(an=>{gt.current||(gt.current=an.currentTarget),Ve(an),Te.current===!0&&(nt(!0),Z&&Z(an)),$&&$(an)}),In=()=>{const an=gt.current;return x&&x!=="button"&&!(an.tagName==="A"&&an.href)},qn=X.useRef(!1),Lr=va(an=>{L&&!qn.current&&Ue&&Me.current&&an.key===" "&&(qn.current=!0,Me.current.stop(an,()=>{Me.current.start(an)})),an.target===an.currentTarget&&In()&&an.key===" "&&an.preventDefault(),Q&&Q(an),an.target===an.currentTarget&&In()&&an.key==="Enter"&&!S&&(an.preventDefault(),V&&V(an))}),cr=va(an=>{L&&an.key===" "&&Me.current&&Ue&&!an.defaultPrevented&&(qn.current=!1,Me.current.stop(an,()=>{Me.current.pulsate(an)})),ae&&ae(an),V&&an.target===an.currentTarget&&In()&&an.key===" "&&!an.defaultPrevented&&V(an)});let $t=x;$t==="button"&&(Qe.href||Qe.to)&&($t=j);const nn={};$t==="button"?(nn.type=Ze===void 0?"button":Ze,nn.disabled=S):(!Qe.href&&!Qe.to&&(nn.role="button"),S&&(nn["aria-disabled"]=S));const Sn=xi(n,be,gt),mn=ee({},i,{centerRipple:u,component:x,disabled:S,disableRipple:M,disableTouchRipple:k,focusRipple:L,tabIndex:$e,focusVisible:Ue}),vn=VQ(mn);return Yt(GQ,ee({as:$t,className:on(vn.root,o),ownerState:mn,onBlur:Xn,onClick:V,onContextMenu:ct,onFocus:sr,onKeyDown:Lr,onKeyUp:cr,onMouseDown:Mt,onMouseLeave:ln,onMouseUp:Ht,onDragLeave:Nt,onTouchEnd:wn,onTouchMove:hn,onTouchStart:Kt,ref:Sn,tabIndex:S?-1:$e,type:Ze},nn,Qe,{children:[p,Ft?ne(BQ,ee({ref:Ce,center:u},Ge)):null]}))}),of=WQ;function qQ(e){return Bn("MuiIconButton",e)}const HQ=Wn("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),ZQ=HQ,XQ=["edge","children","className","color","disabled","disableFocusRipple","size"],KQ=e=>{const{classes:t,disabled:n,color:i,edge:c,size:u}=e,p={root:["root",n&&"disabled",i!=="default"&&`color${St(i)}`,c&&`edge${St(c)}`,`size${St(u)}`]};return $n(p,qQ,t)},YQ=Gt(of,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${St(n.color)}`],n.edge&&t[`edge${St(n.edge)}`],t[`size${St(n.size)}`]]}})(({theme:e,ownerState:t})=>ee({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Gr(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12}),({theme:e,ownerState:t})=>{var n;const i=(n=(e.vars||e).palette)==null?void 0:n[t.color];return ee({},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&t.color!=="default"&&ee({color:i==null?void 0:i.main},!t.disableRipple&&{"&:hover":ee({},i&&{backgroundColor:e.vars?`rgba(${i.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Gr(i.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),t.size==="small"&&{padding:5,fontSize:e.typography.pxToRem(18)},t.size==="large"&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${ZQ.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),QQ=X.forwardRef(function(t,n){const i=Un({props:t,name:"MuiIconButton"}),{edge:c=!1,children:u,className:p,color:o="default",disabled:x=!1,disableFocusRipple:S=!1,size:M="medium"}=i,k=sn(i,XQ),L=ee({},i,{edge:c,color:o,disabled:x,disableFocusRipple:S,size:M}),j=KQ(L);return ne(YQ,ee({className:on(j.root,p),centerRipple:!0,focusRipple:!S,disabled:x,ref:n,ownerState:L},k,{children:u}))}),Pg=QQ;function JQ(e){return Bn("MuiTypography",e)}Wn("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const eJ=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],tJ=e=>{const{align:t,gutterBottom:n,noWrap:i,paragraph:c,variant:u,classes:p}=e,o={root:["root",u,e.align!=="inherit"&&`align${St(t)}`,n&&"gutterBottom",i&&"noWrap",c&&"paragraph"]};return $n(o,JQ,p)},nJ=Gt("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${St(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>ee({margin:0},t.variant&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),JP={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},rJ={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},iJ=e=>rJ[e]||e,oJ=X.forwardRef(function(t,n){const i=Un({props:t,name:"MuiTypography"}),c=iJ(i.color),u=ty(ee({},i,{color:c})),{align:p="inherit",className:o,component:x,gutterBottom:S=!1,noWrap:M=!1,paragraph:k=!1,variant:L="body1",variantMapping:j=JP}=u,F=sn(u,eJ),V=ee({},u,{align:p,color:c,className:o,component:x,gutterBottom:S,noWrap:M,paragraph:k,variant:L,variantMapping:j}),oe=x||(k?"p":j[L]||JP[L])||"span",B=tJ(V);return ne(nJ,ee({as:oe,ref:n,ownerState:V,className:on(B.root,o)},F))}),Rr=oJ;function aJ(e){return Bn("MuiAppBar",e)}Wn("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent"]);const sJ=["className","color","enableColorOnDark","position"],lJ=e=>{const{color:t,position:n,classes:i}=e,c={root:["root",`color${St(t)}`,`position${St(n)}`]};return $n(c,aJ,i)},uv=(e,t)=>e?`${e==null?void 0:e.replace(")","")}, ${t})`:t,cJ=Gt(ay,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${St(n.position)}`],t[`color${St(n.color)}`]]}})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[900];return ee({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},t.position==="fixed"&&{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},t.position==="absolute"&&{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},t.position==="sticky"&&{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},t.position==="static"&&{position:"static"},t.position==="relative"&&{position:"relative"},!e.vars&&ee({},t.color==="default"&&{backgroundColor:n,color:e.palette.getContrastText(n)},t.color&&t.color!=="default"&&t.color!=="inherit"&&t.color!=="transparent"&&{backgroundColor:e.palette[t.color].main,color:e.palette[t.color].contrastText},t.color==="inherit"&&{color:"inherit"},e.palette.mode==="dark"&&!t.enableColorOnDark&&{backgroundColor:null,color:null},t.color==="transparent"&&ee({backgroundColor:"transparent",color:"inherit"},e.palette.mode==="dark"&&{backgroundImage:"none"})),e.vars&&ee({},t.color==="default"&&{"--AppBar-background":t.enableColorOnDark?e.vars.palette.AppBar.defaultBg:uv(e.vars.palette.AppBar.darkBg,e.vars.palette.AppBar.defaultBg),"--AppBar-color":t.enableColorOnDark?e.vars.palette.text.primary:uv(e.vars.palette.AppBar.darkColor,e.vars.palette.text.primary)},t.color&&!t.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":t.enableColorOnDark?e.vars.palette[t.color].main:uv(e.vars.palette.AppBar.darkBg,e.vars.palette[t.color].main),"--AppBar-color":t.enableColorOnDark?e.vars.palette[t.color].contrastText:uv(e.vars.palette.AppBar.darkColor,e.vars.palette[t.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:t.color==="inherit"?"inherit":"var(--AppBar-color)"},t.color==="transparent"&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),uJ=X.forwardRef(function(t,n){const i=Un({props:t,name:"MuiAppBar"}),{className:c,color:u="primary",enableColorOnDark:p=!1,position:o="fixed"}=i,x=sn(i,sJ),S=ee({},i,{color:u,position:o,enableColorOnDark:p}),M=lJ(S);return ne(cJ,ee({square:!0,component:"header",ownerState:S,elevation:4,className:on(M.root,c,o==="fixed"&&"mui-fixed"),ref:n},x))}),wC=uJ,dJ=oy(ne("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function hJ(e){return Bn("MuiChip",e)}const fJ=Wn("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),_r=fJ,pJ=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],mJ=e=>{const{classes:t,disabled:n,size:i,color:c,iconColor:u,onDelete:p,clickable:o,variant:x}=e,S={root:["root",x,n&&"disabled",`size${St(i)}`,`color${St(c)}`,o&&"clickable",o&&`clickableColor${St(c)}`,p&&"deletable",p&&`deletableColor${St(c)}`,`${x}${St(c)}`],label:["label",`label${St(i)}`],avatar:["avatar",`avatar${St(i)}`,`avatarColor${St(c)}`],icon:["icon",`icon${St(i)}`,`iconColor${St(u)}`],deleteIcon:["deleteIcon",`deleteIcon${St(i)}`,`deleteIconColor${St(c)}`,`deleteIcon${St(x)}Color${St(c)}`]};return $n(S,hJ,t)},gJ=Gt("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:i,iconColor:c,clickable:u,onDelete:p,size:o,variant:x}=n;return[{[`& .${_r.avatar}`]:t.avatar},{[`& .${_r.avatar}`]:t[`avatar${St(o)}`]},{[`& .${_r.avatar}`]:t[`avatarColor${St(i)}`]},{[`& .${_r.icon}`]:t.icon},{[`& .${_r.icon}`]:t[`icon${St(o)}`]},{[`& .${_r.icon}`]:t[`iconColor${St(c)}`]},{[`& .${_r.deleteIcon}`]:t.deleteIcon},{[`& .${_r.deleteIcon}`]:t[`deleteIcon${St(o)}`]},{[`& .${_r.deleteIcon}`]:t[`deleteIconColor${St(i)}`]},{[`& .${_r.deleteIcon}`]:t[`deleteIcon${St(x)}Color${St(i)}`]},t.root,t[`size${St(o)}`],t[`color${St(i)}`],u&&t.clickable,u&&i!=="default"&&t[`clickableColor${St(i)})`],p&&t.deletable,p&&i!=="default"&&t[`deletableColor${St(i)}`],t[x],t[`${x}${St(i)}`]]}})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return ee({maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${_r.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${_r.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:n,fontSize:e.typography.pxToRem(12)},[`& .${_r.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${_r.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${_r.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${_r.icon}`]:ee({marginLeft:5,marginRight:-6},t.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},t.iconColor===t.color&&ee({color:e.vars?e.vars.palette.Chip.defaultIconColor:n},t.color!=="default"&&{color:"inherit"})),[`& .${_r.deleteIcon}`]:ee({WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:Gr(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:Gr(e.palette.text.primary,.4)}},t.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},t.color!=="default"&&{color:e.vars?`rgba(${e.vars.palette[t.color].contrastTextChannel} / 0.7)`:Gr(e.palette[t.color].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].contrastText}})},t.size==="small"&&{height:24},t.color!=="default"&&{backgroundColor:(e.vars||e).palette[t.color].main,color:(e.vars||e).palette[t.color].contrastText},t.onDelete&&{[`&.${_r.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Gr(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},t.onDelete&&t.color!=="default"&&{[`&.${_r.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}})},({theme:e,ownerState:t})=>ee({},t.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Gr(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${_r.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Gr(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}},t.clickable&&t.color!=="default"&&{[`&:hover, &.${_r.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}}),({theme:e,ownerState:t})=>ee({},t.variant==="outlined"&&{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${_r.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${_r.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${_r.avatar}`]:{marginLeft:4},[`& .${_r.avatarSmall}`]:{marginLeft:2},[`& .${_r.icon}`]:{marginLeft:4},[`& .${_r.iconSmall}`]:{marginLeft:2},[`& .${_r.deleteIcon}`]:{marginRight:5},[`& .${_r.deleteIconSmall}`]:{marginRight:3}},t.variant==="outlined"&&t.color!=="default"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:Gr(e.palette[t.color].main,.7)}`,[`&.${_r.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Gr(e.palette[t.color].main,e.palette.action.hoverOpacity)},[`&.${_r.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.focusOpacity})`:Gr(e.palette[t.color].main,e.palette.action.focusOpacity)},[`& .${_r.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:Gr(e.palette[t.color].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].main}}})),yJ=Gt("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:i}=n;return[t.label,t[`label${St(i)}`]]}})(({ownerState:e})=>ee({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},e.size==="small"&&{paddingLeft:8,paddingRight:8}));function eI(e){return e.key==="Backspace"||e.key==="Delete"}const vJ=X.forwardRef(function(t,n){const i=Un({props:t,name:"MuiChip"}),{avatar:c,className:u,clickable:p,color:o="default",component:x,deleteIcon:S,disabled:M=!1,icon:k,label:L,onClick:j,onDelete:F,onKeyDown:V,onKeyUp:oe,size:B="medium",variant:$="filled",tabIndex:Z,skipFocusWhenDisabled:Q=!1}=i,ae=sn(i,pJ),ue=X.useRef(null),de=xi(ue,n),ke=Ce=>{Ce.stopPropagation(),F&&F(Ce)},J=Ce=>{Ce.currentTarget===Ce.target&&eI(Ce)&&Ce.preventDefault(),V&&V(Ce)},G=Ce=>{Ce.currentTarget===Ce.target&&(F&&eI(Ce)?F(Ce):Ce.key==="Escape"&&ue.current&&ue.current.blur()),oe&&oe(Ce)},pe=p!==!1&&j?!0:p,$e=pe||F?of:x||"div",Ge=ee({},i,{component:$e,disabled:M,size:B,color:o,iconColor:X.isValidElement(k)&&k.props.color||o,onDelete:!!F,clickable:pe,variant:$}),Ae=mJ(Ge),Ze=$e===of?ee({component:x||"div",focusVisibleClassName:Ae.focusVisible},F&&{disableRipple:!0}):{};let Qe=null;F&&(Qe=S&&X.isValidElement(S)?X.cloneElement(S,{className:on(S.props.className,Ae.deleteIcon),onClick:ke}):ne(dJ,{className:on(Ae.deleteIcon),onClick:ke}));let gt=null;c&&X.isValidElement(c)&&(gt=X.cloneElement(c,{className:on(Ae.avatar,c.props.className)}));let Me=null;return k&&X.isValidElement(k)&&(Me=X.cloneElement(k,{className:on(Ae.icon,k.props.className)})),Yt(gJ,ee({as:$e,className:on(Ae.root,u),disabled:pe&&M?!0:void 0,onClick:j,onKeyDown:J,onKeyUp:G,ref:de,tabIndex:Q&&M?-1:Z,ownerState:Ge},Ze,ae,{children:[gt||Me,ne(yJ,{className:on(Ae.label),ownerState:Ge,children:L}),Qe]}))}),_J=vJ;function Dc({props:e,states:t,muiFormControl:n}){return t.reduce((i,c)=>(i[c]=e[c],n&&typeof e[c]>"u"&&(i[c]=n[c]),i),{})}const xJ=X.createContext(void 0),SC=xJ;function ml(){return X.useContext(SC)}function EC(e){return ne(GX,ee({},e,{defaultTheme:ax,themeId:Yu}))}function tI(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function S_(e,t=!1){return e&&(tI(e.value)&&e.value!==""||t&&tI(e.defaultValue)&&e.defaultValue!=="")}function bJ(e){return e.startAdornment}function wJ(e){return Bn("MuiInputBase",e)}const SJ=Wn("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),af=SJ,EJ=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],dx=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${St(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},hx=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},TJ=e=>{const{classes:t,color:n,disabled:i,error:c,endAdornment:u,focused:p,formControl:o,fullWidth:x,hiddenLabel:S,multiline:M,readOnly:k,size:L,startAdornment:j,type:F}=e,V={root:["root",`color${St(n)}`,i&&"disabled",c&&"error",x&&"fullWidth",p&&"focused",o&&"formControl",L==="small"&&"sizeSmall",M&&"multiline",j&&"adornedStart",u&&"adornedEnd",S&&"hiddenLabel",k&&"readOnly"],input:["input",i&&"disabled",F==="search"&&"inputTypeSearch",M&&"inputMultiline",L==="small"&&"inputSizeSmall",S&&"inputHiddenLabel",j&&"inputAdornedStart",u&&"inputAdornedEnd",k&&"readOnly"]};return $n(V,wJ,t)},fx=Gt("div",{name:"MuiInputBase",slot:"Root",overridesResolver:dx})(({theme:e,ownerState:t})=>ee({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${af.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},t.multiline&&ee({padding:"4px 0 5px"},t.size==="small"&&{paddingTop:1}),t.fullWidth&&{width:"100%"})),px=Gt("input",{name:"MuiInputBase",slot:"Input",overridesResolver:hx})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light",i=ee({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),c={opacity:"0 !important"},u=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return ee({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${af.formControl} &`]:{"&::-webkit-input-placeholder":c,"&::-moz-placeholder":c,"&:-ms-input-placeholder":c,"&::-ms-input-placeholder":c,"&:focus::-webkit-input-placeholder":u,"&:focus::-moz-placeholder":u,"&:focus:-ms-input-placeholder":u,"&:focus::-ms-input-placeholder":u},[`&.${af.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},t.size==="small"&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},t.type==="search"&&{MozAppearance:"textfield"})}),CJ=ne(EC,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),RJ=X.forwardRef(function(t,n){var i;const c=Un({props:t,name:"MuiInputBase"}),{"aria-describedby":u,autoComplete:p,autoFocus:o,className:x,components:S={},componentsProps:M={},defaultValue:k,disabled:L,disableInjectingGlobalStyles:j,endAdornment:F,fullWidth:V=!1,id:oe,inputComponent:B="input",inputProps:$={},inputRef:Z,maxRows:Q,minRows:ae,multiline:ue=!1,name:de,onBlur:ke,onChange:J,onClick:G,onFocus:pe,onKeyDown:$e,onKeyUp:Ge,placeholder:Ae,readOnly:Ze,renderSuffix:Qe,rows:gt,slotProps:Me={},slots:Ce={},startAdornment:Te,type:Ve="text",value:we}=c,be=sn(c,EJ),Ue=$.value!=null?$.value:we,{current:nt}=X.useRef(Ue!=null),at=X.useRef(),At=X.useCallback(vn=>{},[]),Ft=xi(at,Z,$.ref,At),[Rt,Mt]=X.useState(!1),ct=ml(),Nt=Dc({props:c,muiFormControl:ct,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Nt.focused=ct?ct.focused:Rt,X.useEffect(()=>{!ct&&L&&Rt&&(Mt(!1),ke&&ke())},[ct,L,Rt,ke]);const Ht=ct&&ct.onFilled,ln=ct&&ct.onEmpty,Kt=X.useCallback(vn=>{S_(vn)?Ht&&Ht():ln&&ln()},[Ht,ln]);al(()=>{nt&&Kt({value:Ue})},[Ue,Kt,nt]);const wn=vn=>{if(Nt.disabled){vn.stopPropagation();return}pe&&pe(vn),$.onFocus&&$.onFocus(vn),ct&&ct.onFocus?ct.onFocus(vn):Mt(!0)},hn=vn=>{ke&&ke(vn),$.onBlur&&$.onBlur(vn),ct&&ct.onBlur?ct.onBlur(vn):Mt(!1)},Xn=(vn,...an)=>{if(!nt){const Ne=vn.target||at.current;if(Ne==null)throw new Error(wc(1));Kt({value:Ne.value})}$.onChange&&$.onChange(vn,...an),J&&J(vn,...an)};X.useEffect(()=>{Kt(at.current)},[]);const sr=vn=>{at.current&&vn.currentTarget===vn.target&&at.current.focus(),G&&!Nt.disabled&&G(vn)};let In=B,qn=$;ue&&In==="input"&&(gt?qn=ee({type:void 0,minRows:gt,maxRows:gt},qn):qn=ee({type:void 0,maxRows:Q,minRows:ae},qn),In=uQ);const Lr=vn=>{Kt(vn.animationName==="mui-auto-fill-cancel"?at.current:{value:"x"})};X.useEffect(()=>{ct&&ct.setAdornedStart(!!Te)},[ct,Te]);const cr=ee({},c,{color:Nt.color||"primary",disabled:Nt.disabled,endAdornment:F,error:Nt.error,focused:Nt.focused,formControl:ct,fullWidth:V,hiddenLabel:Nt.hiddenLabel,multiline:ue,size:Nt.size,startAdornment:Te,type:Ve}),$t=TJ(cr),nn=Ce.root||S.Root||fx,Sn=Me.root||M.root||{},mn=Ce.input||S.Input||px;return qn=ee({},qn,(i=Me.input)!=null?i:M.input),Yt(X.Fragment,{children:[!j&&CJ,Yt(nn,ee({},Sn,!yc(nn)&&{ownerState:ee({},cr,Sn.ownerState)},{ref:n,onClick:sr},be,{className:on($t.root,Sn.className,x,Ze&&"MuiInputBase-readOnly"),children:[Te,ne(SC.Provider,{value:null,children:ne(mn,ee({ownerState:cr,"aria-invalid":Nt.error,"aria-describedby":u,autoComplete:p,autoFocus:o,defaultValue:k,disabled:Nt.disabled,id:oe,onAnimationStart:Lr,name:de,placeholder:Ae,readOnly:Ze,required:Nt.required,rows:gt,value:Ue,onKeyDown:$e,onKeyUp:Ge,type:Ve},qn,!yc(mn)&&{as:In,ownerState:ee({},cr,qn.ownerState)},{ref:Ft,className:on($t.input,qn.className,Ze&&"MuiInputBase-readOnly"),onBlur:hn,onChange:Xn,onFocus:wn}))}),F,Qe?Qe(ee({},Nt,{startAdornment:Te})):null]}))]})}),TC=RJ;function MJ(e){return Bn("MuiInput",e)}const AJ=ee({},af,Wn("MuiInput",["root","underline","input"])),xm=AJ;function kJ(e){return Bn("MuiOutlinedInput",e)}const PJ=ee({},af,Wn("MuiOutlinedInput",["root","notchedOutline","input"])),ql=PJ;function IJ(e){return Bn("MuiFilledInput",e)}const LJ=ee({},af,Wn("MuiFilledInput",["root","underline","input"])),Su=LJ,OJ=oy(ne("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),DJ=oy(ne("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function zJ(e){return Bn("MuiAvatar",e)}Wn("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const FJ=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],BJ=e=>{const{classes:t,variant:n,colorDefault:i}=e;return $n({root:["root",n,i&&"colorDefault"],img:["img"],fallback:["fallback"]},zJ,t)},NJ=Gt("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})(({theme:e,ownerState:t})=>ee({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},t.variant==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius},t.variant==="square"&&{borderRadius:0},t.colorDefault&&ee({color:(e.vars||e).palette.background.default},e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[600]}))),$J=Gt("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),UJ=Gt(DJ,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function jJ({crossOrigin:e,referrerPolicy:t,src:n,srcSet:i}){const[c,u]=X.useState(!1);return X.useEffect(()=>{if(!n&&!i)return;u(!1);let p=!0;const o=new Image;return o.onload=()=>{p&&u("loaded")},o.onerror=()=>{p&&u("error")},o.crossOrigin=e,o.referrerPolicy=t,o.src=n,i&&(o.srcset=i),()=>{p=!1}},[e,t,n,i]),c}const VJ=X.forwardRef(function(t,n){const i=Un({props:t,name:"MuiAvatar"}),{alt:c,children:u,className:p,component:o="div",imgProps:x,sizes:S,src:M,srcSet:k,variant:L="circular"}=i,j=sn(i,FJ);let F=null;const V=jJ(ee({},x,{src:M,srcSet:k})),oe=M||k,B=oe&&V!=="error",$=ee({},i,{colorDefault:!B,component:o,variant:L}),Z=BJ($);return B?F=ne($J,ee({alt:c,src:M,srcSet:k,sizes:S,ownerState:$,className:Z.img},x)):u!=null?F=u:oe&&c?F=c[0]:F=ne(UJ,{ownerState:$,className:Z.fallback}),ne(NJ,ee({as:o,ownerState:$,className:on(Z.root,p),ref:n},j,{children:F}))}),GJ=VJ,WJ=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],qJ={entering:{opacity:1},entered:{opacity:1}},HJ=X.forwardRef(function(t,n){const i=Gi(),c={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:u,appear:p=!0,children:o,easing:x,in:S,onEnter:M,onEntered:k,onEntering:L,onExit:j,onExited:F,onExiting:V,style:oe,timeout:B=c,TransitionComponent:$=lx}=t,Z=sn(t,WJ),Q=X.useRef(null),ae=xi(Q,o.ref,n),ue=Ae=>Ze=>{if(Ae){const Qe=Q.current;Ze===void 0?Ae(Qe):Ae(Qe,Ze)}},de=ue(L),ke=ue((Ae,Ze)=>{cx(Ae);const Qe=ll({style:oe,timeout:B,easing:x},{mode:"enter"});Ae.style.webkitTransition=i.transitions.create("opacity",Qe),Ae.style.transition=i.transitions.create("opacity",Qe),M&&M(Ae,Ze)}),J=ue(k),G=ue(V),pe=ue(Ae=>{const Ze=ll({style:oe,timeout:B,easing:x},{mode:"exit"});Ae.style.webkitTransition=i.transitions.create("opacity",Ze),Ae.style.transition=i.transitions.create("opacity",Ze),j&&j(Ae)}),$e=ue(F);return ne($,ee({appear:p,in:S,nodeRef:Q,onEnter:ke,onEntered:J,onEntering:de,onExit:pe,onExited:$e,onExiting:G,addEndListener:Ae=>{u&&u(Q.current,Ae)},timeout:B},Z,{children:(Ae,Ze)=>X.cloneElement(o,ee({style:ee({opacity:0,visibility:Ae==="exited"&&!S?"hidden":void 0},qJ[Ae],oe,o.props.style),ref:ae},Ze))}))}),ZJ=HJ;function XJ(e){return Bn("MuiBackdrop",e)}Wn("MuiBackdrop",["root","invisible"]);const KJ=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],YJ=e=>{const{classes:t,invisible:n}=e;return $n({root:["root",n&&"invisible"]},XJ,t)},QJ=Gt("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})(({ownerState:e})=>ee({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})),JJ=X.forwardRef(function(t,n){var i,c,u;const p=Un({props:t,name:"MuiBackdrop"}),{children:o,className:x,component:S="div",components:M={},componentsProps:k={},invisible:L=!1,open:j,slotProps:F={},slots:V={},TransitionComponent:oe=ZJ,transitionDuration:B}=p,$=sn(p,KJ),Z=ee({},p,{component:S,invisible:L}),Q=YJ(Z),ae=(i=F.root)!=null?i:k.root;return ne(oe,ee({in:j,timeout:B},$,{children:ne(QJ,ee({"aria-hidden":!0},ae,{as:(c=(u=V.root)!=null?u:M.Root)!=null?c:S,className:on(Q.root,x,ae==null?void 0:ae.className),ownerState:ee({},Z,ae==null?void 0:ae.ownerState),classes:Q,ref:n,children:o}))}))}),eee=JJ;function tee(e){return Bn("MuiBadge",e)}const nee=Wn("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),Hl=nee,ree=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],Uw=10,jw=4,iee=e=>{const{color:t,anchorOrigin:n,invisible:i,overlap:c,variant:u,classes:p={}}=e,o={root:["root"],badge:["badge",u,i&&"invisible",`anchorOrigin${St(n.vertical)}${St(n.horizontal)}`,`anchorOrigin${St(n.vertical)}${St(n.horizontal)}${St(c)}`,`overlap${St(c)}`,t!=="default"&&`color${St(t)}`]};return $n(o,tee,p)},oee=Gt("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),aee=Gt("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.badge,t[n.variant],t[`anchorOrigin${St(n.anchorOrigin.vertical)}${St(n.anchorOrigin.horizontal)}${St(n.overlap)}`],n.color!=="default"&&t[`color${St(n.color)}`],n.invisible&&t.invisible]}})(({theme:e,ownerState:t})=>ee({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:Uw*2,lineHeight:1,padding:"0 6px",height:Uw*2,borderRadius:Uw,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen})},t.color!=="default"&&{backgroundColor:(e.vars||e).palette[t.color].main,color:(e.vars||e).palette[t.color].contrastText},t.variant==="dot"&&{borderRadius:jw,height:jw*2,minWidth:jw*2,padding:0},t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="rectangular"&&{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Hl.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="rectangular"&&{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Hl.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="rectangular"&&{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Hl.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="rectangular"&&{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Hl.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="circular"&&{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Hl.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="circular"&&{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Hl.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="circular"&&{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Hl.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="circular"&&{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Hl.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},t.invisible&&{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})})),see=X.forwardRef(function(t,n){var i,c,u,p,o,x;const S=Un({props:t,name:"MuiBadge"}),{anchorOrigin:M={vertical:"top",horizontal:"right"},className:k,component:L,components:j={},componentsProps:F={},children:V,overlap:oe="rectangular",color:B="default",invisible:$=!1,max:Z=99,badgeContent:Q,slots:ae,slotProps:ue,showZero:de=!1,variant:ke="standard"}=S,J=sn(S,ree),{badgeContent:G,invisible:pe,max:$e,displayValue:Ge}=AY({max:Z,invisible:$,badgeContent:Q,showZero:de}),Ae=q4({anchorOrigin:M,color:B,overlap:oe,variant:ke,badgeContent:Q}),Ze=pe||G==null&&ke!=="dot",{color:Qe=B,overlap:gt=oe,anchorOrigin:Me=M,variant:Ce=ke}=Ze?Ae:S,Te=Ce!=="dot"?Ge:void 0,Ve=ee({},S,{badgeContent:G,invisible:Ze,max:$e,displayValue:Te,showZero:de,anchorOrigin:Me,color:Qe,overlap:gt,variant:Ce}),we=iee(Ve),be=(i=(c=ae==null?void 0:ae.root)!=null?c:j.Root)!=null?i:oee,Ue=(u=(p=ae==null?void 0:ae.badge)!=null?p:j.Badge)!=null?u:aee,nt=(o=ue==null?void 0:ue.root)!=null?o:F.root,at=(x=ue==null?void 0:ue.badge)!=null?x:F.badge,At=fa({elementType:be,externalSlotProps:nt,externalForwardedProps:J,additionalProps:{ref:n,as:L},ownerState:Ve,className:on(nt==null?void 0:nt.className,we.root,k)}),Ft=fa({elementType:Ue,externalSlotProps:at,ownerState:Ve,className:on(we.badge,at==null?void 0:at.className)});return Yt(be,ee({},At,{children:[V,ne(Ue,ee({},Ft,{children:Te}))]}))}),lee=see,cee=fl(),uee=ZX({themeId:Yu,defaultTheme:cee,defaultClassName:"MuiBox-root",generateClassName:H4.generate}),xn=uee;function dee(e){return Bn("MuiButton",e)}const hee=Wn("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),dv=hee,fee=X.createContext({}),pee=fee,mee=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],gee=e=>{const{color:t,disableElevation:n,fullWidth:i,size:c,variant:u,classes:p}=e,o={root:["root",u,`${u}${St(t)}`,`size${St(c)}`,`${u}Size${St(c)}`,t==="inherit"&&"colorInherit",n&&"disableElevation",i&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${St(c)}`],endIcon:["endIcon",`iconSize${St(c)}`]},x=$n(o,dee,p);return ee({},p,x)},R5=e=>ee({},e.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},e.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},e.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),yee=Gt(of,{shouldForwardProp:e=>Sa(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${St(n.color)}`],t[`size${St(n.size)}`],t[`${n.variant}Size${St(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})(({theme:e,ownerState:t})=>{var n,i;const c=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],u=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return ee({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":ee({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:Gr(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="text"&&t.color!=="inherit"&&{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Gr(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="outlined"&&t.color!=="inherit"&&{border:`1px solid ${(e.vars||e).palette[t.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Gr(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="contained"&&{backgroundColor:e.vars?e.vars.palette.Button.inheritContainedHoverBg:u,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},t.variant==="contained"&&t.color!=="inherit"&&{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}),"&:active":ee({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${dv.focusVisible}`]:ee({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${dv.disabled}`]:ee({color:(e.vars||e).palette.action.disabled},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},t.variant==="contained"&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},t.variant==="text"&&{padding:"6px 8px"},t.variant==="text"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main},t.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},t.variant==="outlined"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${Gr(e.palette[t.color].main,.5)}`},t.variant==="contained"&&{color:e.vars?e.vars.palette.text.primary:(n=(i=e.palette).getContrastText)==null?void 0:n.call(i,e.palette.grey[300]),backgroundColor:e.vars?e.vars.palette.Button.inheritContainedBg:c,boxShadow:(e.vars||e).shadows[2]},t.variant==="contained"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main},t.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},t.size==="small"&&t.variant==="text"&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="text"&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="outlined"&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="outlined"&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="contained"&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="contained"&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})},({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${dv.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${dv.disabled}`]:{boxShadow:"none"}}),vee=Gt("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${St(n.size)}`]]}})(({ownerState:e})=>ee({display:"inherit",marginRight:8,marginLeft:-4},e.size==="small"&&{marginLeft:-2},R5(e))),_ee=Gt("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${St(n.size)}`]]}})(({ownerState:e})=>ee({display:"inherit",marginRight:-4,marginLeft:8},e.size==="small"&&{marginRight:-2},R5(e))),xee=X.forwardRef(function(t,n){const i=X.useContext(pee),c=nC(i,t),u=Un({props:c,name:"MuiButton"}),{children:p,color:o="primary",component:x="button",className:S,disabled:M=!1,disableElevation:k=!1,disableFocusRipple:L=!1,endIcon:j,focusVisibleClassName:F,fullWidth:V=!1,size:oe="medium",startIcon:B,type:$,variant:Z="text"}=u,Q=sn(u,mee),ae=ee({},u,{color:o,component:x,disabled:M,disableElevation:k,disableFocusRipple:L,fullWidth:V,size:oe,type:$,variant:Z}),ue=gee(ae),de=B&&ne(vee,{className:ue.startIcon,ownerState:ae,children:B}),ke=j&&ne(_ee,{className:ue.endIcon,ownerState:ae,children:j});return Yt(yee,ee({ownerState:ae,className:on(i.className,ue.root,S),component:x,disabled:M,focusRipple:!L,focusVisibleClassName:on(ue.focusVisible,F),ref:n,type:$},Q,{classes:ue,children:[de,p,ke]}))}),cl=xee;function bee(e){return Bn("PrivateSwitchBase",e)}Wn("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const wee=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],See=e=>{const{classes:t,checked:n,disabled:i,edge:c}=e,u={root:["root",n&&"checked",i&&"disabled",c&&`edge${St(c)}`],input:["input"]};return $n(u,bee,t)},Eee=Gt(of)(({ownerState:e})=>ee({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),Tee=Gt("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Cee=X.forwardRef(function(t,n){const{autoFocus:i,checked:c,checkedIcon:u,className:p,defaultChecked:o,disabled:x,disableFocusRipple:S=!1,edge:M=!1,icon:k,id:L,inputProps:j,inputRef:F,name:V,onBlur:oe,onChange:B,onFocus:$,readOnly:Z,required:Q=!1,tabIndex:ae,type:ue,value:de}=t,ke=sn(t,wee),[J,G]=Rg({controlled:c,default:!!o,name:"SwitchBase",state:"checked"}),pe=ml(),$e=Ce=>{$&&$(Ce),pe&&pe.onFocus&&pe.onFocus(Ce)},Ge=Ce=>{oe&&oe(Ce),pe&&pe.onBlur&&pe.onBlur(Ce)},Ae=Ce=>{if(Ce.nativeEvent.defaultPrevented)return;const Te=Ce.target.checked;G(Te),B&&B(Ce,Te)};let Ze=x;pe&&typeof Ze>"u"&&(Ze=pe.disabled);const Qe=ue==="checkbox"||ue==="radio",gt=ee({},t,{checked:J,disabled:Ze,disableFocusRipple:S,edge:M}),Me=See(gt);return Yt(Eee,ee({component:"span",className:on(Me.root,p),centerRipple:!0,focusRipple:!S,disabled:Ze,tabIndex:null,role:void 0,onFocus:$e,onBlur:Ge,ownerState:gt,ref:n},ke,{children:[ne(Tee,ee({autoFocus:i,checked:c,defaultChecked:o,className:Me.input,disabled:Ze,id:Qe?L:void 0,name:V,onChange:Ae,readOnly:Z,ref:F,required:Q,ownerState:gt,tabIndex:ae,type:ue},ue==="checkbox"&&de===void 0?{}:{value:de},j)),J?u:k]}))}),Ree=Cee;function Mee(e){return Bn("MuiCircularProgress",e)}Wn("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Aee=["className","color","disableShrink","size","style","thickness","value","variant"];let mx=e=>e,nI,rI,iI,oI;const Zl=44,kee=Es(nI||(nI=mx`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),Pee=Es(rI||(rI=mx`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),Iee=e=>{const{classes:t,variant:n,color:i,disableShrink:c}=e,u={root:["root",n,`color${St(i)}`],svg:["svg"],circle:["circle",`circle${St(n)}`,c&&"circleDisableShrink"]};return $n(u,Mee,t)},Lee=Gt("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${St(n.color)}`]]}})(({ownerState:e,theme:t})=>ee({display:"inline-block"},e.variant==="determinate"&&{transition:t.transitions.create("transform")},e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main}),({ownerState:e})=>e.variant==="indeterminate"&&Sc(iI||(iI=mx`
      animation: ${0} 1.4s linear infinite;
    `),kee)),Oee=Gt("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),Dee=Gt("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${St(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(({ownerState:e,theme:t})=>ee({stroke:"currentColor"},e.variant==="determinate"&&{transition:t.transitions.create("stroke-dashoffset")},e.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink&&Sc(oI||(oI=mx`
      animation: ${0} 1.4s ease-in-out infinite;
    `),Pee)),zee=X.forwardRef(function(t,n){const i=Un({props:t,name:"MuiCircularProgress"}),{className:c,color:u="primary",disableShrink:p=!1,size:o=40,style:x,thickness:S=3.6,value:M=0,variant:k="indeterminate"}=i,L=sn(i,Aee),j=ee({},i,{color:u,disableShrink:p,size:o,thickness:S,value:M,variant:k}),F=Iee(j),V={},oe={},B={};if(k==="determinate"){const $=2*Math.PI*((Zl-S)/2);V.strokeDasharray=$.toFixed(3),B["aria-valuenow"]=Math.round(M),V.strokeDashoffset=`${((100-M)/100*$).toFixed(3)}px`,oe.transform="rotate(-90deg)"}return ne(Lee,ee({className:on(F.root,c),style:ee({width:o,height:o},oe,x),ownerState:j,ref:n,role:"progressbar"},B,L,{children:ne(Oee,{className:F.svg,ownerState:j,viewBox:`${Zl/2} ${Zl/2} ${Zl} ${Zl}`,children:ne(Dee,{className:F.circle,style:V,ownerState:j,cx:Zl,cy:Zl,r:(Zl-S)/2,fill:"none",strokeWidth:S})})}))}),Fee=zee,Bee=_K({createStyledComponent:Gt("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${St(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>Un({props:e,name:"MuiContainer"})}),Nee=Bee,$ee=(e,t)=>ee({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},t&&!e.vars&&{colorScheme:e.palette.mode}),Uee=e=>ee({color:(e.vars||e).palette.text.primary},e.typography.body1,{backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),jee=(e,t=!1)=>{var n,i;const c={};t&&e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([o,x])=>{var S;c[e.getColorSchemeSelector(o).replace(/\s*&/,"")]={colorScheme:(S=x.palette)==null?void 0:S.mode}});let u=ee({html:$ee(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:ee({margin:0},Uee(e),{"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}})},c);const p=(n=e.components)==null||(i=n.MuiCssBaseline)==null?void 0:i.styleOverrides;return p&&(u=[u,p]),u};function M5(e){const t=Un({props:e,name:"MuiCssBaseline"}),{children:n,enableColorScheme:i=!1}=t;return Yt(X.Fragment,{children:[ne(EC,{styles:c=>jee(c,i)}),n]})}const Vee=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","open","slotProps","slots","theme"],Gee=Gt("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(({theme:e,ownerState:t})=>ee({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"})),Wee=Gt(eee,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),qee=X.forwardRef(function(t,n){var i,c,u,p,o,x;const S=Un({name:"MuiModal",props:t}),{BackdropComponent:M=Wee,BackdropProps:k,classes:L,className:j,closeAfterTransition:F=!1,children:V,container:oe,component:B,components:$={},componentsProps:Z={},disableAutoFocus:Q=!1,disableEnforceFocus:ae=!1,disableEscapeKeyDown:ue=!1,disablePortal:de=!1,disableRestoreFocus:ke=!1,disableScrollLock:J=!1,hideBackdrop:G=!1,keepMounted:pe=!1,onBackdropClick:$e,onClose:Ge,open:Ae,slotProps:Ze,slots:Qe,theme:gt}=S,Me=sn(S,Vee),[Ce,Te]=X.useState(!0),Ve={container:oe,closeAfterTransition:F,disableAutoFocus:Q,disableEnforceFocus:ae,disableEscapeKeyDown:ue,disablePortal:de,disableRestoreFocus:ke,disableScrollLock:J,hideBackdrop:G,keepMounted:pe,onBackdropClick:$e,onClose:Ge,open:Ae},we=ee({},S,Ve,{exited:Ce}),be=(i=(c=Qe==null?void 0:Qe.root)!=null?c:$.Root)!=null?i:Gee,Ue=(u=(p=Qe==null?void 0:Qe.backdrop)!=null?p:$.Backdrop)!=null?u:M,nt=(o=Ze==null?void 0:Ze.root)!=null?o:Z.root,at=(x=Ze==null?void 0:Ze.backdrop)!=null?x:Z.backdrop;return ne(QY,ee({slots:{root:be,backdrop:Ue},slotProps:{root:()=>ee({},KS(nt,we),!yc(be)&&{as:B,theme:gt},{className:on(j,nt==null?void 0:nt.className,L==null?void 0:L.root,!we.open&&we.exited&&(L==null?void 0:L.hidden))}),backdrop:()=>ee({},k,KS(at,we),{className:on(at==null?void 0:at.className,L==null?void 0:L.backdrop)})},onTransitionEnter:()=>Te(!1),onTransitionExited:()=>Te(!0),ref:n},Me,Ve,{children:V}))}),A5=qee,Hee=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Zee(e,t,n){const i=t.getBoundingClientRect(),c=n&&n.getBoundingClientRect(),u=Yo(t);let p;if(t.fakeTransform)p=t.fakeTransform;else{const S=u.getComputedStyle(t);p=S.getPropertyValue("-webkit-transform")||S.getPropertyValue("transform")}let o=0,x=0;if(p&&p!=="none"&&typeof p=="string"){const S=p.split("(")[1].split(")")[0].split(",");o=parseInt(S[4],10),x=parseInt(S[5],10)}return e==="left"?c?`translateX(${c.right+o-i.left}px)`:`translateX(${u.innerWidth+o-i.left}px)`:e==="right"?c?`translateX(-${i.right-c.left-o}px)`:`translateX(-${i.left+i.width-o}px)`:e==="up"?c?`translateY(${c.bottom+x-i.top}px)`:`translateY(${u.innerHeight+x-i.top}px)`:c?`translateY(-${i.top-c.top+i.height-x}px)`:`translateY(-${i.top+i.height-x}px)`}function Xee(e){return typeof e=="function"?e():e}function hv(e,t,n){const i=Xee(n),c=Zee(e,t,i);c&&(t.style.webkitTransform=c,t.style.transform=c)}const Kee=X.forwardRef(function(t,n){const i=Gi(),c={enter:i.transitions.easing.easeOut,exit:i.transitions.easing.sharp},u={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:p,appear:o=!0,children:x,container:S,direction:M="down",easing:k=c,in:L,onEnter:j,onEntered:F,onEntering:V,onExit:oe,onExited:B,onExiting:$,style:Z,timeout:Q=u,TransitionComponent:ae=lx}=t,ue=sn(t,Hee),de=X.useRef(null),ke=xi(x.ref,de,n),J=Me=>Ce=>{Me&&(Ce===void 0?Me(de.current):Me(de.current,Ce))},G=J((Me,Ce)=>{hv(M,Me,S),cx(Me),j&&j(Me,Ce)}),pe=J((Me,Ce)=>{const Te=ll({timeout:Q,style:Z,easing:k},{mode:"enter"});Me.style.webkitTransition=i.transitions.create("-webkit-transform",ee({},Te)),Me.style.transition=i.transitions.create("transform",ee({},Te)),Me.style.webkitTransform="none",Me.style.transform="none",V&&V(Me,Ce)}),$e=J(F),Ge=J($),Ae=J(Me=>{const Ce=ll({timeout:Q,style:Z,easing:k},{mode:"exit"});Me.style.webkitTransition=i.transitions.create("-webkit-transform",Ce),Me.style.transition=i.transitions.create("transform",Ce),hv(M,Me,S),oe&&oe(Me)}),Ze=J(Me=>{Me.style.webkitTransition="",Me.style.transition="",B&&B(Me)}),Qe=Me=>{p&&p(de.current,Me)},gt=X.useCallback(()=>{de.current&&hv(M,de.current,S)},[M,S]);return X.useEffect(()=>{if(L||M==="down"||M==="right")return;const Me=tC(()=>{de.current&&hv(M,de.current,S)}),Ce=Yo(de.current);return Ce.addEventListener("resize",Me),()=>{Me.clear(),Ce.removeEventListener("resize",Me)}},[M,L,S]),X.useEffect(()=>{L||gt()},[L,gt]),ne(ae,ee({nodeRef:de,onEnter:G,onEntered:$e,onEntering:pe,onExit:Ae,onExited:Ze,onExiting:Ge,addEndListener:Qe,appear:o,in:L,timeout:Q},ue,{children:(Me,Ce)=>X.cloneElement(x,ee({ref:ke,style:ee({visibility:Me==="exited"&&!L?"hidden":void 0},Z,x.props.style)},Ce))}))}),Yee=Kee;function Qee(e){return Bn("MuiDrawer",e)}Wn("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const Jee=["BackdropProps"],ete=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],k5=(e,t)=>{const{ownerState:n}=e;return[t.root,(n.variant==="permanent"||n.variant==="persistent")&&t.docked,t.modal]},tte=e=>{const{classes:t,anchor:n,variant:i}=e,c={root:["root"],docked:[(i==="permanent"||i==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${St(n)}`,i!=="temporary"&&`paperAnchorDocked${St(n)}`]};return $n(c,Qee,t)},nte=Gt(A5,{name:"MuiDrawer",slot:"Root",overridesResolver:k5})(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer})),aI=Gt("div",{shouldForwardProp:Sa,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:k5})({flex:"0 0 auto"}),rte=Gt(ay,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`paperAnchor${St(n.anchor)}`],n.variant!=="temporary"&&t[`paperAnchorDocked${St(n.anchor)}`]]}})(({theme:e,ownerState:t})=>ee({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},t.anchor==="left"&&{left:0},t.anchor==="top"&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},t.anchor==="right"&&{right:0},t.anchor==="bottom"&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},t.anchor==="left"&&t.variant!=="temporary"&&{borderRight:`1px solid ${(e.vars||e).palette.divider}`},t.anchor==="top"&&t.variant!=="temporary"&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`},t.anchor==="right"&&t.variant!=="temporary"&&{borderLeft:`1px solid ${(e.vars||e).palette.divider}`},t.anchor==="bottom"&&t.variant!=="temporary"&&{borderTop:`1px solid ${(e.vars||e).palette.divider}`})),P5={left:"right",right:"left",top:"down",bottom:"up"};function Pu(e){return["left","right"].indexOf(e)!==-1}function Fm(e,t){return e.direction==="rtl"&&Pu(t)?P5[t]:t}const ite=X.forwardRef(function(t,n){const i=Un({props:t,name:"MuiDrawer"}),c=Gi(),u={enter:c.transitions.duration.enteringScreen,exit:c.transitions.duration.leavingScreen},{anchor:p="left",BackdropProps:o,children:x,className:S,elevation:M=16,hideBackdrop:k=!1,ModalProps:{BackdropProps:L}={},onClose:j,open:F=!1,PaperProps:V={},SlideProps:oe,TransitionComponent:B=Yee,transitionDuration:$=u,variant:Z="temporary"}=i,Q=sn(i.ModalProps,Jee),ae=sn(i,ete),ue=X.useRef(!1);X.useEffect(()=>{ue.current=!0},[]);const de=Fm(c,p),J=ee({},i,{anchor:p,elevation:M,open:F,variant:Z},ae),G=tte(J),pe=ne(rte,ee({elevation:Z==="temporary"?M:0,square:!0},V,{className:on(G.paper,V.className),ownerState:J,children:x}));if(Z==="permanent")return ne(aI,ee({className:on(G.root,G.docked,S),ownerState:J,ref:n},ae,{children:pe}));const $e=ne(B,ee({in:F,direction:P5[de],timeout:$,appear:ue.current},oe,{children:pe}));return Z==="persistent"?ne(aI,ee({className:on(G.root,G.docked,S),ownerState:J,ref:n},ae,{children:$e})):ne(nte,ee({BackdropProps:ee({},o,L,{transitionDuration:$}),className:on(G.root,G.modal,S),open:F,ownerState:J,onClose:j,hideBackdrop:k,ref:n},ae,Q,{children:$e}))}),ote=ite;function ate(e){return Bn("MuiFab",e)}const ste=Wn("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),sI=ste,lte=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],cte=e=>{const{color:t,variant:n,classes:i,size:c}=e,u={root:["root",n,`size${St(c)}`,t==="inherit"?"colorInherit":t]},p=$n(u,ate,i);return ee({},i,p)},ute=Gt(of,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>Sa(e)||e==="classes",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${St(n.size)}`],n.color==="inherit"&&t.colorInherit,t[St(n.size)],t[n.color]]}})(({theme:e,ownerState:t})=>{var n,i;return ee({},e.typography.button,{minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.text.primary:(n=(i=e.palette).getContrastText)==null?void 0:n.call(i,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${sI.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]}},t.size==="small"&&{width:40,height:40},t.size==="medium"&&{width:48,height:48},t.variant==="extended"&&{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},t.variant==="extended"&&t.size==="small"&&{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34},t.variant==="extended"&&t.size==="medium"&&{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40},t.color==="inherit"&&{color:"inherit"})},({theme:e,ownerState:t})=>ee({},t.color!=="inherit"&&t.color!=="default"&&(e.vars||e).palette[t.color]!=null&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}}),({theme:e})=>({[`&.${sI.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}})),dte=X.forwardRef(function(t,n){const i=Un({props:t,name:"MuiFab"}),{children:c,className:u,color:p="default",component:o="button",disabled:x=!1,disableFocusRipple:S=!1,focusVisibleClassName:M,size:k="large",variant:L="circular"}=i,j=sn(i,lte),F=ee({},i,{color:p,component:o,disabled:x,disableFocusRipple:S,size:k,variant:L}),V=cte(F);return ne(ute,ee({className:on(V.root,u),component:o,disabled:x,focusRipple:!S,focusVisibleClassName:on(V.focusVisible,M),ownerState:F,ref:n},j,{classes:V,children:c}))}),hte=dte,fte=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],pte=e=>{const{classes:t,disableUnderline:n}=e,c=$n({root:["root",!n&&"underline"],input:["input"]},IJ,t);return ee({},t,c)},mte=Gt(fx,{shouldForwardProp:e=>Sa(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...dx(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{var n;const i=e.palette.mode==="light",c=i?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",u=i?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",p=i?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",o=i?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return ee({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:u,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:p,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:u}},[`&.${Su.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:u},[`&.${Su.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:o}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(n=(e.vars||e).palette[t.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Su.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Su.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:c}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Su.disabled}, .${Su.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${Su.disabled}:before`]:{borderBottomStyle:"dotted"}},t.startAdornment&&{paddingLeft:12},t.endAdornment&&{paddingRight:12},t.multiline&&ee({padding:"25px 12px 8px"},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17}))}),gte=Gt(px,{name:"MuiFilledInput",slot:"Input",overridesResolver:hx})(({theme:e,ownerState:t})=>ee({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9})),I5=X.forwardRef(function(t,n){var i,c,u,p;const o=Un({props:t,name:"MuiFilledInput"}),{components:x={},componentsProps:S,fullWidth:M=!1,inputComponent:k="input",multiline:L=!1,slotProps:j,slots:F={},type:V="text"}=o,oe=sn(o,fte),B=ee({},o,{fullWidth:M,inputComponent:k,multiline:L,type:V}),$=pte(o),Z={root:{ownerState:B},input:{ownerState:B}},Q=j??S?zo(j??S,Z):Z,ae=(i=(c=F.root)!=null?c:x.Root)!=null?i:mte,ue=(u=(p=F.input)!=null?p:x.Input)!=null?u:gte;return ne(TC,ee({slots:{root:ae,input:ue},componentsProps:Q,fullWidth:M,inputComponent:k,multiline:L,ref:n,type:V},oe,{classes:$}))});I5.muiName="Input";const L5=I5;function yte(e){return Bn("MuiFormControl",e)}Wn("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const vte=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],_te=e=>{const{classes:t,margin:n,fullWidth:i}=e,c={root:["root",n!=="none"&&`margin${St(n)}`,i&&"fullWidth"]};return $n(c,yte,t)},xte=Gt("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>ee({},t.root,t[`margin${St(e.margin)}`],e.fullWidth&&t.fullWidth)})(({ownerState:e})=>ee({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},e.margin==="normal"&&{marginTop:16,marginBottom:8},e.margin==="dense"&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})),bte=X.forwardRef(function(t,n){const i=Un({props:t,name:"MuiFormControl"}),{children:c,className:u,color:p="primary",component:o="div",disabled:x=!1,error:S=!1,focused:M,fullWidth:k=!1,hiddenLabel:L=!1,margin:j="none",required:F=!1,size:V="medium",variant:oe="outlined"}=i,B=sn(i,vte),$=ee({},i,{color:p,component:o,disabled:x,error:S,fullWidth:k,hiddenLabel:L,margin:j,required:F,size:V,variant:oe}),Z=_te($),[Q,ae]=X.useState(()=>{let Ge=!1;return c&&X.Children.forEach(c,Ae=>{if(!zv(Ae,["Input","Select"]))return;const Ze=zv(Ae,["Select"])?Ae.props.input:Ae;Ze&&bJ(Ze.props)&&(Ge=!0)}),Ge}),[ue,de]=X.useState(()=>{let Ge=!1;return c&&X.Children.forEach(c,Ae=>{zv(Ae,["Input","Select"])&&(S_(Ae.props,!0)||S_(Ae.props.inputProps,!0))&&(Ge=!0)}),Ge}),[ke,J]=X.useState(!1);x&&ke&&J(!1);const G=M!==void 0&&!x?M:ke;let pe;const $e=X.useMemo(()=>({adornedStart:Q,setAdornedStart:ae,color:p,disabled:x,error:S,filled:ue,focused:G,fullWidth:k,hiddenLabel:L,size:V,onBlur:()=>{J(!1)},onEmpty:()=>{de(!1)},onFilled:()=>{de(!0)},onFocus:()=>{J(!0)},registerEffect:pe,required:F,variant:oe}),[Q,p,x,S,ue,G,k,L,pe,F,V,oe]);return ne(SC.Provider,{value:$e,children:ne(xte,ee({as:o,ownerState:$,className:on(Z.root,u),ref:n},B,{children:c}))})}),wte=bte;function Ste(e){return Bn("MuiFormControlLabel",e)}const Ete=Wn("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Bm=Ete,Tte=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Cte=e=>{const{classes:t,disabled:n,labelPlacement:i,error:c,required:u}=e,p={root:["root",n&&"disabled",`labelPlacement${St(i)}`,c&&"error",u&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",c&&"error"]};return $n(p,Ste,t)},Rte=Gt("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Bm.label}`]:t.label},t.root,t[`labelPlacement${St(n.labelPlacement)}`]]}})(({theme:e,ownerState:t})=>ee({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Bm.disabled}`]:{cursor:"default"}},t.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},t.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},t.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${Bm.label}`]:{[`&.${Bm.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),Mte=Gt("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${Bm.error}`]:{color:(e.vars||e).palette.error.main}})),Ate=X.forwardRef(function(t,n){var i,c;const u=Un({props:t,name:"MuiFormControlLabel"}),{className:p,componentsProps:o={},control:x,disabled:S,disableTypography:M,label:k,labelPlacement:L="end",required:j,slotProps:F={}}=u,V=sn(u,Tte),oe=ml(),B=(i=S??x.props.disabled)!=null?i:oe==null?void 0:oe.disabled,$=j??x.props.required,Z={disabled:B,required:$};["checked","name","onChange","value","inputRef"].forEach(J=>{typeof x.props[J]>"u"&&typeof u[J]<"u"&&(Z[J]=u[J])});const Q=Dc({props:u,muiFormControl:oe,states:["error"]}),ae=ee({},u,{disabled:B,labelPlacement:L,required:$,error:Q.error}),ue=Cte(ae),de=(c=F.typography)!=null?c:o.typography;let ke=k;return ke!=null&&ke.type!==Rr&&!M&&(ke=ne(Rr,ee({component:"span"},de,{className:on(ue.label,de==null?void 0:de.className),children:ke}))),Yt(Rte,ee({className:on(ue.root,p),ownerState:ae,ref:n},V,{children:[X.cloneElement(x,Z),ke,$&&Yt(Mte,{ownerState:ae,"aria-hidden":!0,className:ue.asterisk,children:[" ","*"]})]}))}),Vw=Ate;function kte(e){return Bn("MuiFormGroup",e)}Wn("MuiFormGroup",["root","row","error"]);const Pte=["className","row"],Ite=e=>{const{classes:t,row:n,error:i}=e;return $n({root:["root",n&&"row",i&&"error"]},kte,t)},Lte=Gt("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.row&&t.row]}})(({ownerState:e})=>ee({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),Ote=X.forwardRef(function(t,n){const i=Un({props:t,name:"MuiFormGroup"}),{className:c,row:u=!1}=i,p=sn(i,Pte),o=ml(),x=Dc({props:i,muiFormControl:o,states:["error"]}),S=ee({},i,{row:u,error:x.error}),M=Ite(S);return ne(Lte,ee({className:on(M.root,c),ownerState:S,ref:n},p))}),Dte=Ote;function zte(e){return Bn("MuiFormHelperText",e)}const Fte=Wn("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),lI=Fte;var cI;const Bte=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Nte=e=>{const{classes:t,contained:n,size:i,disabled:c,error:u,filled:p,focused:o,required:x}=e,S={root:["root",c&&"disabled",u&&"error",i&&`size${St(i)}`,n&&"contained",o&&"focused",p&&"filled",x&&"required"]};return $n(S,zte,t)},$te=Gt("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${St(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(({theme:e,ownerState:t})=>ee({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${lI.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${lI.error}`]:{color:(e.vars||e).palette.error.main}},t.size==="small"&&{marginTop:4},t.contained&&{marginLeft:14,marginRight:14})),Ute=X.forwardRef(function(t,n){const i=Un({props:t,name:"MuiFormHelperText"}),{children:c,className:u,component:p="p"}=i,o=sn(i,Bte),x=ml(),S=Dc({props:i,muiFormControl:x,states:["variant","size","disabled","error","filled","focused","required"]}),M=ee({},i,{component:p,contained:S.variant==="filled"||S.variant==="outlined",variant:S.variant,size:S.size,disabled:S.disabled,error:S.error,filled:S.filled,focused:S.focused,required:S.required}),k=Nte(M);return ne($te,ee({as:p,ownerState:M,className:on(k.root,u),ref:n},o,{children:c===" "?cI||(cI=ne("span",{className:"notranslate",children:"​"})):c}))}),jte=Ute;function Vte(e){return Bn("MuiFormLabel",e)}const Gte=Wn("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),rg=Gte,Wte=["children","className","color","component","disabled","error","filled","focused","required"],qte=e=>{const{classes:t,color:n,focused:i,disabled:c,error:u,filled:p,required:o}=e,x={root:["root",`color${St(n)}`,c&&"disabled",u&&"error",p&&"filled",i&&"focused",o&&"required"],asterisk:["asterisk",u&&"error"]};return $n(x,Vte,t)},Hte=Gt("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>ee({},t.root,e.color==="secondary"&&t.colorSecondary,e.filled&&t.filled)})(({theme:e,ownerState:t})=>ee({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${rg.focused}`]:{color:(e.vars||e).palette[t.color].main},[`&.${rg.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${rg.error}`]:{color:(e.vars||e).palette.error.main}})),Zte=Gt("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${rg.error}`]:{color:(e.vars||e).palette.error.main}})),Xte=X.forwardRef(function(t,n){const i=Un({props:t,name:"MuiFormLabel"}),{children:c,className:u,component:p="label"}=i,o=sn(i,Wte),x=ml(),S=Dc({props:i,muiFormControl:x,states:["color","required","focused","disabled","error","filled"]}),M=ee({},i,{color:S.color||"primary",component:p,disabled:S.disabled,error:S.error,filled:S.filled,focused:S.focused,required:S.required}),k=qte(M);return Yt(Hte,ee({as:p,ownerState:M,className:on(k.root,u),ref:n},o,{children:[c,S.required&&Yt(Zte,{ownerState:M,"aria-hidden":!0,className:k.asterisk,children:[" ","*"]})]}))}),Kte=Xte,Yte=X.createContext(),uI=Yte;function Qte(e){return Bn("MuiGrid",e)}const Jte=[0,1,2,3,4,5,6,7,8,9,10],ene=["column-reverse","column","row-reverse","row"],tne=["nowrap","wrap-reverse","wrap"],bm=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],nne=Wn("MuiGrid",["root","container","item","zeroMinWidth",...Jte.map(e=>`spacing-xs-${e}`),...ene.map(e=>`direction-xs-${e}`),...tne.map(e=>`wrap-xs-${e}`),...bm.map(e=>`grid-xs-${e}`),...bm.map(e=>`grid-sm-${e}`),...bm.map(e=>`grid-md-${e}`),...bm.map(e=>`grid-lg-${e}`),...bm.map(e=>`grid-xl-${e}`)]),Ig=nne,rne=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function jh(e){const t=parseFloat(e);return`${t}${String(e).replace(String(t),"")||"px"}`}function ine({theme:e,ownerState:t}){let n;return e.breakpoints.keys.reduce((i,c)=>{let u={};if(t[c]&&(n=t[c]),!n)return i;if(n===!0)u={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(n==="auto")u={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const p=Uu({values:t.columns,breakpoints:e.breakpoints.values}),o=typeof p=="object"?p[c]:p;if(o==null)return i;const x=`${Math.round(n/o*1e8)/1e6}%`;let S={};if(t.container&&t.item&&t.columnSpacing!==0){const M=e.spacing(t.columnSpacing);if(M!=="0px"){const k=`calc(${x} + ${jh(M)})`;S={flexBasis:k,maxWidth:k}}}u=ee({flexBasis:x,flexGrow:0,maxWidth:x},S)}return e.breakpoints.values[c]===0?Object.assign(i,u):i[e.breakpoints.up(c)]=u,i},{})}function one({theme:e,ownerState:t}){const n=Uu({values:t.direction,breakpoints:e.breakpoints.values});return No({theme:e},n,i=>{const c={flexDirection:i};return i.indexOf("column")===0&&(c[`& > .${Ig.item}`]={maxWidth:"none"}),c})}function O5({breakpoints:e,values:t}){let n="";Object.keys(t).forEach(c=>{n===""&&t[c]!==0&&(n=c)});const i=Object.keys(e).sort((c,u)=>e[c]-e[u]);return i.slice(0,i.indexOf(n))}function ane({theme:e,ownerState:t}){const{container:n,rowSpacing:i}=t;let c={};if(n&&i!==0){const u=Uu({values:i,breakpoints:e.breakpoints.values});let p;typeof u=="object"&&(p=O5({breakpoints:e.breakpoints.values,values:u})),c=No({theme:e},u,(o,x)=>{var S;const M=e.spacing(o);return M!=="0px"?{marginTop:`-${jh(M)}`,[`& > .${Ig.item}`]:{paddingTop:jh(M)}}:(S=p)!=null&&S.includes(x)?{}:{marginTop:0,[`& > .${Ig.item}`]:{paddingTop:0}}})}return c}function sne({theme:e,ownerState:t}){const{container:n,columnSpacing:i}=t;let c={};if(n&&i!==0){const u=Uu({values:i,breakpoints:e.breakpoints.values});let p;typeof u=="object"&&(p=O5({breakpoints:e.breakpoints.values,values:u})),c=No({theme:e},u,(o,x)=>{var S;const M=e.spacing(o);return M!=="0px"?{width:`calc(100% + ${jh(M)})`,marginLeft:`-${jh(M)}`,[`& > .${Ig.item}`]:{paddingLeft:jh(M)}}:(S=p)!=null&&S.includes(x)?{}:{width:"100%",marginLeft:0,[`& > .${Ig.item}`]:{paddingLeft:0}}})}return c}function lne(e,t,n={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[n[`spacing-xs-${String(e)}`]];const i=[];return t.forEach(c=>{const u=e[c];Number(u)>0&&i.push(n[`spacing-${c}-${String(u)}`])}),i}const cne=Gt("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{container:i,direction:c,item:u,spacing:p,wrap:o,zeroMinWidth:x,breakpoints:S}=n;let M=[];i&&(M=lne(p,S,t));const k=[];return S.forEach(L=>{const j=n[L];j&&k.push(t[`grid-${L}-${String(j)}`])}),[t.root,i&&t.container,u&&t.item,x&&t.zeroMinWidth,...M,c!=="row"&&t[`direction-xs-${String(c)}`],o!=="wrap"&&t[`wrap-xs-${String(o)}`],...k]}})(({ownerState:e})=>ee({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},e.wrap!=="wrap"&&{flexWrap:e.wrap}),one,ane,sne,ine);function une(e,t){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const n=[];return t.forEach(i=>{const c=e[i];if(Number(c)>0){const u=`spacing-${i}-${String(c)}`;n.push(u)}}),n}const dne=e=>{const{classes:t,container:n,direction:i,item:c,spacing:u,wrap:p,zeroMinWidth:o,breakpoints:x}=e;let S=[];n&&(S=une(u,x));const M=[];x.forEach(L=>{const j=e[L];j&&M.push(`grid-${L}-${String(j)}`)});const k={root:["root",n&&"container",c&&"item",o&&"zeroMinWidth",...S,i!=="row"&&`direction-xs-${String(i)}`,p!=="wrap"&&`wrap-xs-${String(p)}`,...M]};return $n(k,Qte,t)},hne=X.forwardRef(function(t,n){const i=Un({props:t,name:"MuiGrid"}),{breakpoints:c}=Gi(),u=ty(i),{className:p,columns:o,columnSpacing:x,component:S="div",container:M=!1,direction:k="row",item:L=!1,rowSpacing:j,spacing:F=0,wrap:V="wrap",zeroMinWidth:oe=!1}=u,B=sn(u,rne),$=j||F,Z=x||F,Q=X.useContext(uI),ae=M?o||12:Q,ue={},de=ee({},B);c.keys.forEach(G=>{B[G]!=null&&(ue[G]=B[G],delete de[G])});const ke=ee({},u,{columns:ae,container:M,direction:k,item:L,rowSpacing:$,columnSpacing:Z,wrap:V,zeroMinWidth:oe,spacing:F},ue,{breakpoints:c.keys}),J=dne(ke);return ne(uI.Provider,{value:ae,children:ne(cne,ee({ownerState:ke,className:on(J.root,p),as:S,ref:n},de))})}),Ks=hne,fne=DK({createStyledComponent:Gt("div",{name:"MuiGrid2",slot:"Root",overridesResolver:(e,t)=>t.root}),componentName:"MuiGrid2",useThemeProps:e=>Un({props:e,name:"MuiGrid2"})}),tc=fne,pne=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function eE(e){return`scale(${e}, ${e**2})`}const mne={entering:{opacity:1,transform:eE(1)},entered:{opacity:1,transform:"none"}},Gw=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),D5=X.forwardRef(function(t,n){const{addEndListener:i,appear:c=!0,children:u,easing:p,in:o,onEnter:x,onEntered:S,onEntering:M,onExit:k,onExited:L,onExiting:j,style:F,timeout:V="auto",TransitionComponent:oe=lx}=t,B=sn(t,pne),$=X.useRef(),Z=X.useRef(),Q=Gi(),ae=X.useRef(null),ue=xi(ae,u.ref,n),de=Ze=>Qe=>{if(Ze){const gt=ae.current;Qe===void 0?Ze(gt):Ze(gt,Qe)}},ke=de(M),J=de((Ze,Qe)=>{cx(Ze);const{duration:gt,delay:Me,easing:Ce}=ll({style:F,timeout:V,easing:p},{mode:"enter"});let Te;V==="auto"?(Te=Q.transitions.getAutoHeightDuration(Ze.clientHeight),Z.current=Te):Te=gt,Ze.style.transition=[Q.transitions.create("opacity",{duration:Te,delay:Me}),Q.transitions.create("transform",{duration:Gw?Te:Te*.666,delay:Me,easing:Ce})].join(","),x&&x(Ze,Qe)}),G=de(S),pe=de(j),$e=de(Ze=>{const{duration:Qe,delay:gt,easing:Me}=ll({style:F,timeout:V,easing:p},{mode:"exit"});let Ce;V==="auto"?(Ce=Q.transitions.getAutoHeightDuration(Ze.clientHeight),Z.current=Ce):Ce=Qe,Ze.style.transition=[Q.transitions.create("opacity",{duration:Ce,delay:gt}),Q.transitions.create("transform",{duration:Gw?Ce:Ce*.666,delay:Gw?gt:gt||Ce*.333,easing:Me})].join(","),Ze.style.opacity=0,Ze.style.transform=eE(.75),k&&k(Ze)}),Ge=de(L),Ae=Ze=>{V==="auto"&&($.current=setTimeout(Ze,Z.current||0)),i&&i(ae.current,Ze)};return X.useEffect(()=>()=>{clearTimeout($.current)},[]),ne(oe,ee({appear:c,in:o,nodeRef:ae,onEnter:J,onEntered:G,onEntering:ke,onExit:$e,onExited:Ge,onExiting:pe,addEndListener:Ae,timeout:V==="auto"?null:V},B,{children:(Ze,Qe)=>X.cloneElement(u,ee({style:ee({opacity:0,transform:eE(.75),visibility:Ze==="exited"&&!o?"hidden":void 0},mne[Ze],F,u.props.style),ref:ue},Qe))}))});D5.muiSupportAuto=!0;const gne=D5;function yne(e){return Bn("MuiIcon",e)}Wn("MuiIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const vne=["baseClassName","className","color","component","fontSize"],_ne=e=>{const{color:t,fontSize:n,classes:i}=e,c={root:["root",t!=="inherit"&&`color${St(t)}`,`fontSize${St(n)}`]};return $n(c,yne,i)},xne=Gt("span",{name:"MuiIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${St(n.color)}`],t[`fontSize${St(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>({userSelect:"none",width:"1em",height:"1em",overflow:"hidden",display:"inline-block",textAlign:"center",flexShrink:0,fontSize:{inherit:"inherit",small:e.typography.pxToRem(20),medium:e.typography.pxToRem(24),large:e.typography.pxToRem(36)}[t.fontSize],color:{primary:(e.vars||e).palette.primary.main,secondary:(e.vars||e).palette.secondary.main,info:(e.vars||e).palette.info.main,success:(e.vars||e).palette.success.main,warning:(e.vars||e).palette.warning.main,action:(e.vars||e).palette.action.active,error:(e.vars||e).palette.error.main,disabled:(e.vars||e).palette.action.disabled,inherit:void 0}[t.color]})),z5=X.forwardRef(function(t,n){const i=Un({props:t,name:"MuiIcon"}),{baseClassName:c="material-icons",className:u,color:p="inherit",component:o="span",fontSize:x="medium"}=i,S=sn(i,vne),M=ee({},i,{baseClassName:c,color:p,component:o,fontSize:x}),k=_ne(M);return ne(xne,ee({as:o,className:on(c,"notranslate",k.root,u),ownerState:M,"aria-hidden":!0,ref:n},S))});z5.muiName="Icon";const bne=z5,wne=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],Sne=e=>{const{classes:t,disableUnderline:n}=e,c=$n({root:["root",!n&&"underline"],input:["input"]},MJ,t);return ee({},t,c)},Ene=Gt(fx,{shouldForwardProp:e=>Sa(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...dx(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{let i=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(i=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),ee({position:"relative"},t.formControl&&{"label + &":{marginTop:16}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(e.vars||e).palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${xm.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${xm.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${xm.disabled}, .${xm.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${i}`}},[`&.${xm.disabled}:before`]:{borderBottomStyle:"dotted"}})}),Tne=Gt(px,{name:"MuiInput",slot:"Input",overridesResolver:hx})({}),F5=X.forwardRef(function(t,n){var i,c,u,p;const o=Un({props:t,name:"MuiInput"}),{disableUnderline:x,components:S={},componentsProps:M,fullWidth:k=!1,inputComponent:L="input",multiline:j=!1,slotProps:F,slots:V={},type:oe="text"}=o,B=sn(o,wne),$=Sne(o),Q={root:{ownerState:{disableUnderline:x}}},ae=F??M?zo(F??M,Q):Q,ue=(i=(c=V.root)!=null?c:S.Root)!=null?i:Ene,de=(u=(p=V.input)!=null?p:S.Input)!=null?u:Tne;return ne(TC,ee({slots:{root:ue,input:de},slotProps:ae,fullWidth:k,inputComponent:L,multiline:j,ref:n,type:oe},B,{classes:$}))});F5.muiName="Input";const B5=F5;function Cne(e){return Bn("MuiInputLabel",e)}Wn("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Rne=["disableAnimation","margin","shrink","variant","className"],Mne=e=>{const{classes:t,formControl:n,size:i,shrink:c,disableAnimation:u,variant:p,required:o}=e,S=$n({root:["root",n&&"formControl",!u&&"animated",c&&"shrink",i==="small"&&"sizeSmall",p],asterisk:[o&&"asterisk"]},Cne,t);return ee({},t,S)},Ane=Gt(Kte,{shouldForwardProp:e=>Sa(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${rg.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,t[n.variant]]}})(({theme:e,ownerState:t})=>ee({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},t.size==="small"&&{transform:"translate(0, 17px) scale(1)"},t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!t.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},t.variant==="filled"&&ee({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},t.shrink&&ee({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},t.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),t.variant==="outlined"&&ee({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},t.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),kne=X.forwardRef(function(t,n){const i=Un({name:"MuiInputLabel",props:t}),{disableAnimation:c=!1,shrink:u,className:p}=i,o=sn(i,Rne),x=ml();let S=u;typeof S>"u"&&x&&(S=x.filled||x.focused||x.adornedStart);const M=Dc({props:i,muiFormControl:x,states:["size","variant","required"]}),k=ee({},i,{disableAnimation:c,formControl:x,shrink:S,size:M.size,variant:M.variant,required:M.required}),L=Mne(k);return ne(Ane,ee({"data-shrink":S,ownerState:k,ref:n,className:on(L.root,p)},o,{classes:L}))}),Pne=kne;function Ine(e){return Bn("MuiLinearProgress",e)}Wn("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const Lne=["className","color","value","valueBuffer","variant"];let _f=e=>e,dI,hI,fI,pI,mI,gI;const tE=4,One=Es(dI||(dI=_f`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),Dne=Es(hI||(hI=_f`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),zne=Es(fI||(fI=_f`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),Fne=e=>{const{classes:t,variant:n,color:i}=e,c={root:["root",`color${St(i)}`,n],dashed:["dashed",`dashedColor${St(i)}`],bar1:["bar",`barColor${St(i)}`,(n==="indeterminate"||n==="query")&&"bar1Indeterminate",n==="determinate"&&"bar1Determinate",n==="buffer"&&"bar1Buffer"],bar2:["bar",n!=="buffer"&&`barColor${St(i)}`,n==="buffer"&&`color${St(i)}`,(n==="indeterminate"||n==="query")&&"bar2Indeterminate",n==="buffer"&&"bar2Buffer"]};return $n(c,Ine,t)},CC=(e,t)=>t==="inherit"?"currentColor":e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:e.palette.mode==="light"?yC(e.palette[t].main,.62):gC(e.palette[t].main,.5),Bne=Gt("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${St(n.color)}`],t[n.variant]]}})(({ownerState:e,theme:t})=>ee({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:CC(t,e.color)},e.color==="inherit"&&e.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},e.variant==="buffer"&&{backgroundColor:"transparent"},e.variant==="query"&&{transform:"rotate(180deg)"})),Nne=Gt("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.dashed,t[`dashedColor${St(n.color)}`]]}})(({ownerState:e,theme:t})=>{const n=CC(t,e.color);return ee({position:"absolute",marginTop:0,height:"100%",width:"100%"},e.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},Sc(pI||(pI=_f`
    animation: ${0} 3s infinite linear;
  `),zne)),$ne=Gt("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${St(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&t.bar1Indeterminate,n.variant==="determinate"&&t.bar1Determinate,n.variant==="buffer"&&t.bar1Buffer]}})(({ownerState:e,theme:t})=>ee({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.variant==="determinate"&&{transition:`transform .${tE}s linear`},e.variant==="buffer"&&{zIndex:1,transition:`transform .${tE}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&Sc(mI||(mI=_f`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),One)),Une=Gt("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${St(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&t.bar2Indeterminate,n.variant==="buffer"&&t.bar2Buffer]}})(({ownerState:e,theme:t})=>ee({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},e.variant!=="buffer"&&{backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.color==="inherit"&&{opacity:.3},e.variant==="buffer"&&{backgroundColor:CC(t,e.color),transition:`transform .${tE}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&Sc(gI||(gI=_f`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),Dne)),jne=X.forwardRef(function(t,n){const i=Un({props:t,name:"MuiLinearProgress"}),{className:c,color:u="primary",value:p,valueBuffer:o,variant:x="indeterminate"}=i,S=sn(i,Lne),M=ee({},i,{color:u,variant:x}),k=Fne(M),L=Gi(),j={},F={bar1:{},bar2:{}};if((x==="determinate"||x==="buffer")&&p!==void 0){j["aria-valuenow"]=Math.round(p),j["aria-valuemin"]=0,j["aria-valuemax"]=100;let V=p-100;L.direction==="rtl"&&(V=-V),F.bar1.transform=`translateX(${V}%)`}if(x==="buffer"&&o!==void 0){let V=(o||0)-100;L.direction==="rtl"&&(V=-V),F.bar2.transform=`translateX(${V}%)`}return Yt(Bne,ee({className:on(k.root,c),ownerState:M,role:"progressbar"},j,{ref:n},S,{children:[x==="buffer"?ne(Nne,{className:k.dashed,ownerState:M}):null,ne($ne,{className:k.bar1,ownerState:M,style:F.bar1}),x==="determinate"?null:ne(Une,{className:k.bar2,ownerState:M,style:F.bar2})]}))}),Vne=jne,Gne=X.createContext({}),Wne=Gne;function qne(e){return Bn("MuiList",e)}Wn("MuiList",["root","padding","dense","subheader"]);const Hne=["children","className","component","dense","disablePadding","subheader"],Zne=e=>{const{classes:t,disablePadding:n,dense:i,subheader:c}=e;return $n({root:["root",!n&&"padding",i&&"dense",c&&"subheader"]},qne,t)},Xne=Gt("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})(({ownerState:e})=>ee({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})),Kne=X.forwardRef(function(t,n){const i=Un({props:t,name:"MuiList"}),{children:c,className:u,component:p="ul",dense:o=!1,disablePadding:x=!1,subheader:S}=i,M=sn(i,Hne),k=X.useMemo(()=>({dense:o}),[o]),L=ee({},i,{component:p,dense:o,disablePadding:x}),j=Zne(L);return ne(Wne.Provider,{value:k,children:Yt(Xne,ee({as:p,className:on(j.root,u),ref:n,ownerState:L},M,{children:[S,c]}))})}),Yne=Kne,Qne=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function Ww(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function yI(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function N5(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.indexOf(t.keys.join(""))===0}function wm(e,t,n,i,c,u){let p=!1,o=c(e,t,t?n:!1);for(;o;){if(o===e.firstChild){if(p)return!1;p=!0}const x=i?!1:o.disabled||o.getAttribute("aria-disabled")==="true";if(!o.hasAttribute("tabindex")||!N5(o,u)||x)o=c(e,o,n);else return o.focus(),!0}return!1}const Jne=X.forwardRef(function(t,n){const{actions:i,autoFocus:c=!1,autoFocusItem:u=!1,children:p,className:o,disabledItemsFocusable:x=!1,disableListWrap:S=!1,onKeyDown:M,variant:k="selectedMenu"}=t,L=sn(t,Qne),j=X.useRef(null),F=X.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});al(()=>{c&&j.current.focus()},[c]),X.useImperativeHandle(i,()=>({adjustStyleForScrollbar:(Z,Q)=>{const ae=!j.current.style.width;if(Z.clientHeight<j.current.clientHeight&&ae){const ue=`${W4(_i(Z))}px`;j.current.style[Q.direction==="rtl"?"paddingLeft":"paddingRight"]=ue,j.current.style.width=`calc(100% + ${ue})`}return j.current}}),[]);const V=Z=>{const Q=j.current,ae=Z.key,ue=_i(Q).activeElement;if(ae==="ArrowDown")Z.preventDefault(),wm(Q,ue,S,x,Ww);else if(ae==="ArrowUp")Z.preventDefault(),wm(Q,ue,S,x,yI);else if(ae==="Home")Z.preventDefault(),wm(Q,null,S,x,Ww);else if(ae==="End")Z.preventDefault(),wm(Q,null,S,x,yI);else if(ae.length===1){const de=F.current,ke=ae.toLowerCase(),J=performance.now();de.keys.length>0&&(J-de.lastTime>500?(de.keys=[],de.repeating=!0,de.previousKeyMatched=!0):de.repeating&&ke!==de.keys[0]&&(de.repeating=!1)),de.lastTime=J,de.keys.push(ke);const G=ue&&!de.repeating&&N5(ue,de);de.previousKeyMatched&&(G||wm(Q,ue,!1,x,Ww,de))?Z.preventDefault():de.previousKeyMatched=!1}M&&M(Z)},oe=xi(j,n);let B=-1;X.Children.forEach(p,(Z,Q)=>{X.isValidElement(Z)&&(Z.props.disabled||(k==="selectedMenu"&&Z.props.selected||B===-1)&&(B=Q),B===Q&&(Z.props.disabled||Z.props.muiSkipListHighlight||Z.type.muiSkipListHighlight)&&(B+=1,B>=p.length&&(B=-1)))});const $=X.Children.map(p,(Z,Q)=>{if(Q===B){const ae={};return u&&(ae.autoFocus=!0),Z.props.tabIndex===void 0&&k==="selectedMenu"&&(ae.tabIndex=0),X.cloneElement(Z,ae)}return Z});return ne(Yne,ee({role:"menu",ref:oe,className:o,onKeyDown:V,tabIndex:c?0:-1},L,{children:$}))}),ere=Jne;function tre(e){return Bn("MuiPopover",e)}Wn("MuiPopover",["root","paper"]);const nre=["onEntering"],rre=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function vI(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function _I(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function xI(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function qw(e){return typeof e=="function"?e():e}const ire=e=>{const{classes:t}=e;return $n({root:["root"],paper:["paper"]},tre,t)},ore=Gt(A5,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),are=Gt(ay,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),sre=X.forwardRef(function(t,n){const i=Un({props:t,name:"MuiPopover"}),{action:c,anchorEl:u,anchorOrigin:p={vertical:"top",horizontal:"left"},anchorPosition:o,anchorReference:x="anchorEl",children:S,className:M,container:k,elevation:L=8,marginThreshold:j=16,open:F,PaperProps:V={},transformOrigin:oe={vertical:"top",horizontal:"left"},TransitionComponent:B=gne,transitionDuration:$="auto",TransitionProps:{onEntering:Z}={}}=i,Q=sn(i.TransitionProps,nre),ae=sn(i,rre),ue=X.useRef(),de=xi(ue,V.ref),ke=ee({},i,{anchorOrigin:p,anchorReference:x,elevation:L,marginThreshold:j,PaperProps:V,transformOrigin:oe,TransitionComponent:B,transitionDuration:$,TransitionProps:Q}),J=ire(ke),G=X.useCallback(()=>{if(x==="anchorPosition")return o;const Te=qw(u),we=(Te&&Te.nodeType===1?Te:_i(ue.current).body).getBoundingClientRect();return{top:we.top+vI(we,p.vertical),left:we.left+_I(we,p.horizontal)}},[u,p.horizontal,p.vertical,o,x]),pe=X.useCallback(Te=>({vertical:vI(Te,oe.vertical),horizontal:_I(Te,oe.horizontal)}),[oe.horizontal,oe.vertical]),$e=X.useCallback(Te=>{const Ve={width:Te.offsetWidth,height:Te.offsetHeight},we=pe(Ve);if(x==="none")return{top:null,left:null,transformOrigin:xI(we)};const be=G();let Ue=be.top-we.vertical,nt=be.left-we.horizontal;const at=Ue+Ve.height,At=nt+Ve.width,Ft=Yo(qw(u)),Rt=Ft.innerHeight-j,Mt=Ft.innerWidth-j;if(Ue<j){const ct=Ue-j;Ue-=ct,we.vertical+=ct}else if(at>Rt){const ct=at-Rt;Ue-=ct,we.vertical+=ct}if(nt<j){const ct=nt-j;nt-=ct,we.horizontal+=ct}else if(At>Mt){const ct=At-Mt;nt-=ct,we.horizontal+=ct}return{top:`${Math.round(Ue)}px`,left:`${Math.round(nt)}px`,transformOrigin:xI(we)}},[u,x,G,pe,j]),[Ge,Ae]=X.useState(F),Ze=X.useCallback(()=>{const Te=ue.current;if(!Te)return;const Ve=$e(Te);Ve.top!==null&&(Te.style.top=Ve.top),Ve.left!==null&&(Te.style.left=Ve.left),Te.style.transformOrigin=Ve.transformOrigin,Ae(!0)},[$e]),Qe=(Te,Ve)=>{Z&&Z(Te,Ve),Ze()},gt=()=>{Ae(!1)};X.useEffect(()=>{F&&Ze()}),X.useImperativeHandle(c,()=>F?{updatePosition:()=>{Ze()}}:null,[F,Ze]),X.useEffect(()=>{if(!F)return;const Te=tC(()=>{Ze()}),Ve=Yo(u);return Ve.addEventListener("resize",Te),()=>{Te.clear(),Ve.removeEventListener("resize",Te)}},[u,F,Ze]);let Me=$;$==="auto"&&!B.muiSupportAuto&&(Me=void 0);const Ce=k||(u?_i(qw(u)).body:void 0);return ne(ore,ee({BackdropProps:{invisible:!0},className:on(J.root,M),container:Ce,open:F,ref:n,ownerState:ke},ae,{children:ne(B,ee({appear:!0,in:F,onEntering:Qe,onExited:gt,timeout:Me},Q,{children:ne(are,ee({elevation:L},V,{ref:de,className:on(J.paper,V.className)},Ge?void 0:{style:ee({},V.style,{opacity:0})},{ownerState:ke,children:S}))}))}))}),lre=sre;function cre(e){return Bn("MuiMenu",e)}Wn("MuiMenu",["root","paper","list"]);const ure=["onEntering"],dre=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],hre={vertical:"top",horizontal:"right"},fre={vertical:"top",horizontal:"left"},pre=e=>{const{classes:t}=e;return $n({root:["root"],paper:["paper"],list:["list"]},cre,t)},mre=Gt(lre,{shouldForwardProp:e=>Sa(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),gre=Gt(ay,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),yre=Gt(ere,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),vre=X.forwardRef(function(t,n){const i=Un({props:t,name:"MuiMenu"}),{autoFocus:c=!0,children:u,disableAutoFocusItem:p=!1,MenuListProps:o={},onClose:x,open:S,PaperProps:M={},PopoverClasses:k,transitionDuration:L="auto",TransitionProps:{onEntering:j}={},variant:F="selectedMenu"}=i,V=sn(i.TransitionProps,ure),oe=sn(i,dre),B=Gi(),$=B.direction==="rtl",Z=ee({},i,{autoFocus:c,disableAutoFocusItem:p,MenuListProps:o,onEntering:j,PaperProps:M,transitionDuration:L,TransitionProps:V,variant:F}),Q=pre(Z),ae=c&&!p&&S,ue=X.useRef(null),de=(G,pe)=>{ue.current&&ue.current.adjustStyleForScrollbar(G,B),j&&j(G,pe)},ke=G=>{G.key==="Tab"&&(G.preventDefault(),x&&x(G,"tabKeyDown"))};let J=-1;return X.Children.map(u,(G,pe)=>{X.isValidElement(G)&&(G.props.disabled||(F==="selectedMenu"&&G.props.selected||J===-1)&&(J=pe))}),ne(mre,ee({onClose:x,anchorOrigin:{vertical:"bottom",horizontal:$?"right":"left"},transformOrigin:$?hre:fre,PaperProps:ee({as:gre},M,{classes:ee({},M.classes,{root:Q.paper})}),className:Q.root,open:S,ref:n,transitionDuration:L,TransitionProps:ee({onEntering:de},V),ownerState:Z},oe,{classes:k,children:ne(yre,ee({onKeyDown:ke,actions:ue,autoFocus:c&&(J===-1||p),autoFocusItem:ae,variant:F},o,{className:on(Q.list,o.className),children:u}))}))}),_re=vre;function xre(e){return Bn("MuiMobileStepper",e)}Wn("MuiMobileStepper",["root","positionBottom","positionTop","positionStatic","dots","dot","dotActive","progress"]);const bre=["activeStep","backButton","className","LinearProgressProps","nextButton","position","steps","variant"],wre=e=>{const{classes:t,position:n}=e,i={root:["root",`position${St(n)}`],dots:["dots"],dot:["dot"],dotActive:["dotActive"],progress:["progress"]};return $n(i,xre,t)},Sre=Gt(ay,{name:"MuiMobileStepper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${St(n.position)}`]]}})(({theme:e,ownerState:t})=>ee({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",background:(e.vars||e).palette.background.default,padding:8},t.position==="bottom"&&{position:"fixed",bottom:0,left:0,right:0,zIndex:(e.vars||e).zIndex.mobileStepper},t.position==="top"&&{position:"fixed",top:0,left:0,right:0,zIndex:(e.vars||e).zIndex.mobileStepper})),Ere=Gt("div",{name:"MuiMobileStepper",slot:"Dots",overridesResolver:(e,t)=>t.dots})(({ownerState:e})=>ee({},e.variant==="dots"&&{display:"flex",flexDirection:"row"})),Tre=Gt("div",{name:"MuiMobileStepper",slot:"Dot",shouldForwardProp:e=>sx(e)&&e!=="dotActive",overridesResolver:(e,t)=>{const{dotActive:n}=e;return[t.dot,n&&t.dotActive]}})(({theme:e,ownerState:t,dotActive:n})=>ee({},t.variant==="dots"&&ee({transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),backgroundColor:(e.vars||e).palette.action.disabled,borderRadius:"50%",width:8,height:8,margin:"0 2px"},n&&{backgroundColor:(e.vars||e).palette.primary.main}))),Cre=Gt(Vne,{name:"MuiMobileStepper",slot:"Progress",overridesResolver:(e,t)=>t.progress})(({ownerState:e})=>ee({},e.variant==="progress"&&{width:"50%"})),Rre=X.forwardRef(function(t,n){const i=Un({props:t,name:"MuiMobileStepper"}),{activeStep:c=0,backButton:u,className:p,LinearProgressProps:o,nextButton:x,position:S="bottom",steps:M,variant:k="dots"}=i,L=sn(i,bre),j=ee({},i,{activeStep:c,position:S,variant:k}),F=wre(j);return Yt(Sre,ee({square:!0,elevation:0,className:on(F.root,p),ref:n,ownerState:j},L,{children:[u,k==="text"&&Yt(X.Fragment,{children:[c+1," / ",M]}),k==="dots"&&ne(Ere,{ownerState:j,className:F.dots,children:[...new Array(M)].map((V,oe)=>ne(Tre,{className:on(F.dot,oe===c&&F.dotActive),ownerState:j,dotActive:oe===c},oe))}),k==="progress"&&ne(Cre,ee({ownerState:j,className:F.progress,variant:"determinate",value:Math.ceil(c/(M-1)*100)},o)),x]}))}),$5=Rre;function Mre(e){return Bn("MuiNativeSelect",e)}const Are=Wn("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),RC=Are,kre=["className","disabled","error","IconComponent","inputRef","variant"],Pre=e=>{const{classes:t,variant:n,disabled:i,multiple:c,open:u,error:p}=e,o={select:["select",n,i&&"disabled",c&&"multiple",p&&"error"],icon:["icon",`icon${St(n)}`,u&&"iconOpen",i&&"disabled"]};return $n(o,Mre,t)},U5=({ownerState:e,theme:t})=>ee({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":ee({},t.vars?{backgroundColor:`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:t.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${RC.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},e.variant==="filled"&&{"&&&":{paddingRight:32}},e.variant==="outlined"&&{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}),Ire=Gt("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Sa,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${RC.multiple}`]:t.multiple}]}})(U5),j5=({ownerState:e,theme:t})=>ee({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${RC.disabled}`]:{color:(t.vars||t).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},e.variant==="filled"&&{right:7},e.variant==="outlined"&&{right:7}),Lre=Gt("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${St(n.variant)}`],n.open&&t.iconOpen]}})(j5),Ore=X.forwardRef(function(t,n){const{className:i,disabled:c,error:u,IconComponent:p,inputRef:o,variant:x="standard"}=t,S=sn(t,kre),M=ee({},t,{disabled:c,variant:x,error:u}),k=Pre(M);return Yt(X.Fragment,{children:[ne(Ire,ee({ownerState:M,className:on(k.select,i),disabled:c,ref:o||n},S)),t.multiple?null:ne(Lre,{as:p,ownerState:M,className:k.icon})]})}),Dre=Ore;var bI;const zre=["children","classes","className","label","notched"],Fre=Gt("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Bre=Gt("legend")(({ownerState:e,theme:t})=>ee({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},e.withLabel&&ee({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})})));function Nre(e){const{className:t,label:n,notched:i}=e,c=sn(e,zre),u=n!=null&&n!=="",p=ee({},e,{notched:i,withLabel:u});return ne(Fre,ee({"aria-hidden":!0,className:t,ownerState:p},c,{children:ne(Bre,{ownerState:p,children:u?ne("span",{children:n}):bI||(bI=ne("span",{className:"notranslate",children:"​"}))})}))}const $re=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],Ure=e=>{const{classes:t}=e,i=$n({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},kJ,t);return ee({},t,i)},jre=Gt(fx,{shouldForwardProp:e=>Sa(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:dx})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return ee({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${ql.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${ql.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${ql.focused} .${ql.notchedOutline}`]:{borderColor:(e.vars||e).palette[t.color].main,borderWidth:2},[`&.${ql.error} .${ql.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${ql.disabled} .${ql.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}},t.startAdornment&&{paddingLeft:14},t.endAdornment&&{paddingRight:14},t.multiline&&ee({padding:"16.5px 14px"},t.size==="small"&&{padding:"8.5px 14px"}))}),Vre=Gt(Nre,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}}),Gre=Gt(px,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:hx})(({theme:e,ownerState:t})=>ee({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{padding:"8.5px 14px"},t.multiline&&{padding:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0})),V5=X.forwardRef(function(t,n){var i,c,u,p,o;const x=Un({props:t,name:"MuiOutlinedInput"}),{components:S={},fullWidth:M=!1,inputComponent:k="input",label:L,multiline:j=!1,notched:F,slots:V={},type:oe="text"}=x,B=sn(x,$re),$=Ure(x),Z=ml(),Q=Dc({props:x,muiFormControl:Z,states:["required"]}),ae=ee({},x,{color:Q.color||"primary",disabled:Q.disabled,error:Q.error,focused:Q.focused,formControl:Z,fullWidth:M,hiddenLabel:Q.hiddenLabel,multiline:j,size:Q.size,type:oe}),ue=(i=(c=V.root)!=null?c:S.Root)!=null?i:jre,de=(u=(p=V.input)!=null?p:S.Input)!=null?u:Gre;return ne(TC,ee({slots:{root:ue,input:de},renderSuffix:ke=>ne(Vre,{ownerState:ae,className:$.notchedOutline,label:L!=null&&L!==""&&Q.required?o||(o=Yt(X.Fragment,{children:[L," ","*"]})):L,notched:typeof F<"u"?F:!!(ke.startAdornment||ke.filled||ke.focused)}),fullWidth:M,inputComponent:k,multiline:j,ref:n,type:oe},B,{classes:ee({},$,{notchedOutline:null})}))});V5.muiName="Input";const G5=V5,Wre=oy(ne("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),qre=oy(ne("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),Hre=Gt("span")({position:"relative",display:"flex"}),Zre=Gt(Wre)({transform:"scale(1)"}),Xre=Gt(qre)(({theme:e,ownerState:t})=>ee({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest})},t.checked&&{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}));function W5(e){const{checked:t=!1,classes:n={},fontSize:i}=e,c=ee({},e,{checked:t});return Yt(Hre,{className:n.root,ownerState:c,children:[ne(Zre,{fontSize:i,className:n.background,ownerState:c}),ne(Xre,{fontSize:i,className:n.dot,ownerState:c})]})}const Kre=X.createContext(void 0),q5=Kre;function Yre(){return X.useContext(q5)}function Qre(e){return Bn("MuiRadio",e)}const Jre=Wn("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary"]),wI=Jre,eie=["checked","checkedIcon","color","icon","name","onChange","size","className"],tie=e=>{const{classes:t,color:n}=e,i={root:["root",`color${St(n)}`]};return ee({},t,$n(i,Qre,t))},nie=Gt(Ree,{shouldForwardProp:e=>Sa(e)||e==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${St(n.color)}`]]}})(({theme:e,ownerState:t})=>ee({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${t.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Gr(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${wI.checked}`]:{color:(e.vars||e).palette[t.color].main}},{[`&.${wI.disabled}`]:{color:(e.vars||e).palette.action.disabled}}));function rie(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}const SI=ne(W5,{checked:!0}),EI=ne(W5,{}),iie=X.forwardRef(function(t,n){var i,c;const u=Un({props:t,name:"MuiRadio"}),{checked:p,checkedIcon:o=SI,color:x="primary",icon:S=EI,name:M,onChange:k,size:L="medium",className:j}=u,F=sn(u,eie),V=ee({},u,{color:x,size:L}),oe=tie(V),B=Yre();let $=p;const Z=GS(k,B&&B.onChange);let Q=M;return B&&(typeof $>"u"&&($=rie(B.value,u.value)),typeof Q>"u"&&(Q=B.name)),ne(nie,ee({type:"radio",icon:X.cloneElement(S,{fontSize:(i=EI.props.fontSize)!=null?i:L}),checkedIcon:X.cloneElement(o,{fontSize:(c=SI.props.fontSize)!=null?c:L}),ownerState:V,classes:oe,name:Q,checked:$,onChange:Z,ref:n,className:on(oe.root,j)},F))}),Hw=iie,oie=["actions","children","defaultValue","name","onChange","value"],aie=X.forwardRef(function(t,n){const{actions:i,children:c,defaultValue:u,name:p,onChange:o,value:x}=t,S=sn(t,oie),M=X.useRef(null),[k,L]=Rg({controlled:x,default:u,name:"RadioGroup"});X.useImperativeHandle(i,()=>({focus:()=>{let oe=M.current.querySelector("input:not(:disabled):checked");oe||(oe=M.current.querySelector("input:not(:disabled)")),oe&&oe.focus()}}),[]);const j=xi(n,M),F=V4(p),V=X.useMemo(()=>({name:F,onChange(oe){L(oe.target.value),o&&o(oe,oe.target.value)},value:k}),[F,o,L,k]);return ne(q5.Provider,{value:V,children:ne(Dte,ee({role:"radiogroup",ref:j},S,{children:c}))})}),sie=aie;function lie(e){return Bn("MuiSelect",e)}const cie=Wn("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Sm=cie;var TI;const uie=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],die=Gt("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${Sm.select}`]:t.select},{[`&.${Sm.select}`]:t[n.variant]},{[`&.${Sm.error}`]:t.error},{[`&.${Sm.multiple}`]:t.multiple}]}})(U5,{[`&.${Sm.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),hie=Gt("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${St(n.variant)}`],n.open&&t.iconOpen]}})(j5),fie=Gt("input",{shouldForwardProp:e=>sx(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function CI(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function pie(e){return e==null||typeof e=="string"&&!e.trim()}const mie=e=>{const{classes:t,variant:n,disabled:i,multiple:c,open:u,error:p}=e,o={select:["select",n,i&&"disabled",c&&"multiple",p&&"error"],icon:["icon",`icon${St(n)}`,u&&"iconOpen",i&&"disabled"],nativeInput:["nativeInput"]};return $n(o,lie,t)},gie=X.forwardRef(function(t,n){const{"aria-describedby":i,"aria-label":c,autoFocus:u,autoWidth:p,children:o,className:x,defaultOpen:S,defaultValue:M,disabled:k,displayEmpty:L,error:j=!1,IconComponent:F,inputRef:V,labelId:oe,MenuProps:B={},multiple:$,name:Z,onBlur:Q,onChange:ae,onClose:ue,onFocus:de,onOpen:ke,open:J,readOnly:G,renderValue:pe,SelectDisplayProps:$e={},tabIndex:Ge,value:Ae,variant:Ze="standard"}=t,Qe=sn(t,uie),[gt,Me]=Rg({controlled:Ae,default:M,name:"Select"}),[Ce,Te]=Rg({controlled:J,default:S,name:"Select"}),Ve=X.useRef(null),we=X.useRef(null),[be,Ue]=X.useState(null),{current:nt}=X.useRef(J!=null),[at,At]=X.useState(),Ft=xi(n,V),Rt=X.useCallback(Ne=>{we.current=Ne,Ne&&Ue(Ne)},[]),Mt=be==null?void 0:be.parentNode;X.useImperativeHandle(Ft,()=>({focus:()=>{we.current.focus()},node:Ve.current,value:gt}),[gt]),X.useEffect(()=>{S&&Ce&&be&&!nt&&(At(p?null:Mt.clientWidth),we.current.focus())},[be,p]),X.useEffect(()=>{u&&we.current.focus()},[u]),X.useEffect(()=>{if(!oe)return;const Ne=_i(we.current).getElementById(oe);if(Ne){const Je=()=>{getSelection().isCollapsed&&we.current.focus()};return Ne.addEventListener("click",Je),()=>{Ne.removeEventListener("click",Je)}}},[oe]);const ct=(Ne,Je)=>{Ne?ke&&ke(Je):ue&&ue(Je),nt||(At(p?null:Mt.clientWidth),Te(Ne))},Nt=Ne=>{Ne.button===0&&(Ne.preventDefault(),we.current.focus(),ct(!0,Ne))},Ht=Ne=>{ct(!1,Ne)},ln=X.Children.toArray(o),Kt=Ne=>{const Je=ln.find(ut=>ut.props.value===Ne.target.value);Je!==void 0&&(Me(Je.props.value),ae&&ae(Ne,Je))},wn=Ne=>Je=>{let ut;if(Je.currentTarget.hasAttribute("tabindex")){if($){ut=Array.isArray(gt)?gt.slice():[];const Ut=gt.indexOf(Ne.props.value);Ut===-1?ut.push(Ne.props.value):ut.splice(Ut,1)}else ut=Ne.props.value;if(Ne.props.onClick&&Ne.props.onClick(Je),gt!==ut&&(Me(ut),ae)){const Ut=Je.nativeEvent||Je,Qt=new Ut.constructor(Ut.type,Ut);Object.defineProperty(Qt,"target",{writable:!0,value:{value:ut,name:Z}}),ae(Qt,Ne)}$||ct(!1,Je)}},hn=Ne=>{G||[" ","ArrowUp","ArrowDown","Enter"].indexOf(Ne.key)!==-1&&(Ne.preventDefault(),ct(!0,Ne))},Xn=be!==null&&Ce,sr=Ne=>{!Xn&&Q&&(Object.defineProperty(Ne,"target",{writable:!0,value:{value:gt,name:Z}}),Q(Ne))};delete Qe["aria-invalid"];let In,qn;const Lr=[];let cr=!1;(S_({value:gt})||L)&&(pe?In=pe(gt):cr=!0);const $t=ln.map(Ne=>{if(!X.isValidElement(Ne))return null;let Je;if($){if(!Array.isArray(gt))throw new Error(wc(2));Je=gt.some(ut=>CI(ut,Ne.props.value)),Je&&cr&&Lr.push(Ne.props.children)}else Je=CI(gt,Ne.props.value),Je&&cr&&(qn=Ne.props.children);return X.cloneElement(Ne,{"aria-selected":Je?"true":"false",onClick:wn(Ne),onKeyUp:ut=>{ut.key===" "&&ut.preventDefault(),Ne.props.onKeyUp&&Ne.props.onKeyUp(ut)},role:"option",selected:Je,value:void 0,"data-value":Ne.props.value})});cr&&($?Lr.length===0?In=null:In=Lr.reduce((Ne,Je,ut)=>(Ne.push(Je),ut<Lr.length-1&&Ne.push(", "),Ne),[]):In=qn);let nn=at;!p&&nt&&be&&(nn=Mt.clientWidth);let Sn;typeof Ge<"u"?Sn=Ge:Sn=k?null:0;const mn=$e.id||(Z?`mui-component-select-${Z}`:void 0),vn=ee({},t,{variant:Ze,value:gt,open:Xn,error:j}),an=mie(vn);return Yt(X.Fragment,{children:[ne(die,ee({ref:Rt,tabIndex:Sn,role:"button","aria-disabled":k?"true":void 0,"aria-expanded":Xn?"true":"false","aria-haspopup":"listbox","aria-label":c,"aria-labelledby":[oe,mn].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:hn,onMouseDown:k||G?null:Nt,onBlur:sr,onFocus:de},$e,{ownerState:vn,className:on($e.className,an.select,x),id:mn,children:pie(In)?TI||(TI=ne("span",{className:"notranslate",children:"​"})):In})),ne(fie,ee({"aria-invalid":j,value:Array.isArray(gt)?gt.join(","):gt,name:Z,ref:Ve,"aria-hidden":!0,onChange:Kt,tabIndex:-1,disabled:k,className:an.nativeInput,autoFocus:u,ownerState:vn},Qe)),ne(hie,{as:F,className:an.icon,ownerState:vn}),ne(_re,ee({id:`menu-${Z||""}`,anchorEl:Mt,open:Xn,onClose:Ht,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},B,{MenuListProps:ee({"aria-labelledby":oe,role:"listbox",disableListWrap:!0},B.MenuListProps),PaperProps:ee({},B.PaperProps,{style:ee({minWidth:nn},B.PaperProps!=null?B.PaperProps.style:null)}),children:$t}))]})}),yie=gie,vie=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],_ie=e=>{const{classes:t}=e;return t},MC={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>Sa(e)&&e!=="variant",slot:"Root"},xie=Gt(B5,MC)(""),bie=Gt(G5,MC)(""),wie=Gt(L5,MC)(""),H5=X.forwardRef(function(t,n){const i=Un({name:"MuiSelect",props:t}),{autoWidth:c=!1,children:u,classes:p={},className:o,defaultOpen:x=!1,displayEmpty:S=!1,IconComponent:M=OJ,id:k,input:L,inputProps:j,label:F,labelId:V,MenuProps:oe,multiple:B=!1,native:$=!1,onClose:Z,onOpen:Q,open:ae,renderValue:ue,SelectDisplayProps:de,variant:ke="outlined"}=i,J=sn(i,vie),G=$?Dre:yie,pe=ml(),$e=Dc({props:i,muiFormControl:pe,states:["variant","error"]}),Ge=$e.variant||ke,Ae=ee({},i,{variant:Ge,classes:p}),Ze=_ie(Ae),Qe=L||{standard:ne(xie,{ownerState:Ae}),outlined:ne(bie,{label:F,ownerState:Ae}),filled:ne(wie,{ownerState:Ae})}[Ge],gt=xi(n,Qe.ref);return ne(X.Fragment,{children:X.cloneElement(Qe,ee({inputComponent:G,inputProps:ee({children:u,error:$e.error,IconComponent:M,variant:Ge,type:void 0,multiple:B},$?{id:k}:{autoWidth:c,defaultOpen:x,displayEmpty:S,labelId:V,MenuProps:oe,onClose:Z,onOpen:Q,open:ae,renderValue:ue,SelectDisplayProps:ee({id:k},de)},j,{classes:j?zo(Ze,j.classes):Ze},L?L.props.inputProps:{})},B&&$&&Ge==="outlined"?{notched:!0}:{},{ref:gt,className:on(Qe.props.className,o)},!L&&{variant:Ge},J))})});H5.muiName="Select";const Sie=H5;function Eie(e){return Bn("MuiSkeleton",e)}Wn("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const Tie=["animation","className","component","height","style","variant","width"];let E_=e=>e,RI,MI,AI,kI;const Cie=e=>{const{classes:t,variant:n,animation:i,hasChildren:c,width:u,height:p}=e;return $n({root:["root",n,i,c&&"withChildren",c&&!u&&"fitContent",c&&!p&&"heightAuto"]},Eie,t)},Rie=Es(RI||(RI=E_`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`)),Mie=Es(MI||(MI=E_`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`)),Aie=Gt("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.animation!==!1&&t[n.animation],n.hasChildren&&t.withChildren,n.hasChildren&&!n.width&&t.fitContent,n.hasChildren&&!n.height&&t.heightAuto]}})(({theme:e,ownerState:t})=>{const n=mY(e.shape.borderRadius)||"px",i=gY(e.shape.borderRadius);return ee({display:"block",backgroundColor:e.vars?e.vars.palette.Skeleton.bg:Gr(e.palette.text.primary,e.palette.mode==="light"?.11:.13),height:"1.2em"},t.variant==="text"&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${i}${n}/${Math.round(i/.6*10)/10}${n}`,"&:empty:before":{content:'"\\00a0"'}},t.variant==="circular"&&{borderRadius:"50%"},t.variant==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius},t.hasChildren&&{"& > *":{visibility:"hidden"}},t.hasChildren&&!t.width&&{maxWidth:"fit-content"},t.hasChildren&&!t.height&&{height:"auto"})},({ownerState:e})=>e.animation==="pulse"&&Sc(AI||(AI=E_`
      animation: ${0} 1.5s ease-in-out 0.5s infinite;
    `),Rie),({ownerState:e,theme:t})=>e.animation==="wave"&&Sc(kI||(kI=E_`
      position: relative;
      overflow: hidden;

      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */
      -webkit-mask-image: -webkit-radial-gradient(white, black);

      &::after {
        animation: ${0} 1.6s linear 0.5s infinite;
        background: linear-gradient(
          90deg,
          transparent,
          ${0},
          transparent
        );
        content: '';
        position: absolute;
        transform: translateX(-100%); /* Avoid flash during server-side hydration */
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
      }
    `),Mie,(t.vars||t).palette.action.hover)),kie=X.forwardRef(function(t,n){const i=Un({props:t,name:"MuiSkeleton"}),{animation:c="pulse",className:u,component:p="span",height:o,style:x,variant:S="text",width:M}=i,k=sn(i,Tie),L=ee({},i,{animation:c,component:p,variant:S,hasChildren:!!k.children}),j=Cie(L);return ne(Aie,ee({as:p,ref:n,className:on(j.root,u),ownerState:L},k,{style:ee({width:M,height:o},x)}))}),nE=kie,Pie=e=>!e||!yc(e),Iie=Pie;function Lie(e){return Bn("MuiSlider",e)}const Oie=Wn("MuiSlider",["root","active","colorPrimary","colorSecondary","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),Ya=Oie,Die=e=>{const{open:t}=e;return{offset:on(t&&Ya.valueLabelOpen),circle:Ya.valueLabelCircle,label:Ya.valueLabelLabel}};function zie(e){const{children:t,className:n,value:i}=e,c=Die(e);return t?X.cloneElement(t,{className:on(t.props.className)},Yt(X.Fragment,{children:[t.props.children,ne("span",{className:on(c.offset,n),"aria-hidden":!0,children:ne("span",{className:c.circle,children:ne("span",{className:c.label,children:i})})})]})):null}const Fie=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"];function PI(e){return e}const Bie=Gt("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${St(n.color)}`],n.size!=="medium"&&t[`size${St(n.size)}`],n.marked&&t.marked,n.orientation==="vertical"&&t.vertical,n.track==="inverted"&&t.trackInverted,n.track===!1&&t.trackFalse]}})(({theme:e,ownerState:t})=>ee({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:(e.vars||e).palette[t.color].main,WebkitTapHighlightColor:"transparent"},t.orientation==="horizontal"&&ee({height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}},t.size==="small"&&{height:2},t.marked&&{marginBottom:20}),t.orientation==="vertical"&&ee({height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}},t.size==="small"&&{width:2},t.marked&&{marginRight:44}),{"@media print":{colorAdjust:"exact"},[`&.${Ya.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${Ya.dragging}`]:{[`& .${Ya.thumb}, & .${Ya.track}`]:{transition:"none"}}})),Nie=Gt("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(e,t)=>t.rail})(({ownerState:e})=>ee({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38},e.orientation==="horizontal"&&{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"},e.orientation==="vertical"&&{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"},e.track==="inverted"&&{opacity:1})),$ie=Gt("span",{name:"MuiSlider",slot:"Track",overridesResolver:(e,t)=>t.track})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?yC(e.palette[t.color].main,.62):gC(e.palette[t.color].main,.5);return ee({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest})},t.size==="small"&&{border:"none"},t.orientation==="horizontal"&&{height:"inherit",top:"50%",transform:"translateY(-50%)"},t.orientation==="vertical"&&{width:"inherit",left:"50%",transform:"translateX(-50%)"},t.track===!1&&{display:"none"},t.track==="inverted"&&{backgroundColor:e.vars?e.vars.palette.Slider[`${t.color}Track`]:n,borderColor:e.vars?e.vars.palette.Slider[`${t.color}Track`]:n})}),Uie=Gt("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.thumb,t[`thumbColor${St(n.color)}`],n.size!=="medium"&&t[`thumbSize${St(n.size)}`]]}})(({theme:e,ownerState:t})=>ee({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest})},t.size==="small"&&{width:12,height:12},t.orientation==="horizontal"&&{top:"50%",transform:"translate(-50%, -50%)"},t.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 50%)"},{"&:before":ee({position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},t.size==="small"&&{boxShadow:"none"}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&:hover, &.${Ya.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.16)`:Gr(e.palette[t.color].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${Ya.active}`]:{boxShadow:`0px 0px 0px 14px ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.16)`:Gr(e.palette[t.color].main,.16)}`},[`&.${Ya.disabled}`]:{"&:hover":{boxShadow:"none"}}})),jie=Gt(zie,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(e,t)=>t.valueLabel})(({theme:e,ownerState:t})=>ee({[`&.${Ya.valueLabelOpen}`]:{transform:`${t.orientation==="vertical"?"translateY(-50%)":"translateY(-100%)"} scale(1)`},zIndex:1,whiteSpace:"nowrap"},e.typography.body2,{fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),transform:`${t.orientation==="vertical"?"translateY(-50%)":"translateY(-100%)"} scale(0)`,position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem"},t.orientation==="horizontal"&&{top:"-10px",transformOrigin:"bottom center","&:before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"}},t.orientation==="vertical"&&{right:t.size==="small"?"20px":"30px",top:"50%",transformOrigin:"right center","&:before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:"-20%",top:"50%"}},t.size==="small"&&{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"})),Vie=Gt("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>sx(e)&&e!=="markActive",overridesResolver:(e,t)=>{const{markActive:n}=e;return[t.mark,n&&t.markActive]}})(({theme:e,ownerState:t,markActive:n})=>ee({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},t.orientation==="horizontal"&&{top:"50%",transform:"translate(-1px, -50%)"},t.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 1px)"},n&&{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8})),Gie=Gt("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>sx(e)&&e!=="markLabelActive",overridesResolver:(e,t)=>t.markLabel})(({theme:e,ownerState:t,markLabelActive:n})=>ee({},e.typography.body2,{color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap"},t.orientation==="horizontal"&&{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}},t.orientation==="vertical"&&{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}},n&&{color:(e.vars||e).palette.text.primary})),Wie=e=>{const{disabled:t,dragging:n,marked:i,orientation:c,track:u,classes:p,color:o,size:x}=e,S={root:["root",t&&"disabled",n&&"dragging",i&&"marked",c==="vertical"&&"vertical",u==="inverted"&&"trackInverted",u===!1&&"trackFalse",o&&`color${St(o)}`,x&&`size${St(x)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled",x&&`thumbSize${St(x)}`,o&&`thumbColor${St(o)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return $n(S,Lie,p)},qie=({children:e})=>e,Hie=X.forwardRef(function(t,n){var i,c,u,p,o,x,S,M,k,L,j,F,V,oe,B,$,Z,Q,ae,ue,de,ke,J,G;const pe=Un({props:t,name:"MuiSlider"}),Ge=Gi().direction==="rtl",{"aria-label":Ae,"aria-valuetext":Ze,"aria-labelledby":Qe,component:gt="span",components:Me={},componentsProps:Ce={},color:Te="primary",classes:Ve,className:we,disableSwap:be=!1,disabled:Ue=!1,getAriaLabel:nt,getAriaValueText:at,marks:At=!1,max:Ft=100,min:Rt=0,orientation:Mt="horizontal",size:ct="medium",step:Nt=1,scale:Ht=PI,slotProps:ln,slots:Kt,track:wn="normal",valueLabelDisplay:hn="off",valueLabelFormat:Xn=PI}=pe,sr=sn(pe,Fie),In=ee({},pe,{isRtl:Ge,max:Ft,min:Rt,classes:Ve,disabled:Ue,disableSwap:be,orientation:Mt,marks:At,color:Te,size:ct,step:Nt,scale:Ht,track:wn,valueLabelDisplay:hn,valueLabelFormat:Xn}),{axisProps:qn,getRootProps:Lr,getHiddenInputProps:cr,getThumbProps:$t,open:nn,active:Sn,axis:mn,focusedThumbIndex:vn,range:an,dragging:Ne,marks:Je,values:ut,trackOffset:Ut,trackLeap:Qt}=aQ(ee({},In,{rootRef:n}));In.marked=Je.length>0&&Je.some(Ln=>Ln.label),In.dragging=Ne,In.focusedThumbIndex=vn;const Be=Wie(In),De=(i=(c=Kt==null?void 0:Kt.root)!=null?c:Me.Root)!=null?i:Bie,dt=(u=(p=Kt==null?void 0:Kt.rail)!=null?p:Me.Rail)!=null?u:Nie,mt=(o=(x=Kt==null?void 0:Kt.track)!=null?x:Me.Track)!=null?o:$ie,re=(S=(M=Kt==null?void 0:Kt.thumb)!=null?M:Me.Thumb)!=null?S:Uie,W=(k=(L=Kt==null?void 0:Kt.valueLabel)!=null?L:Me.ValueLabel)!=null?k:jie,Y=(j=(F=Kt==null?void 0:Kt.mark)!=null?F:Me.Mark)!=null?j:Vie,se=(V=(oe=Kt==null?void 0:Kt.markLabel)!=null?oe:Me.MarkLabel)!=null?V:Gie,ge=(B=($=Kt==null?void 0:Kt.input)!=null?$:Me.Input)!=null?B:"input",Se=(Z=ln==null?void 0:ln.root)!=null?Z:Ce.root,je=(Q=ln==null?void 0:ln.rail)!=null?Q:Ce.rail,We=(ae=ln==null?void 0:ln.track)!=null?ae:Ce.track,Ie=(ue=ln==null?void 0:ln.thumb)!=null?ue:Ce.thumb,Ke=(de=ln==null?void 0:ln.valueLabel)!=null?de:Ce.valueLabel,bt=(ke=ln==null?void 0:ln.mark)!=null?ke:Ce.mark,Dt=(J=ln==null?void 0:ln.markLabel)!=null?J:Ce.markLabel,Et=(G=ln==null?void 0:ln.input)!=null?G:Ce.input,_n=fa({elementType:De,getSlotProps:Lr,externalSlotProps:Se,externalForwardedProps:sr,additionalProps:ee({},Iie(De)&&{as:gt}),ownerState:ee({},In,Se==null?void 0:Se.ownerState),className:[Be.root,we]}),En=fa({elementType:dt,externalSlotProps:je,ownerState:In,className:Be.rail}),rn=fa({elementType:mt,externalSlotProps:We,additionalProps:{style:ee({},qn[mn].offset(Ut),qn[mn].leap(Qt))},ownerState:ee({},In,We==null?void 0:We.ownerState),className:Be.track}),gn=fa({elementType:re,getSlotProps:$t,externalSlotProps:Ie,ownerState:ee({},In,Ie==null?void 0:Ie.ownerState),className:Be.thumb}),Cn=fa({elementType:W,externalSlotProps:Ke,ownerState:ee({},In,Ke==null?void 0:Ke.ownerState),className:Be.valueLabel}),ir=fa({elementType:Y,externalSlotProps:bt,ownerState:In,className:Be.mark}),Gn=fa({elementType:se,externalSlotProps:Dt,ownerState:In,className:Be.markLabel}),Hr=fa({elementType:ge,getSlotProps:cr,externalSlotProps:Et,ownerState:In});return Yt(De,ee({},_n,{children:[ne(dt,ee({},En)),ne(mt,ee({},rn)),Je.filter(Ln=>Ln.value>=Rt&&Ln.value<=Ft).map((Ln,ur)=>{const Zr=b_(Ln.value,Rt,Ft),fi=qn[mn].offset(Zr);let zi;return wn===!1?zi=ut.indexOf(Ln.value)!==-1:zi=wn==="normal"&&(an?Ln.value>=ut[0]&&Ln.value<=ut[ut.length-1]:Ln.value<=ut[0])||wn==="inverted"&&(an?Ln.value<=ut[0]||Ln.value>=ut[ut.length-1]:Ln.value>=ut[0]),Yt(X.Fragment,{children:[ne(Y,ee({"data-index":ur},ir,!yc(Y)&&{markActive:zi},{style:ee({},fi,ir.style),className:on(ir.className,zi&&Be.markActive)})),Ln.label!=null?ne(se,ee({"aria-hidden":!0,"data-index":ur},Gn,!yc(se)&&{markLabelActive:zi},{style:ee({},fi,Gn.style),className:on(Be.markLabel,Gn.className,zi&&Be.markLabelActive),children:Ln.label})):null]},ur)}),ut.map((Ln,ur)=>{const Zr=b_(Ln,Rt,Ft),fi=qn[mn].offset(Zr),zi=hn==="off"?qie:W;return ne(zi,ee({},!yc(zi)&&{valueLabelFormat:Xn,valueLabelDisplay:hn,value:typeof Xn=="function"?Xn(Ht(Ln),ur):Xn,index:ur,open:nn===ur||Sn===ur||hn==="on",disabled:Ue},Cn,{children:ne(re,ee({"data-index":ur},gn,{className:on(Be.thumb,gn.className,Sn===ur&&Be.active,vn===ur&&Be.focusVisible),style:ee({},fi,{pointerEvents:be&&Sn!==ur?"none":void 0},gn.style),children:ne(ge,ee({"data-index":ur,"aria-label":nt?nt(ur):Ae,"aria-valuenow":Ht(Ln),"aria-labelledby":Qe,"aria-valuetext":at?at(Ht(Ln),ur):Ze,value:ut[ur]},Hr))}))}),ur)})]}))}),Zie=Hie,Xie=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],Kie={entering:{transform:"none"},entered:{transform:"none"}},Yie=X.forwardRef(function(t,n){const i=Gi(),c={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:u,appear:p=!0,children:o,easing:x,in:S,onEnter:M,onEntered:k,onEntering:L,onExit:j,onExited:F,onExiting:V,style:oe,timeout:B=c,TransitionComponent:$=lx}=t,Z=sn(t,Xie),Q=X.useRef(null),ae=xi(Q,o.ref,n),ue=Ae=>Ze=>{if(Ae){const Qe=Q.current;Ze===void 0?Ae(Qe):Ae(Qe,Ze)}},de=ue(L),ke=ue((Ae,Ze)=>{cx(Ae);const Qe=ll({style:oe,timeout:B,easing:x},{mode:"enter"});Ae.style.webkitTransition=i.transitions.create("transform",Qe),Ae.style.transition=i.transitions.create("transform",Qe),M&&M(Ae,Ze)}),J=ue(k),G=ue(V),pe=ue(Ae=>{const Ze=ll({style:oe,timeout:B,easing:x},{mode:"exit"});Ae.style.webkitTransition=i.transitions.create("transform",Ze),Ae.style.transition=i.transitions.create("transform",Ze),j&&j(Ae)}),$e=ue(F);return ne($,ee({appear:p,in:S,nodeRef:Q,onEnter:ke,onEntered:J,onEntering:de,onExit:pe,onExited:$e,onExiting:G,addEndListener:Ae=>{u&&u(Q.current,Ae)},timeout:B},Z,{children:(Ae,Ze)=>X.cloneElement(o,ee({style:ee({transform:"scale(0)",visibility:Ae==="exited"&&!S?"hidden":void 0},Kie[Ae],oe,o.props.style),ref:ae},Ze))}))}),Qie=Yie,Jie=VK({createStyledComponent:Gt("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>Un({props:e,name:"MuiStack"})}),xf=Jie,eoe=["anchor","classes","className","width","style"],toe=Gt("div")(({theme:e,ownerState:t})=>ee({position:"fixed",top:0,left:0,bottom:0,zIndex:e.zIndex.drawer-1},t.anchor==="left"&&{right:"auto"},t.anchor==="right"&&{left:"auto",right:0},t.anchor==="top"&&{bottom:"auto",right:0},t.anchor==="bottom"&&{top:"auto",bottom:0,right:0})),noe=X.forwardRef(function(t,n){const{anchor:i,classes:c={},className:u,width:p,style:o}=t,x=sn(t,eoe),S=t;return ne(toe,ee({className:on("PrivateSwipeArea-root",c.root,c[`anchor${St(i)}`],u),ref:n,style:ee({[Pu(i)?"width":"height"]:p},o),ownerState:S},x))}),roe=noe,ioe=["BackdropProps"],ooe=["anchor","disableBackdropTransition","disableDiscovery","disableSwipeToOpen","hideBackdrop","hysteresis","allowSwipeInChildren","minFlingVelocity","ModalProps","onClose","onOpen","open","PaperProps","SwipeAreaProps","swipeAreaWidth","transitionDuration","variant"],fv=3,Zw=20;let Gs=null;function Xw(e,t,n){return e==="right"?n.body.offsetWidth-t[0].pageX:t[0].pageX}function Kw(e,t,n){return e==="bottom"?n.innerHeight-t[0].clientY:t[0].clientY}function Em(e,t){return e?t.clientWidth:t.clientHeight}function II(e,t,n,i){return Math.min(Math.max(n?t-e:i+t-e,0),i)}function aoe(e,t){const n=[];for(;e&&e!==t.parentElement;){const i=Yo(t).getComputedStyle(e);i.getPropertyValue("position")==="absolute"||i.getPropertyValue("overflow-x")==="hidden"||(e.clientWidth>0&&e.scrollWidth>e.clientWidth||e.clientHeight>0&&e.scrollHeight>e.clientHeight)&&n.push(e),e=e.parentElement}return n}function soe({domTreeShapes:e,start:t,current:n,anchor:i}){const c={scrollPosition:{x:"scrollLeft",y:"scrollTop"},scrollLength:{x:"scrollWidth",y:"scrollHeight"},clientLength:{x:"clientWidth",y:"clientHeight"}};return e.some(u=>{let p=n>=t;(i==="top"||i==="left")&&(p=!p);const o=i==="left"||i==="right"?"x":"y",x=Math.round(u[c.scrollPosition[o]]),S=x>0,M=x+u[c.clientLength[o]]<u[c.scrollLength[o]];return!!(p&&M||!p&&S)})}const loe=typeof navigator<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent),coe=X.forwardRef(function(t,n){const i=ny({name:"MuiSwipeableDrawer",props:t}),c=Gi(),u={enter:c.transitions.duration.enteringScreen,exit:c.transitions.duration.leavingScreen},{anchor:p="left",disableBackdropTransition:o=!1,disableDiscovery:x=!1,disableSwipeToOpen:S=loe,hideBackdrop:M,hysteresis:k=.52,allowSwipeInChildren:L=!1,minFlingVelocity:j=450,ModalProps:{BackdropProps:F}={},onClose:V,onOpen:oe,open:B=!1,PaperProps:$={},SwipeAreaProps:Z,swipeAreaWidth:Q=20,transitionDuration:ae=u,variant:ue="temporary"}=i,de=sn(i.ModalProps,ioe),ke=sn(i,ooe),[J,G]=X.useState(!1),pe=X.useRef({isSwiping:null}),$e=X.useRef(),Ge=X.useRef(),Ae=X.useRef(),Ze=xi($.ref,Ae),Qe=X.useRef(!1),gt=X.useRef();al(()=>{gt.current=null},[B]);const Me=X.useCallback((be,Ue={})=>{const{mode:nt=null,changeTransition:at=!0}=Ue,At=Fm(c,p),Ft=["right","bottom"].indexOf(At)!==-1?1:-1,Rt=Pu(p),Mt=Rt?`translate(${Ft*be}px, 0)`:`translate(0, ${Ft*be}px)`,ct=Ae.current.style;ct.webkitTransform=Mt,ct.transform=Mt;let Nt="";if(nt&&(Nt=c.transitions.create("all",ll({easing:void 0,style:void 0,timeout:ae},{mode:nt}))),at&&(ct.webkitTransition=Nt,ct.transition=Nt),!o&&!M){const Ht=Ge.current.style;Ht.opacity=1-be/Em(Rt,Ae.current),at&&(Ht.webkitTransition=Nt,Ht.transition=Nt)}},[p,o,M,c,ae]),Ce=va(be=>{if(!Qe.current)return;if(Gs=null,Qe.current=!1,bc.flushSync(()=>{G(!1)}),!pe.current.isSwiping){pe.current.isSwiping=null;return}pe.current.isSwiping=null;const Ue=Fm(c,p),nt=Pu(p);let at;nt?at=Xw(Ue,be.changedTouches,_i(be.currentTarget)):at=Kw(Ue,be.changedTouches,Yo(be.currentTarget));const At=nt?pe.current.startX:pe.current.startY,Ft=Em(nt,Ae.current),Rt=II(at,At,B,Ft),Mt=Rt/Ft;if(Math.abs(pe.current.velocity)>j&&(gt.current=Math.abs((Ft-Rt)/pe.current.velocity)*1e3),B){pe.current.velocity>j||Mt>k?V():Me(0,{mode:"exit"});return}pe.current.velocity<-j||1-Mt>k?oe():Me(Em(nt,Ae.current),{mode:"enter"})}),Te=(be=!1)=>{if(!J){(be||!(x&&L))&&bc.flushSync(()=>{G(!0)});const Ue=Pu(p);!B&&Ae.current&&Me(Em(Ue,Ae.current)+(x?15:-Zw),{changeTransition:!1}),pe.current.velocity=0,pe.current.lastTime=null,pe.current.lastTranslate=null,pe.current.paperHit=!1,Qe.current=!0}},Ve=va(be=>{if(!Ae.current||!Qe.current||Gs!==null&&Gs!==pe.current)return;Te(!0);const Ue=Fm(c,p),nt=Pu(p),at=Xw(Ue,be.touches,_i(be.currentTarget)),At=Kw(Ue,be.touches,Yo(be.currentTarget));if(B&&Ae.current.contains(be.target)&&Gs===null){const Nt=aoe(be.target,Ae.current);if(soe({domTreeShapes:Nt,start:nt?pe.current.startX:pe.current.startY,current:nt?at:At,anchor:p})){Gs=!0;return}Gs=pe.current}if(pe.current.isSwiping==null){const Nt=Math.abs(at-pe.current.startX),Ht=Math.abs(At-pe.current.startY),ln=nt?Nt>Ht&&Nt>fv:Ht>Nt&&Ht>fv;if(ln&&be.cancelable&&be.preventDefault(),ln===!0||(nt?Ht>fv:Nt>fv)){if(pe.current.isSwiping=ln,!ln){Ce(be);return}pe.current.startX=at,pe.current.startY=At,!x&&!B&&(nt?pe.current.startX-=Zw:pe.current.startY-=Zw)}}if(!pe.current.isSwiping)return;const Ft=Em(nt,Ae.current);let Rt=nt?pe.current.startX:pe.current.startY;B&&!pe.current.paperHit&&(Rt=Math.min(Rt,Ft));const Mt=II(nt?at:At,Rt,B,Ft);if(B)if(pe.current.paperHit)Mt===0&&(pe.current.startX=at,pe.current.startY=At);else if(nt?at<Ft:At<Ft)pe.current.paperHit=!0,pe.current.startX=at,pe.current.startY=At;else return;pe.current.lastTranslate===null&&(pe.current.lastTranslate=Mt,pe.current.lastTime=performance.now()+1);const ct=(Mt-pe.current.lastTranslate)/(performance.now()-pe.current.lastTime)*1e3;pe.current.velocity=pe.current.velocity*.4+ct*.6,pe.current.lastTranslate=Mt,pe.current.lastTime=performance.now(),be.cancelable&&be.preventDefault(),Me(Mt)}),we=va(be=>{if(be.defaultPrevented||be.defaultMuiPrevented||B&&(M||!Ge.current.contains(be.target))&&!Ae.current.contains(be.target))return;const Ue=Fm(c,p),nt=Pu(p),at=Xw(Ue,be.touches,_i(be.currentTarget)),At=Kw(Ue,be.touches,Yo(be.currentTarget));if(!B){var Ft;if(S||!(be.target===$e.current||(Ft=Ae.current)!=null&&Ft.contains(be.target)&&(typeof L=="function"?L(be,$e.current,Ae.current):L)))return;if(nt){if(at>Q)return}else if(At>Q)return}be.defaultMuiPrevented=!0,Gs=null,pe.current.startX=at,pe.current.startY=At,Te()});return X.useEffect(()=>{if(ue==="temporary"){const be=_i(Ae.current);return be.addEventListener("touchstart",we),be.addEventListener("touchmove",Ve,{passive:!B}),be.addEventListener("touchend",Ce),()=>{be.removeEventListener("touchstart",we),be.removeEventListener("touchmove",Ve,{passive:!B}),be.removeEventListener("touchend",Ce)}}},[ue,B,we,Ve,Ce]),X.useEffect(()=>()=>{Gs===pe.current&&(Gs=null)},[]),X.useEffect(()=>{B||G(!1)},[B]),Yt(X.Fragment,{children:[ne(ote,ee({open:ue==="temporary"&&J?!0:B,variant:ue,ModalProps:ee({BackdropProps:ee({},F,{ref:Ge})},ue==="temporary"&&{keepMounted:!0},de),hideBackdrop:M,PaperProps:ee({},$,{style:ee({pointerEvents:ue==="temporary"&&!B&&!L?"none":""},$.style),ref:Ze}),anchor:p,transitionDuration:gt.current||ae,onClose:V,ref:n},ke)),!S&&ue==="temporary"&&ne(JY,{children:ne(roe,ee({anchor:p,ref:$e,width:Q},Z))})]})}),uoe=coe;function doe(e){return Bn("MuiToolbar",e)}Wn("MuiToolbar",["root","gutters","regular","dense"]);const hoe=["className","component","disableGutters","variant"],foe=e=>{const{classes:t,disableGutters:n,variant:i}=e;return $n({root:["root",!n&&"gutters",i]},doe,t)},poe=Gt("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})(({theme:e,ownerState:t})=>ee({position:"relative",display:"flex",alignItems:"center"},!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}},t.variant==="dense"&&{minHeight:48}),({theme:e,ownerState:t})=>t.variant==="regular"&&e.mixins.toolbar),moe=X.forwardRef(function(t,n){const i=Un({props:t,name:"MuiToolbar"}),{className:c,component:u="div",disableGutters:p=!1,variant:o="regular"}=i,x=sn(i,hoe),S=ee({},i,{component:u,disableGutters:p,variant:o}),M=foe(S);return ne(poe,ee({as:u,className:on(M.root,c),ref:n,ownerState:S},x))}),AC=moe;function goe(e){return Bn("MuiTextField",e)}Wn("MuiTextField",["root"]);const yoe=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],voe={standard:B5,filled:L5,outlined:G5},_oe=e=>{const{classes:t}=e;return $n({root:["root"]},goe,t)},xoe=Gt(wte,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),boe=X.forwardRef(function(t,n){const i=Un({props:t,name:"MuiTextField"}),{autoComplete:c,autoFocus:u=!1,children:p,className:o,color:x="primary",defaultValue:S,disabled:M=!1,error:k=!1,FormHelperTextProps:L,fullWidth:j=!1,helperText:F,id:V,InputLabelProps:oe,inputProps:B,InputProps:$,inputRef:Z,label:Q,maxRows:ae,minRows:ue,multiline:de=!1,name:ke,onBlur:J,onChange:G,onClick:pe,onFocus:$e,placeholder:Ge,required:Ae=!1,rows:Ze,select:Qe=!1,SelectProps:gt,type:Me,value:Ce,variant:Te="outlined"}=i,Ve=sn(i,yoe),we=ee({},i,{autoFocus:u,color:x,disabled:M,error:k,fullWidth:j,multiline:de,required:Ae,select:Qe,variant:Te}),be=_oe(we),Ue={};Te==="outlined"&&(oe&&typeof oe.shrink<"u"&&(Ue.notched=oe.shrink),Ue.label=Q),Qe&&((!gt||!gt.native)&&(Ue.id=void 0),Ue["aria-describedby"]=void 0);const nt=V4(V),at=F&&nt?`${nt}-helper-text`:void 0,At=Q&&nt?`${nt}-label`:void 0,Ft=voe[Te],Rt=ne(Ft,ee({"aria-describedby":at,autoComplete:c,autoFocus:u,defaultValue:S,fullWidth:j,multiline:de,name:ke,rows:Ze,maxRows:ae,minRows:ue,type:Me,value:Ce,id:nt,inputRef:Z,onBlur:J,onChange:G,onFocus:$e,onClick:pe,placeholder:Ge,inputProps:B},Ue,$));return Yt(xoe,ee({className:on(be.root,o),disabled:M,error:k,fullWidth:j,ref:n,required:Ae,color:x,variant:Te,ownerState:we},Ve,{children:[Q!=null&&Q!==""&&ne(Pne,ee({htmlFor:nt,id:At},oe,{children:Q})),Qe?ne(Sie,ee({"aria-describedby":at,id:nt,labelId:At,value:Ce,input:Rt},gt,{children:p})):Rt,F&&ne(jte,ee({id:at},L,{children:F}))]}))}),Yw=boe,kC=Yi("div")(({theme:e})=>({width:"calc(100% - 2rem)",maxWidth:"444px",margin:"0 auto",position:"fixed",top:0,left:"50%",transform:"translate(-50%)",zIndex:10,color:e.palette.text.primary,"@media (max-width: 475px)":{width:"100%"},"& .MuiButton-text *":{color:`${ol[500]}`},"& .MuiButton-text.active *":{color:e.palette.primary.main},"& > header":{boxShadow:"none",backgroundImage:"none"},"& .MuiToolbar-root":{justifyContent:"space-between",alignItems:"flex-end",backgroundColor:e.palette.background.default,color:e.palette.text.primary},"& .MuiToolbar-root.centerToolbar":{alignItems:"center"},"& .MuiToolbar-root .header_nav_btn":{borderRadius:0},"& .MuiToolbar-root .right_section":{display:"flex",gap:1},"& .MuiToolbar-root .right_section .mainFn svg, & .MuiToolbar-root .mainFn svg":{aspectRatio:"1"}})),Ts="#00A651",Z5="#ED6729",woe=["#E58859","#5DA457","#9EBE62","#80BE91","#EAFDE6"];Yi("div")(({theme:e})=>({height:"100%",backgroundColor:(e==null?void 0:e.palette.mode)==="light"?ol[100]:e==null?void 0:e.palette.background.default}));const Soe=Yi(xn)(()=>({backgroundColor:Ts,width:50,height:5,opacity:.3,borderRadius:3,position:"absolute",left:"calc(50% - 25px)",top:10})),Eoe=Yi(xn)`
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
`,Qw=fl({palette:{mode:"light",primary:{main:Ts},secondary:{main:Z5},background:{default:"#fff",paper:"#f5f5f5"}}}),Jw=fl({palette:{mode:"dark",primary:{main:Ts},secondary:{main:Z5},background:{default:ol[900],paper:ol[800]}}}),Toe=Yi(xn)(({theme:e})=>({backgroundColor:e.palette.background.default})),X5="https://api.wooyeons.site";function Coe({headProp:e}){return ne(kC,{style:{backgroundColor:e.bgColor},children:ne(wC,{position:"fixed",sx:{backgroundColor:"inherit !important"},children:Yt(AC,{className:"centerToolbar",sx:{backgroundColor:"inherit !important","& *":{color:e.contentColor?e.contentColor+" !important":"inherit"}},children:[e.fn_L?ne(Pg,{onClick:e.fn_L,className:"mainFn",children:e.icon_L&&ne(e.icon_L,{})}):ne(xn,{width:34}),ne(Rr,{variant:"subtitle2",children:e.menus[0].key}),e.fn_R?ne(Pg,{onClick:e.fn_R,className:"mainFn",children:e.icon_R&&ne(e.icon_R,{})}):ne(xn,{width:34})]})})})}function Roe({headProp:e}){return ne(kC,{children:ne(wC,{position:"fixed",sx:{backgroundColor:e.bgColor},children:Yt(AC,{className:"centerToolbar",sx:{backgroundColor:e.bgColor,"& *":{color:e.contentColor?e.contentColor+" !important":"inherit"}},children:[ne(Rr,{variant:"subtitle2",children:e.menus[0].key}),ne(xn,{className:"right_section",children:ne(Pg,{onClick:e.fn_R,className:"mainFn",children:e.icon_R&&ne(e.icon_R,{})})})]})})})}function Moe({headProp:e,navigate:t,setBtnText:n}){const[i,c]=X.useState(0),u=r1();e.headerType===void 0&&(e.headerType="V1");const p=x=>{const S=e.menus.findIndex(M=>M.value===x.value);e.isForward===!1&&i<S||(u.pathname!=x.value&&t(x.value),o())},o=()=>{u.pathname==="/add-post"||u.pathname,n("다음")};return X.useLayoutEffect(()=>{c(e.menus.findIndex(x=>x.value===u.pathname))},[u,e]),e.headerType==="V2"?ne(Roe,{headProp:e,navigate:t}):e.headerType==="V3"?ne(Coe,{headProp:e,navigate:t}):ne(kC,{children:ne(wC,{sx:{background:"none"},children:Yt(AC,{children:[ne(xn,{children:e.menus.map(x=>ne(cl,{onClick:()=>p(x),className:`header_nav_btn ${x.value===u.pathname?"active":""}`,sx:{borderBottom:x.value===u.pathname?`2px solid ${Ts}`:"2px solid #0000"},children:ne(Rr,{variant:"subtitle2",color:x.value===u.pathname?"secondary":"primary",children:x.key})},x.key))}),Yt(xn,{className:"right_section",children:[e.icon_L&&ne(Pg,{onClick:e.fn_L,className:"mainFn",children:ne(e.icon_L,{})}),ne(Pg,{onClick:e.fn_R,className:"mainFn",children:e.icon_R&&ne(e.icon_R,{})})]})]})})})}const Aoe=Yi(Nee)(({theme:e})=>({backgroundColor:e.palette.background.default}));fl({palette:{primary:{main:"#00A651"},secondary:{main:"#EEF1EE"}}});const K5=e=>{const[t]=X.useState("primary");return ne(cl,{variant:"contained",color:t,onClick:e.onClick,sx:{width:"100%",height:"3rem",borderRadius:4,fontWeight:600,boxShadow:"0 1px 3px rgba(0,0,0,0.12)",fontSize:20,zIndex:10},children:e.text})};function LI({isHeader:e}){const[t,n]=X.useState({menus:[{key:"",value:""}],isForward:!0}),i=r1(),c=nj(),[u,p]=X.useState({isFullWidth:!1,isNoneHeadPadding:!1,noneFullHeight:!1,scrollable:!1,isBtn:!1}),[o,x]=X.useState(),[S,M]=X.useState(!1),[k,L]=X.useState("다음"),j=()=>{i.pathname==="/add-post"?(L("다음"),c("/add-post/category")):i.pathname==="/add-post/category"?(o&&L("우연 등록하기"),o&&c("/add-post/content"),o||M(!0)):(L("다음"),c("/add-post/category"))};return Yt(Cc,{children:[e&&ne(Moe,{headProp:t,navigate:c,setBtnText:L}),ne(Aoe,{className:"globalContainer",maxWidth:"xs",sx:{pl:u.isFullWidth?0:2,pr:u.isFullWidth?0:2,"@media (min-width: 600px)":{pl:u.isFullWidth?0:2,pr:u.isFullWidth?0:2}},children:Yt(xn,{sx:{maxHeight:"100vh",touchAction:"none",overflowX:u.scrollable?"scroll":"hidden",height:u.noneFullHeight?"auto":"100vh",pt:u.isNoneHeadPadding?0:7,"@media (min-width: 600px)":{pt:u.isNoneHeadPadding?0:8},pb:u.isBtn?8:0},children:[ne(LT,{context:{headOpt:t,setHeadOpt:n,navigate:c,setWrapperOpt:p,setCategory:x,shaking:S,setShaking:M}}),u.isBtn&&ne(xn,{sx:{width:"100%",maxWidth:"444px",margin:"auto",position:"fixed",bottom:0,px:3,pb:4},children:ne(K5,{text:k,onClick:j})})]})})]})}var Y5={};function koe(e){if(e&&e.__esModule)return e;var t={};if(e!=null){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}}return t.default=e,t}var Q5=koe,Ws={},e2,OI;function Poe(){if(OI)return e2;OI=1;function e(t){return t&&t.__esModule?t:{default:t}}return e2=e,e2}var pv,DI;function Ioe(){if(DI)return pv;DI=1;function e(){return pv=e=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(t[c]=i[c])}return t},e.apply(this,arguments)}return pv=e,pv}var t2,zI;function Loe(){if(zI)return t2;zI=1;function e(t,n){if(t==null)return{};var i={},c=Object.keys(t),u,p;for(p=0;p<c.length;p++)u=c[p],!(n.indexOf(u)>=0)&&(i[u]=t[u]);return i}return t2=e,t2}var n2,FI;function Ooe(){if(FI)return n2;FI=1;var e=Loe();function t(n,i){if(n==null)return{};var c=e(n,i),u,p;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(p=0;p<o.length;p++)u=o[p],!(i.indexOf(u)>=0)&&Object.prototype.propertyIsEnumerable.call(n,u)&&(c[u]=n[u])}return c}return n2=t,n2}var r2,BI;function Doe(){if(BI)return r2;BI=1;function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}return r2=e,r2}var i2,NI;function zoe(){if(NI)return i2;NI=1;function e(n,i){for(var c=0;c<i.length;c++){var u=i[c];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function t(n,i,c){return i&&e(n.prototype,i),c&&e(n,c),n}return i2=t,i2}var Tm,$I;function Foe(){if($I)return Tm;$I=1;function e(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(c){return typeof c}:e=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},e(n)}function t(n){return typeof Symbol=="function"&&e(Symbol.iterator)==="symbol"?Tm=t=function(c){return e(c)}:Tm=t=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":e(c)},t(n)}return Tm=t,Tm}var o2,UI;function Boe(){if(UI)return o2;UI=1;function e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}return o2=e,o2}var a2,jI;function Noe(){if(jI)return a2;jI=1;var e=Foe(),t=Boe();function n(i,c){return c&&(e(c)==="object"||typeof c=="function")?c:t(i)}return a2=n,a2}var mv,VI;function $oe(){if(VI)return mv;VI=1;function e(t){return mv=e=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},e(t)}return mv=e,mv}var gv,GI;function Uoe(){if(GI)return gv;GI=1;function e(t,n){return gv=e=Object.setPrototypeOf||function(c,u){return c.__proto__=u,c},e(t,n)}return gv=e,gv}var s2,WI;function joe(){if(WI)return s2;WI=1;var e=Uoe();function t(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),i&&e(n,i)}return s2=t,s2}var l2,qI;function J5(){if(qI)return l2;qI=1;var e=function(){};return l2=e,l2}var c2={},u2,HI;function gx(){if(HI)return u2;HI=1;function e(t){return t&&t.__esModule?t:{default:t}}return u2=e,u2}var Cm={},ZI;function Voe(){if(ZI)return Cm;ZI=1;var e=gx();Object.defineProperty(Cm,"__esModule",{value:!0}),Cm.default=void 0;var t=e(X);e(J5());var n=function(u){u.index;var p=u.children;t.default.Children.count(p)},i=n;return Cm.default=i,Cm}var yv={},Rm={},XI;function eF(){if(XI)return Rm;XI=1,Object.defineProperty(Rm,"__esModule",{value:!0}),Rm.default=void 0;var e={RESISTANCE_COEF:.6,UNCERTAINTY_THRESHOLD:3};return Rm.default=e,Rm}var KI;function Goe(){if(KI)return yv;KI=1;var e=gx();Object.defineProperty(yv,"__esModule",{value:!0}),yv.default=i;var t=e(X),n=e(eF());function i(c){var u=c.children,p=c.startIndex,o=c.startX,x=c.pageX,S=c.viewLength,M=c.resistance,k=t.default.Children.count(u)-1,L=p+(o-x)/S,j;return M?L<0?L=Math.exp(L*n.default.RESISTANCE_COEF)-1:L>k&&(L=k+1-Math.exp((k-L)*n.default.RESISTANCE_COEF)):L<0?(L=0,j=(L-p)*S+x):L>k&&(L=k,j=(L-p)*S+x),{index:L,startX:j}}return yv}var Mm={},YI;function Woe(){if(YI)return Mm;YI=1;var e=gx();Object.defineProperty(Mm,"__esModule",{value:!0}),Mm.default=void 0;var t=e(X),n=function(u,p){var o=!1,x=function(F){return F?F.key:"empty"};if(u.children.length&&p.children.length){var S=t.default.Children.map(u.children,x),M=S[u.index];if(M!=null){var k=t.default.Children.map(p.children,x),L=k[p.index];M===L&&(o=!0)}}return o},i=n;return Mm.default=i,Mm}var Am={},QI;function qoe(){if(QI)return Am;QI=1,Object.defineProperty(Am,"__esModule",{value:!0}),Am.default=void 0;function e(n,i){var c=n%i;return c<0?c+i:c}var t=e;return Am.default=t,Am}var JI;function Hoe(){return JI||(JI=1,function(e){var t=gx();Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"checkIndexBounds",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"computeIndex",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"constant",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"getDisplaySameSlide",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"mod",{enumerable:!0,get:function(){return p.default}});var n=t(Voe()),i=t(Goe()),c=t(eF()),u=t(Woe()),p=t(qoe())}(c2)),c2}var eL;function Zoe(){if(eL)return Ws;eL=1;var e=Q5,t=Poe();Object.defineProperty(Ws,"__esModule",{value:!0}),Ws.getDomTreeShapes=B,Ws.findNativeHandler=Z,Ws.default=Ws.SwipeableViewsContext=void 0;var n=t(Ioe()),i=t(Ooe()),c=t(Doe()),u=t(zoe()),p=t(Noe()),o=t($oe()),x=t(joe()),S=e(X);t(AH),t(J5());var M=Hoe();function k(de,ke,J,G){return de.addEventListener(ke,J,G),{remove:function(){de.removeEventListener(ke,J,G)}}}var L={container:{direction:"ltr",display:"flex",willChange:"transform"},slide:{width:"100%",WebkitFlexShrink:0,flexShrink:0,overflow:"auto"}},j={root:{x:{overflowX:"hidden"},"x-reverse":{overflowX:"hidden"},y:{overflowY:"hidden"},"y-reverse":{overflowY:"hidden"}},flexDirection:{x:"row","x-reverse":"row-reverse",y:"column","y-reverse":"column-reverse"},transform:{x:function(ke){return"translate(".concat(-ke,"%, 0)")},"x-reverse":function(ke){return"translate(".concat(ke,"%, 0)")},y:function(ke){return"translate(0, ".concat(-ke,"%)")},"y-reverse":function(ke){return"translate(0, ".concat(ke,"%)")}},length:{x:"width","x-reverse":"width",y:"height","y-reverse":"height"},rotationMatrix:{x:{x:[1,0],y:[0,1]},"x-reverse":{x:[-1,0],y:[0,1]},y:{x:[0,1],y:[1,0]},"y-reverse":{x:[0,-1],y:[1,0]}},scrollPosition:{x:"scrollLeft","x-reverse":"scrollLeft",y:"scrollTop","y-reverse":"scrollTop"},scrollLength:{x:"scrollWidth","x-reverse":"scrollWidth",y:"scrollHeight","y-reverse":"scrollHeight"},clientLength:{x:"clientWidth","x-reverse":"clientWidth",y:"clientHeight","y-reverse":"clientHeight"}};function F(de,ke){var J=ke.duration,G=ke.easeFunction,pe=ke.delay;return"".concat(de," ").concat(J," ").concat(G," ").concat(pe)}function V(de,ke){var J=j.rotationMatrix[ke];return{pageX:J.x[0]*de.pageX+J.x[1]*de.pageY,pageY:J.y[0]*de.pageX+J.y[1]*de.pageY}}function oe(de){return de.touches=[{pageX:de.pageX,pageY:de.pageY}],de}function B(de,ke){for(var J=[];de&&de!==ke&&de!==document.body&&!de.hasAttribute("data-swipeable");){var G=window.getComputedStyle(de);G.getPropertyValue("position")==="absolute"||G.getPropertyValue("overflow-x")==="hidden"?J=[]:(de.clientWidth>0&&de.scrollWidth>de.clientWidth||de.clientHeight>0&&de.scrollHeight>de.clientHeight)&&J.push({element:de,scrollWidth:de.scrollWidth,scrollHeight:de.scrollHeight,clientWidth:de.clientWidth,clientHeight:de.clientHeight,scrollLeft:de.scrollLeft,scrollTop:de.scrollTop}),de=de.parentNode}return J}var $=null;function Z(de){var ke=de.domTreeShapes,J=de.pageX,G=de.startX,pe=de.axis;return ke.some(function($e){var Ge=J>=G;(pe==="x"||pe==="y")&&(Ge=!Ge);var Ae=Math.round($e[j.scrollPosition[pe]]),Ze=Ae>0,Qe=Ae+$e[j.clientLength[pe]]<$e[j.scrollLength[pe]];return Ge&&Qe||!Ge&&Ze?($=$e.element,!0):!1})}var Q=S.createContext();Ws.SwipeableViewsContext=Q;var ae=function(de){(0,x.default)(ke,de);function ke(J){var G;return(0,c.default)(this,ke),G=(0,p.default)(this,(0,o.default)(ke).call(this,J)),G.rootNode=null,G.containerNode=null,G.ignoreNextScrollEvents=!1,G.viewLength=0,G.startX=0,G.lastX=0,G.vx=0,G.startY=0,G.isSwiping=void 0,G.started=!1,G.startIndex=0,G.transitionListener=null,G.touchMoveListener=null,G.activeSlide=null,G.indexCurrent=null,G.firstRenderTimeout=null,G.setRootNode=function(pe){G.rootNode=pe},G.setContainerNode=function(pe){G.containerNode=pe},G.setActiveSlide=function(pe){G.activeSlide=pe,G.updateHeight()},G.handleSwipeStart=function(pe){var $e=G.props.axis,Ge=V(pe.touches[0],$e);G.viewLength=G.rootNode.getBoundingClientRect()[j.length[$e]],G.startX=Ge.pageX,G.lastX=Ge.pageX,G.vx=0,G.startY=Ge.pageY,G.isSwiping=void 0,G.started=!0;var Ae=window.getComputedStyle(G.containerNode),Ze=Ae.getPropertyValue("-webkit-transform")||Ae.getPropertyValue("transform");if(Ze&&Ze!=="none"){var Qe=Ze.split("(")[1].split(")")[0].split(","),gt=window.getComputedStyle(G.rootNode),Me=V({pageX:parseInt(Qe[4],10),pageY:parseInt(Qe[5],10)},$e);G.startIndex=-Me.pageX/(G.viewLength-parseInt(gt.paddingLeft,10)-parseInt(gt.paddingRight,10))||0}},G.handleSwipeMove=function(pe){if(!G.started){G.handleTouchStart(pe);return}if(!($!==null&&$!==G.rootNode)){var $e=G.props,Ge=$e.axis,Ae=$e.children,Ze=$e.ignoreNativeScroll,Qe=$e.onSwitching,gt=$e.resistance,Me=V(pe.touches[0],Ge);if(G.isSwiping===void 0){var Ce=Math.abs(Me.pageX-G.startX),Te=Math.abs(Me.pageY-G.startY),Ve=Ce>Te&&Ce>M.constant.UNCERTAINTY_THRESHOLD;if(!gt&&(Ge==="y"||Ge==="y-reverse")&&(G.indexCurrent===0&&G.startX<Me.pageX||G.indexCurrent===S.Children.count(G.props.children)-1&&G.startX>Me.pageX)){G.isSwiping=!1;return}if(Ce>Te&&pe.preventDefault(),Ve===!0||Te>M.constant.UNCERTAINTY_THRESHOLD){G.isSwiping=Ve,G.startX=Me.pageX;return}}if(G.isSwiping===!0){pe.preventDefault(),G.vx=G.vx*.5+(Me.pageX-G.lastX)*.5,G.lastX=Me.pageX;var we=(0,M.computeIndex)({children:Ae,resistance:gt,pageX:Me.pageX,startIndex:G.startIndex,startX:G.startX,viewLength:G.viewLength}),be=we.index,Ue=we.startX;if($===null&&!Ze){var nt=B(pe.target,G.rootNode),at=Z({domTreeShapes:nt,startX:G.startX,pageX:Me.pageX,axis:Ge});if(at)return}Ue?G.startX=Ue:$===null&&($=G.rootNode),G.setIndexCurrent(be);var At=function(){Qe&&Qe(be,"move")};(G.state.displaySameSlide||!G.state.isDragging)&&G.setState({displaySameSlide:!1,isDragging:!0},At),At()}}},G.handleSwipeEnd=function(){if($=null,!!G.started&&(G.started=!1,G.isSwiping===!0)){var pe=G.state.indexLatest,$e=G.indexCurrent,Ge=pe-$e,Ae;Math.abs(G.vx)>G.props.threshold?G.vx>0?Ae=Math.floor($e):Ae=Math.ceil($e):Math.abs(Ge)>G.props.hysteresis?Ae=Ge>0?Math.floor($e):Math.ceil($e):Ae=pe;var Ze=S.Children.count(G.props.children)-1;Ae<0?Ae=0:Ae>Ze&&(Ae=Ze),G.setIndexCurrent(Ae),G.setState({indexLatest:Ae,isDragging:!1},function(){G.props.onSwitching&&G.props.onSwitching(Ae,"end"),G.props.onChangeIndex&&Ae!==pe&&G.props.onChangeIndex(Ae,pe,{reason:"swipe"}),$e===pe&&G.handleTransitionEnd()})}},G.handleTouchStart=function(pe){G.props.onTouchStart&&G.props.onTouchStart(pe),G.handleSwipeStart(pe)},G.handleTouchEnd=function(pe){G.props.onTouchEnd&&G.props.onTouchEnd(pe),G.handleSwipeEnd(pe)},G.handleMouseDown=function(pe){G.props.onMouseDown&&G.props.onMouseDown(pe),pe.persist(),G.handleSwipeStart(oe(pe))},G.handleMouseUp=function(pe){G.props.onMouseUp&&G.props.onMouseUp(pe),G.handleSwipeEnd(oe(pe))},G.handleMouseLeave=function(pe){G.props.onMouseLeave&&G.props.onMouseLeave(pe),G.started&&G.handleSwipeEnd(oe(pe))},G.handleMouseMove=function(pe){G.props.onMouseMove&&G.props.onMouseMove(pe),G.started&&G.handleSwipeMove(oe(pe))},G.handleScroll=function(pe){if(G.props.onScroll&&G.props.onScroll(pe),pe.target===G.rootNode){if(G.ignoreNextScrollEvents){G.ignoreNextScrollEvents=!1;return}var $e=G.state.indexLatest,Ge=Math.ceil(pe.target.scrollLeft/pe.target.clientWidth)+$e;G.ignoreNextScrollEvents=!0,pe.target.scrollLeft=0,G.props.onChangeIndex&&Ge!==$e&&G.props.onChangeIndex(Ge,$e,{reason:"focus"})}},G.updateHeight=function(){if(G.activeSlide!==null){var pe=G.activeSlide.children[0];pe!==void 0&&pe.offsetHeight!==void 0&&G.state.heightLatest!==pe.offsetHeight&&G.setState({heightLatest:pe.offsetHeight})}},G.state={indexLatest:J.index,isDragging:!1,renderOnlyActive:!J.disableLazyLoading,heightLatest:0,displaySameSlide:!0},G.setIndexCurrent(J.index),G}return(0,u.default)(ke,[{key:"componentDidMount",value:function(){var G=this;this.transitionListener=k(this.containerNode,"transitionend",function(pe){pe.target===G.containerNode&&G.handleTransitionEnd()}),this.touchMoveListener=k(this.rootNode,"touchmove",function(pe){G.props.disabled||G.handleSwipeMove(pe)},{passive:!1}),this.props.disableLazyLoading||(this.firstRenderTimeout=setTimeout(function(){G.setState({renderOnlyActive:!1})},0)),this.props.action&&this.props.action({updateHeight:this.updateHeight})}},{key:"UNSAFE_componentWillReceiveProps",value:function(G){var pe=G.index;typeof pe=="number"&&pe!==this.props.index&&(this.setIndexCurrent(pe),this.setState({displaySameSlide:(0,M.getDisplaySameSlide)(this.props,G),indexLatest:pe}))}},{key:"componentWillUnmount",value:function(){this.transitionListener.remove(),this.touchMoveListener.remove(),clearTimeout(this.firstRenderTimeout)}},{key:"getSwipeableViewsContext",value:function(){var G=this;return{slideUpdateHeight:function(){G.updateHeight()}}}},{key:"setIndexCurrent",value:function(G){if(!this.props.animateTransitions&&this.indexCurrent!==G&&this.handleTransitionEnd(),this.indexCurrent=G,this.containerNode){var pe=this.props.axis,$e=j.transform[pe](G*100);this.containerNode.style.WebkitTransform=$e,this.containerNode.style.transform=$e}}},{key:"handleTransitionEnd",value:function(){this.props.onTransitionEnd&&(this.state.displaySameSlide||this.state.isDragging||this.props.onTransitionEnd())}},{key:"render",value:function(){var G=this,pe=this.props;pe.action;var $e=pe.animateHeight,Ge=pe.animateTransitions,Ae=pe.axis,Ze=pe.children,Qe=pe.containerStyle,gt=pe.disabled;pe.disableLazyLoading;var Me=pe.enableMouseEvents;pe.hysteresis,pe.ignoreNativeScroll,pe.index,pe.onChangeIndex,pe.onSwitching,pe.onTransitionEnd,pe.resistance;var Ce=pe.slideStyle,Te=pe.slideClassName,Ve=pe.springConfig,we=pe.style;pe.threshold;var be=(0,i.default)(pe,["action","animateHeight","animateTransitions","axis","children","containerStyle","disabled","disableLazyLoading","enableMouseEvents","hysteresis","ignoreNativeScroll","index","onChangeIndex","onSwitching","onTransitionEnd","resistance","slideStyle","slideClassName","springConfig","style","threshold"]),Ue=this.state,nt=Ue.displaySameSlide,at=Ue.heightLatest,At=Ue.indexLatest,Ft=Ue.isDragging,Rt=Ue.renderOnlyActive,Mt=gt?{}:{onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd},ct=!gt&&Me?{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave,onMouseMove:this.handleMouseMove}:{},Nt=(0,n.default)({},L.slide,Ce),Ht,ln;if(Ft||!Ge||nt)Ht="all 0s ease 0s",ln="all 0s ease 0s";else if(Ht=F("transform",Ve),ln=F("-webkit-transform",Ve),at!==0){var Kt=", ".concat(F("height",Ve));Ht+=Kt,ln+=Kt}var wn={height:null,WebkitFlexDirection:j.flexDirection[Ae],flexDirection:j.flexDirection[Ae],WebkitTransition:ln,transition:Ht};if(!Rt){var hn=j.transform[Ae](this.indexCurrent*100);wn.WebkitTransform=hn,wn.transform=hn}return $e&&(wn.height=at),S.createElement(Q.Provider,{value:this.getSwipeableViewsContext()},S.createElement("div",(0,n.default)({ref:this.setRootNode,style:(0,n.default)({},j.root[Ae],we)},be,Mt,ct,{onScroll:this.handleScroll}),S.createElement("div",{ref:this.setContainerNode,style:(0,n.default)({},wn,L.container,Qe),className:"react-swipeable-view-container"},S.Children.map(Ze,function(Xn,sr){if(Rt&&sr!==At)return null;var In,qn=!0;return sr===At&&(qn=!1,$e&&(In=G.setActiveSlide,Nt.overflowY="hidden")),S.createElement("div",{ref:In,style:Nt,className:Te,"aria-hidden":qn,"data-swipeable":"true"},Xn)}))))}}]),ke}(S.Component);ae.displayName="ReactSwipableView",ae.propTypes={},ae.defaultProps={animateHeight:!1,animateTransitions:!0,axis:"x",disabled:!1,disableLazyLoading:!1,enableMouseEvents:!1,hysteresis:.6,ignoreNativeScroll:!1,index:0,threshold:5,springConfig:{duration:"0.35s",easeFunction:"cubic-bezier(0.15, 0.3, 0.25, 1)",delay:"0s"},resistance:!1};var ue=ae;return Ws.default=ue,Ws}(function(e){var t=Q5;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"SwipeableViewsContext",{enumerable:!0,get:function(){return n.SwipeableViewsContext}});var n=t(Zoe())})(Y5);const PC=uf(Y5),Xoe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAOkSURBVHgBvVZvbFNVFP+d+17/rYUV0aEmSP/MDmVEZRAcOFn9YIaZ+sVJZhx+UzRBGcRh0GhiiCHGGD+phPjRGIJRiKhJA0ktjCX6waHRbGGVNxYVjaNjlr3S9b3j6aslbVmAhcIvae4759x7fvecc++5BW4S6ErGjc3NC2e02Taw1i0z7xbVyrKNmWZI8R8y/iJCQt15VyKZTBbmRdQZCgVtt3oFRNtEDOLa8I/QH1Jk706OGEatUatVdMSa+6HTl0LSJaIX144G2fcqhupbdusiGp/MDFYaL0X06JIl/tyiwIdgbEZ9sD81mu6VkYuCKmvNRv++OpIUsWlDS2R/WXBS93As8hYRbUXdQSuWLb4lK2kcos7loZDN2mncOEzZ5mxEZ1vbXq5U32Y/Vq/xON8eD8G2gb0fTSPW4kb7eg/efH0K2ayNhzo86Hnajx39GRQKjNvv0LCtfyF2v30elsV4fssCHP7KRHpstugqqHyu7YoV1pSp3eLcNFkc6wgECOfOWcjlGE/1NKCtzY3Hn/A586JRF+5/wA2/v7TD1lYX2td5EA5reGdPEF1dXuQv2hVBcbeSA7C2LH6yL4vXBjKYPs84eiSHN3ZNoalJc3Z8PJXDg+2laPN5rspNNluSd+5qRMtyF17emsHEhFUxg+4pnrordofHun0Y/jGPAwdmnChaV7rgdlcv0f6/jUuX6hg3LIydmq114ykS/X2Z1kdwuciJZN16LyJRHQM7Gx1b/BEvlKqeHwiUFJ99egH3rnDhxZcWVE8g/KnLMCS/J6sWSu79UqN4vNQYvvh8xhlXSZ26Nvrw9WHTkXe82igNBDh7ttTiEgkTunjc1OvHyeE8BgcvlhwyftBCty2+IJ+9lUThiAtDJ3Lw+hQmxgvY+3HWSZ9hFJz0fPuNCa+X4Gsg55QdP5Z3DsaRRA4nxHk4pCP9WwFnzpTqxDb2OMne0BJNSTk7cGNgSCsKO8nVLdoiwxTqj7wiK178cIiOjo39KhV7AXWEZGiaiZ8pPxlV5zQei91nU+Egg0K4PhhC9Oyx0fSlp6LqPTImJ/+KNgUPWkxSaqzGvMEmlPauyhWeS6VPn6q0zP3CzrPREniYSR0Sgg+ShjFnrfW5l2qdNYp/5cK8L/3KsGxbl7vDipTFjHGTcj99P/L7JK6COYls5p5ysMR8UhpvX2ok/TOuA5elbq3883FrnBFD8dK/991oegB1gKpVNCgVVoQUE8XrRXJT8R/r3EAl3h0uxAAAAABJRU5ErkJggg==",Koe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAM+SURBVHgBrZZLaBNRFIb/cydpagl9+UgFQauglYoVKlarSPBBjdha3IgLN4JuxCLVlSD1gagoaEXBhRtXihsfNcaq0YhYbcVFQKGKr4Vipa2laaHtJDPHk2hq0mbSNOSDCfeeP+f+9zX3DmEKhtyr3YZmbiVgDcAVAM36Jw0QOGiCOk3AW+rvepGuHUpnwJrRwiA3MkAa6mDwySL/m4cWejJcXV0QKlanRWpCFijCRaedWsjXGUqM2xIrwxtrXIPgdnGvQpYY4CKMFOgT4+MjYk9NYUjnDilWIktkvVpK/J0nUmnjIxoe4+Nim8aEfcx0jwk9sgmGpYeVJOvHQKOIvxlqZ4n/9ROr7NiIBjes9IDUA4u/+Fjj/cWPur6mUgfcqxfoKqy5nr79jDTEjPSbM16O3Vpcaw46kkSZihMyFS3IATTSjvU2hefQNegPyhHpLo33oK3Q39WAHKFsGrbGSnkG8ho/wb7uR6xqGCqr7W2FDYyaxEDMaObo3YKm/m9WSY3nR3YrUvOQIayZfTaZoyoxS3Zf2h9Il0iK9sgp4EammNSrxKRkUkMG3iG3zFapomSDEzkmatQ3yYhQhhzCjIHoyfBBnlmJQp+RJ9tav2qZCDNIUFbyCnmKEwPS8SDpj3FO3pnD8eBrcyaaI8sxyGrRx23+L5gGjadHFpCDUpwg5lk51eGNV6+b87E3XI0htksvtMuYJsqhLqUU2Lyh7JsRkGLgjFGB8+El4xoxPBXeLceQITsujB2TLV8/MU7MHbcPOYOxs25Z2yZ3hNQzizbuQ9MPdHsC31KJq26dLC/r2XdFixR5UqdHPLebnQ/H76MK7+ZWsPWtKjvHpzRuN0zzPZTmJIPLZJF3Sp/d9vAczP9+CvawKzkHaL3TnH8wNrJ4cG5bfUEhjb2kv7tm2kTN5v08gvzRhXGXd6N2x1pfE4WSjKKU321wObTR6OW1DFmh4Ordg9KBhmC+ctTdOEi//isJfN1+71dEaWtlAVuRFSZ65ly7FAk5ahNNolh+bi3x1m0Rw6NSrEVGcEAW8nh3/ZNAKpWmSq9sq6sy2dzFSq4TpirJiB3C8u3QKz8fFPMrKd/p3vaoI107fwAffx5XsvhKSgAAAABJRU5ErkJggg==",Yoe=fl({palette:{primary:{main:"#EEF1EE"}}}),tL=({sns:e,text:t,imgSrc:n})=>{const[,i]=Lc(Kg);return ne(Cc,{children:ne(iy,{theme:Yoe,children:Yt(cl,{variant:"contained",disableElevation:!0,sx:{boxShadow:"0 1px 3px rgba(0,0,0,0.12)",backgroundColor:e?"#F7E600":"#FFFFFF",color:e?"#3A1D1D":"black",width:"21rem",borderRadius:"10px",p:"0.6rem",display:"flex",justifyContent:"space-around",fontSize:"1rem",fontWeight:500,margin:"0.6rem"},onClick:()=>i(c=>({...c,first:!0})),children:[ne("img",{src:n}),t]})})})},Qoe=({introduction:e,activeStep:t,handleStepChange:n})=>{const i=Gi();return ne(Cc,{children:Yt(Ks,{container:!0,alignItems:"center",justifyContent:"center",children:[ne(Ks,{item:!0,children:ne(PC,{axis:i.direction==="rtl"?"x-reverse":"x",index:t,onChangeIndex:n,enableMouseEvents:!0,children:e.map((c,u)=>Yt(Ks,{item:!0,sx:{pt:"2rem",pb:"2rem"},children:[Yt(Rr,{variant:"h4",align:"center",sx:{fontWeight:600},children:[ne("span",{dangerouslySetInnerHTML:{__html:c.mainTextLine1}}),ne("br",{}),ne("span",{dangerouslySetInnerHTML:{__html:c.mainTextLine2}})]}),ne(Rr,{variant:"subtitle1",align:"center",sx:{color:"#A2A2A2",pt:"0.7rem"},children:c.subText})]},u))})}),Yt(Ks,{item:!0,children:[ne(tL,{sns:!1,text:"Google 계정으로 로그인",imgSrc:Koe}),ne(tL,{sns:!0,text:"Kakao 계정으로 로그인",imgSrc:Xoe})]})]})})},Joe="/assets/loginImg1-bcb7d760.png",eae="/assets/loginImg2-3b7d0d5f.png",tae="/assets/loginImg3-1a7f5184.png",tF=[{src:Joe,alt:"loginImg1",css:"6rem"},{src:eae,alt:"loginImg2"},{src:tae,alt:"loginImg3"}],nae=({activeStep:e,handleStepChange:t})=>{const n=Gi();return ne(Cc,{children:ne(PC,{axis:n.direction==="rtl"?"x-reverse":"x",index:e,onChangeIndex:t,enableMouseEvents:!0,style:{width:"100%"},children:tF.map((i,c)=>ne("div",{style:{overflow:"hidden",display:"flex",justifyContent:"center"},children:Math.abs(e-c)<=2?ne(xn,{component:"img",src:i.src,height:"calc( 100% )",overflow:"hidden",sx:{position:"relative",top:i.css}}):null},c))})})},nL=[{mainTextLine1:"<span class='pointText'>레이더</span>를 통해",mainTextLine2:"내 주변의 우연을 찾기",subText:"원하는 카테고리와 범위 설정하기!"},{mainTextLine1:"발견한 우연을",mainTextLine2:"확인하고 <span class='pointText'>댓글 입력</span>하기",subText:"소통과 재미를 동시에!"},{mainTextLine1:"<span class='pointText'>지도</span>에서 발견한 우연을",mainTextLine2:"볼 수 있어요",subText:"발견했던 우연을 확인 가능!"}];function rae(){const[e,t]=X.useState(0),n=tF.length,i=c=>{t(c)};return Yt(Ks,{container:!0,alignItems:"center",justifyContent:"center",maxWidth:"414px",margin:"0 auto",height:"100vh",padding:"0rem 2rem 1rem 2rem",children:[ne(M5,{}),ne(Qg,{styles:{body:{backgroundColor:"#EFF0F2"},".globalContainer .MuiBox-root":{padding:0}}}),ne(Ks,{item:!0,width:"100%",sx:{margin:"0 auto"},children:ne(nae,{introduction:nL,activeStep:e,handleStepChange:i})}),Yt(Ks,{item:!0,sx:{pt:"1rem",margin:0},children:[ne(Ks,{item:!0,children:ne($5,{steps:n,position:"static",activeStep:e,backButton:null,nextButton:null,sx:{alignItems:"center",justifyContent:"center",dotActiveStyle:{backgroundColor:"#1976d2"},dotStyle:{mx:1}}})}),ne(Ks,{item:!0,children:ne(Qoe,{introduction:nL,activeStep:e,handleStepChange:i})})]})]})}var Mu=(e=>(e.Daily="일상",e.Metting="모임",e.Commercial="광고",e.Information="정보",e.Event="이벤트",e.Gift="선물",e))(Mu||{});const T_=[{id:Mu.Daily,selected:!1,fn_print:function(){console.log(this.id)}},{id:Mu.Metting,selected:!1,fn_print:function(){console.log(this.id)}},{id:Mu.Commercial,selected:!1,fn_print:function(){console.log(this.id)}},{id:Mu.Information,selected:!1,fn_print:function(){console.log(this.id)}},{id:Mu.Event,selected:!1,fn_print:function(){console.log(this.id)}},{id:Mu.Gift,selected:!1,fn_print:function(){console.log(this.id)}}],nF=({activeColor:e,handleButtonClick:t,category:n})=>ne(cl,{variant:"contained",color:e,href:"#contained-buttons",sx:{width:"100%",height:"100%",borderRadius:4,fontWeight:600},onClick:t,style:{boxShadow:"0 1px 3px rgba(0,0,0,0.12)",fontSize:20},children:n.id}),iae=fl({palette:{primary:{main:"#EEF1EE"},secondary:{main:"#00A651"}}}),oae=({category:e})=>{const[t,n]=X.useState("primary");return ne(iy,{theme:iae,children:ne(nF,{activeColor:t,handleButtonClick:()=>{n(t==="primary"?"secondary":"primary")},category:e})})},aae=()=>{const[,e]=Lc(Kg);return ne(Cc,{children:Yt(tc,{container:!0,direction:"column",justifyContent:"space-around",alignItems:"center",maxWidth:"414px",minHeight:"667px",margin:"0 auto",padding:"0rem 2rem 0rem 2rem",spacing:0,height:"100vh",children:[ne(Qg,{styles:{".globalContainer .MuiBox-root":{padding:0}}}),Yt(tc,{sx:{pt:"6rem",pb:"3rem",width:"100%","@media (max-width: 375px)":{pt:"4.5rem",pb:"2rem"}},children:[Yt(Rr,{variant:"h5",sx:{fontWeight:600,margin:0},children:["안녕하세요 👋 ",ne("br",{}),"반복되는 일상속에서 ",ne("br",{}),"어떤 우연을 발견하고 싶으신가요?"]}),ne(Rr,{variant:"subtitle1",sx:{color:"#A2A2A2",pt:"0.7rem"},children:"발견하고 싶은 카테고리를 1개 이상 선택해 주세요."})]}),ne(xn,{children:ne(tc,{margin:"0 auto",children:ne(tc,{container:!0,rowSpacing:3,columnSpacing:2,margin:"0 auto",children:T_.map(t=>ne(tc,{xs:6,sx:{height:"7rem","@media (max-width: 375px)":{height:"5rem"}},children:ne(oae,{category:t})},T_.indexOf(t)))})})}),ne(tc,{sx:{width:"100%",padding:"1.5rem 0rem 1.5rem 0rem"},children:ne(K5,{text:"선택 완료",onClick:()=>e(t=>({...t,role:"USER"}))})})]})})},sae=X.createContext({color:"currentColor",size:"1em",weight:"regular",mirrored:!1});var lae=Object.defineProperty,C_=Object.getOwnPropertySymbols,rF=Object.prototype.hasOwnProperty,iF=Object.prototype.propertyIsEnumerable,rL=(e,t,n)=>t in e?lae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iL=(e,t)=>{for(var n in t||(t={}))rF.call(t,n)&&rL(e,n,t[n]);if(C_)for(var n of C_(t))iF.call(t,n)&&rL(e,n,t[n]);return e},oL=(e,t)=>{var n={};for(var i in e)rF.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&C_)for(var i of C_(e))t.indexOf(i)<0&&iF.call(e,i)&&(n[i]=e[i]);return n};const od=X.forwardRef((e,t)=>{const n=e,{alt:i,color:c,size:u,weight:p,mirrored:o,children:x,weights:S}=n,M=oL(n,["alt","color","size","weight","mirrored","children","weights"]),k=X.useContext(sae),{color:L="currentColor",size:j,weight:F="regular",mirrored:V=!1}=k,oe=oL(k,["color","size","weight","mirrored"]);return Xe.createElement("svg",iL(iL({ref:t,xmlns:"http://www.w3.org/2000/svg",width:u??j,height:u??j,fill:c??L,viewBox:"0 0 256 256",transform:o||V?"scale(-1, 1)":void 0},oe),M),!!i&&Xe.createElement("title",null,i),x,S.get(p??F))});od.displayName="IconBase";var cae=Object.defineProperty,uae=Object.defineProperties,dae=Object.getOwnPropertyDescriptors,aL=Object.getOwnPropertySymbols,hae=Object.prototype.hasOwnProperty,fae=Object.prototype.propertyIsEnumerable,sL=(e,t,n)=>t in e?cae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pae=(e,t)=>{for(var n in t||(t={}))hae.call(t,n)&&sL(e,n,t[n]);if(aL)for(var n of aL(t))fae.call(t,n)&&sL(e,n,t[n]);return e},mae=(e,t)=>uae(e,dae(t));const gae=new Map([["bold",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M225.29,165.93C216.61,151,212,129.57,212,104a84,84,0,0,0-168,0c0,25.58-4.59,47-13.27,61.93A20.08,20.08,0,0,0,30.66,186,19.77,19.77,0,0,0,48,196H208a19.77,19.77,0,0,0,17.31-10A20.08,20.08,0,0,0,225.29,165.93ZM54.66,172C63.51,154,68,131.14,68,104a60,60,0,0,1,120,0c0,27.13,4.48,50,13.33,68ZM172,224a12,12,0,0,1-12,12H96a12,12,0,0,1,0-24h64A12,12,0,0,1,172,224Z"}))],["duotone",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M208,192H48a8,8,0,0,1-6.88-12C47.71,168.6,56,139.81,56,104a72,72,0,0,1,144,0c0,35.82,8.3,64.6,14.9,76A8,8,0,0,1,208,192Z",opacity:"0.2"}),Xe.createElement("path",{d:"M168,224a8,8,0,0,1-8,8H96a8,8,0,1,1,0-16h64A8,8,0,0,1,168,224Zm53.85-32A15.8,15.8,0,0,1,208,200H48a16,16,0,0,1-13.8-24.06C39.75,166.38,48,139.34,48,104a80,80,0,1,1,160,0c0,35.33,8.26,62.38,13.81,71.94A15.89,15.89,0,0,1,221.84,192ZM208,184c-7.73-13.27-16-43.95-16-80a64,64,0,1,0-128,0c0,36.06-8.28,66.74-16,80Z"}))],["fill",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M168,224a8,8,0,0,1-8,8H96a8,8,0,1,1,0-16h64A8,8,0,0,1,168,224Zm53.81-48.06C216.25,166.38,208,139.33,208,104a80,80,0,1,0-160,0c0,35.34-8.26,62.38-13.81,71.94A16,16,0,0,0,48,200H208a16,16,0,0,0,13.8-24.06Z"}))],["light",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M166,224a6,6,0,0,1-6,6H96a6,6,0,0,1,0-12h64A6,6,0,0,1,166,224Zm54.11-33a13.83,13.83,0,0,1-12.1,7H48a14,14,0,0,1-12.06-21.06C41.59,167.2,50,139.74,50,104a78,78,0,1,1,156,0c0,35.73,8.42,63.2,14.08,72.94A13.9,13.9,0,0,1,220.11,191Zm-10.41-8C202.13,170,194,139.68,194,104a66,66,0,1,0-132,0c0,35.69-8.14,66-15.71,79a2,2,0,0,0,0,2,1.9,1.9,0,0,0,1.7,1H208a1.9,1.9,0,0,0,1.7-1A2,2,0,0,0,209.7,183Z"}))],["regular",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M168,224a8,8,0,0,1-8,8H96a8,8,0,1,1,0-16h64A8,8,0,0,1,168,224Zm53.85-32A15.8,15.8,0,0,1,208,200H48a16,16,0,0,1-13.8-24.06C39.75,166.38,48,139.34,48,104a80,80,0,1,1,160,0c0,35.33,8.26,62.38,13.81,71.94A15.89,15.89,0,0,1,221.84,192ZM208,184c-7.73-13.27-16-43.95-16-80a64,64,0,1,0-128,0c0,36.06-8.28,66.74-16,80Z"}))],["thin",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M164,224a4,4,0,0,1-4,4H96a4,4,0,0,1,0-8h64A4,4,0,0,1,164,224Zm54.38-34A11.84,11.84,0,0,1,208,196H48A12,12,0,0,1,37.65,178C43.42,168,52,140.13,52,104a76,76,0,1,1,152,0c0,36.13,8.59,64,14.36,73.95A11.92,11.92,0,0,1,218.38,190Zm-6.95-8C204,169.17,196,139.31,196,104a68,68,0,1,0-136,0c0,35.32-8,65.17-15.44,78a4,4,0,0,0,0,4A3.91,3.91,0,0,0,48,188H208a3.91,3.91,0,0,0,3.44-2A4,4,0,0,0,211.43,182Z"}))]]),oF=X.forwardRef((e,t)=>Xe.createElement(od,mae(pae({ref:t},e),{weights:gae})));oF.displayName="BellSimple";var yae=Object.defineProperty,vae=Object.defineProperties,_ae=Object.getOwnPropertyDescriptors,lL=Object.getOwnPropertySymbols,xae=Object.prototype.hasOwnProperty,bae=Object.prototype.propertyIsEnumerable,cL=(e,t,n)=>t in e?yae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wae=(e,t)=>{for(var n in t||(t={}))xae.call(t,n)&&cL(e,n,t[n]);if(lL)for(var n of lL(t))bae.call(t,n)&&cL(e,n,t[n]);return e},Sae=(e,t)=>vae(e,_ae(t));const Eae=new Map([["bold",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M168.49,199.51a12,12,0,0,1-17,17l-80-80a12,12,0,0,1,0-17l80-80a12,12,0,0,1,17,17L97,128Z"}))],["duotone",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M160,48V208L80,128Z",opacity:"0.2"}),Xe.createElement("path",{d:"M163.06,40.61a8,8,0,0,0-8.72,1.73l-80,80a8,8,0,0,0,0,11.32l80,80A8,8,0,0,0,168,208V48A8,8,0,0,0,163.06,40.61ZM152,188.69,91.31,128,152,67.31Z"}))],["fill",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M168,48V208a8,8,0,0,1-13.66,5.66l-80-80a8,8,0,0,1,0-11.32l80-80A8,8,0,0,1,168,48Z"}))],["light",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M164.24,203.76a6,6,0,1,1-8.48,8.48l-80-80a6,6,0,0,1,0-8.48l80-80a6,6,0,0,1,8.48,8.48L88.49,128Z"}))],["regular",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M165.66,202.34a8,8,0,0,1-11.32,11.32l-80-80a8,8,0,0,1,0-11.32l80-80a8,8,0,0,1,11.32,11.32L91.31,128Z"}))],["thin",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M162.83,205.17a4,4,0,0,1-5.66,5.66l-80-80a4,4,0,0,1,0-5.66l80-80a4,4,0,1,1,5.66,5.66L85.66,128Z"}))]]),IC=X.forwardRef((e,t)=>Xe.createElement(od,Sae(wae({ref:t},e),{weights:Eae})));IC.displayName="CaretLeft";var Tae=Object.defineProperty,Cae=Object.defineProperties,Rae=Object.getOwnPropertyDescriptors,uL=Object.getOwnPropertySymbols,Mae=Object.prototype.hasOwnProperty,Aae=Object.prototype.propertyIsEnumerable,dL=(e,t,n)=>t in e?Tae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kae=(e,t)=>{for(var n in t||(t={}))Mae.call(t,n)&&dL(e,n,t[n]);if(uL)for(var n of uL(t))Aae.call(t,n)&&dL(e,n,t[n]);return e},Pae=(e,t)=>Cae(e,Rae(t));const Iae=new Map([["bold",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M128,76a52,52,0,1,0,52,52A52.06,52.06,0,0,0,128,76Zm0,80a28,28,0,1,1,28-28A28,28,0,0,1,128,156Zm113.86-49.57A12,12,0,0,0,236,98.34L208.21,82.49l-.11-31.31a12,12,0,0,0-4.25-9.12,116,116,0,0,0-38-21.41,12,12,0,0,0-9.68.89L128,37.27,99.83,21.53a12,12,0,0,0-9.7-.9,116.06,116.06,0,0,0-38,21.47,12,12,0,0,0-4.24,9.1l-.14,31.34L20,98.35a12,12,0,0,0-5.85,8.11,110.7,110.7,0,0,0,0,43.11A12,12,0,0,0,20,157.66l27.82,15.85.11,31.31a12,12,0,0,0,4.25,9.12,116,116,0,0,0,38,21.41,12,12,0,0,0,9.68-.89L128,218.73l28.14,15.74a12,12,0,0,0,9.7.9,116.06,116.06,0,0,0,38-21.47,12,12,0,0,0,4.24-9.1l.14-31.34,27.81-15.81a12,12,0,0,0,5.85-8.11A110.7,110.7,0,0,0,241.86,106.43Zm-22.63,33.18-26.88,15.28a11.94,11.94,0,0,0-4.55,4.59c-.54,1-1.11,1.93-1.7,2.88a12,12,0,0,0-1.83,6.31L184.13,199a91.83,91.83,0,0,1-21.07,11.87l-27.15-15.19a12,12,0,0,0-5.86-1.53h-.29c-1.14,0-2.3,0-3.44,0a12.08,12.08,0,0,0-6.14,1.51L93,210.82A92.27,92.27,0,0,1,71.88,199l-.11-30.24a12,12,0,0,0-1.83-6.32c-.58-.94-1.16-1.91-1.7-2.88A11.92,11.92,0,0,0,63.7,155L36.8,139.63a86.53,86.53,0,0,1,0-23.24l26.88-15.28a12,12,0,0,0,4.55-4.58c.54-1,1.11-1.94,1.7-2.89a12,12,0,0,0,1.83-6.31L71.87,57A91.83,91.83,0,0,1,92.94,45.17l27.15,15.19a11.92,11.92,0,0,0,6.15,1.52c1.14,0,2.3,0,3.44,0a12.08,12.08,0,0,0,6.14-1.51L163,45.18A92.27,92.27,0,0,1,184.12,57l.11,30.24a12,12,0,0,0,1.83,6.32c.58.94,1.16,1.91,1.7,2.88A11.92,11.92,0,0,0,192.3,101l26.9,15.33A86.53,86.53,0,0,1,219.23,139.61Z"}))],["duotone",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M230.1,108.76,198.25,90.62c-.64-1.16-1.31-2.29-2-3.41l-.12-36A104.61,104.61,0,0,0,162,32L130,49.89c-1.34,0-2.69,0-4,0L94,32A104.58,104.58,0,0,0,59.89,51.25l-.16,36c-.7,1.12-1.37,2.26-2,3.41l-31.84,18.1a99.15,99.15,0,0,0,0,38.46l31.85,18.14c.64,1.16,1.31,2.29,2,3.41l.12,36A104.61,104.61,0,0,0,94,224l32-17.87c1.34,0,2.69,0,4,0L162,224a104.58,104.58,0,0,0,34.08-19.25l.16-36c.7-1.12,1.37-2.26,2-3.41l31.84-18.1A99.15,99.15,0,0,0,230.1,108.76ZM128,168a40,40,0,1,1,40-40A40,40,0,0,1,128,168Z",opacity:"0.2"}),Xe.createElement("path",{d:"M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Zm109.94-52.79a8,8,0,0,0-3.89-5.4l-29.83-17-.12-33.62a8,8,0,0,0-2.83-6.08,111.91,111.91,0,0,0-36.72-20.67,8,8,0,0,0-6.46.59L128,41.85,97.88,25a8,8,0,0,0-6.47-.6A111.92,111.92,0,0,0,54.73,45.15a8,8,0,0,0-2.83,6.07l-.15,33.65-29.83,17a8,8,0,0,0-3.89,5.4,106.47,106.47,0,0,0,0,41.56,8,8,0,0,0,3.89,5.4l29.83,17,.12,33.63a8,8,0,0,0,2.83,6.08,111.91,111.91,0,0,0,36.72,20.67,8,8,0,0,0,6.46-.59L128,214.15,158.12,231a7.91,7.91,0,0,0,3.9,1,8.09,8.09,0,0,0,2.57-.42,112.1,112.1,0,0,0,36.68-20.73,8,8,0,0,0,2.83-6.07l.15-33.65,29.83-17a8,8,0,0,0,3.89-5.4A106.47,106.47,0,0,0,237.94,107.21Zm-15,34.91-28.57,16.25a8,8,0,0,0-3,3c-.58,1-1.19,2.06-1.81,3.06a7.94,7.94,0,0,0-1.22,4.21l-.15,32.25a95.89,95.89,0,0,1-25.37,14.3L134,199.13a8,8,0,0,0-3.91-1h-.19c-1.21,0-2.43,0-3.64,0a8.1,8.1,0,0,0-4.1,1l-28.84,16.1A96,96,0,0,1,67.88,201l-.11-32.2a8,8,0,0,0-1.22-4.22c-.62-1-1.23-2-1.8-3.06a8.09,8.09,0,0,0-3-3.06l-28.6-16.29a90.49,90.49,0,0,1,0-28.26L61.67,97.63a8,8,0,0,0,3-3c.58-1,1.19-2.06,1.81-3.06a7.94,7.94,0,0,0,1.22-4.21l.15-32.25a95.89,95.89,0,0,1,25.37-14.3L122,56.87a8,8,0,0,0,4.1,1c1.21,0,2.43,0,3.64,0a8,8,0,0,0,4.1-1l28.84-16.1A96,96,0,0,1,188.12,55l.11,32.2a8,8,0,0,0,1.22,4.22c.62,1,1.23,2,1.8,3.06a8.09,8.09,0,0,0,3,3.06l28.6,16.29A90.49,90.49,0,0,1,222.9,142.12Z"}))],["fill",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M237.94,107.21a8,8,0,0,0-3.89-5.4l-29.83-17-.12-33.62a8,8,0,0,0-2.83-6.08,111.91,111.91,0,0,0-36.72-20.67,8,8,0,0,0-6.46.59L128,41.85,97.88,25a8,8,0,0,0-6.47-.6A111.92,111.92,0,0,0,54.73,45.15a8,8,0,0,0-2.83,6.07l-.15,33.65-29.83,17a8,8,0,0,0-3.89,5.4,106.47,106.47,0,0,0,0,41.56,8,8,0,0,0,3.89,5.4l29.83,17,.12,33.63a8,8,0,0,0,2.83,6.08,111.91,111.91,0,0,0,36.72,20.67,8,8,0,0,0,6.46-.59L128,214.15,158.12,231a7.91,7.91,0,0,0,3.9,1,8.09,8.09,0,0,0,2.57-.42,112.1,112.1,0,0,0,36.68-20.73,8,8,0,0,0,2.83-6.07l.15-33.65,29.83-17a8,8,0,0,0,3.89-5.4A106.47,106.47,0,0,0,237.94,107.21ZM128,168a40,40,0,1,1,40-40A40,40,0,0,1,128,168Z"}))],["light",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M128,82a46,46,0,1,0,46,46A46.06,46.06,0,0,0,128,82Zm0,80a34,34,0,1,1,34-34A34,34,0,0,1,128,162Zm108-54.4a6,6,0,0,0-2.92-4L202.64,86.22l-.42-.71L202.1,51.2A6,6,0,0,0,200,46.64a110.12,110.12,0,0,0-36.07-20.31,6,6,0,0,0-4.84.45L128.46,43.86h-1L96.91,26.76a6,6,0,0,0-4.86-.44A109.92,109.92,0,0,0,56,46.68a6,6,0,0,0-2.12,4.55l-.16,34.34c-.14.23-.28.47-.41.71L22.91,103.57A6,6,0,0,0,20,107.62a104.81,104.81,0,0,0,0,40.78,6,6,0,0,0,2.92,4l30.42,17.33.42.71.12,34.31A6,6,0,0,0,56,209.36a110.12,110.12,0,0,0,36.07,20.31,6,6,0,0,0,4.84-.45l30.61-17.08h1l30.56,17.1A6.09,6.09,0,0,0,162,230a5.83,5.83,0,0,0,1.93-.32,109.92,109.92,0,0,0,36-20.36,6,6,0,0,0,2.12-4.55l.16-34.34c.14-.23.28-.47.41-.71l30.42-17.29a6,6,0,0,0,2.92-4.05A104.81,104.81,0,0,0,236,107.6Zm-11.25,35.79L195.32,160.1a6.07,6.07,0,0,0-2.28,2.3c-.59,1-1.21,2.11-1.86,3.14a6,6,0,0,0-.91,3.16l-.16,33.21a98.15,98.15,0,0,1-27.52,15.53L133,200.88a6,6,0,0,0-2.93-.77h-.14c-1.24,0-2.5,0-3.74,0a6,6,0,0,0-3.07.76L93.45,217.43a98,98,0,0,1-27.56-15.49l-.12-33.17a6,6,0,0,0-.91-3.16c-.64-1-1.27-2.08-1.86-3.14a6,6,0,0,0-2.27-2.3L31.3,143.4a93,93,0,0,1,0-30.79L60.68,95.9A6.07,6.07,0,0,0,63,93.6c.59-1,1.21-2.11,1.86-3.14a6,6,0,0,0,.91-3.16l.16-33.21A98.15,98.15,0,0,1,93.41,38.56L123,55.12a5.81,5.81,0,0,0,3.07.76c1.24,0,2.5,0,3.74,0a6,6,0,0,0,3.07-.76l29.65-16.56a98,98,0,0,1,27.56,15.49l.12,33.17a6,6,0,0,0,.91,3.16c.64,1,1.27,2.08,1.86,3.14a6,6,0,0,0,2.27,2.3L224.7,112.6A93,93,0,0,1,224.73,143.39Z"}))],["regular",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Zm109.94-52.79a8,8,0,0,0-3.89-5.4l-29.83-17-.12-33.62a8,8,0,0,0-2.83-6.08,111.91,111.91,0,0,0-36.72-20.67,8,8,0,0,0-6.46.59L128,41.85,97.88,25a8,8,0,0,0-6.47-.6A112.1,112.1,0,0,0,54.73,45.15a8,8,0,0,0-2.83,6.07l-.15,33.65-29.83,17a8,8,0,0,0-3.89,5.4,106.47,106.47,0,0,0,0,41.56,8,8,0,0,0,3.89,5.4l29.83,17,.12,33.62a8,8,0,0,0,2.83,6.08,111.91,111.91,0,0,0,36.72,20.67,8,8,0,0,0,6.46-.59L128,214.15,158.12,231a7.91,7.91,0,0,0,3.9,1,8.09,8.09,0,0,0,2.57-.42,112.1,112.1,0,0,0,36.68-20.73,8,8,0,0,0,2.83-6.07l.15-33.65,29.83-17a8,8,0,0,0,3.89-5.4A106.47,106.47,0,0,0,237.94,107.21Zm-15,34.91-28.57,16.25a8,8,0,0,0-3,3c-.58,1-1.19,2.06-1.81,3.06a7.94,7.94,0,0,0-1.22,4.21l-.15,32.25a95.89,95.89,0,0,1-25.37,14.3L134,199.13a8,8,0,0,0-3.91-1h-.19c-1.21,0-2.43,0-3.64,0a8.08,8.08,0,0,0-4.1,1l-28.84,16.1A96,96,0,0,1,67.88,201l-.11-32.2a8,8,0,0,0-1.22-4.22c-.62-1-1.23-2-1.8-3.06a8.09,8.09,0,0,0-3-3.06l-28.6-16.29a90.49,90.49,0,0,1,0-28.26L61.67,97.63a8,8,0,0,0,3-3c.58-1,1.19-2.06,1.81-3.06a7.94,7.94,0,0,0,1.22-4.21l.15-32.25a95.89,95.89,0,0,1,25.37-14.3L122,56.87a8,8,0,0,0,4.1,1c1.21,0,2.43,0,3.64,0a8.08,8.08,0,0,0,4.1-1l28.84-16.1A96,96,0,0,1,188.12,55l.11,32.2a8,8,0,0,0,1.22,4.22c.62,1,1.23,2,1.8,3.06a8.09,8.09,0,0,0,3,3.06l28.6,16.29A90.49,90.49,0,0,1,222.9,142.12Z"}))],["thin",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M128,84a44,44,0,1,0,44,44A44.05,44.05,0,0,0,128,84Zm0,80a36,36,0,1,1,36-36A36,36,0,0,1,128,164Zm106-56a4,4,0,0,0-2-2.7l-30.89-17.6q-.47-.82-1-1.62L200.1,51.2a3.94,3.94,0,0,0-1.42-3,107.8,107.8,0,0,0-35.41-19.94,4,4,0,0,0-3.23.29L129,45.87h-2l-31-17.36a4,4,0,0,0-3.23-.3,108.05,108.05,0,0,0-35.39,20,4,4,0,0,0-1.41,3l-.16,34.9-1,1.62L23.9,105.3A4,4,0,0,0,22,108a102.76,102.76,0,0,0,0,40,4,4,0,0,0,1.95,2.7l30.89,17.6q.47.83,1,1.62l.12,34.87a3.94,3.94,0,0,0,1.42,3,107.8,107.8,0,0,0,35.41,19.94,4,4,0,0,0,3.23-.29L127,210.13h2l31,17.36a4,4,0,0,0,3.23.3,108.05,108.05,0,0,0,35.39-20,4,4,0,0,0,1.41-3l.16-34.9,1-1.62L232.1,150.7a4,4,0,0,0,2-2.71A102.76,102.76,0,0,0,234,108Zm-7.48,36.67L196.3,161.84a4,4,0,0,0-1.51,1.53c-.61,1.09-1.25,2.17-1.91,3.24a3.92,3.92,0,0,0-.61,2.1l-.16,34.15a99.8,99.8,0,0,1-29.7,16.77l-30.4-17a4.06,4.06,0,0,0-2-.51H130c-1.28,0-2.57,0-3.84,0a4.1,4.1,0,0,0-2.05.51l-30.45,17A100.23,100.23,0,0,1,63.89,202.9l-.12-34.12a3.93,3.93,0,0,0-.61-2.11c-.66-1-1.3-2.14-1.91-3.23a4,4,0,0,0-1.51-1.53L29.49,144.68a94.78,94.78,0,0,1,0-33.34L59.7,94.16a4,4,0,0,0,1.51-1.53c.61-1.09,1.25-2.17,1.91-3.23a4,4,0,0,0,.61-2.11l.16-34.15a99.8,99.8,0,0,1,29.7-16.77l30.4,17a4.1,4.1,0,0,0,2.05.51c1.28,0,2.57,0,3.84,0a4,4,0,0,0,2.05-.51l30.45-17A100.23,100.23,0,0,1,192.11,53.1l.12,34.12a3.93,3.93,0,0,0,.61,2.11c.66,1,1.3,2.14,1.91,3.23a4,4,0,0,0,1.51,1.53l30.25,17.23A94.78,94.78,0,0,1,226.54,144.66Z"}))]]),aF=X.forwardRef((e,t)=>Xe.createElement(od,Pae(kae({ref:t},e),{weights:Iae})));aF.displayName="GearSix";var Lae=Object.defineProperty,Oae=Object.defineProperties,Dae=Object.getOwnPropertyDescriptors,hL=Object.getOwnPropertySymbols,zae=Object.prototype.hasOwnProperty,Fae=Object.prototype.propertyIsEnumerable,fL=(e,t,n)=>t in e?Lae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Bae=(e,t)=>{for(var n in t||(t={}))zae.call(t,n)&&fL(e,n,t[n]);if(hL)for(var n of hL(t))Fae.call(t,n)&&fL(e,n,t[n]);return e},Nae=(e,t)=>Oae(e,Dae(t));const $ae=new Map([["bold",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M232.49,215.51,185,168a92.12,92.12,0,1,0-17,17l47.53,47.54a12,12,0,0,0,17-17ZM44,112a68,68,0,1,1,68,68A68.07,68.07,0,0,1,44,112Z"}))],["duotone",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M192,112a80,80,0,1,1-80-80A80,80,0,0,1,192,112Z",opacity:"0.2"}),Xe.createElement("path",{d:"M229.66,218.34,179.6,168.28a88.21,88.21,0,1,0-11.32,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"}))],["fill",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M168,112a56,56,0,1,1-56-56A56,56,0,0,1,168,112Zm61.66,117.66a8,8,0,0,1-11.32,0l-50.06-50.07a88,88,0,1,1,11.32-11.31l50.06,50.06A8,8,0,0,1,229.66,229.66ZM112,184a72,72,0,1,0-72-72A72.08,72.08,0,0,0,112,184Z"}))],["light",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M228.24,219.76l-51.38-51.38a86.15,86.15,0,1,0-8.48,8.48l51.38,51.38a6,6,0,0,0,8.48-8.48ZM38,112a74,74,0,1,1,74,74A74.09,74.09,0,0,1,38,112Z"}))],["regular",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"}))],["thin",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M226.83,221.17l-52.7-52.7a84.1,84.1,0,1,0-5.66,5.66l52.7,52.7a4,4,0,0,0,5.66-5.66ZM36,112a76,76,0,1,1,76,76A76.08,76.08,0,0,1,36,112Z"}))]]),sF=X.forwardRef((e,t)=>Xe.createElement(od,Nae(Bae({ref:t},e),{weights:$ae})));sF.displayName="MagnifyingGlass";var Uae=Object.defineProperty,jae=Object.defineProperties,Vae=Object.getOwnPropertyDescriptors,pL=Object.getOwnPropertySymbols,Gae=Object.prototype.hasOwnProperty,Wae=Object.prototype.propertyIsEnumerable,mL=(e,t,n)=>t in e?Uae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qae=(e,t)=>{for(var n in t||(t={}))Gae.call(t,n)&&mL(e,n,t[n]);if(pL)for(var n of pL(t))Wae.call(t,n)&&mL(e,n,t[n]);return e},Hae=(e,t)=>jae(e,Vae(t));const Zae=new Map([["bold",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M228,128a12,12,0,0,1-12,12H140v76a12,12,0,0,1-24,0V140H40a12,12,0,0,1,0-24h76V40a12,12,0,0,1,24,0v76h76A12,12,0,0,1,228,128Z"}))],["duotone",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M216,48V208a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8H208A8,8,0,0,1,216,48Z",opacity:"0.2"}),Xe.createElement("path",{d:"M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z"}))],["fill",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM184,136H136v48a8,8,0,0,1-16,0V136H72a8,8,0,0,1,0-16h48V72a8,8,0,0,1,16,0v48h48a8,8,0,0,1,0,16Z"}))],["light",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M222,128a6,6,0,0,1-6,6H134v82a6,6,0,0,1-12,0V134H40a6,6,0,0,1,0-12h82V40a6,6,0,0,1,12,0v82h82A6,6,0,0,1,222,128Z"}))],["regular",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z"}))],["thin",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M220,128a4,4,0,0,1-4,4H132v84a4,4,0,0,1-8,0V132H40a4,4,0,0,1,0-8h84V40a4,4,0,0,1,8,0v84h84A4,4,0,0,1,220,128Z"}))]]),lF=X.forwardRef((e,t)=>Xe.createElement(od,Hae(qae({ref:t},e),{weights:Zae})));lF.displayName="Plus";var Xae=Object.defineProperty,Kae=Object.defineProperties,Yae=Object.getOwnPropertyDescriptors,gL=Object.getOwnPropertySymbols,Qae=Object.prototype.hasOwnProperty,Jae=Object.prototype.propertyIsEnumerable,yL=(e,t,n)=>t in e?Xae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ese=(e,t)=>{for(var n in t||(t={}))Qae.call(t,n)&&yL(e,n,t[n]);if(gL)for(var n of gL(t))Jae.call(t,n)&&yL(e,n,t[n]);return e},tse=(e,t)=>Kae(e,Yae(t));const nse=new Map([["bold",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M208.49,191.51a12,12,0,0,1-17,17L128,145,64.49,208.49a12,12,0,0,1-17-17L111,128,47.51,64.49a12,12,0,0,1,17-17L128,111l63.51-63.52a12,12,0,0,1,17,17L145,128Z"}))],["duotone",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M216,48V208a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8H208A8,8,0,0,1,216,48Z",opacity:"0.2"}),Xe.createElement("path",{d:"M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"}))],["fill",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM181.66,170.34a8,8,0,0,1-11.32,11.32L128,139.31,85.66,181.66a8,8,0,0,1-11.32-11.32L116.69,128,74.34,85.66A8,8,0,0,1,85.66,74.34L128,116.69l42.34-42.35a8,8,0,0,1,11.32,11.32L139.31,128Z"}))],["light",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M204.24,195.76a6,6,0,1,1-8.48,8.48L128,136.49,60.24,204.24a6,6,0,0,1-8.48-8.48L119.51,128,51.76,60.24a6,6,0,0,1,8.48-8.48L128,119.51l67.76-67.75a6,6,0,0,1,8.48,8.48L136.49,128Z"}))],["regular",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"}))],["thin",Xe.createElement(Xe.Fragment,null,Xe.createElement("path",{d:"M202.83,197.17a4,4,0,0,1-5.66,5.66L128,133.66,58.83,202.83a4,4,0,0,1-5.66-5.66L122.34,128,53.17,58.83a4,4,0,0,1,5.66-5.66L128,122.34l69.17-69.17a4,4,0,1,1,5.66,5.66L133.66,128Z"}))]]),sy=X.forwardRef((e,t)=>Xe.createElement(od,tse(ese({ref:t},e),{weights:nse})));sy.displayName="X";var cF={exports:{}};(function(e,t){(function(n,i){e.exports=i(X)})(Ai,function(n){return function(i){var c={};function u(p){if(c[p])return c[p].exports;var o=c[p]={i:p,l:!1,exports:{}};return i[p].call(o.exports,o,o.exports,u),o.l=!0,o.exports}return u.m=i,u.c=c,u.d=function(p,o,x){u.o(p,o)||Object.defineProperty(p,o,{enumerable:!0,get:x})},u.r=function(p){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})},u.t=function(p,o){if(1&o&&(p=u(p)),8&o||4&o&&typeof p=="object"&&p&&p.__esModule)return p;var x=Object.create(null);if(u.r(x),Object.defineProperty(x,"default",{enumerable:!0,value:p}),2&o&&typeof p!="string")for(var S in p)u.d(x,S,function(M){return p[M]}.bind(null,S));return x},u.n=function(p){var o=p&&p.__esModule?function(){return p.default}:function(){return p};return u.d(o,"a",o),o},u.o=function(p,o){return Object.prototype.hasOwnProperty.call(p,o)},u.p="/",u(u.s=1)}([function(i,c){i.exports=n},function(i,c,u){i.exports=u(2)},function(i,c,u){function p(J,G,pe){return G in J?Object.defineProperty(J,G,{value:pe,enumerable:!0,configurable:!0,writable:!0}):J[G]=pe,J}function o(J,G){var pe=Object.keys(J);if(Object.getOwnPropertySymbols){var $e=Object.getOwnPropertySymbols(J);G&&($e=$e.filter(function(Ge){return Object.getOwnPropertyDescriptor(J,Ge).enumerable})),pe.push.apply(pe,$e)}return pe}function x(J,G){if(J==null)return{};var pe,$e,Ge=function(Ze,Qe){if(Ze==null)return{};var gt,Me,Ce={},Te=Object.keys(Ze);for(Me=0;Me<Te.length;Me++)gt=Te[Me],Qe.indexOf(gt)>=0||(Ce[gt]=Ze[gt]);return Ce}(J,G);if(Object.getOwnPropertySymbols){var Ae=Object.getOwnPropertySymbols(J);for($e=0;$e<Ae.length;$e++)pe=Ae[$e],G.indexOf(pe)>=0||Object.prototype.propertyIsEnumerable.call(J,pe)&&(Ge[pe]=J[pe])}return Ge}u.r(c);var S=u(0),M=u.n(S),k=function(J){for(var G=0,pe=0;pe<J.length;pe++)G=(G<<5)-G+J.charCodeAt(pe),G&=G;return Math.abs(G)},L=function(J,G){return Math.floor(J/Math.pow(10,G)%10)},j=function(J,G){return!(L(J,G)%2)},F=function(J,G,pe){var $e=J%G;return pe&&L(J,pe)%2===0?-$e:$e},V=function(J,G,pe){return G[J%pe]},oe=function(J){var G=function(pe,$e){var Ge=k(pe),Ae=$e&&$e.length;return Array.from({length:4},function(Ze,Qe){return{color:V(Ge+Qe,$e,Ae),translateX:F(Ge*(Qe+1),40-(Qe+17),1),translateY:F(Ge*(Qe+1),40-(Qe+17),2),rotate:F(Ge*(Qe+1),360),isSquare:j(Ge,2)}})}(J.name,J.colors);return S.createElement("svg",{viewBox:"0 0 80 80",fill:"none",role:"img",xmlns:"http://www.w3.org/2000/svg",width:J.size,height:J.size},J.title&&S.createElement("title",null,J.name),S.createElement("mask",{id:"mask__bauhaus",maskUnits:"userSpaceOnUse",x:0,y:0,width:80,height:80},S.createElement("rect",{width:80,height:80,rx:J.square?void 0:160,fill:"#FFFFFF"})),S.createElement("g",{mask:"url(#mask__bauhaus)"},S.createElement("rect",{width:80,height:80,fill:G[0].color}),S.createElement("rect",{x:10,y:30,width:80,height:G[1].isSquare?80:10,fill:G[1].color,transform:"translate("+G[1].translateX+" "+G[1].translateY+") rotate("+G[1].rotate+" 40 40)"}),S.createElement("circle",{cx:40,cy:40,fill:G[2].color,r:16,transform:"translate("+G[2].translateX+" "+G[2].translateY+")"}),S.createElement("line",{x1:0,y1:40,x2:80,y2:40,strokeWidth:2,stroke:G[3].color,transform:"translate("+G[3].translateX+" "+G[3].translateY+") rotate("+G[3].rotate+" 40 40)"})))},B=function(J){var G=function(pe,$e){var Ge=k($e),Ae=pe&&pe.length,Ze=Array.from({length:5},function(gt,Me){return V(Ge+Me,pe,Ae)}),Qe=[];return Qe[0]=Ze[0],Qe[1]=Ze[1],Qe[2]=Ze[1],Qe[3]=Ze[2],Qe[4]=Ze[2],Qe[5]=Ze[3],Qe[6]=Ze[3],Qe[7]=Ze[0],Qe[8]=Ze[4],Qe}(J.colors,J.name);return M.a.createElement("svg",{viewBox:"0 0 90 90",fill:"none",role:"img",xmlns:"http://www.w3.org/2000/svg",width:J.size,height:J.size},J.title&&M.a.createElement("title",null,J.name),M.a.createElement("mask",{id:"mask__ring",maskUnits:"userSpaceOnUse",x:0,y:0,width:90,height:90},M.a.createElement("rect",{width:90,height:90,rx:J.square?void 0:180,fill:"#FFFFFF"})),M.a.createElement("g",{mask:"url(#mask__ring)"},M.a.createElement("path",{d:"M0 0h90v45H0z",fill:G[0]}),M.a.createElement("path",{d:"M0 45h90v45H0z",fill:G[1]}),M.a.createElement("path",{d:"M83 45a38 38 0 00-76 0h76z",fill:G[2]}),M.a.createElement("path",{d:"M83 45a38 38 0 01-76 0h76z",fill:G[3]}),M.a.createElement("path",{d:"M77 45a32 32 0 10-64 0h64z",fill:G[4]}),M.a.createElement("path",{d:"M77 45a32 32 0 11-64 0h64z",fill:G[5]}),M.a.createElement("path",{d:"M71 45a26 26 0 00-52 0h52z",fill:G[6]}),M.a.createElement("path",{d:"M71 45a26 26 0 01-52 0h52z",fill:G[7]}),M.a.createElement("circle",{cx:45,cy:45,r:23,fill:G[8]})))},$=function(J){var G=function(pe,$e){var Ge=k(pe),Ae=$e&&$e.length;return Array.from({length:64},function(Ze,Qe){return V(Ge%Qe,$e,Ae)})}(J.name,J.colors);return S.createElement("svg",{viewBox:"0 0 80 80",fill:"none",role:"img",xmlns:"http://www.w3.org/2000/svg",width:J.size,height:J.size},J.title&&S.createElement("title",null,J.name),S.createElement("mask",{id:"mask__pixel","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:0,y:0,width:80,height:80},S.createElement("rect",{width:80,height:80,rx:J.square?void 0:160,fill:"#FFFFFF"})),S.createElement("g",{mask:"url(#mask__pixel)"},S.createElement("rect",{width:10,height:10,fill:G[0]}),S.createElement("rect",{x:20,width:10,height:10,fill:G[1]}),S.createElement("rect",{x:40,width:10,height:10,fill:G[2]}),S.createElement("rect",{x:60,width:10,height:10,fill:G[3]}),S.createElement("rect",{x:10,width:10,height:10,fill:G[4]}),S.createElement("rect",{x:30,width:10,height:10,fill:G[5]}),S.createElement("rect",{x:50,width:10,height:10,fill:G[6]}),S.createElement("rect",{x:70,width:10,height:10,fill:G[7]}),S.createElement("rect",{y:10,width:10,height:10,fill:G[8]}),S.createElement("rect",{y:20,width:10,height:10,fill:G[9]}),S.createElement("rect",{y:30,width:10,height:10,fill:G[10]}),S.createElement("rect",{y:40,width:10,height:10,fill:G[11]}),S.createElement("rect",{y:50,width:10,height:10,fill:G[12]}),S.createElement("rect",{y:60,width:10,height:10,fill:G[13]}),S.createElement("rect",{y:70,width:10,height:10,fill:G[14]}),S.createElement("rect",{x:20,y:10,width:10,height:10,fill:G[15]}),S.createElement("rect",{x:20,y:20,width:10,height:10,fill:G[16]}),S.createElement("rect",{x:20,y:30,width:10,height:10,fill:G[17]}),S.createElement("rect",{x:20,y:40,width:10,height:10,fill:G[18]}),S.createElement("rect",{x:20,y:50,width:10,height:10,fill:G[19]}),S.createElement("rect",{x:20,y:60,width:10,height:10,fill:G[20]}),S.createElement("rect",{x:20,y:70,width:10,height:10,fill:G[21]}),S.createElement("rect",{x:40,y:10,width:10,height:10,fill:G[22]}),S.createElement("rect",{x:40,y:20,width:10,height:10,fill:G[23]}),S.createElement("rect",{x:40,y:30,width:10,height:10,fill:G[24]}),S.createElement("rect",{x:40,y:40,width:10,height:10,fill:G[25]}),S.createElement("rect",{x:40,y:50,width:10,height:10,fill:G[26]}),S.createElement("rect",{x:40,y:60,width:10,height:10,fill:G[27]}),S.createElement("rect",{x:40,y:70,width:10,height:10,fill:G[28]}),S.createElement("rect",{x:60,y:10,width:10,height:10,fill:G[29]}),S.createElement("rect",{x:60,y:20,width:10,height:10,fill:G[30]}),S.createElement("rect",{x:60,y:30,width:10,height:10,fill:G[31]}),S.createElement("rect",{x:60,y:40,width:10,height:10,fill:G[32]}),S.createElement("rect",{x:60,y:50,width:10,height:10,fill:G[33]}),S.createElement("rect",{x:60,y:60,width:10,height:10,fill:G[34]}),S.createElement("rect",{x:60,y:70,width:10,height:10,fill:G[35]}),S.createElement("rect",{x:10,y:10,width:10,height:10,fill:G[36]}),S.createElement("rect",{x:10,y:20,width:10,height:10,fill:G[37]}),S.createElement("rect",{x:10,y:30,width:10,height:10,fill:G[38]}),S.createElement("rect",{x:10,y:40,width:10,height:10,fill:G[39]}),S.createElement("rect",{x:10,y:50,width:10,height:10,fill:G[40]}),S.createElement("rect",{x:10,y:60,width:10,height:10,fill:G[41]}),S.createElement("rect",{x:10,y:70,width:10,height:10,fill:G[42]}),S.createElement("rect",{x:30,y:10,width:10,height:10,fill:G[43]}),S.createElement("rect",{x:30,y:20,width:10,height:10,fill:G[44]}),S.createElement("rect",{x:30,y:30,width:10,height:10,fill:G[45]}),S.createElement("rect",{x:30,y:40,width:10,height:10,fill:G[46]}),S.createElement("rect",{x:30,y:50,width:10,height:10,fill:G[47]}),S.createElement("rect",{x:30,y:60,width:10,height:10,fill:G[48]}),S.createElement("rect",{x:30,y:70,width:10,height:10,fill:G[49]}),S.createElement("rect",{x:50,y:10,width:10,height:10,fill:G[50]}),S.createElement("rect",{x:50,y:20,width:10,height:10,fill:G[51]}),S.createElement("rect",{x:50,y:30,width:10,height:10,fill:G[52]}),S.createElement("rect",{x:50,y:40,width:10,height:10,fill:G[53]}),S.createElement("rect",{x:50,y:50,width:10,height:10,fill:G[54]}),S.createElement("rect",{x:50,y:60,width:10,height:10,fill:G[55]}),S.createElement("rect",{x:50,y:70,width:10,height:10,fill:G[56]}),S.createElement("rect",{x:70,y:10,width:10,height:10,fill:G[57]}),S.createElement("rect",{x:70,y:20,width:10,height:10,fill:G[58]}),S.createElement("rect",{x:70,y:30,width:10,height:10,fill:G[59]}),S.createElement("rect",{x:70,y:40,width:10,height:10,fill:G[60]}),S.createElement("rect",{x:70,y:50,width:10,height:10,fill:G[61]}),S.createElement("rect",{x:70,y:60,width:10,height:10,fill:G[62]}),S.createElement("rect",{x:70,y:70,width:10,height:10,fill:G[63]})))},Z=function(J){var G=function(pe,$e){var Ge,Ae=k(pe),Ze=$e&&$e.length,Qe=V(Ae,$e,Ze),gt=F(Ae,10,1),Me=gt<5?gt+4:gt,Ce=F(Ae,10,2),Te=Ce<5?Ce+4:Ce;return{wrapperColor:Qe,faceColor:(Ge=Qe,Ge.slice(0,1)==="#"&&(Ge=Ge.slice(1)),(299*parseInt(Ge.substr(0,2),16)+587*parseInt(Ge.substr(2,2),16)+114*parseInt(Ge.substr(4,2),16))/1e3>=128?"#000000":"#FFFFFF"),backgroundColor:V(Ae+13,$e,Ze),wrapperTranslateX:Me,wrapperTranslateY:Te,wrapperRotate:F(Ae,360),wrapperScale:1+F(Ae,3)/10,isMouthOpen:j(Ae,2),isCircle:j(Ae,1),eyeSpread:F(Ae,5),mouthSpread:F(Ae,3),faceRotate:F(Ae,10,3),faceTranslateX:Me>6?Me/2:F(Ae,8,1),faceTranslateY:Te>6?Te/2:F(Ae,7,2)}}(J.name,J.colors);return S.createElement("svg",{viewBox:"0 0 36 36",fill:"none",role:"img",xmlns:"http://www.w3.org/2000/svg",width:J.size,height:J.size},J.title&&S.createElement("title",null,J.name),S.createElement("mask",{id:"mask__beam",maskUnits:"userSpaceOnUse",x:0,y:0,width:36,height:36},S.createElement("rect",{width:36,height:36,rx:J.square?void 0:72,fill:"#FFFFFF"})),S.createElement("g",{mask:"url(#mask__beam)"},S.createElement("rect",{width:36,height:36,fill:G.backgroundColor}),S.createElement("rect",{x:"0",y:"0",width:36,height:36,transform:"translate("+G.wrapperTranslateX+" "+G.wrapperTranslateY+") rotate("+G.wrapperRotate+" 18 18) scale("+G.wrapperScale+")",fill:G.wrapperColor,rx:G.isCircle?36:6}),S.createElement("g",{transform:"translate("+G.faceTranslateX+" "+G.faceTranslateY+") rotate("+G.faceRotate+" 18 18)"},G.isMouthOpen?S.createElement("path",{d:"M15 "+(19+G.mouthSpread)+"c2 1 4 1 6 0",stroke:G.faceColor,fill:"none",strokeLinecap:"round"}):S.createElement("path",{d:"M13,"+(19+G.mouthSpread)+" a1,0.75 0 0,0 10,0",fill:G.faceColor}),S.createElement("rect",{x:14-G.eyeSpread,y:14,width:1.5,height:2,rx:1,stroke:"none",fill:G.faceColor}),S.createElement("rect",{x:20+G.eyeSpread,y:14,width:1.5,height:2,rx:1,stroke:"none",fill:G.faceColor}))))},Q=function(J){var G=function($e,Ge){var Ae=k($e),Ze=Ge&&Ge.length;return Array.from({length:4},function(Qe,gt){return V(Ae+gt,Ge,Ze)})}(J.name,J.colors),pe=J.name.replace(/\s/g,"");return S.createElement("svg",{viewBox:"0 0 80 80",fill:"none",role:"img",xmlns:"http://www.w3.org/2000/svg",width:J.size,height:J.size},J.title&&S.createElement("title",null,J.name),S.createElement("mask",{id:"mask__sunset",maskUnits:"userSpaceOnUse",x:0,y:0,width:80,height:80},S.createElement("rect",{width:80,height:80,rx:J.square?void 0:160,fill:"#FFFFFF"})),S.createElement("g",{mask:"url(#mask__sunset)"},S.createElement("path",{fill:"url(#gradient_paint0_linear_"+pe+")",d:"M0 0h80v40H0z"}),S.createElement("path",{fill:"url(#gradient_paint1_linear_"+pe+")",d:"M0 40h80v40H0z"})),S.createElement("defs",null,S.createElement("linearGradient",{id:"gradient_paint0_linear_"+pe,x1:40,y1:0,x2:40,y2:40,gradientUnits:"userSpaceOnUse"},S.createElement("stop",{stopColor:G[0]}),S.createElement("stop",{offset:1,stopColor:G[1]})),S.createElement("linearGradient",{id:"gradient_paint1_linear_"+pe,x1:40,y1:40,x2:40,y2:80,gradientUnits:"userSpaceOnUse"},S.createElement("stop",{stopColor:G[2]}),S.createElement("stop",{offset:1,stopColor:G[3]}))))},ae=function(J){var G=function(pe,$e){var Ge=k(pe),Ae=$e&&$e.length;return Array.from({length:3},function(Ze,Qe){return{color:V(Ge+Qe,$e,Ae),translateX:F(Ge*(Qe+1),8,1),translateY:F(Ge*(Qe+1),8,2),scale:1.2+F(Ge*(Qe+1),4)/10,rotate:F(Ge*(Qe+1),360,1)}})}(J.name,J.colors);return S.createElement("svg",{viewBox:"0 0 80 80",fill:"none",role:"img",xmlns:"http://www.w3.org/2000/svg",width:J.size,height:J.size},J.title&&S.createElement("title",null,J.name),S.createElement("mask",{id:"mask__marble",maskUnits:"userSpaceOnUse",x:0,y:0,width:80,height:80},S.createElement("rect",{width:80,height:80,rx:J.square?void 0:160,fill:"#FFFFFF"})),S.createElement("g",{mask:"url(#mask__marble)"},S.createElement("rect",{width:80,height:80,fill:G[0].color}),S.createElement("path",{filter:"url(#prefix__filter0_f)",d:"M32.414 59.35L50.376 70.5H72.5v-71H33.728L26.5 13.381l19.057 27.08L32.414 59.35z",fill:G[1].color,transform:"translate("+G[1].translateX+" "+G[1].translateY+") rotate("+G[1].rotate+" 40 40) scale("+G[2].scale+")"}),S.createElement("path",{filter:"url(#prefix__filter0_f)",style:{mixBlendMode:"overlay"},d:"M22.216 24L0 46.75l14.108 38.129L78 86l-3.081-59.276-22.378 4.005 12.972 20.186-23.35 27.395L22.215 24z",fill:G[2].color,transform:"translate("+G[2].translateX+" "+G[2].translateY+") rotate("+G[2].rotate+" 40 40) scale("+G[2].scale+")"})),S.createElement("defs",null,S.createElement("filter",{id:"prefix__filter0_f",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},S.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),S.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),S.createElement("feGaussianBlur",{stdDeviation:7,result:"effect1_foregroundBlur"}))))},ue=["pixel","bauhaus","ring","beam","sunset","marble"],de={geometric:"beam",abstract:"bauhaus"},ke=function(J){var G=J.variant,pe=G===void 0?"marble":G,$e=J.colors,Ge=$e===void 0?["#92A1C6","#146A7C","#F0AB3D","#C271B4","#C20D90"]:$e,Ae=J.name,Ze=Ae===void 0?"Clara Barton":Ae,Qe=J.square,gt=Qe!==void 0&&Qe,Me=J.title,Ce=Me!==void 0&&Me,Te=J.size,Ve=function(we){for(var be=1;be<arguments.length;be++){var Ue=arguments[be]!=null?arguments[be]:{};be%2?o(Object(Ue),!0).forEach(function(nt){p(we,nt,Ue[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(we,Object.getOwnPropertyDescriptors(Ue)):o(Object(Ue)).forEach(function(nt){Object.defineProperty(we,nt,Object.getOwnPropertyDescriptor(Ue,nt))})}return we}({colors:Ge,name:Ze,title:Ce,size:Te===void 0?40:Te,square:gt},x(J,["variant","colors","name","square","title","size"]));return{pixel:M.a.createElement($,Ve),bauhaus:M.a.createElement(oe,Ve),ring:M.a.createElement(B,Ve),beam:M.a.createElement(Z,Ve),sunset:M.a.createElement(Q,Ve),marble:M.a.createElement(ae,Ve)}[Object.keys(de).includes(pe)?de[pe]:ue.includes(pe)?pe:"marble"]};c.default=ke}])})})(cF);var rse=cF.exports;const uF=uf(rse);function ise(){const[e]=Lc(Kg),{setHeadOpt:t,navigate:n,setWrapperOpt:i}=Fo(),c={menus:[{key:"우연 찾기",value:"/"},{key:"과거 우연",value:"/previous"}],isForward:!0,icon_L:oF,fn_L:()=>n("/notification"),icon_R:()=>ne(uF,{name:e.id.toString(),variant:"beam",size:28,colors:woe}),fn_R:()=>n("/mypage")},u={isNoneHeadPadding:!0,scrollable:!1,isFullWidth:!0};return X.useLayoutEffect(()=>{t(c),i(u)},[]),ne(LT,{context:{navigate:n}})}const ose=({drawerBleeding:e,children:t,onClick:n})=>{const i=Gi();return Yt(xn,{onClick:n,sx:{position:"absolute",top:-e+1,height:e,borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",visibility:"visible",right:0,left:0,boxShadow:`0px -7px 7px ${Gr(Ts,.2)}`,backgroundColor:i.palette.background.default,cursor:"pointer",zIndex:99},children:[ne(Soe,{}),ne(xn,{sx:{position:"absolute",bottom:0,px:"1rem",width:"100%"},children:t})]})},ase=({open:e,toggleDrawer:t,children:n,headerChildren:i,drawerBleeding:c=52})=>{const u=Gi();return Yt(Cc,{children:[ne(Qg,{styles:{html:{"--brand-color":"#000"},".use_drawer > .MuiPaper-root":{maxHeight:"340px",width:"100%",overflow:"visible",boxShadow:"none"},".use_drawer .MuiPaper-root":{maxWidth:"444px",margin:"0 auto",background:u.palette.background.default},".use_drawer .MuiBackdrop-root":{background:"none",backdropFilter:"blur(2px)",maxWidth:"444px",margin:"0 auto"}}}),Yt(uoe,{anchor:"bottom",open:e,onClose:t,onOpen:t,swipeAreaWidth:c,disableSwipeToOpen:!1,ModalProps:{keepMounted:!0},className:"use_drawer",children:[ne(ose,{drawerBleeding:c,open:e,onClick:t,children:i}),ne(Toe,{sx:{position:"relative",overflow:"scroll",zIndex:10,px:2,boxShadow:`0px -4px 4px ${Gr(Ts,.2)}`},children:n})]})]})};function dF(){const[e,t]=X.useState(!1);return{open:e,toggleDrawer:()=>{t(!e)},Drawer:ase}}function sse({iconSize:e,rand:t,pos:n}){return{width:"10vw",height:"10vw",maxHeight:e,maxWidth:e,borderRadius:"50%",position:"absolute",left:`${50+n.x}%`,bottom:`${50+n.y}%`,transform:"translate(-50%, 50%)",animation:`1.5s ${t}s ease-in-out infinite alternate wooFlow`,boxShadow:"0px 4px 4px #0000003b",cursor:"pointer",textAlign:"center",lineHeight:"2rem","&:hover":{opacity:.8},"& .MuiAvatar-img":{filter:"blur(1.5px)",border:"none",height:"110%",width:"110%"},"@keyframes wooFlow":{from:{transform:"translate(-50%, 50%)"},to:{transform:"translate(-50%, 60%)"}},"@keyframes mount":{from:{transform:"translate(-50%, 50%)scale(0)"},to:{transform:"translate(-50%, 50%)scale(1)"}}}}const lse=({image:e,pos:t,onClick:n})=>{const i=Math.random(),c=40;return ne(Qie,{in:!0,children:ne(xn,{sx:{position:"absolute",left:`${50+t.x}%`,bottom:`${50+t.y}%`},onClick:n,children:ne(xn,{sx:sse({iconSize:c,rand:i,pos:t}),children:ne(GJ,{alt:e,src:e,sx:{border:"none"}})})})})},cse=Xe.memo(lse),use=Yi(cl)(({theme:e})=>({color:e.palette.text.primary})),dse=Yi(use)(({checked:e})=>({borderRadius:"1.25rem",height:"2rem",padding:"0 1.6rem",border:`1px solid ${e?"#0000":Ts}`,color:e?"#fff":"",flex:"0 0 auto"}));function hse({children:e,setFilter:t,checked:n}){const i=c=>{t(u=>{let p=u.preferCategory;const o=p.indexOf(c);return!n&&o===-1?p=[...p,c]:o!==-1&&(p=u.preferCategory.filter(x=>x!==c)),{...u,preferCategory:p}})};return ne(dse,{variant:n?"contained":"outlined",onClick:()=>i(e.id),checked:n,children:e.value})}function fse(){return{CategoryItem:hse}}const pse=[{id:"DAILY",value:"일상"},{id:"GROUP",value:"모임"},{id:"INFO",value:"정보"},{id:"EVENT",value:"이벤트"},{id:"ADS",value:"광고"},{id:"PRESENT",value:"선물"}];function mse({filter:e,setFilter:t}){const{CategoryItem:n}=fse();return ne(xn,{sx:{width:"100%",display:"flex",flexWrap:"nowrap",overflow:"auto",gap:"0.5rem",padding:"1rem 0","&::-webkit-scrollbar":{display:"none"}},children:pse.map(i=>ne(n,{checked:e.preferCategory.includes(i.id),setFilter:t,children:i},i.id))})}const gse={px:2,touchAction:"auto",".MuiSlider-root":{height:"1px",padding:"20px 0"},".MuiSlider-root > .MuiSlider-mark":{width:"10px",height:"10px",color:"#fff",backgroundColor:"#fff",border:`1px solid ${Ts}`,borderRadius:"50%",opacity:1},".MuiSlider-root .MuiSlider-markLabel":{fontSize:"10px !important",top:"40px"}},vL=[{value:1,label:"10m"},{value:50,label:"50m"},{value:100,label:"100m"}];function yse(){const[e,t]=Lc(F4),n=c=>{t(u=>({...u,searchRange:c}))};function i(c){return vL.findIndex(u=>u.value===c)+1}return ne(Eoe,{sx:gse,children:ne(Zie,{onChange:(c,u)=>n(u),value:e.searchRange,valueLabelFormat:i,step:null,valueLabelDisplay:"off",marks:vL,min:1,max:100})})}const vse={display:"flex",width:"100%",height:"100vh",alignItems:"center",justifyContent:"center",position:"fixed",touchAction:"auto",maxWidth:"444px",overflow:"hidden","& .lf-player-container":{position:"absolute",width:"100vh"},"& .wooyeonArea":{position:"absolute",top:"calc(50% - 20px)",left:"50%",transform:"translate(-50%, -50%)",width:"110%",aspectRatio:"1 / 1"},"& .radar_circle, & .radar_circle *":{border:"1px solid #c6c6c661",borderRadius:"50%",display:"flex",position:"absolute",alignItems:"center",justifyContent:"center",aspectRatio:"1 / 1"},"& > .radar_circle":{width:"110%",marginBottom:"40px",animation:"1.5s linear 1s infinite alternate a1"},"& .radar_circle > div":{width:"70%",animation:"1.5s linear 2s infinite alternate a1"},"& .radar_circle > div > div":{width:"50%",animation:"1.5s linear 3s infinite alternate a1"},"@keyframes a1":{from:{borderColor:"#c6c6c661"},to:{borderColor:"#4646467a"}}},hF={height:"65px",width:"100%",position:"fixed",bottom:0,cursor:"pointer",zIndex:99999};function _se(e){return{maxWidth:"444px",transform:"translate(-50%, 0)",left:"50%",bottom:e?0:58,zIndex:e?2e3:"initial",transition:"all 0.5s cubic-bezier(0, 0.85, 0.58, 1) 0s",position:"fixed",display:"flex",width:"100%",justifyContent:"center",gap:3,overflow:"hidden",padding:e?0:"1.5rem 0","& .search-btn":{transition:"all 0.5s cubic-bezier(0, 0.85, 0.58, 1) 0s",height:e?"3.5rem":"3rem",width:e?"100%":"11rem",minWidth:"10rem",maxWidth:"444px",borderRadius:e?"0":"1.5rem",padding:e?"2rem 0 4rem":"0 2rem"},"& .MuiButton-startIcon svg":{fontSize:"15px"},"& .MuiFab-root":{backgroundColor:"#ED6729",color:"#fff",display:"flex"},"& .MuiFab-root:hover":{backgroundColor:"#ED6729",opacity:.8},"& .hide_btn":{display:e?"none":"flex"}}}const xse=({open:e,searchItems:t,isLoading:n})=>{const{navigate:i}=Fo();return Yt(xn,{sx:_se(e),children:[ne(xn,{className:"hide_btn",sx:{width:"48px"}}),ne(cl,{variant:"contained",onClick:t,className:"search-btn",startIcon:!n&&ne(sF,{}),disabled:n,sx:{backgroundColor:Ts+"!important"},children:n?ne(Fee,{sx:{color:"#fff"},size:20}):"우연 찾아보기"}),ne(hte,{className:"hide_btn",size:"medium",onClick:()=>i("/add-post"),children:ne(lF,{})})]})};function fF(e){let t;e>50?t=50:e>30?t=34.5:t=16.5;const n=Math.random()*2*Math.PI,i=t*Math.cos(n),c=t*Math.sin(n);if(Math.abs(i)<=40&&c>=-40)return{x:i,y:c};const u=e-1;return fF(u)}function pF({setWooyeons:e,distance:t,image:n,post_id:i}){let c=[];if(e(p=>(c=p,p)),c.length>5)return;const u=fF(t);if(c.length===0)return _L({pos:u,image:n,post_id:i,setWooyeons:e});if(c.some(o=>Math.sqrt((u.x-o.pos.x)*(u.x-o.pos.x)+(u.y-o.pos.y)*(u.y-o.pos.y))<13))pF({setWooyeons:e,distance:t,image:n,post_id:i});else return _L({pos:u,image:n,post_id:i,setWooyeons:e})}function _L({pos:e,image:t,post_id:n,setWooyeons:i}){i(c=>c.length>6?c:[...c,{pos:e,image:t,post_id:n}])}const bse=async({setPosition:e})=>{await navigator.geolocation.getCurrentPosition(t=>{e({latitude:t.coords.latitude,longitude:t.coords.longitude})})},wse={1:.001,50:.05,100:.1},Sse=async({position:e,range:t,category:n})=>{if(e==null)return;let i="";return n.map((u,p)=>{i+=`category[${p}]=${u}`,n.length-1!==p&&(i+="&")}),console.log(e),await fetch(`${X5}/post/near?latitude=${e==null?void 0:e.latitude}&longitude=${e==null?void 0:e.longitude}&range=${wse[t]}&${i}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwidXNlcl9pZCI6IjEyOTAzODEwMjk4MyIsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNTE2MjM5MDIyfQ.pGdZm2StiLp1ksKdF5qlMOEg1QYBg9BUAo5xWZkIuEg"}}).then(u=>u.json())};var bf=function(){function e(){this.listeners=[]}var t=e.prototype;return t.subscribe=function(i){var c=this,u=i||function(){};return this.listeners.push(u),this.onSubscribe(),function(){c.listeners=c.listeners.filter(function(p){return p!==u}),c.onUnsubscribe()}},t.hasListeners=function(){return this.listeners.length>0},t.onSubscribe=function(){},t.onUnsubscribe=function(){},e}(),R_=typeof window>"u";function Hi(){}function Ese(e,t){return typeof e=="function"?e(t):e}function rE(e){return typeof e=="number"&&e>=0&&e!==1/0}function M_(e){return Array.isArray(e)?e:[e]}function mF(e,t){return Math.max(e+(t||0)-Date.now(),0)}function $v(e,t,n){return ly(e)?typeof t=="function"?ee({},n,{queryKey:e,queryFn:t}):ee({},t,{queryKey:e}):e}function Tse(e,t,n){return ly(e)?typeof t=="function"?ee({},n,{mutationKey:e,mutationFn:t}):ee({},t,{mutationKey:e}):typeof e=="function"?ee({},t,{mutationFn:e}):ee({},e)}function nc(e,t,n){return ly(e)?[ee({},t,{queryKey:e}),n]:[e||{},t]}function Cse(e,t){if(e===!0&&t===!0||e==null&&t==null)return"all";if(e===!1&&t===!1)return"none";var n=e??!t;return n?"active":"inactive"}function xL(e,t){var n=e.active,i=e.exact,c=e.fetching,u=e.inactive,p=e.predicate,o=e.queryKey,x=e.stale;if(ly(o)){if(i){if(t.queryHash!==LC(o,t.options))return!1}else if(!A_(t.queryKey,o))return!1}var S=Cse(n,u);if(S==="none")return!1;if(S!=="all"){var M=t.isActive();if(S==="active"&&!M||S==="inactive"&&M)return!1}return!(typeof x=="boolean"&&t.isStale()!==x||typeof c=="boolean"&&t.isFetching()!==c||p&&!p(t))}function bL(e,t){var n=e.exact,i=e.fetching,c=e.predicate,u=e.mutationKey;if(ly(u)){if(!t.options.mutationKey)return!1;if(n){if(Bu(t.options.mutationKey)!==Bu(u))return!1}else if(!A_(t.options.mutationKey,u))return!1}return!(typeof i=="boolean"&&t.state.status==="loading"!==i||c&&!c(t))}function LC(e,t){var n=(t==null?void 0:t.queryKeyHashFn)||Bu;return n(e)}function Bu(e){var t=M_(e);return Rse(t)}function Rse(e){return JSON.stringify(e,function(t,n){return iE(n)?Object.keys(n).sort().reduce(function(i,c){return i[c]=n[c],i},{}):n})}function A_(e,t){return gF(M_(e),M_(t))}function gF(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(function(n){return!gF(e[n],t[n])}):!1}function k_(e,t){if(e===t)return e;var n=Array.isArray(e)&&Array.isArray(t);if(n||iE(e)&&iE(t)){for(var i=n?e.length:Object.keys(e).length,c=n?t:Object.keys(t),u=c.length,p=n?[]:{},o=0,x=0;x<u;x++){var S=n?x:c[x];p[S]=k_(e[S],t[S]),p[S]===e[S]&&o++}return i===u&&o===i?e:p}return t}function Mse(e,t){if(e&&!t||t&&!e)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0}function iE(e){if(!wL(e))return!1;var t=e.constructor;if(typeof t>"u")return!0;var n=t.prototype;return!(!wL(n)||!n.hasOwnProperty("isPrototypeOf"))}function wL(e){return Object.prototype.toString.call(e)==="[object Object]"}function ly(e){return typeof e=="string"||Array.isArray(e)}function Ase(e){return new Promise(function(t){setTimeout(t,e)})}function SL(e){Promise.resolve().then(e).catch(function(t){return setTimeout(function(){throw t})})}function yF(){if(typeof AbortController=="function")return new AbortController}var kse=function(e){Oc(t,e);function t(){var i;return i=e.call(this)||this,i.setup=function(c){var u;if(!R_&&((u=window)!=null&&u.addEventListener)){var p=function(){return c()};return window.addEventListener("visibilitychange",p,!1),window.addEventListener("focus",p,!1),function(){window.removeEventListener("visibilitychange",p),window.removeEventListener("focus",p)}}},i}var n=t.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){if(!this.hasListeners()){var c;(c=this.cleanup)==null||c.call(this),this.cleanup=void 0}},n.setEventListener=function(c){var u,p=this;this.setup=c,(u=this.cleanup)==null||u.call(this),this.cleanup=c(function(o){typeof o=="boolean"?p.setFocused(o):p.onFocus()})},n.setFocused=function(c){this.focused=c,c&&this.onFocus()},n.onFocus=function(){this.listeners.forEach(function(c){c()})},n.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},t}(bf),ig=new kse,Pse=function(e){Oc(t,e);function t(){var i;return i=e.call(this)||this,i.setup=function(c){var u;if(!R_&&((u=window)!=null&&u.addEventListener)){var p=function(){return c()};return window.addEventListener("online",p,!1),window.addEventListener("offline",p,!1),function(){window.removeEventListener("online",p),window.removeEventListener("offline",p)}}},i}var n=t.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){if(!this.hasListeners()){var c;(c=this.cleanup)==null||c.call(this),this.cleanup=void 0}},n.setEventListener=function(c){var u,p=this;this.setup=c,(u=this.cleanup)==null||u.call(this),this.cleanup=c(function(o){typeof o=="boolean"?p.setOnline(o):p.onOnline()})},n.setOnline=function(c){this.online=c,c&&this.onOnline()},n.onOnline=function(){this.listeners.forEach(function(c){c()})},n.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},t}(bf),Uv=new Pse;function Ise(e){return Math.min(1e3*Math.pow(2,e),3e4)}function P_(e){return typeof(e==null?void 0:e.cancel)=="function"}var vF=function(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent};function jv(e){return e instanceof vF}var _F=function(t){var n=this,i=!1,c,u,p,o;this.abort=t.abort,this.cancel=function(L){return c==null?void 0:c(L)},this.cancelRetry=function(){i=!0},this.continueRetry=function(){i=!1},this.continue=function(){return u==null?void 0:u()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(L,j){p=L,o=j});var x=function(j){n.isResolved||(n.isResolved=!0,t.onSuccess==null||t.onSuccess(j),u==null||u(),p(j))},S=function(j){n.isResolved||(n.isResolved=!0,t.onError==null||t.onError(j),u==null||u(),o(j))},M=function(){return new Promise(function(j){u=j,n.isPaused=!0,t.onPause==null||t.onPause()}).then(function(){u=void 0,n.isPaused=!1,t.onContinue==null||t.onContinue()})},k=function L(){if(!n.isResolved){var j;try{j=t.fn()}catch(F){j=Promise.reject(F)}c=function(V){if(!n.isResolved&&(S(new vF(V)),n.abort==null||n.abort(),P_(j)))try{j.cancel()}catch{}},n.isTransportCancelable=P_(j),Promise.resolve(j).then(x).catch(function(F){var V,oe;if(!n.isResolved){var B=(V=t.retry)!=null?V:3,$=(oe=t.retryDelay)!=null?oe:Ise,Z=typeof $=="function"?$(n.failureCount,F):$,Q=B===!0||typeof B=="number"&&n.failureCount<B||typeof B=="function"&&B(n.failureCount,F);if(i||!Q){S(F);return}n.failureCount++,t.onFail==null||t.onFail(n.failureCount,F),Ase(Z).then(function(){if(!ig.isFocused()||!Uv.isOnline())return M()}).then(function(){i?S(F):L()})}})}};k()},Lse=function(){function e(){this.queue=[],this.transactions=0,this.notifyFn=function(n){n()},this.batchNotifyFn=function(n){n()}}var t=e.prototype;return t.batch=function(i){var c;this.transactions++;try{c=i()}finally{this.transactions--,this.transactions||this.flush()}return c},t.schedule=function(i){var c=this;this.transactions?this.queue.push(i):SL(function(){c.notifyFn(i)})},t.batchCalls=function(i){var c=this;return function(){for(var u=arguments.length,p=new Array(u),o=0;o<u;o++)p[o]=arguments[o];c.schedule(function(){i.apply(void 0,p)})}},t.flush=function(){var i=this,c=this.queue;this.queue=[],c.length&&SL(function(){i.batchNotifyFn(function(){c.forEach(function(u){i.notifyFn(u)})})})},t.setNotifyFunction=function(i){this.notifyFn=i},t.setBatchNotifyFunction=function(i){this.batchNotifyFn=i},e}(),Jr=new Lse,xF=console;function I_(){return xF}function Ose(e){xF=e}var Dse=function(){function e(n){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=n.defaultOptions,this.setOptions(n.options),this.observers=[],this.cache=n.cache,this.queryKey=n.queryKey,this.queryHash=n.queryHash,this.initialState=n.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=n.meta,this.scheduleGc()}var t=e.prototype;return t.setOptions=function(i){var c;this.options=ee({},this.defaultOptions,i),this.meta=i==null?void 0:i.meta,this.cacheTime=Math.max(this.cacheTime||0,(c=this.options.cacheTime)!=null?c:5*60*1e3)},t.setDefaultOptions=function(i){this.defaultOptions=i},t.scheduleGc=function(){var i=this;this.clearGcTimeout(),rE(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){i.optionalRemove()},this.cacheTime))},t.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},t.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},t.setData=function(i,c){var u,p,o=this.state.data,x=Ese(i,o);return(u=(p=this.options).isDataEqual)!=null&&u.call(p,o,x)?x=o:this.options.structuralSharing!==!1&&(x=k_(o,x)),this.dispatch({data:x,type:"success",dataUpdatedAt:c==null?void 0:c.updatedAt}),x},t.setState=function(i,c){this.dispatch({type:"setState",state:i,setStateOptions:c})},t.cancel=function(i){var c,u=this.promise;return(c=this.retryer)==null||c.cancel(i),u?u.then(Hi).catch(Hi):Promise.resolve()},t.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},t.reset=function(){this.destroy(),this.setState(this.initialState)},t.isActive=function(){return this.observers.some(function(i){return i.options.enabled!==!1})},t.isFetching=function(){return this.state.isFetching},t.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(i){return i.getCurrentResult().isStale})},t.isStaleByTime=function(i){return i===void 0&&(i=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!mF(this.state.dataUpdatedAt,i)},t.onFocus=function(){var i,c=this.observers.find(function(u){return u.shouldFetchOnWindowFocus()});c&&c.refetch(),(i=this.retryer)==null||i.continue()},t.onOnline=function(){var i,c=this.observers.find(function(u){return u.shouldFetchOnReconnect()});c&&c.refetch(),(i=this.retryer)==null||i.continue()},t.addObserver=function(i){this.observers.indexOf(i)===-1&&(this.observers.push(i),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:i}))},t.removeObserver=function(i){this.observers.indexOf(i)!==-1&&(this.observers=this.observers.filter(function(c){return c!==i}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:i}))},t.getObserversCount=function(){return this.observers.length},t.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},t.fetch=function(i,c){var u=this,p,o,x;if(this.state.isFetching){if(this.state.dataUpdatedAt&&(c!=null&&c.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var S;return(S=this.retryer)==null||S.continueRetry(),this.promise}}if(i&&this.setOptions(i),!this.options.queryFn){var M=this.observers.find(function($){return $.options.queryFn});M&&this.setOptions(M.options)}var k=M_(this.queryKey),L=yF(),j={queryKey:k,pageParam:void 0,meta:this.meta};Object.defineProperty(j,"signal",{enumerable:!0,get:function(){if(L)return u.abortSignalConsumed=!0,L.signal}});var F=function(){return u.options.queryFn?(u.abortSignalConsumed=!1,u.options.queryFn(j)):Promise.reject("Missing queryFn")},V={fetchOptions:c,options:this.options,queryKey:k,state:this.state,fetchFn:F,meta:this.meta};if((p=this.options.behavior)!=null&&p.onFetch){var oe;(oe=this.options.behavior)==null||oe.onFetch(V)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((o=V.fetchOptions)==null?void 0:o.meta)){var B;this.dispatch({type:"fetch",meta:(B=V.fetchOptions)==null?void 0:B.meta})}return this.retryer=new _F({fn:V.fetchFn,abort:L==null||(x=L.abort)==null?void 0:x.bind(L),onSuccess:function(Z){u.setData(Z),u.cache.config.onSuccess==null||u.cache.config.onSuccess(Z,u),u.cacheTime===0&&u.optionalRemove()},onError:function(Z){jv(Z)&&Z.silent||u.dispatch({type:"error",error:Z}),jv(Z)||(u.cache.config.onError==null||u.cache.config.onError(Z,u),I_().error(Z)),u.cacheTime===0&&u.optionalRemove()},onFail:function(){u.dispatch({type:"failed"})},onPause:function(){u.dispatch({type:"pause"})},onContinue:function(){u.dispatch({type:"continue"})},retry:V.options.retry,retryDelay:V.options.retryDelay}),this.promise=this.retryer.promise,this.promise},t.dispatch=function(i){var c=this;this.state=this.reducer(this.state,i),Jr.batch(function(){c.observers.forEach(function(u){u.onQueryUpdate(i)}),c.cache.notify({query:c,type:"queryUpdated",action:i})})},t.getDefaultState=function(i){var c=typeof i.initialData=="function"?i.initialData():i.initialData,u=typeof i.initialData<"u",p=u?typeof i.initialDataUpdatedAt=="function"?i.initialDataUpdatedAt():i.initialDataUpdatedAt:0,o=typeof c<"u";return{data:c,dataUpdateCount:0,dataUpdatedAt:o?p??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:o?"success":"idle"}},t.reducer=function(i,c){var u,p;switch(c.type){case"failed":return ee({},i,{fetchFailureCount:i.fetchFailureCount+1});case"pause":return ee({},i,{isPaused:!0});case"continue":return ee({},i,{isPaused:!1});case"fetch":return ee({},i,{fetchFailureCount:0,fetchMeta:(u=c.meta)!=null?u:null,isFetching:!0,isPaused:!1},!i.dataUpdatedAt&&{error:null,status:"loading"});case"success":return ee({},i,{data:c.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:(p=c.dataUpdatedAt)!=null?p:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var o=c.error;return jv(o)&&o.revert&&this.revertState?ee({},this.revertState):ee({},i,{error:o,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return ee({},i,{isInvalidated:!0});case"setState":return ee({},i,c.state);default:return i}},e}(),zse=function(e){Oc(t,e);function t(i){var c;return c=e.call(this)||this,c.config=i||{},c.queries=[],c.queriesMap={},c}var n=t.prototype;return n.build=function(c,u,p){var o,x=u.queryKey,S=(o=u.queryHash)!=null?o:LC(x,u),M=this.get(S);return M||(M=new Dse({cache:this,queryKey:x,queryHash:S,options:c.defaultQueryOptions(u),state:p,defaultOptions:c.getQueryDefaults(x),meta:u.meta}),this.add(M)),M},n.add=function(c){this.queriesMap[c.queryHash]||(this.queriesMap[c.queryHash]=c,this.queries.push(c),this.notify({type:"queryAdded",query:c}))},n.remove=function(c){var u=this.queriesMap[c.queryHash];u&&(c.destroy(),this.queries=this.queries.filter(function(p){return p!==c}),u===c&&delete this.queriesMap[c.queryHash],this.notify({type:"queryRemoved",query:c}))},n.clear=function(){var c=this;Jr.batch(function(){c.queries.forEach(function(u){c.remove(u)})})},n.get=function(c){return this.queriesMap[c]},n.getAll=function(){return this.queries},n.find=function(c,u){var p=nc(c,u),o=p[0];return typeof o.exact>"u"&&(o.exact=!0),this.queries.find(function(x){return xL(o,x)})},n.findAll=function(c,u){var p=nc(c,u),o=p[0];return Object.keys(o).length>0?this.queries.filter(function(x){return xL(o,x)}):this.queries},n.notify=function(c){var u=this;Jr.batch(function(){u.listeners.forEach(function(p){p(c)})})},n.onFocus=function(){var c=this;Jr.batch(function(){c.queries.forEach(function(u){u.onFocus()})})},n.onOnline=function(){var c=this;Jr.batch(function(){c.queries.forEach(function(u){u.onOnline()})})},t}(bf),Fse=function(){function e(n){this.options=ee({},n.defaultOptions,n.options),this.mutationId=n.mutationId,this.mutationCache=n.mutationCache,this.observers=[],this.state=n.state||bF(),this.meta=n.meta}var t=e.prototype;return t.setState=function(i){this.dispatch({type:"setState",state:i})},t.addObserver=function(i){this.observers.indexOf(i)===-1&&this.observers.push(i)},t.removeObserver=function(i){this.observers=this.observers.filter(function(c){return c!==i})},t.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(Hi).catch(Hi)):Promise.resolve()},t.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},t.execute=function(){var i=this,c,u=this.state.status==="loading",p=Promise.resolve();return u||(this.dispatch({type:"loading",variables:this.options.variables}),p=p.then(function(){i.mutationCache.config.onMutate==null||i.mutationCache.config.onMutate(i.state.variables,i)}).then(function(){return i.options.onMutate==null?void 0:i.options.onMutate(i.state.variables)}).then(function(o){o!==i.state.context&&i.dispatch({type:"loading",context:o,variables:i.state.variables})})),p.then(function(){return i.executeMutation()}).then(function(o){c=o,i.mutationCache.config.onSuccess==null||i.mutationCache.config.onSuccess(c,i.state.variables,i.state.context,i)}).then(function(){return i.options.onSuccess==null?void 0:i.options.onSuccess(c,i.state.variables,i.state.context)}).then(function(){return i.options.onSettled==null?void 0:i.options.onSettled(c,null,i.state.variables,i.state.context)}).then(function(){return i.dispatch({type:"success",data:c}),c}).catch(function(o){return i.mutationCache.config.onError==null||i.mutationCache.config.onError(o,i.state.variables,i.state.context,i),I_().error(o),Promise.resolve().then(function(){return i.options.onError==null?void 0:i.options.onError(o,i.state.variables,i.state.context)}).then(function(){return i.options.onSettled==null?void 0:i.options.onSettled(void 0,o,i.state.variables,i.state.context)}).then(function(){throw i.dispatch({type:"error",error:o}),o})})},t.executeMutation=function(){var i=this,c;return this.retryer=new _F({fn:function(){return i.options.mutationFn?i.options.mutationFn(i.state.variables):Promise.reject("No mutationFn found")},onFail:function(){i.dispatch({type:"failed"})},onPause:function(){i.dispatch({type:"pause"})},onContinue:function(){i.dispatch({type:"continue"})},retry:(c=this.options.retry)!=null?c:0,retryDelay:this.options.retryDelay}),this.retryer.promise},t.dispatch=function(i){var c=this;this.state=Bse(this.state,i),Jr.batch(function(){c.observers.forEach(function(u){u.onMutationUpdate(i)}),c.mutationCache.notify(c)})},e}();function bF(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function Bse(e,t){switch(t.type){case"failed":return ee({},e,{failureCount:e.failureCount+1});case"pause":return ee({},e,{isPaused:!0});case"continue":return ee({},e,{isPaused:!1});case"loading":return ee({},e,{context:t.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:t.variables});case"success":return ee({},e,{data:t.data,error:null,status:"success",isPaused:!1});case"error":return ee({},e,{data:void 0,error:t.error,failureCount:e.failureCount+1,isPaused:!1,status:"error"});case"setState":return ee({},e,t.state);default:return e}}var Nse=function(e){Oc(t,e);function t(i){var c;return c=e.call(this)||this,c.config=i||{},c.mutations=[],c.mutationId=0,c}var n=t.prototype;return n.build=function(c,u,p){var o=new Fse({mutationCache:this,mutationId:++this.mutationId,options:c.defaultMutationOptions(u),state:p,defaultOptions:u.mutationKey?c.getMutationDefaults(u.mutationKey):void 0,meta:u.meta});return this.add(o),o},n.add=function(c){this.mutations.push(c),this.notify(c)},n.remove=function(c){this.mutations=this.mutations.filter(function(u){return u!==c}),c.cancel(),this.notify(c)},n.clear=function(){var c=this;Jr.batch(function(){c.mutations.forEach(function(u){c.remove(u)})})},n.getAll=function(){return this.mutations},n.find=function(c){return typeof c.exact>"u"&&(c.exact=!0),this.mutations.find(function(u){return bL(c,u)})},n.findAll=function(c){return this.mutations.filter(function(u){return bL(c,u)})},n.notify=function(c){var u=this;Jr.batch(function(){u.listeners.forEach(function(p){p(c)})})},n.onFocus=function(){this.resumePausedMutations()},n.onOnline=function(){this.resumePausedMutations()},n.resumePausedMutations=function(){var c=this.mutations.filter(function(u){return u.state.isPaused});return Jr.batch(function(){return c.reduce(function(u,p){return u.then(function(){return p.continue().catch(Hi)})},Promise.resolve())})},t}(bf);function $se(){return{onFetch:function(t){t.fetchFn=function(){var n,i,c,u,p,o,x=(n=t.fetchOptions)==null||(i=n.meta)==null?void 0:i.refetchPage,S=(c=t.fetchOptions)==null||(u=c.meta)==null?void 0:u.fetchMore,M=S==null?void 0:S.pageParam,k=(S==null?void 0:S.direction)==="forward",L=(S==null?void 0:S.direction)==="backward",j=((p=t.state.data)==null?void 0:p.pages)||[],F=((o=t.state.data)==null?void 0:o.pageParams)||[],V=yF(),oe=V==null?void 0:V.signal,B=F,$=!1,Z=t.options.queryFn||function(){return Promise.reject("Missing queryFn")},Q=function(Ae,Ze,Qe,gt){return B=gt?[Ze].concat(B):[].concat(B,[Ze]),gt?[Qe].concat(Ae):[].concat(Ae,[Qe])},ae=function(Ae,Ze,Qe,gt){if($)return Promise.reject("Cancelled");if(typeof Qe>"u"&&!Ze&&Ae.length)return Promise.resolve(Ae);var Me={queryKey:t.queryKey,signal:oe,pageParam:Qe,meta:t.meta},Ce=Z(Me),Te=Promise.resolve(Ce).then(function(we){return Q(Ae,Qe,we,gt)});if(P_(Ce)){var Ve=Te;Ve.cancel=Ce.cancel}return Te},ue;if(!j.length)ue=ae([]);else if(k){var de=typeof M<"u",ke=de?M:EL(t.options,j);ue=ae(j,de,ke)}else if(L){var J=typeof M<"u",G=J?M:Use(t.options,j);ue=ae(j,J,G,!0)}else(function(){B=[];var Ge=typeof t.options.getNextPageParam>"u",Ae=x&&j[0]?x(j[0],0,j):!0;ue=Ae?ae([],Ge,F[0]):Promise.resolve(Q([],F[0],j[0]));for(var Ze=function(Me){ue=ue.then(function(Ce){var Te=x&&j[Me]?x(j[Me],Me,j):!0;if(Te){var Ve=Ge?F[Me]:EL(t.options,Ce);return ae(Ce,Ge,Ve)}return Promise.resolve(Q(Ce,F[Me],j[Me]))})},Qe=1;Qe<j.length;Qe++)Ze(Qe)})();var pe=ue.then(function(Ge){return{pages:Ge,pageParams:B}}),$e=pe;return $e.cancel=function(){$=!0,V==null||V.abort(),P_(ue)&&ue.cancel()},pe}}}}function EL(e,t){return e.getNextPageParam==null?void 0:e.getNextPageParam(t[t.length-1],t)}function Use(e,t){return e.getPreviousPageParam==null?void 0:e.getPreviousPageParam(t[0],t)}var jse=function(){function e(n){n===void 0&&(n={}),this.queryCache=n.queryCache||new zse,this.mutationCache=n.mutationCache||new Nse,this.defaultOptions=n.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var t=e.prototype;return t.mount=function(){var i=this;this.unsubscribeFocus=ig.subscribe(function(){ig.isFocused()&&Uv.isOnline()&&(i.mutationCache.onFocus(),i.queryCache.onFocus())}),this.unsubscribeOnline=Uv.subscribe(function(){ig.isFocused()&&Uv.isOnline()&&(i.mutationCache.onOnline(),i.queryCache.onOnline())})},t.unmount=function(){var i,c;(i=this.unsubscribeFocus)==null||i.call(this),(c=this.unsubscribeOnline)==null||c.call(this)},t.isFetching=function(i,c){var u=nc(i,c),p=u[0];return p.fetching=!0,this.queryCache.findAll(p).length},t.isMutating=function(i){return this.mutationCache.findAll(ee({},i,{fetching:!0})).length},t.getQueryData=function(i,c){var u;return(u=this.queryCache.find(i,c))==null?void 0:u.state.data},t.getQueriesData=function(i){return this.getQueryCache().findAll(i).map(function(c){var u=c.queryKey,p=c.state,o=p.data;return[u,o]})},t.setQueryData=function(i,c,u){var p=$v(i),o=this.defaultQueryOptions(p);return this.queryCache.build(this,o).setData(c,u)},t.setQueriesData=function(i,c,u){var p=this;return Jr.batch(function(){return p.getQueryCache().findAll(i).map(function(o){var x=o.queryKey;return[x,p.setQueryData(x,c,u)]})})},t.getQueryState=function(i,c){var u;return(u=this.queryCache.find(i,c))==null?void 0:u.state},t.removeQueries=function(i,c){var u=nc(i,c),p=u[0],o=this.queryCache;Jr.batch(function(){o.findAll(p).forEach(function(x){o.remove(x)})})},t.resetQueries=function(i,c,u){var p=this,o=nc(i,c,u),x=o[0],S=o[1],M=this.queryCache,k=ee({},x,{active:!0});return Jr.batch(function(){return M.findAll(x).forEach(function(L){L.reset()}),p.refetchQueries(k,S)})},t.cancelQueries=function(i,c,u){var p=this,o=nc(i,c,u),x=o[0],S=o[1],M=S===void 0?{}:S;typeof M.revert>"u"&&(M.revert=!0);var k=Jr.batch(function(){return p.queryCache.findAll(x).map(function(L){return L.cancel(M)})});return Promise.all(k).then(Hi).catch(Hi)},t.invalidateQueries=function(i,c,u){var p,o,x,S=this,M=nc(i,c,u),k=M[0],L=M[1],j=ee({},k,{active:(p=(o=k.refetchActive)!=null?o:k.active)!=null?p:!0,inactive:(x=k.refetchInactive)!=null?x:!1});return Jr.batch(function(){return S.queryCache.findAll(k).forEach(function(F){F.invalidate()}),S.refetchQueries(j,L)})},t.refetchQueries=function(i,c,u){var p=this,o=nc(i,c,u),x=o[0],S=o[1],M=Jr.batch(function(){return p.queryCache.findAll(x).map(function(L){return L.fetch(void 0,ee({},S,{meta:{refetchPage:x==null?void 0:x.refetchPage}}))})}),k=Promise.all(M).then(Hi);return S!=null&&S.throwOnError||(k=k.catch(Hi)),k},t.fetchQuery=function(i,c,u){var p=$v(i,c,u),o=this.defaultQueryOptions(p);typeof o.retry>"u"&&(o.retry=!1);var x=this.queryCache.build(this,o);return x.isStaleByTime(o.staleTime)?x.fetch(o):Promise.resolve(x.state.data)},t.prefetchQuery=function(i,c,u){return this.fetchQuery(i,c,u).then(Hi).catch(Hi)},t.fetchInfiniteQuery=function(i,c,u){var p=$v(i,c,u);return p.behavior=$se(),this.fetchQuery(p)},t.prefetchInfiniteQuery=function(i,c,u){return this.fetchInfiniteQuery(i,c,u).then(Hi).catch(Hi)},t.cancelMutations=function(){var i=this,c=Jr.batch(function(){return i.mutationCache.getAll().map(function(u){return u.cancel()})});return Promise.all(c).then(Hi).catch(Hi)},t.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},t.executeMutation=function(i){return this.mutationCache.build(this,i).execute()},t.getQueryCache=function(){return this.queryCache},t.getMutationCache=function(){return this.mutationCache},t.getDefaultOptions=function(){return this.defaultOptions},t.setDefaultOptions=function(i){this.defaultOptions=i},t.setQueryDefaults=function(i,c){var u=this.queryDefaults.find(function(p){return Bu(i)===Bu(p.queryKey)});u?u.defaultOptions=c:this.queryDefaults.push({queryKey:i,defaultOptions:c})},t.getQueryDefaults=function(i){var c;return i?(c=this.queryDefaults.find(function(u){return A_(i,u.queryKey)}))==null?void 0:c.defaultOptions:void 0},t.setMutationDefaults=function(i,c){var u=this.mutationDefaults.find(function(p){return Bu(i)===Bu(p.mutationKey)});u?u.defaultOptions=c:this.mutationDefaults.push({mutationKey:i,defaultOptions:c})},t.getMutationDefaults=function(i){var c;return i?(c=this.mutationDefaults.find(function(u){return A_(i,u.mutationKey)}))==null?void 0:c.defaultOptions:void 0},t.defaultQueryOptions=function(i){if(i!=null&&i._defaulted)return i;var c=ee({},this.defaultOptions.queries,this.getQueryDefaults(i==null?void 0:i.queryKey),i,{_defaulted:!0});return!c.queryHash&&c.queryKey&&(c.queryHash=LC(c.queryKey,c)),c},t.defaultQueryObserverOptions=function(i){return this.defaultQueryOptions(i)},t.defaultMutationOptions=function(i){return i!=null&&i._defaulted?i:ee({},this.defaultOptions.mutations,this.getMutationDefaults(i==null?void 0:i.mutationKey),i,{_defaulted:!0})},t.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},e}(),Vse=function(e){Oc(t,e);function t(i,c){var u;return u=e.call(this)||this,u.client=i,u.options=c,u.trackedProps=[],u.selectError=null,u.bindMethods(),u.setOptions(c),u}var n=t.prototype;return n.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},n.onSubscribe=function(){this.listeners.length===1&&(this.currentQuery.addObserver(this),TL(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},n.onUnsubscribe=function(){this.listeners.length||this.destroy()},n.shouldFetchOnReconnect=function(){return oE(this.currentQuery,this.options,this.options.refetchOnReconnect)},n.shouldFetchOnWindowFocus=function(){return oE(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},n.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},n.setOptions=function(c,u){var p=this.options,o=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(c),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=p.queryKey),this.updateQuery();var x=this.hasListeners();x&&CL(this.currentQuery,o,this.options,p)&&this.executeFetch(),this.updateResult(u),x&&(this.currentQuery!==o||this.options.enabled!==p.enabled||this.options.staleTime!==p.staleTime)&&this.updateStaleTimeout();var S=this.computeRefetchInterval();x&&(this.currentQuery!==o||this.options.enabled!==p.enabled||S!==this.currentRefetchInterval)&&this.updateRefetchInterval(S)},n.getOptimisticResult=function(c){var u=this.client.defaultQueryObserverOptions(c),p=this.client.getQueryCache().build(this.client,u);return this.createResult(p,u)},n.getCurrentResult=function(){return this.currentResult},n.trackResult=function(c,u){var p=this,o={},x=function(M){p.trackedProps.includes(M)||p.trackedProps.push(M)};return Object.keys(c).forEach(function(S){Object.defineProperty(o,S,{configurable:!1,enumerable:!0,get:function(){return x(S),c[S]}})}),(u.useErrorBoundary||u.suspense)&&x("error"),o},n.getNextResult=function(c){var u=this;return new Promise(function(p,o){var x=u.subscribe(function(S){S.isFetching||(x(),S.isError&&(c!=null&&c.throwOnError)?o(S.error):p(S))})})},n.getCurrentQuery=function(){return this.currentQuery},n.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},n.refetch=function(c){return this.fetch(ee({},c,{meta:{refetchPage:c==null?void 0:c.refetchPage}}))},n.fetchOptimistic=function(c){var u=this,p=this.client.defaultQueryObserverOptions(c),o=this.client.getQueryCache().build(this.client,p);return o.fetch().then(function(){return u.createResult(o,p)})},n.fetch=function(c){var u=this;return this.executeFetch(c).then(function(){return u.updateResult(),u.currentResult})},n.executeFetch=function(c){this.updateQuery();var u=this.currentQuery.fetch(this.options,c);return c!=null&&c.throwOnError||(u=u.catch(Hi)),u},n.updateStaleTimeout=function(){var c=this;if(this.clearStaleTimeout(),!(R_||this.currentResult.isStale||!rE(this.options.staleTime))){var u=mF(this.currentResult.dataUpdatedAt,this.options.staleTime),p=u+1;this.staleTimeoutId=setTimeout(function(){c.currentResult.isStale||c.updateResult()},p)}},n.computeRefetchInterval=function(){var c;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(c=this.options.refetchInterval)!=null?c:!1},n.updateRefetchInterval=function(c){var u=this;this.clearRefetchInterval(),this.currentRefetchInterval=c,!(R_||this.options.enabled===!1||!rE(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(function(){(u.options.refetchIntervalInBackground||ig.isFocused())&&u.executeFetch()},this.currentRefetchInterval))},n.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},n.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},n.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},n.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},n.createResult=function(c,u){var p=this.currentQuery,o=this.options,x=this.currentResult,S=this.currentResultState,M=this.currentResultOptions,k=c!==p,L=k?c.state:this.currentQueryInitialState,j=k?this.currentResult:this.previousQueryResult,F=c.state,V=F.dataUpdatedAt,oe=F.error,B=F.errorUpdatedAt,$=F.isFetching,Z=F.status,Q=!1,ae=!1,ue;if(u.optimisticResults){var de=this.hasListeners(),ke=!de&&TL(c,u),J=de&&CL(c,p,u,o);(ke||J)&&($=!0,V||(Z="loading"))}if(u.keepPreviousData&&!F.dataUpdateCount&&(j!=null&&j.isSuccess)&&Z!=="error")ue=j.data,V=j.dataUpdatedAt,Z=j.status,Q=!0;else if(u.select&&typeof F.data<"u")if(x&&F.data===(S==null?void 0:S.data)&&u.select===this.selectFn)ue=this.selectResult;else try{this.selectFn=u.select,ue=u.select(F.data),u.structuralSharing!==!1&&(ue=k_(x==null?void 0:x.data,ue)),this.selectResult=ue,this.selectError=null}catch($e){I_().error($e),this.selectError=$e}else ue=F.data;if(typeof u.placeholderData<"u"&&typeof ue>"u"&&(Z==="loading"||Z==="idle")){var G;if(x!=null&&x.isPlaceholderData&&u.placeholderData===(M==null?void 0:M.placeholderData))G=x.data;else if(G=typeof u.placeholderData=="function"?u.placeholderData():u.placeholderData,u.select&&typeof G<"u")try{G=u.select(G),u.structuralSharing!==!1&&(G=k_(x==null?void 0:x.data,G)),this.selectError=null}catch($e){I_().error($e),this.selectError=$e}typeof G<"u"&&(Z="success",ue=G,ae=!0)}this.selectError&&(oe=this.selectError,ue=this.selectResult,B=Date.now(),Z="error");var pe={status:Z,isLoading:Z==="loading",isSuccess:Z==="success",isError:Z==="error",isIdle:Z==="idle",data:ue,dataUpdatedAt:V,error:oe,errorUpdatedAt:B,failureCount:F.fetchFailureCount,errorUpdateCount:F.errorUpdateCount,isFetched:F.dataUpdateCount>0||F.errorUpdateCount>0,isFetchedAfterMount:F.dataUpdateCount>L.dataUpdateCount||F.errorUpdateCount>L.errorUpdateCount,isFetching:$,isRefetching:$&&Z!=="loading",isLoadingError:Z==="error"&&F.dataUpdatedAt===0,isPlaceholderData:ae,isPreviousData:Q,isRefetchError:Z==="error"&&F.dataUpdatedAt!==0,isStale:OC(c,u),refetch:this.refetch,remove:this.remove};return pe},n.shouldNotifyListeners=function(c,u){if(!u)return!0;var p=this.options,o=p.notifyOnChangeProps,x=p.notifyOnChangePropsExclusions;if(!o&&!x||o==="tracked"&&!this.trackedProps.length)return!0;var S=o==="tracked"?this.trackedProps:o;return Object.keys(c).some(function(M){var k=M,L=c[k]!==u[k],j=S==null?void 0:S.some(function(V){return V===M}),F=x==null?void 0:x.some(function(V){return V===M});return L&&!F&&(!S||j)})},n.updateResult=function(c){var u=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!Mse(this.currentResult,u)){var p={cache:!0};(c==null?void 0:c.listeners)!==!1&&this.shouldNotifyListeners(this.currentResult,u)&&(p.listeners=!0),this.notify(ee({},p,c))}},n.updateQuery=function(){var c=this.client.getQueryCache().build(this.client,this.options);if(c!==this.currentQuery){var u=this.currentQuery;this.currentQuery=c,this.currentQueryInitialState=c.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(u==null||u.removeObserver(this),c.addObserver(this))}},n.onQueryUpdate=function(c){var u={};c.type==="success"?u.onSuccess=!0:c.type==="error"&&!jv(c.error)&&(u.onError=!0),this.updateResult(u),this.hasListeners()&&this.updateTimers()},n.notify=function(c){var u=this;Jr.batch(function(){c.onSuccess?(u.options.onSuccess==null||u.options.onSuccess(u.currentResult.data),u.options.onSettled==null||u.options.onSettled(u.currentResult.data,null)):c.onError&&(u.options.onError==null||u.options.onError(u.currentResult.error),u.options.onSettled==null||u.options.onSettled(void 0,u.currentResult.error)),c.listeners&&u.listeners.forEach(function(p){p(u.currentResult)}),c.cache&&u.client.getQueryCache().notify({query:u.currentQuery,type:"observerResultsUpdated"})})},t}(bf);function Gse(e,t){return t.enabled!==!1&&!e.state.dataUpdatedAt&&!(e.state.status==="error"&&t.retryOnMount===!1)}function TL(e,t){return Gse(e,t)||e.state.dataUpdatedAt>0&&oE(e,t,t.refetchOnMount)}function oE(e,t,n){if(t.enabled!==!1){var i=typeof n=="function"?n(e):n;return i==="always"||i!==!1&&OC(e,t)}return!1}function CL(e,t,n,i){return n.enabled!==!1&&(e!==t||i.enabled===!1)&&(!n.suspense||e.state.status!=="error")&&OC(e,n)}function OC(e,t){return e.isStaleByTime(t.staleTime)}var Wse=function(e){Oc(t,e);function t(i,c){var u;return u=e.call(this)||this,u.client=i,u.setOptions(c),u.bindMethods(),u.updateResult(),u}var n=t.prototype;return n.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},n.setOptions=function(c){this.options=this.client.defaultMutationOptions(c)},n.onUnsubscribe=function(){if(!this.listeners.length){var c;(c=this.currentMutation)==null||c.removeObserver(this)}},n.onMutationUpdate=function(c){this.updateResult();var u={listeners:!0};c.type==="success"?u.onSuccess=!0:c.type==="error"&&(u.onError=!0),this.notify(u)},n.getCurrentResult=function(){return this.currentResult},n.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},n.mutate=function(c,u){return this.mutateOptions=u,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,ee({},this.options,{variables:typeof c<"u"?c:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},n.updateResult=function(){var c=this.currentMutation?this.currentMutation.state:bF(),u=ee({},c,{isLoading:c.status==="loading",isSuccess:c.status==="success",isError:c.status==="error",isIdle:c.status==="idle",mutate:this.mutate,reset:this.reset});this.currentResult=u},n.notify=function(c){var u=this;Jr.batch(function(){u.mutateOptions&&(c.onSuccess?(u.mutateOptions.onSuccess==null||u.mutateOptions.onSuccess(u.currentResult.data,u.currentResult.variables,u.currentResult.context),u.mutateOptions.onSettled==null||u.mutateOptions.onSettled(u.currentResult.data,null,u.currentResult.variables,u.currentResult.context)):c.onError&&(u.mutateOptions.onError==null||u.mutateOptions.onError(u.currentResult.error,u.currentResult.variables,u.currentResult.context),u.mutateOptions.onSettled==null||u.mutateOptions.onSettled(void 0,u.currentResult.error,u.currentResult.variables,u.currentResult.context))),c.listeners&&u.listeners.forEach(function(p){p(u.currentResult)})})},t}(bf),qse=Rh.unstable_batchedUpdates;Jr.setBatchNotifyFunction(qse);var Hse=console;Ose(Hse);var RL=Xe.createContext(void 0),wF=Xe.createContext(!1);function SF(e){return e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=RL),window.ReactQueryClientContext):RL}var EF=function(){var t=Xe.useContext(SF(Xe.useContext(wF)));if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Zse=function(t){var n=t.client,i=t.contextSharing,c=i===void 0?!1:i,u=t.children;Xe.useEffect(function(){return n.mount(),function(){n.unmount()}},[n]);var p=SF(c);return Xe.createElement(wF.Provider,{value:c},Xe.createElement(p.Provider,{value:n},u))};function Xse(){var e=!1;return{clearReset:function(){e=!1},reset:function(){e=!0},isReset:function(){return e}}}var Kse=Xe.createContext(Xse()),Yse=function(){return Xe.useContext(Kse)};function TF(e,t,n){return typeof t=="function"?t.apply(void 0,n):typeof t=="boolean"?t:!!e}function Qse(e,t,n){var i=Xe.useRef(!1),c=Xe.useState(0),u=c[1],p=Tse(e,t,n),o=EF(),x=Xe.useRef();x.current?x.current.setOptions(p):x.current=new Wse(o,p);var S=x.current.getCurrentResult();Xe.useEffect(function(){i.current=!0;var k=x.current.subscribe(Jr.batchCalls(function(){i.current&&u(function(L){return L+1})}));return function(){i.current=!1,k()}},[]);var M=Xe.useCallback(function(k,L){x.current.mutate(k,L).catch(Hi)},[]);if(S.error&&TF(void 0,x.current.options.useErrorBoundary,[S.error]))throw S.error;return ee({},S,{mutate:M,mutateAsync:S.mutate})}function Jse(e,t){var n=Xe.useRef(!1),i=Xe.useState(0),c=i[1],u=EF(),p=Yse(),o=u.defaultQueryObserverOptions(e);o.optimisticResults=!0,o.onError&&(o.onError=Jr.batchCalls(o.onError)),o.onSuccess&&(o.onSuccess=Jr.batchCalls(o.onSuccess)),o.onSettled&&(o.onSettled=Jr.batchCalls(o.onSettled)),o.suspense&&(typeof o.staleTime!="number"&&(o.staleTime=1e3),o.cacheTime===0&&(o.cacheTime=1)),(o.suspense||o.useErrorBoundary)&&(p.isReset()||(o.retryOnMount=!1));var x=Xe.useState(function(){return new t(u,o)}),S=x[0],M=S.getOptimisticResult(o);if(Xe.useEffect(function(){n.current=!0,p.clearReset();var k=S.subscribe(Jr.batchCalls(function(){n.current&&c(function(L){return L+1})}));return S.updateResult(),function(){n.current=!1,k()}},[p,S]),Xe.useEffect(function(){S.setOptions(o,{listeners:!1})},[o,S]),o.suspense&&M.isLoading)throw S.fetchOptimistic(o).then(function(k){var L=k.data;o.onSuccess==null||o.onSuccess(L),o.onSettled==null||o.onSettled(L,null)}).catch(function(k){p.clearReset(),o.onError==null||o.onError(k),o.onSettled==null||o.onSettled(void 0,k)});if(M.isError&&!p.isReset()&&!M.isFetching&&TF(o.suspense,o.useErrorBoundary,[M.error,S.getCurrentQuery()]))throw M.error;return o.notifyOnChangeProps==="tracked"&&(M=S.trackResult(M,o)),M}function ele(e,t,n){var i=$v(e,t,n);return Jse(i,Vse)}const tle=()=>{const{navigate:e}=Fo(),{open:t,Drawer:n,toggleDrawer:i}=dF(),[c,u]=X.useState([]),[p,o]=X.useState(void 0),[x,S]=Lc(F4),M="ontouchstart"in window,k=()=>{c.length>5&&u([]),t&&i(),L()};X.useEffect(()=>{p!==void 0&&L()},[p]),X.useEffect(()=>{p===void 0&&bse({setPosition:o})},[navigator]);const{mutate:L,isLoading:j}=Qse("get",()=>Sse({position:p,range:x.searchRange,category:x.preferCategory}),{onMutate(){u([])},onSuccess:F=>{console.log(F),F!==void 0&&F.forEach((V,oe)=>{setTimeout(()=>{pF({setWooyeons:u,post_id:V.post_id,distance:70*Math.random(),image:V.image[0].img_url})},100*oe+50*Math.random())})}});return Yt(Cc,{children:[ne(Qg,{styles:{".use_drawer > .MuiPaper-root":{paddingBottom:"6rem"}}}),Yt(xn,{sx:vse,children:[ne("div",{className:"radar_circle",children:ne("div",{children:ne("div",{})})}),ne(Rr,{variant:"h5",sx:{marginBottom:"40px"},children:"🍀"}),ne(xn,{className:"wooyeonArea",children:c.map((F,V)=>ne(cse,{post_id:F.post_id,image:F.image,pos:F.pos,onClick:()=>e(`detail/${F.post_id}`)},F.image+V.toString()))})]}),ne(xse,{open:t,searchItems:k,navigate:e,isLoading:j}),!M&&ne(xn,{onClick:i,sx:hF}),ne(n,{open:t,toggleDrawer:i,drawerBleeding:65,children:Yt(xn,{children:[ne(Rr,{variant:"h6",children:"카테고리 선택"}),ne(mse,{filter:x,setFilter:S}),ne(Rr,{variant:"h6",children:"범위 설정"}),ne(yse,{})]})})]})},nle={height:"100%",paddingBottom:2,"& .drawerHeader":{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",paddingBottom:1,px:1},"& .calendarHeader":{display:"flex",alignItems:"center",width:"100%",gap:"7px"},"& .calendarHeader .MuiTypography-root":{width:"calc(100% / 7 - 6px)",color:"#444",textAlign:"center"},"& .calendarHeader span:nth-of-type(1)":{color:"#FF4141"},"& .calendarHeader .MuiTypography-root:nth-last-of-type(1)":{color:"#679BFF"}},rle=["S","M","T","W","T","F","S"],ile=e=>Yt(xn,{sx:nle,children:[Yt(xn,{className:"drawerHeader",children:[ne(Rr,{variant:"h6",children:"Calendar"}),ne(Rr,{variant:"body2",children:e})]}),ne(xn,{className:"calendarHeader",children:rle.map((t,n)=>ne(Rr,{variant:"caption",children:t},t+n))})]}),ole={width:"100%",display:"flex",flexWrap:"wrap",rowGap:"5px",paddingBottom:5,"& .calendarItem":{width:"calc((100% / 7) - 8px)",margin:"4px",aspectRatio:"1",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#EEF1EE",borderRadius:"50%"},"& .weekendItem":{backgroundColor:"#d8dbd8"},"& .todayItem":{backgroundColor:"#ED6729",color:"#fff"},"& .disableItem":{opacity:.3},"& .calendarItem:hover":{opacity:.8},"& .disableItem:hover":{opacity:.3}},ale=({root:e,rootMargin:t="0px",threshold:n=0,onIntersect:i})=>{const[c,u]=X.useState(null);return X.useEffect(()=>{if(!c)return;const p=new IntersectionObserver(i,{root:e,rootMargin:t,threshold:n});return p.observe(c),()=>p.unobserve(c)},[i,e,t,c,n]),{setTarget:u}};function sle(e){const n=e,i=[],c=new Date(n.getTime()-864e5*100),u=new Date(n.getTime()+864e5*14);let p=c;for(;p<=u;)i.push(p),p=new Date(p.getTime()+864e5);return i}function lle({setDisplayDate:e}){const t=new Date;console.log(t.getMonth()+1,t.getFullYear(),t.getDate()),t.setHours(0,0,0,0);const n=X.useRef(null),i=sle(t);X.useEffect(()=>{var p,o;n.current&&((o=(p=n.current)==null?void 0:p.querySelector(".todayItem"))==null||o.scrollIntoView({block:"center"}))},[]);const c=([{isIntersecting:p}])=>{console.log(`감지결과 : ${p}`),e(`${t.getFullYear()}.${(t.getMonth()+1).toString().padStart(2,"0")}`)},{setTarget:u}=ale({onIntersect:c});return Yt(xn,{sx:ole,ref:n,children:[ne(xn,{sx:{width:`calc((100% / 7) * ${i[0].getDay()})`}}),i.map(p=>{let o="calendarItem";return p.getTime()===t.getTime()?o+=" todayItem":(p.getDay()%6===0&&(o+=" weekendItem"),p.getDate()===1&&(o+=" monthItem"),p.getTime()>t.getTime()&&(o+=" disableItem")),ne("div",{className:o,ref:p.getTime()===t.getTime()?u:null,children:p.getDate()},p.toString())})]})}const cle="modulepreload",ule=function(e){return"/"+e},ML={},dle=function(t,n,i){if(!n||n.length===0)return t();const c=document.getElementsByTagName("link");return Promise.all(n.map(u=>{if(u=ule(u),u in ML)return;ML[u]=!0;const p=u.endsWith(".css"),o=p?'[rel="stylesheet"]':"";if(!!i)for(let M=c.length-1;M>=0;M--){const k=c[M];if(k.href===u&&(!p||k.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${o}`))return;const S=document.createElement("link");if(S.rel=p?"stylesheet":cle,p||(S.as="script",S.crossOrigin=""),S.href=u,document.head.appendChild(S),p)return new Promise((M,k)=>{S.addEventListener("load",M),S.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${u}`)))})})).then(()=>t())},hle=X.createContext(null);function fle(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function AL(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function kL(e,t){const n=t.viewState||t;let i=!1;if("longitude"in n&&"latitude"in n){const c=e.center;e.center=new c.constructor(n.longitude,n.latitude),i=i||c!==e.center}if("zoom"in n){const c=e.zoom;e.zoom=n.zoom,i=i||c!==e.zoom}if("bearing"in n){const c=e.bearing;e.bearing=n.bearing,i=i||c!==e.bearing}if("pitch"in n){const c=e.pitch;e.pitch=n.pitch,i=i||c!==e.pitch}return n.padding&&!e.isPaddingEqual(n.padding)&&(i=!0,e.padding=n.padding),i}const ple=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function PL(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const i of e.layers)t[i.id]=i;const n=e.layers.map(i=>{const c=t[i.ref];let u=null;if("interactive"in i&&(u={...i},delete u.interactive),c){u=u||{...i},delete u.ref;for(const p of ple)p in c&&(u[p]=c[p])}return u||i});return{...e,layers:n}}function mle(e,t){const n=Array.isArray(e)?e[0]:e?e.x:0,i=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,u=Array.isArray(t)?t[1]:t?t.y:0;return n===c&&i===u}function oc(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!oc(e[n],t[n]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(const c of n)if(!t.hasOwnProperty(c)||!oc(e[c],t[c]))return!1;return!0}return!1}const IL={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},d2={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},LL={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},gle=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],yle=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class sf{constructor(t,n,i){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const u=this.props[LL[c.type]];u&&u(c)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const u=this.props[IL[c.type]];u&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),u(c),delete c.features)},this._onCameraEvent=c=>{if(!this._internalUpdate){const u=this.props[d2[c.type]];u&&u(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=t,this.props=n,this._initialize(i)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const n=this.props;this.props=t;const i=this._updateSettings(t,n);i&&this._createShadowTransform(this._map);const c=this._updateSize(t),u=this._updateViewState(t,!0);this._updateStyle(t,n),this._updateStyleComponents(t,n),this._updateHandlers(t,n),(i||c||u&&!this._map.isMoving())&&this.redraw()}static reuse(t,n){const i=sf.savedMaps.pop();if(!i)return null;const c=i.map,u=c.getContainer();for(n.className=u.className;u.childNodes.length>0;)n.appendChild(u.childNodes[0]);c._container=n;const p=c._resizeObserver;p&&(p.disconnect(),p.observe(n)),i.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:o}=t;return o&&(o.bounds?c.fitBounds(o.bounds,{...o.fitBoundsOptions,duration:0}):i._updateViewState(o,!1)),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),c._update(),i}_initialize(t){const{props:n}=this,i={...n,...n.initialViewState,accessToken:n.mapboxAccessToken||vle()||null,container:t,style:PL(n.mapStyle)},c=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[c.longitude||0,c.latitude||0],zoom:c.zoom||0,pitch:c.pitch||0,bearing:c.bearing||0}),n.gl){const S=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=S,n.gl)}const u=new this._MapClass(i);c.padding&&u.setPadding(c.padding),n.cursor&&(u.getCanvas().style.cursor=n.cursor),this._createShadowTransform(u);const p=u._render;u._render=S=>{this._inRender=!0,p.call(u,S),this._inRender=!1};const o=u._renderTaskQueue.run;u._renderTaskQueue.run=S=>{o.call(u._renderTaskQueue,S),this._onBeforeRepaint()},u.on("render",()=>this._onAfterRepaint());const x=u.fire;u.fire=this._fireEvent.bind(this,x),u.on("resize",()=>{this._renderTransform.resize(u.transform.width,u.transform.height)}),u.on("styledata",()=>this._updateStyleComponents(this.props,{})),u.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const S in IL)u.on(S,this._onPointerEvent);for(const S in d2)u.on(S,this._onCameraEvent);for(const S in LL)u.on(S,this._onEvent);this._map=u}recycle(){const n=this.map.getContainer().querySelector("[mapboxgl-children]");n==null||n.remove(),sf.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const n=fle(t.transform);t.painter.transform=n,this._renderTransform=n}_updateSize(t){const{viewState:n}=t;if(n){const i=this._map;if(n.width!==i.transform.width||n.height!==i.transform.height)return i.resize(),!0}return!1}_updateViewState(t,n){if(this._internalUpdate)return!1;const i=this._map,c=this._renderTransform,{zoom:u,pitch:p,bearing:o}=c,x=i.isMoving();x&&(c.cameraElevationReference="sea");const S=kL(c,{...AL(i.transform),...t});if(x&&(c.cameraElevationReference="ground"),S&&n){const M=this._deferredEvents;M.move=!0,M.zoom||(M.zoom=u!==c.zoom),M.rotate||(M.rotate=o!==c.bearing),M.pitch||(M.pitch=p!==c.pitch)}return x||kL(i.transform,t),S}_updateSettings(t,n){const i=this._map;let c=!1;for(const u of gle)u in t&&!oc(t[u],n[u])&&(c=!0,i[`set${u[0].toUpperCase()}${u.slice(1)}`](t[u]));return c}_updateStyle(t,n){if(t.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=t.cursor),t.mapStyle!==n.mapStyle){const i={diff:t.styleDiffing};return"localIdeographFontFamily"in t&&(i.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(PL(t.mapStyle),i),!0}return!1}_updateStyleComponents(t,n){const i=this._map;let c=!1;return i.style.loaded()&&("light"in t&&!oc(t.light,n.light)&&(c=!0,i.setLight(t.light)),"fog"in t&&!oc(t.fog,n.fog)&&(c=!0,i.setFog(t.fog)),"terrain"in t&&!oc(t.terrain,n.terrain)&&(!t.terrain||i.getSource(t.terrain.source))&&(c=!0,i.setTerrain(t.terrain))),c}_updateHandlers(t,n){const i=this._map;let c=!1;for(const u of yle){const p=t[u];oc(p,n[u])||(c=!0,p?i[u].enable(p):i[u].disable())}return c}_queryRenderedFeatures(t){const n=this._map,{interactiveLayerIds:i=[]}=this.props;try{return n.queryRenderedFeatures(t,{layers:i.filter(n.getLayer.bind(n))})}catch{return[]}}_updateHover(t){var n;const{props:i}=this;if(i.interactiveLayerIds&&(i.onMouseMove||i.onMouseEnter||i.onMouseLeave)){const u=t.type,p=((n=this._hoveredFeatures)===null||n===void 0?void 0:n.length)>0,o=this._queryRenderedFeatures(t.point),x=o.length>0;!x&&p&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=o,x&&!p&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=u}else this._hoveredFeatures=null}_fireEvent(t,n,i){const c=this._map,u=c.transform,p=typeof n=="string"?n:n.type;return p==="move"&&this._updateViewState(this.props,!1),p in d2&&(typeof n=="object"&&(n.viewState=AL(u)),this._map.isMoving())?(c.transform=this._renderTransform,t.call(c,n,i),c.transform=u,c):(t.call(c,n,i),c)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const i in this._deferredEvents)this._deferredEvents[i]&&t.fire(i);this._internalUpdate=!1;const n=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=n}}}sf.savedMaps=[];function vle(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{}.MapboxAccessToken}catch{}try{e=e||{}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const _le=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function xle(e,t){if(!e)return null;const n=e.map,i={getMap:()=>n,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:c=>e.transform.locationPoint(t.LngLat.convert(c)),unproject:c=>e.transform.pointLocation(t.Point.convert(c)),queryTerrainElevation:(c,u)=>{const p=n.transform;n.transform=e.transform;const o=n.queryTerrainElevation(c,u);return n.transform=p,o}};for(const c of ble(n))!(c in i)&&!_le.includes(c)&&(i[c]=n[c].bind(n));return i}function ble(e){const t=new Set;let n=e;for(;n;){for(const i of Object.getOwnPropertyNames(n))i[0]!=="_"&&typeof e[i]=="function"&&i!=="fire"&&i!=="setEventedParent"&&t.add(i);n=Object.getPrototypeOf(n)}return Array.from(t)}const wle=typeof document<"u"?X.useLayoutEffect:X.useEffect,Sle=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function Ele(e,t){for(const n of Sle)n in t&&(e[n]=t[n]);t.RTLTextPlugin&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(t.RTLTextPlugin,n=>{n&&console.error(n)},!1)}const yx=X.createContext(null),Tle={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:e=>console.error(e.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},vx=X.forwardRef((e,t)=>{const n=X.useContext(hle),[i,c]=X.useState(null),u=X.useRef(),{current:p}=X.useRef({mapLib:null,map:null});X.useEffect(()=>{const S=e.mapLib;let M=!0,k;return Promise.resolve(S||dle(()=>Promise.resolve().then(()=>Ole),void 0)).then(L=>{if(M){if(L.Map||(L=L.default),!L||!L.Map)throw new Error("Invalid mapLib");if(Ele(L,e),!L.supported||L.supported(e))e.reuseMaps&&(k=sf.reuse(e,u.current)),k||(k=new sf(L.Map,e,u.current)),p.map=xle(k,L),p.mapLib=L,c(k),n==null||n.onMapMount(p.map,e.id);else throw new Error("Map is not supported by this browser")}}).catch(L=>{e.onError({type:"error",target:null,originalEvent:null,error:L})}),()=>{M=!1,k&&(n==null||n.onMapUnmount(e.id),e.reuseMaps?k.recycle():k.destroy())}},[]),wle(()=>{i&&i.setProps(e)}),X.useImperativeHandle(t,()=>p.map,[i]);const o=X.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),x={height:"100%"};return X.createElement("div",{id:e.id,ref:u,style:o},i&&X.createElement(yx.Provider,{value:p},X.createElement("div",{"mapboxgl-children":"",style:x},e.children)))});vx.displayName="Map";vx.defaultProps=Tle;const Cle=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function ad(e,t){if(!e||!t)return;const n=e.style;for(const i in t){const c=t[i];Number.isFinite(c)&&!Cle.test(i)?n[i]=`${c}px`:n[i]=c}}const Rle={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};function CF(e){const{map:t,mapLib:n}=X.useContext(yx),i=X.useRef({props:e});i.current.props=e;const c=X.useMemo(()=>{let u=!1;X.Children.forEach(e.children,x=>{x&&(u=!0)});const p={...e,element:u?document.createElement("div"):null},o=new n.Marker(p).setLngLat([e.longitude,e.latitude]);return o.getElement().addEventListener("click",x=>{var S,M;(M=(S=i.current.props).onClick)===null||M===void 0||M.call(S,{type:"click",target:o,originalEvent:x})}),o.on("dragstart",x=>{var S,M;const k=x;k.lngLat=c.getLngLat(),(M=(S=i.current.props).onDragStart)===null||M===void 0||M.call(S,k)}),o.on("drag",x=>{var S,M;const k=x;k.lngLat=c.getLngLat(),(M=(S=i.current.props).onDrag)===null||M===void 0||M.call(S,k)}),o.on("dragend",x=>{var S,M;const k=x;k.lngLat=c.getLngLat(),(M=(S=i.current.props).onDragEnd)===null||M===void 0||M.call(S,k)}),o},[]);return X.useEffect(()=>(c.addTo(t.getMap()),()=>{c.remove()}),[]),X.useEffect(()=>{ad(c.getElement(),e.style)},[e.style]),(c.getLngLat().lng!==e.longitude||c.getLngLat().lat!==e.latitude)&&c.setLngLat([e.longitude,e.latitude]),e.offset&&!mle(c.getOffset(),e.offset)&&c.setOffset(e.offset),c.isDraggable()!==e.draggable&&c.setDraggable(e.draggable),c.getRotation()!==e.rotation&&c.setRotation(e.rotation),c.getRotationAlignment()!==e.rotationAlignment&&c.setRotationAlignment(e.rotationAlignment),c.getPitchAlignment()!==e.pitchAlignment&&c.setPitchAlignment(e.pitchAlignment),c.getPopup()!==e.popup&&c.setPopup(e.popup),bc.createPortal(e.children,c.getElement())}CF.defaultProps=Rle;const Mle=X.memo(CF);function OL(e){return new Set(e?e.trim().split(/\s+/):[])}function Ale(e){const{map:t,mapLib:n}=X.useContext(yx),i=X.useMemo(()=>document.createElement("div"),[]),c=X.useRef({props:e});c.current.props=e;const u=X.useMemo(()=>{const p={...e},o=new n.Popup(p).setLngLat([e.longitude,e.latitude]);return o.once("open",x=>{var S,M;(M=(S=c.current.props).onOpen)===null||M===void 0||M.call(S,x)}),o},[]);if(X.useEffect(()=>{const p=o=>{var x,S;(S=(x=c.current.props).onClose)===null||S===void 0||S.call(x,o)};return u.on("close",p),u.setDOMContent(i).addTo(t.getMap()),()=>{u.off("close",p),u.isOpen()&&u.remove()}},[]),X.useEffect(()=>{ad(u.getElement(),e.style)},[e.style]),u.isOpen()&&((u.getLngLat().lng!==e.longitude||u.getLngLat().lat!==e.latitude)&&u.setLngLat([e.longitude,e.latitude]),e.offset&&!oc(u.options.offset,e.offset)&&u.setOffset(e.offset),(u.options.anchor!==e.anchor||u.options.maxWidth!==e.maxWidth)&&(u.options.anchor=e.anchor,u.setMaxWidth(e.maxWidth)),u.options.className!==e.className)){const p=OL(u.options.className),o=OL(e.className);for(const x of p)o.has(x)||u.removeClassName(x);for(const x of o)p.has(x)||u.addClassName(x);u.options.className=e.className}return bc.createPortal(e.children,i)}X.memo(Ale);function cy(e,t,n,i){const c=X.useContext(yx),u=X.useMemo(()=>e(c),[]);return X.useEffect(()=>{const p=i||n||t,o=typeof t=="function"&&typeof n=="function"?t:null,x=typeof n=="function"?n:typeof t=="function"?t:null,{map:S}=c;return S.hasControl(u)||(S.addControl(u,p==null?void 0:p.position),o&&o(c)),()=>{x&&x(c),S.hasControl(u)&&S.removeControl(u)}},[]),u}function kle(e){const t=cy(({mapLib:n})=>new n.AttributionControl(e),{position:e.position});return X.useEffect(()=>{ad(t._container,e.style)},[e.style]),null}X.memo(kle);function Ple(e){const t=cy(({mapLib:n})=>new n.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return X.useEffect(()=>{ad(t._controlContainer,e.style)},[e.style]),null}X.memo(Ple);const RF=X.forwardRef((e,t)=>{const n=X.useRef({props:e}),i=cy(({mapLib:c})=>{const u=new c.GeolocateControl(e),p=u._setupUI;return u._setupUI=o=>{u._container.hasChildNodes()||p(o)},u.on("geolocate",o=>{var x,S;(S=(x=n.current.props).onGeolocate)===null||S===void 0||S.call(x,o)}),u.on("error",o=>{var x,S;(S=(x=n.current.props).onError)===null||S===void 0||S.call(x,o)}),u.on("outofmaxbounds",o=>{var x,S;(S=(x=n.current.props).onOutOfMaxBounds)===null||S===void 0||S.call(x,o)}),u.on("trackuserlocationstart",o=>{var x,S;(S=(x=n.current.props).onTrackUserLocationStart)===null||S===void 0||S.call(x,o)}),u.on("trackuserlocationend",o=>{var x,S;(S=(x=n.current.props).onTrackUserLocationEnd)===null||S===void 0||S.call(x,o)}),u},{position:e.position});return n.current.props=e,X.useImperativeHandle(t,()=>({trigger:()=>i.trigger()}),[]),X.useEffect(()=>{ad(i._container,e.style)},[e.style]),null});RF.displayName="GeolocateControl";X.memo(RF);function Ile(e){const t=cy(({mapLib:n})=>new n.NavigationControl(e),{position:e.position});return X.useEffect(()=>{ad(t._container,e.style)},[e.style]),null}X.memo(Ile);const Lle={unit:"metric",maxWidth:100};function MF(e){const t=cy(({mapLib:n})=>new n.ScaleControl(e),{position:e.position});return(t.options.unit!==e.unit||t.options.maxWidth!==e.maxWidth)&&(t.options.maxWidth=e.maxWidth,t.setUnit(e.unit)),X.useEffect(()=>{ad(t._container,e.style)},[e.style]),null}MF.defaultProps=Lle;X.memo(MF);var AF={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(Ai,function(){var n,i,c;function u(o,x){if(!n)n=x;else if(!i)i=x;else{var S="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+n+")(sharedChunk); ("+i+")(sharedChunk); self.onerror = null;",M={};n(M),c=x(M),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(c.workerUrl=window.URL.createObjectURL(new Blob([S],{type:"text/javascript"})))}}u(["exports"],function(o){var x=typeof self<"u"?self:{},S="2.15.0";let M;const k={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(M==null){const a=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{M={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):a}catch{M=a}}return M},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!k.API_URL)return null;try{const a=new URL(k.API_URL);return a.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":a.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},L={supported:!1,testSupport:function(a){!V&&F&&(oe?B(a):j=a)}};let j,F,V=!1,oe=!1;function B(a){const r=a.createTexture();a.bindTexture(a.TEXTURE_2D,r);try{if(a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,F),a.isContextLost())return;L.supported=!0}catch{}a.deleteTexture(r),V=!0}x.document&&(F=x.document.createElement("img"),F.onload=function(){j&&B(j),j=null,oe=!0},F.onerror=function(){V=!0,j=null},F.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const $="01";function Z(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Q=ae;function ae(a,r,s,d){this.cx=3*a,this.bx=3*(s-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(d-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=r,this.p2x=s,this.p2y=d}ae.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,r){if(r===void 0&&(r=1e-6),a<0)return 0;if(a>1)return 1;for(var s=a,d=0;d<8;d++){var f=this.sampleCurveX(s)-a;if(Math.abs(f)<r)return s;var g=this.sampleCurveDerivativeX(s);if(Math.abs(g)<1e-6)break;s-=f/g}var v=0,b=1;for(s=a,d=0;d<20&&(f=this.sampleCurveX(s),!(Math.abs(f-a)<r));d++)a>f?v=s:b=s,s=.5*(b-v)+v;return s},solve:function(a,r){return this.sampleCurveY(this.solveCurveX(a,r))}};var ue=Z(Q),de=ke;function ke(a,r){this.x=a,this.y=r}ke.prototype={clone:function(){return new ke(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,r){return this.clone()._rotateAround(a,r)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var r=a.x-this.x,s=a.y-this.y;return r*r+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,r){return Math.atan2(this.x*r-this.y*a,this.x*a+this.y*r)},_matMult:function(a){var r=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=r,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var r=Math.cos(a),s=Math.sin(a),d=s*this.x+r*this.y;return this.x=r*this.x-s*this.y,this.y=d,this},_rotateAround:function(a,r){var s=Math.cos(a),d=Math.sin(a),f=r.y+d*(this.x-r.x)+s*(this.y-r.y);return this.x=r.x+s*(this.x-r.x)-d*(this.y-r.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ke.convert=function(a){return a instanceof ke?a:Array.isArray(a)?new ke(a[0],a[1]):a};var J=Z(de);const G=Math.PI/180,pe=180/Math.PI;function $e(a){return a*G}function Ge(a){return a*pe}const Ae=[[0,0],[1,0],[1,1],[0,1]];function Ze(a){if(a<=0)return 0;if(a>=1)return 1;const r=a*a,s=r*a;return 4*(a<.5?s:3*(a-r)+s-.75)}function Qe(a,r,s,d){const f=new ue(a,r,s,d);return function(g){return f.solve(g)}}const gt=Qe(.25,.1,.25,1);function Me(a,r,s){return Math.min(s,Math.max(r,a))}function Ce(a,r,s){return(s=Me((s-a)/(r-a),0,1))*s*(3-2*s)}function Te(a,r,s){const d=s-r,f=((a-r)%d+d)%d+r;return f===r?s:f}function Ve(a,r,s){if(!a.length)return s(null,[]);let d=a.length;const f=new Array(a.length);let g=null;a.forEach((v,b)=>{r(v,(E,T)=>{E&&(g=E),f[b]=T,--d==0&&s(g,f)})})}function we(a){const r=[];for(const s in a)r.push(a[s]);return r}function be(a,...r){for(const s of r)for(const d in s)a[d]=s[d];return a}let Ue=1;function nt(){return Ue++}function at(){return function a(r){return r?(r^Math.random()*(16>>r/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,a)}()}function At(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function Ft(a){return!!a&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(a)}function Rt(a,r){a.forEach(s=>{r[s]&&(r[s]=r[s].bind(r))})}function Mt(a,r){return a.indexOf(r,a.length-r.length)!==-1}function ct(a,r,s){const d={};for(const f in a)d[f]=r.call(s||this,a[f],f,a);return d}function Nt(a,r,s){const d={};for(const f in a)r.call(s||this,a[f],f,a)&&(d[f]=a[f]);return d}function Ht(a){return Array.isArray(a)?a.map(Ht):typeof a=="object"&&a?ct(a,Ht):a}const ln={};function Kt(a){ln[a]||(typeof console<"u"&&console.warn(a),ln[a]=!0)}function wn(a,r,s){return(s.y-a.y)*(r.x-a.x)>(r.y-a.y)*(s.x-a.x)}function hn(a){let r=0;for(let s,d,f=0,g=a.length,v=g-1;f<g;v=f++)s=a[f],d=a[v],r+=(d.x-s.x)*(s.y+d.y);return r}function Xn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function sr(a){const r={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,d,f,g)=>{const v=f||g;return r[d]=!v||v.toLowerCase(),""}),r["max-age"]){const s=parseInt(r["max-age"],10);isNaN(s)?delete r["max-age"]:r["max-age"]=s}return r}let In=null;function qn(a){if(In==null){const r=a.navigator?a.navigator.userAgent:null;In=!!a.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return In}function Lr(a){try{const r=x[a];return r.setItem("_mapbox_test_",1),r.removeItem("_mapbox_test_"),!0}catch{return!1}}function cr(a,r){return[a[4*r],a[4*r+1],a[4*r+2],a[4*r+3]]}const $t="mapbox-tiles";let nn=500,Sn=50,mn,vn;function an(){try{return x.caches}catch{}}function Ne(){an()&&!mn&&(mn=x.caches.open($t))}function Je(a){const r=a.indexOf("?");if(r<0)return a;const s=function(f){const g=f.indexOf("?");return g>0?f.slice(g+1).split("&"):[]}(a),d=s.filter(f=>{const g=f.split("=");return g[0]==="language"||g[0]==="worldview"});return d.length?`${a.slice(0,r)}?${d.join("&")}`:a.slice(0,r)}let ut=1/0;const Ut={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Ut);class Qt extends Error{constructor(r,s,d){s===401&&je(d)&&(r+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(r),this.status=s,this.url=d}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Be=Xn()?()=>self.worker&&self.worker.referrer:()=>(x.location.protocol==="blob:"?x.parent:x).location.href,De=function(a,r){if(!(/^file:/.test(s=a.url)||/^file:/.test(Be())&&!/^\w+:/.test(s))){if(x.fetch&&x.Request&&x.AbortController&&x.Request.prototype.hasOwnProperty("signal"))return function(d,f){const g=new x.AbortController,v=new x.Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,referrer:Be(),referrerPolicy:d.referrerPolicy,signal:g.signal});let b=!1,E=!1;const T=(A=v.url).indexOf("sku=")>0&&je(A);var A;d.type==="json"&&v.headers.set("Accept","application/json");const I=(N,U,K)=>{if(E)return;if(N&&N.message!=="SecurityError"&&Kt(N.toString()),U&&K)return O(U);const ie=Date.now();x.fetch(v).then(ye=>{if(ye.ok){const Re=T?ye.clone():null;return O(ye,Re,ie)}return f(new Qt(ye.statusText,ye.status,d.url))}).catch(ye=>{ye.name!=="AbortError"&&f(new Error(`${ye.message} ${d.url}`))})},O=(N,U,K)=>{(d.type==="arrayBuffer"?N.arrayBuffer():d.type==="json"?N.json():N.text()).then(ie=>{E||(U&&K&&function(ye,Re,ve){if(Ne(),!mn)return;const Ee={status:Re.status,statusText:Re.statusText,headers:new x.Headers};Re.headers.forEach((ot,tt)=>Ee.headers.set(tt,ot));const Le=sr(Re.headers.get("Cache-Control")||"");if(Le["no-store"])return;Le["max-age"]&&Ee.headers.set("Expires",new Date(ve+1e3*Le["max-age"]).toUTCString());const Pe=Ee.headers.get("Expires");Pe&&(new Date(Pe).getTime()-ve<42e4||function(ot,tt){if(vn===void 0)try{new Response(new ReadableStream),vn=!0}catch{vn=!1}vn?tt(ot.body):ot.blob().then(tt)}(Re,ot=>{const tt=new x.Response(ot,Ee);Ne(),mn&&mn.then(pt=>pt.put(Je(ye.url),tt)).catch(pt=>Kt(pt.message))}))}(v,U,K),b=!0,f(null,ie,N.headers.get("Cache-Control"),N.headers.get("Expires")))}).catch(ie=>{E||f(new Error(ie.message))})};return T?function(N,U){if(Ne(),!mn)return U(null);const K=Je(N.url);mn.then(ie=>{ie.match(K).then(ye=>{const Re=function(ve){if(!ve)return!1;const Ee=new Date(ve.headers.get("Expires")||0),Le=sr(ve.headers.get("Cache-Control")||"");return Ee>Date.now()&&!Le["no-cache"]}(ye);ie.delete(K),Re&&ie.put(K,ye.clone()),U(null,ye,Re)}).catch(U)}).catch(U)}(v,I):I(null,null),{cancel:()=>{E=!0,b||g.abort()}}}(a,r);if(Xn()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,r,void 0,!0)}var s;return function(d,f){const g=new x.XMLHttpRequest;g.open(d.method||"GET",d.url,!0),d.type==="arrayBuffer"&&(g.responseType="arraybuffer");for(const v in d.headers)g.setRequestHeader(v,d.headers[v]);return d.type==="json"&&(g.responseType="text",g.setRequestHeader("Accept","application/json")),g.withCredentials=d.credentials==="include",g.onerror=()=>{f(new Error(g.statusText))},g.onload=()=>{if((g.status>=200&&g.status<300||g.status===0)&&g.response!==null){let v=g.response;if(d.type==="json")try{v=JSON.parse(g.response)}catch(b){return f(b)}f(null,v,g.getResponseHeader("Cache-Control"),g.getResponseHeader("Expires"))}else f(new Qt(g.statusText,g.status,d.url))},g.send(d.body),{cancel:()=>g.abort()}}(a,r)},dt=function(a,r){return De(be(a,{type:"arrayBuffer"}),r)};function mt(a){const r=x.document.createElement("a");return r.href=a,r.protocol===x.document.location.protocol&&r.host===x.document.location.host}const re="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let W,Y;W=[],Y=0;const se=function(a,r){if(L.supported&&(a.headers||(a.headers={}),a.headers.accept="image/webp,*/*"),Y>=k.MAX_PARALLEL_IMAGE_REQUESTS){const g={requestParameters:a,callback:r,cancelled:!1,cancel(){this.cancelled=!0}};return W.push(g),g}Y++;let s=!1;const d=()=>{if(!s)for(s=!0,Y--;W.length&&Y<k.MAX_PARALLEL_IMAGE_REQUESTS;){const g=W.shift(),{requestParameters:v,callback:b,cancelled:E}=g;E||(g.cancel=se(v,b).cancel)}},f=dt(a,(g,v,b,E)=>{d(),g?r(g):v&&(x.createImageBitmap?function(T,A){const I=new x.Blob([new Uint8Array(T)],{type:"image/png"});x.createImageBitmap(I).then(O=>{A(null,O)}).catch(O=>{A(new Error(`Could not load image because of ${O.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(v,(T,A)=>r(T,A,b,E)):function(T,A){const I=new x.Image,O=x.URL;I.onload=()=>{A(null,I),O.revokeObjectURL(I.src),I.onload=null,x.requestAnimationFrame(()=>{I.src=re})},I.onerror=()=>A(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const N=new x.Blob([new Uint8Array(T)],{type:"image/png"});I.src=T.byteLength?O.createObjectURL(N):re}(v,(T,A)=>r(T,A,b,E)))});return{cancel:()=>{f.cancel(),d()}}},ge="NO_ACCESS_TOKEN";function Se(a){return a.indexOf("mapbox:")===0}function je(a){return k.API_URL_REGEX.test(a)}function We(a){return k.API_CDN_URL_REGEX.test(a)}function Ie(a){return k.API_STYLE_REGEX.test(a)&&!Ke(a)}function Ke(a){return k.API_SPRITE_REGEX.test(a)}const bt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Dt(a){const r=a.match(bt);if(!r)throw new Error("Unable to parse URL object");return{protocol:r[1],authority:r[2],path:r[3]||"/",params:r[4]?r[4].split("&"):[]}}function Et(a){const r=a.params.length?`?${a.params.join("&")}`:"";return`${a.protocol}://${a.authority}${a.path}${r}`}const _n="mapbox.eventData";function En(a){if(!a)return null;const r=a.split(".");if(!r||r.length!==3)return null;try{return JSON.parse(decodeURIComponent(x.atob(r[1]).split("").map(s=>"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class rn{constructor(r){this.type=r,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(r){const s=En(k.ACCESS_TOKEN);let d="";return d=s&&s.u?x.btoa(encodeURIComponent(s.u).replace(/%([0-9A-F]{2})/g,(f,g)=>String.fromCharCode(+("0x"+g)))):k.ACCESS_TOKEN||"",r?`${_n}.${r}:${d}`:`${_n}:${d}`}fetchEventData(){const r=Lr("localStorage"),s=this.getStorageKey(),d=this.getStorageKey("uuid");if(r)try{const f=x.localStorage.getItem(s);f&&(this.eventData=JSON.parse(f));const g=x.localStorage.getItem(d);g&&(this.anonId=g)}catch{Kt("Unable to read from LocalStorage")}}saveEventData(){const r=Lr("localStorage"),s=this.getStorageKey(),d=this.getStorageKey("uuid");if(r)try{x.localStorage.setItem(d,this.anonId),Object.keys(this.eventData).length>=1&&x.localStorage.setItem(s,JSON.stringify(this.eventData))}catch{Kt("Unable to write to LocalStorage")}}processRequests(r){}postEvent(r,s,d,f){if(!k.EVENTS_URL)return;const g=Dt(k.EVENTS_URL);g.params.push(`access_token=${f||k.ACCESS_TOKEN||""}`);const v={event:this.type,created:new Date(r).toISOString()},b=s?be(v,s):v,E={url:Et(g),headers:{"Content-Type":"text/plain"},body:JSON.stringify([b])};this.pendingRequest=function(T,A){return De(be(T,{method:"POST"}),A)}(E,T=>{this.pendingRequest=null,d(T),this.saveEventData(),this.processRequests(f)})}queueRequest(r,s){this.queue.push(r),this.processRequests(s)}}const gn=new class extends rn{constructor(a){super("appUserTurnstile"),this._customAccessToken=a}postTurnstileEvent(a,r){k.EVENTS_URL&&k.ACCESS_TOKEN&&Array.isArray(a)&&a.some(s=>Se(s)||je(s))&&this.queueRequest(Date.now(),r)}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const r=En(k.ACCESS_TOKEN),s=r?r.u:k.ACCESS_TOKEN;let d=s!==this.eventData.tokenU;Ft(this.anonId)||(this.anonId=at(),d=!0);const f=this.queue.shift();if(this.eventData.lastSuccess){const g=new Date(this.eventData.lastSuccess),v=new Date(f),b=(f-this.eventData.lastSuccess)/864e5;d=d||b>=1||b<-1||g.getDate()!==v.getDate()}else d=!0;d?this.postEvent(f,{sdkIdentifier:"mapbox-gl-js",sdkVersion:S,skuId:$,"enabled.telemetry":!1,userId:this.anonId},g=>{g||(this.eventData.lastSuccess=f,this.eventData.tokenU=s)},a):this.processRequests()}},Cn=gn.postTurnstileEvent.bind(gn),ir=new class extends rn{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(a,r,s,d){this.skuToken=r,this.errorCb=d,k.EVENTS_URL&&(s||k.ACCESS_TOKEN?this.queueRequest({id:a,timestamp:Date.now()},s):this.errorCb(new Error(ge)))}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;const{id:r,timestamp:s}=this.queue.shift();r&&this.success[r]||(this.anonId||this.fetchEventData(),Ft(this.anonId)||(this.anonId=at()),this.postEvent(s,{sdkIdentifier:"mapbox-gl-js",sdkVersion:S,skuId:$,skuToken:this.skuToken,userId:this.anonId},d=>{d?this.errorCb(d):r&&(this.success[r]=!0)},a))}},Gn=ir.postMapLoadEvent.bind(ir),Hr=new class extends rn{constructor(){super("gljs.performance")}postPerformanceEvent(a,r){k.EVENTS_URL&&(a||k.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:r},a)}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:r,performanceData:s}=this.queue.shift(),d=function(f){const g=x.performance.getEntriesByType("resource"),v=x.performance.getEntriesByType("mark"),b=function(O){const N={};if(O){for(const U in O)if(U!=="other")for(const K of O[U]){const ie=`${U}ResolveRangeMin`,ye=`${U}ResolveRangeMax`,Re=`${U}RequestCount`,ve=`${U}RequestCachedCount`;N[ie]=Math.min(N[ie]||1/0,K.startTime),N[ye]=Math.max(N[ye]||-1/0,K.responseEnd);const Ee=Le=>{N[Le]===void 0&&(N[Le]=0),++N[Le]};K.transferSize!==void 0&&K.transferSize===0&&Ee(ve),Ee(Re)}}return N}(function(O,N){const U={};if(O)for(const K of O){const ie=N(K);U[ie]===void 0&&(U[ie]=[]),U[ie].push(K)}return U}(g,dy)),E=x.devicePixelRatio,T=x.navigator.connection||x.navigator.mozConnection||x.navigator.webkitConnection,A={counters:[],metadata:[],attributes:[]},I=(O,N,U)=>{U!=null&&O.push({name:N,value:U.toString()})};for(const O in b)I(A.counters,O,b[O]);if(f.interactionRange[0]!==1/0&&f.interactionRange[1]!==-1/0&&(I(A.counters,"interactionRangeMin",f.interactionRange[0]),I(A.counters,"interactionRangeMax",f.interactionRange[1])),v)for(const O of Object.keys(zi)){const N=zi[O],U=v.find(K=>K.name===N);U&&I(A.counters,N,U.startTime)}return I(A.counters,"visibilityHidden",f.visibilityHidden),I(A.attributes,"style",function(O){if(O)for(const N of O){const U=N.name.split("?")[0];if(Ie(U)){const K=U.split("/").slice(-2);if(K.length===2)return`mapbox://styles/${K[0]}/${K[1]}`}}}(g)),I(A.attributes,"terrainEnabled",f.terrainEnabled?"true":"false"),I(A.attributes,"fogEnabled",f.fogEnabled?"true":"false"),I(A.attributes,"projection",f.projection),I(A.attributes,"zoom",f.zoom),I(A.metadata,"devicePixelRatio",E),I(A.metadata,"connectionEffectiveType",T?T.effectiveType:void 0),I(A.metadata,"navigatorUserAgent",x.navigator.userAgent),I(A.metadata,"screenWidth",x.screen.width),I(A.metadata,"screenHeight",x.screen.height),I(A.metadata,"windowWidth",x.innerWidth),I(A.metadata,"windowHeight",x.innerHeight),I(A.metadata,"mapWidth",f.width/E),I(A.metadata,"mapHeight",f.height/E),I(A.metadata,"webglRenderer",f.renderer),I(A.metadata,"webglVendor",f.vendor),I(A.metadata,"sdkVersion",S),I(A.metadata,"sdkIdentifier","mapbox-gl-js"),A}(s);for(const f of d.metadata);for(const f of d.counters);for(const f of d.attributes);this.postEvent(r,d,()=>{},a)}},Ln=Hr.postPerformanceEvent.bind(Hr),ur=new class extends rn{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(a,r,s,d){if(!k.API_URL||!k.SESSION_PATH)return;const f=Dt(k.API_URL+k.SESSION_PATH);f.params.push(`sku=${r||""}`),f.params.push(`access_token=${d||k.ACCESS_TOKEN||""}`);const g={url:Et(f),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(v,b){return De(be(v,{method:"GET"}),b)}(g,v=>{this.pendingRequest=null,s(v),this.saveEventData(),this.processRequests(d)})}getSessionAPI(a,r,s,d){this.skuToken=r,this.errorCb=d,k.SESSION_PATH&&k.API_URL&&(s||k.ACCESS_TOKEN?this.queueRequest({id:a,timestamp:Date.now()},s):this.errorCb(new Error(ge)))}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;const{id:r,timestamp:s}=this.queue.shift();r&&this.success[r]||this.getSession(s,this.skuToken,d=>{d?this.errorCb(d):r&&(this.success[r]=!0)},a)}},Zr=ur.getSessionAPI.bind(ur),fi=new Set,zi={create:"create",load:"load",fullLoad:"fullLoad"},xx={mark(a){x.performance.mark(a)},measure(a,r,s){x.performance.measure(a,r,s)}};function dy(a){const r=a.name.split("?")[0];return We(r)&&r.includes("mapbox-gl.js")?"javascript":We(r)&&r.includes("mapbox-gl.css")?"css":function(s){return k.API_FONTS_REGEX.test(s)}(r)?"fontRange":Ke(r)?"sprite":Ie(r)?"style":function(s){return k.API_TILEJSON_REGEX.test(s)}(r)?"tilejson":"other"}const tr=x.performance;function Ef(a){const r=a?a.url.toString():void 0;return tr.getEntriesByName(r)}let zc,Tf,sd,ra;const Ea={now:()=>sd!==void 0?sd:x.performance.now(),setNow(a){sd=a},restoreNow(){sd=void 0},frame(a){const r=x.requestAnimationFrame(a);return{cancel:()=>x.cancelAnimationFrame(r)}},getImageData(a,r=0){const{width:s,height:d}=a;ra||(ra=x.document.createElement("canvas"));const f=ra.getContext("2d",{willReadFrequently:!0});if(!f)throw new Error("failed to create canvas 2d context");return(s>ra.width||d>ra.height)&&(ra.width=s,ra.height=d),f.clearRect(-r,-r,s+2*r,d+2*r),f.drawImage(a,0,0,s,d),f.getImageData(-r,-r,s+2*r,d+2*r)},resolveURL:a=>(zc||(zc=x.document.createElement("a")),zc.href=a,zc.href),get devicePixelRatio(){return x.devicePixelRatio},get prefersReducedMotion(){return!!x.matchMedia&&(Tf==null&&(Tf=x.matchMedia("(prefers-reduced-motion: reduce)")),Tf.matches)}};function Cf(a,r,s){s[a]&&s[a].indexOf(r)!==-1||(s[a]=s[a]||[],s[a].push(r))}function Rf(a,r,s){if(s&&s[a]){const d=s[a].indexOf(r);d!==-1&&s[a].splice(d,1)}}class Cs{constructor(r,s={}){be(this,s),this.type=r}}class Ta extends Cs{constructor(r,s={}){super("error",be({error:r},s))}}class Fc{on(r,s){return this._listeners=this._listeners||{},Cf(r,s,this._listeners),this}off(r,s){return Rf(r,s,this._listeners),Rf(r,s,this._oneTimeListeners),this}once(r,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Cf(r,s,this._oneTimeListeners),this):new Promise(d=>this.once(r,d))}fire(r,s){typeof r=="string"&&(r=new Cs(r,s||{}));const d=r.type;if(this.listens(d)){r.target=this;const f=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const b of f)b.call(this,r);const g=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const b of g)Rf(d,b,this._oneTimeListeners),b.call(this,r);const v=this._eventedParent;v&&(be(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),v.fire(r))}else r instanceof Ta&&console.error(r.error);return this}listens(r){return!!(this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r))}setEventedParent(r,s){return this._eventedParent=r,this._eventedParentData=s,this}}var ft=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Ca(a,...r){for(const s of r)for(const d in s)a[d]=s[d];return a}function ni(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function bi(a){if(Array.isArray(a))return a.map(bi);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const r={};for(const s in a)r[s]=bi(a[s]);return r}return ni(a)}class hy extends Error{constructor(r,s){super(s),this.message=s,this.key=r}}var ia=hy;class Mf{constructor(r,s=[]){this.parent=r,this.bindings={};for(const[d,f]of s)this.bindings[d]=f}concat(r){return new Mf(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}var fy=Mf;const gl={kind:"null"},Zt={kind:"number"},Nn={kind:"string"},Dn={kind:"boolean"},ho={kind:"color"},Uo={kind:"object"},zn={kind:"value"},fo={kind:"collator"},Bc={kind:"formatted"},Rs={kind:"resolvedImage"};function bo(a,r){return{kind:"array",itemType:a,N:r}}function Or(a){if(a.kind==="array"){const r=Or(a.itemType);return typeof a.N=="number"?`array<${r}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${r}>`}return a.kind}const py=[gl,Zt,Nn,Dn,ho,Bc,Uo,bo(zn),Rs];function Ra(a,r){if(r.kind==="error")return null;if(a.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Ra(a.itemType,r.itemType))&&(typeof a.N!="number"||a.N===r.N))return null}else{if(a.kind===r.kind)return null;if(a.kind==="value"){for(const s of py)if(!Ra(s,r))return null}}return`Expected ${Or(a)} but found ${Or(r)} instead.`}function Nc(a,r){return r.some(s=>s.kind===a.kind)}function $c(a,r){return r.some(s=>s==="null"?a===null:s==="array"?Array.isArray(a):s==="object"?a&&!Array.isArray(a)&&typeof a=="object":s===typeof a)}var Af,my={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Uc(a){return(a=Math.round(a))<0?0:a>255?255:a}function jc(a){return Uc(a[a.length-1]==="%"?parseFloat(a)/100*255:parseInt(a))}function ld(a){return(r=a[a.length-1]==="%"?parseFloat(a)/100:parseFloat(a))<0?0:r>1?1:r;var r}function yl(a,r,s){return s<0?s+=1:s>1&&(s-=1),6*s<1?a+(r-a)*s*6:2*s<1?r:3*s<2?a+(r-a)*(2/3-s)*6:a}try{Af={}.parseCSSColor=function(a){var r,s=a.replace(/ /g,"").toLowerCase();if(s in my)return my[s].slice();if(s[0]==="#")return s.length===4?(r=parseInt(s.substr(1),16))>=0&&r<=4095?[(3840&r)>>4|(3840&r)>>8,240&r|(240&r)>>4,15&r|(15&r)<<4,1]:null:s.length===7&&(r=parseInt(s.substr(1),16))>=0&&r<=16777215?[(16711680&r)>>16,(65280&r)>>8,255&r,1]:null;var d=s.indexOf("("),f=s.indexOf(")");if(d!==-1&&f+1===s.length){var g=s.substr(0,d),v=s.substr(d+1,f-(d+1)).split(","),b=1;switch(g){case"rgba":if(v.length!==4)return null;b=ld(v.pop());case"rgb":return v.length!==3?null:[jc(v[0]),jc(v[1]),jc(v[2]),b];case"hsla":if(v.length!==4)return null;b=ld(v.pop());case"hsl":if(v.length!==3)return null;var E=(parseFloat(v[0])%360+360)%360/360,T=ld(v[1]),A=ld(v[2]),I=A<=.5?A*(T+1):A+T-A*T,O=2*A-I;return[Uc(255*yl(O,I,E+1/3)),Uc(255*yl(O,I,E)),Uc(255*yl(O,I,E-1/3)),b];default:return null}}return null}}catch{}class Qi{constructor(r,s,d,f=1){this.r=r,this.g=s,this.b=d,this.a=f}static parse(r){if(!r)return;if(r instanceof Qi)return r;if(typeof r!="string")return;const s=Af(r);return s?new Qi(s[0]/255*s[3],s[1]/255*s[3],s[2]/255*s[3],s[3]):void 0}toString(){const[r,s,d,f]=this.toArray();return`rgba(${Math.round(r)},${Math.round(s)},${Math.round(d)},${f})`}toArray(){const{r,g:s,b:d,a:f}=this;return f===0?[0,0,0,0]:[255*r/f,255*s/f,255*d/f,f]}toArray01(){const{r,g:s,b:d,a:f}=this;return f===0?[0,0,0,0]:[r/f,s/f,d/f,f]}toArray01PremultipliedAlpha(){const{r,g:s,b:d,a:f}=this;return[r,s,d,f]}}Qi.black=new Qi(0,0,0,1),Qi.white=new Qi(1,1,1,1),Qi.transparent=new Qi(0,0,0,0),Qi.red=new Qi(1,0,0,1),Qi.blue=new Qi(0,0,1,1);var Xr=Qi;class kf{constructor(r,s,d){this.sensitivity=r?s?"variant":"case":s?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,s){return this.collator.compare(r,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Pf{constructor(r,s,d,f,g){this.text=r.normalize?r.normalize():r,this.image=s,this.scale=d,this.fontStack=f,this.textColor=g}}class Ji{constructor(r){this.sections=r}static fromString(r){return new Ji([new Pf(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof Ji?r:Ji.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}serialize(){const r=["format"];for(const s of this.sections){if(s.image){r.push(["image",s.image.name]);continue}r.push(s.text);const d={};s.fontStack&&(d["text-font"]=["literal",s.fontStack.split(",")]),s.scale&&(d["font-scale"]=s.scale),s.textColor&&(d["text-color"]=["rgba"].concat(s.textColor.toArray())),r.push(d)}return r}}class wo{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new wo({name:r,available:!1}):null}serialize(){return["image",this.name]}}function gy(a,r,s,d){return typeof a=="number"&&a>=0&&a<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof s=="number"&&s>=0&&s<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[a,r,s,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[a,r,s,d]:[a,r,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Vc(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof Xr||a instanceof kf||a instanceof Ji||a instanceof wo)return!0;if(Array.isArray(a)){for(const r of a)if(!Vc(r))return!1;return!0}if(typeof a=="object"){for(const r in a)if(!Vc(a[r]))return!1;return!0}return!1}function Ur(a){if(a===null)return gl;if(typeof a=="string")return Nn;if(typeof a=="boolean")return Dn;if(typeof a=="number")return Zt;if(a instanceof Xr)return ho;if(a instanceof kf)return fo;if(a instanceof Ji)return Bc;if(a instanceof wo)return Rs;if(Array.isArray(a)){const r=a.length;let s;for(const d of a){const f=Ur(d);if(s){if(s===f)continue;s=zn;break}s=f}return bo(s||zn,r)}return Uo}function Gc(a){const r=typeof a;return a===null?"":r==="string"||r==="number"||r==="boolean"?String(a):a instanceof Xr||a instanceof Ji||a instanceof wo?a.toString():JSON.stringify(a)}class If{constructor(r,s){this.type=r,this.value=s}static parse(r,s){if(r.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!Vc(r[1]))return s.error("invalid value");const d=r[1];let f=Ur(d);const g=s.expectedType;return f.kind!=="array"||f.N!==0||!g||g.kind!=="array"||typeof g.N=="number"&&g.N!==0||(f=g),new If(f,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Xr?["rgba"].concat(this.value.toArray()):this.value instanceof Ji?this.value.serialize():this.value}}var Ms=If,ki=class{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}};const Lf={string:Nn,number:Zt,boolean:Dn,object:Uo};class Of{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");let d,f=1;const g=r[0];if(g==="array"){let b,E;if(r.length>2){const T=r[1];if(typeof T!="string"||!(T in Lf)||T==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);b=Lf[T],f++}else b=zn;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return s.error('The length argument to "array" must be a positive integer literal',2);E=r[2],f++}d=bo(b,E)}else d=Lf[g];const v=[];for(;f<r.length;f++){const b=s.parse(r[f],f,zn);if(!b)return null;v.push(b)}return new Of(d,v)}evaluate(r){for(let s=0;s<this.args.length;s++){const d=this.args[s].evaluate(r);if(!Ra(this.type,Ur(d)))return d;if(s===this.args.length-1)throw new ki(`Expected value to be of type ${Or(this.type)}, but found ${Or(Ur(d))} instead.`)}return null}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){const r=this.type,s=[r.kind];if(r.kind==="array"){const d=r.itemType;if(d.kind==="string"||d.kind==="number"||d.kind==="boolean"){s.push(d.kind);const f=r.N;(typeof f=="number"||this.args.length>1)&&s.push(f)}}return s.concat(this.args.map(d=>d.serialize()))}}var Ma=Of;class ts{constructor(r){this.type=Bc,this.sections=r}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const d=r[1];if(!Array.isArray(d)&&typeof d=="object")return s.error("First argument must be an image or text section.");const f=[];let g=!1;for(let v=1;v<=r.length-1;++v){const b=r[v];if(g&&typeof b=="object"&&!Array.isArray(b)){g=!1;let E=null;if(b["font-scale"]&&(E=s.parse(b["font-scale"],1,Zt),!E))return null;let T=null;if(b["text-font"]&&(T=s.parse(b["text-font"],1,bo(Nn)),!T))return null;let A=null;if(b["text-color"]&&(A=s.parse(b["text-color"],1,ho),!A))return null;const I=f[f.length-1];I.scale=E,I.font=T,I.textColor=A}else{const E=s.parse(r[v],1,zn);if(!E)return null;const T=E.type.kind;if(T!=="string"&&T!=="value"&&T!=="null"&&T!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,f.push({content:E,scale:null,font:null,textColor:null})}}return new ts(f)}evaluate(r){return new Ji(this.sections.map(s=>{const d=s.content.evaluate(r);return Ur(d)===Rs?new Pf("",d,null,null,null):new Pf(Gc(d),null,s.scale?s.scale.evaluate(r):null,s.font?s.font.evaluate(r).join(","):null,s.textColor?s.textColor.evaluate(r):null)}))}eachChild(r){for(const s of this.sections)r(s.content),s.scale&&r(s.scale),s.font&&r(s.font),s.textColor&&r(s.textColor)}outputDefined(){return!1}serialize(){const r=["format"];for(const s of this.sections){r.push(s.content.serialize());const d={};s.scale&&(d["font-scale"]=s.scale.serialize()),s.font&&(d["text-font"]=s.font.serialize()),s.textColor&&(d["text-color"]=s.textColor.serialize()),r.push(d)}return r}}class cd{constructor(r){this.type=Rs,this.input=r}static parse(r,s){if(r.length!==2)return s.error("Expected two arguments.");const d=s.parse(r[1],1,Nn);return d?new cd(d):s.error("No image name provided.")}evaluate(r){const s=this.input.evaluate(r),d=wo.fromString(s);return d&&r.availableImages&&(d.available=r.availableImages.indexOf(s)>-1),d}eachChild(r){r(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const bx={"to-boolean":Dn,"to-color":ho,"to-number":Zt,"to-string":Nn};class Df{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const d=r[0];if((d==="to-boolean"||d==="to-string")&&r.length!==2)return s.error("Expected one argument.");const f=bx[d],g=[];for(let v=1;v<r.length;v++){const b=s.parse(r[v],v,zn);if(!b)return null;g.push(b)}return new Df(f,g)}evaluate(r){if(this.type.kind==="boolean")return!!this.args[0].evaluate(r);if(this.type.kind==="color"){let s,d;for(const f of this.args){if(s=f.evaluate(r),d=null,s instanceof Xr)return s;if(typeof s=="string"){const g=r.parseColor(s);if(g)return g}else if(Array.isArray(s)&&(d=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:gy(s[0],s[1],s[2],s[3]),!d))return new Xr(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new ki(d||`Could not parse color from value '${typeof s=="string"?s:String(JSON.stringify(s))}'`)}if(this.type.kind==="number"){let s=null;for(const d of this.args){if(s=d.evaluate(r),s===null)return 0;const f=Number(s);if(!isNaN(f))return f}throw new ki(`Could not convert ${JSON.stringify(s)} to number.`)}return this.type.kind==="formatted"?Ji.fromString(Gc(this.args[0].evaluate(r))):this.type.kind==="resolvedImage"?wo.fromString(Gc(this.args[0].evaluate(r))):Gc(this.args[0].evaluate(r))}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){if(this.type.kind==="formatted")return new ts([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new cd(this.args[0]).serialize();const r=[`to-${this.type.kind}`];return this.eachChild(s=>{r.push(s.serialize())}),r}}var vl=Df;const oa=["Unknown","Point","LineString","Polygon"];var zf=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?oa[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const a=this.featureDistanceData.center,r=this.featureDistanceData.scale,{x:s,y:d}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(s*r-a[0])+this.featureDistanceData.bearing[1]*(d*r-a[1])}return 0}parseColor(a){let r=this._parseColorCache[a];return r||(r=this._parseColorCache[a]=Xr.parse(a)),r}};class As{constructor(r,s,d,f){this.name=r,this.type=s,this._evaluate=d,this.args=f}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(r=>r.serialize()))}static parse(r,s){const d=r[0],f=As.definitions[d];if(!f)return s.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const g=Array.isArray(f)?f[0]:f.type,v=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,b=v.filter(([T])=>!Array.isArray(T)||T.length===r.length-1);let E=null;for(const[T,A]of b){E=new jf(s.registry,s.path,null,s.scope);const I=[];let O=!1;for(let N=1;N<r.length;N++){const U=r[N],K=Array.isArray(T)?T[N-1]:T.type,ie=E.parse(U,1+I.length,K);if(!ie){O=!0;break}I.push(ie)}if(!O)if(Array.isArray(T)&&T.length!==I.length)E.error(`Expected ${T.length} arguments, but found ${I.length} instead.`);else{for(let N=0;N<I.length;N++){const U=Array.isArray(T)?T[N]:T.type,K=I[N];E.concat(N+1).checkSubtype(U,K.type)}if(E.errors.length===0)return new As(d,g,A,I)}}if(b.length===1)s.errors.push(...E.errors);else{const T=(b.length?b:v).map(([I])=>{return O=I,Array.isArray(O)?`(${O.map(Or).join(", ")})`:`(${Or(O.type)}...)`;var O}).join(" | "),A=[];for(let I=1;I<r.length;I++){const O=s.parse(r[I],1+A.length);if(!O)return null;A.push(Or(O.type))}s.error(`Expected arguments of type ${T}, but found (${A.join(", ")}) instead.`)}return null}static register(r,s){As.definitions=s;for(const d in s)r[d]=As}}var Aa=As;class Wc{constructor(r,s,d){this.type=fo,this.locale=d,this.caseSensitive=r,this.diacriticSensitive=s}static parse(r,s){if(r.length!==2)return s.error("Expected one argument.");const d=r[1];if(typeof d!="object"||Array.isArray(d))return s.error("Collator options argument must be an object.");const f=s.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,Dn);if(!f)return null;const g=s.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,Dn);if(!g)return null;let v=null;return d.locale&&(v=s.parse(d.locale,1,Nn),!v)?null:new Wc(f,g,v)}evaluate(r){return new kf(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}serialize(){const r={};return r["case-sensitive"]=this.caseSensitive.serialize(),r["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(r.locale=this.locale.serialize()),["collator",r]}}const ka=8192;function ud(a,r){a[0]=Math.min(a[0],r[0]),a[1]=Math.min(a[1],r[1]),a[2]=Math.max(a[2],r[0]),a[3]=Math.max(a[3],r[1])}function _l(a,r){return!(a[0]<=r[0]||a[2]>=r[2]||a[1]<=r[1]||a[3]>=r[3])}function qc(a,r){const s=(180+a[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,f=Math.pow(2,r.z);return[Math.round(s*f*ka),Math.round(d*f*ka)]}function yy(a,r,s){const d=a[0]-r[0],f=a[1]-r[1],g=a[0]-s[0],v=a[1]-s[1];return d*v-g*f==0&&d*g<=0&&f*v<=0}function dd(a,r){let s=!1;for(let v=0,b=r.length;v<b;v++){const E=r[v];for(let T=0,A=E.length;T<A-1;T++){if(yy(a,E[T],E[T+1]))return!1;(f=E[T])[1]>(d=a)[1]!=(g=E[T+1])[1]>d[1]&&d[0]<(g[0]-f[0])*(d[1]-f[1])/(g[1]-f[1])+f[0]&&(s=!s)}}var d,f,g;return s}function Ff(a,r){for(let s=0;s<r.length;s++)if(dd(a,r[s]))return!0;return!1}function Bf(a,r,s,d){const f=d[0]-s[0],g=d[1]-s[1],v=(a[0]-s[0])*g-f*(a[1]-s[1]),b=(r[0]-s[0])*g-f*(r[1]-s[1]);return v>0&&b<0||v<0&&b>0}function xl(a,r,s){for(const T of s)for(let A=0;A<T.length-1;++A)if((b=[(v=T[A+1])[0]-(g=T[A])[0],v[1]-g[1]])[0]*(E=[(f=r)[0]-(d=a)[0],f[1]-d[1]])[1]-b[1]*E[0]!=0&&Bf(d,f,g,v)&&Bf(g,v,d,f))return!0;var d,f,g,v,b,E;return!1}function nr(a,r){for(let s=0;s<a.length;++s)if(!dd(a[s],r))return!1;for(let s=0;s<a.length-1;++s)if(xl(a[s],a[s+1],r))return!1;return!0}function wx(a,r){for(let s=0;s<r.length;s++)if(nr(a,r[s]))return!0;return!1}function Nf(a,r,s){const d=[];for(let f=0;f<a.length;f++){const g=[];for(let v=0;v<a[f].length;v++){const b=qc(a[f][v],s);ud(r,b),g.push(b)}d.push(g)}return d}function vy(a,r,s){const d=[];for(let f=0;f<a.length;f++){const g=Nf(a[f],r,s);d.push(g)}return d}function $f(a,r,s,d){if(a[0]<s[0]||a[0]>s[2]){const f=.5*d;let g=a[0]-s[0]>f?-d:s[0]-a[0]>f?d:0;g===0&&(g=a[0]-s[2]>f?-d:s[2]-a[0]>f?d:0),a[0]+=g}ud(r,a)}function _y(a,r,s,d){const f=Math.pow(2,d.z)*ka,g=[d.x*ka,d.y*ka],v=[];if(!a)return v;for(const b of a)for(const E of b){const T=[E.x+g[0],E.y+g[1]];$f(T,r,s,f),v.push(T)}return v}function Uf(a,r,s,d){const f=Math.pow(2,d.z)*ka,g=[d.x*ka,d.y*ka],v=[];if(!a)return v;for(const E of a){const T=[];for(const A of E){const I=[A.x+g[0],A.y+g[1]];ud(r,I),T.push(I)}v.push(T)}if(r[2]-r[0]<=f/2){(b=r)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const E of v)for(const T of E)$f(T,r,s,f)}var b;return v}class bl{constructor(r,s){this.type=Dn,this.geojson=r,this.geometries=s}static parse(r,s){if(r.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Vc(r[1])){const d=r[1];if(d.type==="FeatureCollection")for(let f=0;f<d.features.length;++f){const g=d.features[f].geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new bl(d,d.features[f].geometry)}else if(d.type==="Feature"){const f=d.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new bl(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new bl(d,d)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(s,d){const f=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],v=s.canonicalID();if(!v)return!1;if(d.type==="Polygon"){const b=Nf(d.coordinates,g,v),E=_y(s.geometry(),f,g,v);if(!_l(f,g))return!1;for(const T of E)if(!dd(T,b))return!1}if(d.type==="MultiPolygon"){const b=vy(d.coordinates,g,v),E=_y(s.geometry(),f,g,v);if(!_l(f,g))return!1;for(const T of E)if(!Ff(T,b))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(s,d){const f=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],v=s.canonicalID();if(!v)return!1;if(d.type==="Polygon"){const b=Nf(d.coordinates,g,v),E=Uf(s.geometry(),f,g,v);if(!_l(f,g))return!1;for(const T of E)if(!nr(T,b))return!1}if(d.type==="MultiPolygon"){const b=vy(d.coordinates,g,v),E=Uf(s.geometry(),f,g,v);if(!_l(f,g))return!1;for(const T of E)if(!wx(T,b))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var hd=bl;function wl(a){if(a instanceof Aa&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof hd)return!1;let r=!0;return a.eachChild(s=>{r&&!wl(s)&&(r=!1)}),r}function Pa(a){if(a instanceof Aa&&a.name==="feature-state")return!1;let r=!0;return a.eachChild(s=>{r&&!Pa(s)&&(r=!1)}),r}function ks(a,r){if(a instanceof Aa&&r.indexOf(a.name)>=0)return!1;let s=!0;return a.eachChild(d=>{s&&!ks(d,r)&&(s=!1)}),s}class fd{constructor(r,s){this.type=s.type,this.name=r,this.boundExpression=s}static parse(r,s){if(r.length!==2||typeof r[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const d=r[1];return s.scope.has(d)?new fd(d,s.scope.get(d)):s.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var xy=fd;class Hc{constructor(r,s=[],d,f=new fy,g=[]){this.registry=r,this.path=s,this.key=s.map(v=>`[${v}]`).join(""),this.scope=f,this.errors=g,this.expectedType=d}parse(r,s,d,f,g={}){return s?this.concat(s,d,f)._parse(r,g):this._parse(r,g)}_parse(r,s){function d(f,g,v){return v==="assert"?new Ma(g,[f]):v==="coerce"?new vl(g,[f]):f}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=r[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const g=this.registry[f];if(g){let v=g.parse(r,this);if(!v)return null;if(this.expectedType){const b=this.expectedType,E=v.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||E.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string"){if(this.checkSubtype(b,E))return null}else v=d(v,b,s.typeAnnotation||"coerce");else v=d(v,b,s.typeAnnotation||"assert")}if(!(v instanceof Ms)&&v.type.kind!=="resolvedImage"&&Vf(v)){const b=new zf;try{v=new Ms(v.type,v.evaluate(b))}catch(E){return this.error(E.message),null}}return v}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,s,d){const f=typeof r=="number"?this.path.concat(r):this.path,g=d?this.scope.concat(d):this.scope;return new Hc(this.registry,f,s||null,g,this.errors)}error(r,...s){const d=`${this.key}${s.map(f=>`[${f}]`).join("")}`;this.errors.push(new ia(d,r))}checkSubtype(r,s){const d=Ra(r,s);return d&&this.error(d),d}}var jf=Hc;function Vf(a){if(a instanceof xy)return Vf(a.boundExpression);if(a instanceof Aa&&a.name==="error"||a instanceof Wc||a instanceof hd)return!1;const r=a instanceof vl||a instanceof Ma;let s=!0;return a.eachChild(d=>{s=r?s&&Vf(d):s&&d instanceof Ms}),!!s&&wl(a)&&ks(a,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function pd(a,r){const s=a.length-1;let d,f,g=0,v=s,b=0;for(;g<=v;)if(b=Math.floor((g+v)/2),d=a[b],f=a[b+1],d<=r){if(b===s||r<f)return b;g=b+1}else{if(!(d>r))throw new ki("Input is not a number.");v=b-1}return 0}class md{constructor(r,s,d){this.type=r,this.input=s,this.labels=[],this.outputs=[];for(const[f,g]of d)this.labels.push(f),this.outputs.push(g)}static parse(r,s){if(r.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");const d=s.parse(r[1],1,Zt);if(!d)return null;const f=[];let g=null;s.expectedType&&s.expectedType.kind!=="value"&&(g=s.expectedType);for(let v=1;v<r.length;v+=2){const b=v===1?-1/0:r[v],E=r[v+1],T=v,A=v+1;if(typeof b!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',T);if(f.length&&f[f.length-1][0]>=b)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',T);const I=s.parse(E,A,g);if(!I)return null;g=g||I.type,f.push([b,I])}return new md(g,d,f)}evaluate(r){const s=this.labels,d=this.outputs;if(s.length===1)return d[0].evaluate(r);const f=this.input.evaluate(r);if(f<=s[0])return d[0].evaluate(r);const g=s.length;return f>=s[g-1]?d[g-1].evaluate(r):d[pd(s,f)].evaluate(r)}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}serialize(){const r=["step",this.input.serialize()];for(let s=0;s<this.labels.length;s++)s>0&&r.push(this.labels[s]),r.push(this.outputs[s].serialize());return r}}var Gf=md;function Zn(a,r,s){return a*(1-s)+r*s}var Zc=Object.freeze({__proto__:null,array:function(a,r,s){return a.map((d,f)=>Zn(d,r[f],s))},color:function(a,r,s){return new Xr(Zn(a.r,r.r,s),Zn(a.g,r.g,s),Zn(a.b,r.b,s),Zn(a.a,r.a,s))},number:Zn});const by=.95047,Wf=1.08883,wy=4/29,Ps=6/29,qf=3*Ps*Ps,Sx=Ps*Ps*Ps,Ex=Math.PI/180,Tx=180/Math.PI;function Hf(a){return a>Sx?Math.pow(a,1/3):a/qf+wy}function Zf(a){return a>Ps?a*a*a:qf*(a-wy)}function Xf(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function gd(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Sy(a){const r=gd(a.r),s=gd(a.g),d=gd(a.b),f=Hf((.4124564*r+.3575761*s+.1804375*d)/by),g=Hf((.2126729*r+.7151522*s+.072175*d)/1);return{l:116*g-16,a:500*(f-g),b:200*(g-Hf((.0193339*r+.119192*s+.9503041*d)/Wf)),alpha:a.a}}function Ey(a){let r=(a.l+16)/116,s=isNaN(a.a)?r:r+a.a/500,d=isNaN(a.b)?r:r-a.b/200;return r=1*Zf(r),s=by*Zf(s),d=Wf*Zf(d),new Xr(Xf(3.2404542*s-1.5371385*r-.4985314*d),Xf(-.969266*s+1.8760108*r+.041556*d),Xf(.0556434*s-.2040259*r+1.0572252*d),a.alpha)}function Cx(a,r,s){const d=r-a;return a+s*(d>180||d<-180?d-360*Math.round(d/360):d)}const Xc={forward:Sy,reverse:Ey,interpolate:function(a,r,s){return{l:Zn(a.l,r.l,s),a:Zn(a.a,r.a,s),b:Zn(a.b,r.b,s),alpha:Zn(a.alpha,r.alpha,s)}}},Sl={forward:function(a){const{l:r,a:s,b:d}=Sy(a),f=Math.atan2(d,s)*Tx;return{h:f<0?f+360:f,c:Math.sqrt(s*s+d*d),l:r,alpha:a.a}},reverse:function(a){const r=a.h*Ex,s=a.c;return Ey({l:a.l,a:Math.cos(r)*s,b:Math.sin(r)*s,alpha:a.alpha})},interpolate:function(a,r,s){return{h:Cx(a.h,r.h,s),c:Zn(a.c,r.c,s),l:Zn(a.l,r.l,s),alpha:Zn(a.alpha,r.alpha,s)}}};var Kf=Object.freeze({__proto__:null,hcl:Sl,lab:Xc});class Kc{constructor(r,s,d,f,g){this.type=r,this.operator=s,this.interpolation=d,this.input=f,this.labels=[],this.outputs=[];for(const[v,b]of g)this.labels.push(v),this.outputs.push(b)}static interpolationFactor(r,s,d,f){let g=0;if(r.name==="exponential")g=Yf(s,r.base,d,f);else if(r.name==="linear")g=Yf(s,1,d,f);else if(r.name==="cubic-bezier"){const v=r.controlPoints;g=new ue(v[0],v[1],v[2],v[3]).solve(Yf(s,1,d,f))}return g}static parse(r,s){let[d,f,g,...v]=r;if(!Array.isArray(f)||f.length===0)return s.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const T=f[1];if(typeof T!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:T}}else{if(f[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const T=f.slice(1);if(T.length!==4||T.some(A=>typeof A!="number"||A<0||A>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:T}}}if(r.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(g=s.parse(g,2,Zt),!g)return null;const b=[];let E=null;d==="interpolate-hcl"||d==="interpolate-lab"?E=ho:s.expectedType&&s.expectedType.kind!=="value"&&(E=s.expectedType);for(let T=0;T<v.length;T+=2){const A=v[T],I=v[T+1],O=T+3,N=T+4;if(typeof A!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(b.length&&b[b.length-1][0]>=A)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',O);const U=s.parse(I,N,E);if(!U)return null;E=E||U.type,b.push([A,U])}return E.kind==="number"||E.kind==="color"||E.kind==="array"&&E.itemType.kind==="number"&&typeof E.N=="number"?new Kc(E,d,f,g,b):s.error(`Type ${Or(E)} is not interpolatable.`)}evaluate(r){const s=this.labels,d=this.outputs;if(s.length===1)return d[0].evaluate(r);const f=this.input.evaluate(r);if(f<=s[0])return d[0].evaluate(r);const g=s.length;if(f>=s[g-1])return d[g-1].evaluate(r);const v=pd(s,f),b=Kc.interpolationFactor(this.interpolation,f,s[v],s[v+1]),E=d[v].evaluate(r),T=d[v+1].evaluate(r);return this.operator==="interpolate"?Zc[this.type.kind.toLowerCase()](E,T,b):this.operator==="interpolate-hcl"?Sl.reverse(Sl.interpolate(Sl.forward(E),Sl.forward(T),b)):Xc.reverse(Xc.interpolate(Xc.forward(E),Xc.forward(T),b))}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}serialize(){let r;r=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const s=[this.operator,r,this.input.serialize()];for(let d=0;d<this.labels.length;d++)s.push(this.labels[d],this.outputs[d].serialize());return s}}function Yf(a,r,s,d){const f=d-s,g=a-s;return f===0?0:r===1?g/f:(Math.pow(r,g)-1)/(Math.pow(r,f)-1)}var aa=Kc;class yd{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expectected at least one argument.");let d=null;const f=s.expectedType;f&&f.kind!=="value"&&(d=f);const g=[];for(const b of r.slice(1)){const E=s.parse(b,1+g.length,d,void 0,{typeAnnotation:"omit"});if(!E)return null;d=d||E.type,g.push(E)}const v=f&&g.some(b=>Ra(f,b.type));return new yd(v?zn:d,g)}evaluate(r){let s,d=null,f=0;for(const g of this.args){if(f++,d=g.evaluate(r),d&&d instanceof wo&&!d.available&&(s||(s=d),d=null,f===this.args.length))return s;if(d!==null)break}return d}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){const r=["coalesce"];return this.eachChild(s=>{r.push(s.serialize())}),r}}var Qf=yd;class vd{constructor(r,s){this.type=s.type,this.bindings=[].concat(r),this.result=s}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const s of this.bindings)r(s[1]);r(this.result)}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const d=[];for(let g=1;g<r.length-1;g+=2){const v=r[g];if(typeof v!="string")return s.error(`Expected string, but found ${typeof v} instead.`,g);if(/[^a-zA-Z0-9_]/.test(v))return s.error("Variable names must contain only alphanumeric characters or '_'.",g);const b=s.parse(r[g+1],g+1);if(!b)return null;d.push([v,b])}const f=s.parse(r[r.length-1],r.length-1,s.expectedType,d);return f?new vd(d,f):null}outputDefined(){return this.result.outputDefined()}serialize(){const r=["let"];for(const[s,d]of this.bindings)r.push(s,d.serialize());return r.push(this.result.serialize()),r}}var Ty=vd;class Jf{constructor(r,s,d){this.type=r,this.index=s,this.input=d}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const d=s.parse(r[1],1,Zt),f=s.parse(r[2],2,bo(s.expectedType||zn));return d&&f?new Jf(f.type.itemType,d,f):null}evaluate(r){const s=this.index.evaluate(r),d=this.input.evaluate(r);if(s<0)throw new ki(`Array index out of bounds: ${s} < 0.`);if(s>=d.length)throw new ki(`Array index out of bounds: ${s} > ${d.length-1}.`);if(s!==Math.floor(s))throw new ki(`Array index must be an integer, but found ${s} instead.`);return d[s]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Rx=Jf;class ep{constructor(r,s){this.type=Dn,this.needle=r,this.haystack=s}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const d=s.parse(r[1],1,zn),f=s.parse(r[2],2,zn);return d&&f?Nc(d.type,[Dn,Nn,Zt,gl,zn])?new ep(d,f):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Or(d.type)} instead`):null}evaluate(r){const s=this.needle.evaluate(r),d=this.haystack.evaluate(r);if(d==null)return!1;if(!$c(s,["boolean","string","number","null"]))throw new ki(`Expected first argument to be of type boolean, string, number or null, but found ${Or(Ur(s))} instead.`);if(!$c(d,["string","array"]))throw new ki(`Expected second argument to be of type array or string, but found ${Or(Ur(d))} instead.`);return d.indexOf(s)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var _d=ep;class Yc{constructor(r,s,d){this.type=Zt,this.needle=r,this.haystack=s,this.fromIndex=d}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const d=s.parse(r[1],1,zn),f=s.parse(r[2],2,zn);if(!d||!f)return null;if(!Nc(d.type,[Dn,Nn,Zt,gl,zn]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Or(d.type)} instead`);if(r.length===4){const g=s.parse(r[3],3,Zt);return g?new Yc(d,f,g):null}return new Yc(d,f)}evaluate(r){const s=this.needle.evaluate(r),d=this.haystack.evaluate(r);if(!$c(s,["boolean","string","number","null"]))throw new ki(`Expected first argument to be of type boolean, string, number or null, but found ${Or(Ur(s))} instead.`);if(!$c(d,["string","array"]))throw new ki(`Expected second argument to be of type array or string, but found ${Or(Ur(d))} instead.`);if(this.fromIndex){const f=this.fromIndex.evaluate(r);return d.indexOf(s,f)}return d.indexOf(s)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const r=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),r]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Cy=Yc;class tp{constructor(r,s,d,f,g,v){this.inputType=r,this.type=s,this.input=d,this.cases=f,this.outputs=g,this.otherwise=v}static parse(r,s){if(r.length<5)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return s.error("Expected an even number of arguments.");let d,f;s.expectedType&&s.expectedType.kind!=="value"&&(f=s.expectedType);const g={},v=[];for(let T=2;T<r.length-1;T+=2){let A=r[T];const I=r[T+1];Array.isArray(A)||(A=[A]);const O=s.concat(T);if(A.length===0)return O.error("Expected at least one branch label.");for(const U of A){if(typeof U!="number"&&typeof U!="string")return O.error("Branch labels must be numbers or strings.");if(typeof U=="number"&&Math.abs(U)>Number.MAX_SAFE_INTEGER)return O.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof U=="number"&&Math.floor(U)!==U)return O.error("Numeric branch labels must be integer values.");if(d){if(O.checkSubtype(d,Ur(U)))return null}else d=Ur(U);if(g[String(U)]!==void 0)return O.error("Branch labels must be unique.");g[String(U)]=v.length}const N=s.parse(I,T,f);if(!N)return null;f=f||N.type,v.push(N)}const b=s.parse(r[1],1,zn);if(!b)return null;const E=s.parse(r[r.length-1],r.length-1,f);return E?b.type.kind!=="value"&&s.concat(1).checkSubtype(d,b.type)?null:new tp(d,f,b,g,v,E):null}evaluate(r){const s=this.input.evaluate(r);return(Ur(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}serialize(){const r=["match",this.input.serialize()],s=Object.keys(this.cases).sort(),d=[],f={};for(const v of s){const b=f[this.cases[v]];b===void 0?(f[this.cases[v]]=d.length,d.push([this.cases[v],[v]])):d[b][1].push(v)}const g=v=>this.inputType.kind==="number"?Number(v):v;for(const[v,b]of d)r.push(b.length===1?g(b[0]):b.map(g)),r.push(this.outputs[v].serialize());return r.push(this.otherwise.serialize()),r}}var Mx=tp;class np{constructor(r,s,d){this.type=r,this.branches=s,this.otherwise=d}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return s.error("Expected an odd number of arguments.");let d;s.expectedType&&s.expectedType.kind!=="value"&&(d=s.expectedType);const f=[];for(let v=1;v<r.length-1;v+=2){const b=s.parse(r[v],v,Dn);if(!b)return null;const E=s.parse(r[v+1],v+1,d);if(!E)return null;f.push([b,E]),d=d||E.type}const g=s.parse(r[r.length-1],r.length-1,d);return g?new np(d,f,g):null}evaluate(r){for(const[s,d]of this.branches)if(s.evaluate(r))return d.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[s,d]of this.branches)r(s),r(d);r(this.otherwise)}outputDefined(){return this.branches.every(([r,s])=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const r=["case"];return this.eachChild(s=>{r.push(s.serialize())}),r}}var Ry=np;class Qc{constructor(r,s,d,f){this.type=r,this.input=s,this.beginIndex=d,this.endIndex=f}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const d=s.parse(r[1],1,zn),f=s.parse(r[2],2,Zt);if(!d||!f)return null;if(!Nc(d.type,[bo(zn),Nn,zn]))return s.error(`Expected first argument to be of type array or string, but found ${Or(d.type)} instead`);if(r.length===4){const g=s.parse(r[3],3,Zt);return g?new Qc(d.type,d,f,g):null}return new Qc(d.type,d,f)}evaluate(r){const s=this.input.evaluate(r),d=this.beginIndex.evaluate(r);if(!$c(s,["string","array"]))throw new ki(`Expected first argument to be of type array or string, but found ${Or(Ur(s))} instead.`);if(this.endIndex){const f=this.endIndex.evaluate(r);return s.slice(d,f)}return s.slice(d)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const r=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),r]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var My=Qc;function xd(a,r){return a==="=="||a==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function Ay(a,r,s,d){return d.compare(r,s)===0}function El(a,r,s){const d=a!=="=="&&a!=="!=";return class kF{constructor(g,v,b){this.type=Dn,this.lhs=g,this.rhs=v,this.collator=b,this.hasUntypedArgument=g.type.kind==="value"||v.type.kind==="value"}static parse(g,v){if(g.length!==3&&g.length!==4)return v.error("Expected two or three arguments.");const b=g[0];let E=v.parse(g[1],1,zn);if(!E)return null;if(!xd(b,E.type))return v.concat(1).error(`"${b}" comparisons are not supported for type '${Or(E.type)}'.`);let T=v.parse(g[2],2,zn);if(!T)return null;if(!xd(b,T.type))return v.concat(2).error(`"${b}" comparisons are not supported for type '${Or(T.type)}'.`);if(E.type.kind!==T.type.kind&&E.type.kind!=="value"&&T.type.kind!=="value")return v.error(`Cannot compare types '${Or(E.type)}' and '${Or(T.type)}'.`);d&&(E.type.kind==="value"&&T.type.kind!=="value"?E=new Ma(T.type,[E]):E.type.kind!=="value"&&T.type.kind==="value"&&(T=new Ma(E.type,[T])));let A=null;if(g.length===4){if(E.type.kind!=="string"&&T.type.kind!=="string"&&E.type.kind!=="value"&&T.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(A=v.parse(g[3],3,fo),!A)return null}return new kF(E,T,A)}evaluate(g){const v=this.lhs.evaluate(g),b=this.rhs.evaluate(g);if(d&&this.hasUntypedArgument){const E=Ur(v),T=Ur(b);if(E.kind!==T.kind||E.kind!=="string"&&E.kind!=="number")throw new ki(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${E.kind}, ${T.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const E=Ur(v),T=Ur(b);if(E.kind!=="string"||T.kind!=="string")return r(g,v,b)}return this.collator?s(g,v,b,this.collator.evaluate(g)):r(g,v,b)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}serialize(){const g=[a];return this.eachChild(v=>{g.push(v.serialize())}),g}}}const Ax=El("==",function(a,r,s){return r===s},Ay),kx=El("!=",function(a,r,s){return r!==s},function(a,r,s,d){return!Ay(0,r,s,d)}),Px=El("<",function(a,r,s){return r<s},function(a,r,s,d){return d.compare(r,s)<0}),Ix=El(">",function(a,r,s){return r>s},function(a,r,s,d){return d.compare(r,s)>0}),Lx=El("<=",function(a,r,s){return r<=s},function(a,r,s,d){return d.compare(r,s)<=0}),ky=El(">=",function(a,r,s){return r>=s},function(a,r,s,d){return d.compare(r,s)>=0});class bd{constructor(r,s,d,f,g,v){this.type=Nn,this.number=r,this.locale=s,this.currency=d,this.unit=f,this.minFractionDigits=g,this.maxFractionDigits=v}static parse(r,s){if(r.length!==3)return s.error("Expected two arguments.");const d=s.parse(r[1],1,Zt);if(!d)return null;const f=r[2];if(typeof f!="object"||Array.isArray(f))return s.error("NumberFormat options argument must be an object.");let g=null;if(f.locale&&(g=s.parse(f.locale,1,Nn),!g))return null;let v=null;if(f.currency&&(v=s.parse(f.currency,1,Nn),!v))return null;let b=null;if(f.unit&&(b=s.parse(f.unit,1,Nn),!b))return null;let E=null;if(f["min-fraction-digits"]&&(E=s.parse(f["min-fraction-digits"],1,Zt),!E))return null;let T=null;return f["max-fraction-digits"]&&(T=s.parse(f["max-fraction-digits"],1,Zt),!T)?null:new bd(d,g,v,b,E,T)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(r):void 0,unit:this.unit?this.unit.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.unit&&r(this.unit),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const r={};return this.locale&&(r.locale=this.locale.serialize()),this.currency&&(r.currency=this.currency.serialize()),this.unit&&(r.unit=this.unit.serialize()),this.minFractionDigits&&(r["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(r["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),r]}}class Tl{constructor(r){this.type=Zt,this.input=r}static parse(r,s){if(r.length!==2)return s.error(`Expected 1 argument, but found ${r.length-1} instead.`);const d=s.parse(r[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${Or(d.type)} instead.`):new Tl(d):null}evaluate(r){const s=this.input.evaluate(r);if(typeof s=="string"||Array.isArray(s))return s.length;throw new ki(`Expected value to be of type string or array, but found ${Or(Ur(s))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}serialize(){const r=["length"];return this.eachChild(s=>{r.push(s.serialize())}),r}}const Py={"==":Ax,"!=":kx,">":Ix,"<":Px,">=":ky,"<=":Lx,array:Ma,at:Rx,boolean:Ma,case:Ry,coalesce:Qf,collator:Wc,format:ts,image:cd,in:_d,"index-of":Cy,interpolate:aa,"interpolate-hcl":aa,"interpolate-lab":aa,length:Tl,let:Ty,literal:Ms,match:Mx,number:Ma,"number-format":bd,object:Ma,slice:My,step:Gf,string:Ma,"to-boolean":vl,"to-color":vl,"to-number":vl,"to-string":vl,var:xy,within:hd};function Iy(a,[r,s,d,f]){r=r.evaluate(a),s=s.evaluate(a),d=d.evaluate(a);const g=f?f.evaluate(a):1,v=gy(r,s,d,g);if(v)throw new ki(v);return new Xr(r/255*g,s/255*g,d/255*g,g)}function Ia(a,r){return a in r}function wd(a,r){const s=r[a];return s===void 0?null:s}function So(a){return{type:a}}Aa.register(Py,{error:[{kind:"error"},[Nn],(a,[r])=>{throw new ki(r.evaluate(a))}],typeof:[Nn,[zn],(a,[r])=>Or(Ur(r.evaluate(a)))],"to-rgba":[bo(Zt,4),[ho],(a,[r])=>r.evaluate(a).toArray()],rgb:[ho,[Zt,Zt,Zt],Iy],rgba:[ho,[Zt,Zt,Zt,Zt],Iy],has:{type:Dn,overloads:[[[Nn],(a,[r])=>Ia(r.evaluate(a),a.properties())],[[Nn,Uo],(a,[r,s])=>Ia(r.evaluate(a),s.evaluate(a))]]},get:{type:zn,overloads:[[[Nn],(a,[r])=>wd(r.evaluate(a),a.properties())],[[Nn,Uo],(a,[r,s])=>wd(r.evaluate(a),s.evaluate(a))]]},"feature-state":[zn,[Nn],(a,[r])=>wd(r.evaluate(a),a.featureState||{})],properties:[Uo,[],a=>a.properties()],"geometry-type":[Nn,[],a=>a.geometryType()],id:[zn,[],a=>a.id()],zoom:[Zt,[],a=>a.globals.zoom],pitch:[Zt,[],a=>a.globals.pitch||0],"distance-from-center":[Zt,[],a=>a.distanceFromCenter()],"heatmap-density":[Zt,[],a=>a.globals.heatmapDensity||0],"line-progress":[Zt,[],a=>a.globals.lineProgress||0],"sky-radial-progress":[Zt,[],a=>a.globals.skyRadialProgress||0],accumulated:[zn,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[Zt,So(Zt),(a,r)=>{let s=0;for(const d of r)s+=d.evaluate(a);return s}],"*":[Zt,So(Zt),(a,r)=>{let s=1;for(const d of r)s*=d.evaluate(a);return s}],"-":{type:Zt,overloads:[[[Zt,Zt],(a,[r,s])=>r.evaluate(a)-s.evaluate(a)],[[Zt],(a,[r])=>-r.evaluate(a)]]},"/":[Zt,[Zt,Zt],(a,[r,s])=>r.evaluate(a)/s.evaluate(a)],"%":[Zt,[Zt,Zt],(a,[r,s])=>r.evaluate(a)%s.evaluate(a)],ln2:[Zt,[],()=>Math.LN2],pi:[Zt,[],()=>Math.PI],e:[Zt,[],()=>Math.E],"^":[Zt,[Zt,Zt],(a,[r,s])=>Math.pow(r.evaluate(a),s.evaluate(a))],sqrt:[Zt,[Zt],(a,[r])=>Math.sqrt(r.evaluate(a))],log10:[Zt,[Zt],(a,[r])=>Math.log(r.evaluate(a))/Math.LN10],ln:[Zt,[Zt],(a,[r])=>Math.log(r.evaluate(a))],log2:[Zt,[Zt],(a,[r])=>Math.log(r.evaluate(a))/Math.LN2],sin:[Zt,[Zt],(a,[r])=>Math.sin(r.evaluate(a))],cos:[Zt,[Zt],(a,[r])=>Math.cos(r.evaluate(a))],tan:[Zt,[Zt],(a,[r])=>Math.tan(r.evaluate(a))],asin:[Zt,[Zt],(a,[r])=>Math.asin(r.evaluate(a))],acos:[Zt,[Zt],(a,[r])=>Math.acos(r.evaluate(a))],atan:[Zt,[Zt],(a,[r])=>Math.atan(r.evaluate(a))],min:[Zt,So(Zt),(a,r)=>Math.min(...r.map(s=>s.evaluate(a)))],max:[Zt,So(Zt),(a,r)=>Math.max(...r.map(s=>s.evaluate(a)))],abs:[Zt,[Zt],(a,[r])=>Math.abs(r.evaluate(a))],round:[Zt,[Zt],(a,[r])=>{const s=r.evaluate(a);return s<0?-Math.round(-s):Math.round(s)}],floor:[Zt,[Zt],(a,[r])=>Math.floor(r.evaluate(a))],ceil:[Zt,[Zt],(a,[r])=>Math.ceil(r.evaluate(a))],"filter-==":[Dn,[Nn,zn],(a,[r,s])=>a.properties()[r.value]===s.value],"filter-id-==":[Dn,[zn],(a,[r])=>a.id()===r.value],"filter-type-==":[Dn,[Nn],(a,[r])=>a.geometryType()===r.value],"filter-<":[Dn,[Nn,zn],(a,[r,s])=>{const d=a.properties()[r.value],f=s.value;return typeof d==typeof f&&d<f}],"filter-id-<":[Dn,[zn],(a,[r])=>{const s=a.id(),d=r.value;return typeof s==typeof d&&s<d}],"filter->":[Dn,[Nn,zn],(a,[r,s])=>{const d=a.properties()[r.value],f=s.value;return typeof d==typeof f&&d>f}],"filter-id->":[Dn,[zn],(a,[r])=>{const s=a.id(),d=r.value;return typeof s==typeof d&&s>d}],"filter-<=":[Dn,[Nn,zn],(a,[r,s])=>{const d=a.properties()[r.value],f=s.value;return typeof d==typeof f&&d<=f}],"filter-id-<=":[Dn,[zn],(a,[r])=>{const s=a.id(),d=r.value;return typeof s==typeof d&&s<=d}],"filter->=":[Dn,[Nn,zn],(a,[r,s])=>{const d=a.properties()[r.value],f=s.value;return typeof d==typeof f&&d>=f}],"filter-id->=":[Dn,[zn],(a,[r])=>{const s=a.id(),d=r.value;return typeof s==typeof d&&s>=d}],"filter-has":[Dn,[zn],(a,[r])=>r.value in a.properties()],"filter-has-id":[Dn,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[Dn,[bo(Nn)],(a,[r])=>r.value.indexOf(a.geometryType())>=0],"filter-id-in":[Dn,[bo(zn)],(a,[r])=>r.value.indexOf(a.id())>=0],"filter-in-small":[Dn,[Nn,bo(zn)],(a,[r,s])=>s.value.indexOf(a.properties()[r.value])>=0],"filter-in-large":[Dn,[Nn,bo(zn)],(a,[r,s])=>function(d,f,g,v){for(;g<=v;){const b=g+v>>1;if(f[b]===d)return!0;f[b]>d?v=b-1:g=b+1}return!1}(a.properties()[r.value],s.value,0,s.value.length-1)],all:{type:Dn,overloads:[[[Dn,Dn],(a,[r,s])=>r.evaluate(a)&&s.evaluate(a)],[So(Dn),(a,r)=>{for(const s of r)if(!s.evaluate(a))return!1;return!0}]]},any:{type:Dn,overloads:[[[Dn,Dn],(a,[r,s])=>r.evaluate(a)||s.evaluate(a)],[So(Dn),(a,r)=>{for(const s of r)if(s.evaluate(a))return!0;return!1}]]},"!":[Dn,[Dn],(a,[r])=>!r.evaluate(a)],"is-supported-script":[Dn,[Nn],(a,[r])=>{const s=a.globals&&a.globals.isSupportedScript;return!s||s(r.evaluate(a))}],upcase:[Nn,[Nn],(a,[r])=>r.evaluate(a).toUpperCase()],downcase:[Nn,[Nn],(a,[r])=>r.evaluate(a).toLowerCase()],concat:[Nn,So(zn),(a,r)=>r.map(s=>Gc(s.evaluate(a))).join("")],"resolved-locale":[Nn,[fo],(a,[r])=>r.evaluate(a).resolvedLocale()]});var Jc=Py;function Ly(a){return{result:"success",value:a}}function Is(a){return{result:"error",value:a}}function Cl(a){return a["property-type"]==="data-driven"}function Sd(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function Ed(a){return!!a.expression&&a.expression.interpolated}function Kn(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function eu(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function Oy(a){return a}function Td(a,r){const s=r.type==="color",d=a.stops&&typeof a.stops[0][0]=="object",f=d||!(d||a.property!==void 0),g=a.type||(Ed(r)?"exponential":"interval");if(s&&((a=Ca({},a)).stops&&(a.stops=a.stops.map(T=>[T[0],Xr.parse(T[1])])),a.default=Xr.parse(a.default?a.default:r.default)),a.colorSpace&&a.colorSpace!=="rgb"&&!Kf[a.colorSpace])throw new Error(`Unknown color space: ${a.colorSpace}`);let v,b,E;if(g==="exponential")v=La;else if(g==="interval")v=Cd;else if(g==="categorical"){v=Dy,b=Object.create(null);for(const T of a.stops)b[T[0]]=T[1];E=typeof a.stops[0][0]}else{if(g!=="identity")throw new Error(`Unknown function type "${g}"`);v=zy}if(d){const T={},A=[];for(let N=0;N<a.stops.length;N++){const U=a.stops[N],K=U[0].zoom;T[K]===void 0&&(T[K]={zoom:K,type:a.type,property:a.property,default:a.default,stops:[]},A.push(K)),T[K].stops.push([U[0].value,U[1]])}const I=[];for(const N of A)I.push([T[N].zoom,Td(T[N],r)]);const O={name:"linear"};return{kind:"composite",interpolationType:O,interpolationFactor:aa.interpolationFactor.bind(void 0,O),zoomStops:I.map(N=>N[0]),evaluate:({zoom:N},U)=>La({stops:I,base:a.base},r,N).evaluate(N,U)}}if(f){const T=g==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:T,interpolationFactor:aa.interpolationFactor.bind(void 0,T),zoomStops:a.stops.map(A=>A[0]),evaluate:({zoom:A})=>v(a,r,A,b,E)}}return{kind:"source",evaluate(T,A){const I=A&&A.properties?A.properties[a.property]:void 0;return I===void 0?Rl(a.default,r.default):v(a,r,I,b,E)}}}function Rl(a,r,s){return a!==void 0?a:r!==void 0?r:s!==void 0?s:void 0}function Dy(a,r,s,d,f){return Rl(typeof s===f?d[s]:void 0,a.default,r.default)}function Cd(a,r,s){if(Kn(s)!=="number")return Rl(a.default,r.default);const d=a.stops.length;if(d===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[d-1][0])return a.stops[d-1][1];const f=pd(a.stops.map(g=>g[0]),s);return a.stops[f][1]}function La(a,r,s){const d=a.base!==void 0?a.base:1;if(Kn(s)!=="number")return Rl(a.default,r.default);const f=a.stops.length;if(f===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[f-1][0])return a.stops[f-1][1];const g=pd(a.stops.map(A=>A[0]),s),v=function(A,I,O,N){const U=N-O,K=A-O;return U===0?0:I===1?K/U:(Math.pow(I,K)-1)/(Math.pow(I,U)-1)}(s,d,a.stops[g][0],a.stops[g+1][0]),b=a.stops[g][1],E=a.stops[g+1][1];let T=Zc[r.type]||Oy;if(a.colorSpace&&a.colorSpace!=="rgb"){const A=Kf[a.colorSpace];T=(I,O)=>A.reverse(A.interpolate(A.forward(I),A.forward(O),v))}return typeof b.evaluate=="function"?{evaluate(...A){const I=b.evaluate.apply(void 0,A),O=E.evaluate.apply(void 0,A);if(I!==void 0&&O!==void 0)return T(I,O,v)}}:T(b,E,v)}function zy(a,r,s){return r.type==="color"?s=Xr.parse(s):r.type==="formatted"?s=Ji.fromString(s.toString()):r.type==="resolvedImage"?s=wo.fromString(s.toString()):Kn(s)===r.type||r.type==="enum"&&r.values[s]||(s=void 0),Rl(s,a.default,r.default)}class Rd{constructor(r,s){this.expression=r,this._warningHistory={},this._evaluator=new zf,this._defaultValue=s?function(d){return d.type==="color"&&(eu(d.default)||Array.isArray(d.default))?new Xr(0,0,0,0):d.type==="color"?Xr.parse(d.default)||null:d.default===void 0?null:d.default}(s):null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(r,s,d,f,g,v,b,E){return this._evaluator.globals=r,this._evaluator.feature=s,this._evaluator.featureState=d,this._evaluator.canonical=f||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=v,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=E||null,this.expression.evaluate(this._evaluator)}evaluate(r,s,d,f,g,v,b,E){this._evaluator.globals=r,this._evaluator.feature=s||null,this._evaluator.featureState=d||null,this._evaluator.canonical=f||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=v||null,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=E||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new ki(`Expected value to be one of ${Object.keys(this._enumValues).map(A=>JSON.stringify(A)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}}}function Ml(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in Jc}function Al(a,r){const s=new jf(Jc,[],r?function(f){const g={color:ho,string:Nn,number:Zt,enum:Nn,boolean:Dn,formatted:Bc,resolvedImage:Rs};return f.type==="array"?bo(g[f.value]||zn,f.length):g[f.type]}(r):void 0),d=s.parse(a,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?Ly(new Rd(d,r)):Is(s.errors)}class rp{constructor(r,s){this.kind=r,this._styleExpression=s,this.isStateDependent=r!=="constant"&&!Pa(s.expression)}evaluateWithoutErrorHandling(r,s,d,f,g,v){return this._styleExpression.evaluateWithoutErrorHandling(r,s,d,f,g,v)}evaluate(r,s,d,f,g,v){return this._styleExpression.evaluate(r,s,d,f,g,v)}}class tu{constructor(r,s,d,f){this.kind=r,this.zoomStops=d,this._styleExpression=s,this.isStateDependent=r!=="camera"&&!Pa(s.expression),this.interpolationType=f}evaluateWithoutErrorHandling(r,s,d,f,g,v){return this._styleExpression.evaluateWithoutErrorHandling(r,s,d,f,g,v)}evaluate(r,s,d,f,g,v){return this._styleExpression.evaluate(r,s,d,f,g,v)}interpolationFactor(r,s,d){return this.interpolationType?aa.interpolationFactor(this.interpolationType,r,s,d):0}}function nu(a,r){if((a=Al(a,r)).result==="error")return a;const s=a.value.expression,d=wl(s);if(!d&&!Cl(r))return Is([new ia("","data expressions not supported")]);const f=ks(s,["zoom","pitch","distance-from-center"]);if(!f&&!Sd(r))return Is([new ia("","zoom expressions not supported")]);const g=Ad(s);return g||f?g instanceof ia?Is([g]):g instanceof aa&&!Ed(r)?Is([new ia("",'"interpolate" expressions cannot be used with this property')]):Ly(g?new tu(d?"camera":"composite",a.value,g.labels,g instanceof aa?g.interpolation:void 0):new rp(d?"constant":"source",a.value)):Is([new ia("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Md{constructor(r,s){this._parameters=r,this._specification=s,Ca(this,Td(this._parameters,this._specification))}static deserialize(r){return new Md(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function Ad(a){let r=null;if(a instanceof Ty)r=Ad(a.result);else if(a instanceof Qf){for(const s of a.args)if(r=Ad(s),r)break}else(a instanceof Gf||a instanceof aa)&&a.input instanceof Aa&&a.input.name==="zoom"&&(r=a);return r instanceof ia||a.eachChild(s=>{const d=Ad(s);d instanceof ia?r=d:!r&&d?r=new ia("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&d&&r!==d&&(r=new ia("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}class Xt{constructor(r,s,d,f){this.message=(r?`${r}: `:"")+d,f&&(this.identifier=f),s!=null&&s.__line__&&(this.line=s.__line__)}}function jo(a){const r=a.key,s=a.value,d=a.valueSpec||{},f=a.objectElementValidators||{},g=a.style,v=a.styleSpec;let b=[];const E=Kn(s);if(E!=="object")return[new Xt(r,s,`object expected, ${E} found`)];for(const T in s){const A=T.split(".")[0];let I;f[A]?I=f[A]:d[A]?I=Fi:f["*"]?I=f["*"]:d["*"]&&(I=Fi),I?b=b.concat(I({key:(r&&`${r}.`)+T,value:s[T],valueSpec:d[A]||d["*"],style:g,styleSpec:v,object:s,objectKey:T},s)):b.push(new Xt(r,s[T],`unknown property "${T}"`))}for(const T in d)f[T]||d[T].required&&d[T].default===void 0&&s[T]===void 0&&b.push(new Xt(r,s,`missing required property "${T}"`));return b}function Fy(a){const r=a.value,s=a.valueSpec,d=a.style,f=a.styleSpec,g=a.key,v=a.arrayElementValidator||Fi;if(Kn(r)!=="array")return[new Xt(g,r,`array expected, ${Kn(r)} found`)];if(s.length&&r.length!==s.length)return[new Xt(g,r,`array length ${s.length} expected, length ${r.length} found`)];if(s["min-length"]&&r.length<s["min-length"])return[new Xt(g,r,`array length at least ${s["min-length"]} expected, length ${r.length} found`)];let b={type:s.value,values:s.values,minimum:s.minimum,maximum:s.maximum,function:void 0};f.$version<7&&(b.function=s.function),Kn(s.value)==="object"&&(b=s.value);let E=[];for(let T=0;T<r.length;T++)E=E.concat(v({array:r,arrayIndex:T,value:r[T],valueSpec:b,style:d,styleSpec:f,key:`${g}[${T}]`}));return E}function ru(a){const r=a.key,s=a.value,d=a.valueSpec;let f=Kn(s);if(f==="number"&&s!=s&&(f="NaN"),f!=="number")return[new Xt(r,s,`number expected, ${f} found`)];if("minimum"in d){let g=d.minimum;if(Kn(d.minimum)==="array"&&(g=d.minimum[a.arrayIndex]),s<g)return[new Xt(r,s,`${s} is less than the minimum value ${g}`)]}if("maximum"in d){let g=d.maximum;if(Kn(d.maximum)==="array"&&(g=d.maximum[a.arrayIndex]),s>g)return[new Xt(r,s,`${s} is greater than the maximum value ${g}`)]}return[]}function iu(a){const r=a.valueSpec,s=ni(a.value.type);let d,f,g,v={};const b=s!=="categorical"&&a.value.property===void 0,E=!b,T=Kn(a.value.stops)==="array"&&Kn(a.value.stops[0])==="array"&&Kn(a.value.stops[0][0])==="object",A=jo({key:a.key,value:a.value,valueSpec:a.styleSpec.function,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(N){if(s==="identity")return[new Xt(N.key,N.value,'identity function may not have a "stops" property')];let U=[];const K=N.value;return U=U.concat(Fy({key:N.key,value:K,valueSpec:N.valueSpec,style:N.style,styleSpec:N.styleSpec,arrayElementValidator:I})),Kn(K)==="array"&&K.length===0&&U.push(new Xt(N.key,K,"array must have at least one stop")),U},default:function(N){return Fi({key:N.key,value:N.value,valueSpec:r,style:N.style,styleSpec:N.styleSpec})}}});return s==="identity"&&b&&A.push(new Xt(a.key,a.value,'missing required property "property"')),s==="identity"||a.value.stops||A.push(new Xt(a.key,a.value,'missing required property "stops"')),s==="exponential"&&a.valueSpec.expression&&!Ed(a.valueSpec)&&A.push(new Xt(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(E&&!Cl(a.valueSpec)?A.push(new Xt(a.key,a.value,"property functions not supported")):b&&!Sd(a.valueSpec)&&A.push(new Xt(a.key,a.value,"zoom functions not supported"))),s!=="categorical"&&!T||a.value.property!==void 0||A.push(new Xt(a.key,a.value,'"property" property is required')),A;function I(N){let U=[];const K=N.value,ie=N.key;if(Kn(K)!=="array")return[new Xt(ie,K,`array expected, ${Kn(K)} found`)];if(K.length!==2)return[new Xt(ie,K,`array length 2 expected, length ${K.length} found`)];if(T){if(Kn(K[0])!=="object")return[new Xt(ie,K,`object expected, ${Kn(K[0])} found`)];if(K[0].zoom===void 0)return[new Xt(ie,K,"object stop key must have zoom")];if(K[0].value===void 0)return[new Xt(ie,K,"object stop key must have value")];const ye=ni(K[0].zoom);if(typeof ye!="number")return[new Xt(ie,K[0].zoom,"stop zoom values must be numbers")];if(g&&g>ye)return[new Xt(ie,K[0].zoom,"stop zoom values must appear in ascending order")];ye!==g&&(g=ye,f=void 0,v={}),U=U.concat(jo({key:`${ie}[0]`,value:K[0],valueSpec:{zoom:{}},style:N.style,styleSpec:N.styleSpec,objectElementValidators:{zoom:ru,value:O}}))}else U=U.concat(O({key:`${ie}[0]`,value:K[0],valueSpec:{},style:N.style,styleSpec:N.styleSpec},K));return Ml(bi(K[1]))?U.concat([new Xt(`${ie}[1]`,K[1],"expressions are not allowed in function stops.")]):U.concat(Fi({key:`${ie}[1]`,value:K[1],valueSpec:r,style:N.style,styleSpec:N.styleSpec}))}function O(N,U){const K=Kn(N.value),ie=ni(N.value),ye=N.value!==null?N.value:U;if(d){if(K!==d)return[new Xt(N.key,ye,`${K} stop domain type must match previous stop domain type ${d}`)]}else d=K;if(K!=="number"&&K!=="string"&&K!=="boolean"&&typeof ie!="number"&&typeof ie!="string"&&typeof ie!="boolean")return[new Xt(N.key,ye,"stop domain value must be a number, string, or boolean")];if(K!=="number"&&s!=="categorical"){let Re=`number expected, ${K} found`;return Cl(r)&&s===void 0&&(Re+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Xt(N.key,ye,Re)]}return s!=="categorical"||K!=="number"||typeof ie=="number"&&isFinite(ie)&&Math.floor(ie)===ie?s!=="categorical"&&K==="number"&&typeof ie=="number"&&typeof f=="number"&&f!==void 0&&ie<f?[new Xt(N.key,ye,"stop domain values must appear in ascending order")]:(f=ie,s==="categorical"&&ie in v?[new Xt(N.key,ye,"stop domain values must be unique")]:(v[ie]=!0,[])):[new Xt(N.key,ye,`integer expected, found ${String(ie)}`)]}}function wi(a){const r=(a.expressionContext==="property"?nu:Al)(bi(a.value),a.valueSpec);if(r.result==="error")return r.value.map(d=>new Xt(`${a.key}${d.key}`,a.value,d.message));const s=r.value.expression||r.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!s.outputDefined())return[new Xt(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!Pa(s))return[new Xt(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter")return ou(s,a);if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!ks(s,["zoom","feature-state"]))return[new Xt(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!wl(s))return[new Xt(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ou(a,r){const s=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(r.valueSpec&&r.valueSpec.expression)for(const f of r.valueSpec.expression.parameters)s.delete(f);if(s.size===0)return[];const d=[];return a instanceof Aa&&s.has(a.name)?[new Xt(r.key,r.value,`["${a.name}"] expression is not supported in a filter for a ${r.object.type} layer with id: ${r.object.id}`)]:(a.eachChild(f=>{d.push(...ou(f,r))}),d)}function kd(a){const r=a.key,s=a.value,d=a.valueSpec,f=[];return Array.isArray(d.values)?d.values.indexOf(ni(s))===-1&&f.push(new Xt(r,s,`expected one of [${d.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(d.values).indexOf(ni(s))===-1&&f.push(new Xt(r,s,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(s)} found`)),f}function ip(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const r of a.slice(1))if(!ip(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}function Pd(a,r="fill"){if(a==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};ip(a)||(a=Pl(a));const s=a;let d=!0;try{d=function(T){if(!kl(T))return T;let A=bi(T);return Id(A),A=By(A),A}(s)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(s,null,2)}
        `)}const f=ft[`filter_${r}`],g=Al(d,f);let v=null;if(g.result==="error")throw new Error(g.value.map(T=>`${T.key}: ${T.message}`).join(", "));v=(T,A,I)=>g.value.evaluate(T,A,{},I);let b=null,E=null;if(d!==s){const T=Al(s,f);if(T.result==="error")throw new Error(T.value.map(A=>`${A.key}: ${A.message}`).join(", "));b=(A,I,O,N,U)=>T.value.evaluate(A,I,{},O,void 0,void 0,N,U),E=!wl(T.value.expression)}return{filter:v,dynamicFilter:b||void 0,needGeometry:Ny(d),needFeature:!!E}}function By(a){if(!Array.isArray(a))return a;const r=function(s){if(op.has(s[0])){for(let d=1;d<s.length;d++)if(kl(s[d]))return!0}return s}(a);return r===!0?r:r.map(s=>By(s))}function Id(a){let r=!1;const s=[];if(a[0]==="case"){for(let d=1;d<a.length-1;d+=2)r=r||kl(a[d]),s.push(a[d+1]);s.push(a[a.length-1])}else if(a[0]==="match"){r=r||kl(a[1]);for(let d=2;d<a.length-1;d+=2)s.push(a[d+1]);s.push(a[a.length-1])}else if(a[0]==="step"){r=r||kl(a[1]);for(let d=1;d<a.length-1;d+=2)s.push(a[d+1])}r&&(a.length=0,a.push("any",...s));for(let d=1;d<a.length;d++)Id(a[d])}function kl(a){if(!Array.isArray(a))return!1;if((r=a[0])==="pitch"||r==="distance-from-center")return!0;var r;for(let s=1;s<a.length;s++)if(kl(a[s]))return!0;return!1}const op=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Ox(a,r){return a<r?-1:a>r?1:0}function Ny(a){if(!Array.isArray(a))return!1;if(a[0]==="within")return!0;for(let r=1;r<a.length;r++)if(Ny(a[r]))return!0;return!1}function Pl(a){if(!a)return!0;const r=a[0];return a.length<=1?r!=="any":r==="=="?ap(a[1],a[2],"=="):r==="!="?Ld(ap(a[1],a[2],"==")):r==="<"||r===">"||r==="<="||r===">="?ap(a[1],a[2],r):r==="any"?(s=a.slice(1),["any"].concat(s.map(Pl))):r==="all"?["all"].concat(a.slice(1).map(Pl)):r==="none"?["all"].concat(a.slice(1).map(Pl).map(Ld)):r==="in"?sp(a[1],a.slice(2)):r==="!in"?Ld(sp(a[1],a.slice(2))):r==="has"?lp(a[1]):r==="!has"?Ld(lp(a[1])):r!=="within"||a;var s}function ap(a,r,s){switch(a){case"$type":return[`filter-type-${s}`,r];case"$id":return[`filter-id-${s}`,r];default:return[`filter-${s}`,a,r]}}function sp(a,r){if(r.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(s=>typeof s!=typeof r[0])?["filter-in-large",a,["literal",r.sort(Ox)]]:["filter-in-small",a,["literal",r]]}}function lp(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function Ld(a){return["!",a]}function au(a){return ip(bi(a.value))?wi(Ca({},a,{expressionContext:"filter",valueSpec:a.styleSpec[`filter_${a.layerType||"fill"}`]})):su(a)}function su(a){const r=a.value,s=a.key;if(Kn(r)!=="array")return[new Xt(s,r,`array expected, ${Kn(r)} found`)];const d=a.styleSpec;let f,g=[];if(r.length<1)return[new Xt(s,r,"filter array must have at least 1 element")];switch(g=g.concat(kd({key:`${s}[0]`,value:r[0],valueSpec:d.filter_operator,style:a.style,styleSpec:a.styleSpec})),ni(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&ni(r[1])==="$type"&&g.push(new Xt(s,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&g.push(new Xt(s,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(f=Kn(r[1]),f!=="string"&&g.push(new Xt(`${s}[1]`,r[1],`string expected, ${f} found`)));for(let v=2;v<r.length;v++)f=Kn(r[v]),ni(r[1])==="$type"?g=g.concat(kd({key:`${s}[${v}]`,value:r[v],valueSpec:d.geometry_type,style:a.style,styleSpec:a.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&g.push(new Xt(`${s}[${v}]`,r[v],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let v=1;v<r.length;v++)g=g.concat(su({key:`${s}[${v}]`,value:r[v],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":f=Kn(r[1]),r.length!==2?g.push(new Xt(s,r,`filter array for "${r[0]}" operator must have 2 elements`)):f!=="string"&&g.push(new Xt(`${s}[1]`,r[1],`string expected, ${f} found`));break;case"within":f=Kn(r[1]),r.length!==2?g.push(new Xt(s,r,`filter array for "${r[0]}" operator must have 2 elements`)):f!=="object"&&g.push(new Xt(`${s}[1]`,r[1],`object expected, ${f} found`))}return g}function cp(a,r){const s=a.key,d=a.style,f=a.styleSpec,g=a.value,v=a.objectKey,b=f[`${r}_${a.layerType}`];if(!b)return[];const E=v.match(/^(.*)-transition$/);if(r==="paint"&&E&&b[E[1]]&&b[E[1]].transition)return Fi({key:s,value:g,valueSpec:f.transition,style:d,styleSpec:f});const T=a.valueSpec||b[v];if(!T)return[new Xt(s,g,`unknown property "${v}"`)];let A;if(Kn(g)==="string"&&Cl(T)&&!T.tokens&&(A=/^{([^}]+)}$/.exec(g))){const O=`\`{ "type": "identity", "property": ${A?JSON.stringify(A[1]):'"_"'} }\``;return[new Xt(s,g,`"${v}" does not support interpolation syntax
Use an identity property function instead: ${O}.`)]}const I=[];return a.layerType==="symbol"&&(v==="text-field"&&d&&!d.glyphs&&I.push(new Xt(s,g,'use of "text-field" requires a style "glyphs" property')),v==="text-font"&&eu(bi(g))&&ni(g.type)==="identity"&&I.push(new Xt(s,g,'"text-font" does not support identity functions'))),I.concat(Fi({key:a.key,value:g,valueSpec:T,style:d,styleSpec:f,expressionContext:"property",propertyType:r,propertyKey:v}))}function $y(a){return cp(a,"paint")}function up(a){return cp(a,"layout")}function Uy(a){let r=[];const s=a.value,d=a.key,f=a.style,g=a.styleSpec;s.type||s.ref||r.push(new Xt(d,s,'either "type" or "ref" is required'));let v=ni(s.type);const b=ni(s.ref);if(s.id){const E=ni(s.id);for(let T=0;T<a.arrayIndex;T++){const A=f.layers[T];ni(A.id)===E&&r.push(new Xt(d,s.id,`duplicate layer id "${s.id}", previously used at line ${A.id.__line__}`))}}if("ref"in s){let E;["type","source","source-layer","filter","layout"].forEach(T=>{T in s&&r.push(new Xt(d,s[T],`"${T}" is prohibited for ref layers`))}),f.layers.forEach(T=>{ni(T.id)===b&&(E=T)}),E?E.ref?r.push(new Xt(d,s.ref,"ref cannot reference another ref layer")):v=ni(E.type):typeof b=="string"&&r.push(new Xt(d,s.ref,`ref layer "${b}" not found`))}else if(v!=="background"&&v!=="sky")if(s.source){const E=f.sources&&f.sources[s.source],T=E&&ni(E.type);E?T==="vector"&&v==="raster"?r.push(new Xt(d,s.source,`layer "${s.id}" requires a raster source`)):T==="raster"&&v!=="raster"?r.push(new Xt(d,s.source,`layer "${s.id}" requires a vector source`)):T!=="vector"||s["source-layer"]?T==="raster-dem"&&v!=="hillshade"?r.push(new Xt(d,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):v!=="line"||!s.paint||!s.paint["line-gradient"]&&!s.paint["line-trim-offset"]||T==="geojson"&&E.lineMetrics||r.push(new Xt(d,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new Xt(d,s,`layer "${s.id}" must specify a "source-layer"`)):r.push(new Xt(d,s.source,`source "${s.source}" not found`))}else r.push(new Xt(d,s,'missing required property "source"'));return r=r.concat(jo({key:d,value:s,valueSpec:g.layer,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Fi({key:`${d}.type`,value:s.type,valueSpec:g.layer.type,style:a.style,styleSpec:a.styleSpec,object:s,objectKey:"type"}),filter:E=>au(Ca({layerType:v},E)),layout:E=>jo({layer:s,key:E.key,value:E.value,valueSpec:{},style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":T=>up(Ca({layerType:v},T))}}),paint:E=>jo({layer:s,key:E.key,value:E.value,valueSpec:{},style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":T=>$y(Ca({layerType:v},T))}})}})),r}function ns(a){const r=a.value,s=a.key,d=Kn(r);return d!=="string"?[new Xt(s,r,`string expected, ${d} found`)]:[]}const jy={promoteId:function({key:a,value:r}){if(Kn(r)==="string")return ns({key:a,value:r});{const s=[];for(const d in r)s.push(...ns({key:`${a}.${d}`,value:r[d]}));return s}}};function Vy(a){const r=a.value,s=a.key,d=a.styleSpec,f=a.style;if(!r.type)return[new Xt(s,r,'"type" is required')];const g=ni(r.type);let v;switch(g){case"vector":case"raster":case"raster-dem":return v=jo({key:s,value:r,valueSpec:d[`source_${g.replace("-","_")}`],style:a.style,styleSpec:d,objectElementValidators:jy}),v;case"geojson":if(v=jo({key:s,value:r,valueSpec:d.source_geojson,style:f,styleSpec:d,objectElementValidators:jy}),r.cluster)for(const b in r.clusterProperties){const[E,T]=r.clusterProperties[b],A=typeof E=="string"?[E,["accumulated"],["get",b]]:E;v.push(...wi({key:`${s}.${b}.map`,value:T,expressionContext:"cluster-map"})),v.push(...wi({key:`${s}.${b}.reduce`,value:A,expressionContext:"cluster-reduce"}))}return v;case"video":return jo({key:s,value:r,valueSpec:d.source_video,style:f,styleSpec:d});case"image":return jo({key:s,value:r,valueSpec:d.source_image,style:f,styleSpec:d});case"canvas":return[new Xt(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return kd({key:`${s}.type`,value:r.type,valueSpec:{values:Dx(d)},style:f,styleSpec:d})}}function Dx(a){return a.source.reduce((r,s)=>{const d=a[s];return d.type.type==="enum"&&(r=r.concat(Object.keys(d.type.values))),r},[])}function Gy(a){const r=a.value,s=a.styleSpec,d=s.light,f=a.style;let g=[];const v=Kn(r);if(r===void 0)return g;if(v!=="object")return g=g.concat([new Xt("light",r,`object expected, ${v} found`)]),g;for(const b in r){const E=b.match(/^(.*)-transition$/);g=g.concat(E&&d[E[1]]&&d[E[1]].transition?Fi({key:b,value:r[b],valueSpec:s.transition,style:f,styleSpec:s}):d[b]?Fi({key:b,value:r[b],valueSpec:d[b],style:f,styleSpec:s}):[new Xt(b,r[b],`unknown property "${b}"`)])}return g}function dp(a){const r=a.value,s=a.key,d=a.style,f=a.styleSpec,g=f.terrain;let v=[];const b=Kn(r);if(r===void 0)return v;if(b!=="object")return v=v.concat([new Xt("terrain",r,`object expected, ${b} found`)]),v;for(const E in r){const T=E.match(/^(.*)-transition$/);v=v.concat(T&&g[T[1]]&&g[T[1]].transition?Fi({key:E,value:r[E],valueSpec:f.transition,style:d,styleSpec:f}):g[E]?Fi({key:E,value:r[E],valueSpec:g[E],style:d,styleSpec:f}):[new Xt(E,r[E],`unknown property "${E}"`)])}if(r.source){const E=d.sources&&d.sources[r.source],T=E&&ni(E.type);E?T!=="raster-dem"&&v.push(new Xt(s,r.source,`terrain cannot be used with a source of type ${String(T)}, it only be used with a "raster-dem" source type`)):v.push(new Xt(s,r.source,`source "${r.source}" not found`))}else v.push(new Xt(s,r,'terrain is missing required property "source"'));return v}function Wy(a){const r=a.value,s=a.style,d=a.styleSpec,f=d.fog;let g=[];const v=Kn(r);if(r===void 0)return g;if(v!=="object")return g=g.concat([new Xt("fog",r,`object expected, ${v} found`)]),g;for(const b in r){const E=b.match(/^(.*)-transition$/);g=g.concat(E&&f[E[1]]&&f[E[1]].transition?Fi({key:b,value:r[b],valueSpec:d.transition,style:s,styleSpec:d}):f[b]?Fi({key:b,value:r[b],valueSpec:f[b],style:s,styleSpec:d}):[new Xt(b,r[b],`unknown property "${b}"`)])}return g}const qy={"*":()=>[],array:Fy,boolean:function(a){const r=a.value,s=a.key,d=Kn(r);return d!=="boolean"?[new Xt(s,r,`boolean expected, ${d} found`)]:[]},number:ru,color:function(a){const r=a.key,s=a.value,d=Kn(s);return d!=="string"?[new Xt(r,s,`color expected, ${d} found`)]:Af(s)===null?[new Xt(r,s,`color expected, "${s}" found`)]:[]},enum:kd,filter:au,function:iu,layer:Uy,object:jo,source:Vy,light:Gy,terrain:dp,fog:Wy,string:ns,formatted:function(a){return ns(a).length===0?[]:wi(a)},resolvedImage:function(a){return ns(a).length===0?[]:wi(a)},projection:function(a){const r=a.value,s=a.styleSpec,d=s.projection,f=a.style;let g=[];const v=Kn(r);if(v==="object")for(const b in r)g=g.concat(Fi({key:b,value:r[b],valueSpec:d[b],style:f,styleSpec:s}));else v!=="string"&&(g=g.concat([new Xt("projection",r,`object or string expected, ${v} found`)]));return g}};function Fi(a){const r=a.value,s=a.valueSpec,d=a.styleSpec;return s.expression&&eu(ni(r))?iu(a):s.expression&&Ml(bi(r))?wi(a):s.type&&qy[s.type]?qy[s.type](a):jo(Ca({},a,{valueSpec:s.type?d[s.type]:s}))}function zx(a){const r=a.value,s=a.key,d=ns(a);return d.length||(r.indexOf("{fontstack}")===-1&&d.push(new Xt(s,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&d.push(new Xt(s,r,'"glyphs" url must include a "{range}" token'))),d}function Hy(a,r=ft){return Eo(Fi({key:"",value:a,valueSpec:r.$root,styleSpec:r,style:a,objectElementValidators:{glyphs:zx,"*":()=>[]}}))}const Fx=a=>Eo($y(a)),Bx=a=>Eo(up(a));function Eo(a){return a.slice().sort((r,s)=>r.line&&s.line?r.line-s.line:0)}function Zy(a,r){let s=!1;if(r&&r.length)for(const d of r)a.fire(new Ta(new Error(d.message))),s=!0;return s}var Nx=sa,Vo=3;function sa(a,r,s){var d=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;var f=new Int32Array(this.arrayBuffer);a=f[0],this.d=(r=f[1])+2*(s=f[2]);for(var g=0;g<this.d*this.d;g++){var v=f[Vo+g],b=f[Vo+g+1];d.push(v===b?null:f.subarray(v,b))}var E=f[Vo+d.length+1];this.keys=f.subarray(f[Vo+d.length],E),this.bboxes=f.subarray(E),this.insert=this._insertReadonly}else{this.d=r+2*s;for(var T=0;T<this.d*this.d;T++)d.push([]);this.keys=[],this.bboxes=[]}this.n=r,this.extent=a,this.padding=s,this.scale=r/a,this.uid=0;var A=s/r*a;this.min=-A,this.max=a+A}sa.prototype.insert=function(a,r,s,d,f){this._forEachCell(r,s,d,f,this._insertCell,this.uid++),this.keys.push(a),this.bboxes.push(r),this.bboxes.push(s),this.bboxes.push(d),this.bboxes.push(f)},sa.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},sa.prototype._insertCell=function(a,r,s,d,f,g){this.cells[f].push(g)},sa.prototype.query=function(a,r,s,d,f){var g=this.min,v=this.max;if(a<=g&&r<=g&&v<=s&&v<=d&&!f)return Array.prototype.slice.call(this.keys);var b=[];return this._forEachCell(a,r,s,d,this._queryCell,b,{},f),b},sa.prototype._queryCell=function(a,r,s,d,f,g,v,b){var E=this.cells[f];if(E!==null)for(var T=this.keys,A=this.bboxes,I=0;I<E.length;I++){var O=E[I];if(v[O]===void 0){var N=4*O;(b?b(A[N+0],A[N+1],A[N+2],A[N+3]):a<=A[N+2]&&r<=A[N+3]&&s>=A[N+0]&&d>=A[N+1])?(v[O]=!0,g.push(T[O])):v[O]=!1}}},sa.prototype._forEachCell=function(a,r,s,d,f,g,v,b){for(var E=this._convertToCellCoord(a),T=this._convertToCellCoord(r),A=this._convertToCellCoord(s),I=this._convertToCellCoord(d),O=E;O<=A;O++)for(var N=T;N<=I;N++){var U=this.d*N+O;if((!b||b(this._convertFromCellCoord(O),this._convertFromCellCoord(N),this._convertFromCellCoord(O+1),this._convertFromCellCoord(N+1)))&&f.call(this,a,r,s,d,U,g,v,b))return}},sa.prototype._convertFromCellCoord=function(a){return(a-this.padding)/this.scale},sa.prototype._convertToCellCoord=function(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))},sa.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var a=this.cells,r=Vo+this.cells.length+1+1,s=0,d=0;d<this.cells.length;d++)s+=this.cells[d].length;var f=new Int32Array(r+s+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;for(var g=r,v=0;v<a.length;v++){var b=a[v];f[Vo+v]=g,f.set(b,g),g+=b.length}return f[Vo+a.length]=g,f.set(this.keys,g),f[Vo+a.length+1]=g+=this.keys.length,f.set(this.bboxes,g),g+=this.bboxes.length,f.buffer};var Ls=Z(Nx);const Od={};function Jt(a,r,s={}){Object.defineProperty(a,"_classRegistryKey",{value:r,writeable:!1}),Od[r]={klass:a,omit:s.omit||[]}}Jt(Object,"Object"),Ls.serialize=function(a,r){const s=a.toArrayBuffer();return r&&r.push(s),{buffer:s}},Ls.deserialize=function(a){return new Ls(a.buffer)},Object.defineProperty(Ls,"name",{value:"Grid"}),Jt(Ls,"Grid"),Jt(Xr,"Color"),Jt(Error,"Error"),Jt(Qt,"AJAXError"),Jt(wo,"ResolvedImage"),Jt(Md,"StylePropertyFunction"),Jt(Rd,"StyleExpression",{omit:["_evaluator"]}),Jt(tu,"ZoomDependentExpression"),Jt(rp,"ZoomConstantExpression"),Jt(Aa,"CompoundExpression",{omit:["_evaluate"]});for(const a in Jc)Od[Jc[a]._classRegistryKey]||Jt(Jc[a],`Expression${a}`);function hp(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function fp(a){return x.ImageBitmap&&a instanceof x.ImageBitmap}function Il(a,r){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp)return a;if(hp(a)||fp(a))return r&&r.push(a),a;if(ArrayBuffer.isView(a)){const s=a;return r&&r.push(s.buffer),s}if(a instanceof x.ImageData)return r&&r.push(a.data.buffer),a;if(Array.isArray(a)){const s=[];for(const d of a)s.push(Il(d,r));return s}if(typeof a=="object"){const s=a.constructor,d=s._classRegistryKey;if(!d)throw new Error(`can't serialize object of unregistered class ${d}`);const f=s.serialize?s.serialize(a,r):{};if(!s.serialize){for(const g in a)a.hasOwnProperty(g)&&(Od[d].omit.indexOf(g)>=0||(f[g]=Il(a[g],r)));a instanceof Error&&(f.message=a.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(f.$name=d),f}throw new Error("can't serialize object of type "+typeof a)}function Os(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||hp(a)||fp(a)||ArrayBuffer.isView(a)||a instanceof x.ImageData)return a;if(Array.isArray(a))return a.map(Os);if(typeof a=="object"){const r=a.$name||"Object",{klass:s}=Od[r];if(!s)throw new Error(`can't deserialize unregistered class ${r}`);if(s.deserialize)return s.deserialize(a);const d=Object.create(s.prototype);for(const f of Object.keys(a))f!=="$name"&&(d[f]=Os(a[f]));return d}throw new Error("can't deserialize object of type "+typeof a)}const qt={"Latin-1 Supplement":a=>a>=128&&a<=255,Arabic:a=>a>=1536&&a<=1791,"Arabic Supplement":a=>a>=1872&&a<=1919,"Arabic Extended-A":a=>a>=2208&&a<=2303,"Hangul Jamo":a=>a>=4352&&a<=4607,"Unified Canadian Aboriginal Syllabics":a=>a>=5120&&a<=5759,Khmer:a=>a>=6016&&a<=6143,"Unified Canadian Aboriginal Syllabics Extended":a=>a>=6320&&a<=6399,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"CJK Radicals Supplement":a=>a>=11904&&a<=12031,"Kangxi Radicals":a=>a>=12032&&a<=12255,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Bopomofo:a=>a>=12544&&a<=12591,"Hangul Compatibility Jamo":a=>a>=12592&&a<=12687,Kanbun:a=>a>=12688&&a<=12703,"Bopomofo Extended":a=>a>=12704&&a<=12735,"CJK Strokes":a=>a>=12736&&a<=12783,"Katakana Phonetic Extensions":a=>a>=12784&&a<=12799,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"CJK Unified Ideographs Extension A":a=>a>=13312&&a<=19903,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Yi Syllables":a=>a>=40960&&a<=42127,"Yi Radicals":a=>a>=42128&&a<=42191,"Hangul Jamo Extended-A":a=>a>=43360&&a<=43391,"Hangul Syllables":a=>a>=44032&&a<=55215,"Hangul Jamo Extended-B":a=>a>=55216&&a<=55295,"Private Use Area":a=>a>=57344&&a<=63743,"CJK Compatibility Ideographs":a=>a>=63744&&a<=64255,"Arabic Presentation Forms-A":a=>a>=64336&&a<=65023,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Arabic Presentation Forms-B":a=>a>=65136&&a<=65279,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function pp(a){for(const r of a)if(mp(r.charCodeAt(0)))return!0;return!1}function $x(a){for(const r of a)if(!Xy(r.charCodeAt(0)))return!1;return!0}function Xy(a){return!(qt.Arabic(a)||qt["Arabic Supplement"](a)||qt["Arabic Extended-A"](a)||qt["Arabic Presentation Forms-A"](a)||qt["Arabic Presentation Forms-B"](a))}function mp(a){return!(a!==746&&a!==747&&(a<4352||!(qt["Bopomofo Extended"](a)||qt.Bopomofo(a)||qt["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||qt["CJK Compatibility Ideographs"](a)||qt["CJK Compatibility"](a)||qt["CJK Radicals Supplement"](a)||qt["CJK Strokes"](a)||!(!qt["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||qt["CJK Unified Ideographs Extension A"](a)||qt["CJK Unified Ideographs"](a)||qt["Enclosed CJK Letters and Months"](a)||qt["Hangul Compatibility Jamo"](a)||qt["Hangul Jamo Extended-A"](a)||qt["Hangul Jamo Extended-B"](a)||qt["Hangul Jamo"](a)||qt["Hangul Syllables"](a)||qt.Hiragana(a)||qt["Ideographic Description Characters"](a)||qt.Kanbun(a)||qt["Kangxi Radicals"](a)||qt["Katakana Phonetic Extensions"](a)||qt.Katakana(a)&&a!==12540||!(!qt["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!qt["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||qt["Unified Canadian Aboriginal Syllabics"](a)||qt["Unified Canadian Aboriginal Syllabics Extended"](a)||qt["Vertical Forms"](a)||qt["Yijing Hexagram Symbols"](a)||qt["Yi Syllables"](a)||qt["Yi Radicals"](a))))}function Ky(a){return!(mp(a)||function(r){return!!(qt["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||qt["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||qt["Letterlike Symbols"](r)||qt["Number Forms"](r)||qt["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||qt["Control Pictures"](r)&&r!==9251||qt["Optical Character Recognition"](r)||qt["Enclosed Alphanumerics"](r)||qt["Geometric Shapes"](r)||qt["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||qt["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||qt["CJK Symbols and Punctuation"](r)||qt.Katakana(r)||qt["Private Use Area"](r)||qt["CJK Compatibility Forms"](r)||qt["Small Form Variants"](r)||qt["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(a))}function Yy(a){return a>=1424&&a<=2303||qt["Arabic Presentation Forms-A"](a)||qt["Arabic Presentation Forms-B"](a)}function Ux(a,r){return!(!r&&Yy(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||qt.Khmer(a))}function jx(a){for(const r of a)if(Yy(r.charCodeAt(0)))return!0;return!1}const gp="deferred",yp="loading",vp="loaded";let Ll=null,m="unavailable",l=null;const h=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(m="error"),Ll&&Ll(a)};function y(){_.fire(new Cs("pluginStateChange",{pluginStatus:m,pluginURL:l}))}const _=new Fc,w=function(){return m},C=function(){if(m!==gp||!l)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");m=yp,y(),l&&dt({url:l},a=>{a?h(a):(m=vp,y())})},R={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>m===vp||R.applyArabicShaping!=null,isLoading:()=>m===yp,setState(a){m=a.pluginStatus,l=a.pluginURL},isParsed:()=>R.applyArabicShaping!=null&&R.processBidirectionalText!=null&&R.processStyledBidirectionalText!=null,getPluginURL:()=>l};class P{constructor(r,s){this.zoom=r,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.transition=s.transition,this.pitch=s.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(r){return function(s,d){for(const f of s)if(!Ux(f.charCodeAt(0),d))return!1;return!0}(r,R.isLoaded())}}class z{constructor(r,s){this.property=r,this.value=s,this.expression=function(d,f){if(eu(d))return new Md(d,f);if(Ml(d)){const g=nu(d,f);if(g.result==="error")throw new Error(g.value.map(v=>`${v.key}: ${v.message}`).join(", "));return g.value}{let g=d;return typeof d=="string"&&f.type==="color"&&(g=Xr.parse(d)),{kind:"constant",evaluate:()=>g}}}(s===void 0?r.specification.default:s,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,s,d){return this.property.possiblyEvaluate(this,r,s,d)}}class D{constructor(r){this.property=r,this.value=new z(r,void 0)}transitioned(r,s){return new te(this.property,this.value,s,be({},r.transition,this.transition),r.now)}untransitioned(){return new te(this.property,this.value,null,{},0)}}class q{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return Ht(this._values[r].value.value)}setValue(r,s){this._values.hasOwnProperty(r)||(this._values[r]=new D(this._values[r].property)),this._values[r].value=new z(this._values[r].property,s===null?void 0:Ht(s))}getTransition(r){return Ht(this._values[r].transition)}setTransition(r,s){this._values.hasOwnProperty(r)||(this._values[r]=new D(this._values[r].property)),this._values[r].transition=Ht(s)||void 0}serialize(){const r={};for(const s of Object.keys(this._values)){const d=this.getValue(s);d!==void 0&&(r[s]=d);const f=this.getTransition(s);f!==void 0&&(r[`${s}-transition`]=f)}return r}transitioned(r,s){const d=new ce(this._properties);for(const f of Object.keys(this._values))d._values[f]=this._values[f].transitioned(r,s._values[f]);return d}untransitioned(){const r=new ce(this._properties);for(const s of Object.keys(this._values))r._values[s]=this._values[s].untransitioned();return r}}class te{constructor(r,s,d,f,g){const v=f.delay||0,b=f.duration||0;g=g||0,this.property=r,this.value=s,this.begin=g+v,this.end=this.begin+b,r.specification.transition&&(f.delay||f.duration)&&(this.prior=d)}possiblyEvaluate(r,s,d){const f=r.now||0,g=this.value.possiblyEvaluate(r,s,d),v=this.prior;if(v){if(f>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(f<this.begin)return v.possiblyEvaluate(r,s,d);{const b=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(v.possiblyEvaluate(r,s,d),g,Ze(b))}}return g}}class ce{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,s,d){const f=new me(this._properties);for(const g of Object.keys(this._values))f._values[g]=this._values[g].possiblyEvaluate(r,s,d);return f}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class fe{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}getValue(r){return Ht(this._values[r].value)}setValue(r,s){this._values[r]=new z(this._values[r].property,s===null?void 0:Ht(s))}serialize(){const r={};for(const s of Object.keys(this._values)){const d=this.getValue(s);d!==void 0&&(r[s]=d)}return r}possiblyEvaluate(r,s,d){const f=new me(this._properties);for(const g of Object.keys(this._values))f._values[g]=this._values[g].possiblyEvaluate(r,s,d);return f}}class he{constructor(r,s,d){this.property=r,this.value=s,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,s,d,f){return this.property.evaluate(this.value,this.parameters,r,s,d,f)}}class me{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class H{constructor(r){this.specification=r}possiblyEvaluate(r,s){return r.expression.evaluate(s)}interpolate(r,s,d){const f=Zc[this.specification.type];return f?f(r,s,d):r}}class le{constructor(r,s){this.specification=r,this.overrides=s}possiblyEvaluate(r,s,d,f){return new he(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(s,null,{},d,f)}:r.expression,s)}interpolate(r,s,d){if(r.value.kind!=="constant"||s.value.kind!=="constant")return r;if(r.value.value===void 0||s.value.value===void 0)return new he(this,{kind:"constant",value:void 0},r.parameters);const f=Zc[this.specification.type];return f?new he(this,{kind:"constant",value:f(r.value.value,s.value.value,d)},r.parameters):r}evaluate(r,s,d,f,g,v){return r.kind==="constant"?r.value:r.evaluate(s,d,f,g,v)}}class _e{constructor(r){this.specification=r}possiblyEvaluate(r,s,d,f){return!!r.expression.evaluate(s,null,{},d,f)}interpolate(){return!1}}class xe{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const s=new P(0,{});for(const d in r){const f=r[d];f.specification.overridable&&this.overridableProperties.push(d);const g=this.defaultPropertyValues[d]=new z(f,void 0),v=this.defaultTransitionablePropertyValues[d]=new D(f);this.defaultTransitioningPropertyValues[d]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=g.possiblyEvaluate(s)}}}function Oe(a,r){return 256*(a=Me(Math.floor(a),0,255))+Me(Math.floor(r),0,255)}Jt(le,"DataDrivenProperty"),Jt(H,"DataConstantProperty"),Jt(_e,"ColorRampProperty");const Fe={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ze{constructor(r,s){this._structArray=r,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class He{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,s){return r._trim(),s&&(r.isTransferred=!0,s.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const s=Object.create(this.prototype);return s.arrayBuffer=r.arrayBuffer,s.length=r.length,s.capacity=r.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function qe(a,r=1){let s=0,d=0;return{members:a.map(f=>{const g=Fe[f.type].BYTES_PER_ELEMENT,v=s=it(s,Math.max(r,g)),b=f.components||1;return d=Math.max(d,g),s+=g*b,{name:f.name,type:f.type,components:b,offset:v}}),size:it(s,Math.max(d,r)),alignment:r}}function it(a,r){return Math.ceil(a/r)*r}class Pt extends He{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s){const d=this.length;return this.resize(d+1),this.emplace(d,r,s)}emplace(r,s,d){const f=2*r;return this.int16[f+0]=s,this.int16[f+1]=d,r}}Pt.prototype.bytesPerElement=4,Jt(Pt,"StructArrayLayout2i4");class et extends He{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d){const f=this.length;return this.resize(f+1),this.emplace(f,r,s,d)}emplace(r,s,d,f){const g=3*r;return this.int16[g+0]=s,this.int16[g+1]=d,this.int16[g+2]=f,r}}et.prototype.bytesPerElement=6,Jt(et,"StructArrayLayout3i6");class vt extends He{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d,f){const g=this.length;return this.resize(g+1),this.emplace(g,r,s,d,f)}emplace(r,s,d,f,g){const v=4*r;return this.int16[v+0]=s,this.int16[v+1]=d,this.int16[v+2]=f,this.int16[v+3]=g,r}}vt.prototype.bytesPerElement=8,Jt(vt,"StructArrayLayout4i8");class st extends He{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d,f,g,v,b){const E=this.length;return this.resize(E+1),this.emplace(E,r,s,d,f,g,v,b)}emplace(r,s,d,f,g,v,b,E){const T=6*r,A=12*r,I=3*r;return this.int16[T+0]=s,this.int16[T+1]=d,this.uint8[A+4]=f,this.uint8[A+5]=g,this.uint8[A+6]=v,this.uint8[A+7]=b,this.float32[I+2]=E,r}}st.prototype.bytesPerElement=12,Jt(st,"StructArrayLayout2i4ub1f12");class kt extends He{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d,f){const g=this.length;return this.resize(g+1),this.emplace(g,r,s,d,f)}emplace(r,s,d,f,g){const v=4*r;return this.float32[v+0]=s,this.float32[v+1]=d,this.float32[v+2]=f,this.float32[v+3]=g,r}}kt.prototype.bytesPerElement=16,Jt(kt,"StructArrayLayout4f16");class rt extends He{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d,f,g){const v=this.length;return this.resize(v+1),this.emplace(v,r,s,d,f,g)}emplace(r,s,d,f,g,v){const b=6*r,E=3*r;return this.uint16[b+0]=s,this.uint16[b+1]=d,this.uint16[b+2]=f,this.uint16[b+3]=g,this.float32[E+2]=v,r}}rt.prototype.bytesPerElement=12,Jt(rt,"StructArrayLayout4ui1f12");class yt extends He{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,d,f){const g=this.length;return this.resize(g+1),this.emplace(g,r,s,d,f)}emplace(r,s,d,f,g){const v=4*r;return this.uint16[v+0]=s,this.uint16[v+1]=d,this.uint16[v+2]=f,this.uint16[v+3]=g,r}}yt.prototype.bytesPerElement=8,Jt(yt,"StructArrayLayout4ui8");class Lt extends He{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d,f,g,v){const b=this.length;return this.resize(b+1),this.emplace(b,r,s,d,f,g,v)}emplace(r,s,d,f,g,v,b){const E=6*r;return this.int16[E+0]=s,this.int16[E+1]=d,this.int16[E+2]=f,this.int16[E+3]=g,this.int16[E+4]=v,this.int16[E+5]=b,r}}Lt.prototype.bytesPerElement=12,Jt(Lt,"StructArrayLayout6i12");class wt extends He{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,d,f,g,v,b,E,T,A,I,O){const N=this.length;return this.resize(N+1),this.emplace(N,r,s,d,f,g,v,b,E,T,A,I,O)}emplace(r,s,d,f,g,v,b,E,T,A,I,O,N){const U=12*r;return this.int16[U+0]=s,this.int16[U+1]=d,this.int16[U+2]=f,this.int16[U+3]=g,this.uint16[U+4]=v,this.uint16[U+5]=b,this.uint16[U+6]=E,this.uint16[U+7]=T,this.int16[U+8]=A,this.int16[U+9]=I,this.int16[U+10]=O,this.int16[U+11]=N,r}}wt.prototype.bytesPerElement=24,Jt(wt,"StructArrayLayout4i4ui4i24");class Ot extends He{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d,f,g,v){const b=this.length;return this.resize(b+1),this.emplace(b,r,s,d,f,g,v)}emplace(r,s,d,f,g,v,b){const E=10*r,T=5*r;return this.int16[E+0]=s,this.int16[E+1]=d,this.int16[E+2]=f,this.float32[T+2]=g,this.float32[T+3]=v,this.float32[T+4]=b,r}}Ot.prototype.bytesPerElement=20,Jt(Ot,"StructArrayLayout3i3f20");class un extends He{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint32[1*r+0]=s,r}}un.prototype.bytesPerElement=4,Jt(un,"StructArrayLayout1ul4");class Tn extends He{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,d,f,g,v,b,E,T,A,I,O,N){const U=this.length;return this.resize(U+1),this.emplace(U,r,s,d,f,g,v,b,E,T,A,I,O,N)}emplace(r,s,d,f,g,v,b,E,T,A,I,O,N,U){const K=20*r,ie=10*r;return this.int16[K+0]=s,this.int16[K+1]=d,this.int16[K+2]=f,this.int16[K+3]=g,this.int16[K+4]=v,this.float32[ie+3]=b,this.float32[ie+4]=E,this.float32[ie+5]=T,this.float32[ie+6]=A,this.int16[K+14]=I,this.uint32[ie+8]=O,this.uint16[K+18]=N,this.uint16[K+19]=U,r}}Tn.prototype.bytesPerElement=40,Jt(Tn,"StructArrayLayout5i4f1i1ul2ui40");class en extends He{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d,f,g,v,b){const E=this.length;return this.resize(E+1),this.emplace(E,r,s,d,f,g,v,b)}emplace(r,s,d,f,g,v,b,E){const T=8*r;return this.int16[T+0]=s,this.int16[T+1]=d,this.int16[T+2]=f,this.int16[T+4]=g,this.int16[T+5]=v,this.int16[T+6]=b,this.int16[T+7]=E,r}}en.prototype.bytesPerElement=16,Jt(en,"StructArrayLayout3i2i2i16");class yn extends He{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d,f,g){const v=this.length;return this.resize(v+1),this.emplace(v,r,s,d,f,g)}emplace(r,s,d,f,g,v){const b=4*r,E=8*r;return this.float32[b+0]=s,this.float32[b+1]=d,this.float32[b+2]=f,this.int16[E+6]=g,this.int16[E+7]=v,r}}yn.prototype.bytesPerElement=16,Jt(yn,"StructArrayLayout2f1f2i16");class Fn extends He{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d,f){const g=this.length;return this.resize(g+1),this.emplace(g,r,s,d,f)}emplace(r,s,d,f,g){const v=12*r,b=3*r;return this.uint8[v+0]=s,this.uint8[v+1]=d,this.float32[b+1]=f,this.float32[b+2]=g,r}}Fn.prototype.bytesPerElement=12,Jt(Fn,"StructArrayLayout2ub2f12");class On extends He{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d){const f=this.length;return this.resize(f+1),this.emplace(f,r,s,d)}emplace(r,s,d,f){const g=3*r;return this.float32[g+0]=s,this.float32[g+1]=d,this.float32[g+2]=f,r}}On.prototype.bytesPerElement=12,Jt(On,"StructArrayLayout3f12");class cn extends He{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,d){const f=this.length;return this.resize(f+1),this.emplace(f,r,s,d)}emplace(r,s,d,f){const g=3*r;return this.uint16[g+0]=s,this.uint16[g+1]=d,this.uint16[g+2]=f,r}}cn.prototype.bytesPerElement=6,Jt(cn,"StructArrayLayout3ui6");class or extends He{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r,s,d,f,g,v,b,E,T,A,I,O,N,U,K,ie,ye,Re,ve,Ee,Le){const Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,r,s,d,f,g,v,b,E,T,A,I,O,N,U,K,ie,ye,Re,ve,Ee,Le)}emplace(r,s,d,f,g,v,b,E,T,A,I,O,N,U,K,ie,ye,Re,ve,Ee,Le,Pe){const ot=30*r,tt=15*r,pt=60*r;return this.int16[ot+0]=s,this.int16[ot+1]=d,this.int16[ot+2]=f,this.float32[tt+2]=g,this.float32[tt+3]=v,this.uint16[ot+8]=b,this.uint16[ot+9]=E,this.uint32[tt+5]=T,this.uint32[tt+6]=A,this.uint32[tt+7]=I,this.uint16[ot+16]=O,this.uint16[ot+17]=N,this.uint16[ot+18]=U,this.float32[tt+10]=K,this.float32[tt+11]=ie,this.uint8[pt+48]=ye,this.uint8[pt+49]=Re,this.uint8[pt+50]=ve,this.uint32[tt+13]=Ee,this.int16[ot+28]=Le,this.uint8[pt+58]=Pe,r}}or.prototype.bytesPerElement=60,Jt(or,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class dr extends He{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r,s,d,f,g,v,b,E,T,A,I,O,N,U,K,ie,ye,Re,ve,Ee,Le,Pe,ot,tt,pt,It,lt,_t,xt,Tt){const zt=this.length;return this.resize(zt+1),this.emplace(zt,r,s,d,f,g,v,b,E,T,A,I,O,N,U,K,ie,ye,Re,ve,Ee,Le,Pe,ot,tt,pt,It,lt,_t,xt,Tt)}emplace(r,s,d,f,g,v,b,E,T,A,I,O,N,U,K,ie,ye,Re,ve,Ee,Le,Pe,ot,tt,pt,It,lt,_t,xt,Tt,zt){const ht=38*r,Vt=19*r;return this.int16[ht+0]=s,this.int16[ht+1]=d,this.int16[ht+2]=f,this.float32[Vt+2]=g,this.float32[Vt+3]=v,this.int16[ht+8]=b,this.int16[ht+9]=E,this.int16[ht+10]=T,this.int16[ht+11]=A,this.int16[ht+12]=I,this.int16[ht+13]=O,this.uint16[ht+14]=N,this.uint16[ht+15]=U,this.uint16[ht+16]=K,this.uint16[ht+17]=ie,this.uint16[ht+18]=ye,this.uint16[ht+19]=Re,this.uint16[ht+20]=ve,this.uint16[ht+21]=Ee,this.uint16[ht+22]=Le,this.uint16[ht+23]=Pe,this.uint16[ht+24]=ot,this.uint16[ht+25]=tt,this.uint16[ht+26]=pt,this.uint16[ht+27]=It,this.uint16[ht+28]=lt,this.uint32[Vt+15]=_t,this.float32[Vt+16]=xt,this.float32[Vt+17]=Tt,this.float32[Vt+18]=zt,r}}dr.prototype.bytesPerElement=76,Jt(dr,"StructArrayLayout3i2f6i15ui1ul3f76");class hr extends He{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.float32[1*r+0]=s,r}}hr.prototype.bytesPerElement=4,Jt(hr,"StructArrayLayout1f4");class fr extends He{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d,f,g){const v=this.length;return this.resize(v+1),this.emplace(v,r,s,d,f,g)}emplace(r,s,d,f,g,v){const b=5*r;return this.float32[b+0]=s,this.float32[b+1]=d,this.float32[b+2]=f,this.float32[b+3]=g,this.float32[b+4]=v,r}}fr.prototype.bytesPerElement=20,Jt(fr,"StructArrayLayout5f20");class Bi extends He{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,d,f){const g=this.length;return this.resize(g+1),this.emplace(g,r,s,d,f)}emplace(r,s,d,f,g){const v=6*r;return this.uint32[3*r+0]=s,this.uint16[v+2]=d,this.uint16[v+3]=f,this.uint16[v+4]=g,r}}Bi.prototype.bytesPerElement=12,Jt(Bi,"StructArrayLayout1ul3ui12");class Si extends He{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s){const d=this.length;return this.resize(d+1),this.emplace(d,r,s)}emplace(r,s,d){const f=2*r;return this.uint16[f+0]=s,this.uint16[f+1]=d,r}}Si.prototype.bytesPerElement=4,Jt(Si,"StructArrayLayout2ui4");class To extends He{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint16[1*r+0]=s,r}}To.prototype.bytesPerElement=2,Jt(To,"StructArrayLayout1ui2");class la extends He{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s){const d=this.length;return this.resize(d+1),this.emplace(d,r,s)}emplace(r,s,d){const f=2*r;return this.float32[f+0]=s,this.float32[f+1]=d,r}}la.prototype.bytesPerElement=8,Jt(la,"StructArrayLayout2f8");class Dr extends ze{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Dr.prototype.size=40;class pr extends Tn{get(r){return new Dr(this,r)}}Jt(pr,"CollisionBoxArray");class Qn extends ze{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(r){this._structArray.uint8[this._pos1+49]=r}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(r){this._structArray.uint8[this._pos1+50]=r}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(r){this._structArray.uint32[this._pos4+13]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(r){this._structArray.uint8[this._pos1+58]=r}}Qn.prototype.size=60;class ri extends or{get(r){return new Qn(this,r)}}Jt(ri,"PlacedSymbolArray");class Wi extends ze{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(r){this._structArray.uint32[this._pos4+15]=r}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Wi.prototype.size=76;class kr extends dr{get(r){return new Wi(this,r)}}Jt(kr,"SymbolInstanceArray");class eo extends hr{getoffsetX(r){return this.float32[1*r+0]}}Jt(eo,"GlyphOffsetArray");class Dd extends Pt{getx(r){return this.int16[2*r+0]}gety(r){return this.int16[2*r+1]}}Jt(Dd,"SymbolLineVertexArray");class Ds extends ze{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Ds.prototype.size=12;class lu extends Bi{get(r){return new Ds(this,r)}}Jt(lu,"FeatureIndexArray");class Oa extends Si{geta_centroid_pos0(r){return this.uint16[2*r+0]}geta_centroid_pos1(r){return this.uint16[2*r+1]}}Jt(Oa,"FillExtrusionCentroidArray");const rs=qe([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),zs=qe([{name:"a_dash",components:4,type:"Uint16"}]);var zd={exports:{}},cu={exports:{}};cu.exports=function(a,r){var s,d,f,g,v,b,E,T;for(d=a.length-(s=3&a.length),f=r,v=3432918353,b=461845907,T=0;T<d;)E=255&a.charCodeAt(T)|(255&a.charCodeAt(++T))<<8|(255&a.charCodeAt(++T))<<16|(255&a.charCodeAt(++T))<<24,++T,f=27492+(65535&(g=5*(65535&(f=(f^=E=(65535&(E=(E=(65535&E)*v+(((E>>>16)*v&65535)<<16)&4294967295)<<15|E>>>17))*b+(((E>>>16)*b&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(g>>>16)&65535)<<16);switch(E=0,s){case 3:E^=(255&a.charCodeAt(T+2))<<16;case 2:E^=(255&a.charCodeAt(T+1))<<8;case 1:f^=E=(65535&(E=(E=(65535&(E^=255&a.charCodeAt(T)))*v+(((E>>>16)*v&65535)<<16)&4294967295)<<15|E>>>17))*b+(((E>>>16)*b&65535)<<16)&4294967295}return f^=a.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0};var _p=cu.exports,qC={exports:{}};qC.exports=function(a,r){for(var s,d=a.length,f=r^d,g=0;d>=4;)s=1540483477*(65535&(s=255&a.charCodeAt(g)|(255&a.charCodeAt(++g))<<8|(255&a.charCodeAt(++g))<<16|(255&a.charCodeAt(++g))<<24))+((1540483477*(s>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),d-=4,++g;switch(d){case 3:f^=(255&a.charCodeAt(g+2))<<16;case 2:f^=(255&a.charCodeAt(g+1))<<8;case 1:f=1540483477*(65535&(f^=255&a.charCodeAt(g)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0};var HC=_p,yB=qC.exports;zd.exports=HC,zd.exports.murmur3=HC,zd.exports.murmur2=yB;var Vx=Z(zd.exports);class Qy{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,s,d,f){this.ids.push(ZC(r)),this.positions.push(s,d,f)}getPositions(r){const s=ZC(r);let d=0,f=this.ids.length-1;for(;d<f;){const v=d+f>>1;this.ids[v]>=s?f=v:d=v+1}const g=[];for(;this.ids[d]===s;)g.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return g}static serialize(r,s){const d=new Float64Array(r.ids),f=new Uint32Array(r.positions);return Gx(d,f,0,d.length-1),s&&s.push(d.buffer,f.buffer),{ids:d,positions:f}}static deserialize(r){const s=new Qy;return s.ids=r.ids,s.positions=r.positions,s.indexed=!0,s}}function ZC(a){const r=+a;return!isNaN(r)&&Number.MIN_SAFE_INTEGER<=r&&r<=Number.MAX_SAFE_INTEGER?r:Vx(String(a))}function Gx(a,r,s,d){for(;s<d;){const f=a[s+d>>1];let g=s-1,v=d+1;for(;;){do g++;while(a[g]<f);do v--;while(a[v]>f);if(g>=v)break;Jy(a,g,v),Jy(r,3*g,3*v),Jy(r,3*g+1,3*v+1),Jy(r,3*g+2,3*v+2)}v-s<d-v?(Gx(a,r,s,v),s=v+1):(Gx(a,r,v+1,d),d=v)}}function Jy(a,r,s){const d=a[r];a[r]=a[s],a[s]=d}Jt(Qy,"FeaturePositionMap");class Fs{constructor(r){this.gl=r.gl,this.initialized=!1}fetchUniformLocation(r,s){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(r,s),this.initialized=!0),!!this.location}}class e0 extends Fs{constructor(r){super(r),this.current=0}set(r,s,d){this.fetchUniformLocation(r,s)&&this.current!==d&&(this.current=d,this.gl.uniform1f(this.location,d))}}class XC extends Fs{constructor(r){super(r),this.current=[0,0,0,0]}set(r,s,d){this.fetchUniformLocation(r,s)&&(d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]&&d[3]===this.current[3]||(this.current=d,this.gl.uniform4f(this.location,d[0],d[1],d[2],d[3])))}}class KC extends Fs{constructor(r){super(r),this.current=Xr.transparent}set(r,s,d){this.fetchUniformLocation(r,s)&&(d.r===this.current.r&&d.g===this.current.g&&d.b===this.current.b&&d.a===this.current.a||(this.current=d,this.gl.uniform4f(this.location,d.r,d.g,d.b,d.a)))}}const vB=new Float32Array(16),_B=new Float32Array(9),xB=new Float32Array(4);function Wx(a){return[Oe(255*a.r,255*a.g),Oe(255*a.b,255*a.a)]}class xp{constructor(r,s,d){this.value=r,this.uniformNames=s.map(f=>`u_${f}`),this.type=d}setUniform(r,s,d,f,g){s.set(r,g,f.constantOr(this.value))}getBinding(r,s){return this.type==="color"?new KC(r):new e0(r)}}class Fd{constructor(r,s){this.uniformNames=s.map(d=>`u_${d}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(r){this.pixelRatio=r.pixelRatio||1,this.pattern=r.tl.concat(r.br)}setUniform(r,s,d,f,g){const v=g==="u_pattern"||g==="u_dash"?this.pattern:g==="u_pixel_ratio"?this.pixelRatio:null;v&&s.set(r,g,v)}getBinding(r,s){return s==="u_pattern"||s==="u_dash"?new XC(r):new e0(r)}}class Bs{constructor(r,s,d,f){this.expression=r,this.type=d,this.maxValue=0,this.paintVertexAttributes=s.map(g=>({name:`a_${g}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(r,s,d,f,g,v){const b=this.paintVertexArray.length,E=this.expression.evaluate(new P(0),s,{},g,f,v);this.paintVertexArray.resize(r),this._setPaintValue(b,r,E)}updatePaintArray(r,s,d,f,g){const v=this.expression.evaluate({zoom:0},d,f,void 0,g);this._setPaintValue(r,s,v)}_setPaintValue(r,s,d){if(this.type==="color"){const f=Wx(d);for(let g=r;g<s;g++)this.paintVertexArray.emplace(g,f[0],f[1])}else{for(let f=r;f<s;f++)this.paintVertexArray.emplace(f,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Da{constructor(r,s,d,f,g,v){this.expression=r,this.uniformNames=s.map(b=>`u_${b}_t`),this.type=d,this.useIntegerZoom=f,this.zoom=g,this.maxValue=0,this.paintVertexAttributes=s.map(b=>({name:`a_${b}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new v}populatePaintArray(r,s,d,f,g,v){const b=this.expression.evaluate(new P(this.zoom),s,{},g,f,v),E=this.expression.evaluate(new P(this.zoom+1),s,{},g,f,v),T=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(T,r,b,E)}updatePaintArray(r,s,d,f,g){const v=this.expression.evaluate({zoom:this.zoom},d,f,void 0,g),b=this.expression.evaluate({zoom:this.zoom+1},d,f,void 0,g);this._setPaintValue(r,s,v,b)}_setPaintValue(r,s,d,f){if(this.type==="color"){const g=Wx(d),v=Wx(f);for(let b=r;b<s;b++)this.paintVertexArray.emplace(b,g[0],g[1],v[0],v[1])}else{for(let g=r;g<s;g++)this.paintVertexArray.emplace(g,d,f);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(f))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,s,d,f,g){const v=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,b=Me(this.expression.interpolationFactor(v,this.zoom,this.zoom+1),0,1);s.set(r,g,b)}getBinding(r,s){return new e0(r)}}class Ol{constructor(r,s,d,f,g){this.expression=r,this.layerId=g,this.paintVertexAttributes=(d==="array"?zs:rs).members;for(let v=0;v<s.length;++v);this.paintVertexArray=new f}populatePaintArray(r,s,d){const f=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValues(f,r,s.patterns&&s.patterns[this.layerId],d)}updatePaintArray(r,s,d,f,g,v){this._setPaintValues(r,s,d.patterns&&d.patterns[this.layerId],v)}_setPaintValues(r,s,d,f){if(!f||!d)return;const g=f[d];if(!g)return;const{tl:v,br:b,pixelRatio:E}=g;for(let T=r;T<s;T++)this.paintVertexArray.emplace(T,v[0],v[1],b[0],b[1],E)}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Dl{constructor(r,s,d=()=>!0){this.binders={},this._buffers=[];const f=[];for(const g in r.paint._values){if(!d(g))continue;const v=r.paint.get(g);if(!(v instanceof he&&Cl(v.property.specification)))continue;const b=wB(g,r.type),E=v.value,T=v.property.specification.type,A=!!v.property.useIntegerZoom,I=g==="line-dasharray"||g.endsWith("pattern"),O=g==="line-dasharray"&&r.layout.get("line-cap").value.kind!=="constant";if(E.kind!=="constant"||O)if(E.kind==="source"||O||I){const N=YC(g,T,"source");this.binders[g]=I?new Ol(E,b,T,N,r.id):new Bs(E,b,T,N),f.push(`/a_${g}`)}else{const N=YC(g,T,"composite");this.binders[g]=new Da(E,b,T,A,s,N),f.push(`/z_${g}`)}else this.binders[g]=I?new Fd(E.value,b):new xp(E.value,b,T),f.push(`/u_${g}`)}this.cacheKey=f.sort().join("")}getMaxValue(r){const s=this.binders[r];return s instanceof Bs||s instanceof Da?s.maxValue:0}populatePaintArrays(r,s,d,f,g,v){for(const b in this.binders){const E=this.binders[b];(E instanceof Bs||E instanceof Da||E instanceof Ol)&&E.populatePaintArray(r,s,d,f,g,v)}}setConstantPatternPositions(r){for(const s in this.binders){const d=this.binders[s];d instanceof Fd&&d.setConstantPatternPositions(r)}}updatePaintArrays(r,s,d,f,g,v){let b=!1;for(const E in r){const T=s.getPositions(E);for(const A of T){const I=d.feature(A.index);for(const O in this.binders){const N=this.binders[O];if((N instanceof Bs||N instanceof Da||N instanceof Ol)&&N.expression.isStateDependent===!0){const U=f.paint.get(O);N.expression=U.value,N.updatePaintArray(A.start,A.end,I,r[E],g,v),b=!0}}}}return b}defines(){const r=[];for(const s in this.binders){const d=this.binders[s];(d instanceof xp||d instanceof Fd)&&r.push(...d.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return r}getBinderAttributes(){const r=[];for(const s in this.binders){const d=this.binders[s];if(d instanceof Bs||d instanceof Da||d instanceof Ol)for(let f=0;f<d.paintVertexAttributes.length;f++)r.push(d.paintVertexAttributes[f].name)}return r}getBinderUniforms(){const r=[];for(const s in this.binders){const d=this.binders[s];if(d instanceof xp||d instanceof Fd||d instanceof Da)for(const f of d.uniformNames)r.push(f)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r){const s=[];for(const d in this.binders){const f=this.binders[d];if(f instanceof xp||f instanceof Fd||f instanceof Da)for(const g of f.uniformNames)s.push({name:g,property:d,binding:f.getBinding(r,g)})}return s}setUniforms(r,s,d,f,g){for(const{name:v,property:b,binding:E}of d)this.binders[b].setUniform(r,E,g,f.get(b),v)}updatePaintBuffers(){this._buffers=[];for(const r in this.binders){const s=this.binders[r];(s instanceof Bs||s instanceof Da||s instanceof Ol)&&s.paintVertexBuffer&&this._buffers.push(s.paintVertexBuffer)}}upload(r){for(const s in this.binders){const d=this.binders[s];(d instanceof Bs||d instanceof Da||d instanceof Ol)&&d.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const s=this.binders[r];(s instanceof Bs||s instanceof Da||s instanceof Ol)&&s.destroy()}}}class uu{constructor(r,s,d=()=>!0){this.programConfigurations={};for(const f of r)this.programConfigurations[f.id]=new Dl(f,s,d);this.needsUpload=!1,this._featureMap=new Qy,this._bufferOffset=0}populatePaintArrays(r,s,d,f,g,v,b){for(const E in this.programConfigurations)this.programConfigurations[E].populatePaintArrays(r,s,f,g,v,b);s.id!==void 0&&this._featureMap.add(s.id,d,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,s,d,f,g){for(const v of d)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(r,this._featureMap,s,v,f,g)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}const bB={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function wB(a,r){return bB[a]||[a.replace(`${r}-`,"").replace(/-/g,"_")]}const SB={"line-pattern":{source:rt,composite:rt},"fill-pattern":{source:rt,composite:rt},"fill-extrusion-pattern":{source:rt,composite:rt},"line-dasharray":{source:yt,composite:yt}},EB={color:{source:la,composite:kt},number:{source:hr,composite:la}};function YC(a,r,s){const d=SB[a];return d&&d[s]||EB[r][s]}Jt(xp,"ConstantBinder"),Jt(Fd,"PatternConstantBinder"),Jt(Bs,"SourceExpressionBinder"),Jt(Ol,"PatternCompositeBinder"),Jt(Da,"CompositeExpressionBinder"),Jt(Dl,"ProgramConfiguration",{omit:["_buffers"]}),Jt(uu,"ProgramConfigurationSet");const QC="-transition";class za extends Fc{constructor(r,s){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&r.type!=="sky"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),s.layout&&(this._unevaluatedLayout=new fe(s.layout)),s.paint)){this._transitionablePaint=new q(s.paint);for(const d in r.paint)this.setPaintProperty(d,r.paint[d],{validate:!1});for(const d in r.layout)this.setLayoutProperty(d,r.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new me(s.paint)}}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,s,d={}){s!=null&&this._validate(Bx,`layers.${this.id}.layout.${r}`,r,s,d)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,s):this.visibility=s)}getPaintProperty(r){return Mt(r,QC)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,s,d={}){if(s!=null&&this._validate(Fx,`layers.${this.id}.paint.${r}`,r,s,d))return!1;if(Mt(r,QC))return this._transitionablePaint.setTransition(r.slice(0,-11),s||void 0),!1;{const f=this._transitionablePaint._values[r],g=f.value.isDataDriven(),v=f.value;this._transitionablePaint.setValue(r,s),this._handleSpecialPaintPropertyUpdate(r);const b=this._transitionablePaint._values[r].value,E=b.isDataDriven(),T=Mt(r,"pattern")||r==="line-dasharray";return E||g||T||this._handleOverridablePaintPropertyUpdate(r,v,b)}}_handleSpecialPaintPropertyUpdate(r){}getProgramIds(){return null}getProgramConfiguration(r){return null}_handleOverridablePaintPropertyUpdate(r,s,d){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,s){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,s)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),Nt(r,(s,d)=>!(s===void 0||d==="layout"&&!Object.keys(s).length||d==="paint"&&!Object.keys(s).length))}_validate(r,s,d,f,g={}){return(!g||g.validate!==!1)&&Zy(this,r.call(Hy,{key:s,layerType:this.type,objectKey:d,value:f,styleSpec:ft,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const s=this.paint.get(r);if(s instanceof he&&Cl(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Pd(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const TB=qe([{name:"a_pos",components:2,type:"Int16"}],4),CB=qe([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class ii{constructor(r=[]){this.segments=r}prepareSegment(r,s,d,f){let g=this.segments[this.segments.length-1];return r>ii.MAX_VERTEX_ARRAY_LENGTH&&Kt(`Max vertices per segment is ${ii.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!g||g.vertexLength+r>ii.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==f)&&(g={vertexOffset:s.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},f!==void 0&&(g.sortKey=f),this.segments.push(g)),g}get(){return this.segments}destroy(){for(const r of this.segments)for(const s in r.vaos)r.vaos[s].destroy()}static simpleSegment(r,s,d,f){return new ii([{vertexOffset:r,primitiveOffset:s,vertexLength:d,primitiveLength:f,vaos:{},sortKey:0}])}}ii.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Jt(ii,"SegmentVector");var pn=8192;class zl{constructor(r,s){r&&(s?this.setSouthWest(r).setNorthEast(s):r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1]))}setNorthEast(r){return this._ne=r instanceof mr?new mr(r.lng,r.lat):mr.convert(r),this}setSouthWest(r){return this._sw=r instanceof mr?new mr(r.lng,r.lat):mr.convert(r),this}extend(r){const s=this._sw,d=this._ne;let f,g;if(r instanceof mr)f=r,g=r;else{if(!(r instanceof zl))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(zl.convert(r)):this.extend(mr.convert(r)):typeof r=="object"&&r!==null&&r.hasOwnProperty("lat")&&(r.hasOwnProperty("lon")||r.hasOwnProperty("lng"))?this.extend(mr.convert(r)):this;if(f=r._sw,g=r._ne,!f||!g)return this}return s||d?(s.lng=Math.min(f.lng,s.lng),s.lat=Math.min(f.lat,s.lat),d.lng=Math.max(g.lng,d.lng),d.lat=Math.max(g.lat,d.lat)):(this._sw=new mr(f.lng,f.lat),this._ne=new mr(g.lng,g.lat)),this}getCenter(){return new mr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new mr(this.getWest(),this.getNorth())}getSouthEast(){return new mr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:s,lat:d}=mr.convert(r);let f=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(f=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&f}static convert(r){return!r||r instanceof zl?r:new zl(r)}}var t0=1e-6,Co=typeof Float32Array<"u"?Float32Array:Array;function JC(){var a=new Co(9);return Co!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a}function eR(a,r,s){var d=r[0],f=r[1],g=r[2],v=r[3],b=r[4],E=r[5],T=r[6],A=r[7],I=r[8],O=s[0],N=s[1],U=s[2],K=s[3],ie=s[4],ye=s[5],Re=s[6],ve=s[7],Ee=s[8];return a[0]=O*d+N*v+U*T,a[1]=O*f+N*b+U*A,a[2]=O*g+N*E+U*I,a[3]=K*d+ie*v+ye*T,a[4]=K*f+ie*b+ye*A,a[5]=K*g+ie*E+ye*I,a[6]=Re*d+ve*v+Ee*T,a[7]=Re*f+ve*b+Ee*A,a[8]=Re*g+ve*E+Ee*I,a}function Fa(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function qx(a,r){var s=r[0],d=r[1],f=r[2],g=r[3],v=r[4],b=r[5],E=r[6],T=r[7],A=r[8],I=r[9],O=r[10],N=r[11],U=r[12],K=r[13],ie=r[14],ye=r[15],Re=s*b-d*v,ve=s*E-f*v,Ee=s*T-g*v,Le=d*E-f*b,Pe=d*T-g*b,ot=f*T-g*E,tt=A*K-I*U,pt=A*ie-O*U,It=A*ye-N*U,lt=I*ie-O*K,_t=I*ye-N*K,xt=O*ye-N*ie,Tt=Re*xt-ve*_t+Ee*lt+Le*It-Pe*pt+ot*tt;return Tt?(a[0]=(b*xt-E*_t+T*lt)*(Tt=1/Tt),a[1]=(f*_t-d*xt-g*lt)*Tt,a[2]=(K*ot-ie*Pe+ye*Le)*Tt,a[3]=(O*Pe-I*ot-N*Le)*Tt,a[4]=(E*It-v*xt-T*pt)*Tt,a[5]=(s*xt-f*It+g*pt)*Tt,a[6]=(ie*Ee-U*ot-ye*ve)*Tt,a[7]=(A*ot-O*Ee+N*ve)*Tt,a[8]=(v*_t-b*It+T*tt)*Tt,a[9]=(d*It-s*_t-g*tt)*Tt,a[10]=(U*Pe-K*Ee+ye*Re)*Tt,a[11]=(I*Ee-A*Pe-N*Re)*Tt,a[12]=(b*pt-v*lt-E*tt)*Tt,a[13]=(s*lt-d*pt+f*tt)*Tt,a[14]=(K*ve-U*Le-ie*Re)*Tt,a[15]=(A*Le-I*ve+O*Re)*Tt,a):null}function du(a,r,s){var d=r[0],f=r[1],g=r[2],v=r[3],b=r[4],E=r[5],T=r[6],A=r[7],I=r[8],O=r[9],N=r[10],U=r[11],K=r[12],ie=r[13],ye=r[14],Re=r[15],ve=s[0],Ee=s[1],Le=s[2],Pe=s[3];return a[0]=ve*d+Ee*b+Le*I+Pe*K,a[1]=ve*f+Ee*E+Le*O+Pe*ie,a[2]=ve*g+Ee*T+Le*N+Pe*ye,a[3]=ve*v+Ee*A+Le*U+Pe*Re,a[4]=(ve=s[4])*d+(Ee=s[5])*b+(Le=s[6])*I+(Pe=s[7])*K,a[5]=ve*f+Ee*E+Le*O+Pe*ie,a[6]=ve*g+Ee*T+Le*N+Pe*ye,a[7]=ve*v+Ee*A+Le*U+Pe*Re,a[8]=(ve=s[8])*d+(Ee=s[9])*b+(Le=s[10])*I+(Pe=s[11])*K,a[9]=ve*f+Ee*E+Le*O+Pe*ie,a[10]=ve*g+Ee*T+Le*N+Pe*ye,a[11]=ve*v+Ee*A+Le*U+Pe*Re,a[12]=(ve=s[12])*d+(Ee=s[13])*b+(Le=s[14])*I+(Pe=s[15])*K,a[13]=ve*f+Ee*E+Le*O+Pe*ie,a[14]=ve*g+Ee*T+Le*N+Pe*ye,a[15]=ve*v+Ee*A+Le*U+Pe*Re,a}function bp(a,r,s){var d,f,g,v,b,E,T,A,I,O,N,U,K=s[0],ie=s[1],ye=s[2];return r===a?(a[12]=r[0]*K+r[4]*ie+r[8]*ye+r[12],a[13]=r[1]*K+r[5]*ie+r[9]*ye+r[13],a[14]=r[2]*K+r[6]*ie+r[10]*ye+r[14],a[15]=r[3]*K+r[7]*ie+r[11]*ye+r[15]):(f=r[1],g=r[2],v=r[3],b=r[4],E=r[5],T=r[6],A=r[7],I=r[8],O=r[9],N=r[10],U=r[11],a[0]=d=r[0],a[1]=f,a[2]=g,a[3]=v,a[4]=b,a[5]=E,a[6]=T,a[7]=A,a[8]=I,a[9]=O,a[10]=N,a[11]=U,a[12]=d*K+b*ie+I*ye+r[12],a[13]=f*K+E*ie+O*ye+r[13],a[14]=g*K+T*ie+N*ye+r[14],a[15]=v*K+A*ie+U*ye+r[15]),a}function hu(a,r,s){var d=s[0],f=s[1],g=s[2];return a[0]=r[0]*d,a[1]=r[1]*d,a[2]=r[2]*d,a[3]=r[3]*d,a[4]=r[4]*f,a[5]=r[5]*f,a[6]=r[6]*f,a[7]=r[7]*f,a[8]=r[8]*g,a[9]=r[9]*g,a[10]=r[10]*g,a[11]=r[11]*g,a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15],a}function Hx(a,r,s){var d=Math.sin(s),f=Math.cos(s),g=r[4],v=r[5],b=r[6],E=r[7],T=r[8],A=r[9],I=r[10],O=r[11];return r!==a&&(a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a[4]=g*f+T*d,a[5]=v*f+A*d,a[6]=b*f+I*d,a[7]=E*f+O*d,a[8]=T*f-g*d,a[9]=A*f-v*d,a[10]=I*f-b*d,a[11]=O*f-E*d,a}function n0(a,r,s){var d=Math.sin(s),f=Math.cos(s),g=r[0],v=r[1],b=r[2],E=r[3],T=r[8],A=r[9],I=r[10],O=r[11];return r!==a&&(a[4]=r[4],a[5]=r[5],a[6]=r[6],a[7]=r[7],a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a[0]=g*f-T*d,a[1]=v*f-A*d,a[2]=b*f-I*d,a[3]=E*f-O*d,a[8]=g*d+T*f,a[9]=v*d+A*f,a[10]=b*d+I*f,a[11]=E*d+O*f,a}function tR(a,r){return a[0]=r[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=r[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=r[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function nR(a,r,s){var d,f,g,v=s[0],b=s[1],E=s[2],T=Math.hypot(v,b,E);return T<t0?null:(v*=T=1/T,b*=T,E*=T,d=Math.sin(r),f=Math.cos(r),a[0]=v*v*(g=1-f)+f,a[1]=b*v*g+E*d,a[2]=E*v*g-b*d,a[3]=0,a[4]=v*b*g-E*d,a[5]=b*b*g+f,a[6]=E*b*g+v*d,a[7]=0,a[8]=v*E*g+b*d,a[9]=b*E*g-v*d,a[10]=E*E*g+f,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}Math.hypot||(Math.hypot=function(){for(var a=0,r=arguments.length;r--;)a+=arguments[r]*arguments[r];return Math.sqrt(a)});var RB=du;function Zx(){var a=new Co(3);return Co!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function rR(a){var r=new Co(3);return r[0]=a[0],r[1]=a[1],r[2]=a[2],r}function wp(a){return Math.hypot(a[0],a[1],a[2])}function Bd(a,r,s){var d=new Co(3);return d[0]=a,d[1]=r,d[2]=s,d}function Ns(a,r,s){return a[0]=r[0]+s[0],a[1]=r[1]+s[1],a[2]=r[2]+s[2],a}function Xx(a,r,s){return a[0]=r[0]-s[0],a[1]=r[1]-s[1],a[2]=r[2]-s[2],a}function iR(a,r,s){return a[0]=r[0]*s[0],a[1]=r[1]*s[1],a[2]=r[2]*s[2],a}function Sp(a,r,s){return a[0]=Math.min(r[0],s[0]),a[1]=Math.min(r[1],s[1]),a[2]=Math.min(r[2],s[2]),a}function Ep(a,r,s){return a[0]=Math.max(r[0],s[0]),a[1]=Math.max(r[1],s[1]),a[2]=Math.max(r[2],s[2]),a}function Go(a,r,s){return a[0]=r[0]*s,a[1]=r[1]*s,a[2]=r[2]*s,a}function Tp(a,r,s,d){return a[0]=r[0]+s[0]*d,a[1]=r[1]+s[1]*d,a[2]=r[2]+s[2]*d,a}function to(a,r){var s=r[0],d=r[1],f=r[2],g=s*s+d*d+f*f;return g>0&&(g=1/Math.sqrt(g)),a[0]=r[0]*g,a[1]=r[1]*g,a[2]=r[2]*g,a}function ca(a,r){return a[0]*r[0]+a[1]*r[1]+a[2]*r[2]}function Kx(a,r,s){var d=r[0],f=r[1],g=r[2],v=s[0],b=s[1],E=s[2];return a[0]=f*E-g*b,a[1]=g*v-d*E,a[2]=d*b-f*v,a}function Kr(a,r,s){var d=r[0],f=r[1],g=r[2],v=s[3]*d+s[7]*f+s[11]*g+s[15];return a[0]=(s[0]*d+s[4]*f+s[8]*g+s[12])/(v=v||1),a[1]=(s[1]*d+s[5]*f+s[9]*g+s[13])/v,a[2]=(s[2]*d+s[6]*f+s[10]*g+s[14])/v,a}function oR(a,r,s){var d=s[0],f=s[1],g=s[2],v=r[0],b=r[1],E=r[2],T=f*E-g*b,A=g*v-d*E,I=d*b-f*v,O=f*I-g*A,N=g*T-d*I,U=d*A-f*T,K=2*s[3];return A*=K,I*=K,N*=2,U*=2,a[0]=v+(T*=K)+(O*=2),a[1]=b+A+N,a[2]=E+I+U,a}var Cp,Ba=Xx,MB=iR,AB=wp;function aR(a,r,s){return a[0]=r[0]*s,a[1]=r[1]*s,a[2]=r[2]*s,a[3]=r[3]*s,a}function sR(a,r){var s=r[0],d=r[1],f=r[2],g=r[3],v=s*s+d*d+f*f+g*g;return v>0&&(v=1/Math.sqrt(v)),a[0]=s*v,a[1]=d*v,a[2]=f*v,a[3]=g*v,a}function fu(a,r,s){var d=r[0],f=r[1],g=r[2],v=r[3];return a[0]=s[0]*d+s[4]*f+s[8]*g+s[12]*v,a[1]=s[1]*d+s[5]*f+s[9]*g+s[13]*v,a[2]=s[2]*d+s[6]*f+s[10]*g+s[14]*v,a[3]=s[3]*d+s[7]*f+s[11]*g+s[15]*v,a}function lR(){var a=new Co(4);return Co!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a[3]=1,a}function cR(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a}function uR(a,r,s){s*=.5;var d=r[0],f=r[1],g=r[2],v=r[3],b=Math.sin(s),E=Math.cos(s);return a[0]=d*E+v*b,a[1]=f*E+g*b,a[2]=g*E-f*b,a[3]=v*E-d*b,a}function dR(a,r,s){s*=.5;var d=r[0],f=r[1],g=r[2],v=r[3],b=Math.sin(s),E=Math.cos(s);return a[0]=d*E-g*b,a[1]=f*E+v*b,a[2]=g*E+d*b,a[3]=v*E-f*b,a}Zx(),Cp=new Co(4),Co!=Float32Array&&(Cp[0]=0,Cp[1]=0,Cp[2]=0,Cp[3]=0);var kB=sR;Zx(),Bd(1,0,0),Bd(0,1,0),lR(),lR(),JC();const PB=qe([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:hR}=PB,fR=qe([{name:"a_pos_3",components:3,type:"Int16"}]);var Rp=qe([{name:"a_pos",type:"Int16",components:2}]);class Yx{constructor(r,s){this.pos=r,this.dir=s}intersectsPlane(r,s,d){const f=ca(s,this.dir);if(Math.abs(f)<1e-6)return!1;const g=((r[0]-this.pos[0])*s[0]+(r[1]-this.pos[1])*s[1]+(r[2]-this.pos[2])*s[2])/f;return d[0]=this.pos[0]+this.dir[0]*g,d[1]=this.pos[1]+this.dir[1]*g,d[2]=this.pos[2]+this.dir[2]*g,!0}closestPointOnSphere(r,s,d){if(function(N,U){var K=N[0],ie=N[1],ye=N[2],Re=U[0],ve=U[1],Ee=U[2];return Math.abs(K-Re)<=t0*Math.max(1,Math.abs(K),Math.abs(Re))&&Math.abs(ie-ve)<=t0*Math.max(1,Math.abs(ie),Math.abs(ve))&&Math.abs(ye-Ee)<=t0*Math.max(1,Math.abs(ye),Math.abs(Ee))}(this.pos,r)||s===0)return d[0]=d[1]=d[2]=0,!1;const[f,g,v]=this.dir,b=this.pos[0]-r[0],E=this.pos[1]-r[1],T=this.pos[2]-r[2],A=f*f+g*g+v*v,I=2*(b*f+E*g+T*v),O=I*I-4*A*(b*b+E*E+T*T-s*s);if(O<0){const N=Math.max(-I/2,0),U=b+f*N,K=E+g*N,ie=T+v*N,ye=Math.hypot(U,K,ie);return d[0]=U*s/ye,d[1]=K*s/ye,d[2]=ie*s/ye,!1}{const N=(-I-Math.sqrt(O))/(2*A);if(N<0){const U=Math.hypot(b,E,T);return d[0]=b*s/U,d[1]=E*s/U,d[2]=T*s/U,!1}return d[0]=b+f*N,d[1]=E+g*N,d[2]=T+v*N,!0}}}class Qx{constructor(r,s,d,f,g){this.TL=r,this.TR=s,this.BR=d,this.BL=f,this.horizon=g}static fromInvProjectionMatrix(r,s,d){const f=[-1,1,1],g=[1,1,1],v=[1,-1,1],b=[-1,-1,1],E=Kr(f,f,r),T=Kr(g,g,r),A=Kr(v,v,r),I=Kr(b,b,r);return new Qx(E,T,A,I,s/d)}}class Jx{constructor(r,s){this.points=r,this.planes=s}static fromInvProjectionMatrix(r,s,d,f){const g=Math.pow(2,d),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(E=>{const T=fu([],E,r),A=1/T[3]/s*g;return function(I,O,N){return I[0]=O[0]*N[0],I[1]=O[1]*N[1],I[2]=O[2]*N[2],I[3]=O[3]*N[3],I}(T,T,[A,A,f?1/T[3]:A,A])}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(E=>{const T=to([],Kx([],Ba([],v[E[0]],v[E[1]]),Ba([],v[E[2]],v[E[1]]))),A=-ca(T,v[E[1]]);return T.concat(A)});return new Jx(v,b)}}class no{static fromPoints(r){const s=[1/0,1/0,1/0],d=[-1/0,-1/0,-1/0];for(const f of r)Sp(s,s,f),Ep(d,d,f);return new no(s,d)}static applyTransform(r,s){const d=r.getCorners();for(let f=0;f<d.length;++f)Kr(d[f],d[f],s);return no.fromPoints(d)}constructor(r,s){this.min=r,this.max=s,this.center=Go([],Ns([],this.min,this.max),.5)}quadrant(r){const s=[r%2==0,r<2],d=rR(this.min),f=rR(this.max);for(let g=0;g<s.length;g++)d[g]=s[g]?this.min[g]:this.center[g],f[g]=s[g]?this.center[g]:this.max[g];return f[2]=this.max[2],new no(d,f)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}distanceZ(r){return Math.max(Math.min(this.max[2],r[2]),this.min[2])-r[2]}getCorners(){const r=this.min,s=this.max;return[[r[0],r[1],r[2]],[s[0],r[1],r[2]],[s[0],s[1],r[2]],[r[0],s[1],r[2]],[r[0],r[1],s[2]],[s[0],r[1],s[2]],[s[0],s[1],s[2]],[r[0],s[1],s[2]]]}intersects(r){const s=this.getCorners();let d=!0;for(let f=0;f<r.planes.length;f++){const g=r.planes[f];let v=0;for(let b=0;b<s.length;b++)v+=ca(g,s[b])+g[3]>=0;if(v===0)return 0;v!==s.length&&(d=!1)}if(d)return 2;for(let f=0;f<3;f++){let g=Number.MAX_VALUE,v=-Number.MAX_VALUE;for(let b=0;b<r.points.length;b++){const E=r.points[b][f]-this.min[f];g=Math.min(g,E),v=Math.max(v,E)}if(v<0||g>this.max[f]-this.min[f])return 0}return 1}}const eb=5,pR=6,is=pn/Math.PI/2,IB=16383,pu=64,Mp=[pu,32,16],ua=-is,da=is,LB=[new no([ua,ua,ua],[da,da,da]),new no([ua,ua,ua],[0,0,da]),new no([0,ua,ua],[da,0,da]),new no([ua,0,ua],[0,da,da]),new no([0,0,ua],[da,da,da])];function r0(a){return a*is/Pp}function mR(a,r,s,d=!0){const f=Go([],a._camera.position,a.worldSize),g=[r,s,1,1];fu(g,g,a.pixelMatrixInverse),aR(g,g,1/g[3]);const v=to([],Ba([],g,f)),b=a.globeMatrix,E=[b[12],b[13],b[14]],T=Ba([],E,f),A=wp(T),I=to([],T),O=a.worldSize/(2*Math.PI),N=ca(I,v),U=Math.asin(O/A);if(U<Math.acos(N)){if(!d)return null;const It=[],lt=[];Go(It,v,A/N),to(lt,Ba(lt,It,T)),to(v,Ns(v,T,Go(v,lt,Math.tan(U)*A)))}const K=[];new Yx(f,v).closestPointOnSphere(E,O,K);const ie=to([],cr(b,0)),ye=to([],cr(b,1)),Re=to([],cr(b,2)),ve=ca(ie,K),Ee=ca(ye,K),Le=ca(Re,K),Pe=Ge(Math.asin(-Ee/O));let ot=Ge(Math.atan2(ve,Le));ot=a.center.lng+function(It,lt){const _t=(lt-It+180)%360-180;return _t<-180?_t+360:_t}(a.center.lng,ot);const tt=as(ot),pt=Me(ss(Pe),0,1);return new jd(tt,pt)}class OB{constructor(r,s,d){this.a=Ba([],r,d),this.b=Ba([],s,d),this.center=d;const f=to([],this.a),g=to([],this.b);this.angle=Math.acos(ca(f,g))}}function tb(a,r){if(a.angle===0)return null;let s;return s=a.a[r]===0?1/a.angle*.5*Math.PI:1/a.angle*Math.atan(a.b[r]/a.a[r]/Math.sin(a.angle)-1/Math.tan(a.angle)),s<0||s>1?null:function(d,f,g,v){const b=Math.sin(g);return d*(Math.sin((1-v)*g)/b)+f*(Math.sin(v*g)/b)}(a.a[r],a.b[r],a.angle,Me(s,0,1))+a.center[r]}function os(a){if(a.z<=1)return LB[a.z+2*a.y+a.x];const r=nb(i0(a));return no.fromPoints(r)}function mu(a,r,s){return Go(a,a,1-s),Tp(a,a,r,s)}function gR(a,r){const s=Ud(r.zoom);if(s===0)return os(a);const d=i0(a),f=nb(d),g=as(d.getWest())*r.worldSize,v=as(d.getEast())*r.worldSize,b=ss(d.getNorth())*r.worldSize,E=ss(d.getSouth())*r.worldSize,T=[g,b,0],A=[v,b,0],I=[g,E,0],O=[v,E,0],N=qx([],r.globeMatrix);return Kr(T,T,N),Kr(A,A,N),Kr(I,I,N),Kr(O,O,N),f[0]=mu(f[0],I,s),f[1]=mu(f[1],O,s),f[2]=mu(f[2],A,s),f[3]=mu(f[3],T,s),no.fromPoints(f)}function yR(a,r,s){for(const d of a)Kr(d,d,r),Go(d,d,s)}function DB(a,r,s){const d=r/a.worldSize,f=a.globeMatrix;if(s.z<=1){const tt=os(s).getCorners();return yR(tt,f,d),no.fromPoints(tt)}const g=i0(s),v=nb(g);yR(v,f,d);const b=Number.MAX_VALUE,E=[-b,-b,-b],T=[b,b,b];if(g.contains(a.center)){for(const It of v)Sp(T,T,It),Ep(E,E,It);E[2]=0;const tt=a.point,pt=[tt.x*d,tt.y*d,0];return Sp(T,T,pt),Ep(E,E,pt),new no(T,E)}const A=[f[12]*d,f[13]*d,f[14]*d],I=g.getCenter(),O=Me(a.center.lat,-$i,$i),N=Me(I.lat,-$i,$i),U=as(a.center.lng),K=ss(O);let ie=U-as(I.lng);const ye=K-ss(N);ie>.5?ie-=1:ie<-.5&&(ie+=1);let Re=0;Math.abs(ie)>Math.abs(ye)?Re=ie>=0?1:3:(Re=ye>=0?0:2,Tp(A,A,[f[4]*d,f[5]*d,f[6]*d],-Math.sin($e(ye>=0?g.getSouth():g.getNorth()))*is));const ve=v[Re],Ee=v[(Re+1)%4],Le=new OB(ve,Ee,A),Pe=[tb(Le,0)||ve[0],tb(Le,1)||ve[1],tb(Le,2)||ve[2]],ot=Ud(a.zoom);if(ot>0){const tt=function({x:It,y:lt,z:_t},xt,Tt,zt,ht){const Vt=1/(1<<_t);let tn=It*Vt,Wt=tn+Vt,Rn=lt*Vt,Bt=Rn+Vt,dn=0;const Mn=(tn+Wt)/2-zt;return Mn>.5?dn=-1:Mn<-.5&&(dn=1),tn=((tn+dn)*xt-(zt*=xt))*Tt+zt,Wt=((Wt+dn)*xt-zt)*Tt+zt,Rn=(Rn*xt-(ht*=xt))*Tt+ht,Bt=(Bt*xt-ht)*Tt+ht,[[tn,Bt,0],[Wt,Bt,0],[Wt,Rn,0],[tn,Rn,0]]}(s,r,a._pixelsPerMercatorPixel,U,K);for(let It=0;It<v.length;It++)mu(v[It],tt[It],ot);const pt=Ns([],tt[Re],tt[(Re+1)%4]);Go(pt,pt,.5),mu(Pe,pt,ot)}for(const tt of v)Sp(T,T,tt),Ep(E,E,tt);return T[2]=Math.min(ve[2],Ee[2]),Sp(T,T,Pe),Ep(E,E,Pe),new no(T,E)}function i0({x:a,y:r,z:s}){const d=1/(1<<s),f=new mr(Wo(a*d),Ni((r+1)*d)),g=new mr(Wo((a+1)*d),Ni(r*d));return new zl(f,g)}function nb(a){const r=$e(a.getNorth()),s=$e(a.getSouth()),d=Math.cos(r),f=Math.cos(s),g=Math.sin(r),v=Math.sin(s),b=a.getWest(),E=a.getEast();return[Nd(f,v,b),Nd(f,v,E),Nd(d,g,E),Nd(d,g,b)]}function Nd(a,r,s,d=is){return s=$e(s),[a*Math.sin(s)*d,-r*d,a*Math.cos(s)*d]}function $d(a,r,s){return Nd(Math.cos($e(a)),Math.sin($e(a)),r,s)}function Ap(a,r,s,d){const f=1<<s.z,g=(a/pn+s.x)/f;return $d(Ni((r/pn+s.y)/f),Wo(g),d)}function o0({min:a,max:r}){return IB/Math.max(r[0]-a[0],r[1]-a[1],r[2]-a[2])}const vR=new Float64Array(16);function kp(a){const r=o0(a),s=tR(vR,[r,r,r]);return bp(s,s,((d=[])[0]=-(f=a.min)[0],d[1]=-f[1],d[2]=-f[2],d));var d,f}function rb(a){const r=(d=a.min,(s=vR)[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=d[0],s[13]=d[1],s[14]=d[2],s[15]=1,s);var s,d;const f=1/o0(a);return hu(r,r,[f,f,f])}function _R(a,r,s,d,f){const g=function(E){const T=pn/(2*Math.PI);return E/(2*Math.PI)/T}(s),v=[a,r,-s/(2*Math.PI)],b=Fa(new Float64Array(16));return bp(b,b,v),hu(b,b,[g,g,g]),Hx(b,b,$e(-f)),n0(b,b,$e(-d)),b}function Ud(a){return Ce(eb,pR,a)}function xR(a,r){const s=$d(r.lat,r.lng),d=function(U){const K=$d(U._center.lat,U._center.lng);let ie=Kx([],Bd(0,1,0),K);const ye=nR([],-U.angle,K);ie=Kr(ie,ie,ye),nR(ye,-U._pitch,ie);const Re=to([],K);return Go(Re,Re,r0(U.cameraToCenterDistance/U.pixelsPerMeter)),Kr(Re,Re,ye),Ns([],K,Re)}(a);return v=(f=Xx([],d,s))[0],b=f[1],E=f[2],T=(g=s)[0],A=g[1],I=g[2],N=(O=Math.sqrt(v*v+b*b+E*E)*Math.sqrt(T*T+A*A+I*I))&&ca(f,g)/O,Math.acos(Math.min(Math.max(N,-1),1));var f,g,v,b,E,T,A,I,O,N}function ib(a,r){return xR(a,r)>Math.PI/2*1.01}const bR=$e(85),zB=Math.cos(bR),FB=Math.sin(bR),Pp=63710088e-1,wR=2*Math.PI*Pp;class Fl{constructor(r,s){if(isNaN(r)||isNaN(s))throw new Error(`Invalid LngLat object: (${r}, ${s})`);if(this.lng=+r,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Fl(Te(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const s=Math.PI/180,d=this.lat*s,f=r.lat*s,g=Math.sin(d)*Math.sin(f)+Math.cos(d)*Math.cos(f)*Math.cos((r.lng-this.lng)*s);return Pp*Math.acos(Math.min(g,1))}toBounds(r=0){const s=360*r/40075017,d=s/Math.cos(Math.PI/180*this.lat);return new zl(new Fl(this.lng-d,this.lat-s),new Fl(this.lng+d,this.lat+s))}toEcef(r){const s=r0(r);return $d(this.lat,this.lng,is+s)}static convert(r){if(r instanceof Fl)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new Fl(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new Fl(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var mr=Fl;function ob(a){return wR*Math.cos(a*Math.PI/180)}function as(a){return(180+a)/360}function ss(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function Na(a,r){return a/ob(r)}function Wo(a){return 360*a-180}function Ni(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}function SR(a,r){return a*ob(Ni(r))}const $i=85.051129;function ER(a){return 1/Math.cos(a*Math.PI/180)}class jd{constructor(r,s,d=0){this.x=+r,this.y=+s,this.z=+d}static fromLngLat(r,s=0){const d=mr.convert(r);return new jd(as(d.lng),ss(d.lat),Na(s,d.lat))}toLngLat(){return new mr(Wo(this.x),Ni(this.y))}toAltitude(){return SR(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/wR*ER(Ni(this.y))}}function ab(a,r,s,d,f,g,v,b,E){const T=(r+d)/2,A=(s+f)/2,I=new J(T,A);b(I),function(O,N,U,K,ie,ye){const Re=U-ie,ve=K-ye;return Math.abs((K-N)*Re-(U-O)*ve)/Math.hypot(Re,ve)}(I.x,I.y,g.x,g.y,v.x,v.y)>=E?(ab(a,r,s,T,A,g,I,b,E),ab(a,T,A,d,f,I,v,b,E)):a.push(v)}function TR(a,r,s){let d=a[0],f=d.x,g=d.y;r(d);const v=[d];for(let b=1;b<a.length;b++){const E=a[b],{x:T,y:A}=E;r(E),ab(v,f,g,T,A,d,E,r,s),f=T,g=A,d=E}return v}function sb(a,r,s,d){if(d(r,s)){const f=r.add(s)._mult(.5);sb(a,r,f,d),sb(a,f,s,d)}else a.push(s)}function BB(a,r){let s=a[0];const d=[s];for(let f=1;f<a.length;f++){const g=a[f];sb(d,s,g,r),s=g}return d}const lb=Math.pow(2,14)-1,CR=-lb-1;function NB(a,r){const s=Math.round(a.x*r),d=Math.round(a.y*r);return a.x=Me(s,CR,lb),a.y=Me(d,CR,lb),(s<a.x||s>a.x+1||d<a.y||d>a.y+1)&&Kt("Geometry exceeds allowed extent, reduce your vector tile buffer size"),a}function $s(a,r,s){const d=a.loadGeometry(),f=a.extent,g=pn/f;if(r&&s&&s.projection.isReprojectedInTileSpace){const v=1<<r.z,{scale:b,x:E,y:T,projection:A}=s,I=O=>{const N=Wo((r.x+O.x/f)/v),U=Ni((r.y+O.y/f)/v),K=A.project(N,U);O.x=(K.x*b-E)*f,O.y=(K.y*b-T)*f};for(let O=0;O<d.length;O++)if(a.type!==1)d[O]=TR(d[O],I,1);else{const N=[];for(const U of d[O])U.x<0||U.x>=f||U.y<0||U.y>=f||(I(U),N.push(U));d[O]=N}}for(const v of d)for(const b of v)NB(b,g);return d}function gu(a,r){return{type:a.type,id:a.id,properties:a.properties,geometry:r?$s(a):[]}}function a0(a,r,s,d,f){a.emplaceBack(2*r+(d+1)/2,2*s+(f+1)/2)}function s0(a,r,s){a.emplaceBack(r.x,r.y,r.z,s[0]*16384,s[1]*16384,s[2]*16384)}class cb{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.projection=r.projection,this.layoutVertexArray=new Pt,this.indexArray=new cn,this.segments=new ii,this.programConfigurations=new uu(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,d,f){const g=this.layers[0],v=[];let b=null;g.type==="circle"&&(b=g.layout.get("circle-sort-key"));for(const{feature:T,id:A,index:I,sourceLayerIndex:O}of r){const N=this.layers[0]._featureFilter.needGeometry,U=gu(T,N);if(!this.layers[0]._featureFilter.filter(new P(this.zoom),U,d))continue;const K=b?b.evaluate(U,{},d):void 0,ie={id:A,properties:T.properties,type:T.type,sourceLayerIndex:O,index:I,geometry:N?U.geometry:$s(T,d,f),patterns:{},sortKey:K};v.push(ie)}b&&v.sort((T,A)=>T.sortKey-A.sortKey);let E=null;f.projection.name==="globe"&&(this.globeExtVertexArray=new Lt,E=f.projection);for(const T of v){const{geometry:A,index:I,sourceLayerIndex:O}=T,N=r[I].feature;this.addFeature(T,A,I,s.availableImages,d,E),s.featureIndex.insert(N,A,I,O,this.index)}}update(r,s,d,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,d,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,TB.members),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=r.createVertexBuffer(this.globeExtVertexArray,CB.members))),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(r,s,d,f,g,v){for(const b of s)for(const E of b){const T=E.x,A=E.y;if(T<0||T>=pn||A<0||A>=pn)continue;if(v){const N=v.projectTilePoint(T,A,g),U=v.upVector(g,T,A),K=this.globeExtVertexArray;s0(K,N,U),s0(K,N,U),s0(K,N,U),s0(K,N,U)}const I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),O=I.vertexLength;a0(this.layoutVertexArray,T,A,-1,-1),a0(this.layoutVertexArray,T,A,1,-1),a0(this.layoutVertexArray,T,A,1,1),a0(this.layoutVertexArray,T,A,-1,1),this.indexArray.emplaceBack(O,O+1,O+2),this.indexArray.emplaceBack(O,O+2,O+3),I.vertexLength+=4,I.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,{},f,g)}}function RR(a,r){for(let s=0;s<a.length;s++)if(yu(r,a[s]))return!0;for(let s=0;s<r.length;s++)if(yu(a,r[s]))return!0;return!!ub(a,r)}function $B(a,r,s){return!!yu(a,r)||!!db(r,a,s)}function MR(a,r){if(a.length===1)return kR(r,a[0]);for(let s=0;s<r.length;s++){const d=r[s];for(let f=0;f<d.length;f++)if(yu(a,d[f]))return!0}for(let s=0;s<a.length;s++)if(kR(r,a[s]))return!0;for(let s=0;s<r.length;s++)if(ub(a,r[s]))return!0;return!1}function UB(a,r,s){if(a.length>1){if(ub(a,r))return!0;for(let d=0;d<r.length;d++)if(db(r[d],a,s))return!0}for(let d=0;d<a.length;d++)if(db(a[d],r,s))return!0;return!1}function ub(a,r){if(a.length===0||r.length===0)return!1;for(let s=0;s<a.length-1;s++){const d=a[s],f=a[s+1];for(let g=0;g<r.length-1;g++)if(jB(d,f,r[g],r[g+1]))return!0}return!1}function jB(a,r,s,d){return wn(a,s,d)!==wn(r,s,d)&&wn(a,r,s)!==wn(a,r,d)}function db(a,r,s){const d=s*s;if(r.length===1)return a.distSqr(r[0])<d;for(let f=1;f<r.length;f++)if(AR(a,r[f-1],r[f])<d)return!0;return!1}function AR(a,r,s){const d=r.distSqr(s);if(d===0)return a.distSqr(r);const f=((a.x-r.x)*(s.x-r.x)+(a.y-r.y)*(s.y-r.y))/d;return a.distSqr(f<0?r:f>1?s:s.sub(r)._mult(f)._add(r))}function kR(a,r){let s,d,f,g=!1;for(let v=0;v<a.length;v++){s=a[v];for(let b=0,E=s.length-1;b<s.length;E=b++)d=s[b],f=s[E],d.y>r.y!=f.y>r.y&&r.x<(f.x-d.x)*(r.y-d.y)/(f.y-d.y)+d.x&&(g=!g)}return g}function yu(a,r){let s=!1;for(let d=0,f=a.length-1;d<a.length;f=d++){const g=a[d],v=a[f];g.y>r.y!=v.y>r.y&&r.x<(v.x-g.x)*(r.y-g.y)/(v.y-g.y)+g.x&&(s=!s)}return s}function PR(a,r,s,d,f){for(const v of a)if(r<=v.x&&s<=v.y&&d>=v.x&&f>=v.y)return!0;const g=[new J(r,s),new J(r,f),new J(d,f),new J(d,s)];if(a.length>2){for(const v of g)if(yu(a,v))return!0}for(let v=0;v<a.length-1;v++)if(VB(a[v],a[v+1],g))return!0;return!1}function VB(a,r,s){const d=s[0],f=s[2];if(a.x<d.x&&r.x<d.x||a.x>f.x&&r.x>f.x||a.y<d.y&&r.y<d.y||a.y>f.y&&r.y>f.y)return!1;const g=wn(a,r,s[0]);return g!==wn(a,r,s[1])||g!==wn(a,r,s[2])||g!==wn(a,r,s[3])}function Vd(a,r,s){const d=r.paint.get(a).value;return d.kind==="constant"?d.value:s.programConfigurations.get(r.id).getMaxValue(a)}function l0(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function IR(a,r,s,d,f){if(!r[0]&&!r[1])return a;const g=J.convert(r)._mult(f);s==="viewport"&&g._rotate(-d);const v=[];for(let b=0;b<a.length;b++)v.push(a[b].sub(g));return v}function LR(a,r,s,d){const f=J.convert(a)._mult(d);return r==="viewport"&&f._rotate(-s),f}Jt(cb,"CircleBucket",{omit:["layers"]});const GB=new xe({"circle-sort-key":new le(ft.layout_circle["circle-sort-key"])});var WB={paint:new xe({"circle-radius":new le(ft.paint_circle["circle-radius"]),"circle-color":new le(ft.paint_circle["circle-color"]),"circle-blur":new le(ft.paint_circle["circle-blur"]),"circle-opacity":new le(ft.paint_circle["circle-opacity"]),"circle-translate":new H(ft.paint_circle["circle-translate"]),"circle-translate-anchor":new H(ft.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new H(ft.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new H(ft.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new le(ft.paint_circle["circle-stroke-width"]),"circle-stroke-color":new le(ft.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new le(ft.paint_circle["circle-stroke-opacity"])}),layout:GB};function OR(a,r,s,d,f,g,v,b,E){if(g&&a.queryGeometry.isAboveHorizon)return!1;g&&(E*=a.pixelToTileUnitsFactor);const T=a.tileID.canonical,A=s.projection.upVectorScale(T,s.center.lat,s.worldSize).metersToTile;for(const I of r)for(const O of I){const N=O.add(b),U=f&&s.elevation?s.elevation.exaggeration()*f.getElevationAt(N.x,N.y,!0):0,K=s.projection.projectTilePoint(N.x,N.y,T);if(U>0){const ve=s.projection.upVector(T,N.x,N.y);K.x+=ve[0]*A*U,K.y+=ve[1]*A*U,K.z+=ve[2]*A*U}const ie=g?N:qB(K.x,K.y,K.z,d),ye=g?a.tilespaceRays.map(ve=>ZB(ve,U)):a.queryGeometry.screenGeometry,Re=fu([],[K.x,K.y,K.z,1],d);if(!v&&g?E*=Re[3]/s.cameraToCenterDistance:v&&!g&&(E*=s.cameraToCenterDistance/Re[3]),g){const ve=Ni((O.y/pn+T.y)/(1<<T.z));E/=s.projection.pixelsPerMeter(ve,1)/Na(1,ve)}if($B(ye,ie,E))return!0}return!1}function qB(a,r,s,d){const f=fu([],[a,r,s,1],d);return new J(f[0]/f[3],f[1]/f[3])}const DR=Bd(0,0,0),HB=Bd(0,0,1);function ZB(a,r){const s=Zx();return DR[2]=r,a.intersectsPlane(DR,HB,s),new J(s[0],s[1])}class zR extends cb{}function FR(a,{width:r,height:s},d,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==r*s*d)throw new RangeError("mismatched image size")}else f=new Uint8Array(r*s*d);return a.width=r,a.height=s,a.data=f,a}function BR(a,r,s){const{width:d,height:f}=r;d===a.width&&f===a.height||(hb(a,r,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,d),height:Math.min(a.height,f)},s),a.width=d,a.height=f,a.data=r.data)}function hb(a,r,s,d,f,g){if(f.width===0||f.height===0)return r;if(f.width>a.width||f.height>a.height||s.x>a.width-f.width||s.y>a.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>r.width||f.height>r.height||d.x>r.width-f.width||d.y>r.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const v=a.data,b=r.data;for(let E=0;E<f.height;E++){const T=((s.y+E)*a.width+s.x)*g,A=((d.y+E)*r.width+d.x)*g;for(let I=0;I<f.width*g;I++)b[A+I]=v[T+I]}return r}Jt(zR,"HeatmapBucket",{omit:["layers"]});class Us{constructor(r,s){FR(this,r,1,s)}resize(r){BR(this,new Us(r),1)}clone(){return new Us({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,d,f,g){hb(r,s,d,f,g,1)}}class Ro{constructor(r,s){FR(this,r,4,s)}resize(r){BR(this,new Ro(r),4)}replace(r,s){s?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new Ro({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,d,f,g){hb(r,s,d,f,g,4)}}Jt(Us,"AlphaImage"),Jt(Ro,"RGBAImage");var XB={paint:new xe({"heatmap-radius":new le(ft.paint_heatmap["heatmap-radius"]),"heatmap-weight":new le(ft.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new H(ft.paint_heatmap["heatmap-intensity"]),"heatmap-color":new _e(ft.paint_heatmap["heatmap-color"]),"heatmap-opacity":new H(ft.paint_heatmap["heatmap-opacity"])})};function fb(a){const r={},s=a.resolution||256,d=a.clips?a.clips.length:1,f=a.image||new Ro({width:s,height:d}),g=(v,b,E)=>{r[a.evaluationKey]=E;const T=a.expression.evaluate(r);f.data[v+b+0]=Math.floor(255*T.r/T.a),f.data[v+b+1]=Math.floor(255*T.g/T.a),f.data[v+b+2]=Math.floor(255*T.b/T.a),f.data[v+b+3]=Math.floor(255*T.a)};if(a.clips)for(let v=0,b=0;v<d;++v,b+=4*s)for(let E=0,T=0;E<s;E++,T+=4){const A=E/(s-1),{start:I,end:O}=a.clips[v];g(b,T,I*(1-A)+O*A)}else for(let v=0,b=0;v<s;v++,b+=4)g(0,b,v/(s-1));return f}var KB={paint:new xe({"hillshade-illumination-direction":new H(ft.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new H(ft.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new H(ft.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new H(ft.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new H(ft.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new H(ft.paint_hillshade["hillshade-accent-color"])})};const YB=qe([{name:"a_pos",components:2,type:"Int16"}],4),{members:QB}=YB;var pb={exports:{}};function c0(a,r,s){s=s||2;var d,f,g,v,b,E,T,A=r&&r.length,I=A?r[0]*s:a.length,O=NR(a,0,I,s,!0),N=[];if(!O||O.next===O.prev)return N;if(A&&(O=function(K,ie,ye,Re){var ve,Ee,Le,Pe=[];for(ve=0,Ee=ie.length;ve<Ee;ve++)(Le=NR(K,ie[ve]*Re,ve<Ee-1?ie[ve+1]*Re:K.length,Re,!1))===Le.next&&(Le.steiner=!0),Pe.push(a6(Le));for(Pe.sort(r6),ve=0;ve<Pe.length;ve++)ye=i6(Pe[ve],ye);return ye}(a,r,O,s)),a.length>80*s){d=g=a[0],f=v=a[1];for(var U=s;U<I;U+=s)(b=a[U])<d&&(d=b),(E=a[U+1])<f&&(f=E),b>g&&(g=b),E>v&&(v=E);T=(T=Math.max(g-d,v-f))!==0?32767/T:0}return Ip(O,N,s,d,f,T,0),N}function NR(a,r,s,d,f){var g,v;if(f===yb(a,r,s,d)>0)for(g=r;g<s;g+=d)v=jR(g,a[g],a[g+1],v);else for(g=s-d;g>=r;g-=d)v=jR(g,a[g],a[g+1],v);return v&&u0(v,v.next)&&(Op(v),v=v.next),v}function vu(a,r){if(!a)return a;r||(r=a);var s,d=a;do if(s=!1,d.steiner||!u0(d,d.next)&&oi(d.prev,d,d.next)!==0)d=d.next;else{if(Op(d),(d=r=d.prev)===d.next)break;s=!0}while(s||d!==r);return r}function Ip(a,r,s,d,f,g,v){if(a){!v&&g&&function(A,I,O,N){var U=A;do U.z===0&&(U.z=mb(U.x,U.y,I,O,N)),U.prevZ=U.prev,U.nextZ=U.next,U=U.next;while(U!==A);U.prevZ.nextZ=null,U.prevZ=null,function(K){var ie,ye,Re,ve,Ee,Le,Pe,ot,tt=1;do{for(ye=K,K=null,Ee=null,Le=0;ye;){for(Le++,Re=ye,Pe=0,ie=0;ie<tt&&(Pe++,Re=Re.nextZ);ie++);for(ot=tt;Pe>0||ot>0&&Re;)Pe!==0&&(ot===0||!Re||ye.z<=Re.z)?(ve=ye,ye=ye.nextZ,Pe--):(ve=Re,Re=Re.nextZ,ot--),Ee?Ee.nextZ=ve:K=ve,ve.prevZ=Ee,Ee=ve;ye=Re}Ee.nextZ=null,tt*=2}while(Le>1)}(U)}(a,d,f,g);for(var b,E,T=a;a.prev!==a.next;)if(b=a.prev,E=a.next,g?e6(a,d,f,g):JB(a))r.push(b.i/s|0),r.push(a.i/s|0),r.push(E.i/s|0),Op(a),a=E.next,T=E.next;else if((a=E)===T){v?v===1?Ip(a=t6(vu(a),r,s),r,s,d,f,g,2):v===2&&n6(a,r,s,d,f,g):Ip(vu(a),r,s,d,f,g,1);break}}}function JB(a){var r=a.prev,s=a,d=a.next;if(oi(r,s,d)>=0)return!1;for(var f=r.x,g=s.x,v=d.x,b=r.y,E=s.y,T=d.y,A=f<g?f<v?f:v:g<v?g:v,I=b<E?b<T?b:T:E<T?E:T,O=f>g?f>v?f:v:g>v?g:v,N=b>E?b>T?b:T:E>T?E:T,U=d.next;U!==r;){if(U.x>=A&&U.x<=O&&U.y>=I&&U.y<=N&&Gd(f,b,g,E,v,T,U.x,U.y)&&oi(U.prev,U,U.next)>=0)return!1;U=U.next}return!0}function e6(a,r,s,d){var f=a.prev,g=a,v=a.next;if(oi(f,g,v)>=0)return!1;for(var b=f.x,E=g.x,T=v.x,A=f.y,I=g.y,O=v.y,N=b<E?b<T?b:T:E<T?E:T,U=A<I?A<O?A:O:I<O?I:O,K=b>E?b>T?b:T:E>T?E:T,ie=A>I?A>O?A:O:I>O?I:O,ye=mb(N,U,r,s,d),Re=mb(K,ie,r,s,d),ve=a.prevZ,Ee=a.nextZ;ve&&ve.z>=ye&&Ee&&Ee.z<=Re;){if(ve.x>=N&&ve.x<=K&&ve.y>=U&&ve.y<=ie&&ve!==f&&ve!==v&&Gd(b,A,E,I,T,O,ve.x,ve.y)&&oi(ve.prev,ve,ve.next)>=0||(ve=ve.prevZ,Ee.x>=N&&Ee.x<=K&&Ee.y>=U&&Ee.y<=ie&&Ee!==f&&Ee!==v&&Gd(b,A,E,I,T,O,Ee.x,Ee.y)&&oi(Ee.prev,Ee,Ee.next)>=0))return!1;Ee=Ee.nextZ}for(;ve&&ve.z>=ye;){if(ve.x>=N&&ve.x<=K&&ve.y>=U&&ve.y<=ie&&ve!==f&&ve!==v&&Gd(b,A,E,I,T,O,ve.x,ve.y)&&oi(ve.prev,ve,ve.next)>=0)return!1;ve=ve.prevZ}for(;Ee&&Ee.z<=Re;){if(Ee.x>=N&&Ee.x<=K&&Ee.y>=U&&Ee.y<=ie&&Ee!==f&&Ee!==v&&Gd(b,A,E,I,T,O,Ee.x,Ee.y)&&oi(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.nextZ}return!0}function t6(a,r,s){var d=a;do{var f=d.prev,g=d.next.next;!u0(f,g)&&$R(f,d,d.next,g)&&Lp(f,g)&&Lp(g,f)&&(r.push(f.i/s|0),r.push(d.i/s|0),r.push(g.i/s|0),Op(d),Op(d.next),d=a=g),d=d.next}while(d!==a);return vu(d)}function n6(a,r,s,d,f,g){var v=a;do{for(var b=v.next.next;b!==v.prev;){if(v.i!==b.i&&s6(v,b)){var E=UR(v,b);return v=vu(v,v.next),E=vu(E,E.next),Ip(v,r,s,d,f,g,0),void Ip(E,r,s,d,f,g,0)}b=b.next}v=v.next}while(v!==a)}function r6(a,r){return a.x-r.x}function i6(a,r){var s=function(f,g){var v,b=g,E=f.x,T=f.y,A=-1/0;do{if(T<=b.y&&T>=b.next.y&&b.next.y!==b.y){var I=b.x+(T-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(I<=E&&I>A&&(A=I,v=b.x<b.next.x?b:b.next,I===E))return v}b=b.next}while(b!==g);if(!v)return null;var O,N=v,U=v.x,K=v.y,ie=1/0;b=v;do E>=b.x&&b.x>=U&&E!==b.x&&Gd(T<K?E:A,T,U,K,T<K?A:E,T,b.x,b.y)&&(O=Math.abs(T-b.y)/(E-b.x),Lp(b,f)&&(O<ie||O===ie&&(b.x>v.x||b.x===v.x&&o6(v,b)))&&(v=b,ie=O)),b=b.next;while(b!==N);return v}(a,r);if(!s)return r;var d=UR(s,a);return vu(d,d.next),vu(s,s.next)}function o6(a,r){return oi(a.prev,a,r.prev)<0&&oi(r.next,a,a.next)<0}function mb(a,r,s,d,f){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-s)*f|0)|a<<8))|a<<4))|a<<2))|a<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-d)*f|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function a6(a){var r=a,s=a;do(r.x<s.x||r.x===s.x&&r.y<s.y)&&(s=r),r=r.next;while(r!==a);return s}function Gd(a,r,s,d,f,g,v,b){return(f-v)*(r-b)>=(a-v)*(g-b)&&(a-v)*(d-b)>=(s-v)*(r-b)&&(s-v)*(g-b)>=(f-v)*(d-b)}function s6(a,r){return a.next.i!==r.i&&a.prev.i!==r.i&&!function(s,d){var f=s;do{if(f.i!==s.i&&f.next.i!==s.i&&f.i!==d.i&&f.next.i!==d.i&&$R(f,f.next,s,d))return!0;f=f.next}while(f!==s);return!1}(a,r)&&(Lp(a,r)&&Lp(r,a)&&function(s,d){var f=s,g=!1,v=(s.x+d.x)/2,b=(s.y+d.y)/2;do f.y>b!=f.next.y>b&&f.next.y!==f.y&&v<(f.next.x-f.x)*(b-f.y)/(f.next.y-f.y)+f.x&&(g=!g),f=f.next;while(f!==s);return g}(a,r)&&(oi(a.prev,a,r.prev)||oi(a,r.prev,r))||u0(a,r)&&oi(a.prev,a,a.next)>0&&oi(r.prev,r,r.next)>0)}function oi(a,r,s){return(r.y-a.y)*(s.x-r.x)-(r.x-a.x)*(s.y-r.y)}function u0(a,r){return a.x===r.x&&a.y===r.y}function $R(a,r,s,d){var f=h0(oi(a,r,s)),g=h0(oi(a,r,d)),v=h0(oi(s,d,a)),b=h0(oi(s,d,r));return f!==g&&v!==b||!(f!==0||!d0(a,s,r))||!(g!==0||!d0(a,d,r))||!(v!==0||!d0(s,a,d))||!(b!==0||!d0(s,r,d))}function d0(a,r,s){return r.x<=Math.max(a.x,s.x)&&r.x>=Math.min(a.x,s.x)&&r.y<=Math.max(a.y,s.y)&&r.y>=Math.min(a.y,s.y)}function h0(a){return a>0?1:a<0?-1:0}function Lp(a,r){return oi(a.prev,a,a.next)<0?oi(a,r,a.next)>=0&&oi(a,a.prev,r)>=0:oi(a,r,a.prev)<0||oi(a,a.next,r)<0}function UR(a,r){var s=new gb(a.i,a.x,a.y),d=new gb(r.i,r.x,r.y),f=a.next,g=r.prev;return a.next=r,r.prev=a,s.next=f,f.prev=s,d.next=s,s.prev=d,g.next=d,d.prev=g,d}function jR(a,r,s,d){var f=new gb(a,r,s);return d?(f.next=d.next,f.prev=d,d.next.prev=f,d.next=f):(f.prev=f,f.next=f),f}function Op(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function gb(a,r,s){this.i=a,this.x=r,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function yb(a,r,s,d){for(var f=0,g=r,v=s-d;g<s;g+=d)f+=(a[v]-a[g])*(a[g+1]+a[v+1]),v=g;return f}pb.exports=c0,pb.exports.default=c0,c0.deviation=function(a,r,s,d){var f=r&&r.length,g=Math.abs(yb(a,0,f?r[0]*s:a.length,s));if(f)for(var v=0,b=r.length;v<b;v++)g-=Math.abs(yb(a,r[v]*s,v<b-1?r[v+1]*s:a.length,s));var E=0;for(v=0;v<d.length;v+=3){var T=d[v]*s,A=d[v+1]*s,I=d[v+2]*s;E+=Math.abs((a[T]-a[I])*(a[A+1]-a[T+1])-(a[T]-a[A])*(a[I+1]-a[T+1]))}return g===0&&E===0?0:Math.abs((E-g)/g)},c0.flatten=function(a){for(var r=a[0][0].length,s={vertices:[],holes:[],dimensions:r},d=0,f=0;f<a.length;f++){for(var g=0;g<a[f].length;g++)for(var v=0;v<r;v++)s.vertices.push(a[f][g][v]);f>0&&s.holes.push(d+=a[f-1].length)}return s};var vb=Z(pb.exports);function l6(a,r,s,d,f){VR(a,r,s||0,d||a.length-1,f||c6)}function VR(a,r,s,d,f){for(;d>s;){if(d-s>600){var g=d-s+1,v=r-s+1,b=Math.log(g),E=.5*Math.exp(2*b/3),T=.5*Math.sqrt(b*E*(g-E)/g)*(v-g/2<0?-1:1);VR(a,r,Math.max(s,Math.floor(r-v*E/g+T)),Math.min(d,Math.floor(r+(g-v)*E/g+T)),f)}var A=a[r],I=s,O=d;for(Dp(a,s,r),f(a[d],A)>0&&Dp(a,s,d);I<O;){for(Dp(a,I,O),I++,O--;f(a[I],A)<0;)I++;for(;f(a[O],A)>0;)O--}f(a[s],A)===0?Dp(a,s,O):Dp(a,++O,d),O<=r&&(s=O+1),r<=O&&(d=O-1)}}function Dp(a,r,s){var d=a[r];a[r]=a[s],a[s]=d}function c6(a,r){return a<r?-1:a>r?1:0}function _b(a,r){const s=a.length;if(s<=1)return[a];const d=[];let f,g;for(let v=0;v<s;v++){const b=hn(a[v]);b!==0&&(a[v].area=Math.abs(b),g===void 0&&(g=b<0),g===b<0?(f&&d.push(f),f=[a[v]]):f.push(a[v]))}if(f&&d.push(f),r>1)for(let v=0;v<d.length;v++)d[v].length<=r||(l6(d[v],r,1,d[v].length-1,u6),d[v]=d[v].slice(0,r));return d}function u6(a,r){return r.area-a.area}function xb(a,r,s){const d=s.patternDependencies;let f=!1;for(const g of r){const v=g.paint.get(`${a}-pattern`);v.isConstant()||(f=!0);const b=v.constantOr(null);b&&(f=!0,d[b]=!0)}return f}function bb(a,r,s,d,f){const g=f.patternDependencies;for(const v of r){const b=v.paint.get(`${a}-pattern`).value;if(b.kind!=="constant"){let E=b.evaluate({zoom:d},s,{},f.availableImages);E=E&&E.name?E.name:E,g[E]=!0,s.patterns[v.id]=E}}return s}class f0{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Pt,this.indexArray=new cn,this.indexArray2=new Si,this.programConfigurations=new uu(r.layers,r.zoom),this.segments=new ii,this.segments2=new ii,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.projection=r.projection}populate(r,s,d,f){this.hasPattern=xb("fill",this.layers,s);const g=this.layers[0].layout.get("fill-sort-key"),v=[];for(const{feature:b,id:E,index:T,sourceLayerIndex:A}of r){const I=this.layers[0]._featureFilter.needGeometry,O=gu(b,I);if(!this.layers[0]._featureFilter.filter(new P(this.zoom),O,d))continue;const N=g?g.evaluate(O,{},d,s.availableImages):void 0,U={id:E,properties:b.properties,type:b.type,sourceLayerIndex:A,index:T,geometry:I?O.geometry:$s(b,d,f),patterns:{},sortKey:N};v.push(U)}g&&v.sort((b,E)=>b.sortKey-E.sortKey);for(const b of v){const{geometry:E,index:T,sourceLayerIndex:A}=b;if(this.hasPattern){const I=bb("fill",this.layers,b,this.zoom,s);this.patternFeatures.push(I)}else this.addFeature(b,E,T,d,{},s.availableImages);s.featureIndex.insert(r[T].feature,E,T,A,this.index)}}update(r,s,d,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,d,f)}addFeatures(r,s,d,f,g){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,s,d,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,QB),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,s,d,f,g,v=[]){for(const b of _b(s,500)){let E=0;for(const U of b)E+=U.length;const T=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray),A=T.vertexLength,I=[],O=[];for(const U of b){if(U.length===0)continue;U!==b[0]&&O.push(I.length/2);const K=this.segments2.prepareSegment(U.length,this.layoutVertexArray,this.indexArray2),ie=K.vertexLength;this.layoutVertexArray.emplaceBack(U[0].x,U[0].y),this.indexArray2.emplaceBack(ie+U.length-1,ie),I.push(U[0].x),I.push(U[0].y);for(let ye=1;ye<U.length;ye++)this.layoutVertexArray.emplaceBack(U[ye].x,U[ye].y),this.indexArray2.emplaceBack(ie+ye-1,ie+ye),I.push(U[ye].x),I.push(U[ye].y);K.vertexLength+=U.length,K.primitiveLength+=U.length}const N=vb(I,O);for(let U=0;U<N.length;U+=3)this.indexArray.emplaceBack(A+N[U],A+N[U+1],A+N[U+2]);T.vertexLength+=E,T.primitiveLength+=N.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,g,v,f)}}Jt(f0,"FillBucket",{omit:["layers","patternFeatures"]});const d6=new xe({"fill-sort-key":new le(ft.layout_fill["fill-sort-key"])});var h6={paint:new xe({"fill-antialias":new H(ft.paint_fill["fill-antialias"]),"fill-opacity":new le(ft.paint_fill["fill-opacity"]),"fill-color":new le(ft.paint_fill["fill-color"]),"fill-outline-color":new le(ft.paint_fill["fill-outline-color"]),"fill-translate":new H(ft.paint_fill["fill-translate"]),"fill-translate-anchor":new H(ft.paint_fill["fill-translate-anchor"]),"fill-pattern":new le(ft.paint_fill["fill-pattern"])}),layout:d6};const f6=qe([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),p6=qe([{name:"a_centroid_pos",components:2,type:"Uint16"}]),m6=qe([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:g6}=f6;var p0={},y6=de,GR=Wd;function Wd(a,r,s,d,f){this.properties={},this.extent=s,this.type=0,this._pbf=a,this._geometry=-1,this._keys=d,this._values=f,a.readFields(v6,this,r)}function v6(a,r,s){a==1?r.id=s.readVarint():a==2?function(d,f){for(var g=d.readVarint()+d.pos;d.pos<g;){var v=f._keys[d.readVarint()],b=f._values[d.readVarint()];f.properties[v]=b}}(s,r):a==3?r.type=s.readVarint():a==4&&(r._geometry=s.pos)}function _6(a){for(var r,s,d=0,f=0,g=a.length,v=g-1;f<g;v=f++)d+=((s=a[v]).x-(r=a[f]).x)*(r.y+s.y);return d}Wd.types=["Unknown","Point","LineString","Polygon"],Wd.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var r,s=a.readVarint()+a.pos,d=1,f=0,g=0,v=0,b=[];a.pos<s;){if(f<=0){var E=a.readVarint();d=7&E,f=E>>3}if(f--,d===1||d===2)g+=a.readSVarint(),v+=a.readSVarint(),d===1&&(r&&b.push(r),r=[]),r.push(new y6(g,v));else{if(d!==7)throw new Error("unknown command "+d);r&&r.push(r[0].clone())}}return r&&b.push(r),b},Wd.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var r=a.readVarint()+a.pos,s=1,d=0,f=0,g=0,v=1/0,b=-1/0,E=1/0,T=-1/0;a.pos<r;){if(d<=0){var A=a.readVarint();s=7&A,d=A>>3}if(d--,s===1||s===2)(f+=a.readSVarint())<v&&(v=f),f>b&&(b=f),(g+=a.readSVarint())<E&&(E=g),g>T&&(T=g);else if(s!==7)throw new Error("unknown command "+s)}return[v,E,b,T]},Wd.prototype.toGeoJSON=function(a,r,s){var d,f,g=this.extent*Math.pow(2,s),v=this.extent*a,b=this.extent*r,E=this.loadGeometry(),T=Wd.types[this.type];function A(N){for(var U=0;U<N.length;U++){var K=N[U];N[U]=[360*(K.x+v)/g-180,360/Math.PI*Math.atan(Math.exp((180-360*(K.y+b)/g)*Math.PI/180))-90]}}switch(this.type){case 1:var I=[];for(d=0;d<E.length;d++)I[d]=E[d][0];A(E=I);break;case 2:for(d=0;d<E.length;d++)A(E[d]);break;case 3:for(E=function(N){var U=N.length;if(U<=1)return[N];for(var K,ie,ye=[],Re=0;Re<U;Re++){var ve=_6(N[Re]);ve!==0&&(ie===void 0&&(ie=ve<0),ie===ve<0?(K&&ye.push(K),K=[N[Re]]):K.push(N[Re]))}return K&&ye.push(K),ye}(E),d=0;d<E.length;d++)for(f=0;f<E[d].length;f++)A(E[d][f])}E.length===1?E=E[0]:T="Multi"+T;var O={type:"Feature",geometry:{type:T,coordinates:E},properties:this.properties};return"id"in this&&(O.id=this.id),O};var x6=GR,WR=qR;function qR(a,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(b6,this,r),this.length=this._features.length}function b6(a,r,s){a===15?r.version=s.readVarint():a===1?r.name=s.readString():a===5?r.extent=s.readVarint():a===2?r._features.push(s.pos):a===3?r._keys.push(s.readString()):a===4&&r._values.push(function(d){for(var f=null,g=d.readVarint()+d.pos;d.pos<g;){var v=d.readVarint()>>3;f=v===1?d.readString():v===2?d.readFloat():v===3?d.readDouble():v===4?d.readVarint64():v===5?d.readVarint():v===6?d.readSVarint():v===7?d.readBoolean():null}return f}(s))}qR.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var r=this._pbf.readVarint()+this._pbf.pos;return new x6(this._pbf,r,this.extent,this._keys,this._values)};var w6=WR;function S6(a,r,s){if(a===3){var d=new w6(s,s.readVarint()+s.pos);d.length&&(r[d.name]=d)}}var wb=p0.VectorTile=function(a,r){this.layers=a.readFields(S6,{},r)},m0=p0.VectorTileFeature=GR;function g0(a,r,s,d){const f=[],g=d===0?(v,b,E,T,A,I)=>{v.push(new J(I,E+(I-b)/(T-b)*(A-E)))}:(v,b,E,T,A,I)=>{v.push(new J(b+(I-E)/(A-E)*(T-b),I))};for(const v of a){const b=[];for(const E of v){if(E.length<=2)continue;const T=[];for(let O=0;O<E.length-1;O++){const N=E[O].x,U=E[O].y,K=E[O+1].x,ie=E[O+1].y,ye=d===0?N:U,Re=d===0?K:ie;ye<r?Re>r&&g(T,N,U,K,ie,r):ye>s?Re<s&&g(T,N,U,K,ie,s):T.push(E[O]),Re<r&&ye>=r&&g(T,N,U,K,ie,r),Re>s&&ye<=s&&g(T,N,U,K,ie,s)}let A=E[E.length-1];const I=d===0?A.x:A.y;I>=r&&I<=s&&T.push(A),T.length&&(A=T[T.length-1],T[0].x===A.x&&T[0].y===A.y||T.push(T[0]),b.push(T))}b.length&&f.push(b)}return f}p0.VectorTileLayer=WR;const E6=m0.types,T6=Math.pow(2,13);function zp(a,r,s,d,f,g,v,b){a.emplaceBack((r<<1)+v,(s<<1)+g,(Math.floor(d*T6)<<1)+f,Math.round(b))}function Fp(a,r,s){a.emplaceBack(r.x,r.y,r.z,s[0]*16384,s[1]*16384,s[2]*16384)}class HR{constructor(){this.acc=new J(0,0),this.polyCount=[]}startRing(r){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new J(r.x,r.y),this.max=new J(r.x,r.y))}append(r,s){this.currentPolyCount.edges++,this.acc._add(r);const d=this.min,f=this.max;r.x<d.x?d.x=r.x:r.x>f.x&&(f.x=r.x),r.y<d.y?d.y=r.y:r.y>f.y&&(f.y=r.y),((r.x===0||r.x===pn)&&r.x===s.x)!=((r.y===0||r.y===pn)&&r.y===s.y)&&this.processBorderOverlap(r,s),s.x<0!=r.x<0&&this.addBorderIntersection(0,Zn(s.y,r.y,(0-s.x)/(r.x-s.x))),s.x>pn!=r.x>pn&&this.addBorderIntersection(1,Zn(s.y,r.y,(pn-s.x)/(r.x-s.x))),s.y<0!=r.y<0&&this.addBorderIntersection(2,Zn(s.x,r.x,(0-s.y)/(r.y-s.y))),s.y>pn!=r.y>pn&&this.addBorderIntersection(3,Zn(s.x,r.x,(pn-s.y)/(r.y-s.y)))}addBorderIntersection(r,s){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const d=this.borders[r];s<d[0]&&(d[0]=s),s>d[1]&&(d[1]=s)}processBorderOverlap(r,s){if(r.x===s.x){if(r.y===s.y)return;const d=r.x===0?0:1;this.addBorderIntersection(d,s.y),this.addBorderIntersection(d,r.y)}else{const d=r.y===0?2:3;this.addBorderIntersection(d,s.x),this.addBorderIntersection(d,r.x)}}centroid(){const r=this.polyCount.reduce((s,d)=>s+d.edges,0);return r!==0?this.acc.div(r)._round():new J(0,0)}span(){return new J(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((r,s)=>r+ +(s[0]!==Number.MAX_VALUE),0)}}class Bp{constructor(r){this.zoom=r.zoom,this.canonical=r.canonical,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=r.projection,this.layoutVertexArray=new vt,this.centroidVertexArray=new Oa,this.indexArray=new cn,this.programConfigurations=new uu(r.layers,r.zoom),this.segments=new ii,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.enableTerrain=r.enableTerrain}populate(r,s,d,f){this.features=[],this.hasPattern=xb("fill-extrusion",this.layers,s),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(g){const v=Math.exp(Math.PI*(1-g.y/(1<<g.z)*2));return 80150034*v/(v*v+1)/pn/(1<<g.z)}(d),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:g,id:v,index:b,sourceLayerIndex:E}of r){const T=this.layers[0]._featureFilter.needGeometry,A=gu(g,T);if(!this.layers[0]._featureFilter.filter(new P(this.zoom),A,d))continue;const I={id:v,sourceLayerIndex:E,index:b,geometry:T?A.geometry:$s(g,d,f),properties:g.properties,type:g.type,patterns:{}},O=this.layoutVertexArray.length;this.hasPattern?this.features.push(bb("fill-extrusion",this.layers,I,this.zoom,s)):this.addFeature(I,I.geometry,b,d,{},s.availableImages,f),s.featureIndex.insert(g,I.geometry,b,E,this.index,O)}this.sortBorders()}addFeatures(r,s,d,f,g){for(const v of this.features){const{geometry:b}=v;this.addFeature(v,b,v.index,s,d,f,g)}this.sortBorders()}update(r,s,d,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,d,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,g6),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=r.createVertexBuffer(this.layoutVertexExtArray,m6.members,!0))),this.programConfigurations.upload(r),this.uploaded=!0}uploadCentroid(r){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,p6.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,s,d,f,g,v,b){const E=[new J(0,0),new J(pn,pn)],T=b.projection,A=T.name==="globe",I=this.enableTerrain&&!A?new HR:null,O=E6[r.type]==="Polygon";A&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Lt);const N=_b(s,500);for(let ye=N.length-1;ye>=0;ye--){const Re=N[ye];(Re.length===0||(U=Re[0]).every(ve=>ve.x<=0)||U.every(ve=>ve.x>=pn)||U.every(ve=>ve.y<=0)||U.every(ve=>ve.y>=pn))&&N.splice(ye,1)}var U;let K;if(A)K=eM(N,E,f);else{K=[];for(const ye of N)K.push({polygon:ye,bounds:E})}const ie=O?this.edgeRadius:0;for(const{polygon:ye,bounds:Re}of K){let ve=0,Ee=0;for(const Pe of ye)O&&!Pe[0].equals(Pe[Pe.length-1])&&Pe.push(Pe[0]),Ee+=O?Pe.length-1:Pe.length;const Le=this.segments.prepareSegment((O?5:4)*Ee,this.layoutVertexArray,this.indexArray);if(O){const Pe=[],ot=[];ve=Le.vertexLength;for(const pt of ye){let It,lt;pt.length&&pt!==ye[0]&&ot.push(Pe.length/2),It=pt[1].sub(pt[0])._perp()._unit();for(let _t=1;_t<pt.length;_t++){const xt=pt[_t],Tt=pt[_t===pt.length-1?1:_t+1];let{x:zt,y:ht}=xt;if(ie){lt=Tt.sub(xt)._perp()._unit();const Vt=It.add(lt)._unit(),tn=ie*Math.min(4,1/(It.x*Vt.x+It.y*Vt.y));zt+=tn*Vt.x,ht+=tn*Vt.y,It=lt}zp(this.layoutVertexArray,zt,ht,0,0,1,1,0),Le.vertexLength++,Pe.push(xt.x,xt.y),A&&Fp(this.layoutVertexExtArray,T.projectTilePoint(zt,ht,f),T.upVector(f,zt,ht))}}const tt=vb(Pe,ot);for(let pt=0;pt<tt.length;pt+=3)this.indexArray.emplaceBack(ve+tt[pt],ve+tt[pt+2],ve+tt[pt+1]),Le.primitiveLength++}for(const Pe of ye){I&&Pe.length&&I.startRing(Pe[0]);let ot,tt,pt,It=Pe.length>4&&YR(Pe[Pe.length-2],Pe[0],Pe[1]),lt=ie?C6(Pe[Pe.length-2],Pe[0],Pe[1],ie):0;tt=Pe[1].sub(Pe[0])._perp()._unit();let _t=!0;for(let xt=1,Tt=0;xt<Pe.length;xt++){let zt=Pe[xt-1],ht=Pe[xt];const Vt=Pe[xt===Pe.length-1?1:xt+1];if(I&&O&&I.currentPolyCount.top++,KR(ht,zt,Re)){ie&&(tt=Vt.sub(ht)._perp()._unit(),_t=!_t);continue}I&&I.append(ht,zt);const tn=ht.sub(zt)._perp(),Wt=tn.x/(Math.abs(tn.x)+Math.abs(tn.y)),Rn=tn.y>0?1:0,Bt=zt.dist(ht);if(Tt+Bt>32768&&(Tt=0),ie){pt=Vt.sub(ht)._perp()._unit();let An=XR(zt,ht,Vt,ZR(tt,pt),ie);isNaN(An)&&(An=0);const bn=ht.sub(zt)._unit();zt=zt.add(bn.mult(lt))._round(),ht=ht.add(bn.mult(-An))._round(),lt=An,tt=pt}const dn=Le.vertexLength,Mn=Pe.length>4&&YR(zt,ht,Vt);let Yn=QR(Tt,It,_t);if(zp(this.layoutVertexArray,zt.x,zt.y,Wt,Rn,0,0,Yn),zp(this.layoutVertexArray,zt.x,zt.y,Wt,Rn,0,1,Yn),Tt+=Bt,Yn=QR(Tt,Mn,!_t),It=Mn,zp(this.layoutVertexArray,ht.x,ht.y,Wt,Rn,0,0,Yn),zp(this.layoutVertexArray,ht.x,ht.y,Wt,Rn,0,1,Yn),Le.vertexLength+=4,this.indexArray.emplaceBack(dn+0,dn+1,dn+2),this.indexArray.emplaceBack(dn+1,dn+3,dn+2),Le.primitiveLength+=2,ie){const An=ve+(xt===1?Pe.length-2:xt-2),bn=xt===1?ve:An+1;if(this.indexArray.emplaceBack(dn+1,An,dn+3),this.indexArray.emplaceBack(An,bn,dn+3),Le.primitiveLength+=2,ot===void 0&&(ot=dn),!KR(Vt,Pe[xt],Re)){const Mr=xt===Pe.length-1?ot:Le.vertexLength;this.indexArray.emplaceBack(dn+2,dn+3,Mr),this.indexArray.emplaceBack(dn+3,Mr+1,Mr),this.indexArray.emplaceBack(dn+3,bn,Mr+1),Le.primitiveLength+=3}_t=!_t}if(A){const An=this.layoutVertexExtArray,bn=T.projectTilePoint(zt.x,zt.y,f),Mr=T.projectTilePoint(ht.x,ht.y,f),kn=T.upVector(f,zt.x,zt.y),Pn=T.upVector(f,ht.x,ht.y);Fp(An,bn,kn),Fp(An,bn,kn),Fp(An,Mr,Pn),Fp(An,Mr,Pn)}}O&&(ve+=Pe.length-1)}}if(I&&I.polyCount.length>0){if(I.borders){I.vertexArrayOffset=this.centroidVertexArray.length;const ye=I.borders,Re=this.featuresOnBorder.push(I)-1;for(let ve=0;ve<4;ve++)ye[ve][0]!==Number.MAX_VALUE&&this.borders[ve].push(Re)}this.encodeCentroid(I.borders?void 0:I.centroid(),I)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,g,v,f)}sortBorders(){for(let r=0;r<4;r++)this.borders[r].sort((s,d)=>this.featuresOnBorder[s].borders[r][0]-this.featuresOnBorder[d].borders[r][0])}encodeCentroid(r,s,d=!0){let f,g;if(r)if(r.y!==0){const b=s.span()._mult(this.tileToMeter);f=(Math.max(r.x,1)<<3)+Math.min(7,Math.round(b.x/10)),g=(Math.max(r.y,1)<<3)+Math.min(7,Math.round(b.y/10))}else f=Math.ceil(7*(r.x+450)),g=0;else f=0,g=+d;let v=d?this.centroidVertexArray.length:s.vertexArrayOffset;for(const b of s.polyCount){d&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*b.edges+b.top);for(let E=0;E<b.top;E++)this.centroidVertexArray.emplace(v++,f,g);for(let E=0;E<2*b.edges;E++)this.centroidVertexArray.emplace(v++,0,g),this.centroidVertexArray.emplace(v++,f,g)}}}function ZR(a,r){const s=a.add(r)._unit();return a.x*s.x+a.y*s.y}function C6(a,r,s,d){const f=r.sub(a)._perp()._unit(),g=s.sub(r)._perp()._unit();return XR(a,r,s,ZR(f,g),d)}function XR(a,r,s,d,f){const g=Math.sqrt(1-d*d);return Math.min(a.dist(r)/3,r.dist(s)/3,f*g/d)}function KR(a,r,s){return a.x<s[0].x&&r.x<s[0].x||a.x>s[1].x&&r.x>s[1].x||a.y<s[0].y&&r.y<s[0].y||a.y>s[1].y&&r.y>s[1].y}function YR(a,r,s){if(a.x<0||a.x>=pn||r.x<0||r.x>=pn||s.x<0||s.x>=pn)return!1;const d=s.sub(r),f=d.perp(),g=a.sub(r);return(d.x*g.x+d.y*g.y)/Math.sqrt((d.x*d.x+d.y*d.y)*(g.x*g.x+g.y*g.y))>-.866&&f.x*g.x+f.y*g.y<0}function QR(a,r,s){const d=r?2|a:-3&a;return s?1|d:-2&d}function JR(){const a=Math.PI/32,r=Math.tan(a),s=Pp;return s*Math.sqrt(1+2*r*r)-s}function eM(a,r,s){const d=1<<s.z,f=Wo(s.x/d),g=Wo((s.x+1)/d),v=Ni(s.y/d),b=Ni((s.y+1)/d);return function(E,T,A,I,O=0,N){const U=[];if(!E.length||!A||!I)return U;const K=(Pe,ot)=>{for(const tt of Pe)U.push({polygon:tt,bounds:ot})},ie=Math.ceil(Math.log2(A)),ye=Math.ceil(Math.log2(I)),Re=ie-ye,ve=[];for(let Pe=0;Pe<Math.abs(Re);Pe++)ve.push(Re>0?0:1);for(let Pe=0;Pe<Math.min(ie,ye);Pe++)ve.push(0),ve.push(1);let Ee=E;if(Ee=g0(Ee,T[0].y-O,T[1].y+O,1),Ee=g0(Ee,T[0].x-O,T[1].x+O,0),!Ee.length)return U;const Le=[];for(ve.length?Le.push({polygons:Ee,bounds:T,depth:0}):K(Ee,T);Le.length;){const Pe=Le.pop(),ot=Pe.depth,tt=ve[ot],pt=Pe.bounds[0],It=Pe.bounds[1],lt=tt===0?pt.x:pt.y,_t=tt===0?It.x:It.y,xt=N?N(tt,lt,_t):.5*(lt+_t),Tt=g0(Pe.polygons,lt-O,xt+O,tt),zt=g0(Pe.polygons,xt-O,_t+O,tt);if(Tt.length){const ht=[pt,new J(tt===0?xt:It.x,tt===1?xt:It.y)];ve.length>ot+1?Le.push({polygons:Tt,bounds:ht,depth:ot+1}):K(Tt,ht)}if(zt.length){const ht=[new J(tt===0?xt:pt.x,tt===1?xt:pt.y),It];ve.length>ot+1?Le.push({polygons:zt,bounds:ht,depth:ot+1}):K(zt,ht)}}return U}(a,r,Math.ceil((g-f)/11.25),Math.ceil((v-b)/11.25),1,(E,T,A)=>{if(E===0)return .5*(T+A);{const I=Ni((s.y+T/pn)/d);return(ss(.5*(Ni((s.y+A/pn)/d)+I))*d-s.y)*pn}})}Jt(Bp,"FillExtrusionBucket",{omit:["layers","features"]}),Jt(HR,"PartMetadata");const R6=new xe({"fill-extrusion-edge-radius":new H(ft["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var M6={paint:new xe({"fill-extrusion-opacity":new H(ft["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new le(ft["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new H(ft["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new H(ft["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new le(ft["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new le(ft["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new le(ft["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new H(ft["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new H(ft["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new H(ft["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new H(ft["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:R6};function tM(a,r,s){var d=2*Math.PI*6378137/256/Math.pow(2,s);return[a*d-2*Math.PI*6378137/2,r*d-2*Math.PI*6378137/2]}class y0{constructor(r,s,d){this.z=r,this.x=s,this.y=d,this.key=Np(0,r,r,s,d)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,s){const d=function(g,v,b){var E=tM(256*g,256*(v=Math.pow(2,b)-v-1),b),T=tM(256*(g+1),256*(v+1),b);return E[0]+","+E[1]+","+T[0]+","+T[1]}(this.x,this.y,this.z),f=function(g,v,b){let E,T="";for(let A=g;A>0;A--)E=1<<A-1,T+=(v&E?1:0)+(b&E?2:0);return T}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(s==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",f).replace("{bbox-epsg-3857}",d)}toString(){return`${this.z}/${this.x}/${this.y}`}}class nM{constructor(r,s){this.wrap=r,this.canonical=s,this.key=Np(r,s.z,s.z,s.x,s.y)}}class ro{constructor(r,s,d,f,g){this.overscaledZ=r,this.wrap=s,this.canonical=new y0(d,+f,+g),this.key=s===0&&r===d?this.canonical.key:Np(s,r,d,f,g)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){const s=this.canonical.z-r;return r>this.canonical.z?new ro(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ro(r,this.wrap,r,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(r,s=!0){if(this.overscaledZ===r&&s)return this.key;if(r>this.canonical.z)return Np(this.wrap*+s,r,this.canonical.z,this.canonical.x,this.canonical.y);{const d=this.canonical.z-r;return Np(this.wrap*+s,r,r,this.canonical.x>>d,this.canonical.y>>d)}}isChildOf(r){if(r.wrap!==this.wrap)return!1;const s=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>s&&r.canonical.y===this.canonical.y>>s}children(r){if(this.overscaledZ>=r)return[new ro(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,d=2*this.canonical.x,f=2*this.canonical.y;return[new ro(s,this.wrap,s,d,f),new ro(s,this.wrap,s,d+1,f),new ro(s,this.wrap,s,d,f+1),new ro(s,this.wrap,s,d+1,f+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new ro(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new ro(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new nM(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Np(a,r,s,d,f){const g=1<<Math.min(s,22);let v=g*(f%g)+d%g;return a&&s<22&&(v+=g*g*((a<0?-2*a-1:2*a)%(1<<2*(22-s)))),16*(32*v+s)+(r-s)}Jt(y0,"CanonicalTileID"),Jt(ro,"OverscaledTileID",{omit:["projMatrix"]});class qd extends J{constructor(r,s,d){super(r,s),this.z=d}}function $p(a,r){return a.x*r.x+a.y*r.y}function rM(a,r){if(a.length===1){let s=0;const d=r[s++];let f;for(;!f||d.equals(f);)if(f=r[s++],!f)return 1/0;for(;s<r.length;s++){const g=r[s],v=a[0],b=f.sub(d),E=g.sub(d),T=v.sub(d),A=$p(b,b),I=$p(b,E),O=$p(E,E),N=$p(T,b),U=$p(T,E),K=A*O-I*I,ie=(O*N-I*U)/K,ye=(A*U-I*N)/K,Re=d.z*(1-ie-ye)+f.z*ie+g.z*ye;if(isFinite(Re))return Re}return 1/0}{let s=1/0;for(const d of r)s=Math.min(s,d.z);return s}}function iM(a,r,s,d,f,g,v,b){const E=v*f.getElevationAt(a,r,!0,!0),T=g[0]!==0,A=T?g[1]===0?v*(g[0]/7-450):v*function(I,O,N){const U=Math.floor(O[0]/8),K=Math.floor(O[1]/8),ie=10*(O[0]-8*U),ye=10*(O[1]-8*K),Re=I.getElevationAt(U,K,!0,!0),ve=I.getMeterToDEM(N),Ee=Math.floor(.5*(ie*ve-1)),Le=Math.floor(.5*(ye*ve-1)),Pe=I.tileCoordToPixel(U,K),ot=2*Ee+1,tt=2*Le+1,pt=function(zt,ht,Vt,tn,Wt){return[zt.getElevationAtPixel(ht,Vt,!0),zt.getElevationAtPixel(ht+Wt,Vt,!0),zt.getElevationAtPixel(ht,Vt+Wt,!0),zt.getElevationAtPixel(ht+tn,Vt+Wt,!0)]}(I,Pe.x-Ee,Pe.y-Le,ot,tt),It=Math.abs(pt[0]-pt[1]),lt=Math.abs(pt[2]-pt[3]),_t=Math.abs(pt[0]-pt[2])+Math.abs(pt[1]-pt[3]),xt=Math.min(.25,.5*ve*(It+lt)/ot),Tt=Math.min(.25,.5*ve*_t/tt);return Re+Math.max(xt*ie,Tt*ye)}(f,g,b):E;return{base:E+(s===0)?-1:s,top:T?Math.max(A+d,E+s+2):E+d}}const A6=qe([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:k6}=A6,P6=qe([{name:"a_packed",components:4,type:"Float32"}]),{members:I6}=P6,L6=m0.types,O6=Math.cos(Math.PI/180*37.5);class v0{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.projection=r.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new st,this.layoutVertexArray2=new kt,this.indexArray=new cn,this.programConfigurations=new uu(r.layers,r.zoom),this.segments=new ii,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,d,f){this.hasPattern=xb("line",this.layers,s);const g=this.layers[0].layout.get("line-sort-key"),v=[];for(const{feature:A,id:I,index:O,sourceLayerIndex:N}of r){const U=this.layers[0]._featureFilter.needGeometry,K=gu(A,U);if(!this.layers[0]._featureFilter.filter(new P(this.zoom),K,d))continue;const ie=g?g.evaluate(K,{},d):void 0,ye={id:I,properties:A.properties,type:A.type,sourceLayerIndex:N,index:O,geometry:U?K.geometry:$s(A,d,f),patterns:{},sortKey:ie};v.push(ye)}g&&v.sort((A,I)=>A.sortKey-I.sortKey);const{lineAtlas:b,featureIndex:E}=s,T=this.addConstantDashes(b);for(const A of v){const{geometry:I,index:O,sourceLayerIndex:N}=A;if(T&&this.addFeatureDashes(A,b),this.hasPattern){const U=bb("line",this.layers,A,this.zoom,s);this.patternFeatures.push(U)}else this.addFeature(A,I,O,d,b.positions,s.availableImages);E.insert(r[O].feature,I,O,N,this.index)}}addConstantDashes(r){let s=!1;for(const d of this.layers){const f=d.paint.get("line-dasharray").value,g=d.layout.get("line-cap").value;if(f.kind!=="constant"||g.kind!=="constant")s=!0;else{const v=g.value,b=f.value;if(!b)continue;r.addDash(b,v)}}return s}addFeatureDashes(r,s){const d=this.zoom;for(const f of this.layers){const g=f.paint.get("line-dasharray").value,v=f.layout.get("line-cap").value;if(g.kind==="constant"&&v.kind==="constant")continue;let b,E;if(g.kind==="constant"){if(b=g.value,!b)continue}else b=g.evaluate({zoom:d},r);E=v.kind==="constant"?v.value:v.evaluate({zoom:d},r),s.addDash(b,E),r.patterns[f.id]=s.getKey(b,E)}}update(r,s,d,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,d,f)}addFeatures(r,s,d,f,g){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,s,d,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,I6)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,k6),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&r.properties.hasOwnProperty("mapbox_clip_start")&&r.properties.hasOwnProperty("mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,s,d,f,g,v){const b=this.layers[0].layout,E=b.get("line-join").evaluate(r,{}),T=b.get("line-cap").evaluate(r,{}),A=b.get("line-miter-limit"),I=b.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const O of s)this.addLine(O,r,E,T,A,I);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,g,v,f)}addLine(r,s,d,f,g,v){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ye=0;ye<r.length-1;ye++)this.totalDistance+=r[ye].dist(r[ye+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const b=L6[s.type]==="Polygon";let E=r.length;for(;E>=2&&r[E-1].equals(r[E-2]);)E--;let T=0;for(;T<E-1&&r[T].equals(r[T+1]);)T++;if(E<(b?3:2))return;d==="bevel"&&(g=1.05);const A=this.overscaling<=16?15*pn/(512*this.overscaling):0,I=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let O,N,U,K,ie;this.e1=this.e2=-1,b&&(O=r[E-2],ie=r[T].sub(O)._unit()._perp());for(let ye=T;ye<E;ye++){if(U=ye===E-1?b?r[T+1]:void 0:r[ye+1],U&&r[ye].equals(U))continue;ie&&(K=ie),O&&(N=O),O=r[ye],ie=U?U.sub(O)._unit()._perp():K,K=K||ie;let Re=K.add(ie);Re.x===0&&Re.y===0||Re._unit();const ve=K.x*ie.x+K.y*ie.y,Ee=Re.x*ie.x+Re.y*ie.y,Le=Ee!==0?1/Ee:1/0,Pe=2*Math.sqrt(2-2*Ee),ot=Ee<O6&&N&&U,tt=K.x*ie.y-K.y*ie.x>0;if(ot&&ye>T){const lt=O.dist(N);if(lt>2*A){const _t=O.sub(O.sub(N)._mult(A/lt)._round());this.updateDistance(N,_t),this.addCurrentVertex(_t,K,0,0,I),N=_t}}const pt=N&&U;let It=pt?d:b?"butt":f;if(pt&&It==="round"&&(Le<v?It="miter":Le<=2&&(It="fakeround")),It==="miter"&&Le>g&&(It="bevel"),It==="bevel"&&(Le>2&&(It="flipbevel"),Le<g&&(It="miter")),N&&this.updateDistance(N,O),It==="miter")Re._mult(Le),this.addCurrentVertex(O,Re,0,0,I);else if(It==="flipbevel"){if(Le>100)Re=ie.mult(-1);else{const lt=Le*K.add(ie).mag()/K.sub(ie).mag();Re._perp()._mult(lt*(tt?-1:1))}this.addCurrentVertex(O,Re,0,0,I),this.addCurrentVertex(O,Re.mult(-1),0,0,I)}else if(It==="bevel"||It==="fakeround"){const lt=-Math.sqrt(Le*Le-1),_t=tt?lt:0,xt=tt?0:lt;if(N&&this.addCurrentVertex(O,K,_t,xt,I),It==="fakeround"){const Tt=Math.round(180*Pe/Math.PI/20);for(let zt=1;zt<Tt;zt++){let ht=zt/Tt;if(ht!==.5){const tn=ht-.5;ht+=ht*tn*(ht-1)*((1.0904+ve*(ve*(3.55645-1.43519*ve)-3.2452))*tn*tn+(.848013+ve*(.215638*ve-1.06021)))}const Vt=ie.sub(K)._mult(ht)._add(K)._unit()._mult(tt?-1:1);this.addHalfVertex(O,Vt.x,Vt.y,!1,tt,0,I)}}U&&this.addCurrentVertex(O,ie,-_t,-xt,I)}else if(It==="butt")this.addCurrentVertex(O,Re,0,0,I);else if(It==="square"){const lt=N?1:-1;N||this.addCurrentVertex(O,Re,lt,lt,I),this.addCurrentVertex(O,Re,0,0,I),N&&this.addCurrentVertex(O,Re,lt,lt,I)}else It==="round"&&(N&&(this.addCurrentVertex(O,K,0,0,I),this.addCurrentVertex(O,K,1,1,I,!0)),U&&(this.addCurrentVertex(O,ie,-1,-1,I,!0),this.addCurrentVertex(O,ie,0,0,I)));if(ot&&ye<E-1){const lt=O.dist(U);if(lt>2*A){const _t=O.add(U.sub(O)._mult(A/lt)._round());this.updateDistance(O,_t),this.addCurrentVertex(_t,ie,0,0,I),O=_t}}}}addCurrentVertex(r,s,d,f,g,v=!1){const b=s.y*f-s.x,E=-s.y-s.x*f;this.addHalfVertex(r,s.x+s.y*d,s.y-s.x*d,v,!1,d,g),this.addHalfVertex(r,b,E,v,!0,-f,g)}addHalfVertex({x:r,y:s},d,f,g,v,b,E){this.layoutVertexArray.emplaceBack((r<<1)+(g?1:0),(s<<1)+(v?1:0),Math.round(63*d)+128,Math.round(63*f)+128,1+(b===0?0:b<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const T=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,T),E.primitiveLength++),v?this.e2=T:this.e1=T}updateScaledDistance(){if(this.lineClips){const r=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=r*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(r,s){this.distance+=r.dist(s),this.updateScaledDistance()}}Jt(v0,"LineBucket",{omit:["layers","patternFeatures"]});const D6=new xe({"line-cap":new le(ft.layout_line["line-cap"]),"line-join":new le(ft.layout_line["line-join"]),"line-miter-limit":new H(ft.layout_line["line-miter-limit"]),"line-round-limit":new H(ft.layout_line["line-round-limit"]),"line-sort-key":new le(ft.layout_line["line-sort-key"])});var oM={paint:new xe({"line-opacity":new le(ft.paint_line["line-opacity"]),"line-color":new le(ft.paint_line["line-color"]),"line-translate":new H(ft.paint_line["line-translate"]),"line-translate-anchor":new H(ft.paint_line["line-translate-anchor"]),"line-width":new le(ft.paint_line["line-width"]),"line-gap-width":new le(ft.paint_line["line-gap-width"]),"line-offset":new le(ft.paint_line["line-offset"]),"line-blur":new le(ft.paint_line["line-blur"]),"line-dasharray":new le(ft.paint_line["line-dasharray"]),"line-pattern":new le(ft.paint_line["line-pattern"]),"line-gradient":new _e(ft.paint_line["line-gradient"]),"line-trim-offset":new H(ft.paint_line["line-trim-offset"])}),layout:D6};const aM=new class extends le{possiblyEvaluate(a,r){return r=new P(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,transition:r.transition}),super.possiblyEvaluate(a,r)}evaluate(a,r,s,d){return r=be({},r,{zoom:Math.floor(r.zoom)}),super.evaluate(a,r,s,d)}}(oM.paint.properties["line-width"].specification);function sM(a,r){return r>0?r+2*a:a}aM.useIntegerZoom=!0;const z6=qe([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),F6=qe([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),B6=qe([{name:"a_projected_pos",components:4,type:"Float32"}],4);qe([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const N6=qe([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),$6=qe([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);qe([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const lM=qe([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),U6=qe([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);qe([{name:"triangle",components:3,type:"Uint16"}]),qe([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),qe([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),qe([{type:"Float32",name:"offsetX"}]),qe([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Pi=24;const $a=128;function Sb(a,r){const{expression:s}=r;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new P(a+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:f}=s;let g=0;for(;g<d.length&&d[g]<=a;)g++;g=Math.max(0,g-1);let v=g;for(;v<d.length&&d[v]<a+1;)v++;v=Math.min(d.length-1,v);const b=d[g],E=d[v];return s.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:E,interpolationType:f}:{kind:"camera",minZoom:b,maxZoom:E,minSize:s.evaluate(new P(b)),maxSize:s.evaluate(new P(E)),interpolationType:f}}}function _0(a,{uSize:r,uSizeT:s},{lowerSize:d,upperSize:f}){return a.kind==="source"?d/$a:a.kind==="composite"?Zn(d/$a,f/$a,s):r}function Hd(a,r){let s=0,d=0;if(a.kind==="constant")d=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:f,minZoom:g,maxZoom:v}=a,b=f?Me(aa.interpolationFactor(f,r,g,v),0,1):0;a.kind==="camera"?d=Zn(a.minSize,a.maxSize,b):s=b}return{uSizeT:s,uSize:d}}var j6=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:$a,evaluateSizeForFeature:_0,evaluateSizeForZoom:Hd,getSizeData:Sb});function V6(a,r,s){return a.sections.forEach(d=>{d.text=function(f,g,v){const b=g.layout.get("text-transform").evaluate(v,{});return b==="uppercase"?f=f.toLocaleUpperCase():b==="lowercase"&&(f=f.toLocaleLowerCase()),R.applyArabicShaping&&(f=R.applyArabicShaping(f)),f}(d.text,r,s)}),a}const Up={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function G6(a){return a==="︶"||a==="﹈"||a==="︸"||a==="﹄"||a==="﹂"||a==="︾"||a==="︼"||a==="︺"||a==="︘"||a==="﹀"||a==="︐"||a==="︓"||a==="︔"||a==="｀"||a==="￣"||a==="︑"||a==="︒"}function W6(a){return a==="︵"||a==="﹇"||a==="︷"||a==="﹃"||a==="﹁"||a==="︽"||a==="︻"||a==="︹"||a==="︗"||a==="︿"}var cM=br,uM=function(a,r,s,d,f){var g,v,b=8*f-d-1,E=(1<<b)-1,T=E>>1,A=-7,I=s?f-1:0,O=s?-1:1,N=a[r+I];for(I+=O,g=N&(1<<-A)-1,N>>=-A,A+=b;A>0;g=256*g+a[r+I],I+=O,A-=8);for(v=g&(1<<-A)-1,g>>=-A,A+=d;A>0;v=256*v+a[r+I],I+=O,A-=8);if(g===0)g=1-T;else{if(g===E)return v?NaN:1/0*(N?-1:1);v+=Math.pow(2,d),g-=T}return(N?-1:1)*v*Math.pow(2,g-d)},dM=function(a,r,s,d,f,g){var v,b,E,T=8*g-f-1,A=(1<<T)-1,I=A>>1,O=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,N=d?0:g-1,U=d?1:-1,K=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(b=isNaN(r)?1:0,v=A):(v=Math.floor(Math.log(r)/Math.LN2),r*(E=Math.pow(2,-v))<1&&(v--,E*=2),(r+=v+I>=1?O/E:O*Math.pow(2,1-I))*E>=2&&(v++,E/=2),v+I>=A?(b=0,v=A):v+I>=1?(b=(r*E-1)*Math.pow(2,f),v+=I):(b=r*Math.pow(2,I-1)*Math.pow(2,f),v=0));f>=8;a[s+N]=255&b,N+=U,b/=256,f-=8);for(v=v<<f|b,T+=f;T>0;a[s+N]=255&v,N+=U,v/=256,T-=8);a[s+N-U]|=128*K};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function br(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}br.Varint=0,br.Fixed64=1,br.Bytes=2,br.Fixed32=5;var Eb=4294967296,hM=1/Eb,fM=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function js(a){return a.type===br.Bytes?a.readVarint()+a.pos:a.pos+1}function Zd(a,r,s){return s?4294967296*r+(a>>>0):4294967296*(r>>>0)+(a>>>0)}function pM(a,r,s){var d=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));s.realloc(d);for(var f=s.pos-1;f>=a;f--)s.buf[f+d]=s.buf[f]}function q6(a,r){for(var s=0;s<a.length;s++)r.writeVarint(a[s])}function H6(a,r){for(var s=0;s<a.length;s++)r.writeSVarint(a[s])}function Z6(a,r){for(var s=0;s<a.length;s++)r.writeFloat(a[s])}function X6(a,r){for(var s=0;s<a.length;s++)r.writeDouble(a[s])}function K6(a,r){for(var s=0;s<a.length;s++)r.writeBoolean(a[s])}function Y6(a,r){for(var s=0;s<a.length;s++)r.writeFixed32(a[s])}function Q6(a,r){for(var s=0;s<a.length;s++)r.writeSFixed32(a[s])}function J6(a,r){for(var s=0;s<a.length;s++)r.writeFixed64(a[s])}function eN(a,r){for(var s=0;s<a.length;s++)r.writeSFixed64(a[s])}function x0(a,r){return(a[r]|a[r+1]<<8|a[r+2]<<16)+16777216*a[r+3]}function Xd(a,r,s){a[s]=r,a[s+1]=r>>>8,a[s+2]=r>>>16,a[s+3]=r>>>24}function mM(a,r){return(a[r]|a[r+1]<<8|a[r+2]<<16)+(a[r+3]<<24)}br.prototype={destroy:function(){this.buf=null},readFields:function(a,r,s){for(s=s||this.length;this.pos<s;){var d=this.readVarint(),f=d>>3,g=this.pos;this.type=7&d,a(f,r,this),this.pos===g&&this.skip(d)}return r},readMessage:function(a,r){return this.readFields(a,r,this.readVarint()+this.pos)},readFixed32:function(){var a=x0(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=mM(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=x0(this.buf,this.pos)+x0(this.buf,this.pos+4)*Eb;return this.pos+=8,a},readSFixed64:function(){var a=x0(this.buf,this.pos)+mM(this.buf,this.pos+4)*Eb;return this.pos+=8,a},readFloat:function(){var a=uM(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=uM(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var r,s,d=this.buf;return r=127&(s=d[this.pos++]),s<128?r:(r|=(127&(s=d[this.pos++]))<<7,s<128?r:(r|=(127&(s=d[this.pos++]))<<14,s<128?r:(r|=(127&(s=d[this.pos++]))<<21,s<128?r:function(f,g,v){var b,E,T=v.buf;if(b=(112&(E=T[v.pos++]))>>4,E<128||(b|=(127&(E=T[v.pos++]))<<3,E<128)||(b|=(127&(E=T[v.pos++]))<<10,E<128)||(b|=(127&(E=T[v.pos++]))<<17,E<128)||(b|=(127&(E=T[v.pos++]))<<24,E<128)||(b|=(1&(E=T[v.pos++]))<<31,E<128))return Zd(f,b,g);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(s=d[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,r=this.pos;return this.pos=a,a-r>=12&&fM?function(s,d,f){return fM.decode(s.subarray(d,f))}(this.buf,r,a):function(s,d,f){for(var g="",v=d;v<f;){var b,E,T,A=s[v],I=null,O=A>239?4:A>223?3:A>191?2:1;if(v+O>f)break;O===1?A<128&&(I=A):O===2?(192&(b=s[v+1]))==128&&(I=(31&A)<<6|63&b)<=127&&(I=null):O===3?(E=s[v+2],(192&(b=s[v+1]))==128&&(192&E)==128&&((I=(15&A)<<12|(63&b)<<6|63&E)<=2047||I>=55296&&I<=57343)&&(I=null)):O===4&&(E=s[v+2],T=s[v+3],(192&(b=s[v+1]))==128&&(192&E)==128&&(192&T)==128&&((I=(15&A)<<18|(63&b)<<12|(63&E)<<6|63&T)<=65535||I>=1114112)&&(I=null)),I===null?(I=65533,O=1):I>65535&&(I-=65536,g+=String.fromCharCode(I>>>10&1023|55296),I=56320|1023&I),g+=String.fromCharCode(I),v+=O}return g}(this.buf,r,a)},readBytes:function(){var a=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,a);return this.pos=a,r},readPackedVarint:function(a,r){if(this.type!==br.Bytes)return a.push(this.readVarint(r));var s=js(this);for(a=a||[];this.pos<s;)a.push(this.readVarint(r));return a},readPackedSVarint:function(a){if(this.type!==br.Bytes)return a.push(this.readSVarint());var r=js(this);for(a=a||[];this.pos<r;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==br.Bytes)return a.push(this.readBoolean());var r=js(this);for(a=a||[];this.pos<r;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==br.Bytes)return a.push(this.readFloat());var r=js(this);for(a=a||[];this.pos<r;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==br.Bytes)return a.push(this.readDouble());var r=js(this);for(a=a||[];this.pos<r;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==br.Bytes)return a.push(this.readFixed32());var r=js(this);for(a=a||[];this.pos<r;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==br.Bytes)return a.push(this.readSFixed32());var r=js(this);for(a=a||[];this.pos<r;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==br.Bytes)return a.push(this.readFixed64());var r=js(this);for(a=a||[];this.pos<r;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==br.Bytes)return a.push(this.readSFixed64());var r=js(this);for(a=a||[];this.pos<r;)a.push(this.readSFixed64());return a},skip:function(a){var r=7&a;if(r===br.Varint)for(;this.buf[this.pos++]>127;);else if(r===br.Bytes)this.pos=this.readVarint()+this.pos;else if(r===br.Fixed32)this.pos+=4;else{if(r!==br.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(a,r){this.writeVarint(a<<3|r)},realloc:function(a){for(var r=this.length||16;r<this.pos+a;)r*=2;if(r!==this.length){var s=new Uint8Array(r);s.set(this.buf),this.buf=s,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),Xd(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),Xd(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),Xd(this.buf,-1&a,this.pos),Xd(this.buf,Math.floor(a*hM),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),Xd(this.buf,-1&a,this.pos),Xd(this.buf,Math.floor(a*hM),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(r,s){var d,f;if(r>=0?(d=r%4294967296|0,f=r/4294967296|0):(f=~(-r/4294967296),4294967295^(d=~(-r%4294967296))?d=d+1|0:(d=0,f=f+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(g,v,b){b.buf[b.pos++]=127&g|128,g>>>=7,b.buf[b.pos++]=127&g|128,g>>>=7,b.buf[b.pos++]=127&g|128,g>>>=7,b.buf[b.pos++]=127&g|128,b.buf[b.pos]=127&(g>>>=7)}(d,0,s),function(g,v){var b=(7&g)<<4;v.buf[v.pos++]|=b|((g>>>=3)?128:0),g&&(v.buf[v.pos++]=127&g|((g>>>=7)?128:0),g&&(v.buf[v.pos++]=127&g|((g>>>=7)?128:0),g&&(v.buf[v.pos++]=127&g|((g>>>=7)?128:0),g&&(v.buf[v.pos++]=127&g|((g>>>=7)?128:0),g&&(v.buf[v.pos++]=127&g)))))}(f,s)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var r=this.pos;this.pos=function(d,f,g){for(var v,b,E=0;E<f.length;E++){if((v=f.charCodeAt(E))>55295&&v<57344){if(!b){v>56319||E+1===f.length?(d[g++]=239,d[g++]=191,d[g++]=189):b=v;continue}if(v<56320){d[g++]=239,d[g++]=191,d[g++]=189,b=v;continue}v=b-55296<<10|v-56320|65536,b=null}else b&&(d[g++]=239,d[g++]=191,d[g++]=189,b=null);v<128?d[g++]=v:(v<2048?d[g++]=v>>6|192:(v<65536?d[g++]=v>>12|224:(d[g++]=v>>18|240,d[g++]=v>>12&63|128),d[g++]=v>>6&63|128),d[g++]=63&v|128)}return g}(this.buf,a,this.pos);var s=this.pos-r;s>=128&&pM(r,s,this),this.pos=r-1,this.writeVarint(s),this.pos+=s},writeFloat:function(a){this.realloc(4),dM(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),dM(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var r=a.length;this.writeVarint(r),this.realloc(r);for(var s=0;s<r;s++)this.buf[this.pos++]=a[s]},writeRawMessage:function(a,r){this.pos++;var s=this.pos;a(r,this);var d=this.pos-s;d>=128&&pM(s,d,this),this.pos=s-1,this.writeVarint(d),this.pos+=d},writeMessage:function(a,r,s){this.writeTag(a,br.Bytes),this.writeRawMessage(r,s)},writePackedVarint:function(a,r){r.length&&this.writeMessage(a,q6,r)},writePackedSVarint:function(a,r){r.length&&this.writeMessage(a,H6,r)},writePackedBoolean:function(a,r){r.length&&this.writeMessage(a,K6,r)},writePackedFloat:function(a,r){r.length&&this.writeMessage(a,Z6,r)},writePackedDouble:function(a,r){r.length&&this.writeMessage(a,X6,r)},writePackedFixed32:function(a,r){r.length&&this.writeMessage(a,Y6,r)},writePackedSFixed32:function(a,r){r.length&&this.writeMessage(a,Q6,r)},writePackedFixed64:function(a,r){r.length&&this.writeMessage(a,J6,r)},writePackedSFixed64:function(a,r){r.length&&this.writeMessage(a,eN,r)},writeBytesField:function(a,r){this.writeTag(a,br.Bytes),this.writeBytes(r)},writeFixed32Field:function(a,r){this.writeTag(a,br.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(a,r){this.writeTag(a,br.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(a,r){this.writeTag(a,br.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(a,r){this.writeTag(a,br.Fixed64),this.writeSFixed64(r)},writeVarintField:function(a,r){this.writeTag(a,br.Varint),this.writeVarint(r)},writeSVarintField:function(a,r){this.writeTag(a,br.Varint),this.writeSVarint(r)},writeStringField:function(a,r){this.writeTag(a,br.Bytes),this.writeString(r)},writeFloatField:function(a,r){this.writeTag(a,br.Fixed32),this.writeFloat(r)},writeDoubleField:function(a,r){this.writeTag(a,br.Fixed64),this.writeDouble(r)},writeBooleanField:function(a,r){this.writeVarintField(a,!!r)}};var b0=Z(cM);const Tb=3;function tN(a,r,s){r.glyphs=[],a===1&&s.readMessage(nN,r)}function nN(a,r,s){if(a===3){const{id:d,bitmap:f,width:g,height:v,left:b,top:E,advance:T}=s.readMessage(rN,{});r.glyphs.push({id:d,bitmap:new Us({width:g+2*Tb,height:v+2*Tb},f),metrics:{width:g,height:v,left:b,top:E,advance:T}})}else a===4?r.ascender=s.readSVarint():a===5&&(r.descender=s.readSVarint())}function rN(a,r,s){a===1?r.id=s.readVarint():a===2?r.bitmap=s.readBytes():a===3?r.width=s.readVarint():a===4?r.height=s.readVarint():a===5?r.left=s.readSVarint():a===6?r.top=s.readSVarint():a===7&&(r.advance=s.readVarint())}const gM=Tb;function Cb(a){let r=0,s=0;for(const v of a)r+=v.w*v.h,s=Math.max(s,v.w);a.sort((v,b)=>b.h-v.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),s),h:1/0}];let f=0,g=0;for(const v of a)for(let b=d.length-1;b>=0;b--){const E=d[b];if(!(v.w>E.w||v.h>E.h)){if(v.x=E.x,v.y=E.y,g=Math.max(g,v.y+v.h),f=Math.max(f,v.x+v.w),v.w===E.w&&v.h===E.h){const T=d.pop();b<d.length&&(d[b]=T)}else v.h===E.h?(E.x+=v.w,E.w-=v.w):v.w===E.w?(E.y+=v.h,E.h-=v.h):(d.push({x:E.x+v.w,y:E.y,w:E.w-v.w,h:v.h}),E.y+=v.h,E.h-=v.h);break}}return{w:f,h:g,fill:r/(f*g)||0}}const po=1;class Rb{constructor(r,{pixelRatio:s,version:d,stretchX:f,stretchY:g,content:v}){this.paddedRect=r,this.pixelRatio=s,this.stretchX=f,this.stretchY=g,this.content=v,this.version=d}get tl(){return[this.paddedRect.x+po,this.paddedRect.y+po]}get br(){return[this.paddedRect.x+this.paddedRect.w-po,this.paddedRect.y+this.paddedRect.h-po]}get displaySize(){return[(this.paddedRect.w-2*po)/this.pixelRatio,(this.paddedRect.h-2*po)/this.pixelRatio]}}class yM{constructor(r,s){const d={},f={};this.haveRenderCallbacks=[];const g=[];this.addImages(r,d,g),this.addImages(s,f,g);const{w:v,h:b}=Cb(g),E=new Ro({width:v||1,height:b||1});for(const T in r){const A=r[T],I=d[T].paddedRect;Ro.copy(A.data,E,{x:0,y:0},{x:I.x+po,y:I.y+po},A.data)}for(const T in s){const A=s[T],I=f[T].paddedRect,O=I.x+po,N=I.y+po,U=A.data.width,K=A.data.height;Ro.copy(A.data,E,{x:0,y:0},{x:O,y:N},A.data),Ro.copy(A.data,E,{x:0,y:K-1},{x:O,y:N-1},{width:U,height:1}),Ro.copy(A.data,E,{x:0,y:0},{x:O,y:N+K},{width:U,height:1}),Ro.copy(A.data,E,{x:U-1,y:0},{x:O-1,y:N},{width:1,height:K}),Ro.copy(A.data,E,{x:0,y:0},{x:O+U,y:N},{width:1,height:K})}this.image=E,this.iconPositions=d,this.patternPositions=f}addImages(r,s,d){for(const f in r){const g=r[f],v={x:0,y:0,w:g.data.width+2*po,h:g.data.height+2*po};d.push(v),s[f]=new Rb(v,g),g.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(r,s){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(d=>r.hasImage(d)),r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in r.updatedImages)this.patchUpdatedImage(this.iconPositions[d],r.getImage(d),s),this.patchUpdatedImage(this.patternPositions[d],r.getImage(d),s)}patchUpdatedImage(r,s,d){if(!r||!s||r.version===s.version)return;r.version=s.version;const[f,g]=r.tl;d.update(s.data,void 0,{x:f,y:g})}}Jt(Rb,"ImagePosition"),Jt(yM,"ImageAtlas");const qo={horizontal:1,vertical:2,horizontalOnly:3},vM=-17;class jp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,s){const d=new jp;return d.scale=r||1,d.fontStack=s,d}static forImage(r){const s=new jp;return s.imageName=r,s}}class Kd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,s){const d=new Kd;for(let f=0;f<r.sections.length;f++){const g=r.sections[f];g.image?d.addImageSection(g):d.addTextSection(g,s)}return d}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSections(){return this.sections}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(r){this.text=function(s,d){let f="";for(let g=0;g<s.length;g++){const v=s.charCodeAt(g+1)||null,b=s.charCodeAt(g-1)||null;f+=!d&&(v&&Ky(v)&&!Up[s[g+1]]||b&&Ky(b)&&!Up[s[g-1]])||!Up[s[g]]?s[g]:Up[s[g]]}return f}(this.text,r)}trim(){let r=0;for(let d=0;d<this.text.length&&w0[this.text.charCodeAt(d)];d++)r++;let s=this.text.length;for(let d=this.text.length-1;d>=0&&d>=r&&w0[this.text.charCodeAt(d)];d--)s--;this.text=this.text.substring(r,s),this.sectionIndex=this.sectionIndex.slice(r,s)}substring(r,s){const d=new Kd;return d.text=this.text.substring(r,s),d.sectionIndex=this.sectionIndex.slice(r,s),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,s)=>Math.max(r,this.sections[s].scale),0)}addTextSection(r,s){this.text+=r.text,this.sections.push(jp.forText(r.scale,r.fontStack||s));const d=this.sections.length-1;for(let f=0;f<r.text.length;++f)this.sectionIndex.push(d)}addImageSection(r){const s=r.image?r.image.name:"";if(s.length===0)return void Kt("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(jp.forImage(s)),this.sectionIndex.push(this.sections.length-1)):Kt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Mb(a,r,s,d,f,g,v,b,E,T,A,I,O,N,U){const K=Kd.fromFeature(a,f);I===qo.vertical&&K.verticalizePunctuation(O);let ie=[];const ye=function(Pe,ot,tt,pt,It,lt){if(!Pe)return[];const _t=[],xt=function(Vt,tn,Wt,Rn,Bt,dn){let Mn=0;for(let Yn=0;Yn<Vt.length();Yn++){const An=Vt.getSection(Yn);Mn+=_M(Vt.getCharCode(Yn),An,Rn,Bt,tn,dn)}return Mn/Math.max(1,Math.ceil(Mn/Wt))}(Pe,ot,tt,pt,It,lt),Tt=Pe.text.indexOf("​")>=0;let zt=0;for(let Vt=0;Vt<Pe.length();Vt++){const tn=Pe.getSection(Vt),Wt=Pe.getCharCode(Vt);if(w0[Wt]||(zt+=_M(Wt,tn,pt,It,ot,lt)),Vt<Pe.length()-1){const Rn=!((ht=Wt)<11904||!(qt["Bopomofo Extended"](ht)||qt.Bopomofo(ht)||qt["CJK Compatibility Forms"](ht)||qt["CJK Compatibility Ideographs"](ht)||qt["CJK Compatibility"](ht)||qt["CJK Radicals Supplement"](ht)||qt["CJK Strokes"](ht)||qt["CJK Symbols and Punctuation"](ht)||qt["CJK Unified Ideographs Extension A"](ht)||qt["CJK Unified Ideographs"](ht)||qt["Enclosed CJK Letters and Months"](ht)||qt["Halfwidth and Fullwidth Forms"](ht)||qt.Hiragana(ht)||qt["Ideographic Description Characters"](ht)||qt["Kangxi Radicals"](ht)||qt["Katakana Phonetic Extensions"](ht)||qt.Katakana(ht)||qt["Vertical Forms"](ht)||qt["Yi Radicals"](ht)||qt["Yi Syllables"](ht)));(iN[Wt]||Rn||tn.imageName)&&_t.push(bM(Vt+1,zt,xt,_t,oN(Wt,Pe.getCharCode(Vt+1),Rn&&Tt),!1))}}var ht;return wM(bM(Pe.length(),zt,xt,_t,0,!0))}(K,T,g,r,d,N),{processBidirectionalText:Re,processStyledBidirectionalText:ve}=R;if(Re&&K.sections.length===1){const Pe=Re(K.toString(),ye);for(const ot of Pe){const tt=new Kd;tt.text=ot,tt.sections=K.sections;for(let pt=0;pt<ot.length;pt++)tt.sectionIndex.push(0);ie.push(tt)}}else if(ve){const Pe=ve(K.text,K.sectionIndex,ye);for(const ot of Pe){const tt=new Kd;tt.text=ot[0],tt.sectionIndex=ot[1],tt.sections=K.sections,ie.push(tt)}}else ie=function(Pe,ot){const tt=[],pt=Pe.text;let It=0;for(const lt of ot)tt.push(Pe.substring(It,lt)),It=lt;return It<pt.length&&tt.push(Pe.substring(It,pt.length)),tt}(K,ye);const Ee=[],Le={positionedLines:Ee,text:K.toString(),top:A[1],bottom:A[1],left:A[0],right:A[0],writingMode:I,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Pe,ot,tt,pt,It,lt,_t,xt,Tt,zt,ht,Vt){let tn=0,Wt=0,Rn=0;const Bt=xt==="right"?1:xt==="left"?0:.5;let dn=!1;for(const kn of It){const Pn=kn.getSections();for(const gr of Pn){if(gr.imageName)continue;const wr=ot[gr.fontStack];if(wr&&(dn=wr.ascender!==void 0&&wr.descender!==void 0,!dn))break}if(!dn)break}let Mn=0;for(const kn of It){kn.trim();const Pn=kn.getMaxScale(),gr=(Pn-1)*Pi,wr={positionedGlyphs:[],lineOffset:0};Pe.positionedLines[Mn]=wr;const Sr=wr.positionedGlyphs;let yr=0;if(!kn.length()){Wt+=lt,++Mn;continue}let Fr=0,jr=0;for(let vr=0;vr<kn.length();vr++){const pi=kn.getSection(vr),si=kn.getSectionIndex(vr),Nr=kn.getCharCode(vr);let Jn=pi.scale,li=null,Er=null,io=null,ci=Pi,Ii=0;const Ei=!(Tt===qo.horizontal||!ht&&!mp(Nr)||ht&&(w0[Nr]||(Yn=Nr,qt.Arabic(Yn)||qt["Arabic Supplement"](Yn)||qt["Arabic Extended-A"](Yn)||qt["Arabic Presentation Forms-A"](Yn)||qt["Arabic Presentation Forms-B"](Yn))));if(pi.imageName){const oo=pt[pi.imageName];if(!oo)continue;io=pi.imageName,Pe.iconsInText=Pe.iconsInText||!0,Er=oo.paddedRect;const Ti=oo.displaySize;Jn=Jn*Pi/Vt,li={width:Ti[0],height:Ti[1],left:po,top:-gM,advance:Ei?Ti[1]:Ti[0],localGlyph:!1},Ii=dn?-li.height*Jn:vM+Pn*Pi-Ti[1]*Jn,ci=li.advance;const Va=(Ei?Ti[0]:Ti[1])*Jn-Pi*Pn;Va>0&&Va>yr&&(yr=Va)}else{const oo=tt[pi.fontStack];if(!oo)continue;oo[Nr]&&(Er=oo[Nr]);const Ti=ot[pi.fontStack];if(!Ti)continue;const Va=Ti.glyphs[Nr];if(!Va)continue;if(li=Va.metrics,ci=Nr!==8203?Pi:0,dn){const rh=Ti.ascender!==void 0?Math.abs(Ti.ascender):0,Qp=Ti.descender!==void 0?Math.abs(Ti.descender):0,Jp=(rh+Qp)*Jn;Fr<Jp&&(Fr=Jp,jr=(rh-Qp)/2*Jn),Ii=-rh*Jn}else Ii=vM+(Pn-Jn)*Pi}Ei?(Pe.verticalizable=!0,Sr.push({glyph:Nr,imageName:io,x:tn,y:Wt+Ii,vertical:Ei,scale:Jn,localGlyph:li.localGlyph,fontStack:pi.fontStack,sectionIndex:si,metrics:li,rect:Er}),tn+=ci*Jn+zt):(Sr.push({glyph:Nr,imageName:io,x:tn,y:Wt+Ii,vertical:Ei,scale:Jn,localGlyph:li.localGlyph,fontStack:pi.fontStack,sectionIndex:si,metrics:li,rect:Er}),tn+=li.advance*Jn+zt)}Sr.length!==0&&(Rn=Math.max(tn-zt,Rn),dn?SM(Sr,Bt,yr,jr,lt*Pn/2):SM(Sr,Bt,yr,0,lt/2)),tn=0;const ai=lt*Pn+yr;wr.lineOffset=Math.max(yr,gr),Wt+=ai,++Mn}var Yn;const An=Wt,{horizontalAlign:bn,verticalAlign:Mr}=Ab(_t);(function(kn,Pn,gr,wr,Sr,yr){const Fr=(Pn-gr)*Sr,jr=-yr*wr;for(const ai of kn)for(const vr of ai.positionedGlyphs)vr.x+=Fr,vr.y+=jr})(Pe.positionedLines,Bt,bn,Mr,Rn,An),Pe.top+=-Mr*An,Pe.bottom=Pe.top+An,Pe.left+=-bn*Rn,Pe.right=Pe.left+Rn,Pe.hasBaseline=dn}(Le,r,s,d,ie,v,b,E,I,T,O,U),!function(Pe){for(const ot of Pe)if(ot.positionedGlyphs.length!==0)return!1;return!0}(Ee)&&Le}const w0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},iN={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function _M(a,r,s,d,f,g){if(r.imageName){const v=d[r.imageName];return v?v.displaySize[0]*r.scale*Pi/g+f:0}{const v=s[r.fontStack],b=v&&v.glyphs[a];return b?b.metrics.advance*r.scale+f:0}}function xM(a,r,s,d){const f=Math.pow(a-r,2);return d?a<r?f/2:2*f:f+Math.abs(s)*s}function oN(a,r,s){let d=0;return a===10&&(d-=1e4),s&&(d+=150),a!==40&&a!==65288||(d+=50),r!==41&&r!==65289||(d+=50),d}function bM(a,r,s,d,f,g){let v=null,b=xM(r,s,f,g);for(const E of d){const T=xM(r-E.x,s,f,g)+E.badness;T<=b&&(v=E,b=T)}return{index:a,x:r,priorBreak:v,badness:b}}function wM(a){return a?wM(a.priorBreak).concat(a.index):[]}function Ab(a){let r=.5,s=.5;switch(a){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:r,verticalAlign:s}}function SM(a,r,s,d,f){if(!(r||s||d||f))return;const g=a.length-1,v=a[g],b=(v.x+v.metrics.advance*v.scale)*r;for(let E=0;E<=g;E++)a[E].x-=b,a[E].y+=s+d+f}function aN(a,r,s){const{horizontalAlign:d,verticalAlign:f}=Ab(s),g=r[0]-a.displaySize[0]*d,v=r[1]-a.displaySize[1]*f;return{image:a,top:v,bottom:v+a.displaySize[1],left:g,right:g+a.displaySize[0]}}function EM(a,r,s,d,f,g){const v=a.image;let b;if(v.content){const ie=v.content,ye=v.pixelRatio||1;b=[ie[0]/ye,ie[1]/ye,v.displaySize[0]-ie[2]/ye,v.displaySize[1]-ie[3]/ye]}const E=r.left*g,T=r.right*g;let A,I,O,N;s==="width"||s==="both"?(N=f[0]+E-d[3],I=f[0]+T+d[1]):(N=f[0]+(E+T-v.displaySize[0])/2,I=N+v.displaySize[0]);const U=r.top*g,K=r.bottom*g;return s==="height"||s==="both"?(A=f[1]+U-d[0],O=f[1]+K+d[2]):(A=f[1]+(U+K-v.displaySize[1])/2,O=A+v.displaySize[1]),{image:v,top:A,right:I,bottom:O,left:N,collisionPadding:b}}class Vs extends J{constructor(r,s,d,f,g){super(r,s),this.angle=f,this.z=d,g!==void 0&&(this.segment=g)}clone(){return new Vs(this.x,this.y,this.z,this.angle,this.segment)}}function TM(a,r,s,d,f){if(r.segment===void 0)return!0;let g=r,v=r.segment+1,b=0;for(;b>-s/2;){if(v--,v<0)return!1;b-=a[v].dist(g),g=a[v]}b+=a[v].dist(a[v+1]),v++;const E=[];let T=0;for(;b<s/2;){const A=a[v],I=a[v+1];if(!I)return!1;let O=a[v-1].angleTo(A)-A.angleTo(I);for(O=Math.abs((O+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:b,angleDelta:O}),T+=O;b-E[0].distance>d;)T-=E.shift().angleDelta;if(T>f)return!1;v++,b+=A.dist(I)}return!0}function CM(a){let r=0;for(let s=0;s<a.length-1;s++)r+=a[s].dist(a[s+1]);return r}function RM(a,r,s){return a?.6*r*s:0}function MM(a,r){return Math.max(a?a.right-a.left:0,r?r.right-r.left:0)}function sN(a,r,s,d,f,g){const v=RM(s,f,g),b=MM(s,d)*g;let E=0;const T=CM(a)/2;for(let A=0;A<a.length-1;A++){const I=a[A],O=a[A+1],N=I.dist(O);if(E+N>T){const U=(T-E)/N,K=Zn(I.x,O.x,U),ie=Zn(I.y,O.y,U),ye=new Vs(K,ie,0,O.angleTo(I),A);return!v||TM(a,ye,b,v,r)?ye:void 0}E+=N}}function lN(a,r,s,d,f,g,v,b,E){const T=RM(d,g,v),A=MM(d,f),I=A*v,O=a[0].x===0||a[0].x===E||a[0].y===0||a[0].y===E;return r-I<r/4&&(r=I+r/4),AM(a,O?r/2*b%r:(A/2+2*g)*v*b%r,r,T,s,I,O,!1,E)}function AM(a,r,s,d,f,g,v,b,E){const T=g/2,A=CM(a);let I=0,O=r-s,N=[];for(let U=0;U<a.length-1;U++){const K=a[U],ie=a[U+1],ye=K.dist(ie),Re=ie.angleTo(K);for(;O+s<I+ye;){O+=s;const ve=(O-I)/ye,Ee=Zn(K.x,ie.x,ve),Le=Zn(K.y,ie.y,ve);if(Ee>=0&&Ee<E&&Le>=0&&Le<E&&O-T>=0&&O+T<=A){const Pe=new Vs(Ee,Le,0,Re,U);Pe._round(),d&&!TM(a,Pe,g,d,f)||N.push(Pe)}}I+=ye}return b||N.length||v||(N=AM(a,I/2,s,d,f,g,v,!0,E)),N}function kM(a,r,s,d,f){const g=[];for(let v=0;v<a.length;v++){const b=a[v];let E;for(let T=0;T<b.length-1;T++){let A=b[T],I=b[T+1];A.x<r&&I.x<r||(A.x<r?A=new J(r,A.y+(r-A.x)/(I.x-A.x)*(I.y-A.y))._round():I.x<r&&(I=new J(r,A.y+(r-A.x)/(I.x-A.x)*(I.y-A.y))._round()),A.y<s&&I.y<s||(A.y<s?A=new J(A.x+(s-A.y)/(I.y-A.y)*(I.x-A.x),s)._round():I.y<s&&(I=new J(A.x+(s-A.y)/(I.y-A.y)*(I.x-A.x),s)._round()),A.x>=d&&I.x>=d||(A.x>=d?A=new J(d,A.y+(d-A.x)/(I.x-A.x)*(I.y-A.y))._round():I.x>=d&&(I=new J(d,A.y+(d-A.x)/(I.x-A.x)*(I.y-A.y))._round()),A.y>=f&&I.y>=f||(A.y>=f?A=new J(A.x+(f-A.y)/(I.y-A.y)*(I.x-A.x),f)._round():I.y>=f&&(I=new J(A.x+(f-A.y)/(I.y-A.y)*(I.x-A.x),f)._round()),E&&A.equals(E[E.length-1])||(E=[A],g.push(E)),E.push(I)))))}}return g}Jt(Vs,"Anchor");const Vp=1e20;function PM(a,r,s,d,f,g,v,b,E){for(let T=r;T<r+d;T++)IM(a,s*g+T,g,f,v,b,E);for(let T=s;T<s+f;T++)IM(a,T*g+r,1,d,v,b,E)}function IM(a,r,s,d,f,g,v){g[0]=0,v[0]=-Vp,v[1]=Vp,f[0]=a[r];for(let b=1,E=0,T=0;b<d;b++){f[b]=a[r+b*s];const A=b*b;do{const I=g[E];T=(f[b]-f[I]+A-I*I)/(b-I)/2}while(T<=v[E]&&--E>-1);E++,g[E]=b,v[E]=T,v[E+1]=Vp}for(let b=0,E=0;b<d;b++){for(;v[E+1]<b;)E++;const T=g[E],A=b-T;a[r+b*s]=f[T]+A*A}}const Ua=2,kb={none:0,ideographs:1,all:2};class Yd{constructor(r,s,d){this.requestManager=r,this.localGlyphMode=s,this.localFontFamily=d,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(r){this.url=r}getGlyphs(r,s){const d=[];for(const f in r)for(const g of r[f])d.push({stack:f,id:g});Ve(d,({stack:f,id:g},v)=>{let b=this.entries[f];b||(b=this.entries[f]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let E=b.glyphs[g];if(E!==void 0)return void v(null,{stack:f,id:g,glyph:E});if(E=this._tinySDF(b,f,g),E)return b.glyphs[g]=E,void v(null,{stack:f,id:g,glyph:E});const T=Math.floor(g/256);if(256*T>65535)return void v(new Error("glyphs > 65535 not supported"));if(b.ranges[T])return void v(null,{stack:f,id:g,glyph:E});let A=b.requests[T];A||(A=b.requests[T]=[],Yd.loadGlyphRange(f,T,this.url,this.requestManager,(I,O)=>{if(O){b.ascender=O.ascender,b.descender=O.descender;for(const N in O.glyphs)this._doesCharSupportLocalGlyph(+N)||(b.glyphs[+N]=O.glyphs[+N]);b.ranges[T]=!0}for(const N of A)N(I,O);delete b.requests[T]})),A.push((I,O)=>{I?v(I):O&&v(null,{stack:f,id:g,glyph:O.glyphs[g]||null})})},(f,g)=>{if(f)s(f);else if(g){const v={};for(const{stack:b,id:E,glyph:T}of g)v[b]===void 0&&(v[b]={}),v[b].glyphs===void 0&&(v[b].glyphs={}),v[b].glyphs[E]=T&&{id:T.id,bitmap:T.bitmap.clone(),metrics:T.metrics},v[b].ascender=this.entries[b].ascender,v[b].descender=this.entries[b].descender;s(null,v)}})}_doesCharSupportLocalGlyph(r){return this.localGlyphMode!==kb.none&&(this.localGlyphMode===kb.all?!!this.localFontFamily:!!this.localFontFamily&&(qt["CJK Unified Ideographs"](r)||qt["Hangul Syllables"](r)||qt.Hiragana(r)||qt.Katakana(r)||qt["CJK Symbols and Punctuation"](r)))}_tinySDF(r,s,d){const f=this.localFontFamily;if(!f||!this._doesCharSupportLocalGlyph(d))return;let g=r.tinySDF;if(!g){let K="400";/bold/i.test(s)?K="900":/medium/i.test(s)?K="500":/light/i.test(s)&&(K="200"),g=r.tinySDF=new Yd.TinySDF({fontFamily:f,fontWeight:K,fontSize:24*Ua,buffer:3*Ua,radius:8*Ua}),g.fontWeight=K}if(this.localGlyphs[g.fontWeight][d])return this.localGlyphs[g.fontWeight][d];const v=String.fromCharCode(d),{data:b,width:E,height:T,glyphWidth:A,glyphHeight:I,glyphLeft:O,glyphTop:N,glyphAdvance:U}=g.draw(v);return this.localGlyphs[g.fontWeight][d]={id:d,bitmap:new Us({width:E,height:T},b),metrics:{width:A/Ua,height:I/Ua,left:O/Ua,top:N/Ua-27,advance:U/Ua,localGlyph:!0}}}}Yd.loadGlyphRange=function(a,r,s,d,f){const g=256*r,v=g+255,b=d.transformRequest(d.normalizeGlyphsURL(s).replace("{fontstack}",a).replace("{range}",`${g}-${v}`),Ut.Glyphs);dt(b,(E,T)=>{if(E)f(E);else if(T){const A={},I=function(O){return new b0(O).readFields(tN,{})}(T);for(const O of I.glyphs)A[O.id]=O;f(null,{glyphs:A,ascender:I.ascender,descender:I.descender})}})},Yd.TinySDF=class{constructor({fontSize:a=24,buffer:r=3,radius:s=8,cutoff:d=.25,fontFamily:f="sans-serif",fontWeight:g="normal",fontStyle:v="normal"}={}){this.buffer=r,this.cutoff=d,this.radius=s;const b=this.size=a+4*r,E=this._createCanvas(b),T=this.ctx=E.getContext("2d",{willReadFrequently:!0});T.font=`${v} ${g} ${a}px ${f}`,T.textBaseline="alphabetic",T.textAlign="left",T.fillStyle="black",this.gridOuter=new Float64Array(b*b),this.gridInner=new Float64Array(b*b),this.f=new Float64Array(b),this.z=new Float64Array(b+1),this.v=new Uint16Array(b)}_createCanvas(a){const r=document.createElement("canvas");return r.width=r.height=a,r}draw(a){const{width:r,actualBoundingBoxAscent:s,actualBoundingBoxDescent:d,actualBoundingBoxLeft:f,actualBoundingBoxRight:g}=this.ctx.measureText(a),v=Math.ceil(s),b=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(g-f))),E=Math.min(this.size-this.buffer,v+Math.ceil(d)),T=b+2*this.buffer,A=E+2*this.buffer,I=Math.max(T*A,0),O=new Uint8ClampedArray(I),N={data:O,width:T,height:A,glyphWidth:b,glyphHeight:E,glyphTop:v,glyphLeft:0,glyphAdvance:r};if(b===0||E===0)return N;const{ctx:U,buffer:K,gridInner:ie,gridOuter:ye}=this;U.clearRect(K,K,b,E),U.fillText(a,K,K+v);const Re=U.getImageData(K,K,b,E);ye.fill(Vp,0,I),ie.fill(0,0,I);for(let ve=0;ve<E;ve++)for(let Ee=0;Ee<b;Ee++){const Le=Re.data[4*(ve*b+Ee)+3]/255;if(Le===0)continue;const Pe=(ve+K)*T+Ee+K;if(Le===1)ye[Pe]=0,ie[Pe]=Vp;else{const ot=.5-Le;ye[Pe]=ot>0?ot*ot:0,ie[Pe]=ot<0?ot*ot:0}}PM(ye,0,0,T,A,T,this.f,this.v,this.z),PM(ie,K,K,b,E,T,this.f,this.v,this.z);for(let ve=0;ve<I;ve++){const Ee=Math.sqrt(ye[ve])-Math.sqrt(ie[ve]);O[ve]=Math.round(255-255*(Ee/this.radius+this.cutoff))}return N}};const Qd=po;function LM(a,r,s,d){const f=[],g=a.image,v=g.pixelRatio,b=g.paddedRect.w-2*Qd,E=g.paddedRect.h-2*Qd,T=a.right-a.left,A=a.bottom-a.top,I=g.stretchX||[[0,b]],O=g.stretchY||[[0,E]],N=(lt,_t)=>lt+_t[1]-_t[0],U=I.reduce(N,0),K=O.reduce(N,0),ie=b-U,ye=E-K;let Re=0,ve=U,Ee=0,Le=K,Pe=0,ot=ie,tt=0,pt=ye;if(g.content&&d){const lt=g.content;Re=S0(I,0,lt[0]),Ee=S0(O,0,lt[1]),ve=S0(I,lt[0],lt[2]),Le=S0(O,lt[1],lt[3]),Pe=lt[0]-Re,tt=lt[1]-Ee,ot=lt[2]-lt[0]-ve,pt=lt[3]-lt[1]-Le}const It=(lt,_t,xt,Tt)=>{const zt=E0(lt.stretch-Re,ve,T,a.left),ht=T0(lt.fixed-Pe,ot,lt.stretch,U),Vt=E0(_t.stretch-Ee,Le,A,a.top),tn=T0(_t.fixed-tt,pt,_t.stretch,K),Wt=E0(xt.stretch-Re,ve,T,a.left),Rn=T0(xt.fixed-Pe,ot,xt.stretch,U),Bt=E0(Tt.stretch-Ee,Le,A,a.top),dn=T0(Tt.fixed-tt,pt,Tt.stretch,K),Mn=new J(zt,Vt),Yn=new J(Wt,Vt),An=new J(Wt,Bt),bn=new J(zt,Bt),Mr=new J(ht/v,tn/v),kn=new J(Rn/v,dn/v),Pn=r*Math.PI/180;if(Pn){const Sr=Math.sin(Pn),yr=Math.cos(Pn),Fr=[yr,-Sr,Sr,yr];Mn._matMult(Fr),Yn._matMult(Fr),bn._matMult(Fr),An._matMult(Fr)}const gr=lt.stretch+lt.fixed,wr=_t.stretch+_t.fixed;return{tl:Mn,tr:Yn,bl:bn,br:An,tex:{x:g.paddedRect.x+Qd+gr,y:g.paddedRect.y+Qd+wr,w:xt.stretch+xt.fixed-gr,h:Tt.stretch+Tt.fixed-wr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Mr,pixelOffsetBR:kn,minFontScaleX:ot/v/T,minFontScaleY:pt/v/A,isSDF:s}};if(d&&(g.stretchX||g.stretchY)){const lt=OM(I,ie,U),_t=OM(O,ye,K);for(let xt=0;xt<lt.length-1;xt++){const Tt=lt[xt],zt=lt[xt+1];for(let ht=0;ht<_t.length-1;ht++)f.push(It(Tt,_t[ht],zt,_t[ht+1]))}}else f.push(It({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:E+1}));return f}function S0(a,r,s){let d=0;for(const f of a)d+=Math.max(r,Math.min(s,f[1]))-Math.max(r,Math.min(s,f[0]));return d}function OM(a,r,s){const d=[{fixed:-Qd,stretch:0}];for(const[f,g]of a){const v=d[d.length-1];d.push({fixed:f-v.stretch,stretch:v.stretch}),d.push({fixed:f-v.stretch,stretch:v.stretch+(g-f)})}return d.push({fixed:r+Qd,stretch:s}),d}function E0(a,r,s,d){return a/r*s+d}function T0(a,r,s,d){return a-r*s/d}function cN(a,r,s,d){const f=r+a.positionedLines[d].lineOffset;return d===0?s+f/2:s+(f+(r+a.positionedLines[d-1].lineOffset))/2}class uN{constructor(r=[],s=dN){if(this.data=r,this.length=this.data.length,this.compare=s,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:s,compare:d}=this,f=s[r];for(;r>0;){const g=r-1>>1,v=s[g];if(d(f,v)>=0)break;s[r]=v,r=g}s[r]=f}_down(r){const{data:s,compare:d}=this,f=this.length>>1,g=s[r];for(;r<f;){let v=1+(r<<1),b=s[v];const E=v+1;if(E<this.length&&d(s[E],b)<0&&(v=E,b=s[E]),d(b,g)>=0)break;s[r]=b,r=v}s[r]=g}}function dN(a,r){return a<r?-1:a>r?1:0}function hN(a,r=1,s=!1){let d=1/0,f=1/0,g=-1/0,v=-1/0;const b=a[0];for(let N=0;N<b.length;N++){const U=b[N];(!N||U.x<d)&&(d=U.x),(!N||U.y<f)&&(f=U.y),(!N||U.x>g)&&(g=U.x),(!N||U.y>v)&&(v=U.y)}const E=Math.min(g-d,v-f);let T=E/2;const A=new uN([],fN);if(E===0)return new J(d,f);for(let N=d;N<g;N+=E)for(let U=f;U<v;U+=E)A.push(new Jd(N+T,U+T,T,a));let I=function(N){let U=0,K=0,ie=0;const ye=N[0];for(let Re=0,ve=ye.length,Ee=ve-1;Re<ve;Ee=Re++){const Le=ye[Re],Pe=ye[Ee],ot=Le.x*Pe.y-Pe.x*Le.y;K+=(Le.x+Pe.x)*ot,ie+=(Le.y+Pe.y)*ot,U+=3*ot}return new Jd(K/U,ie/U,0,N)}(a),O=A.length;for(;A.length;){const N=A.pop();(N.d>I.d||!I.d)&&(I=N,s&&console.log("found best %d after %d probes",Math.round(1e4*N.d)/1e4,O)),N.max-I.d<=r||(T=N.h/2,A.push(new Jd(N.p.x-T,N.p.y-T,T,a)),A.push(new Jd(N.p.x+T,N.p.y-T,T,a)),A.push(new Jd(N.p.x-T,N.p.y+T,T,a)),A.push(new Jd(N.p.x+T,N.p.y+T,T,a)),O+=4)}return s&&(console.log(`num probes: ${O}`),console.log(`best distance: ${I.d}`)),I.p}function fN(a,r){return r.max-a.max}class Jd{constructor(r,s,d,f){this.p=new J(r,s),this.h=d,this.d=function(g,v){let b=!1,E=1/0;for(let T=0;T<v.length;T++){const A=v[T];for(let I=0,O=A.length,N=O-1;I<O;N=I++){const U=A[I],K=A[N];U.y>g.y!=K.y>g.y&&g.x<(K.x-U.x)*(g.y-U.y)/(K.y-U.y)+U.x&&(b=!b),E=Math.min(E,AR(g,U,K))}}return(b?1:-1)*Math.sqrt(E)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}}const eh=7,Pb=Number.POSITIVE_INFINITY,pN=Math.sqrt(2);function DM(a,[r,s]){let d=0,f=0;if(s===Pb){r<0&&(r=0);const g=r/pN;switch(a){case"top-right":case"top-left":f=g-eh;break;case"bottom-right":case"bottom-left":f=-g+eh;break;case"bottom":f=-r+eh;break;case"top":f=r-eh}switch(a){case"top-right":case"bottom-right":d=-g;break;case"top-left":case"bottom-left":d=g;break;case"left":d=r;break;case"right":d=-r}}else{switch(r=Math.abs(r),s=Math.abs(s),a){case"top-right":case"top-left":case"top":f=s-eh;break;case"bottom-right":case"bottom-left":case"bottom":f=-s+eh}switch(a){case"top-right":case"bottom-right":case"right":d=-r;break;case"top-left":case"bottom-left":case"left":d=r}}return[d,f]}function mN(a,r,s,d,f,g,v,b,E,T){a.createArrays(),a.tilePixelRatio=pn/(512*a.overscaling),a.compareText={},a.iconsNeedLinear=!1;const A=a.layers[0].layout,I=a.layers[0]._unevaluatedLayout._values,O={};if(a.textSizeData.kind==="composite"){const{minZoom:K,maxZoom:ie}=a.textSizeData;O.compositeTextSizes=[I["text-size"].possiblyEvaluate(new P(K),b),I["text-size"].possiblyEvaluate(new P(ie),b)]}if(a.iconSizeData.kind==="composite"){const{minZoom:K,maxZoom:ie}=a.iconSizeData;O.compositeIconSizes=[I["icon-size"].possiblyEvaluate(new P(K),b),I["icon-size"].possiblyEvaluate(new P(ie),b)]}O.layoutTextSize=I["text-size"].possiblyEvaluate(new P(E+1),b),O.layoutIconSize=I["icon-size"].possiblyEvaluate(new P(E+1),b),O.textMaxSize=I["text-size"].possiblyEvaluate(new P(18),b);const N=A.get("text-rotation-alignment")==="map"&&A.get("symbol-placement")!=="point",U=A.get("text-size");for(const K of a.features){const ie=A.get("text-font").evaluate(K,{},b).join(","),ye=U.evaluate(K,{},b),Re=O.layoutTextSize.evaluate(K,{},b),ve=(O.layoutIconSize.evaluate(K,{},b),{horizontal:{},vertical:void 0}),Ee=K.text;let Le,Pe=[0,0];if(Ee){const pt=Ee.toString(),It=A.get("text-letter-spacing").evaluate(K,{},b)*Pi,lt=A.get("text-line-height").evaluate(K,{},b)*Pi,_t=$x(pt)?It:0,xt=A.get("text-anchor").evaluate(K,{},b),Tt=A.get("text-variable-anchor");if(!Tt){const Wt=A.get("text-radial-offset").evaluate(K,{},b);Pe=Wt?DM(xt,[Wt*Pi,Pb]):A.get("text-offset").evaluate(K,{},b).map(Rn=>Rn*Pi)}let zt=N?"center":A.get("text-justify").evaluate(K,{},b);const ht=A.get("symbol-placement")==="point",Vt=ht?A.get("text-max-width").evaluate(K,{},b)*Pi:1/0,tn=Wt=>{a.allowVerticalPlacement&&pp(pt)&&(ve.vertical=Mb(Ee,r,s,f,ie,Vt,lt,xt,Wt,_t,Pe,qo.vertical,!0,Re,ye))};if(!N&&Tt){const Wt=zt==="auto"?Tt.map(Bt=>Ib(Bt)):[zt];let Rn=!1;for(let Bt=0;Bt<Wt.length;Bt++){const dn=Wt[Bt];if(!ve.horizontal[dn])if(Rn)ve.horizontal[dn]=ve.horizontal[0];else{const Mn=Mb(Ee,r,s,f,ie,Vt,lt,"center",dn,_t,Pe,qo.horizontal,!1,Re,ye);Mn&&(ve.horizontal[dn]=Mn,Rn=Mn.positionedLines.length===1)}}tn("left")}else{if(zt==="auto"&&(zt=Ib(xt)),ht||A.get("text-writing-mode").indexOf("horizontal")>=0||!pp(pt)){const Wt=Mb(Ee,r,s,f,ie,Vt,lt,xt,zt,_t,Pe,qo.horizontal,!1,Re,ye);Wt&&(ve.horizontal[zt]=Wt)}tn(ht?"left":zt)}}let ot=!1;if(K.icon&&K.icon.name){const pt=d[K.icon.name];pt&&(Le=aN(f[K.icon.name],A.get("icon-offset").evaluate(K,{},b),A.get("icon-anchor").evaluate(K,{},b)),ot=pt.sdf,a.sdfIcons===void 0?a.sdfIcons=pt.sdf:a.sdfIcons!==pt.sdf&&Kt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(pt.pixelRatio!==a.pixelRatio||A.get("icon-rotate").constantOr(1)!==0)&&(a.iconsNeedLinear=!0))}const tt=FM(ve.horizontal)||ve.vertical;a.iconsInText||(a.iconsInText=!!tt&&tt.iconsInText),(tt||Le)&&gN(a,K,ve,Le,d,O,Re,0,Pe,ot,v,b,T)}g&&a.generateCollisionDebugBuffers(E,a.collisionBoxArray)}function Ib(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function gN(a,r,s,d,f,g,v,b,E,T,A,I,O){let N=g.textMaxSize.evaluate(r,{},I);N===void 0&&(N=v);const U=a.layers[0].layout,K=U.get("icon-offset").evaluate(r,{},I),ie=FM(s.horizontal)||s.vertical,ye=O.name==="globe",Re=Pi,ve=v/Re,Ee=a.tilePixelRatio*N/Re,Le=(xt=a.overscaling,a.zoom>18&&xt>2&&(xt>>=1),Math.max(pn/(512*xt),1)*U.get("symbol-spacing")),Pe=U.get("text-padding")*a.tilePixelRatio,ot=U.get("icon-padding")*a.tilePixelRatio,tt=$e(U.get("text-max-angle")),pt=U.get("text-rotation-alignment")==="map"&&U.get("symbol-placement")!=="point",It=U.get("icon-rotation-alignment")==="map"&&U.get("symbol-placement")!=="point",lt=U.get("symbol-placement"),_t=Le/2;var xt;const Tt=U.get("icon-text-fit");let zt;d&&Tt!=="none"&&(a.allowVerticalPlacement&&s.vertical&&(zt=EM(d,s.vertical,Tt,U.get("icon-text-fit-padding"),K,ve)),ie&&(d=EM(d,ie,Tt,U.get("icon-text-fit-padding"),K,ve)));const ht=(Vt,tn,Wt)=>{if(tn.x<0||tn.x>=pn||tn.y<0||tn.y>=pn)return;let Rn=null;if(ye){const{x:Bt,y:dn,z:Mn}=O.projectTilePoint(tn.x,tn.y,Wt);Rn={anchor:new Vs(Bt,dn,Mn,0,void 0),up:O.upVector(Wt,tn.x,tn.y)}}(function(Bt,dn,Mn,Yn,An,bn,Mr,kn,Pn,gr,wr,Sr,yr,Fr,jr,ai,vr,pi,si,Nr,Jn,li,Er,io,ci){const Ii=Bt.addToLineVertexArray(dn,Yn);let Ei,oo,Ti,Va,rh,Qp,Jp,gA=0,yA=0,vA=0,_A=0,Hb=-1,Zb=-1;const ds={};let xA=Vx("");const bu=Mn?Mn.anchor:dn;let Xb=0,Kb=0;if(Pn._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Xb,Kb]=Pn.layout.get("text-offset").evaluate(Jn,{},ci).map(Mo=>Mo*Pi):(Xb=Pn.layout.get("text-radial-offset").evaluate(Jn,{},ci)*Pi,Kb=Pb),Bt.allowVerticalPlacement&&An.vertical){const Mo=An.vertical;if(jr)Qp=Lb(Mo),kn&&(Jp=Lb(kn));else{const Ao=Pn.layout.get("text-rotate").evaluate(Jn,{},ci)+90;Ti=C0(gr,bu,dn,wr,Sr,yr,Mo,Fr,Ao,ai),kn&&(Va=C0(gr,bu,dn,wr,Sr,yr,kn,pi,Ao))}}if(bn){const Mo=Pn.layout.get("icon-rotate").evaluate(Jn,{},ci),Ao=Pn.layout.get("icon-text-fit")!=="none",em=LM(bn,Mo,Er,Ao),Qb=kn?LM(kn,Mo,Er,Ao):void 0;oo=C0(gr,bu,dn,wr,Sr,yr,bn,pi,Mo),gA=4*em.length;const bA=Bt.iconSizeData;let wu=null;bA.kind==="source"?(wu=[$a*Pn.layout.get("icon-size").evaluate(Jn,{},ci)],wu[0]>Bl&&Kt(`${Bt.layerIds[0]}: Value for "icon-size" is >= ${Gp}. Reduce your "icon-size".`)):bA.kind==="composite"&&(wu=[$a*li.compositeIconSizes[0].evaluate(Jn,{},ci),$a*li.compositeIconSizes[1].evaluate(Jn,{},ci)],(wu[0]>Bl||wu[1]>Bl)&&Kt(`${Bt.layerIds[0]}: Value for "icon-size" is >= ${Gp}. Reduce your "icon-size".`)),Bt.addSymbols(Bt.icon,em,wu,Nr,si,Jn,!1,Mn,dn,Ii.lineStartIndex,Ii.lineLength,-1,io,ci),Hb=Bt.icon.placedSymbolArray.length-1,Qb&&(yA=4*Qb.length,Bt.addSymbols(Bt.icon,Qb,wu,Nr,si,Jn,qo.vertical,Mn,dn,Ii.lineStartIndex,Ii.lineLength,-1,io,ci),Zb=Bt.icon.placedSymbolArray.length-1)}for(const Mo in An.horizontal){const Ao=An.horizontal[Mo];Ei||(xA=Vx(Ao.text),jr?rh=Lb(Ao):Ei=C0(gr,bu,dn,wr,Sr,yr,Ao,Fr,Pn.layout.get("text-rotate").evaluate(Jn,{},ci),ai));const em=Ao.positionedLines.length===1;if(vA+=zM(Bt,Mn,dn,Ao,Mr,Pn,jr,Jn,ai,Ii,An.vertical?qo.horizontal:qo.horizontalOnly,em?Object.keys(An.horizontal):[Mo],ds,Hb,li,io,ci),em)break}An.vertical&&(_A+=zM(Bt,Mn,dn,An.vertical,Mr,Pn,jr,Jn,ai,Ii,qo.vertical,["vertical"],ds,Zb,li,io,ci));let Gl=-1;const Yb=(Mo,Ao)=>Mo?Math.max(Mo,Ao):Ao;Gl=Yb(rh,Gl),Gl=Yb(Qp,Gl),Gl=Yb(Jp,Gl);const GN=Gl>-1?1:0;Bt.glyphOffsetArray.length>=$l.MAX_GLYPHS&&Kt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Jn.sortKey!==void 0&&Bt.addToSortKeyRanges(Bt.symbolInstances.length,Jn.sortKey),Bt.symbolInstances.emplaceBack(bu.x,bu.y,bu.z,dn.x,dn.y,ds.right>=0?ds.right:-1,ds.center>=0?ds.center:-1,ds.left>=0?ds.left:-1,ds.vertical>=0?ds.vertical:-1,Hb,Zb,xA,Ei!==void 0?Ei:Bt.collisionBoxArray.length,Ei!==void 0?Ei+1:Bt.collisionBoxArray.length,Ti!==void 0?Ti:Bt.collisionBoxArray.length,Ti!==void 0?Ti+1:Bt.collisionBoxArray.length,oo!==void 0?oo:Bt.collisionBoxArray.length,oo!==void 0?oo+1:Bt.collisionBoxArray.length,Va||Bt.collisionBoxArray.length,Va?Va+1:Bt.collisionBoxArray.length,wr,vA,_A,gA,yA,GN,0,Xb,Kb,Gl)})(a,tn,Rn,Vt,s,d,f,zt,a.layers[0],a.collisionBoxArray,r.index,r.sourceLayerIndex,a.index,Pe,pt,E,0,ot,It,K,r,g,T,A,I)};if(lt==="line")for(const Vt of kM(r.geometry,0,0,pn,pn)){const tn=lN(Vt,Le,tt,s.vertical||ie,d,Re,Ee,a.overscaling,pn);for(const Wt of tn)ie&&yN(a,ie.text,_t,Wt)||ht(Vt,Wt,I)}else if(lt==="line-center"){for(const Vt of r.geometry)if(Vt.length>1){const tn=sN(Vt,tt,s.vertical||ie,d,Re,Ee);tn&&ht(Vt,tn,I)}}else if(r.type==="Polygon")for(const Vt of _b(r.geometry,0)){const tn=hN(Vt,16);ht(Vt[0],new Vs(tn.x,tn.y,0,0,void 0),I)}else if(r.type==="LineString")for(const Vt of r.geometry)ht(Vt,new Vs(Vt[0].x,Vt[0].y,0,0,void 0),I);else if(r.type==="Point")for(const Vt of r.geometry)for(const tn of Vt)ht([tn],new Vs(tn.x,tn.y,0,0,void 0),I)}const Gp=255,Bl=Gp*$a;function zM(a,r,s,d,f,g,v,b,E,T,A,I,O,N,U,K,ie){const ye=function(Ee,Le,Pe,ot,tt,pt,It,lt){const _t=[];if(Le.positionedLines.length===0)return _t;const xt=ot.layout.get("text-rotate").evaluate(pt,{})*Math.PI/180,Tt=function(Wt){const Rn=Wt[0],Bt=Wt[1],dn=Rn*Bt;return dn>0?[Rn,-Bt]:dn<0?[-Rn,Bt]:Rn===0?[Bt,Rn]:[Bt,-Rn]}(Pe);let zt=Math.abs(Le.top-Le.bottom);for(const Wt of Le.positionedLines)zt-=Wt.lineOffset;const ht=Le.positionedLines.length,Vt=zt/ht;let tn=Le.top-Pe[1];for(let Wt=0;Wt<ht;++Wt){const Rn=Le.positionedLines[Wt];tn=cN(Le,Vt,tn,Wt);for(const Bt of Rn.positionedGlyphs){if(!Bt.rect)continue;const dn=Bt.rect||{};let Mn=gM+1,Yn=!0,An=1,bn=0;if(Bt.imageName){const Er=It[Bt.imageName];if(!Er)continue;if(Er.sdf){Kt("SDF images are not supported in formatted text and will be ignored.");continue}Yn=!1,An=Er.pixelRatio,Mn=po/An}const Mr=(tt||lt)&&Bt.vertical,kn=Bt.metrics.advance*Bt.scale/2,Pn=Bt.metrics,gr=Bt.rect;if(gr===null)continue;lt&&Le.verticalizable&&(bn=Bt.imageName?kn-Bt.metrics.width*Bt.scale/2:0);const wr=tt?[Bt.x+kn,Bt.y]:[0,0];let Sr=[0,0],yr=[0,0],Fr=!1;tt||(Mr?(yr=[Bt.x+kn+Tt[0],Bt.y+Tt[1]-bn],Fr=!0):Sr=[Bt.x+kn+Pe[0],Bt.y+Pe[1]-bn]);const jr=gr.w*Bt.scale/(An*(Bt.localGlyph?Ua:1)),ai=gr.h*Bt.scale/(An*(Bt.localGlyph?Ua:1));let vr,pi,si,Nr;if(Mr){const Er=Bt.y-tn,io=new J(-kn,kn-Er),ci=-Math.PI/2,Ii=new J(...yr);vr=new J(-kn+Sr[0],Sr[1]),vr._rotateAround(ci,io)._add(Ii),vr.x+=-Er+kn,vr.y-=(Pn.left-Mn)*Bt.scale;const Ei=Bt.imageName?Pn.advance*Bt.scale:Pi*Bt.scale,oo=String.fromCharCode(Bt.glyph);G6(oo)?vr.x+=(1-Mn)*Bt.scale:W6(oo)?vr.x+=Ei-Pn.height*Bt.scale+(-Mn-1)*Bt.scale:vr.x+=Bt.imageName||Pn.width+2*Mn===gr.w&&Pn.height+2*Mn===gr.h?(Ei-ai)/2:(Ei-(Pn.height+2*Mn)*Bt.scale)/2,pi=new J(vr.x,vr.y-jr),si=new J(vr.x+ai,vr.y),Nr=new J(vr.x+ai,vr.y-jr)}else{const Er=(Pn.left-Mn)*Bt.scale-kn+Sr[0],io=(-Pn.top-Mn)*Bt.scale+Sr[1],ci=Er+jr,Ii=io+ai;vr=new J(Er,io),pi=new J(ci,io),si=new J(Er,Ii),Nr=new J(ci,Ii)}if(xt){let Er;Er=tt?new J(0,0):Fr?new J(Tt[0],Tt[1]):new J(Pe[0],Pe[1]),vr._rotateAround(xt,Er),pi._rotateAround(xt,Er),si._rotateAround(xt,Er),Nr._rotateAround(xt,Er)}const Jn=new J(0,0),li=new J(0,0);_t.push({tl:vr,tr:pi,bl:si,br:Nr,tex:dn,writingMode:Le.writingMode,glyphOffset:wr,sectionIndex:Bt.sectionIndex,isSDF:Yn,pixelOffsetTL:Jn,pixelOffsetBR:li,minFontScaleX:0,minFontScaleY:0})}}return _t}(0,d,E,g,v,b,f,a.allowVerticalPlacement),Re=a.textSizeData;let ve=null;Re.kind==="source"?(ve=[$a*g.layout.get("text-size").evaluate(b,{},ie)],ve[0]>Bl&&Kt(`${a.layerIds[0]}: Value for "text-size" is >= ${Gp}. Reduce your "text-size".`)):Re.kind==="composite"&&(ve=[$a*U.compositeTextSizes[0].evaluate(b,{},ie),$a*U.compositeTextSizes[1].evaluate(b,{},ie)],(ve[0]>Bl||ve[1]>Bl)&&Kt(`${a.layerIds[0]}: Value for "text-size" is >= ${Gp}. Reduce your "text-size".`)),a.addSymbols(a.text,ye,ve,E,v,b,A,r,s,T.lineStartIndex,T.lineLength,N,K,ie);for(const Ee of I)O[Ee]=a.text.placedSymbolArray.length-1;return 4*ye.length}function FM(a){for(const r in a)return a[r];return null}function C0(a,r,s,d,f,g,v,b,E,T){let A=v.top,I=v.bottom,O=v.left,N=v.right;const U=v.collisionPadding;if(U&&(O-=U[0],A-=U[1],N+=U[2],I+=U[3]),E){const K=new J(O,A),ie=new J(N,A),ye=new J(O,I),Re=new J(N,I),ve=$e(E);let Ee=new J(0,0);T&&(Ee=new J(T[0],T[1])),K._rotateAround(ve,Ee),ie._rotateAround(ve,Ee),ye._rotateAround(ve,Ee),Re._rotateAround(ve,Ee),O=Math.min(K.x,ie.x,ye.x,Re.x),N=Math.max(K.x,ie.x,ye.x,Re.x),A=Math.min(K.y,ie.y,ye.y,Re.y),I=Math.max(K.y,ie.y,ye.y,Re.y)}return a.emplaceBack(r.x,r.y,r.z,s.x,s.y,O,A,N,I,b,d,f,g),a.length-1}function Lb(a){a.collisionPadding&&(a.top-=a.collisionPadding[1],a.bottom+=a.collisionPadding[3]);const r=a.bottom-a.top;return r>0?Math.max(10,r):null}function yN(a,r,s,d){const f=a.compareText;if(r in f){const g=f[r];for(let v=g.length-1;v>=0;v--)if(d.dist(g[v])<s)return!0}else f[r]=[];return f[r].push(d),!1}function BM(a,r){const s=a.fovAboveCenter,d=a.elevation?a.elevation.getMinElevationBelowMSL()*r:0,f=(a._camera.position[2]*a.worldSize-d)/Math.cos(a._pitch),g=Math.sin(s)*f/Math.sin(Math.max(Math.PI/2-a._pitch-s,.01)),v=Math.sin(a._pitch)*g+f;return Math.min(1.01*v,f*(1/a._horizonShift))}function _u(a,r){if(!r.isReprojectedInTileSpace)return{scale:1<<a.z,x:a.x,y:a.y,x2:a.x+1,y2:a.y+1,projection:r};const s=Math.pow(2,-a.z),d=a.x*s,f=(a.x+1)*s,g=a.y*s,v=(a.y+1)*s,b=Wo(d),E=Wo(f),T=Ni(g),A=Ni(v),I=r.project(b,T),O=r.project(E,T),N=r.project(E,A),U=r.project(b,A);let K=Math.min(I.x,O.x,N.x,U.x),ie=Math.min(I.y,O.y,N.y,U.y),ye=Math.max(I.x,O.x,N.x,U.x),Re=Math.max(I.y,O.y,N.y,U.y);const ve=s/16;function Ee(Pe,ot,tt,pt,It,lt){const _t=(tt+It)/2,xt=(pt+lt)/2,Tt=r.project(Wo(_t),Ni(xt)),zt=Math.max(0,K-Tt.x,ie-Tt.y,Tt.x-ye,Tt.y-Re);K=Math.min(K,Tt.x),ye=Math.max(ye,Tt.x),ie=Math.min(ie,Tt.y),Re=Math.max(Re,Tt.y),zt>ve&&(Ee(Pe,Tt,tt,pt,_t,xt),Ee(Tt,ot,_t,xt,It,lt))}Ee(I,O,d,g,f,g),Ee(O,N,f,g,f,v),Ee(N,U,f,v,d,v),Ee(U,I,d,v,d,g),K-=ve,ie-=ve,ye+=ve,Re+=ve;const Le=1/Math.max(ye-K,Re-ie);return{scale:Le,x:K*Le,y:ie*Le,x2:ye*Le,y2:Re*Le,projection:r}}const vN=Fa(new Float32Array(16));class Nl{constructor(r){this.spec=r,this.name=r.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(r,s){return{x:0,y:0,z:0}}unproject(r,s){return new mr(0,0)}projectTilePoint(r,s,d){return{x:r,y:s,z:0}}locationPoint(r,s,d=!0){return r._coordinatePoint(r.locationCoordinate(s),d)}pixelsPerMeter(r,s){return Na(1,r)*s}pixelSpaceConversion(r,s,d){return 1}farthestPixelDistance(r){return BM(r,r.pixelsPerMeter)}pointCoordinate(r,s,d,f){const g=r.horizonLineFromTop(!1),v=new J(s,Math.max(g,d));return r.rayIntersectionCoordinate(r.pointRayIntersection(v,f))}pointCoordinate3D(r,s,d){const f=new J(s,d);if(r.elevation)return r.elevation.pointCoordinate(f);{const g=this.pointCoordinate(r,f.x,f.y,0);return[g.x,g.y,g.z]}}isPointAboveHorizon(r,s){if(r.elevation)return!this.pointCoordinate3D(r,s.x,s.y);const d=r.horizonLineFromTop();return s.y<d}createInversionMatrix(r,s){return vN}createTileMatrix(r,s,d){let f,g,v;const b=d.canonical,E=Fa(new Float64Array(16));if(this.isReprojectedInTileSpace){const T=_u(b,this);f=1,g=T.x+d.wrap*T.scale,v=T.y,hu(E,E,[f/T.scale,f/T.scale,r.pixelsPerMeter/s])}else f=s/r.zoomScale(b.z),g=(b.x+Math.pow(2,b.z)*d.wrap)*f,v=b.y*f;return bp(E,E,[g,v,0]),hu(E,E,[f/pn,f/pn,1]),E}upVector(r,s,d){return[0,0,1]}upVectorScale(r,s,d){return{metersToTile:1}}}class _N extends Nl{constructor(r){super(r),this.range=[4,7],this.center=r.center||[-96,37.5];const[s,d]=this.parallels=r.parallels||[29.5,45.5],f=Math.sin($e(s));this.n=(f+Math.sin($e(d)))/2,this.c=1+f*(2*this.n-f),this.r0=Math.sqrt(this.c)/this.n}project(r,s){const{n:d,c:f,r0:g}=this,v=$e(r-this.center[0]),b=$e(s),E=Math.sqrt(f-2*d*Math.sin(b))/d;return{x:E*Math.sin(v*d),y:E*Math.cos(v*d)-g,z:0}}unproject(r,s){const{n:d,c:f,r0:g}=this,v=g+s;let b=Math.atan2(r,Math.abs(v))*Math.sign(v);v*d<0&&(b-=Math.PI*Math.sign(r)*Math.sign(v));const E=$e(this.center[0])*d;b=Te(b,-Math.PI-E,Math.PI-E);const T=Me(Ge(b/d)+this.center[0],-180,180),A=Math.asin(Me((f-(r*r+v*v)*d*d)/(2*d),-1,1)),I=Me(Ge(A),-$i,$i);return new mr(T,I)}}const Wp=1.340264,qp=-.081106,Hp=893e-6,Zp=.003796,R0=Math.sqrt(3)/2;class xN extends Nl{project(r,s){s=s/180*Math.PI,r=r/180*Math.PI;const d=Math.asin(R0*Math.sin(s)),f=d*d,g=f*f*f;return{x:.5*(r*Math.cos(d)/(R0*(Wp+3*qp*f+g*(7*Hp+9*Zp*f)))/Math.PI+.5),y:1-.5*(d*(Wp+qp*f+g*(Hp+Zp*f))/Math.PI+1),z:0}}unproject(r,s){r=(2*r-.5)*Math.PI;let d=s=(2*(1-s)-1)*Math.PI,f=d*d,g=f*f*f;for(let A,I,O,N=0;N<12&&(I=d*(Wp+qp*f+g*(Hp+Zp*f))-s,O=Wp+3*qp*f+g*(7*Hp+9*Zp*f),A=I/O,d=Me(d-A,-Math.PI/3,Math.PI/3),f=d*d,g=f*f*f,!(Math.abs(A)<1e-12));++N);const v=R0*r*(Wp+3*qp*f+g*(7*Hp+9*Zp*f))/Math.cos(d),b=Math.asin(Math.sin(d)/R0),E=Me(180*v/Math.PI,-180,180),T=Me(180*b/Math.PI,-$i,$i);return new mr(E,T)}}class bN extends Nl{constructor(r){super(r),this.wrap=!0,this.supportsWorldCopies=!0}project(r,s){return{x:.5+r/360,y:.5-s/360,z:0}}unproject(r,s){const d=360*(r-.5),f=Me(360*(.5-s),-$i,$i);return new mr(d,f)}}const th=Math.PI/2;function M0(a){return Math.tan((th+a)/2)}class wN extends Nl{constructor(r){super(r),this.center=r.center||[0,30];const[s,d]=this.parallels=r.parallels||[30,30];let f=$e(s),g=$e(d);this.southernCenter=f+g<0,this.southernCenter&&(f=-f,g=-g);const v=Math.cos(f),b=M0(f);this.n=f===g?Math.sin(f):Math.log(v/Math.cos(g))/Math.log(M0(g)/b),this.f=v*Math.pow(M0(f),this.n)/this.n}project(r,s){s=$e(s),this.southernCenter&&(s=-s),r=$e(r-this.center[0]);const d=1e-6,{n:f,f:g}=this;g>0?s<-th+d&&(s=-th+d):s>th-d&&(s=th-d);const v=g/Math.pow(M0(s),f);let b=v*Math.sin(f*r),E=g-v*Math.cos(f*r);return b=.5*(b/Math.PI+.5),E=.5*(E/Math.PI+.5),{x:b,y:this.southernCenter?E:1-E,z:0}}unproject(r,s){r=(2*r-.5)*Math.PI,this.southernCenter&&(s=1-s),s=(2*(1-s)-.5)*Math.PI;const{n:d,f}=this,g=f-s,v=Math.sign(g),b=Math.sign(d)*Math.sqrt(r*r+g*g);let E=Math.atan2(r,Math.abs(g))*v;g*d<0&&(E-=Math.PI*Math.sign(r)*v);const T=Me(Ge(E/d)+this.center[0],-180,180),A=Me(Ge(2*Math.atan(Math.pow(f/b,1/d))-th),-$i,$i);return new mr(T,this.southernCenter?-A:A)}}class NM extends Nl{constructor(r){super(r),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(r,s){return{x:as(r),y:ss(s),z:0}}unproject(r,s){const d=Wo(r),f=Ni(s);return new mr(d,f)}}const $M=$e($i);class SN extends Nl{project(r,s){const d=(s=$e(s))*s,f=d*d;return{x:.5*((r=$e(r))*(.8707-.131979*d+f*(f*(.003971*d-.001529*f)-.013791))/Math.PI+.5),y:1-.5*(s*(1.007226+d*(.015085+f*(.028874*d-.044475-.005916*f)))/Math.PI+1),z:0}}unproject(r,s){r=(2*r-.5)*Math.PI;let d=s=(2*(1-s)-1)*Math.PI,f=25,g=0,v=d*d;do{v=d*d;const T=v*v;g=(d*(1.007226+v*(.015085+T*(.028874*v-.044475-.005916*T)))-s)/(1.007226+v*(.045255+T*(.259866*v-.311325-.005916*11*T))),d=Me(d-g,-$M,$M)}while(Math.abs(g)>1e-6&&--f>0);v=d*d;const b=Me(Ge(r/(.8707+v*(v*(v*v*v*(.003971-.001529*v)-.013791)-.131979))),-180,180),E=Ge(d);return new mr(b,E)}}const UM=$e($i);class EN extends Nl{project(r,s){s=$e(s),r=$e(r);const d=Math.cos(s),f=2/Math.PI,g=Math.acos(d*Math.cos(r/2)),v=Math.sin(g)/g,b=.5*(r*f+2*d*Math.sin(r/2)/v)||0,E=.5*(s+Math.sin(s)/v)||0;return{x:.5*(b/Math.PI+.5),y:1-.5*(E/Math.PI+1),z:0}}unproject(r,s){let d=r=(2*r-.5)*Math.PI,f=s=(2*(1-s)-1)*Math.PI,g=25;const v=1e-6;let b=0,E=0;do{const T=Math.cos(f),A=Math.sin(f),I=2*A*T,O=A*A,N=T*T,U=Math.cos(d/2),K=Math.sin(d/2),ie=2*U*K,ye=K*K,Re=1-N*U*U,ve=Re?1/Re:0,Ee=Re?Math.acos(T*U)*Math.sqrt(1/Re):0,Le=.5*(2*Ee*T*K+2*d/Math.PI)-r,Pe=.5*(Ee*A+f)-s,ot=.5*ve*(N*ye+Ee*T*U*O)+1/Math.PI,tt=ve*(ie*I/4-Ee*A*K),pt=.125*ve*(I*K-Ee*A*N*ie),It=.5*ve*(O*U+Ee*ye*T)+.5,lt=tt*pt-It*ot;b=(Pe*tt-Le*It)/lt,E=(Le*pt-Pe*ot)/lt,d=Me(d-b,-Math.PI,Math.PI),f=Me(f-E,-UM,UM)}while((Math.abs(b)>v||Math.abs(E)>v)&&--g>0);return new mr(Ge(d),Ge(f))}}class jM extends Nl{constructor(r){super(r),this.center=r.center||[0,0],this.parallels=r.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos($e(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(r,s){const{scale:d,cosPhi:f}=this;return{x:$e(r)*f*d+.5,y:-Math.sin($e(s))/f*d+.5,z:0}}unproject(r,s){const{scale:d,cosPhi:f}=this,g=-(s-.5)/d,v=Me(Ge((r-.5)/d)/f,-180,180),b=Math.asin(Me(g*f,-1,1)),E=Me(Ge(b),-$i,$i);return new mr(v,E)}}class TN extends NM{constructor(r){super(r),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(r,s,d){const f=Ap(r,s,d);return Kr(f,f,kp(os(d))),{x:f[0],y:f[1],z:f[2]}}locationPoint(r,s){const d=$d(s.lat,s.lng),f=to([],d),g=r.elevation?r.elevation.getAtPointOrZero(r.locationCoordinate(s),r._centerAltitude):r._centerAltitude;Tp(d,d,f,Na(1,0)*pn*g);const v=Fa(new Float64Array(16));return du(v,r.pixelMatrix,r.globeMatrix),Kr(d,d,v),new J(d[0],d[1])}pixelsPerMeter(r,s){return Na(1,0)*s}pixelSpaceConversion(r,s,d){const f=Na(1,r)*s,g=Zn(Na(1,45)*s,f,d);return this.pixelsPerMeter(r,s)/g}createTileMatrix(r,s,d){const f=rb(os(d.canonical));return du(new Float64Array(16),r.globeMatrix,f)}createInversionMatrix(r,s){const{center:d}=r,f=kp(os(s));return n0(f,f,$e(d.lng)),Hx(f,f,$e(d.lat)),hu(f,f,[r._pixelsPerMercatorPixel,r._pixelsPerMercatorPixel,1]),Float32Array.from(f)}pointCoordinate(r,s,d,f){return mR(r,s,d,!0)||new jd(0,0)}pointCoordinate3D(r,s,d){const f=this.pointCoordinate(r,s,d,0);return[f.x,f.y,f.z]}isPointAboveHorizon(r,s){return!mR(r,s.x,s.y,!1)}farthestPixelDistance(r){const s=function(f,g){const v=f.cameraToCenterDistance,b=f._centerAltitude*g,E=f._camera,T=f._camera.forward(),A=Ns([],Go([],T,-v),[0,0,b]),I=f.worldSize/(2*Math.PI),O=[0,0,-I],N=f.width/f.height,U=Math.tan(f.fovAboveCenter),K=Go([],E.up(),U),ie=Go([],E.right(),U*N),ye=to([],Ns([],Ns([],T,K),ie)),Re=[];let ve;if(new Yx(A,ye).closestPointOnSphere(O,I,Re)){const Ee=Ns([],Re,O),Le=Ba([],Ee,A);ve=Math.cos(f.fovAboveCenter)*wp(Le)}else{const Ee=Ba([],A,O),Le=Ba([],O,A);to(Le,Le);const Pe=wp(Ee)-I;ve=Math.sqrt(Pe*(Pe+2*I));const ot=Math.acos(ve/(I+Pe))-Math.acos(ca(T,Le));ve*=Math.cos(ot)}return 1.01*ve}(r,this.pixelsPerMeter(r.center.lat,r.worldSize)),d=Ud(r.zoom);if(d>0){const f=BM(r,Na(1,r.center.lat)*r.worldSize),g=r.worldSize/(2*Math.PI),v=Math.max(r.width,r.height)/r.worldSize*Math.PI;return Zn(s,f+g*(1-Math.cos(v)),Math.pow(d,10))}return s}upVector(r,s,d){return Ap(s,d,r,1)}upVectorScale(r){return{metersToTile:r0(o0(os(r)))}}}function VM(a){const r=a.parallels,s=!!r&&Math.abs(r[0]+r[1])<.01;switch(a.name){case"mercator":return new NM(a);case"equirectangular":return new bN(a);case"naturalEarth":return new SN(a);case"equalEarth":return new xN(a);case"winkelTripel":return new EN(a);case"albers":return s?new jM(a):new _N(a);case"lambertConformalConic":return s?new jM(a):new wN(a);case"globe":return new TN(a)}throw new Error(`Invalid projection name: ${a.name}`)}const CN=m0.types,RN=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function A0(a,r,s,d,f,g,v,b,E,T,A,I,O){const N=b?Math.min(Bl,Math.round(b[0])):0,U=b?Math.min(Bl,Math.round(b[1])):0;a.emplaceBack(r,s,Math.round(32*d),Math.round(32*f),g,v,(N<<1)+(E?1:0),U,16*T,16*A,256*I,256*O)}function k0(a,r,s,d,f,g,v){a.emplaceBack(r,s,d,f,g,v)}function P0(a,r,s,d,f){a.emplaceBack(r,s,d,f),a.emplaceBack(r,s,d,f),a.emplaceBack(r,s,d,f),a.emplaceBack(r,s,d,f)}function MN(a){for(const r of a.sections)if(jx(r.text))return!0;return!1}class Ob{constructor(r){this.layoutVertexArray=new wt,this.indexArray=new cn,this.programConfigurations=r,this.segments=new ii,this.dynamicLayoutVertexArray=new kt,this.opacityVertexArray=new un,this.placedSymbolArray=new ri,this.globeExtVertexArray=new Ot}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,s,d,f){this.isEmpty()||(d&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,z6.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,B6.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,RN,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=r.createVertexBuffer(this.globeExtVertexArray,F6.members,!0)),this.opacityVertexBuffer.itemSize=1),(d||f)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Jt(Ob,"SymbolBuffers");class Db{constructor(r,s,d){this.layoutVertexArray=new r,this.layoutAttributes=s,this.indexArray=new d,this.segments=new ii,this.collisionVertexArray=new Fn,this.collisionVertexArrayExt=new On}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,N6.members,!0),this.collisionVertexBufferExt=r.createVertexBuffer(this.collisionVertexArrayExt,$6.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Jt(Db,"CollisionBuffers");class $l{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(v=>v.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Fa([]),this.placementViewportMatrix=Fa([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Sb(this.zoom,s["text-size"]),this.iconSizeData=Sb(this.zoom,s["icon-size"]);const d=this.layers[0].layout,f=d.get("symbol-sort-key"),g=d.get("symbol-z-order");this.canOverlap=d.get("text-allow-overlap")||d.get("icon-allow-overlap")||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=g!=="viewport-y"&&f.constantOr(1)!==void 0,this.sortFeaturesByY=(g==="viewport-y"||g==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=d.get("text-writing-mode").map(v=>qo[v]),this.stateDependentLayerIds=this.layers.filter(v=>v.isStateDependent()).map(v=>v.id),this.sourceID=r.sourceID,this.projection=r.projection}createArrays(){this.text=new Ob(new uu(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new Ob(new uu(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new eo,this.lineVertexArray=new Dd,this.symbolInstances=new kr}calculateGlyphDependencies(r,s,d,f,g){for(let v=0;v<r.length;v++)if(s[r.charCodeAt(v)]=!0,f&&g){const b=Up[r.charAt(v)];b&&(s[b.charCodeAt(0)]=!0)}}populate(r,s,d,f){const g=this.layers[0],v=g.layout,b=this.projection.name==="globe",E=v.get("text-font"),T=v.get("text-field"),A=v.get("icon-image"),I=(T.value.kind!=="constant"||T.value.value instanceof Ji&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(E.value.kind!=="constant"||E.value.value.length>0),O=A.value.kind!=="constant"||!!A.value.value||Object.keys(A.parameters).length>0,N=v.get("symbol-sort-key");if(this.features=[],!I&&!O)return;const U=s.iconDependencies,K=s.glyphDependencies,ie=s.availableImages,ye=new P(this.zoom);for(const{feature:Re,id:ve,index:Ee,sourceLayerIndex:Le}of r){const Pe=g._featureFilter.needGeometry,ot=gu(Re,Pe);if(!g._featureFilter.filter(ye,ot,d))continue;if(Pe||(ot.geometry=$s(Re,d,f)),b&&Re.type!==1&&d.z<=5){const lt=ot.geometry,_t=.98078528056,xt=(Tt,zt)=>ca(Ap(Tt.x,Tt.y,d,1),Ap(zt.x,zt.y,d,1))<_t;for(let Tt=0;Tt<lt.length;Tt++)lt[Tt]=BB(lt[Tt],xt)}let tt,pt;if(I){const lt=g.getValueAndResolveTokens("text-field",ot,d,ie),_t=Ji.factory(lt);MN(_t)&&(this.hasRTLText=!0),(!this.hasRTLText||w()==="unavailable"||this.hasRTLText&&R.isParsed())&&(tt=V6(_t,g,ot))}if(O){const lt=g.getValueAndResolveTokens("icon-image",ot,d,ie);pt=lt instanceof wo?lt:wo.fromString(lt)}if(!tt&&!pt)continue;const It=this.sortFeaturesByKey?N.evaluate(ot,{},d):void 0;if(this.features.push({id:ve,text:tt,icon:pt,index:Ee,sourceLayerIndex:Le,geometry:ot.geometry,properties:Re.properties,type:CN[Re.type],sortKey:It}),pt&&(U[pt.name]=!0),tt){const lt=E.evaluate(ot,{},d).join(","),_t=v.get("text-rotation-alignment")==="map"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(qo.vertical)>=0;for(const xt of tt.sections)if(xt.image)U[xt.image.name]=!0;else{const Tt=pp(tt.toString()),zt=xt.fontStack||lt,ht=K[zt]=K[zt]||{};this.calculateGlyphDependencies(xt.text,ht,_t,this.allowVerticalPlacement,Tt)}}}v.get("symbol-placement")==="line"&&(this.features=function(Re){const ve={},Ee={},Le=[];let Pe=0;function ot(lt){Le.push(Re[lt]),Pe++}function tt(lt,_t,xt){const Tt=Ee[lt];return delete Ee[lt],Ee[_t]=Tt,Le[Tt].geometry[0].pop(),Le[Tt].geometry[0]=Le[Tt].geometry[0].concat(xt[0]),Tt}function pt(lt,_t,xt){const Tt=ve[_t];return delete ve[_t],ve[lt]=Tt,Le[Tt].geometry[0].shift(),Le[Tt].geometry[0]=xt[0].concat(Le[Tt].geometry[0]),Tt}function It(lt,_t,xt){const Tt=xt?_t[0][_t[0].length-1]:_t[0][0];return`${lt}:${Tt.x}:${Tt.y}`}for(let lt=0;lt<Re.length;lt++){const _t=Re[lt],xt=_t.geometry,Tt=_t.text?_t.text.toString():null;if(!Tt){ot(lt);continue}const zt=It(Tt,xt),ht=It(Tt,xt,!0);if(zt in Ee&&ht in ve&&Ee[zt]!==ve[ht]){const Vt=pt(zt,ht,xt),tn=tt(zt,ht,Le[Vt].geometry);delete ve[zt],delete Ee[ht],Ee[It(Tt,Le[tn].geometry,!0)]=tn,Le[Vt].geometry=null}else zt in Ee?tt(zt,ht,xt):ht in ve?pt(zt,ht,xt):(ot(lt),ve[zt]=Pe-1,Ee[ht]=Pe-1)}return Le.filter(lt=>lt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Re,ve)=>Re.sortKey-ve.sortKey)}update(r,s,d,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,s,this.layers,d,f),this.icon.programConfigurations.updatePaintArrays(r,s,this.layers,d,f))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=VM(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,s){const d=this.lineVertexArray.length;if(r.segment!==void 0)for(const{x:f,y:g}of s)this.lineVertexArray.emplaceBack(f,g);return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(r,s,d,f,g,v,b,E,T,A,I,O,N,U){const K=r.indexArray,ie=r.layoutVertexArray,ye=r.globeExtVertexArray,Re=r.segments.prepareSegment(4*s.length,ie,K,this.canOverlap?v.sortKey:void 0),ve=this.glyphOffsetArray.length,Ee=Re.vertexLength,Le=this.allowVerticalPlacement&&b===qo.vertical?Math.PI/2:0,Pe=v.text&&v.text.sections;for(let tt=0;tt<s.length;tt++){const{tl:pt,tr:It,bl:lt,br:_t,tex:xt,pixelOffsetTL:Tt,pixelOffsetBR:zt,minFontScaleX:ht,minFontScaleY:Vt,glyphOffset:tn,isSDF:Wt,sectionIndex:Rn}=s[tt],Bt=Re.vertexLength,dn=tn[1];if(A0(ie,T.x,T.y,pt.x,dn+pt.y,xt.x,xt.y,d,Wt,Tt.x,Tt.y,ht,Vt),A0(ie,T.x,T.y,It.x,dn+It.y,xt.x+xt.w,xt.y,d,Wt,zt.x,Tt.y,ht,Vt),A0(ie,T.x,T.y,lt.x,dn+lt.y,xt.x,xt.y+xt.h,d,Wt,Tt.x,zt.y,ht,Vt),A0(ie,T.x,T.y,_t.x,dn+_t.y,xt.x+xt.w,xt.y+xt.h,d,Wt,zt.x,zt.y,ht,Vt),E){const{x:Mn,y:Yn,z:An}=E.anchor,[bn,Mr,kn]=E.up;k0(ye,Mn,Yn,An,bn,Mr,kn),k0(ye,Mn,Yn,An,bn,Mr,kn),k0(ye,Mn,Yn,An,bn,Mr,kn),k0(ye,Mn,Yn,An,bn,Mr,kn),P0(r.dynamicLayoutVertexArray,Mn,Yn,An,Le)}else P0(r.dynamicLayoutVertexArray,T.x,T.y,T.z,Le);K.emplaceBack(Bt,Bt+1,Bt+2),K.emplaceBack(Bt+1,Bt+2,Bt+3),Re.vertexLength+=4,Re.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(tn[0]),tt!==s.length-1&&Rn===s[tt+1].sectionIndex||r.programConfigurations.populatePaintArrays(ie.length,v,v.index,{},N,U,Pe&&Pe[Rn])}const ot=E?E.anchor:T;r.placedSymbolArray.emplaceBack(ot.x,ot.y,ot.z,T.x,T.y,ve,this.glyphOffsetArray.length-ve,Ee,A,I,T.segment,d?d[0]:0,d?d[1]:0,f[0],f[1],b,0,!1,0,O,0)}_commitLayoutVertex(r,s,d,f,g,v,b){r.emplaceBack(s,d,f,g,v,Math.round(b.x),Math.round(b.y))}_addCollisionDebugVertices(r,s,d,f,g,v,b){const E=d.segments.prepareSegment(4,d.layoutVertexArray,d.indexArray),T=E.vertexLength,A=b.tileAnchorX,I=b.tileAnchorY;for(let N=0;N<4;N++)d.collisionVertexArray.emplaceBack(0,0,0,0);d.collisionVertexArrayExt.emplaceBack(s,-r.padding,-r.padding),d.collisionVertexArrayExt.emplaceBack(s,r.padding,-r.padding),d.collisionVertexArrayExt.emplaceBack(s,r.padding,r.padding),d.collisionVertexArrayExt.emplaceBack(s,-r.padding,r.padding),this._commitLayoutVertex(d.layoutVertexArray,f,g,v,A,I,new J(r.x1,r.y1)),this._commitLayoutVertex(d.layoutVertexArray,f,g,v,A,I,new J(r.x2,r.y1)),this._commitLayoutVertex(d.layoutVertexArray,f,g,v,A,I,new J(r.x2,r.y2)),this._commitLayoutVertex(d.layoutVertexArray,f,g,v,A,I,new J(r.x1,r.y2)),E.vertexLength+=4;const O=d.indexArray;O.emplaceBack(T,T+1),O.emplaceBack(T+1,T+2),O.emplaceBack(T+2,T+3),O.emplaceBack(T+3,T),E.primitiveLength+=4}_addTextDebugCollisionBoxes(r,s,d,f,g,v){for(let b=f;b<g;b++){const E=d.get(b),T=this.getSymbolInstanceTextSize(r,v,s,b);this._addCollisionDebugVertices(E,T,this.textCollisionBox,E.projectedAnchorX,E.projectedAnchorY,E.projectedAnchorZ,v)}}_addIconDebugCollisionBoxes(r,s,d,f,g,v){for(let b=f;b<g;b++){const E=d.get(b),T=this.getSymbolInstanceIconSize(r,s,v.placedIconSymbolIndex);this._addCollisionDebugVertices(E,T,this.iconCollisionBox,E.projectedAnchorX,E.projectedAnchorY,E.projectedAnchorZ,v)}}generateCollisionDebugBuffers(r,s){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Db(en,lM.members,Si),this.iconCollisionBox=new Db(en,lM.members,Si);const d=Hd(this.iconSizeData,r),f=Hd(this.textSizeData,r);for(let g=0;g<this.symbolInstances.length;g++){const v=this.symbolInstances.get(g);this._addTextDebugCollisionBoxes(f,r,s,v.textBoxStartIndex,v.textBoxEndIndex,v),this._addTextDebugCollisionBoxes(f,r,s,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v),this._addIconDebugCollisionBoxes(d,r,s,v.iconBoxStartIndex,v.iconBoxEndIndex,v),this._addIconDebugCollisionBoxes(d,r,s,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex,v)}}getSymbolInstanceTextSize(r,s,d,f){const g=this.text.placedSymbolArray.get(s.rightJustifiedTextSymbolIndex>=0?s.rightJustifiedTextSymbolIndex:s.centerJustifiedTextSymbolIndex>=0?s.centerJustifiedTextSymbolIndex:s.leftJustifiedTextSymbolIndex>=0?s.leftJustifiedTextSymbolIndex:s.verticalPlacedTextSymbolIndex>=0?s.verticalPlacedTextSymbolIndex:f),v=_0(this.textSizeData,r,g)/Pi;return this.tilePixelRatio*v}getSymbolInstanceIconSize(r,s,d){const f=this.icon.placedSymbolArray.get(d),g=_0(this.iconSizeData,r,f);return this.tilePixelRatio*g}_commitDebugCollisionVertexUpdate(r,s,d){r.emplaceBack(s,-d,-d),r.emplaceBack(s,d,-d),r.emplaceBack(s,d,d),r.emplaceBack(s,-d,d)}_updateTextDebugCollisionBoxes(r,s,d,f,g,v){for(let b=f;b<g;b++){const E=d.get(b),T=this.getSymbolInstanceTextSize(r,v,s,b);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,T,E.padding)}}_updateIconDebugCollisionBoxes(r,s,d,f,g,v){for(let b=f;b<g;b++){const E=d.get(b),T=this.getSymbolInstanceIconSize(r,s,v);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,T,E.padding)}}updateCollisionDebugBuffers(r,s){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const d=Hd(this.iconSizeData,r),f=Hd(this.textSizeData,r);for(let g=0;g<this.symbolInstances.length;g++){const v=this.symbolInstances.get(g);this._updateTextDebugCollisionBoxes(f,r,s,v.textBoxStartIndex,v.textBoxEndIndex,v),this._updateTextDebugCollisionBoxes(f,r,s,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v),this._updateIconDebugCollisionBoxes(d,r,s,v.iconBoxStartIndex,v.iconBoxEndIndex,v.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(d,r,s,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex,v.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(r,s,d,f,g,v,b,E,T){const A={};if(s<d){const{x1:I,y1:O,x2:N,y2:U,padding:K,projectedAnchorX:ie,projectedAnchorY:ye,projectedAnchorZ:Re,tileAnchorX:ve,tileAnchorY:Ee,featureIndex:Le}=r.get(s);A.textBox={x1:I,y1:O,x2:N,y2:U,padding:K,projectedAnchorX:ie,projectedAnchorY:ye,projectedAnchorZ:Re,tileAnchorX:ve,tileAnchorY:Ee},A.textFeatureIndex=Le}if(f<g){const{x1:I,y1:O,x2:N,y2:U,padding:K,projectedAnchorX:ie,projectedAnchorY:ye,projectedAnchorZ:Re,tileAnchorX:ve,tileAnchorY:Ee,featureIndex:Le}=r.get(f);A.verticalTextBox={x1:I,y1:O,x2:N,y2:U,padding:K,projectedAnchorX:ie,projectedAnchorY:ye,projectedAnchorZ:Re,tileAnchorX:ve,tileAnchorY:Ee},A.verticalTextFeatureIndex=Le}if(v<b){const{x1:I,y1:O,x2:N,y2:U,padding:K,projectedAnchorX:ie,projectedAnchorY:ye,projectedAnchorZ:Re,tileAnchorX:ve,tileAnchorY:Ee,featureIndex:Le}=r.get(v);A.iconBox={x1:I,y1:O,x2:N,y2:U,padding:K,projectedAnchorX:ie,projectedAnchorY:ye,projectedAnchorZ:Re,tileAnchorX:ve,tileAnchorY:Ee},A.iconFeatureIndex=Le}if(E<T){const{x1:I,y1:O,x2:N,y2:U,padding:K,projectedAnchorX:ie,projectedAnchorY:ye,projectedAnchorZ:Re,tileAnchorX:ve,tileAnchorY:Ee,featureIndex:Le}=r.get(E);A.verticalIconBox={x1:I,y1:O,x2:N,y2:U,padding:K,projectedAnchorX:ie,projectedAnchorY:ye,projectedAnchorZ:Re,tileAnchorX:ve,tileAnchorY:Ee},A.verticalIconFeatureIndex=Le}return A}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const d=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,s){const d=r.placedSymbolArray.get(s),f=d.vertexStartIndex+4*d.numGlyphs;for(let g=d.vertexStartIndex;g<f;g+=4)r.indexArray.emplaceBack(g,g+1,g+2),r.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(r),d=Math.cos(r),f=[],g=[],v=[];for(let b=0;b<this.symbolInstances.length;++b){v.push(b);const E=this.symbolInstances.get(b);f.push(0|Math.round(s*E.tileAnchorX+d*E.tileAnchorY)),g.push(E.featureIndex)}return v.sort((b,E)=>f[b]-f[E]||g[E]-g[b]),v}addToSortKeyRanges(r,s){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===s?d.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const d=this.symbolInstances.get(s);this.featureSortOrder.push(d.featureIndex);const{rightJustifiedTextSymbolIndex:f,centerJustifiedTextSymbolIndex:g,leftJustifiedTextSymbolIndex:v,verticalPlacedTextSymbolIndex:b,placedIconSymbolIndex:E,verticalPlacedIconSymbolIndex:T}=d;f>=0&&this.addIndicesForPlacedSymbol(this.text,f),g>=0&&g!==f&&this.addIndicesForPlacedSymbol(this.text,g),v>=0&&v!==g&&v!==f&&this.addIndicesForPlacedSymbol(this.text,v),b>=0&&this.addIndicesForPlacedSymbol(this.text,b),E>=0&&this.addIndicesForPlacedSymbol(this.icon,E),T>=0&&this.addIndicesForPlacedSymbol(this.icon,T)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Jt($l,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),$l.MAX_GLYPHS=65535,$l.addDynamicAttributes=P0;const AN=new xe({"symbol-placement":new H(ft.layout_symbol["symbol-placement"]),"symbol-spacing":new H(ft.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new H(ft.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new le(ft.layout_symbol["symbol-sort-key"]),"symbol-z-order":new H(ft.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new H(ft.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new H(ft.layout_symbol["icon-ignore-placement"]),"icon-optional":new H(ft.layout_symbol["icon-optional"]),"icon-rotation-alignment":new H(ft.layout_symbol["icon-rotation-alignment"]),"icon-size":new le(ft.layout_symbol["icon-size"]),"icon-text-fit":new H(ft.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new H(ft.layout_symbol["icon-text-fit-padding"]),"icon-image":new le(ft.layout_symbol["icon-image"]),"icon-rotate":new le(ft.layout_symbol["icon-rotate"]),"icon-padding":new H(ft.layout_symbol["icon-padding"]),"icon-keep-upright":new H(ft.layout_symbol["icon-keep-upright"]),"icon-offset":new le(ft.layout_symbol["icon-offset"]),"icon-anchor":new le(ft.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new H(ft.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new H(ft.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new H(ft.layout_symbol["text-rotation-alignment"]),"text-field":new le(ft.layout_symbol["text-field"]),"text-font":new le(ft.layout_symbol["text-font"]),"text-size":new le(ft.layout_symbol["text-size"]),"text-max-width":new le(ft.layout_symbol["text-max-width"]),"text-line-height":new le(ft.layout_symbol["text-line-height"]),"text-letter-spacing":new le(ft.layout_symbol["text-letter-spacing"]),"text-justify":new le(ft.layout_symbol["text-justify"]),"text-radial-offset":new le(ft.layout_symbol["text-radial-offset"]),"text-variable-anchor":new H(ft.layout_symbol["text-variable-anchor"]),"text-anchor":new le(ft.layout_symbol["text-anchor"]),"text-max-angle":new H(ft.layout_symbol["text-max-angle"]),"text-writing-mode":new H(ft.layout_symbol["text-writing-mode"]),"text-rotate":new le(ft.layout_symbol["text-rotate"]),"text-padding":new H(ft.layout_symbol["text-padding"]),"text-keep-upright":new H(ft.layout_symbol["text-keep-upright"]),"text-transform":new le(ft.layout_symbol["text-transform"]),"text-offset":new le(ft.layout_symbol["text-offset"]),"text-allow-overlap":new H(ft.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new H(ft.layout_symbol["text-ignore-placement"]),"text-optional":new H(ft.layout_symbol["text-optional"])});var zb={paint:new xe({"icon-opacity":new le(ft.paint_symbol["icon-opacity"]),"icon-color":new le(ft.paint_symbol["icon-color"]),"icon-halo-color":new le(ft.paint_symbol["icon-halo-color"]),"icon-halo-width":new le(ft.paint_symbol["icon-halo-width"]),"icon-halo-blur":new le(ft.paint_symbol["icon-halo-blur"]),"icon-translate":new H(ft.paint_symbol["icon-translate"]),"icon-translate-anchor":new H(ft.paint_symbol["icon-translate-anchor"]),"text-opacity":new le(ft.paint_symbol["text-opacity"]),"text-color":new le(ft.paint_symbol["text-color"],{runtimeType:ho,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new le(ft.paint_symbol["text-halo-color"]),"text-halo-width":new le(ft.paint_symbol["text-halo-width"]),"text-halo-blur":new le(ft.paint_symbol["text-halo-blur"]),"text-translate":new H(ft.paint_symbol["text-translate"]),"text-translate-anchor":new H(ft.paint_symbol["text-translate-anchor"])}),layout:AN};class GM{constructor(r){this.type=r.property.overrides?r.property.overrides.runtimeType:gl,this.defaultValue=r}evaluate(r){if(r.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(r.formattedSection))return s.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Jt(GM,"FormatSectionOverride",{omit:["defaultValue"]});class I0 extends za{constructor(r){super(r,zb)}recalculate(r,s){super.recalculate(r,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const d=this.layout.get("text-writing-mode");if(d){const f=[];for(const g of d)f.indexOf(g)<0&&f.push(g);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(r,s,d,f){const g=this.layout.get(r).evaluate(s,{},d,f),v=this._unevaluatedLayout._values[r];return v.isDataDriven()||Ml(v.value)||!g?g:function(b,E){return E.replace(/{([^{}]+)}/g,(T,A)=>A in b?String(b[A]):"")}(s.properties,g)}createBucket(r){return new $l(r)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const r of zb.paint.overridableProperties){if(!I0.hasPaintOverride(this.layout,r))continue;const s=this.paint.get(r),d=new GM(s),f=new Rd(d,s.property.specification);let g=null;g=s.value.kind==="constant"||s.value.kind==="source"?new rp("source",f):new tu("composite",f,s.value.zoomStops,s.value._interpolationType),this.paint._values[r]=new he(s.property,g,s.parameters)}}_handleOverridablePaintPropertyUpdate(r,s,d){return!(!this.layout||s.isDataDriven()||d.isDataDriven())&&I0.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,s){const d=r.get("text-field"),f=zb.paint.properties[s];let g=!1;const v=b=>{for(const E of b)if(f.overrides&&f.overrides.hasOverride(E))return void(g=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Ji)v(d.value.value.sections);else if(d.value.kind==="source"){const b=T=>{g||(T instanceof Ms&&Ur(T.value)===Bc?v(T.value.sections):T instanceof ts?v(T.sections):T.eachChild(b))},E=d.value;E._styleExpression&&b(E._styleExpression.expression)}return g}getProgramConfiguration(r){return new Dl(this,r)}}var kN={paint:new xe({"background-color":new H(ft.paint_background["background-color"]),"background-pattern":new H(ft.paint_background["background-pattern"]),"background-opacity":new H(ft.paint_background["background-opacity"])})},PN={paint:new xe({"raster-opacity":new H(ft.paint_raster["raster-opacity"]),"raster-hue-rotate":new H(ft.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new H(ft.paint_raster["raster-brightness-min"]),"raster-brightness-max":new H(ft.paint_raster["raster-brightness-max"]),"raster-saturation":new H(ft.paint_raster["raster-saturation"]),"raster-contrast":new H(ft.paint_raster["raster-contrast"]),"raster-resampling":new H(ft.paint_raster["raster-resampling"]),"raster-fade-duration":new H(ft.paint_raster["raster-fade-duration"])})};class IN extends za{constructor(r){super(r,{}),this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(r){this.implementation.onAdd&&this.implementation.onAdd(r,r.painter.context.gl)}onRemove(r){this.implementation.onRemove&&this.implementation.onRemove(r,r.painter.context.gl)}}var LN={paint:new xe({"sky-type":new H(ft.paint_sky["sky-type"]),"sky-atmosphere-sun":new H(ft.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new H(ft.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new H(ft.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new H(ft.paint_sky["sky-gradient-radius"]),"sky-gradient":new _e(ft.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new H(ft.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new H(ft.paint_sky["sky-atmosphere-color"]),"sky-opacity":new H(ft.paint_sky["sky-opacity"])})};function Fb(a,r,s){const d=[0,0,1],f=cR([]);return dR(f,f,s?-$e(a)+Math.PI:$e(a)),uR(f,f,-$e(r)),oR(d,d,f),to(d,d)}const ON={circle:class extends za{constructor(a){super(a,WB)}createBucket(a){return new cb(a)}queryRadius(a){const r=a;return Vd("circle-radius",this,r)+Vd("circle-stroke-width",this,r)+l0(this.paint.get("circle-translate"))}queryIntersectsFeature(a,r,s,d,f,g,v,b){const E=LR(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),g.angle,a.pixelToTileUnitsFactor),T=this.paint.get("circle-radius").evaluate(r,s)+this.paint.get("circle-stroke-width").evaluate(r,s);return OR(a,d,g,v,b,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",E,T)}getProgramIds(){return["circle"]}getProgramConfiguration(a){return new Dl(this,a)}},heatmap:class extends za{createBucket(a){return new zR(a)}constructor(a){super(a,XB),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=fb({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(a){return Vd("heatmap-radius",this,a)}queryIntersectsFeature(a,r,s,d,f,g,v,b){const E=this.paint.get("heatmap-radius").evaluate(r,s);return OR(a,d,g,v,b,!0,!0,new J(0,0),E)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(a){return new Dl(this,a)}},hillshade:class extends za{constructor(a){super(a,KB)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends za{constructor(a){super(a,h6)}getProgramIds(){const a=this.paint.get("fill-pattern"),r=a&&a.constantOr(1),s=[r?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&s.push(r&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),s}getProgramConfiguration(a){return new Dl(this,a)}recalculate(a,r){super.recalculate(a,r);const s=this.paint._values["fill-outline-color"];s.value.kind==="constant"&&s.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new f0(a)}queryRadius(){return l0(this.paint.get("fill-translate"))}queryIntersectsFeature(a,r,s,d,f,g){return!a.queryGeometry.isAboveHorizon&&MR(IR(a.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),g.angle,a.pixelToTileUnitsFactor),d)}isTileClipped(){return!0}},"fill-extrusion":class extends za{constructor(a){super(a,M6)}createBucket(a){return new Bp(a)}queryRadius(){return l0(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(a){return new Dl(this,a)}queryIntersectsFeature(a,r,s,d,f,g,v,b,E){const T=LR(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),g.angle,a.pixelToTileUnitsFactor),A=this.paint.get("fill-extrusion-height").evaluate(r,s),I=this.paint.get("fill-extrusion-base").evaluate(r,s),O=[0,0],N=b&&g.elevation,U=g.elevation?g.elevation.exaggeration():1,K=a.tile.getBucket(this);if(N&&K instanceof Bp){const Ee=K.centroidVertexArray,Le=E+1;Le<Ee.length&&(O[0]=Ee.geta_centroid_pos0(Le),O[1]=Ee.geta_centroid_pos1(Le))}if(O[0]===0&&O[1]===1)return!1;g.projection.name==="globe"&&(d=eM([d],[new J(0,0),new J(pn,pn)],a.tileID.canonical).map(Ee=>Ee.polygon).flat());const ie=N?b:null,[ye,Re]=function(Ee,Le,Pe,ot,tt,pt,It,lt,_t,xt,Tt){return Ee.projection.name==="globe"?function(zt,ht,Vt,tn,Wt,Rn,Bt,dn,Mn,Yn,An){const bn=[],Mr=[],kn=zt.projection.upVectorScale(An,zt.center.lat,zt.worldSize).metersToTile,Pn=[0,0,0,1],gr=[0,0,0,1],wr=(yr,Fr,jr,ai)=>{yr[0]=Fr,yr[1]=jr,yr[2]=ai,yr[3]=1},Sr=JR();Vt>0&&(Vt+=Sr),tn+=Sr;for(const yr of ht){const Fr=[],jr=[];for(const ai of yr){const vr=ai.x+Wt.x,pi=ai.y+Wt.y,si=zt.projection.projectTilePoint(vr,pi,An),Nr=zt.projection.upVector(An,ai.x,ai.y);let Jn=Vt,li=tn;if(Bt){const Er=iM(vr,pi,Vt,tn,Bt,dn,Mn,Yn);Jn+=Er.base,li+=Er.top}Vt!==0?wr(Pn,si.x+Nr[0]*kn*Jn,si.y+Nr[1]*kn*Jn,si.z+Nr[2]*kn*Jn):wr(Pn,si.x,si.y,si.z),wr(gr,si.x+Nr[0]*kn*li,si.y+Nr[1]*kn*li,si.z+Nr[2]*kn*li),Kr(Pn,Pn,Rn),Kr(gr,gr,Rn),Fr.push(new qd(Pn[0],Pn[1],Pn[2])),jr.push(new qd(gr[0],gr[1],gr[2]))}bn.push(Fr),Mr.push(jr)}return[bn,Mr]}(Ee,Le,Pe,ot,tt,pt,It,lt,_t,xt,Tt):It?function(zt,ht,Vt,tn,Wt,Rn,Bt,dn,Mn){const Yn=[],An=[],bn=[0,0,0,1];for(const Mr of zt){const kn=[],Pn=[];for(const gr of Mr){const wr=gr.x+tn.x,Sr=gr.y+tn.y,yr=iM(wr,Sr,ht,Vt,Rn,Bt,dn,Mn);bn[0]=wr,bn[1]=Sr,bn[2]=yr.base,bn[3]=1,fu(bn,bn,Wt),bn[3]=Math.max(bn[3],1e-5);const Fr=new qd(bn[0]/bn[3],bn[1]/bn[3],bn[2]/bn[3]);bn[0]=wr,bn[1]=Sr,bn[2]=yr.top,bn[3]=1,fu(bn,bn,Wt),bn[3]=Math.max(bn[3],1e-5);const jr=new qd(bn[0]/bn[3],bn[1]/bn[3],bn[2]/bn[3]);kn.push(Fr),Pn.push(jr)}Yn.push(kn),An.push(Pn)}return[Yn,An]}(Le,Pe,ot,tt,pt,It,lt,_t,xt):function(zt,ht,Vt,tn,Wt){const Rn=[],Bt=[],dn=Wt[8]*ht,Mn=Wt[9]*ht,Yn=Wt[10]*ht,An=Wt[11]*ht,bn=Wt[8]*Vt,Mr=Wt[9]*Vt,kn=Wt[10]*Vt,Pn=Wt[11]*Vt;for(const gr of zt){const wr=[],Sr=[];for(const yr of gr){const Fr=yr.x+tn.x,jr=yr.y+tn.y,ai=Wt[0]*Fr+Wt[4]*jr+Wt[12],vr=Wt[1]*Fr+Wt[5]*jr+Wt[13],pi=Wt[2]*Fr+Wt[6]*jr+Wt[14],si=Wt[3]*Fr+Wt[7]*jr+Wt[15],Nr=ai+dn,Jn=vr+Mn,li=pi+Yn,Er=Math.max(si+An,1e-5),io=ai+bn,ci=vr+Mr,Ii=pi+kn,Ei=Math.max(si+Pn,1e-5);wr.push(new qd(Nr/Er,Jn/Er,li/Er)),Sr.push(new qd(io/Ei,ci/Ei,Ii/Ei))}Rn.push(wr),Bt.push(Sr)}return[Rn,Bt]}(Le,Pe,ot,tt,pt)}(g,d,I,A,T,v,ie,O,U,g.center.lat,a.tileID.canonical),ve=a.queryGeometry;return function(Ee,Le,Pe){let ot=1/0;MR(Pe,Le)&&(ot=rM(Pe,Le[0]));for(let tt=0;tt<Le.length;tt++){const pt=Le[tt],It=Ee[tt];for(let lt=0;lt<pt.length-1;lt++){const _t=pt[lt],xt=[_t,pt[lt+1],It[lt+1],It[lt],_t];RR(Pe,xt)&&(ot=Math.min(ot,rM(Pe,xt)))}}return ot!==1/0&&ot}(ye,Re,ve.isPointQuery()?ve.screenBounds:ve.screenGeometry)}},line:class extends za{constructor(a){super(a,oM),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(a){if(a==="line-gradient"){const r=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=r._styleExpression&&r._styleExpression.expression instanceof Gf,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(a,r){super.recalculate(a,r),this.paint._values["line-floorwidth"]=aM.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new v0(a)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(a){return new Dl(this,a)}queryRadius(a){const r=a,s=sM(Vd("line-width",this,r),Vd("line-gap-width",this,r)),d=Vd("line-offset",this,r);return s/2+Math.abs(d)+l0(this.paint.get("line-translate"))}queryIntersectsFeature(a,r,s,d,f,g){if(a.queryGeometry.isAboveHorizon)return!1;const v=IR(a.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),g.angle,a.pixelToTileUnitsFactor),b=a.pixelToTileUnitsFactor/2*sM(this.paint.get("line-width").evaluate(r,s),this.paint.get("line-gap-width").evaluate(r,s)),E=this.paint.get("line-offset").evaluate(r,s);return E&&(d=function(T,A){const I=[],O=new J(0,0);for(let N=0;N<T.length;N++){const U=T[N],K=[];for(let ie=0;ie<U.length;ie++){const ye=U[ie],Re=U[ie+1],ve=ie===0?O:ye.sub(U[ie-1])._unit()._perp(),Ee=ie===U.length-1?O:Re.sub(ye)._unit()._perp(),Le=ve._add(Ee)._unit();Le._mult(1/(Le.x*Ee.x+Le.y*Ee.y)),K.push(Le._mult(A)._add(ye))}I.push(K)}return I}(d,E*a.pixelToTileUnitsFactor)),function(T,A,I){for(let O=0;O<A.length;O++){const N=A[O];if(T.length>=3){for(let U=0;U<N.length;U++)if(yu(T,N[U]))return!0}if(UB(T,N,I))return!0}return!1}(v,d,b)}isTileClipped(){return!0}},symbol:I0,background:class extends za{constructor(a){super(a,kN)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends za{constructor(a){super(a,PN)}getProgramIds(){return["raster"]}},sky:class extends za{constructor(a){super(a,LN),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="sky-gradient"?this._updateColorRamp():a!=="sky-atmosphere-sun"&&a!=="sky-atmosphere-halo-color"&&a!=="sky-atmosphere-color"&&a!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=fb({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(a){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const r=a.style.light.properties.get("position");return this._lightPosition.azimuthal!==r.azimuthal||this._lightPosition.polar!==r.polar}return!1}getCenter(a,r){if(this.paint.get("sky-type")==="atmosphere"){const d=this.paint.get("sky-atmosphere-sun"),f=!d,g=a.style.light,v=g.properties.get("position");return f&&g.properties.get("anchor")==="viewport"&&Kt("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),f?Fb(v.azimuthal,90-v.polar,r):Fb(d[0],90-d[1],r)}const s=this.paint.get("sky-gradient-center");return Fb(s[0],90-s[1],r)}is3D(){return!1}isSky(){return!0}markSkyboxValid(a){this._skyboxInvalidated=!1,this._lightPosition=a.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const a=this.paint.get("sky-type");return a==="atmosphere"?["skyboxCapture","skybox"]:a==="gradient"?["skyboxGradient"]:null}}};class Xp{constructor(r,s,d,f){this.context=r,this.format=d,this.texture=r.gl.createTexture(),this.update(s,f)}update(r,s,d){const{width:f,height:g}=r,{context:v}=this,{gl:b}=v,{HTMLImageElement:E,HTMLCanvasElement:T,HTMLVideoElement:A,ImageData:I,ImageBitmap:O}=x;if(b.bindTexture(b.TEXTURE_2D,this.texture),v.pixelStoreUnpackFlipY.set(!1),v.pixelStoreUnpack.set(1),v.pixelStoreUnpackPremultiplyAlpha.set(this.format===b.RGBA&&(!s||s.premultiply!==!1)),d||this.size&&this.size[0]===f&&this.size[1]===g){const{x:N,y:U}=d||{x:0,y:0};r instanceof E||r instanceof T||r instanceof A||r instanceof I||O&&r instanceof O?b.texSubImage2D(b.TEXTURE_2D,0,N,U,b.RGBA,b.UNSIGNED_BYTE,r):b.texSubImage2D(b.TEXTURE_2D,0,N,U,f,g,b.RGBA,b.UNSIGNED_BYTE,r.data)}else this.size=[f,g],r instanceof E||r instanceof T||r instanceof A||r instanceof I||O&&r instanceof O?b.texImage2D(b.TEXTURE_2D,0,this.format,this.format,b.UNSIGNED_BYTE,r):b.texImage2D(b.TEXTURE_2D,0,this.format,f,g,0,this.format,b.UNSIGNED_BYTE,r.data);this.useMipmap=!!(s&&s.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&b.generateMipmap(b.TEXTURE_2D)}bind(r,s){const{context:d}=this,{gl:f}=d;f.bindTexture(f.TEXTURE_2D,this.texture),r!==this.filter&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,r),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,this.useMipmap?r===f.NEAREST?f.NEAREST_MIPMAP_NEAREST:f.LINEAR_MIPMAP_NEAREST:r),this.filter=r),s!==this.wrap&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,s),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}class DN{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class zN{constructor(){this.tasks={},this.taskQueue=[],Rt(["process"],this),this.invoker=new DN(this.process),this.nextId=0}add(r,s){const d=this.nextId++,f=function({type:g,isSymbolTile:v,zoom:b}){return b=b||0,g==="message"?0:g!=="maybePrepare"||v?g!=="parseTile"||v?g==="parseTile"&&v?300-b:g==="maybePrepare"&&v?400-b:500:200-b:100-b}(s);if(f===0){Xn();try{r()}finally{}return{cancel:()=>{}}}return this.tasks[d]={fn:r,metadata:s,priority:f,id:d},this.taskQueue.push(d),this.invoker.trigger(),{cancel:()=>{delete this.tasks[d]}}}process(){Xn();try{if(this.taskQueue=this.taskQueue.filter(d=>!!this.tasks[d]),!this.taskQueue.length)return;const r=this.pick();if(r===null)return;const s=this.tasks[r];if(delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),!s)return;s.fn()}finally{}}pick(){let r=null,s=1/0;for(let f=0;f<this.taskQueue.length;f++){const g=this.tasks[this.taskQueue[f]];g.priority<s&&(s=g.priority,r=f)}if(r===null)return null;const d=this.taskQueue[r];return this.taskQueue.splice(r,1),d}remove(){this.invoker.remove()}}class WM{constructor(r){this._stringToNumber={},this._numberToString=[];for(let s=0;s<r.length;s++){const d=r[s];this._stringToNumber[d]=s,this._numberToString[s]=d}}encode(r){return this._stringToNumber[r]}decode(r){return this._numberToString[r]}}const FN=["tile","layer","source","sourceLayer","state"];class qM{constructor(r,s,d,f,g){this.type="Feature",this._vectorTileFeature=r,this._z=s,this._x=d,this._y=f,this.properties=r.properties,this.id=g}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(r.id=this.id);for(const s of FN)this[s]!==void 0&&(r[s]=this[s]);return r}}const ha=32,ls=33,Ul=new Uint16Array(8184);for(let a=0;a<2046;a++){let r=a+2,s=0,d=0,f=0,g=0,v=0,b=0;for(1&r?f=g=v=ha:s=d=b=ha;(r>>=1)>1;){const T=s+f>>1,A=d+g>>1;1&r?(f=s,g=d,s=v,d=b):(s=f,d=g,f=v,g=b),v=T,b=A}const E=4*a;Ul[E+0]=s,Ul[E+1]=d,Ul[E+2]=f,Ul[E+3]=g}const cs=new Uint16Array(2178),jl=new Uint8Array(1089),L0=new Uint16Array(1089);function HM(a){return a===0?-.03125:a===32?.03125:0}var ZM=qe([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const XM={type:2,extent:pn,loadGeometry:()=>[[new J(0,0),new J(pn+1,0),new J(pn+1,pn+1),new J(0,pn+1),new J(0,0)]]};class Bb{constructor(r,s,d,f,g){this.tileID=r,this.uid=nt(),this.uses=0,this.tileSize=s,this.tileZoom=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=g,this.expiredRequestCount=0,this.state="loading",f&&f.transform&&(this.projection=f.transform.projection)}registerFadeDuration(r){const s=r+this.timeAdded;s<Ea.now()||this.fadeEndTime&&s<this.fadeEndTime||(this.fadeEndTime=s)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=_u(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(r,s,d){if(this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(f,g){const v={};if(!g)return v;for(const b of f){const E=b.layerIds.map(T=>g.getLayer(T)).filter(Boolean);if(E.length!==0){b.layers=E,b.stateDependentLayerIds&&(b.stateDependentLayers=b.stateDependentLayerIds.map(T=>E.filter(A=>A.id===T)[0]));for(const T of E)v[T.id]=b}}return v}(r.buckets,s.style),this.hasSymbolBuckets=!1;for(const f in this.buckets){const g=this.buckets[f];if(g instanceof $l){if(this.hasSymbolBuckets=!0,!d)break;g.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const f in this.buckets){const g=this.buckets[f];if(g instanceof $l&&g.hasRTLText){this.hasRTLText=!0,R.isLoading()||R.isLoaded()||w()!=="deferred"||C();break}}this.queryPadding=0;for(const f in this.buckets){const g=this.buckets[f];this.queryPadding=Math.max(this.queryPadding,s.style.getLayer(f).queryRadius(g))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage),r.lineAtlas&&(this.lineAtlas=r.lineAtlas)}else this.collisionBoxArray=new pr}unloadVectorData(){if(this.hasData()){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(r){return this.buckets[r.id]}upload(r){for(const d in this.buckets){const f=this.buckets[d];f.uploadPending()&&f.upload(r)}const s=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Xp(r,this.imageAtlas.image,s.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Xp(r,this.glyphAtlasImage,s.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Xp(r,this.lineAtlas.image,s.ALPHA),this.lineAtlas.uploaded=!0)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,s,d,f,g,v,b,E){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:f,pixelPosMatrix:b,transform:v,params:g,tileTransform:this.tileTransform},r,s,d):{}}querySourceFeatures(r,s){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const f=d.loadVTLayers(),g=s?s.sourceLayer:"",v=f._geojsonTileLayer||f[g];if(!v)return;const b=Pd(s&&s.filter),{z:E,x:T,y:A}=this.tileID.canonical,I={z:E,x:T,y:A};for(let O=0;O<v.length;O++){const N=v.feature(O);if(b.needGeometry){const ie=gu(N,!0);if(!b.filter(new P(this.tileID.overscaledZ),ie,this.tileID.canonical))continue}else if(!b.filter(new P(this.tileID.overscaledZ),N))continue;const U=d.getId(N,g),K=new qM(N,E,T,A,U);K.tile=I,r.push(K)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const s=this.expirationTime;if(r.cacheControl){const d=sr(r.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const d=Date.now();let f=!1;if(this.expirationTime>d)f=!1;else if(s)if(this.expirationTime<s)f=!0;else{const g=this.expirationTime-s;g?this.expirationTime=d+Math.max(g,3e4):f=!0}else f=!0;f?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,s){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0||!s)return;const d=this.latestFeatureIndex.loadVTLayers(),f=s.style.listImages();for(const g in this.buckets){if(!s.style.hasLayer(g))continue;const v=this.buckets[g],b=v.layers[0].sourceLayer||"_geojsonTileLayer",E=d[b],T=r[b];if(!E||!T||Object.keys(T).length===0)continue;if(v.update(T,E,f,this.imageAtlas&&this.imageAtlas.patternPositions||{}),v instanceof v0||v instanceof f0){const I=s.style._getSourceCache(v.layers[0].source);s._terrain&&s._terrain.enabled&&I&&v.programConfigurations.needsUpload&&s._terrain._clearRenderCacheForTile(I.id,this.tileID)}const A=s&&s.style&&s.style.getLayer(g);A&&(this.queryPadding=Math.max(this.queryPadding,A.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ea.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=Ea.now()+r}setTexture(r,s){const d=s.context,f=d.gl;this.texture=this.texture||s.getTileTexture(r.width),this.texture?this.texture.update(r,{useMipmap:!0}):(this.texture=new Xp(d,r,f.RGBA,{useMipmap:!0}),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE))}setDependencies(r,s){const d={};for(const f of s)d[f]=!0;this.dependencies[r]=d}hasDependency(r,s){for(const d of r){const f=this.dependencies[d];if(f){for(const g of s)if(f[g])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(r,s){if(!s||s.name==="mercator"||this._tileDebugBuffer)return;const d=$s(XM,this.tileID.canonical,this.tileTransform)[0],f=new Pt,g=new To;for(let v=0;v<d.length;v++){const{x:b,y:E}=d[v];f.emplaceBack(b,E),g.emplaceBack(v)}g.emplaceBack(0),this._tileDebugIndexBuffer=r.createIndexBuffer(g),this._tileDebugBuffer=r.createVertexBuffer(f,Rp.members),this._tileDebugSegments=ii.simpleSegment(0,0,f.length,g.length)}_makeTileBoundsBuffers(r,s){if(this._tileBoundsBuffer||!s||s.name==="mercator")return;const d=$s(XM,this.tileID.canonical,this.tileTransform)[0];let f,g;if(this.isRaster){const v=function(b,E){const T=_u(b,E),A=Math.pow(2,b.z);for(let ie=0;ie<ls;ie++)for(let ye=0;ye<ls;ye++){const Re=Wo((b.x+(ye+HM(ye))/ha)/A),ve=Ni((b.y+(ie+HM(ie))/ha)/A),Ee=E.project(Re,ve),Le=ie*ls+ye;cs[2*Le+0]=Math.round((Ee.x*T.scale-T.x)*pn),cs[2*Le+1]=Math.round((Ee.y*T.scale-T.y)*pn)}jl.fill(0),L0.fill(0);for(let ie=2045;ie>=0;ie--){const ye=4*ie,Re=Ul[ye+0],ve=Ul[ye+1],Ee=Ul[ye+2],Le=Ul[ye+3],Pe=Re+Ee>>1,ot=ve+Le>>1,tt=Pe+ot-ve,pt=ot+Re-Pe,It=ve*ls+Re,lt=Le*ls+Ee,_t=ot*ls+Pe,xt=Math.hypot((cs[2*It+0]+cs[2*lt+0])/2-cs[2*_t+0],(cs[2*It+1]+cs[2*lt+1])/2-cs[2*_t+1])>=16;jl[_t]=jl[_t]||(xt?1:0),ie<1022&&(jl[_t]=jl[_t]||jl[(ve+pt>>1)*ls+(Re+tt>>1)]||jl[(Le+pt>>1)*ls+(Ee+tt>>1)])}const I=new vt,O=new cn;let N=0;function U(ie,ye){const Re=ye*ls+ie;return L0[Re]===0&&(I.emplaceBack(cs[2*Re+0],cs[2*Re+1],ie*pn/ha,ye*pn/ha),L0[Re]=++N),L0[Re]-1}function K(ie,ye,Re,ve,Ee,Le){const Pe=ie+Re>>1,ot=ye+ve>>1;if(Math.abs(ie-Ee)+Math.abs(ye-Le)>1&&jl[ot*ls+Pe])K(Ee,Le,ie,ye,Pe,ot),K(Re,ve,Ee,Le,Pe,ot);else{const tt=U(ie,ye),pt=U(Re,ve),It=U(Ee,Le);O.emplaceBack(tt,pt,It)}}return K(0,0,ha,ha,ha,0),K(ha,ha,0,0,0,ha),{vertices:I,indices:O}}(this.tileID.canonical,s);f=v.vertices,g=v.indices}else{f=new vt,g=new cn;for(const{x:b,y:E}of d)f.emplaceBack(b,E,0,0);const v=vb(f.int16,void 0,4);for(let b=0;b<v.length;b+=3)g.emplaceBack(v[b],v[b+1],v[b+2])}this._tileBoundsBuffer=r.createVertexBuffer(f,ZM.members),this._tileBoundsIndexBuffer=r.createIndexBuffer(g),this._tileBoundsSegments=ii.simpleSegment(0,0,f.length,g.length)}_makeGlobeTileDebugBuffers(r,s){const d=s.projection;if(!d||d.name!=="globe"||s.freezeTileCoverage)return;const f=this.tileID.canonical,g=kp(gR(f,s)),v=Ud(s.zoom);let b;v>0&&(b=qx(new Float64Array(16),s.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(r,f,s,g,b,v),this._makeGlobeTileDebugTextBuffer(r,f,s,g,b,v)}_globePoint(r,s,d,f,g,v,b){let E=Ap(r,s,d);if(v){const T=1<<d.z,A=as(f.center.lng),I=ss(f.center.lat),O=(d.x+.5)/T-A;let N=0;O>.5?N=-1:O<-.5&&(N=1);let U=(r/pn+d.x)/T+N,K=(s/pn+d.y)/T;U=(U-A)*f._pixelsPerMercatorPixel+A,K=(K-I)*f._pixelsPerMercatorPixel+I;const ie=[U*f.worldSize,K*f.worldSize,0];Kr(ie,ie,v),E=mu(E,ie,b)}return Kr(E,E,g)}_makeGlobeTileDebugBorderBuffer(r,s,d,f,g,v){const b=new Pt,E=new To,T=new et,A=(O,N,U,K,ie)=>{const ye=(U-O)/(ie-1),Re=(K-N)/(ie-1),ve=b.length;for(let Ee=0;Ee<ie;Ee++){const Le=O+Ee*ye,Pe=N+Ee*Re;b.emplaceBack(Le,Pe);const ot=this._globePoint(Le,Pe,s,d,f,g,v);T.emplaceBack(ot[0],ot[1],ot[2]),E.emplaceBack(ve+Ee)}},I=pn;A(0,0,I,0,16),A(I,0,I,I,16),A(I,I,0,I,16),A(0,I,0,0,16),this._tileDebugIndexBuffer=r.createIndexBuffer(E),this._tileDebugBuffer=r.createVertexBuffer(b,Rp.members),this._globeTileDebugBorderBuffer=r.createVertexBuffer(T,fR.members),this._tileDebugSegments=ii.simpleSegment(0,0,b.length,E.length)}_makeGlobeTileDebugTextBuffer(r,s,d,f,g,v){const b=pn/4,E=new Pt,T=new cn,A=new et,I=25;T.reserve(32),E.reserve(I),A.reserve(I);const O=(N,U)=>I*N+U;for(let N=0;N<I;N++){const U=N*b;for(let K=0;K<I;K++){const ie=K*b;E.emplaceBack(ie,U);const ye=this._globePoint(ie,U,s,d,f,g,v);A.emplaceBack(ye[0],ye[1],ye[2])}}for(let N=0;N<4;N++)for(let U=0;U<4;U++){const K=O(N,U),ie=O(N,U+1),ye=O(N+1,U),Re=O(N+1,U+1);T.emplaceBack(K,ie,ye),T.emplaceBack(ye,ie,Re)}this._tileDebugTextIndexBuffer=r.createIndexBuffer(T),this._tileDebugTextBuffer=r.createVertexBuffer(E,Rp.members),this._globeTileDebugTextBuffer=r.createVertexBuffer(A,fR.members),this._tileDebugTextSegments=ii.simpleSegment(0,0,I,32)}}class BN{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,s,d){const f=String(s);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][f]=this.stateChanges[r][f]||{},be(this.stateChanges[r][f],d),this.deletedStates[r]===null){this.deletedStates[r]={};for(const g in this.state[r])g!==f&&(this.deletedStates[r][g]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][f]===null){this.deletedStates[r][f]={};for(const g in this.state[r][f])d[g]||(this.deletedStates[r][f][g]=null)}else for(const g in d)this.deletedStates[r]&&this.deletedStates[r][f]&&this.deletedStates[r][f][g]===null&&delete this.deletedStates[r][f][g]}removeFeatureState(r,s,d){if(this.deletedStates[r]===null)return;const f=String(s);if(this.deletedStates[r]=this.deletedStates[r]||{},d&&s!==void 0)this.deletedStates[r][f]!==null&&(this.deletedStates[r][f]=this.deletedStates[r][f]||{},this.deletedStates[r][f][d]=null);else if(s!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][f])for(d in this.deletedStates[r][f]={},this.stateChanges[r][f])this.deletedStates[r][f][d]=null;else this.deletedStates[r][f]=null;else this.deletedStates[r]=null}getState(r,s){const d=String(s),f=be({},(this.state[r]||{})[d],(this.stateChanges[r]||{})[d]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const g=this.deletedStates[r][s];if(g===null)return{};for(const v in g)delete f[v]}return f}initializeTileState(r,s){r.setFeatureState(this.state,s)}coalesceChanges(r,s){const d={};for(const f in this.stateChanges){this.state[f]=this.state[f]||{};const g={};for(const v in this.stateChanges[f])this.state[f][v]||(this.state[f][v]={}),be(this.state[f][v],this.stateChanges[f][v]),g[v]=this.state[f][v];d[f]=g}for(const f in this.deletedStates){this.state[f]=this.state[f]||{};const g={};if(this.deletedStates[f]===null)for(const v in this.state[f])g[v]={},this.state[f][v]={};else for(const v in this.deletedStates[f]){if(this.deletedStates[f][v]===null)this.state[f][v]={};else if(this.state[f][v])for(const b of Object.keys(this.deletedStates[f][v]))delete this.state[f][v][b];g[v]=this.state[f][v]}d[f]=d[f]||{},be(d[f],g)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const f in r)r[f].setFeatureState(d,s)}}class KM{constructor(r){this.size=r,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(r,s){const d=this.toIdx(r,s);return{min:this.minimums[d],max:this.maximums[d]}}isLeaf(r,s){return this.leaves[this.toIdx(r,s)]}toIdx(r,s){return s*this.size+r}}function YM(a,r,s,d){let f=0,g=Number.MAX_VALUE;for(let v=0;v<3;v++)if(Math.abs(d[v])<1e-15){if(s[v]<a[v]||s[v]>r[v])return null}else{const b=1/d[v];let E=(a[v]-s[v])*b,T=(r[v]-s[v])*b;if(E>T){const A=E;E=T,T=A}if(E>f&&(f=E),T<g&&(g=T),f>g)return null}return f}function QM(a,r,s,d,f,g,v,b,E,T,A){const I=d-a,O=f-r,N=g-s,U=v-a,K=b-r,ie=E-s,ye=A[1]*ie-A[2]*K,Re=A[2]*U-A[0]*ie,ve=A[0]*K-A[1]*U,Ee=I*ye+O*Re+N*ve;if(Math.abs(Ee)<1e-15)return null;const Le=1/Ee,Pe=T[0]-a,ot=T[1]-r,tt=T[2]-s,pt=(Pe*ye+ot*Re+tt*ve)*Le;if(pt<0||pt>1)return null;const It=ot*N-tt*O,lt=tt*I-Pe*N,_t=Pe*O-ot*I,xt=(A[0]*It+A[1]*lt+A[2]*_t)*Le;return xt<0||pt+xt>1?null:(U*It+K*lt+ie*_t)*Le}function JM(a,r,s){return(a-r)/(s-r)}function eA(a,r,s,d,f,g,v,b,E){const T=1<<s,A=g-d,I=v-f,O=(a+1)/T*A+d,N=(r+0)/T*I+f,U=(r+1)/T*I+f;b[0]=(a+0)/T*A+d,b[1]=N,E[0]=O,E[1]=U}class tA{constructor(r){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=r,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const s=function(g){const v=Math.ceil(Math.log2(g.dim/8)),b=[];let E=Math.ceil(Math.pow(2,v));const T=1/E,A=(N,U,K,ie,ye)=>{const Re=ie?1:0,ve=(N+1)*K-Re,Ee=U*K,Le=(U+1)*K-Re;ye[0]=N*K,ye[1]=Ee,ye[2]=ve,ye[3]=Le};let I=new KM(E);const O=[];for(let N=0;N<E*E;N++){A(N%E,Math.floor(N/E),T,!1,O);const U=Vl(O[0],O[1],g),K=Vl(O[2],O[1],g),ie=Vl(O[2],O[3],g),ye=Vl(O[0],O[3],g);I.minimums.push(Math.min(U,K,ie,ye)),I.maximums.push(Math.max(U,K,ie,ye)),I.leaves.push(1)}for(b.push(I),E/=2;E>=1;E/=2){const N=b[b.length-1];I=new KM(E);for(let U=0;U<E*E;U++){A(U%E,Math.floor(U/E),2,!0,O);const K=N.getElevation(O[0],O[1]),ie=N.getElevation(O[2],O[1]),ye=N.getElevation(O[2],O[3]),Re=N.getElevation(O[0],O[3]),ve=N.isLeaf(O[0],O[1]),Ee=N.isLeaf(O[2],O[1]),Le=N.isLeaf(O[2],O[3]),Pe=N.isLeaf(O[0],O[3]),ot=Math.min(K.min,ie.min,ye.min,Re.min),tt=Math.max(K.max,ie.max,ye.max,Re.max),pt=ve&&Ee&&Le&&Pe;I.maximums.push(tt),I.minimums.push(ot),I.leaves.push(tt-ot<=5&&pt?1:0)}b.push(I)}return b}(this.dem),d=s.length-1,f=s[d];this._addNode(f.minimums[0],f.maximums[0],f.leaves[0]),this._construct(s,0,0,d,0)}raycastRoot(r,s,d,f,g,v,b=1){return YM([r,s,-100],[d,f,this.maximums[0]*b],g,v)}raycast(r,s,d,f,g,v,b=1){if(!this.nodeCount)return null;const E=this.raycastRoot(r,s,d,f,g,v,b);if(E==null)return null;const T=[],A=[],I=[],O=[],N=[{idx:0,t:E,nodex:0,nodey:0,depth:0}];for(;N.length>0;){const{idx:U,t:K,nodex:ie,nodey:ye,depth:Re}=N.pop();if(this.leaves[U]){eA(ie,ye,Re,r,s,d,f,I,O);const Ee=1<<Re,Le=(ie+0)/Ee,Pe=(ie+1)/Ee,ot=(ye+0)/Ee,tt=(ye+1)/Ee,pt=Vl(Le,ot,this.dem)*b,It=Vl(Pe,ot,this.dem)*b,lt=Vl(Pe,tt,this.dem)*b,_t=Vl(Le,tt,this.dem)*b,xt=QM(I[0],I[1],pt,O[0],I[1],It,O[0],O[1],lt,g,v),Tt=QM(O[0],O[1],lt,I[0],O[1],_t,I[0],I[1],pt,g,v),zt=Math.min(xt!==null?xt:Number.MAX_VALUE,Tt!==null?Tt:Number.MAX_VALUE);if(zt!==Number.MAX_VALUE)return zt;{const ht=Tp([],g,v,K);if(nA(pt,It,_t,lt,JM(ht[0],I[0],O[0]),JM(ht[1],I[1],O[1]))>=ht[2])return K}continue}let ve=0;for(let Ee=0;Ee<this._siblingOffset.length;Ee++){eA((ie<<1)+this._siblingOffset[Ee][0],(ye<<1)+this._siblingOffset[Ee][1],Re+1,r,s,d,f,I,O),I[2]=-100,O[2]=this.maximums[this.childOffsets[U]+Ee]*b;const Le=YM(I,O,g,v);if(Le!=null){const Pe=Le;T[Ee]=Pe;let ot=!1;for(let tt=0;tt<ve&&!ot;tt++)Pe>=T[A[tt]]&&(A.splice(tt,0,Ee),ot=!0);ot||(A[ve]=Ee),ve++}}for(let Ee=0;Ee<ve;Ee++){const Le=A[Ee];N.push({idx:this.childOffsets[U]+Le,t:T[Le],nodex:(ie<<1)+this._siblingOffset[Le][0],nodey:(ye<<1)+this._siblingOffset[Le][1],depth:Re+1})}}return null}_addNode(r,s,d){return this.minimums.push(r),this.maximums.push(s),this.leaves.push(d),this.childOffsets.push(0),this.nodeCount++}_construct(r,s,d,f,g){if(r[f].isLeaf(s,d)===1)return;this.childOffsets[g]||(this.childOffsets[g]=this.nodeCount);const v=f-1,b=r[v];let E=0,T=0;for(let A=0;A<this._siblingOffset.length;A++){const I=2*s+this._siblingOffset[A][0],O=2*d+this._siblingOffset[A][1],N=b.getElevation(I,O),U=b.isLeaf(I,O),K=this._addNode(N.min,N.max,U);U&&(E|=1<<A),T||(T=K)}for(let A=0;A<this._siblingOffset.length;A++)E&1<<A||this._construct(r,2*s+this._siblingOffset[A][0],2*d+this._siblingOffset[A][1],v,T+A)}}function nA(a,r,s,d,f,g){return Zn(Zn(a,s,g),Zn(r,d,g),f)}function Vl(a,r,s){const d=s.dim,f=Me(a*d-.5,0,d-1),g=Me(r*d-.5,0,d-1),v=Math.floor(f),b=Math.floor(g),E=Math.min(v+1,d-1),T=Math.min(b+1,d-1);return nA(s.get(v,b),s.get(E,b),s.get(v,T),s.get(E,T),f-v,g-b)}const rA={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function NN(a,r,s){return(256*a*256+256*r+s)/10-1e4}function $N(a,r,s){return 256*a+r+s/256-32768}class O0{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(r,s,d,f=!1,g=!1){if(this.uid=r,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(d&&d!=="mapbox"&&d!=="terrarium")return Kt(`"${d}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=s.height;const v=this.dim=s.height-2,b=new Uint32Array(s.data.buffer);if(this.pixels=new Uint8Array(s.data.buffer),this.encoding=d||"mapbox",this.borderReady=f,!f){for(let E=0;E<v;E++)b[this._idx(-1,E)]=b[this._idx(0,E)],b[this._idx(v,E)]=b[this._idx(v-1,E)],b[this._idx(E,-1)]=b[this._idx(E,0)],b[this._idx(E,v)]=b[this._idx(E,v-1)];b[this._idx(-1,-1)]=b[this._idx(0,0)],b[this._idx(v,-1)]=b[this._idx(v-1,0)],b[this._idx(-1,v)]=b[this._idx(0,v-1)],b[this._idx(v,v)]=b[this._idx(v-1,v-1)],g&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new tA(this)}get(r,s,d=!1){d&&(r=Me(r,-1,this.dim),s=Me(s,-1,this.dim));const f=4*this._idx(r,s);return(this.encoding==="terrarium"?$N:NN)(this.pixels[f],this.pixels[f+1],this.pixels[f+2])}static getUnpackVector(r){return rA[r]}get unpackVector(){return rA[this.encoding]}_idx(r,s){if(r<-1||r>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(r+1)}static pack(r,s){const d=[0,0,0,0],f=O0.getUnpackVector(s);let g=Math.floor((r+f[3])/f[2]);return d[2]=g%256,g=Math.floor(g/256),d[1]=g%256,g=Math.floor(g/256),d[0]=g,d}getPixels(){return new Ro({width:this.stride,height:this.stride},this.pixels)}backfillBorder(r,s,d){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let f=s*this.dim,g=s*this.dim+this.dim,v=d*this.dim,b=d*this.dim+this.dim;switch(s){case-1:f=g-1;break;case 1:g=f+1}switch(d){case-1:v=b-1;break;case 1:b=v+1}const E=-s*this.dim,T=-d*this.dim;for(let A=v;A<b;A++)for(let I=f;I<g;I++){const O=4*this._idx(I,A),N=4*this._idx(I+E,A+T);this.pixels[O+0]=r.pixels[N+0],this.pixels[O+1]=r.pixels[N+1],this.pixels[O+2]=r.pixels[N+2],this.pixels[O+3]=r.pixels[N+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Jt(O0,"DEMData"),Jt(tA,"DemMinMaxQuadTree",{omit:["dem"]});class UN{constructor(r,s){this.max=r,this.onRemove=s,this.reset()}reset(){for(const r in this.data)for(const s of this.data[r])s.timeout&&clearTimeout(s.timeout),this.onRemove(s.value);return this.data={},this.order=[],this}add(r,s,d){const f=r.wrapped().key;this.data[f]===void 0&&(this.data[f]=[]);const g={value:s,timeout:void 0};if(d!==void 0&&(g.timeout=setTimeout(()=>{this.remove(r,g)},d)),this.data[f].push(g),this.order.push(f),this.order.length>this.max){const v=this._getAndRemoveByKey(this.order[0]);v&&this.onRemove(v)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const s=this.data[r].shift();return s.timeout&&clearTimeout(s.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),s.value}getByKey(r){const s=this.data[r];return s?s[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,s){if(!this.has(r))return this;const d=r.wrapped().key,f=s===void 0?0:this.data[d].indexOf(s),g=this.data[d][f];return this.data[d].splice(f,1),g.timeout&&clearTimeout(g.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(g.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this}filter(r){const s=[];for(const d in this.data)for(const f of this.data[d])r(f.value)||s.push(f);for(const d of s)this.remove(d.value.tileID,d)}}class nh{constructor(r,s,d){this.func=r,this.mask=s,this.range=d}}nh.ReadOnly=!1,nh.ReadWrite=!0,nh.disabled=new nh(519,nh.ReadOnly,[0,1]);const Nb=7680;class $b{constructor(r,s,d,f,g,v){this.test=r,this.ref=s,this.mask=d,this.fail=f,this.depthFail=g,this.pass=v}}$b.disabled=new $b({func:519,mask:0},0,0,Nb,Nb,Nb);class us{constructor(r,s,d){this.blendFunction=r,this.blendColor=s,this.mask=d}}us.Replace=[1,0],us.disabled=new us(us.Replace,Xr.transparent,[!1,!1,!1,!1]),us.unblended=new us(us.Replace,Xr.transparent,[!0,!0,!0,!0]),us.alphaBlended=new us([1,771],Xr.transparent,[!0,!0,!0,!0]);const Ub=1029,jb=2305;class ja{constructor(r,s,d){this.enable=r,this.mode=s,this.frontFace=d}}ja.disabled=new ja(!1,Ub,jb),ja.backCCW=new ja(!0,Ub,jb),ja.backCW=new ja(!0,Ub,2304),ja.frontCW=new ja(!0,1028,2304),ja.frontCCW=new ja(!0,1028,jb);class xu extends Fc{constructor(r,s,d){super(),this.id=r,this._onlySymbols=d,s.on("data",f=>{f.dataType==="source"&&f.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&f.dataType==="source"&&f.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),s.on("error",()=>{this._sourceErrored=!0}),this._source=s,this._tiles={},this._cache=new UN(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=s.minTileCacheSize,this._maxTileCacheSize=s.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new BN,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(r){this.map=r,this._minTileCacheSize=this._minTileCacheSize===void 0&&r?r._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&r?r._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const r in this._tiles){const s=this._tiles[r];if(s.state!=="loaded"&&s.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(r,s){return r.isSymbolTile=this._onlySymbols,this._source.loadTile(r,s)}_unloadTile(r){if(this._source.unloadTile)return this._source.unloadTile(r,()=>{})}_abortTile(r){if(this._source.abortTile)return this._source.abortTile(r,()=>{})}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const s in this._tiles){const d=this._tiles[s];d.upload(r),d.prepare(this.map.style.imageManager)}}getIds(){return we(this._tiles).map(r=>r.tileID).sort(iA).map(r=>r.key)}getRenderableIds(r){const s=[];for(const d in this._tiles)this._isIdRenderable(+d,r)&&s.push(this._tiles[d]);return r?s.sort((d,f)=>{const g=d.tileID,v=f.tileID,b=new J(g.canonical.x,g.canonical.y)._rotate(this.transform.angle),E=new J(v.canonical.x,v.canonical.y)._rotate(this.transform.angle);return g.overscaledZ-v.overscaledZ||E.y-b.y||E.x-b.x}).map(d=>d.tileID.key):s.map(d=>d.tileID).sort(iA).map(d=>d.key)}hasRenderableParent(r){const s=this.findLoadedParent(r,0);return!!s&&this._isIdRenderable(s.tileID.key)}_isIdRenderable(r,s){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(s||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(+r,"reloading")}}_reloadTile(r,s){const d=this._tiles[r];d&&(d.state!=="loading"&&(d.state=s),this._loadTile(d,this._tileLoaded.bind(this,d,r,s)))}_tileLoaded(r,s,d,f){if(f)if(r.state="errored",f.status!==404)this._source.fire(new Ta(f,{tile:r}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const g=this.map.painter.terrain;this.update(this.transform,g.getScaledDemTileSize(),!0),g.resetTileLookupCache(this.id)}else this.update(this.transform);else r.timeAdded=Ea.now(),d==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(s,r),this._source.type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),this._source.fire(new Cs("data",{dataType:"source",tile:r,coord:r.tileID,sourceCacheId:this.id}))}_backfillDEM(r){const s=this.getRenderableIds();for(let f=0;f<s.length;f++){const g=s[f];if(r.neighboringTiles&&r.neighboringTiles[g]){const v=this.getTileByID(g);d(r,v),d(v,r)}}function d(f,g){if(!f.dem||f.dem.borderReady)return;f.needsHillshadePrepare=!0,f.needsDEMTextureUpload=!0;let v=g.tileID.canonical.x-f.tileID.canonical.x;const b=g.tileID.canonical.y-f.tileID.canonical.y,E=Math.pow(2,f.tileID.canonical.z),T=g.tileID.key;v===0&&b===0||Math.abs(b)>1||(Math.abs(v)>1&&(Math.abs(v+E)===1?v+=E:Math.abs(v-E)===1&&(v-=E)),g.dem&&f.dem&&(f.dem.backfillBorder(g.dem,v,b),f.neighboringTiles&&f.neighboringTiles[T]&&(f.neighboringTiles[T].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,s,d,f){for(const g in this._tiles){let v=this._tiles[g];if(f[g]||!v.hasData()||v.tileID.overscaledZ<=s||v.tileID.overscaledZ>d)continue;let b=v.tileID;for(;v&&v.tileID.overscaledZ>s+1;){const T=v.tileID.scaledTo(v.tileID.overscaledZ-1);v=this._tiles[T.key],v&&v.hasData()&&(b=T)}let E=b;for(;E.overscaledZ>s;)if(E=E.scaledTo(E.overscaledZ-1),r[E.key]){f[b.key]=b;break}}}findLoadedParent(r,s){if(r.key in this._loadedParentTiles){const d=this._loadedParentTiles[r.key];return d&&d.tileID.overscaledZ>=s?d:null}for(let d=r.overscaledZ-1;d>=s;d--){const f=r.scaledTo(d),g=this._getLoadedTile(f);if(g)return g}}_getLoadedTile(r){const s=this._tiles[r.key];return s&&s.hasData()?s:this._cache.getByKey(this._source.reparseOverscaled?r.wrapped().key:r.canonical.key)}updateCacheSize(r,s){s=s||this._source.tileSize;const d=Math.ceil(r.width/s)+1,f=Math.ceil(r.height/s)+1,g=Math.floor(d*f*5),v=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,g):g,b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(b)}handleWrapJump(r){const s=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,s){const d={};for(const f in this._tiles){const g=this._tiles[f];g.tileID=g.tileID.unwrapTo(g.tileID.wrap+s),d[g.tileID.key]=g}this._tiles=d;for(const f in this._timers)clearTimeout(this._timers[f]),delete this._timers[f];for(const f in this._tiles)this._setTileReloadTimer(+f,this._tiles[f])}}update(r,s,d){if(this.transform=r,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!d)return;let f;this.updateCacheSize(r,s),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(b=>new ro(b.canonical.z,b.wrap,b.canonical.z,b.canonical.x,b.canonical.y)):(f=r.coveringTiles({tileSize:s||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!d,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(f=f.filter(b=>this._source.hasTile(b)))):f=[];const g=this._updateRetainedTiles(f);if(oA(this._source.type)&&f.length!==0){const b={},E={},T=Object.keys(g);for(const I of T){const O=g[I],N=this._tiles[I];if(!N||N.fadeEndTime&&N.fadeEndTime<=Ea.now())continue;const U=this.findLoadedParent(O,Math.max(O.overscaledZ-xu.maxOverzooming,this._source.minzoom));U&&(this._addTile(U.tileID),b[U.tileID.key]=U.tileID),E[I]=O}const A=f[f.length-1].overscaledZ;for(const I in this._tiles){const O=this._tiles[I];if(g[I]||!O.hasData())continue;let N=O.tileID;for(;N.overscaledZ>A;){N=N.scaledTo(N.overscaledZ-1);const U=this._tiles[N.key];if(U&&U.hasData()&&E[N.key]){g[I]=O.tileID;break}}}for(const I in b)g[I]||(this._coveredTiles[I]=!0,g[I]=b[I])}for(const b in g)this._tiles[b].clearFadeHold();const v=function(b,E){const T=[];for(const A in b)A in E||T.push(A);return T}(this._tiles,g);for(const b of v){const E=this._tiles[b];E.hasSymbolBuckets&&!E.holdingForFade()?E.setHoldDuration(this.map._fadeDuration):E.hasSymbolBuckets&&!E.symbolFadeFinished()||this._removeTile(+b)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(+r)}_updateRetainedTiles(r){const s={};if(r.length===0)return s;const d={},f=r.reduce((T,A)=>Math.min(T,A.overscaledZ),1/0),g=r[0].overscaledZ,v=Math.max(g-xu.maxOverzooming,this._source.minzoom),b=Math.max(g+xu.maxUnderzooming,this._source.minzoom),E={};for(const T of r){const A=this._addTile(T);s[T.key]=T,A.hasData()||f<this._source.maxzoom&&(E[T.key]=T)}this._retainLoadedChildren(E,f,b,s);for(const T of r){let A=this._tiles[T.key];if(A.hasData())continue;if(T.canonical.z>=this._source.maxzoom){const O=T.children(this._source.maxzoom)[0],N=this.getTile(O);if(N&&N.hasData()){s[O.key]=O;continue}}else{const O=T.children(this._source.maxzoom);if(s[O[0].key]&&s[O[1].key]&&s[O[2].key]&&s[O[3].key])continue}let I=A.wasRequested();for(let O=T.overscaledZ-1;O>=v;--O){const N=T.scaledTo(O);if(d[N.key]||(d[N.key]=!0,A=this.getTile(N),!A&&I&&(A=this._addTile(N)),A&&(s[N.key]=N,I=A.wasRequested(),A.hasData())))break}}return s}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const s=[];let d,f=this._tiles[r].tileID;for(;f.overscaledZ>0;){if(f.key in this._loadedParentTiles){d=this._loadedParentTiles[f.key];break}s.push(f.key);const g=f.scaledTo(f.overscaledZ-1);if(d=this._getLoadedTile(g),d)break;f=g}for(const g of s)this._loadedParentTiles[g]=d}}_addTile(r){let s=this._tiles[r.key];if(s)return s;s=this._cache.getAndRemove(r),s&&(this._setTileReloadTimer(r.key,s),s.tileID=r,this._state.initializeTileState(s,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,s)));const d=!!s;if(!d){const f=this.map?this.map.painter:null;s=new Bb(r,this._source.tileSize*r.overscaleFactor(),this.transform.tileZoom,f,this._isRaster),this._loadTile(s,this._tileLoaded.bind(this,s,r.key,s.state))}return s?(s.uses++,this._tiles[r.key]=s,d||this._source.fire(new Cs("dataloading",{tile:s,coord:s.tileID,dataType:"source"})),s):null}_setTileReloadTimer(r,s){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const d=s.getExpiryTimeout();d&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},d))}_removeTile(r){const s=this._tiles[r];s&&(s.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),s.uses>0||(s.hasData()&&s.state!=="reloading"?this._cache.add(s.tileID,s,s.getExpiryTimeout()):(s.aborted=!0,this._abortTile(s),this._unloadTile(s))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(+r);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(r,s,d){const f=[],g=this.transform;if(!g)return f;const v=g.projection.name==="globe",b=as(g.center.lng);for(const E in this._tiles){const T=this._tiles[E];if(d&&T.clearQueryDebugViz(),T.holdingForFade())continue;let A;if(v){const I=T.tileID.canonical;if(I.z===0){const O=[Math.abs(Me(b,...Kp(I,-1))-b),Math.abs(Me(b,...Kp(I,1))-b)];A=[0,2*O.indexOf(Math.min(...O))-1]}else{const O=[Math.abs(Me(b,...Kp(I,-1))-b),Math.abs(Me(b,...Kp(I,0))-b),Math.abs(Me(b,...Kp(I,1))-b)];A=[O.indexOf(Math.min(...O))-1]}}else A=[0];for(const I of A){const O=r.containsTile(T,g,s,I);O&&f.push(O)}}return f}getVisibleCoordinates(r){const s=this.getRenderableIds(r).map(d=>this._tiles[d].tileID);for(const d of s)d.projMatrix=this.transform.calculateProjMatrix(d.toUnwrapped());return s}hasTransition(){if(this._source.hasTransition())return!0;if(oA(this._source.type))for(const r in this._tiles){const s=this._tiles[r];if(s.fadeEndTime!==void 0&&s.fadeEndTime>=Ea.now())return!0}return!1}setFeatureState(r,s,d){this._state.updateState(r=r||"_geojsonTileLayer",s,d)}removeFeatureState(r,s,d){this._state.removeFeatureState(r=r||"_geojsonTileLayer",s,d)}getFeatureState(r,s){return this._state.getState(r=r||"_geojsonTileLayer",s)}setDependencies(r,s,d){const f=this._tiles[r];f&&f.setDependencies(s,d)}reloadTilesForDependencies(r,s){for(const d in this._tiles)this._tiles[d].hasDependency(r,s)&&this._reloadTile(+d,"reloading");this._cache.filter(d=>!d.hasDependency(r,s))}_preloadTiles(r,s){if(!this._sourceLoaded){const b=()=>{this._sourceLoaded&&(this._source.off("data",b),this._preloadTiles(r,s))};return void this._source.on("data",b)}const d=new Map,f=Array.isArray(r)?r:[r],g=this.map.painter.terrain,v=this.usedForTerrain&&g?g.getScaledDemTileSize():this._source.tileSize;for(const b of f){const E=b.coveringTiles({tileSize:v,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const T of E)d.set(T.key,T);this.usedForTerrain&&b.updateElevation(!1)}Ve(Array.from(d.values()),(b,E)=>{const T=new Bb(b,this._source.tileSize*b.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(T,A=>{this._source.type==="raster-dem"&&T.dem&&this._backfillDEM(T),E(A,T)})},s)}}function iA(a,r){const s=Math.abs(2*a.wrap)-+(a.wrap<0),d=Math.abs(2*r.wrap)-+(r.wrap<0);return a.overscaledZ-r.overscaledZ||d-s||r.canonical.y-a.canonical.y||r.canonical.x-a.canonical.x}function oA(a){return a==="raster"||a==="image"||a==="video"||a==="custom"}function Kp(a,r){const s=1<<a.z;return[a.x/s+r,(a.x+1)/s+r]}xu.maxOverzooming=10,xu.maxUnderzooming=3;class D0{constructor(r,s,d){this._demTile=r,this._dem=this._demTile.dem,this._scale=s,this._offset=d}static create(r,s,d){const f=d||r.findDEMTileFor(s);if(!f||!f.dem)return;const g=f.dem,v=f.tileID,b=1<<s.canonical.z-v.canonical.z;return new D0(f,f.tileSize/pn/b,[(s.canonical.x/b-v.canonical.x)*g.dim,(s.canonical.y/b-v.canonical.y)*g.dim])}tileCoordToPixel(r,s){const d=s*this._scale+this._offset[1],f=Math.floor(r*this._scale+this._offset[0]),g=Math.floor(d);return new J(f,g)}getElevationAt(r,s,d,f){const g=r*this._scale+this._offset[0],v=s*this._scale+this._offset[1],b=Math.floor(g),E=Math.floor(v),T=this._dem;return f=!!f,d?Zn(Zn(T.get(b,E,f),T.get(b,E+1,f),v-E),Zn(T.get(b+1,E,f),T.get(b+1,E+1,f),v-E),g-b):T.get(b,E,f)}getElevationAtPixel(r,s,d){return this._dem.get(r,s,!!d)}getMeterToDEM(r){return(1<<this._demTile.tileID.canonical.z)*Na(1,r)*this._dem.stride}}class aA{constructor(r,s){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new Ls(pn,16,0),this.featureIndexArray=new lu,this.promoteId=s}insert(r,s,d,f,g,v=0){const b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,f,g,v);const E=this.grid;for(let T=0;T<s.length;T++){const A=s[T],I=[1/0,1/0,-1/0,-1/0];for(let O=0;O<A.length;O++){const N=A[O];I[0]=Math.min(I[0],N.x),I[1]=Math.min(I[1],N.y),I[2]=Math.max(I[2],N.x),I[3]=Math.max(I[3],N.y)}I[0]<pn&&I[1]<pn&&I[2]>=0&&I[3]>=0&&E.insert(b,I[0],I[1],I[2],I[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new wb(new b0(this.rawTileData)).layers,this.sourceLayerCoder=new WM(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const r in this.vtLayers)this.vtFeatures[r]=[]}return this.vtLayers}query(r,s,d,f){this.loadVTLayers();const g=r.params||{},v=Pd(g.filter),b=r.tileResult,E=r.transform,T=b.bufferedTilespaceBounds,A=this.grid.query(T.min.x,T.min.y,T.max.x,T.max.y,(U,K,ie,ye)=>PR(b.bufferedTilespaceGeometry,U,K,ie,ye));A.sort(jN);let I=null;E.elevation&&A.length>0&&(I=D0.create(E.elevation,this.tileID));const O={};let N;for(let U=0;U<A.length;U++){const K=A[U];if(K===N)continue;N=K;const ie=this.featureIndexArray.get(K);let ye=null;this.loadMatchingFeature(O,ie,v,g.layers,g.availableImages,s,d,f,(Re,ve,Ee,Le=0)=>(ye||(ye=$s(Re,this.tileID.canonical,r.tileTransform)),ve.queryIntersectsFeature(b,Re,Ee,ye,this.z,r.transform,r.pixelPosMatrix,I,Le)))}return O}loadMatchingFeature(r,s,d,f,g,v,b,E,T){const{featureIndex:A,bucketIndex:I,sourceLayerIndex:O,layoutVertexArrayOffset:N}=s,U=this.bucketLayerIDs[I];if(f&&!function(Re,ve){for(let Ee=0;Ee<Re.length;Ee++)if(ve.indexOf(Re[Ee])>=0)return!0;return!1}(f,U))return;const K=this.sourceLayerCoder.decode(O),ie=this.vtLayers[K].feature(A);if(d.needGeometry){const Re=gu(ie,!0);if(!d.filter(new P(this.tileID.overscaledZ),Re,this.tileID.canonical))return}else if(!d.filter(new P(this.tileID.overscaledZ),ie))return;const ye=this.getId(ie,K);for(let Re=0;Re<U.length;Re++){const ve=U[Re];if(f&&f.indexOf(ve)<0)continue;const Ee=v[ve];if(!Ee)continue;let Le={};ye!==void 0&&E&&(Le=E.getState(Ee.sourceLayer||"_geojsonTileLayer",ye));const Pe=be({},b[ve]);Pe.paint=sA(Pe.paint,Ee.paint,ie,Le,g),Pe.layout=sA(Pe.layout,Ee.layout,ie,Le,g);const ot=!T||T(ie,Ee,Le,N);if(!ot)continue;const tt=new qM(ie,this.z,this.x,this.y,ye);tt.layer=Pe;let pt=r[ve];pt===void 0&&(pt=r[ve]=[]),pt.push({featureIndex:A,feature:tt,intersectionZ:ot})}}lookupSymbolFeatures(r,s,d,f,g,v,b,E){const T={};this.loadVTLayers();const A=Pd(g);for(const I of r)this.loadMatchingFeature(T,{bucketIndex:d,sourceLayerIndex:f,featureIndex:I,layoutVertexArrayOffset:0},A,v,b,E,s);return T}loadFeature(r){const{featureIndex:s,sourceLayerIndex:d}=r;this.loadVTLayers();const f=this.sourceLayerCoder.decode(d),g=this.vtFeatures[f];if(g[s])return g[s];const v=this.vtLayers[f].feature(s);return g[s]=v,v}hasLayer(r){for(const s of this.bucketLayerIDs)for(const d of s)if(r===d)return!0;return!1}getId(r,s){let d=r.id;if(this.promoteId){const f=typeof this.promoteId=="string"?this.promoteId:this.promoteId[s];f!=null&&(d=r.properties[f]),typeof d=="boolean"&&(d=Number(d))}return d}}function sA(a,r,s,d,f){return ct(a,(g,v)=>{const b=r instanceof me?r.get(v):null;return b&&b.evaluate?b.evaluate(s,d,f):b})}function jN(a,r){return r-a}Jt(aA,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class lA{constructor(r,s){this.width=r,this.height=s,this.nextRow=0,this.image=new Us({width:r,height:s}),this.positions={},this.uploaded=!1}getDash(r,s){const d=this.getKey(r,s);return this.positions[d]}trim(){const r=this.width,s=this.height=At(this.nextRow);this.image.resize({width:r,height:s})}getKey(r,s){return r.join(",")+s}getDashRanges(r,s,d){const f=[];let g=r.length%2==1?-r[r.length-1]*d:0,v=r[0]*d,b=!0;f.push({left:g,right:v,isDash:b,zeroLength:r[0]===0});let E=r[0];for(let T=1;T<r.length;T++){b=!b;const A=r[T];g=E*d,E+=A,v=E*d,f.push({left:g,right:v,isDash:b,zeroLength:A===0})}return f}addRoundDash(r,s,d){const f=s/2;for(let g=-d;g<=d;g++){const v=this.width*(this.nextRow+d+g);let b=0,E=r[b];for(let T=0;T<this.width;T++){T/E.right>1&&(E=r[++b]);const A=Math.abs(T-E.left),I=Math.abs(T-E.right),O=Math.min(A,I);let N;const U=g/d*(f+1);if(E.isDash){const K=f-Math.abs(U);N=Math.sqrt(O*O+K*K)}else N=f-Math.sqrt(O*O+U*U);this.image.data[v+T]=Math.max(0,Math.min(255,N+128))}}}addRegularDash(r,s){for(let E=r.length-1;E>=0;--E){const T=r[E],A=r[E+1];T.zeroLength?r.splice(E,1):A&&A.isDash===T.isDash&&(A.left=T.left,r.splice(E,1))}const d=r[0],f=r[r.length-1];d.isDash===f.isDash&&(d.left=f.left-this.width,f.right=d.right+this.width);const g=this.width*this.nextRow;let v=0,b=r[v];for(let E=0;E<this.width;E++){E/b.right>1&&(b=r[++v]);const T=Math.abs(E-b.left),A=Math.abs(E-b.right),I=Math.min(T,A);this.image.data[g+E]=Math.max(0,Math.min(255,(b.isDash?I:-I)+s+128))}}addDash(r,s){const d=this.getKey(r,s);if(this.positions[d])return this.positions[d];const f=s==="round",g=f?7:0,v=2*g+1;if(this.nextRow+v>this.height)return Kt("LineAtlas out of space"),null;r.length===0&&r.push(1);let b=0;for(let A=0;A<r.length;A++)r[A]<0&&(Kt("Negative value is found in line dasharray, replacing values with 0"),r[A]=0),b+=r[A];if(b!==0){const A=this.width/b,I=this.getDashRanges(r,this.width,A);f?this.addRoundDash(I,A,g):this.addRegularDash(I,s==="square"?.5*A:0)}const E=this.nextRow+g;this.nextRow+=v;const T={tl:[E,g],br:[b,0]};return this.positions[d]=T,T}}Jt(lA,"LineAtlas");const cA=1*Ua;class uA{constructor(r){const s={},d=[];for(const b in r){const E=r[b],T=s[b]={};for(const A in E.glyphs){const I=E.glyphs[+A];if(!I||I.bitmap.width===0||I.bitmap.height===0)continue;const O=I.metrics.localGlyph?cA:1,N={x:0,y:0,w:I.bitmap.width+2*O,h:I.bitmap.height+2*O};d.push(N),T[A]=N}}const{w:f,h:g}=Cb(d),v=new Us({width:f||1,height:g||1});for(const b in r){const E=r[b];for(const T in E.glyphs){const A=E.glyphs[+T];if(!A||A.bitmap.width===0||A.bitmap.height===0)continue;const I=s[b][T],O=A.metrics.localGlyph?cA:1;Us.copy(A.bitmap,v,{x:0,y:0},{x:I.x+O,y:I.y+O},A.bitmap)}}this.image=v,this.positions=s}}Jt(uA,"GlyphAtlas");class VN{constructor(r){this.tileID=new ro(r.tileID.overscaledZ,r.tileID.wrap,r.tileID.canonical.z,r.tileID.canonical.x,r.tileID.canonical.y),this.tileZoom=r.tileZoom,this.uid=r.uid,this.zoom=r.zoom,this.canonical=r.tileID.canonical,this.pixelRatio=r.pixelRatio,this.tileSize=r.tileSize,this.source=r.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=r.showCollisionBoxes,this.collectResourceTiming=!!r.collectResourceTiming,this.returnDependencies=!!r.returnDependencies,this.promoteId=r.promoteId,this.enableTerrain=!!r.enableTerrain,this.isSymbolTile=r.isSymbolTile,this.tileTransform=_u(r.tileID.canonical,r.projection),this.projection=r.projection}parse(r,s,d,f,g){this.status="parsing",this.data=r,this.collisionBoxArray=new pr;const v=new WM(Object.keys(r.layers).sort()),b=new aA(this.tileID,this.promoteId);b.bucketLayerIDs=[];const E={},T=new lA(256,256),A={featureIndex:b,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:T,availableImages:d},I=s.familiesBySource[this.source];for(const Le in I){const Pe=r.layers[Le];if(!Pe)continue;let ot=!1,tt=!1;for(const lt of I[Le])lt[0].type==="symbol"?ot=!0:tt=!0;if(this.isSymbolTile===!0&&!ot||this.isSymbolTile===!1&&!tt)continue;Pe.version===1&&Kt(`Vector tile source "${this.source}" layer "${Le}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const pt=v.encode(Le),It=[];for(let lt=0;lt<Pe.length;lt++){const _t=Pe.feature(lt),xt=b.getId(_t,Le);It.push({feature:_t,id:xt,index:lt,sourceLayerIndex:pt})}for(const lt of I[Le]){const _t=lt[0];this.isSymbolTile!==void 0&&_t.type==="symbol"!==this.isSymbolTile||_t.minzoom&&this.zoom<Math.floor(_t.minzoom)||_t.maxzoom&&this.zoom>=_t.maxzoom||_t.visibility!=="none"&&(Vb(lt,this.zoom,d),(E[_t.id]=_t.createBucket({index:b.bucketLayerIDs.length,layers:lt,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:pt,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:d})).populate(It,A,this.tileID.canonical,this.tileTransform),b.bucketLayerIDs.push(lt.map(xt=>xt.id)))}}let O,N,U,K;T.trim();const ie={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},ye=()=>{if(O)return g(O);if(N&&U&&K){const Le=new uA(N),Pe=new yM(U,K);for(const ot in E){const tt=E[ot];tt instanceof $l?(Vb(tt.layers,this.zoom,d),mN(tt,N,Le.positions,U,Pe.iconPositions,this.showCollisionBoxes,d,this.tileID.canonical,this.tileZoom,this.projection)):tt.hasPattern&&(tt instanceof v0||tt instanceof f0||tt instanceof Bp)&&(Vb(tt.layers,this.zoom,d),tt.addFeatures(A,this.tileID.canonical,Pe.patternPositions,d,this.tileTransform))}this.status="done",g(null,{buckets:we(E).filter(ot=>!ot.isEmpty()),featureIndex:b,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Le.image,lineAtlas:T,imageAtlas:Pe,glyphMap:this.returnDependencies?N:null,iconMap:this.returnDependencies?U:null,glyphPositions:this.returnDependencies?Le.positions:null})}},Re=ct(A.glyphDependencies,Le=>Object.keys(Le).map(Number));Object.keys(Re).length?f.send("getGlyphs",{uid:this.uid,stacks:Re},(Le,Pe)=>{O||(O=Le,N=Pe,ye())},void 0,!1,ie):N={};const ve=Object.keys(A.iconDependencies);ve.length?f.send("getImages",{icons:ve,source:this.source,tileID:this.tileID,type:"icons"},(Le,Pe)=>{O||(O=Le,U=Pe,ye())},void 0,!1,ie):U={};const Ee=Object.keys(A.patternDependencies);Ee.length?f.send("getImages",{icons:Ee,source:this.source,tileID:this.tileID,type:"patterns"},(Le,Pe)=>{O||(O=Le,K=Pe,ye())},void 0,!1,ie):K={},ye()}}function Vb(a,r,s){const d=new P(r);for(const f of a)f.recalculate(d,s)}class dA{constructor(r){this.entries={},this.scheduler=r}request(r,s,d,f){const g=this.entries[r]=this.entries[r]||{callbacks:[]};if(g.result){const[v,b]=g.result;return this.scheduler?this.scheduler.add(()=>{f(v,b)},s):f(v,b),()=>{}}return g.callbacks.push(f),g.cancel||(g.cancel=d((v,b)=>{g.result=[v,b];for(const E of g.callbacks)this.scheduler?this.scheduler.add(()=>{E(v,b)},s):E(v,b);setTimeout(()=>delete this.entries[r],3e3)})),()=>{g.result||(g.callbacks=g.callbacks.filter(v=>v!==f),g.callbacks.length||(g.cancel(),delete this.entries[r]))}}}function hA(a,r,s){const d=JSON.stringify(a.request);return a.data&&(this.deduped.entries[d]={result:[null,a.data]}),this.deduped.request(d,{type:"parseTile",isSymbolTile:a.isSymbolTile,zoom:a.tileZoom},f=>{const g=dt(a.request,(v,b,E,T)=>{v?f(v):b&&f(null,{vectorTile:s?void 0:new wb(new b0(b)),rawData:b,cacheControl:E,expires:T})});return()=>{g.cancel(),f()}},r)}const fA=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Gb{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,d]=new Uint8Array(r,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const f=d>>4;if(f!==1)throw new Error(`Got v${f} data when expected v1.`);const g=fA[15&d];if(!g)throw new Error("Unrecognized array type.");const[v]=new Uint16Array(r,2,1),[b]=new Uint32Array(r,4,1);return new Gb(b,v,g,r)}constructor(r,s=64,d=Float64Array,f){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=d,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const g=fA.indexOf(this.ArrayType),v=2*r*this.ArrayType.BYTES_PER_ELEMENT,b=r*this.IndexArrayType.BYTES_PER_ELEMENT,E=(8-b%8)%8;if(g<0)throw new Error(`Unexpected typed array class: ${d}.`);f&&f instanceof ArrayBuffer?(this.data=f,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+b+E,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+v+b+E),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+b+E,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+g]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=r)}add(r,s){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=r,this.coords[this._pos++]=s,d}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return Wb(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,s,d,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:v,nodeSize:b}=this,E=[0,g.length-1,0],T=[];for(;E.length;){const A=E.pop()||0,I=E.pop()||0,O=E.pop()||0;if(I-O<=b){for(let ie=O;ie<=I;ie++){const ye=v[2*ie],Re=v[2*ie+1];ye>=r&&ye<=d&&Re>=s&&Re<=f&&T.push(g[ie])}continue}const N=O+I>>1,U=v[2*N],K=v[2*N+1];U>=r&&U<=d&&K>=s&&K<=f&&T.push(g[N]),(A===0?r<=U:s<=K)&&(E.push(O),E.push(N-1),E.push(1-A)),(A===0?d>=U:f>=K)&&(E.push(N+1),E.push(I),E.push(1-A))}return T}within(r,s,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:g,nodeSize:v}=this,b=[0,f.length-1,0],E=[],T=d*d;for(;b.length;){const A=b.pop()||0,I=b.pop()||0,O=b.pop()||0;if(I-O<=v){for(let ie=O;ie<=I;ie++)mA(g[2*ie],g[2*ie+1],r,s)<=T&&E.push(f[ie]);continue}const N=O+I>>1,U=g[2*N],K=g[2*N+1];mA(U,K,r,s)<=T&&E.push(f[N]),(A===0?r-d<=U:s-d<=K)&&(b.push(O),b.push(N-1),b.push(1-A)),(A===0?r+d>=U:s+d>=K)&&(b.push(N+1),b.push(I),b.push(1-A))}return E}}function Wb(a,r,s,d,f,g){if(f-d<=s)return;const v=d+f>>1;pA(a,r,v,d,f,g),Wb(a,r,s,d,v-1,1-g),Wb(a,r,s,v+1,f,1-g)}function pA(a,r,s,d,f,g){for(;f>d;){if(f-d>600){const T=f-d+1,A=s-d+1,I=Math.log(T),O=.5*Math.exp(2*I/3),N=.5*Math.sqrt(I*O*(T-O)/T)*(A-T/2<0?-1:1);pA(a,r,s,Math.max(d,Math.floor(s-A*O/T+N)),Math.min(f,Math.floor(s+(T-A)*O/T+N)),g)}const v=r[2*s+g];let b=d,E=f;for(Yp(a,r,d,s),r[2*f+g]>v&&Yp(a,r,d,f);b<E;){for(Yp(a,r,b,E),b++,E--;r[2*b+g]<v;)b++;for(;r[2*E+g]>v;)E--}r[2*d+g]===v?Yp(a,r,d,E):(E++,Yp(a,r,E,f)),E<=s&&(d=E+1),s<=E&&(f=E-1)}}function Yp(a,r,s,d){qb(a,s,d),qb(r,2*s,2*d),qb(r,2*s+1,2*d+1)}function qb(a,r,s){const d=a[r];a[r]=a[s],a[s]=d}function mA(a,r,s,d){const f=a-s,g=r-d;return f*f+g*g}o.ARRAY_TYPE=Co,o.AUTH_ERR_MSG=ge,o.Aabb=no,o.Actor=class{constructor(a,r,s){this.target=a,this.parent=r,this.mapId=s,this.callbacks={},this.cancelCallbacks={},Rt(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Xn()?a:x,this.scheduler=new zN}send(a,r,s,d,f=!1,g){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(s.metadata=g,this.callbacks[v]=s);const b=qn(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:a,hasCallback:!!s,targetMapId:d,mustQueue:f,sourceMapId:this.mapId,data:Il(r,b)},b),{cancel:()=>{s&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:d,sourceMapId:this.mapId})}}}receive(a){const r=a.data,s=r.id;if(s&&(!r.targetMapId||this.mapId===r.targetMapId))if(r.type==="<cancel>"){const d=this.cancelCallbacks[s];delete this.cancelCallbacks[s],d&&d.cancel()}else if(r.mustQueue||Xn()){const d=this.callbacks[s];this.cancelCallbacks[s]=this.scheduler.add(()=>this.processTask(s,r),d&&d.metadata||{type:"message"})}else this.processTask(s,r)}processTask(a,r){if(r.type==="<response>"){const s=this.callbacks[a];delete this.callbacks[a],s&&(r.error?s(Os(r.error)):s(null,Os(r.data)))}else{const s=qn(this.globalScope)?void 0:[],d=r.hasCallback?(g,v)=>{delete this.cancelCallbacks[a],this.target.postMessage({id:a,type:"<response>",sourceMapId:this.mapId,error:g?Il(g):null,data:Il(v,s)},s)}:g=>{},f=Os(r.data);if(this.parent[r.type])this.parent[r.type](r.sourceMapId,f,d);else if(this.parent.getWorkerSource){const g=r.type.split(".");this.parent.getWorkerSource(r.sourceMapId,g[0],f.source)[g[1]](f,d)}else d(new Error(`Could not find function ${r.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},o.CanonicalTileID=y0,o.Color=Xr,o.ColorMode=us,o.CullFaceMode=ja,o.DEMData=O0,o.DataConstantProperty=H,o.DedupedRequest=dA,o.DepthMode=nh,o.EXTENT=pn,o.Elevation=class{isDataAvailableAtPoint(a){const r=this._source();if(this.isUsingMockSource()||!r||a.y<0||a.y>1)return!1;const s=r.getSource().maxzoom,d=1<<s,f=Math.floor(a.x),g=Math.floor((a.x-f)*d),v=Math.floor(a.y*d),b=this.findDEMTileFor(new ro(s,f,s,g,v));return!(!b||!b.dem)}getAtPointOrZero(a,r=0){return this.getAtPoint(a,r)||0}getAtPoint(a,r,s=!0){if(this.isUsingMockSource())return null;r==null&&(r=null);const d=this._source();if(!d||a.y<0||a.y>1)return r;const f=d.getSource().maxzoom,g=1<<f,v=Math.floor(a.x),b=a.x-v,E=new ro(f,v,f,Math.floor(b*g),Math.floor(a.y*g)),T=this.findDEMTileFor(E);if(!T||!T.dem)return r;const A=T.dem,I=1<<T.tileID.canonical.z,O=(b*I-T.tileID.canonical.x)*A.dim,N=(a.y*I-T.tileID.canonical.y)*A.dim,U=Math.floor(O),K=Math.floor(N);return(s?this.exaggeration():1)*Zn(Zn(A.get(U,K),A.get(U,K+1),N-K),Zn(A.get(U+1,K),A.get(U+1,K+1),N-K),O-U)}getAtTileOffset(a,r,s){const d=1<<a.canonical.z;return this.getAtPointOrZero(new jd(a.wrap+(a.canonical.x+r/pn)/d,(a.canonical.y+s/pn)/d))}getAtTileOffsetFunc(a,r,s,d){return f=>{const g=this.getAtTileOffset(a,f.x,f.y),v=d.upVector(a.canonical,f.x,f.y);return Go(v,v,g*d.upVectorScale(a.canonical,r,s).metersToTile),v}}getForTilePoints(a,r,s,d){if(this.isUsingMockSource())return!1;const f=D0.create(this,a,d);return!!f&&(r.forEach(g=>{g[2]=this.exaggeration()*f.getElevationAt(g[0],g[1],s)}),!0)}getMinMaxForTile(a){if(this.isUsingMockSource())return null;const r=this.findDEMTileFor(a);if(!r||!r.dem)return null;const s=r.dem.tree,d=r.tileID,f=1<<a.canonical.z-d.canonical.z;let g=a.canonical.x/f-d.canonical.x,v=a.canonical.y/f-d.canonical.y,b=0;for(let E=0;E<a.canonical.z-d.canonical.z&&!s.leaves[b];E++){g*=2,v*=2;const T=2*Math.floor(v)+Math.floor(g);b=s.childOffsets[b]+T,g%=1,v%=1}return{min:this.exaggeration()*s.minimums[b],max:this.exaggeration()*s.maximums[b]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(a,r,s){throw new Error("Pure virtual method called.")}pointCoordinate(a){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(a){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},o.ErrorEvent=Ta,o.EvaluationParameters=P,o.Event=Cs,o.Evented=Fc,o.FillExtrusionBucket=Bp,o.Frustum=Jx,o.FrustumCorners=Qx,o.GLOBE_RADIUS=is,o.GLOBE_SCALE_MATCH_LATITUDE=45,o.GLOBE_ZOOM_THRESHOLD_MAX=pR,o.GLOBE_ZOOM_THRESHOLD_MIN=eb,o.GlobeSharedBuffers=class{constructor(a){this._createGrid(a),this._createPoles(a)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const a of this._poleSegments)a.destroy();for(const a of this._gridSegments)a.withSkirts.destroy(),a.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const a of this._wireframeSegments)a.destroy()}}_fillGridMeshWithLods(a,r){const s=new Pt,d=new cn,f=[],g=a+1+2,v=r[0]+1,b=r[0]+1+(1+r.length),E=(T,A,I)=>{let O=T===g-1?T-2:T===0?T:T-1;return O+=I?24575:0,[O,A]};for(let T=0;T<g;++T)s.emplaceBack(...E(T,0,!0));for(let T=0;T<v;++T)for(let A=0;A<g;++A)s.emplaceBack(...E(A,T,(A===0||A===g-1)&&!0));for(let T=0;T<r.length;++T){const A=r[T];for(let I=0;I<g;++I)s.emplaceBack(...E(I,A,!0))}for(let T=0;T<r.length;++T){const A=d.length,I=r[T]+1+2,O=new cn;for(let K=0;K<I-1;K++){const ie=K===I-2,ye=ie?g*(b-r.length+T-K):g;for(let Re=0;Re<g-1;Re++){const ve=K*g+Re;K===0||ie||Re===0||Re===g-2?(O.emplaceBack(ve+1,ve,ve+ye),O.emplaceBack(ve+ye,ve+ye+1,ve+1)):(d.emplaceBack(ve+1,ve,ve+ye),d.emplaceBack(ve+ye,ve+ye+1,ve+1))}}const N=ii.simpleSegment(0,A,s.length,d.length-A);for(let K=0;K<O.uint16.length;K+=3)d.emplaceBack(O.uint16[K],O.uint16[K+1],O.uint16[K+2]);const U=ii.simpleSegment(0,A,s.length,d.length-A);f.push({withoutSkirts:N,withSkirts:U})}return{vertices:s,indices:d,segments:f}}_createGrid(a){const r=this._fillGridMeshWithLods(pu,Mp);this._gridSegments=r.segments,this._gridBuffer=a.createVertexBuffer(r.vertices,Rp.members),this._gridIndexBuffer=a.createIndexBuffer(r.indices,!0)}_createPoles(a){const r=new cn;for(let f=0;f<=pu;f++)r.emplaceBack(0,f+1,f+2);this._poleIndexBuffer=a.createIndexBuffer(r,!0);const s=new fr,d=new fr;this._poleSegments=[];for(let f=0,g=0;f<eb;f++){const v=360/(1<<f);s.emplaceBack(0,-is,0,.5,0),d.emplaceBack(0,-is,0,.5,1);for(let b=0;b<=pu;b++){const E=b/pu,T=Zn(0,v,E),[A,I,O]=Nd(zB,FB,T,is);s.emplaceBack(A,I,O,E,0),d.emplaceBack(A,I,O,E,1)}this._poleSegments.push(ii.simpleSegment(g,0,66,64)),g+=66}this._poleNorthVertexBuffer=a.createVertexBuffer(s,hR,!1),this._poleSouthVertexBuffer=a.createVertexBuffer(d,hR,!1)}getGridBuffers(a,r){return[this._gridBuffer,this._gridIndexBuffer,r?this._gridSegments[a].withSkirts:this._gridSegments[a].withoutSkirts]}getPoleBuffers(a){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[a]]}getWirefameBuffers(a,r){if(!this._wireframeSegments){const s=new Si,d=pu,f=d+1+2,g=1;this._wireframeSegments=[];for(let v=0,b=0;v<Mp.length;v++){const E=Mp[v];for(let A=g;A<E+g;A++)for(let I=g;I<d+g;I++){const O=A*f+I;s.emplaceBack(O,O+1),s.emplaceBack(O,O+f),s.emplaceBack(O,O+f+1)}const T=E*d*3;this._wireframeSegments.push(ii.simpleSegment(0,b,(E+1)*f,T)),b+=T}this._wireframeIndexBuffer=a.createIndexBuffer(s)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[r]]}},o.GlyphManager=Yd,o.ImagePosition=Rb,o.KDBush=Gb,o.LivePerformanceUtils=xx,o.LngLat=mr,o.LngLatBounds=zl,o.LocalGlyphMode=kb,o.MAX_MERCATOR_LATITUDE=$i,o.MercatorCoordinate=jd,o.ONE_EM=Pi,o.OverscaledTileID=ro,o.PerformanceMarkers=zi,o.Point=J,o.Properties=xe,o.RGBAImage=Ro,o.Ray=Yx,o.RequestManager=class{constructor(a,r,s){this._transformRequestFn=a,this._customAccessToken=r,this._silenceAuthErrors=!!s,this._createSkuToken()}_createSkuToken(){const a=function(){let r="";for(let s=0;s<10;s++)r+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",$,r].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=a.token,this._skuTokenExpiresAt=a.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(a,r){return this._transformRequestFn&&this._transformRequestFn(a,r)||{url:a}}normalizeStyleURL(a,r){if(!Se(a))return a;const s=Dt(a);return s.path=`/styles/v1${s.path}`,this._makeAPIURL(s,this._customAccessToken||r)}normalizeGlyphsURL(a,r){if(!Se(a))return a;const s=Dt(a);return s.path=`/fonts/v1${s.path}`,this._makeAPIURL(s,this._customAccessToken||r)}normalizeSourceURL(a,r,s,d){if(!Se(a))return a;const f=Dt(a);return f.path=`/v4/${f.authority}.json`,f.params.push("secure"),s&&f.params.push(`language=${s}`),d&&f.params.push(`worldview=${d}`),this._makeAPIURL(f,this._customAccessToken||r)}normalizeSpriteURL(a,r,s,d){const f=Dt(a);return Se(a)?(f.path=`/styles/v1${f.path}/sprite${r}${s}`,this._makeAPIURL(f,this._customAccessToken||d)):(f.path+=`${r}${s}`,Et(f))}normalizeTileURL(a,r,s){if(this._isSkuTokenExpired()&&this._createSkuToken(),a&&!Se(a))return a;const d=Dt(a);d.path=d.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${r||s&&d.authority!=="raster"&&s===512?"@2x":""}${L.supported?".webp":"$1"}`),d.authority==="raster"?d.path=`/${k.RASTER_URL_PREFIX}${d.path}`:(d.path=d.path.replace(/^.+\/v4\//,"/"),d.path=`/${k.TILE_URL_VERSION}${d.path}`);const f=this._customAccessToken||function(g){for(const v of g){const b=v.match(/^access_token=(.*)$/);if(b)return b[1]}return null}(d.params)||k.ACCESS_TOKEN;return k.REQUIRE_ACCESS_TOKEN&&f&&this._skuToken&&d.params.push(`sku=${this._skuToken}`),this._makeAPIURL(d,f)}canonicalizeTileURL(a,r){const s=Dt(a);if(!s.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!s.path.match(/\.[\w]+$/))return a;let d="mapbox://";s.path.match(/^\/raster\/v1\//)?d+=`raster/${s.path.replace(`/${k.RASTER_URL_PREFIX}/`,"")}`:d+=`tiles/${s.path.replace(`/${k.TILE_URL_VERSION}/`,"")}`;let f=s.params;return r&&(f=f.filter(g=>!g.match(/^access_token=/))),f.length&&(d+=`?${f.join("&")}`),d}canonicalizeTileset(a,r){const s=!!r&&Se(r),d=[];for(const f of a.tiles||[])je(f)?d.push(this.canonicalizeTileURL(f,s)):d.push(f);return d}_makeAPIURL(a,r){const s="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",d=Dt(k.API_URL);if(a.protocol=d.protocol,a.authority=d.authority,a.protocol==="http"){const f=a.params.indexOf("secure");f>=0&&a.params.splice(f,1)}if(d.path!=="/"&&(a.path=`${d.path}${a.path}`),!k.REQUIRE_ACCESS_TOKEN)return Et(a);if(r=r||k.ACCESS_TOKEN,!this._silenceAuthErrors){if(!r)throw new Error(`An API access token is required to use Mapbox GL. ${s}`);if(r[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${s}`)}return a.params=a.params.filter(f=>f.indexOf("access_token")===-1),a.params.push(`access_token=${r||""}`),Et(a)}},o.ResourceType=Ut,o.SegmentVector=ii,o.SourceCache=xu,o.StencilMode=$b,o.StructArrayLayout1ui2=To,o.StructArrayLayout2f1f2i16=yn,o.StructArrayLayout2i4=Pt,o.StructArrayLayout2ui4=Si,o.StructArrayLayout3f12=On,o.StructArrayLayout3ui6=cn,o.StructArrayLayout4i8=vt,o.StructArrayLayout5f20=fr,o.Texture=Xp,o.Tile=Bb,o.Transitionable=q,o.Uniform1f=e0,o.Uniform1i=class extends Fs{constructor(a){super(a),this.current=0}set(a,r,s){this.fetchUniformLocation(a,r)&&this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},o.Uniform2f=class extends Fs{constructor(a){super(a),this.current=[0,0]}set(a,r,s){this.fetchUniformLocation(a,r)&&(s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1])))}},o.Uniform3f=class extends Fs{constructor(a){super(a),this.current=[0,0,0]}set(a,r,s){this.fetchUniformLocation(a,r)&&(s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2])))}},o.Uniform4f=XC,o.UniformColor=KC,o.UniformMatrix2f=class extends Fs{constructor(a){super(a),this.current=xB}set(a,r,s){if(this.fetchUniformLocation(a,r)){for(let d=0;d<4;d++)if(s[d]!==this.current[d]){this.current=s,this.gl.uniformMatrix2fv(this.location,!1,s);break}}}},o.UniformMatrix3f=class extends Fs{constructor(a){super(a),this.current=_B}set(a,r,s){if(this.fetchUniformLocation(a,r)){for(let d=0;d<9;d++)if(s[d]!==this.current[d]){this.current=s,this.gl.uniformMatrix3fv(this.location,!1,s);break}}}},o.UniformMatrix4f=class extends Fs{constructor(a){super(a),this.current=vB}set(a,r,s){if(this.fetchUniformLocation(a,r)){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let d=1;d<16;d++)if(s[d]!==this.current[d]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}}},o.UnwrappedTileID=nM,o.ValidationError=Xt,o.VectorTileFeature=m0,o.VectorTileWorkerSource=class extends Fc{constructor(a,r,s,d,f){super(),this.actor=a,this.layerIndex=r,this.availableImages=s,this.loadVectorData=f||hA,this.loading={},this.loaded={},this.deduped=new dA(a.scheduler),this.isSpriteLoaded=d,this.scheduler=a.scheduler}loadTile(a,r){const s=a.uid,d=a&&a.request,f=d&&d.collectResourceTiming,g=this.loading[s]=new VN(a);g.abort=this.loadVectorData(a,(v,b)=>{const E=!this.loading[s];if(delete this.loading[s],E||v||!b)return g.status="done",E||(this.loaded[s]=g),r(v);const T=b.rawData,A={};b.expires&&(A.expires=b.expires),b.cacheControl&&(A.cacheControl=b.cacheControl),g.vectorTile=b.vectorTile||new wb(new b0(T));const I=()=>{g.parse(g.vectorTile,this.layerIndex,this.availableImages,this.actor,(O,N)=>{if(O||!N)return r(O);const U={};if(f){const K=Ef(d);K.length>0&&(U.resourceTiming=JSON.parse(JSON.stringify(K)))}r(null,be({rawTileData:T.slice(0)},N,A,U))})};this.isSpriteLoaded?I():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(I,{type:"parseTile",isSymbolTile:a.isSymbolTile,zoom:a.tileZoom}):I()}),this.loaded=this.loaded||{},this.loaded[s]=g})}reloadTile(a,r){const s=this.loaded,d=a.uid,f=this;if(s&&s[d]){const g=s[d];g.showCollisionBoxes=a.showCollisionBoxes,g.enableTerrain=!!a.enableTerrain,g.projection=a.projection,g.tileTransform=_u(a.tileID.canonical,a.projection);const v=(b,E)=>{const T=g.reloadCallback;T&&(delete g.reloadCallback,g.parse(g.vectorTile,f.layerIndex,this.availableImages,f.actor,T)),r(b,E)};g.status==="parsing"?g.reloadCallback=v:g.status==="done"&&(g.vectorTile?g.parse(g.vectorTile,this.layerIndex,this.availableImages,this.actor,v):v())}}abortTile(a,r){const s=a.uid,d=this.loading[s];d&&(d.abort&&d.abort(),delete this.loading[s]),r()}removeTile(a,r){const s=this.loaded,d=a.uid;s&&s[d]&&delete s[d],r()}},o.WritingMode=qo,o.ZoomDependentExpression=tu,o.add=Ns,o.addDynamicAttributes=P0,o.adjoint=function(a,r){var s=r[0],d=r[1],f=r[2],g=r[3],v=r[4],b=r[5],E=r[6],T=r[7],A=r[8];return a[0]=v*A-b*T,a[1]=f*T-d*A,a[2]=d*b-f*v,a[3]=b*E-g*A,a[4]=s*A-f*E,a[5]=f*g-s*b,a[6]=g*T-v*E,a[7]=d*E-s*T,a[8]=s*v-d*g,a},o.asyncAll=Ve,o.bezier=Qe,o.bindAll=Rt,o.boundsAttributes=ZM,o.bufferConvexPolygon=function(a,r){const s=[];for(let d=0;d<a.length;d++){const f=Te(d-1,-1,a.length-1),g=Te(d+1,-1,a.length-1),v=a[d],b=a[g],E=a[f].sub(v).unit(),T=b.sub(v).unit(),A=T.angleWithSep(E.x,E.y),I=E.add(T).unit().mult(-1*r/Math.sin(A/2));s.push(v.add(I))}return s},o.cacheEntryPossiblyAdded=function(a){ut++,ut>Sn&&(a.getActor().send("enforceCacheSizeLimit",nn),ut=0)},o.calculateGlobeLabelMatrix=function(a,r){const{x:s,y:d}=a.point,f=_R(s,d,a.worldSize/a._pixelsPerMercatorPixel,0,0);return du(f,f,rb(os(r)))},o.calculateGlobeMatrix=function(a){const{x:r,y:s}=a.point,{lng:d,lat:f}=a._center;return _R(r,s,a.worldSize,d,f)},o.calculateGlobeMercatorMatrix=function(a){const r=a.pixelsPerMeter,s=r/Na(1,a.center.lat),d=Fa(new Float64Array(16));return bp(d,d,[a.point.x,a.point.y,0]),hu(d,d,[s,s,r]),Float32Array.from(d)},o.circumferenceAtLatitude=ob,o.clamp=Me,o.clearTileCache=function(a){if(!an())return;const r=x.caches.delete($t);a&&r.catch(a).then(()=>a())},o.clipLine=kM,o.clone=function(a){var r=new Co(16);return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],r[9]=a[9],r[10]=a[10],r[11]=a[11],r[12]=a[12],r[13]=a[13],r[14]=a[14],r[15]=a[15],r},o.clone$1=Ht,o.collisionCircleLayout=U6,o.config=k,o.conjugate=function(a,r){return a[0]=-r[0],a[1]=-r[1],a[2]=-r[2],a[3]=r[3],a},o.create=function(){var a=new Co(16);return Co!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},o.create$1=JC,o.createExpression=Al,o.createLayout=qe,o.createStyleLayer=function(a){return a.type==="custom"?new IN(a):new ON[a.type](a)},o.cross=Kx,o.degToRad=$e,o.distance=function(a,r){return Math.hypot(r[0]-a[0],r[1]-a[1],r[2]-a[2])},o.div=function(a,r,s){return a[0]=r[0]/s[0],a[1]=r[1]/s[1],a[2]=r[2]/s[2],a},o.dot=ca,o.earthRadius=Pp,o.ease=gt,o.easeCubicInOut=Ze,o.ecefToLatLng=function([a,r,s]){const d=Math.hypot(a,r,s),f=Math.atan2(a,s),g=.5*Math.PI-Math.acos(-r/d);return new mr(Ge(f),Ge(g))},o.emitValidationErrors=Zy,o.endsWith=Mt,o.enforceCacheSizeLimit=function(a){Ne(),mn&&mn.then(r=>{r.keys().then(s=>{for(let d=0;d<s.length-a;d++)r.delete(s[d])})})},o.evaluateSizeForFeature=_0,o.evaluateSizeForZoom=Hd,o.evaluateVariableOffset=DM,o.evented=_,o.exactEquals=function(a,r){return a[0]===r[0]&&a[1]===r[1]&&a[2]===r[2]&&a[3]===r[3]},o.exactEquals$1=function(a,r){return a[0]===r[0]&&a[1]===r[1]&&a[2]===r[2]},o.exported=Ea,o.exported$1=L,o.extend=be,o.extend$1=Ca,o.fillExtrusionHeightLift=JR,o.filterObject=Nt,o.fromMat4=function(a,r){return a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[4],a[4]=r[5],a[5]=r[6],a[6]=r[8],a[7]=r[9],a[8]=r[10],a},o.fromQuat=function(a,r){var s=r[0],d=r[1],f=r[2],g=r[3],v=s+s,b=d+d,E=f+f,T=s*v,A=d*v,I=d*b,O=f*v,N=f*b,U=f*E,K=g*v,ie=g*b,ye=g*E;return a[0]=1-I-U,a[1]=A+ye,a[2]=O-ie,a[3]=0,a[4]=A-ye,a[5]=1-T-U,a[6]=N+K,a[7]=0,a[8]=O+ie,a[9]=N-K,a[10]=1-T-I,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},o.fromRotation=function(a,r){var s=Math.sin(r),d=Math.cos(r);return a[0]=d,a[1]=s,a[2]=0,a[3]=-s,a[4]=d,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},o.fromScaling=tR,o.furthestTileCorner=function(a){const r=Math.round((a+45+360)%360/90)%4;return Ae[r]},o.getAABBPointSquareDist=function(a,r,s){let d=0;for(let f=0;f<2;++f){const g=s?s[f]:0;a[f]>g&&(d+=(a[f]-g)*(a[f]-g)),r[f]<g&&(d+=(g-r[f])*(g-r[f]))}return d},o.getAnchorAlignment=Ab,o.getAnchorJustification=Ib,o.getBounds=function(a){let r=1/0,s=1/0,d=-1/0,f=-1/0;for(const g of a)r=Math.min(r,g.x),s=Math.min(s,g.y),d=Math.max(d,g.x),f=Math.max(f,g.y);return{min:new J(r,s),max:new J(d,f)}},o.getColumn=cr,o.getDefaultExportFromCjs=Z,o.getGridMatrix=function(a,r,s,d){const f=r.getNorth(),g=r.getSouth(),v=r.getWest(),b=r.getEast(),E=1<<a.z,T=b-v,A=f-g,I=T/pu,O=-A/Mp[s],N=[0,I,0,O,0,0,f,v,0];if(a.z>0){const U=180/d;eR(N,N,[U/T+1,0,0,0,U/A+1,0,-.5*U/I,.5*U/O,1])}return N[2]=E,N[5]=a.x,N[8]=a.y,N},o.getImage=se,o.getJSON=function(a,r){return De(be(a,{type:"json"}),r)},o.getLatitudinalLod=function(a){const r=$i-5;a=Me(a,-r,r)/r*90;const s=Math.pow(Math.abs(Math.sin($e(a))),3);return Math.round(s*(Mp.length-1))},o.getMapSessionAPI=Zr,o.getPerformanceMeasurement=Ef,o.getProjection=VM,o.getRTLTextPluginStatus=w,o.getReferrer=Be,o.getTilePoint=function(a,{x:r,y:s},d=0){return new J(((r-d)*a.scale-a.x)*pn,(s*a.scale-a.y)*pn)},o.getTileVec3=function(a,r,s=0){return Bd(((r.x-s)*a.scale-a.x)*pn,(r.y*a.scale-a.y)*pn,SR(r.z,r.y))},o.getVideo=function(a,r){const s=x.document.createElement("video");s.muted=!0,s.onloadstart=function(){r(null,s)};for(let d=0;d<a.length;d++){const f=x.document.createElement("source");mt(a[d])||(s.crossOrigin="Anonymous"),f.src=a[d],s.appendChild(f)}return{cancel:()=>{}}},o.globeCenterToScreenPoint=function(a){const r=[0,0,0],s=Fa(new Float64Array(16));return du(s,a.pixelMatrix,a.globeMatrix),Kr(r,r,s),new J(r[0],r[1])},o.globeDenormalizeECEF=rb,o.globeECEFOrigin=function(a,r){const s=[0,0,0];return Kr(s,s,kp(os(r.canonical))),Kr(s,s,a),s},o.globeMetersToEcef=r0,o.globeNormalizeECEF=kp,o.globePixelsToTileUnits=function(a,r){return pn/(512*Math.pow(2,a))*o0(os(r))},o.globePoleMatrixForTile=function(a,r,s){const d=Fa(new Float64Array(16)),f=(r/(1<<a)-.5)*Math.PI*2;return n0(d,s.globeMatrix,f),Float32Array.from(d)},o.globeTileBounds=os,o.globeTiltAtLngLat=xR,o.globeToMercatorTransition=Ud,o.globeUseCustomAntiAliasing=function(a,r,s){const d=Ud(s.zoom),f=a.style.map._antialias,g=!!r.extStandardDerivatives,v=r.extStandardDerivativesForceOff||a.terrain&&a.terrain.exaggeration()>0;return d===0&&!f&&!v&&g},o.identity=Fa,o.identity$1=cR,o.invert=qx,o.isFullscreen=function(){return!!x.document.fullscreenElement||!!x.document.webkitFullscreenElement},o.isLngLatBehindGlobe=ib,o.isMapAuthenticated=function(a){return fi.has(a)},o.isMapboxURL=Se,o.isSafariWithAntialiasingBug=function(a){const r=a.navigator?a.navigator.userAgent:null;return!!qn(a)&&r&&(r.match("Version/15.4")||r.match("Version/15.5")||r.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},o.latFromMercatorY=Ni,o.latLngToECEF=$d,o.len=AB,o.length=wp,o.length$1=function(a){return Math.hypot(a[0],a[1],a[2],a[3])},o.lngFromMercatorX=Wo,o.loadVectorTile=hA,o.makeRequest=De,o.mapValue=function(a,r,s,d,f){return Me((a-r)/(s-r)*(f-d)+d,d,f)},o.mercatorScale=ER,o.mercatorXfromLng=as,o.mercatorYfromLat=ss,o.mercatorZfromAltitude=Na,o.mul=RB,o.mul$1=MB,o.multiply=du,o.multiply$1=eR,o.multiply$2=iR,o.nextPowerOfTwo=At,o.normalize=to,o.normalize$1=kB,o.normalize$2=sR,o.number=Zn,o.ortho=function(a,r,s,d,f,g,v){var b=1/(r-s),E=1/(d-f),T=1/(g-v);return a[0]=-2*b,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*E,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*T,a[11]=0,a[12]=(r+s)*b,a[13]=(f+d)*E,a[14]=(v+g)*T,a[15]=1,a},o.pbf=cM,o.perspective=function(a,r,s,d,f){var g,v=1/Math.tan(r/2);return a[0]=v/s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=v,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,f!=null&&f!==1/0?(a[10]=(f+d)*(g=1/(d-f)),a[14]=2*f*d*g):(a[10]=-1,a[14]=-2*d),a},o.pick=function(a,r){const s={};for(let d=0;d<r.length;d++){const f=r[d];f in a&&(s[f]=a[f])}return s},o.plugin=R,o.pointGeometry=de,o.polesInViewport=function(a){const r=Fa(new Float64Array(16));du(r,a.pixelMatrix,a.globeMatrix);const s=[0,ua,0],d=[0,da,0];return Kr(s,s,r),Kr(d,d,r),[s[0]>0&&s[0]<=a.width&&s[1]>0&&s[1]<=a.height&&!ib(a,new mr(a.center.lat,90)),d[0]>0&&d[0]<=a.width&&d[1]>0&&d[1]<=a.height&&!ib(a,new mr(a.center.lat,-90))]},o.polygonContainsPoint=yu,o.polygonIntersectsBox=PR,o.polygonIntersectsPolygon=RR,o.polygonizeBounds=function(a,r,s=0,d=!0){const f=new J(s,s),g=a.sub(f),v=r.add(f),b=[g,new J(v.x,g.y),v,new J(g.x,v.y)];return d&&b.push(g.clone()),b},o.posAttributes=Rp,o.postMapLoadEvent=Gn,o.postPerformanceEvent=Ln,o.postTurnstileEvent=Cn,o.potpack=Cb,o.prevPowerOfTwo=function(a){return a<=1?1:Math.pow(2,Math.floor(Math.log(a)/Math.LN2))},o.radToDeg=Ge,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.registerForPluginStateChange=function(a){return a({pluginStatus:m,pluginURL:l}),_.on("pluginStateChange",a),a},o.removeAuthState=function(a){fi.delete(a)},o.renderColorRamp=fb,o.resample=TR,o.rotateX=Hx,o.rotateX$1=uR,o.rotateY=n0,o.rotateY$1=dR,o.rotateZ=function(a,r,s){var d=Math.sin(s),f=Math.cos(s),g=r[0],v=r[1],b=r[2],E=r[3],T=r[4],A=r[5],I=r[6],O=r[7];return r!==a&&(a[8]=r[8],a[9]=r[9],a[10]=r[10],a[11]=r[11],a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a[0]=g*f+T*d,a[1]=v*f+A*d,a[2]=b*f+I*d,a[3]=E*f+O*d,a[4]=T*f-g*d,a[5]=A*f-v*d,a[6]=I*f-b*d,a[7]=O*f-E*d,a},o.rotateZ$1=function(a,r,s){s*=.5;var d=r[0],f=r[1],g=r[2],v=r[3],b=Math.sin(s),E=Math.cos(s);return a[0]=d*E+f*b,a[1]=f*E-d*b,a[2]=g*E+v*b,a[3]=v*E-g*b,a},o.scale=hu,o.scale$1=aR,o.scale$2=Go,o.scaleAndAdd=Tp,o.set=function(a,r,s,d){return a[0]=r,a[1]=s,a[2]=d,a},o.setCacheLimits=function(a,r){nn=a,Sn=r},o.setColumn=function(a,r,s){a[4*r+0]=s[0],a[4*r+1]=s[1],a[4*r+2]=s[2],a[4*r+3]=s[3]},o.setRTLTextPlugin=function(a,r,s=!1){if(m===gp||m===yp||m===vp)throw new Error("setRTLTextPlugin cannot be called multiple times.");l=Ea.resolveURL(a),m=gp,Ll=r,y(),s||C()},o.smoothstep=Ce,o.spec=ft,o.squaredLength=function(a){var r=a[0],s=a[1],d=a[2];return r*r+s*s+d*d},o.storeAuthState=function(a,r){r?fi.add(a):fi.delete(a)},o.sub=Ba,o.subtract=Xx,o.symbolSize=j6,o.tileAABB=function(a,r,s,d,f,g,v,b,E){if(E.name==="globe")return DB(a,r,new y0(s,d,f));const T=_u({z:s,x:d,y:f},E);return new no([(g+T.x/T.scale)*r,r*(T.y/T.scale),v],[(g+T.x2/T.scale)*r,r*(T.y2/T.scale),b])},o.tileCornersToBounds=i0,o.tileTransform=_u,o.transformMat3=function(a,r,s){var d=r[0],f=r[1],g=r[2];return a[0]=d*s[0]+f*s[3]+g*s[6],a[1]=d*s[1]+f*s[4]+g*s[7],a[2]=d*s[2]+f*s[5]+g*s[8],a},o.transformMat4=Kr,o.transformMat4$1=fu,o.transformQuat=oR,o.transitionTileAABBinECEF=gR,o.translate=bp,o.transpose=function(a,r){if(a===r){var s=r[1],d=r[2],f=r[5];a[1]=r[3],a[2]=r[6],a[3]=s,a[5]=r[7],a[6]=d,a[7]=f}else a[0]=r[0],a[1]=r[3],a[2]=r[6],a[3]=r[1],a[4]=r[4],a[5]=r[7],a[6]=r[2],a[7]=r[5],a[8]=r[8];return a},o.triggerPluginCompletionEvent=h,o.uniqueId=nt,o.updateGlobeVertexNormal=function(a,r,s,d,f){const g=5*r+2;a.float32[g+0]=s,a.float32[g+1]=d,a.float32[g+2]=f},o.validateCustomStyleLayer=function(a){const r=[],s=a.id;return s===void 0&&r.push({message:`layers.${s}: missing required property "id"`}),a.render===void 0&&r.push({message:`layers.${s}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&r.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),r},o.validateFilter=a=>Eo(au(a)),o.validateFog=a=>Eo(Wy(a)),o.validateLayer=a=>Eo(Uy(a)),o.validateLight=a=>Eo(Gy(a)),o.validateSource=a=>Eo(Vy(a)),o.validateStyle=Hy,o.validateTerrain=a=>Eo(dp(a)),o.values=we,o.vectorTile=p0,o.version=S,o.warnOnce=Kt,o.window=x,o.wrap=Te}),u(["./shared"],function(o){function x(re){if(typeof re=="number"||typeof re=="boolean"||typeof re=="string"||re==null)return JSON.stringify(re);if(Array.isArray(re)){let Y="[";for(const se of re)Y+=`${x(se)},`;return`${Y}]`}let W="{";for(const Y of Object.keys(re).sort())W+=`${Y}:${x(re[Y])},`;return`${W}}`}function S(re){let W="";for(const Y of o.refProperties)W+=`/${x(re[Y])}`;return W}class M{constructor(W){this.keyCache={},W&&this.replace(W)}replace(W){this._layerConfigs={},this._layers={},this.update(W,[])}update(W,Y){for(const ge of W)this._layerConfigs[ge.id]=ge,(this._layers[ge.id]=o.createStyleLayer(ge)).compileFilter(),this.keyCache[ge.id]&&delete this.keyCache[ge.id];for(const ge of Y)delete this.keyCache[ge],delete this._layerConfigs[ge],delete this._layers[ge];this.familiesBySource={};const se=function(ge,Se){const je={};for(let Ie=0;Ie<ge.length;Ie++){const Ke=Se&&Se[ge[Ie].id]||S(ge[Ie]);Se&&(Se[ge[Ie].id]=Ke);let bt=je[Ke];bt||(bt=je[Ke]=[]),bt.push(ge[Ie])}const We=[];for(const Ie in je)We.push(je[Ie]);return We}(o.values(this._layerConfigs),this.keyCache);for(const ge of se){const Se=ge.map(Dt=>this._layers[Dt.id]),je=Se[0];if(je.visibility==="none")continue;const We=je.source||"";let Ie=this.familiesBySource[We];Ie||(Ie=this.familiesBySource[We]={});const Ke=je.sourceLayer||"_geojsonTileLayer";let bt=Ie[Ke];bt||(bt=Ie[Ke]=[]),bt.push(Se)}}}class k{loadTile(W,Y){const{uid:se,encoding:ge,rawImageData:Se,padding:je,buildQuadTree:We}=W,Ie=o.window.ImageBitmap&&Se instanceof o.window.ImageBitmap?this.getImageData(Se,je):Se;Y(null,new o.DEMData(se,Ie,ge,je<1,We))}getImageData(W,Y){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(W.width,W.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=W.width,this.offscreenCanvas.height=W.height,this.offscreenCanvasContext.drawImage(W,0,0,W.width,W.height);const se=this.offscreenCanvasContext.getImageData(-Y,-Y,W.width+2*Y,W.height+2*Y);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),se}}function L(re,W){if(re.length!==0){j(re[0],W);for(var Y=1;Y<re.length;Y++)j(re[Y],!W)}}function j(re,W){for(var Y=0,se=0,ge=0,Se=re.length,je=Se-1;ge<Se;je=ge++){var We=(re[ge][0]-re[je][0])*(re[je][1]+re[ge][1]),Ie=Y+We;se+=Math.abs(Y)>=Math.abs(We)?Y-Ie+We:We-Ie+Y,Y=Ie}Y+se>=0!=!!W&&re.reverse()}var F=o.getDefaultExportFromCjs(function re(W,Y){var se,ge=W&&W.type;if(ge==="FeatureCollection")for(se=0;se<W.features.length;se++)re(W.features[se],Y);else if(ge==="GeometryCollection")for(se=0;se<W.geometries.length;se++)re(W.geometries[se],Y);else if(ge==="Feature")re(W.geometry,Y);else if(ge==="Polygon")L(W.coordinates,Y);else if(ge==="MultiPolygon")for(se=0;se<W.coordinates.length;se++)L(W.coordinates[se],Y);return W});const V=o.VectorTileFeature.prototype.toGeoJSON;var oe={exports:{}},B=o.pointGeometry,$=o.vectorTile.VectorTileFeature,Z=Q;function Q(re,W){this.options=W||{},this.features=re,this.length=re.length}function ae(re,W){this.id=typeof re.id=="number"?re.id:void 0,this.type=re.type,this.rawGeometry=re.type===1?[re.geometry]:re.geometry,this.properties=re.tags,this.extent=W||4096}Q.prototype.feature=function(re){return new ae(this.features[re],this.options.extent)},ae.prototype.loadGeometry=function(){var re=this.rawGeometry;this.geometry=[];for(var W=0;W<re.length;W++){for(var Y=re[W],se=[],ge=0;ge<Y.length;ge++)se.push(new B(Y[ge][0],Y[ge][1]));this.geometry.push(se)}return this.geometry},ae.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var re=this.geometry,W=1/0,Y=-1/0,se=1/0,ge=-1/0,Se=0;Se<re.length;Se++)for(var je=re[Se],We=0;We<je.length;We++){var Ie=je[We];W=Math.min(W,Ie.x),Y=Math.max(Y,Ie.x),se=Math.min(se,Ie.y),ge=Math.max(ge,Ie.y)}return[W,se,Y,ge]},ae.prototype.toGeoJSON=$.prototype.toGeoJSON;var ue=o.pbf,de=Z;function ke(re){var W=new ue;return function(Y,se){for(var ge in Y.layers)se.writeMessage(3,J,Y.layers[ge])}(re,W),W.finish()}function J(re,W){var Y;W.writeVarintField(15,re.version||1),W.writeStringField(1,re.name||""),W.writeVarintField(5,re.extent||4096);var se={keys:[],values:[],keycache:{},valuecache:{}};for(Y=0;Y<re.length;Y++)se.feature=re.feature(Y),W.writeMessage(2,G,se);var ge=se.keys;for(Y=0;Y<ge.length;Y++)W.writeStringField(3,ge[Y]);var Se=se.values;for(Y=0;Y<Se.length;Y++)W.writeMessage(4,Ze,Se[Y])}function G(re,W){var Y=re.feature;Y.id!==void 0&&W.writeVarintField(1,Y.id),W.writeMessage(2,pe,re),W.writeVarintField(3,Y.type),W.writeMessage(4,Ae,Y)}function pe(re,W){var Y=re.feature,se=re.keys,ge=re.values,Se=re.keycache,je=re.valuecache;for(var We in Y.properties){var Ie=Y.properties[We],Ke=Se[We];if(Ie!==null){Ke===void 0&&(se.push(We),Se[We]=Ke=se.length-1),W.writeVarint(Ke);var bt=typeof Ie;bt!=="string"&&bt!=="boolean"&&bt!=="number"&&(Ie=JSON.stringify(Ie));var Dt=bt+":"+Ie,Et=je[Dt];Et===void 0&&(ge.push(Ie),je[Dt]=Et=ge.length-1),W.writeVarint(Et)}}}function $e(re,W){return(W<<3)+(7&re)}function Ge(re){return re<<1^re>>31}function Ae(re,W){for(var Y=re.loadGeometry(),se=re.type,ge=0,Se=0,je=Y.length,We=0;We<je;We++){var Ie=Y[We],Ke=1;se===1&&(Ke=Ie.length),W.writeVarint($e(1,Ke));for(var bt=se===3?Ie.length-1:Ie.length,Dt=0;Dt<bt;Dt++){Dt===1&&se!==1&&W.writeVarint($e(2,bt-1));var Et=Ie[Dt].x-ge,_n=Ie[Dt].y-Se;W.writeVarint(Ge(Et)),W.writeVarint(Ge(_n)),ge+=Et,Se+=_n}se===3&&W.writeVarint($e(7,1))}}function Ze(re,W){var Y=typeof re;Y==="string"?W.writeStringField(1,re):Y==="boolean"?W.writeBooleanField(7,re):Y==="number"&&(re%1!=0?W.writeDoubleField(3,re):re<0?W.writeSVarintField(6,re):W.writeVarintField(5,re))}oe.exports=ke,oe.exports.fromVectorTileJs=ke,oe.exports.fromGeojsonVt=function(re,W){W=W||{};var Y={};for(var se in re)Y[se]=new de(re[se].features,W),Y[se].name=se,Y[se].version=W.version,Y[se].extent=W.extent;return ke({layers:Y})},oe.exports.GeoJSONWrapper=de;var Qe=o.getDefaultExportFromCjs(oe.exports);const gt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:re=>re},Me=Math.fround||(Ce=new Float32Array(1),re=>(Ce[0]=+re,Ce[0]));var Ce;const Te=3,Ve=5,we=6;class be{constructor(W){this.options=Object.assign(Object.create(gt),W),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(W){const{log:Y,minZoom:se,maxZoom:ge}=this.options;Y&&console.time("total time");const Se=`prepare ${W.length} points`;Y&&console.time(Se),this.points=W;const je=[];for(let Ie=0;Ie<W.length;Ie++){const Ke=W[Ie];if(!Ke.geometry)continue;const[bt,Dt]=Ke.geometry.coordinates,Et=Me(at(bt)),_n=Me(At(Dt));je.push(Et,_n,1/0,Ie,-1,1),this.options.reduce&&je.push(0)}let We=this.trees[ge+1]=this._createTree(je);Y&&console.timeEnd(Se);for(let Ie=ge;Ie>=se;Ie--){const Ke=+Date.now();We=this.trees[Ie]=this._createTree(this._cluster(We,Ie)),Y&&console.log("z%d: %d clusters in %dms",Ie,We.numItems,+Date.now()-Ke)}return Y&&console.timeEnd("total time"),this}getClusters(W,Y){let se=((W[0]+180)%360+360)%360-180;const ge=Math.max(-90,Math.min(90,W[1]));let Se=W[2]===180?180:((W[2]+180)%360+360)%360-180;const je=Math.max(-90,Math.min(90,W[3]));if(W[2]-W[0]>=360)se=-180,Se=180;else if(se>Se){const Dt=this.getClusters([se,ge,180,je],Y),Et=this.getClusters([-180,ge,Se,je],Y);return Dt.concat(Et)}const We=this.trees[this._limitZoom(Y)],Ie=We.range(at(se),At(je),at(Se),At(ge)),Ke=We.data,bt=[];for(const Dt of Ie){const Et=this.stride*Dt;bt.push(Ke[Et+Ve]>1?Ue(Ke,Et,this.clusterProps):this.points[Ke[Et+Te]])}return bt}getChildren(W){const Y=this._getOriginId(W),se=this._getOriginZoom(W),ge="No cluster with the specified id.",Se=this.trees[se];if(!Se)throw new Error(ge);const je=Se.data;if(Y*this.stride>=je.length)throw new Error(ge);const We=this.options.radius/(this.options.extent*Math.pow(2,se-1)),Ie=Se.within(je[Y*this.stride],je[Y*this.stride+1],We),Ke=[];for(const bt of Ie){const Dt=bt*this.stride;je[Dt+4]===W&&Ke.push(je[Dt+Ve]>1?Ue(je,Dt,this.clusterProps):this.points[je[Dt+Te]])}if(Ke.length===0)throw new Error(ge);return Ke}getLeaves(W,Y,se){const ge=[];return this._appendLeaves(ge,W,Y=Y||10,se=se||0,0),ge}getTile(W,Y,se){const ge=this.trees[this._limitZoom(W)],Se=Math.pow(2,W),{extent:je,radius:We}=this.options,Ie=We/je,Ke=(se-Ie)/Se,bt=(se+1+Ie)/Se,Dt={features:[]};return this._addTileFeatures(ge.range((Y-Ie)/Se,Ke,(Y+1+Ie)/Se,bt),ge.data,Y,se,Se,Dt),Y===0&&this._addTileFeatures(ge.range(1-Ie/Se,Ke,1,bt),ge.data,Se,se,Se,Dt),Y===Se-1&&this._addTileFeatures(ge.range(0,Ke,Ie/Se,bt),ge.data,-1,se,Se,Dt),Dt.features.length?Dt:null}getClusterExpansionZoom(W){let Y=this._getOriginZoom(W)-1;for(;Y<=this.options.maxZoom;){const se=this.getChildren(W);if(Y++,se.length!==1)break;W=se[0].properties.cluster_id}return Y}_appendLeaves(W,Y,se,ge,Se){const je=this.getChildren(Y);for(const We of je){const Ie=We.properties;if(Ie&&Ie.cluster?Se+Ie.point_count<=ge?Se+=Ie.point_count:Se=this._appendLeaves(W,Ie.cluster_id,se,ge,Se):Se<ge?Se++:W.push(We),W.length===se)break}return Se}_createTree(W){const Y=new o.KDBush(W.length/this.stride|0,this.options.nodeSize,Float32Array);for(let se=0;se<W.length;se+=this.stride)Y.add(W[se],W[se+1]);return Y.finish(),Y.data=W,Y}_addTileFeatures(W,Y,se,ge,Se,je){for(const We of W){const Ie=We*this.stride,Ke=Y[Ie+Ve]>1;let bt,Dt,Et;if(Ke)bt=nt(Y,Ie,this.clusterProps),Dt=Y[Ie],Et=Y[Ie+1];else{const rn=this.points[Y[Ie+Te]];bt=rn.properties;const[gn,Cn]=rn.geometry.coordinates;Dt=at(gn),Et=At(Cn)}const _n={type:1,geometry:[[Math.round(this.options.extent*(Dt*Se-se)),Math.round(this.options.extent*(Et*Se-ge))]],tags:bt};let En;En=Ke||this.options.generateId?Y[Ie+Te]:this.points[Y[Ie+Te]].id,En!==void 0&&(_n.id=En),je.features.push(_n)}}_limitZoom(W){return Math.max(this.options.minZoom,Math.min(Math.floor(+W),this.options.maxZoom+1))}_cluster(W,Y){const{radius:se,extent:ge,reduce:Se,minPoints:je}=this.options,We=se/(ge*Math.pow(2,Y)),Ie=W.data,Ke=[],bt=this.stride;for(let Dt=0;Dt<Ie.length;Dt+=bt){if(Ie[Dt+2]<=Y)continue;Ie[Dt+2]=Y;const Et=Ie[Dt],_n=Ie[Dt+1],En=W.within(Ie[Dt],Ie[Dt+1],We),rn=Ie[Dt+Ve];let gn=rn;for(const Cn of En){const ir=Cn*bt;Ie[ir+2]>Y&&(gn+=Ie[ir+Ve])}if(gn>rn&&gn>=je){let Cn,ir=Et*rn,Gn=_n*rn,Hr=-1;const Ln=((Dt/bt|0)<<5)+(Y+1)+this.points.length;for(const ur of En){const Zr=ur*bt;if(Ie[Zr+2]<=Y)continue;Ie[Zr+2]=Y;const fi=Ie[Zr+Ve];ir+=Ie[Zr]*fi,Gn+=Ie[Zr+1]*fi,Ie[Zr+4]=Ln,Se&&(Cn||(Cn=this._map(Ie,Dt,!0),Hr=this.clusterProps.length,this.clusterProps.push(Cn)),Se(Cn,this._map(Ie,Zr)))}Ie[Dt+4]=Ln,Ke.push(ir/gn,Gn/gn,1/0,Ln,-1,gn),Se&&Ke.push(Hr)}else{for(let Cn=0;Cn<bt;Cn++)Ke.push(Ie[Dt+Cn]);if(gn>1)for(const Cn of En){const ir=Cn*bt;if(!(Ie[ir+2]<=Y)){Ie[ir+2]=Y;for(let Gn=0;Gn<bt;Gn++)Ke.push(Ie[ir+Gn])}}}}return Ke}_getOriginId(W){return W-this.points.length>>5}_getOriginZoom(W){return(W-this.points.length)%32}_map(W,Y,se){if(W[Y+Ve]>1){const je=this.clusterProps[W[Y+we]];return se?Object.assign({},je):je}const ge=this.points[W[Y+Te]].properties,Se=this.options.map(ge);return se&&Se===ge?Object.assign({},Se):Se}}function Ue(re,W,Y){return{type:"Feature",id:re[W+Te],properties:nt(re,W,Y),geometry:{type:"Point",coordinates:[(se=re[W],360*(se-.5)),Ft(re[W+1])]}};var se}function nt(re,W,Y){const se=re[W+Ve],ge=se>=1e4?`${Math.round(se/1e3)}k`:se>=1e3?Math.round(se/100)/10+"k":se,Se=re[W+we],je=Se===-1?{}:Object.assign({},Y[Se]);return Object.assign(je,{cluster:!0,cluster_id:re[W+Te],point_count:se,point_count_abbreviated:ge})}function at(re){return re/360+.5}function At(re){const W=Math.sin(re*Math.PI/180),Y=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return Y<0?0:Y>1?1:Y}function Ft(re){const W=(180-360*re)*Math.PI/180;return 360*Math.atan(Math.exp(W))/Math.PI-90}function Rt(re,W,Y,se){for(var ge,Se=se,je=Y-W>>1,We=Y-W,Ie=re[W],Ke=re[W+1],bt=re[Y],Dt=re[Y+1],Et=W+3;Et<Y;Et+=3){var _n=Mt(re[Et],re[Et+1],Ie,Ke,bt,Dt);if(_n>Se)ge=Et,Se=_n;else if(_n===Se){var En=Math.abs(Et-je);En<We&&(ge=Et,We=En)}}Se>se&&(ge-W>3&&Rt(re,W,ge,se),re[ge+2]=Se,Y-ge>3&&Rt(re,ge,Y,se))}function Mt(re,W,Y,se,ge,Se){var je=ge-Y,We=Se-se;if(je!==0||We!==0){var Ie=((re-Y)*je+(W-se)*We)/(je*je+We*We);Ie>1?(Y=ge,se=Se):Ie>0&&(Y+=je*Ie,se+=We*Ie)}return(je=re-Y)*je+(We=W-se)*We}function ct(re,W,Y,se){var ge={id:re===void 0?null:re,type:W,geometry:Y,tags:se,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Se){var je=Se.geometry,We=Se.type;if(We==="Point"||We==="MultiPoint"||We==="LineString")Nt(Se,je);else if(We==="Polygon"||We==="MultiLineString")for(var Ie=0;Ie<je.length;Ie++)Nt(Se,je[Ie]);else if(We==="MultiPolygon")for(Ie=0;Ie<je.length;Ie++)for(var Ke=0;Ke<je[Ie].length;Ke++)Nt(Se,je[Ie][Ke])}(ge),ge}function Nt(re,W){for(var Y=0;Y<W.length;Y+=3)re.minX=Math.min(re.minX,W[Y]),re.minY=Math.min(re.minY,W[Y+1]),re.maxX=Math.max(re.maxX,W[Y]),re.maxY=Math.max(re.maxY,W[Y+1])}function Ht(re,W,Y,se){if(W.geometry){var ge=W.geometry.coordinates,Se=W.geometry.type,je=Math.pow(Y.tolerance/((1<<Y.maxZoom)*Y.extent),2),We=[],Ie=W.id;if(Y.promoteId?Ie=W.properties[Y.promoteId]:Y.generateId&&(Ie=se||0),Se==="Point")ln(ge,We);else if(Se==="MultiPoint")for(var Ke=0;Ke<ge.length;Ke++)ln(ge[Ke],We);else if(Se==="LineString")Kt(ge,We,je,!1);else if(Se==="MultiLineString"){if(Y.lineMetrics){for(Ke=0;Ke<ge.length;Ke++)Kt(ge[Ke],We=[],je,!1),re.push(ct(Ie,"LineString",We,W.properties));return}wn(ge,We,je,!1)}else if(Se==="Polygon")wn(ge,We,je,!0);else{if(Se!=="MultiPolygon"){if(Se==="GeometryCollection"){for(Ke=0;Ke<W.geometry.geometries.length;Ke++)Ht(re,{id:Ie,geometry:W.geometry.geometries[Ke],properties:W.properties},Y,se);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ke=0;Ke<ge.length;Ke++){var bt=[];wn(ge[Ke],bt,je,!0),We.push(bt)}}re.push(ct(Ie,Se,We,W.properties))}}function ln(re,W){W.push(hn(re[0])),W.push(Xn(re[1])),W.push(0)}function Kt(re,W,Y,se){for(var ge,Se,je=0,We=0;We<re.length;We++){var Ie=hn(re[We][0]),Ke=Xn(re[We][1]);W.push(Ie),W.push(Ke),W.push(0),We>0&&(je+=se?(ge*Ke-Ie*Se)/2:Math.sqrt(Math.pow(Ie-ge,2)+Math.pow(Ke-Se,2))),ge=Ie,Se=Ke}var bt=W.length-3;W[2]=1,Rt(W,0,bt,Y),W[bt+2]=1,W.size=Math.abs(je),W.start=0,W.end=W.size}function wn(re,W,Y,se){for(var ge=0;ge<re.length;ge++){var Se=[];Kt(re[ge],Se,Y,se),W.push(Se)}}function hn(re){return re/360+.5}function Xn(re){var W=Math.sin(re*Math.PI/180),Y=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return Y<0?0:Y>1?1:Y}function sr(re,W,Y,se,ge,Se,je,We){if(se/=W,Se>=(Y/=W)&&je<se)return re;if(je<Y||Se>=se)return null;for(var Ie=[],Ke=0;Ke<re.length;Ke++){var bt=re[Ke],Dt=bt.geometry,Et=bt.type,_n=ge===0?bt.minX:bt.minY,En=ge===0?bt.maxX:bt.maxY;if(_n>=Y&&En<se)Ie.push(bt);else if(!(En<Y||_n>=se)){var rn=[];if(Et==="Point"||Et==="MultiPoint")In(Dt,rn,Y,se,ge);else if(Et==="LineString")qn(Dt,rn,Y,se,ge,!1,We.lineMetrics);else if(Et==="MultiLineString")cr(Dt,rn,Y,se,ge,!1);else if(Et==="Polygon")cr(Dt,rn,Y,se,ge,!0);else if(Et==="MultiPolygon")for(var gn=0;gn<Dt.length;gn++){var Cn=[];cr(Dt[gn],Cn,Y,se,ge,!0),Cn.length&&rn.push(Cn)}if(rn.length){if(We.lineMetrics&&Et==="LineString"){for(gn=0;gn<rn.length;gn++)Ie.push(ct(bt.id,Et,rn[gn],bt.tags));continue}Et!=="LineString"&&Et!=="MultiLineString"||(rn.length===1?(Et="LineString",rn=rn[0]):Et="MultiLineString"),Et!=="Point"&&Et!=="MultiPoint"||(Et=rn.length===3?"Point":"MultiPoint"),Ie.push(ct(bt.id,Et,rn,bt.tags))}}}return Ie.length?Ie:null}function In(re,W,Y,se,ge){for(var Se=0;Se<re.length;Se+=3){var je=re[Se+ge];je>=Y&&je<=se&&(W.push(re[Se]),W.push(re[Se+1]),W.push(re[Se+2]))}}function qn(re,W,Y,se,ge,Se,je){for(var We,Ie,Ke=Lr(re),bt=ge===0?nn:Sn,Dt=re.start,Et=0;Et<re.length-3;Et+=3){var _n=re[Et],En=re[Et+1],rn=re[Et+2],gn=re[Et+3],Cn=re[Et+4],ir=ge===0?_n:En,Gn=ge===0?gn:Cn,Hr=!1;je&&(We=Math.sqrt(Math.pow(_n-gn,2)+Math.pow(En-Cn,2))),ir<Y?Gn>Y&&(Ie=bt(Ke,_n,En,gn,Cn,Y),je&&(Ke.start=Dt+We*Ie)):ir>se?Gn<se&&(Ie=bt(Ke,_n,En,gn,Cn,se),je&&(Ke.start=Dt+We*Ie)):$t(Ke,_n,En,rn),Gn<Y&&ir>=Y&&(Ie=bt(Ke,_n,En,gn,Cn,Y),Hr=!0),Gn>se&&ir<=se&&(Ie=bt(Ke,_n,En,gn,Cn,se),Hr=!0),!Se&&Hr&&(je&&(Ke.end=Dt+We*Ie),W.push(Ke),Ke=Lr(re)),je&&(Dt+=We)}var Ln=re.length-3;_n=re[Ln],En=re[Ln+1],rn=re[Ln+2],(ir=ge===0?_n:En)>=Y&&ir<=se&&$t(Ke,_n,En,rn),Ln=Ke.length-3,Se&&Ln>=3&&(Ke[Ln]!==Ke[0]||Ke[Ln+1]!==Ke[1])&&$t(Ke,Ke[0],Ke[1],Ke[2]),Ke.length&&W.push(Ke)}function Lr(re){var W=[];return W.size=re.size,W.start=re.start,W.end=re.end,W}function cr(re,W,Y,se,ge,Se){for(var je=0;je<re.length;je++)qn(re[je],W,Y,se,ge,Se,!1)}function $t(re,W,Y,se){re.push(W),re.push(Y),re.push(se)}function nn(re,W,Y,se,ge,Se){var je=(Se-W)/(se-W);return re.push(Se),re.push(Y+(ge-Y)*je),re.push(1),je}function Sn(re,W,Y,se,ge,Se){var je=(Se-Y)/(ge-Y);return re.push(W+(se-W)*je),re.push(Se),re.push(1),je}function mn(re,W){for(var Y=[],se=0;se<re.length;se++){var ge,Se=re[se],je=Se.type;if(je==="Point"||je==="MultiPoint"||je==="LineString")ge=vn(Se.geometry,W);else if(je==="MultiLineString"||je==="Polygon"){ge=[];for(var We=0;We<Se.geometry.length;We++)ge.push(vn(Se.geometry[We],W))}else if(je==="MultiPolygon")for(ge=[],We=0;We<Se.geometry.length;We++){for(var Ie=[],Ke=0;Ke<Se.geometry[We].length;Ke++)Ie.push(vn(Se.geometry[We][Ke],W));ge.push(Ie)}Y.push(ct(Se.id,je,ge,Se.tags))}return Y}function vn(re,W){var Y=[];Y.size=re.size,re.start!==void 0&&(Y.start=re.start,Y.end=re.end);for(var se=0;se<re.length;se+=3)Y.push(re[se]+W,re[se+1],re[se+2]);return Y}function an(re,W){if(re.transformed)return re;var Y,se,ge,Se=1<<re.z,je=re.x,We=re.y;for(Y=0;Y<re.features.length;Y++){var Ie=re.features[Y],Ke=Ie.geometry,bt=Ie.type;if(Ie.geometry=[],bt===1)for(se=0;se<Ke.length;se+=2)Ie.geometry.push(Ne(Ke[se],Ke[se+1],W,Se,je,We));else for(se=0;se<Ke.length;se++){var Dt=[];for(ge=0;ge<Ke[se].length;ge+=2)Dt.push(Ne(Ke[se][ge],Ke[se][ge+1],W,Se,je,We));Ie.geometry.push(Dt)}}return re.transformed=!0,re}function Ne(re,W,Y,se,ge,Se){return[Math.round(Y*(re*se-ge)),Math.round(Y*(W*se-Se))]}function Je(re,W,Y,se,ge){for(var Se=W===ge.maxZoom?0:ge.tolerance/((1<<W)*ge.extent),je={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Y,y:se,z:W,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},We=0;We<re.length;We++){je.numFeatures++,ut(je,re[We],Se,ge);var Ie=re[We].minX,Ke=re[We].minY,bt=re[We].maxX,Dt=re[We].maxY;Ie<je.minX&&(je.minX=Ie),Ke<je.minY&&(je.minY=Ke),bt>je.maxX&&(je.maxX=bt),Dt>je.maxY&&(je.maxY=Dt)}return je}function ut(re,W,Y,se){var ge=W.geometry,Se=W.type,je=[];if(Se==="Point"||Se==="MultiPoint")for(var We=0;We<ge.length;We+=3)je.push(ge[We]),je.push(ge[We+1]),re.numPoints++,re.numSimplified++;else if(Se==="LineString")Ut(je,ge,re,Y,!1,!1);else if(Se==="MultiLineString"||Se==="Polygon")for(We=0;We<ge.length;We++)Ut(je,ge[We],re,Y,Se==="Polygon",We===0);else if(Se==="MultiPolygon")for(var Ie=0;Ie<ge.length;Ie++){var Ke=ge[Ie];for(We=0;We<Ke.length;We++)Ut(je,Ke[We],re,Y,!0,We===0)}if(je.length){var bt=W.tags||null;if(Se==="LineString"&&se.lineMetrics){for(var Dt in bt={},W.tags)bt[Dt]=W.tags[Dt];bt.mapbox_clip_start=ge.start/ge.size,bt.mapbox_clip_end=ge.end/ge.size}var Et={geometry:je,type:Se==="Polygon"||Se==="MultiPolygon"?3:Se==="LineString"||Se==="MultiLineString"?2:1,tags:bt};W.id!==null&&(Et.id=W.id),re.features.push(Et)}}function Ut(re,W,Y,se,ge,Se){var je=se*se;if(se>0&&W.size<(ge?je:se))Y.numPoints+=W.length/3;else{for(var We=[],Ie=0;Ie<W.length;Ie+=3)(se===0||W[Ie+2]>je)&&(Y.numSimplified++,We.push(W[Ie]),We.push(W[Ie+1])),Y.numPoints++;ge&&function(Ke,bt){for(var Dt=0,Et=0,_n=Ke.length,En=_n-2;Et<_n;En=Et,Et+=2)Dt+=(Ke[Et]-Ke[En])*(Ke[Et+1]+Ke[En+1]);if(Dt>0===bt)for(Et=0,_n=Ke.length;Et<_n/2;Et+=2){var rn=Ke[Et],gn=Ke[Et+1];Ke[Et]=Ke[_n-2-Et],Ke[Et+1]=Ke[_n-1-Et],Ke[_n-2-Et]=rn,Ke[_n-1-Et]=gn}}(We,Se),re.push(We)}}function Qt(re,W){var Y=(W=this.options=function(ge,Se){for(var je in Se)ge[je]=Se[je];return ge}(Object.create(this.options),W)).debug;if(Y&&console.time("preprocess data"),W.maxZoom<0||W.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(W.promoteId&&W.generateId)throw new Error("promoteId and generateId cannot be used together.");var se=function(ge,Se){var je=[];if(ge.type==="FeatureCollection")for(var We=0;We<ge.features.length;We++)Ht(je,ge.features[We],Se,We);else Ht(je,ge.type==="Feature"?ge:{geometry:ge},Se);return je}(re,W);this.tiles={},this.tileCoords=[],Y&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",W.indexMaxZoom,W.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),se=function(ge,Se){var je=Se.buffer/Se.extent,We=ge,Ie=sr(ge,1,-1-je,je,0,-1,2,Se),Ke=sr(ge,1,1-je,2+je,0,-1,2,Se);return(Ie||Ke)&&(We=sr(ge,1,-je,1+je,0,-1,2,Se)||[],Ie&&(We=mn(Ie,1).concat(We)),Ke&&(We=We.concat(mn(Ke,-1)))),We}(se,W),se.length&&this.splitTile(se,0,0,0),Y&&(se.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Be(re,W,Y){return 32*((1<<re)*Y+W)+re}function De(re,W){const Y=re.tileID.canonical;if(!this._geoJSONIndex)return W(null,null);const se=this._geoJSONIndex.getTile(Y.z,Y.x,Y.y);if(!se)return W(null,null);const ge=new class{constructor(je){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=je.length,this._features=je}feature(je){return new class{constructor(We){this._feature=We,this.extent=o.EXTENT,this.type=We.type,this.properties=We.tags,"id"in We&&!isNaN(We.id)&&(this.id=parseInt(We.id,10))}loadGeometry(){if(this._feature.type===1){const We=[];for(const Ie of this._feature.geometry)We.push([new o.Point(Ie[0],Ie[1])]);return We}{const We=[];for(const Ie of this._feature.geometry){const Ke=[];for(const bt of Ie)Ke.push(new o.Point(bt[0],bt[1]));We.push(Ke)}return We}}toGeoJSON(We,Ie,Ke){return V.call(this,We,Ie,Ke)}}(this._features[je])}}(se.features);let Se=Qe(ge);Se.byteOffset===0&&Se.byteLength===Se.buffer.byteLength||(Se=new Uint8Array(Se)),W(null,{vectorTile:ge,rawData:Se.buffer})}Qt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Qt.prototype.splitTile=function(re,W,Y,se,ge,Se,je){for(var We=[re,W,Y,se],Ie=this.options,Ke=Ie.debug;We.length;){se=We.pop(),Y=We.pop(),W=We.pop(),re=We.pop();var bt=1<<W,Dt=Be(W,Y,se),Et=this.tiles[Dt];if(!Et&&(Ke>1&&console.time("creation"),Et=this.tiles[Dt]=Je(re,W,Y,se,Ie),this.tileCoords.push({z:W,x:Y,y:se}),Ke)){Ke>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",W,Y,se,Et.numFeatures,Et.numPoints,Et.numSimplified),console.timeEnd("creation"));var _n="z"+W;this.stats[_n]=(this.stats[_n]||0)+1,this.total++}if(Et.source=re,ge){if(W===Ie.maxZoom||W===ge)continue;var En=1<<ge-W;if(Y!==Math.floor(Se/En)||se!==Math.floor(je/En))continue}else if(W===Ie.indexMaxZoom||Et.numPoints<=Ie.indexMaxPoints)continue;if(Et.source=null,re.length!==0){Ke>1&&console.time("clipping");var rn,gn,Cn,ir,Gn,Hr,Ln=.5*Ie.buffer/Ie.extent,ur=.5-Ln,Zr=.5+Ln,fi=1+Ln;rn=gn=Cn=ir=null,Gn=sr(re,bt,Y-Ln,Y+Zr,0,Et.minX,Et.maxX,Ie),Hr=sr(re,bt,Y+ur,Y+fi,0,Et.minX,Et.maxX,Ie),re=null,Gn&&(rn=sr(Gn,bt,se-Ln,se+Zr,1,Et.minY,Et.maxY,Ie),gn=sr(Gn,bt,se+ur,se+fi,1,Et.minY,Et.maxY,Ie),Gn=null),Hr&&(Cn=sr(Hr,bt,se-Ln,se+Zr,1,Et.minY,Et.maxY,Ie),ir=sr(Hr,bt,se+ur,se+fi,1,Et.minY,Et.maxY,Ie),Hr=null),Ke>1&&console.timeEnd("clipping"),We.push(rn||[],W+1,2*Y,2*se),We.push(gn||[],W+1,2*Y,2*se+1),We.push(Cn||[],W+1,2*Y+1,2*se),We.push(ir||[],W+1,2*Y+1,2*se+1)}}},Qt.prototype.getTile=function(re,W,Y){var se=this.options,ge=se.extent,Se=se.debug;if(re<0||re>24)return null;var je=1<<re,We=Be(re,W=(W%je+je)%je,Y);if(this.tiles[We])return an(this.tiles[We],ge);Se>1&&console.log("drilling down to z%d-%d-%d",re,W,Y);for(var Ie,Ke=re,bt=W,Dt=Y;!Ie&&Ke>0;)Ke--,bt=Math.floor(bt/2),Dt=Math.floor(Dt/2),Ie=this.tiles[Be(Ke,bt,Dt)];return Ie&&Ie.source?(Se>1&&console.log("found parent tile z%d-%d-%d",Ke,bt,Dt),Se>1&&console.time("drilling down"),this.splitTile(Ie.source,Ke,bt,Dt,re,W,Y),Se>1&&console.timeEnd("drilling down"),this.tiles[We]?an(this.tiles[We],ge):null):null};class dt extends o.VectorTileWorkerSource{constructor(W,Y,se,ge,Se){super(W,Y,se,ge,De),Se&&(this.loadGeoJSON=Se)}loadData(W,Y){const se=W&&W.request,ge=se&&se.collectResourceTiming;this.loadGeoJSON(W,(Se,je)=>{if(Se||!je)return Y(Se);if(typeof je!="object")return Y(new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`));{F(je,!0);try{if(W.filter){const Ie=o.createExpression(W.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ie.result==="error")throw new Error(Ie.value.map(bt=>`${bt.key}: ${bt.message}`).join(", "));je={type:"FeatureCollection",features:je.features.filter(bt=>Ie.value.evaluate({zoom:0},bt))}}this._geoJSONIndex=W.cluster?new be(function({superclusterOptions:Ie,clusterProperties:Ke}){if(!Ke||!Ie)return Ie;const bt={},Dt={},Et={accumulated:null,zoom:0},_n={properties:null},En=Object.keys(Ke);for(const rn of En){const[gn,Cn]=Ke[rn],ir=o.createExpression(Cn),Gn=o.createExpression(typeof gn=="string"?[gn,["accumulated"],["get",rn]]:gn);bt[rn]=ir.value,Dt[rn]=Gn.value}return Ie.map=rn=>{_n.properties=rn;const gn={};for(const Cn of En)gn[Cn]=bt[Cn].evaluate(Et,_n);return gn},Ie.reduce=(rn,gn)=>{_n.properties=gn;for(const Cn of En)Et.accumulated=rn[Cn],rn[Cn]=Dt[Cn].evaluate(Et,_n)},Ie}(W)).load(je.features):function(Ie,Ke){return new Qt(Ie,Ke)}(je,W.geojsonVtOptions)}catch(Ie){return Y(Ie)}this.loaded={};const We={};if(ge){const Ie=o.getPerformanceMeasurement(se);Ie&&(We.resourceTiming={},We.resourceTiming[W.source]=JSON.parse(JSON.stringify(Ie)))}Y(null,We)}})}reloadTile(W,Y){const se=this.loaded;return se&&se[W.uid]?super.reloadTile(W,Y):this.loadTile(W,Y)}loadGeoJSON(W,Y){if(W.request)o.getJSON(W.request,Y);else{if(typeof W.data!="string")return Y(new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`));try{return Y(null,JSON.parse(W.data))}catch{return Y(new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(W,Y){try{Y(null,this._geoJSONIndex.getClusterExpansionZoom(W.clusterId))}catch(se){Y(se)}}getClusterChildren(W,Y){try{Y(null,this._geoJSONIndex.getChildren(W.clusterId))}catch(se){Y(se)}}getClusterLeaves(W,Y){try{Y(null,this._geoJSONIndex.getLeaves(W.clusterId,W.limit,W.offset))}catch(se){Y(se)}}}class mt{constructor(W){this.self=W,this.actor=new o.Actor(W,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=o.getProjection({name:"mercator"}),this.workerSourceTypes={vector:o.VectorTileWorkerSource,geojson:dt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Y,se)=>{if(this.workerSourceTypes[Y])throw new Error(`Worker source with name "${Y}" already registered.`);this.workerSourceTypes[Y]=se},this.self.registerRTLTextPlugin=Y=>{if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=Y.applyArabicShaping,o.plugin.processBidirectionalText=Y.processBidirectionalText,o.plugin.processStyledBidirectionalText=Y.processStyledBidirectionalText}}clearCaches(W,Y,se){delete this.layerIndexes[W],delete this.availableImages[W],delete this.workerSources[W],delete this.demWorkerSources[W],se()}checkIfReady(W,Y,se){se()}setReferrer(W,Y){this.referrer=Y}spriteLoaded(W,Y){this.isSpriteLoaded[W]=Y;for(const se in this.workerSources[W]){const ge=this.workerSources[W][se];for(const Se in ge)ge[Se]instanceof o.VectorTileWorkerSource&&(ge[Se].isSpriteLoaded=Y,ge[Se].fire(new o.Event("isSpriteLoaded")))}}setImages(W,Y,se){this.availableImages[W]=Y;for(const ge in this.workerSources[W]){const Se=this.workerSources[W][ge];for(const je in Se)Se[je].availableImages=Y}se()}enableTerrain(W,Y,se){this.terrain=Y,se()}setProjection(W,Y){this.projections[W]=o.getProjection(Y)}setLayers(W,Y,se){this.getLayerIndex(W).replace(Y),se()}updateLayers(W,Y,se){this.getLayerIndex(W).update(Y.layers,Y.removedIds),se()}loadTile(W,Y,se){const ge=this.enableTerrain?o.extend({enableTerrain:this.terrain},Y):Y;ge.projection=this.projections[W]||this.defaultProjection,this.getWorkerSource(W,Y.type,Y.source).loadTile(ge,se)}loadDEMTile(W,Y,se){const ge=this.enableTerrain?o.extend({buildQuadTree:this.terrain},Y):Y;this.getDEMWorkerSource(W,Y.source).loadTile(ge,se)}reloadTile(W,Y,se){const ge=this.enableTerrain?o.extend({enableTerrain:this.terrain},Y):Y;ge.projection=this.projections[W]||this.defaultProjection,this.getWorkerSource(W,Y.type,Y.source).reloadTile(ge,se)}abortTile(W,Y,se){this.getWorkerSource(W,Y.type,Y.source).abortTile(Y,se)}removeTile(W,Y,se){this.getWorkerSource(W,Y.type,Y.source).removeTile(Y,se)}removeSource(W,Y,se){if(!this.workerSources[W]||!this.workerSources[W][Y.type]||!this.workerSources[W][Y.type][Y.source])return;const ge=this.workerSources[W][Y.type][Y.source];delete this.workerSources[W][Y.type][Y.source],ge.removeSource!==void 0?ge.removeSource(Y,se):se()}loadWorkerSource(W,Y,se){try{this.self.importScripts(Y.url),se()}catch(ge){se(ge.toString())}}syncRTLPluginState(W,Y,se){try{o.plugin.setState(Y);const ge=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&ge!=null){this.self.importScripts(ge);const Se=o.plugin.isParsed();se(Se?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ge}`),Se)}}catch(ge){se(ge.toString())}}getAvailableImages(W){let Y=this.availableImages[W];return Y||(Y=[]),Y}getLayerIndex(W){let Y=this.layerIndexes[W];return Y||(Y=this.layerIndexes[W]=new M),Y}getWorkerSource(W,Y,se){if(this.workerSources[W]||(this.workerSources[W]={}),this.workerSources[W][Y]||(this.workerSources[W][Y]={}),!this.workerSources[W][Y][se]){const ge={send:(Se,je,We,Ie,Ke,bt)=>{this.actor.send(Se,je,We,W,Ke,bt)},scheduler:this.actor.scheduler};this.workerSources[W][Y][se]=new this.workerSourceTypes[Y](ge,this.getLayerIndex(W),this.getAvailableImages(W),this.isSpriteLoaded[W])}return this.workerSources[W][Y][se]}getDEMWorkerSource(W,Y){return this.demWorkerSources[W]||(this.demWorkerSources[W]={}),this.demWorkerSources[W][Y]||(this.demWorkerSources[W][Y]=new k),this.demWorkerSources[W][Y]}enforceCacheSizeLimit(W,Y){o.enforceCacheSizeLimit(Y)}getWorkerPerformanceMetrics(W,Y,se){se(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new mt(self)),mt}),u(["./shared"],function(o){function x(m,l){if(Array.isArray(m)){if(!Array.isArray(l)||m.length!==l.length)return!1;for(let h=0;h<m.length;h++)if(!x(m[h],l[h]))return!1;return!0}if(typeof m=="object"&&m!==null&&l!==null){if(typeof l!="object"||Object.keys(m).length!==Object.keys(l).length)return!1;for(const h in m)if(!x(m[h],l[h]))return!1;return!0}return m===l}var S=M;function M(m){return!function(l){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var y,_,w=new Blob([""],{type:"text/javascript"}),C=URL.createObjectURL(w);try{_=new Worker(C),y=!0}catch{y=!1}return _&&_.terminate(),URL.revokeObjectURL(C),y}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var y=document.createElement("canvas");y.width=y.height=1;var _=y.getContext("2d");if(!_)return!1;var w=_.getImageData(0,0,1,1);return w&&w.width===y.width}()?(k[h=l&&l.failIfMajorPerformanceCaveat]===void 0&&(k[h]=function(y){var _,w=function(C){var R=document.createElement("canvas"),P=Object.create(M.webGLContextAttributes);return P.failIfMajorPerformanceCaveat=C,R.getContext("webgl",P)||R.getContext("experimental-webgl",P)}(y);if(!w)return!1;try{_=w.createShader(w.VERTEX_SHADER)}catch{return!1}return!(!_||w.isContextLost())&&(w.shaderSource(_,"void main() {}"),w.compileShader(_),w.getShaderParameter(_,w.COMPILE_STATUS)===!0)}(h)),k[h]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var h}(m)}var k={};function L(m,l,h){const y=o.window.document.createElement(m);return l!==void 0&&(y.className=l),h&&h.appendChild(y),y}function j(m,l,h){const y=o.window.document.createElementNS("http://www.w3.org/2000/svg",m);for(const _ of Object.keys(l))y.setAttributeNS(null,_,l[_]);return h&&h.appendChild(y),y}M.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const F=o.window.document&&o.window.document.documentElement.style,V=F&&F.userSelect!==void 0?"userSelect":"WebkitUserSelect";let oe;function B(){F&&V&&(oe=F[V],F[V]="none")}function $(){F&&V&&(F[V]=oe)}function Z(m){m.preventDefault(),m.stopPropagation(),o.window.removeEventListener("click",Z,!0)}function Q(){o.window.addEventListener("click",Z,!0),o.window.setTimeout(()=>{o.window.removeEventListener("click",Z,!0)},0)}function ae(m,l){const h=m.getBoundingClientRect();return ke(m,h,l)}function ue(m,l){const h=m.getBoundingClientRect(),y=[];for(let _=0;_<l.length;_++)y.push(ke(m,h,l[_]));return y}function de(m){return o.window.InstallTrigger!==void 0&&m.button===2&&m.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:m.button}function ke(m,l,h){const y=m.offsetWidth===l.width?1:m.offsetWidth/l.width;return new o.Point((h.clientX-l.left)*y,(h.clientY-l.top)*y)}function J(m,l){var h=l[0],y=l[1],_=l[2],w=l[3],C=h*w-_*y;return C?(m[0]=w*(C=1/C),m[1]=-y*C,m[2]=-_*C,m[3]=h*C,m):null}function G(m){const{userImage:l}=m;return!!(l&&l.render&&l.render())&&(m.data.replace(new Uint8Array(l.data.buffer)),!0)}class pe extends o.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:h,callback:y}of this.requestors)this._notify(h,y);this.requestors=[]}}hasImage(l){return!!this.getImage(l)}getImage(l){return this.images[l]}addImage(l,h){this._validate(l,h)&&(this.images[l]=h)}_validate(l,h){let y=!0;return this._validateStretch(h.stretchX,h.data&&h.data.width)||(this.fire(new o.ErrorEvent(new Error(`Image "${l}" has invalid "stretchX" value`))),y=!1),this._validateStretch(h.stretchY,h.data&&h.data.height)||(this.fire(new o.ErrorEvent(new Error(`Image "${l}" has invalid "stretchY" value`))),y=!1),this._validateContent(h.content,h)||(this.fire(new o.ErrorEvent(new Error(`Image "${l}" has invalid "content" value`))),y=!1),y}_validateStretch(l,h){if(!l)return!0;let y=0;for(const _ of l){if(_[0]<y||_[1]<_[0]||h<_[1])return!1;y=_[1]}return!0}_validateContent(l,h){return!(l&&(l.length!==4||l[0]<0||h.data.width<l[0]||l[1]<0||h.data.height<l[1]||l[2]<0||h.data.width<l[2]||l[3]<0||h.data.height<l[3]||l[2]<l[0]||l[3]<l[1]))}updateImage(l,h){h.version=this.images[l].version+1,this.images[l]=h,this.updatedImages[l]=!0}removeImage(l){const h=this.images[l];delete this.images[l],delete this.patterns[l],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l,h){let y=!0;if(!this.isLoaded())for(const _ of l)this.images[_]||(y=!1);this.isLoaded()||y?this._notify(l,h):this.requestors.push({ids:l,callback:h})}_notify(l,h){const y={};for(const _ of l){this.images[_]||this.fire(new o.Event("styleimagemissing",{id:_}));const w=this.images[_];w?y[_]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,hasRenderCallback:!!(w.userImage&&w.userImage.render)}:o.warnOnce(`Image "${_}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}h(null,y)}getPixelSize(){const{width:l,height:h}=this.atlasImage;return{width:l,height:h}}getPattern(l){const h=this.patterns[l],y=this.getImage(l);if(!y)return null;if(h&&h.position.version===y.version)return h.position;if(h)h.position.version=y.version;else{const _={w:y.data.width+2,h:y.data.height+2,x:0,y:0},w=new o.ImagePosition(_,y);this.patterns[l]={bin:_,position:w}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const h=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(l,this.atlasImage,h.RGBA),this.atlasTexture&&this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const w in this.patterns)l.push(this.patterns[w].bin);const{w:h,h:y}=o.potpack(l),_=this.atlasImage;_.resize({width:h||1,height:y||1});for(const w in this.patterns){const{bin:C}=this.patterns[w],R=C.x+1,P=C.y+1,z=this.images[w].data,D=z.width,q=z.height;o.RGBAImage.copy(z,_,{x:0,y:0},{x:R,y:P},{width:D,height:q}),o.RGBAImage.copy(z,_,{x:0,y:q-1},{x:R,y:P-1},{width:D,height:1}),o.RGBAImage.copy(z,_,{x:0,y:0},{x:R,y:P+q},{width:D,height:1}),o.RGBAImage.copy(z,_,{x:D-1,y:0},{x:R-1,y:P},{width:1,height:q}),o.RGBAImage.copy(z,_,{x:0,y:0},{x:R+D,y:P},{width:1,height:q})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const h of l){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;const y=this.images[h];G(y)&&this.updateImage(h,y)}}}const $e=new o.Properties({anchor:new o.DataConstantProperty(o.spec.light.anchor),position:new class{constructor(){this.specification=o.spec.light.position}possiblyEvaluate(m,l){return function([h,y,_]){const w=o.degToRad(y+90),C=o.degToRad(_);return{x:h*Math.cos(w)*Math.sin(C),y:h*Math.sin(w)*Math.sin(C),z:h*Math.cos(C),azimuthal:y,polar:_}}(m.expression.evaluate(l))}interpolate(m,l,h){return{x:o.number(m.x,l.x,h),y:o.number(m.y,l.y,h),z:o.number(m.z,l.z,h),azimuthal:o.number(m.azimuthal,l.azimuthal,h),polar:o.number(m.polar,l.polar,h)}}},color:new o.DataConstantProperty(o.spec.light.color),intensity:new o.DataConstantProperty(o.spec.light.intensity)});class Ge extends o.Evented{constructor(l){super(),this._transitionable=new o.Transitionable($e),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,h={}){if(!this._validate(o.validateLight,l,h))for(const y in l){const _=l[y];o.endsWith(y,"-transition")?this._transitionable.setTransition(y.slice(0,-11),_):this._transitionable.setValue(y,_)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,h,y){return(!y||y.validate!==!1)&&o.emitValidationErrors(this,l.call(o.validateStyle,o.extend({value:h,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}const Ae=new o.Properties({source:new o.DataConstantProperty(o.spec.terrain.source),exaggeration:new o.DataConstantProperty(o.spec.terrain.exaggeration)});let Ze=class extends o.Evented{constructor(m,l){super(),this._transitionable=new o.Transitionable(Ae),this.set(m),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=l}get(){return this._transitionable.serialize()}set(m){for(const l in m){const h=m[l];o.endsWith(l,"-transition")?this._transitionable.setTransition(l.slice(0,-11),h):this._transitionable.setValue(l,h)}}updateTransitions(m){this._transitioning=this._transitionable.transitioned(m,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(m){this.properties=this._transitioning.possiblyEvaluate(m)}};function Qe(m,l,h,y){const _=o.smoothstep(45,65,h),[w,C]=gt(m,y),R=o.length(l);let P=1-Math.min(1,Math.exp((R-w)/(C-w)*-6));return P*=P*P,P=Math.min(1,1.00747*P),P*_*m.alpha}function gt(m,l){const h=.5/Math.tan(.5*l);return[m.range[0]+h,m.range[1]+h]}const Me=new o.Properties({range:new o.DataConstantProperty(o.spec.fog.range),color:new o.DataConstantProperty(o.spec.fog.color),"high-color":new o.DataConstantProperty(o.spec.fog["high-color"]),"space-color":new o.DataConstantProperty(o.spec.fog["space-color"]),"horizon-blend":new o.DataConstantProperty(o.spec.fog["horizon-blend"]),"star-intensity":new o.DataConstantProperty(o.spec.fog["star-intensity"])});class Ce extends o.Evented{constructor(l,h){super(),this._transitionable=new o.Transitionable(Me),this.set(l),this._transitioning=this._transitionable.untransitioned(),this._transform=h}get state(){const l=this._transform,h=l.projection.name==="globe",y=o.globeToMercatorTransition(l.zoom),_=this.properties.get("range"),w=[.5,3];return{range:h?[o.number(w[0],_[0],y),o.number(w[1],_[1],y)]:_,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(l,h={}){if(!this._validate(o.validateFog,l,h)){for(const y of Object.keys(o.spec.fog))l&&l[y]===void 0&&(l[y]=o.spec.fog[y].default);for(const y in l){const _=l[y];o.endsWith(y,"-transition")?this._transitionable.setTransition(y.slice(0,-11),_):this._transitionable.setValue(y,_)}}}getOpacity(l){if(!this._transform.projection.supportsFog)return 0;const h=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:o.smoothstep(45,65,l))*h.a}getOpacityAtLatLng(l,h){return this._transform.projection.supportsFog?function(y,_,w){const C=o.MercatorCoordinate.fromLngLat(_),R=w.elevation?w.elevation.getAtPointOrZero(C):0,P=[C.x,C.y,R];return o.transformMat4(P,P,w.mercatorFogMatrix),Qe(y,P,w.pitch,w._fov)}(this.state,l,h):0}getFovAdjustedRange(l){return this._transform.projection.supportsFog?gt(this.state,l):[0,1]}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,h,y){return(!y||y.validate!==!1)&&o.emitValidationErrors(this,l.call(o.validateStyle,o.extend({value:h,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}class Te{constructor(l,h){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=o.uniqueId();const y=this.workerPool.acquire(this.id);for(let _=0;_<y.length;_++){const w=new Te.Actor(y[_],h,this.id);w.name=`Worker ${_}`,this.actors.push(w)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(l,h,y){o.asyncAll(this.actors,(_,w)=>{_.send(l,h,w)},y=y||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(l=>{l.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Ve(m,l,h){return l*(o.EXTENT/(m.tileSize*Math.pow(2,h-m.tileID.overscaledZ)))}Te.Actor=o.Actor;class we{constructor(l,h,y,_){this.screenBounds=l,this.cameraPoint=h,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=y,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,_)}static createFromScreenPoints(l,h){let y,_;if(l instanceof o.Point||typeof l[0]=="number"){const w=o.Point.convert(l);y=[w],_=h.isPointAboveHorizon(w)}else{const w=o.Point.convert(l[0]),C=o.Point.convert(l[1]);y=[w,C],_=o.polygonizeBounds(w,C).every(R=>h.isPointAboveHorizon(R))}return new we(y,h.getCameraPoint(),_,h)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(l){return o.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],l)}bufferedCameraGeometry(l){const h=this.screenBounds[0],y=this.screenBounds.length===1?this.screenBounds[0].add(new o.Point(1,1)):this.screenBounds[1],_=o.polygonizeBounds(h,y,0,!1);return this.cameraPoint.y>y.y&&(this.cameraPoint.x>h.x&&this.cameraPoint.x<y.x?_.splice(3,0,this.cameraPoint):this.cameraPoint.x>=y.x?_[2]=this.cameraPoint:this.cameraPoint.x<=h.x&&(_[3]=this.cameraPoint)),o.bufferConvexPolygon(_,l)}bufferedCameraGeometryGlobe(l){const h=this.screenBounds[0],y=this.screenBounds.length===1?this.screenBounds[0].add(new o.Point(1,1)):this.screenBounds[1],_=o.polygonizeBounds(h,y,l),w=this.cameraPoint.clone();switch(3*((w.y>h.y)+(w.y>y.y))+((w.x>h.x)+(w.x>y.x))){case 0:_[0]=w,_[4]=w.clone();break;case 1:_.splice(1,0,w);break;case 2:_[1]=w;break;case 3:_.splice(4,0,w);break;case 5:_.splice(2,0,w);break;case 6:_[3]=w;break;case 7:_.splice(3,0,w);break;case 8:_[2]=w}return _}containsTile(l,h,y,_=0){const w=l.queryPadding/h._pixelsPerMercatorPixel+1,C=y?this._bufferedCameraMercator(w,h):this._bufferedScreenMercator(w,h);let R=l.tileID.wrap+(C.unwrapped?_:0);const P=C.polygon.map(me=>o.getTilePoint(l.tileTransform,me,R));if(!o.polygonIntersectsBox(P,0,0,o.EXTENT,o.EXTENT))return;R=l.tileID.wrap+(this.screenGeometryMercator.unwrapped?_:0);const z=this.screenGeometryMercator.polygon.map(me=>o.getTileVec3(l.tileTransform,me,R)),D=z.map(me=>new o.Point(me[0],me[1])),q=h.getFreeCameraOptions().position||new o.MercatorCoordinate(0,0,0),te=o.getTileVec3(l.tileTransform,q,R),ce=z.map(me=>{const H=o.sub(me,me,te);return o.normalize(H,H),new o.Ray(te,H)}),fe=Ve(l,1,h.zoom)*h._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:D,tilespaceRays:ce,bufferedTilespaceGeometry:P,bufferedTilespaceBounds:(he=o.getBounds(P),he.min.x=o.clamp(he.min.x,0,o.EXTENT),he.min.y=o.clamp(he.min.y,0,o.EXTENT),he.max.x=o.clamp(he.max.x,0,o.EXTENT),he.max.y=o.clamp(he.max.y,0,o.EXTENT),he),tile:l,tileID:l.tileID,pixelToTileUnitsFactor:fe};var he}_bufferedScreenMercator(l,h){const y=nt(l);if(this._screenRaycastCache[y])return this._screenRaycastCache[y];{let _;return _=h.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(l),h):{polygon:this.bufferedScreenGeometry(l).map(w=>h.pointCoordinate3D(w)),unwrapped:!0},this._screenRaycastCache[y]=_,_}}_bufferedCameraMercator(l,h){const y=nt(l);if(this._cameraRaycastCache[y])return this._cameraRaycastCache[y];{let _;return _=h.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(l),h):{polygon:this.bufferedCameraGeometry(l).map(w=>h.pointCoordinate3D(w)),unwrapped:!0},this._cameraRaycastCache[y]=_,_}}_projectAndResample(l,h){const y=function(w,C){const R=o.multiply([],C.pixelMatrix,C.globeMatrix),P=[0,-o.GLOBE_RADIUS,0,1],z=[0,o.GLOBE_RADIUS,0,1],D=[0,0,0,1];o.transformMat4$1(P,P,R),o.transformMat4$1(z,z,R),o.transformMat4$1(D,D,R);const q=new o.Point(P[0]/P[3],P[1]/P[3]),te=new o.Point(z[0]/z[3],z[1]/z[3]),ce=o.polygonContainsPoint(w,q)&&P[3]<D[3],fe=o.polygonContainsPoint(w,te)&&z[3]<D[3];if(!ce&&!fe)return null;const he=function(ze,He,qe){for(let it=1;it<ze.length;it++){const Pt=Ue(He.pointCoordinate3D(ze[it-1]).x),et=Ue(He.pointCoordinate3D(ze[it]).x);if(qe<0){if(Pt<et)return{idx:it,t:-Pt/(et-1-Pt)}}else if(et<Pt)return{idx:it,t:(1-Pt)/(et+1-Pt)}}return null}(w,C,ce?-1:1);if(!he)return null;const{idx:me,t:H}=he;let le=me>1?be(w.slice(0,me),C):[],_e=me<w.length?be(w.slice(me),C):[];le=le.map(ze=>new o.Point(Ue(ze.x),ze.y)),_e=_e.map(ze=>new o.Point(Ue(ze.x),ze.y));const xe=[...le];xe.length===0&&xe.push(_e[_e.length-1]);const Oe=o.number(xe[xe.length-1].y,(_e.length===0?le[0]:_e[0]).y,H);let Fe;return Fe=ce?[new o.Point(0,Oe),new o.Point(0,0),new o.Point(1,0),new o.Point(1,Oe)]:[new o.Point(1,Oe),new o.Point(1,1),new o.Point(0,1),new o.Point(0,Oe)],xe.push(...Fe),_e.length===0?xe.push(le[0]):xe.push(..._e),{polygon:xe.map(ze=>new o.MercatorCoordinate(ze.x,ze.y)),unwrapped:!1}}(l,h);if(y)return y;const _=function(w,C){let R=!1,P=-1/0,z=0;for(let q=0;q<w.length-1;q++)w[q].x>P&&(P=w[q].x,z=q);for(let q=0;q<w.length-1;q++){const te=(z+q)%(w.length-1),ce=w[te],fe=w[te+1];Math.abs(ce.x-fe.x)>.5&&(ce.x<fe.x?(ce.x+=1,te===0&&(w[w.length-1].x+=1)):(fe.x+=1,te+1===w.length-1&&(w[0].x+=1)),R=!0)}const D=o.mercatorXfromLng(C.center.lng);return R&&D<Math.abs(D-1)&&w.forEach(q=>{q.x-=1}),{polygon:w,unwrapped:R}}(be(l,h).map(w=>new o.Point(Ue(w.x),w.y)),h);return{polygon:_.polygon.map(w=>new o.MercatorCoordinate(w.x,w.y)),unwrapped:_.unwrapped}}}function be(m,l){return o.resample(m,h=>{const y=l.pointCoordinate3D(h);h.x=y.x,h.y=y.y},1/256)}function Ue(m){return m<0?1+m%1:m%1}function nt(m){return 100*m|0}function at(m,l,h,y,_){const w=function(C,R){if(C)return _(C);if(R){m.url&&R.tiles&&m.tiles&&delete m.tiles;const P=o.pick(o.extend(R,m),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);R.vector_layers&&(P.vectorLayers=R.vector_layers,P.vectorLayerIds=P.vectorLayers.map(z=>z.id)),P.tiles=l.canonicalizeTileset(P,m.url),_(null,P)}};return m.url?o.getJSON(l.transformRequest(l.normalizeSourceURL(m.url,null,h,y),o.ResourceType.Source),w):o.exported.frame(()=>w(null,m))}class At{constructor(l,h,y){this.bounds=o.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=h||0,this.maxzoom=y||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const h=Math.pow(2,l.z),y=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*h),_=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*h),w=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*h),C=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*h);return l.x>=y&&l.x<w&&l.y>=_&&l.y<C}}class Ft{constructor(l,h,y){this.context=l;const _=l.gl;this.buffer=_.createBuffer(),this.dynamicDraw=!!y,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||h.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const h=this.context.gl;this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Rt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Mt{constructor(l,h,y,_){this.length=h.length,this.attributes=y,this.itemSize=h.bytesPerElement,this.dynamicDraw=_,this.context=l;const w=l.gl;this.buffer=w.createBuffer(),l.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||h.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,h){for(let y=0;y<this.attributes.length;y++){const _=h.attributes[this.attributes[y].name];_!==void 0&&l.enableVertexAttribArray(_)}}setVertexAttribPointers(l,h,y){for(let _=0;_<this.attributes.length;_++){const w=this.attributes[_],C=h.attributes[w.name];C!==void 0&&l.vertexAttribPointer(C,w.components,l[Rt[w.type]],!1,this.itemSize,w.offset+this.itemSize*(y||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ct{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Nt extends ct{getDefault(){return o.Color.transparent}set(l){const h=this.current;(l.r!==h.r||l.g!==h.g||l.b!==h.b||l.a!==h.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Ht extends ct{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class ln extends ct{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class Kt extends ct{getDefault(){return[!0,!0,!0,!0]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||l[3]!==h[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class wn extends ct{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class hn extends ct{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class Xn extends ct{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const h=this.current;(l.func!==h.func||l.ref!==h.ref||l.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class sr extends ct{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class In extends ct{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=l,this.dirty=!1}}class qn extends ct{getDefault(){return[0,1]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class Lr extends ct{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=l,this.dirty=!1}}class cr extends ct{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class $t extends ct{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.BLEND):h.disable(h.BLEND),this.current=l,this.dirty=!1}}class nn extends ct{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class Sn extends ct{getDefault(){return o.Color.transparent}set(l){const h=this.current;(l.r!==h.r||l.g!==h.g||l.b!==h.b||l.a!==h.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class mn extends ct{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class vn extends ct{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=l,this.dirty=!1}}class an extends ct{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class Ne extends ct{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}let Je,ut=class extends ct{getDefault(){return null}set(m){(m!==this.current||this.dirty)&&(this.gl.useProgram(m),this.current=m,this.dirty=!1)}};class Ut extends ct{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class Qt extends ct{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||l[3]!==h[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Be extends ct{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class De extends ct{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class dt extends ct{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class mt extends ct{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class re extends ct{getDefault(){return null}set(l){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class W extends ct{constructor(l){super(l),this.vao=l.extVertexArrayObject}getDefault(){return null}set(l){this.vao&&(l!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(l),this.current=l,this.dirty=!1)}}class Y extends ct{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class se extends ct{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class ge extends ct{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class Se extends ct{constructor(l,h){super(l),this.context=l,this.parent=h}getDefault(){return null}}class je extends Se{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class We extends Se{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,this.attachment(),h.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Ie extends We{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Ke{constructor(l,h,y,_){this.context=l,this.width=h,this.height=y;const w=this.framebuffer=l.gl.createFramebuffer();this.colorAttachment=new je(l,w),_&&(this.depthAttachment=new We(l,w))}destroy(){const l=this.context.gl,h=this.colorAttachment.get();if(h&&l.deleteTexture(h),this.depthAttachment){const y=this.depthAttachment.get();y&&l.deleteRenderbuffer(y)}l.deleteFramebuffer(this.framebuffer)}}class bt{constructor(l,h=!1){if(this.gl=l,this.isWebGL2=h,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),h){const y=l;this.extVertexArrayObject={createVertexArrayOES:y.createVertexArray.bind(l),deleteVertexArrayOES:y.deleteVertexArray.bind(l),bindVertexArrayOES:y.bindVertexArray.bind(l)}}this.clearColor=new Nt(this),this.clearDepth=new Ht(this),this.clearStencil=new ln(this),this.colorMask=new Kt(this),this.depthMask=new wn(this),this.stencilMask=new hn(this),this.stencilFunc=new Xn(this),this.stencilOp=new sr(this),this.stencilTest=new In(this),this.depthRange=new qn(this),this.depthTest=new Lr(this),this.depthFunc=new cr(this),this.blend=new $t(this),this.blendFunc=new nn(this),this.blendColor=new Sn(this),this.blendEquation=new mn(this),this.cullFace=new vn(this),this.cullFaceSide=new an(this),this.frontFace=new Ne(this),this.program=new ut(this),this.activeTexture=new Ut(this),this.viewport=new Qt(this),this.bindFramebuffer=new Be(this),this.bindRenderbuffer=new De(this),this.bindTexture=new dt(this),this.bindVertexBuffer=new mt(this),this.bindElementBuffer=new re(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new W(this),this.pixelStoreUnpack=new Y(this),this.pixelStoreUnpackPremultiplyAlpha=new se(this),this.pixelStoreUnpackFlipY=new ge(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=l.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=l.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=l.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),h||(this.extTextureHalfFloat=l.getExtension("OES_texture_half_float")),(h||this.extTextureHalfFloat&&l.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=h||l.getExtension("OES_standard_derivatives"),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,h){return new Ft(this,l,h)}createVertexBuffer(l,h,y){return new Mt(this,l,h,y)}createRenderbuffer(l,h,y){const _=this.gl,w=_.createRenderbuffer();return this.bindRenderbuffer.set(w),_.renderbufferStorage(_.RENDERBUFFER,l,h,y),this.bindRenderbuffer.set(null),w}createFramebuffer(l,h,y){return new Ke(this,l,h,y)}clear({color:l,depth:h,stencil:y}){const _=this.gl;let w=0;l&&(w|=_.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(w|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),y!==void 0&&(w|=_.STENCIL_BUFFER_BIT,this.clearStencil.set(y),this.stencilMask.set(255)),_.clear(w)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){x(l.blendFunction,o.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Dt extends o.Evented{constructor(l,h,y,_){if(super(),this.id=l,this.dispatcher=y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(h,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_),this._tileWorkers={},this._deduped=new o.DedupedRequest}load(l){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"}));const h=Array.isArray(this.map._language)?this.map._language.join():this.map._language,y=this.map._worldview;this._tileJSONRequest=at(this._options,this.map._requestManager,h,y,(_,w)=>{this._tileJSONRequest=null,this._loaded=!0,_?(h&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${h}`),y&&y.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${y}`),this.fire(new o.ErrorEvent(_))):w&&(o.extend(this,w),w.bounds&&(this.tileBounds=new At(w.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(w.tiles,this.map._requestManager._customAccessToken),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),l&&l(_)})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}loadTile(l,h){const y=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme)),_={request:this.map._requestManager.transformRequest(y,o.ResourceType.Tile),data:void 0,uid:l.uid,tileID:l.tileID,tileZoom:l.tileZoom,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:l.isSymbolTile};if(_.request.collectResourceTiming=this._collectResourceTiming,l.actor&&l.state!=="expired")l.state==="loading"?l.reloadCallback=h:l.request=l.actor.send("reloadTile",_,w.bind(this));else if(l.actor=this._tileWorkers[y]=this._tileWorkers[y]||this.dispatcher.getActor(),this.dispatcher.ready)l.request=l.actor.send("loadTile",_,w.bind(this),void 0,!0);else{const C=o.loadVectorTile.call({deduped:this._deduped},_,(R,P)=>{R||!P?w.call(this,R):(_.data={cacheControl:P.cacheControl,expires:P.expires,rawData:P.rawData.slice(0)},l.actor&&l.actor.send("loadTile",_,w.bind(this),void 0,!0))},!0);l.request={cancel:C}}function w(C,R){return delete l.request,l.aborted?h(null):C&&C.status!==404?h(C):(R&&R.resourceTiming&&(l.resourceTiming=R.resourceTiming),this.map._refreshExpiredTiles&&R&&l.setExpiryData(R),l.loadVectorData(R,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),h(null),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id})}unloadTile(l){l.unloadVectorData(),l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Et extends o.Evented{constructor(l,h,y,_){super(),this.id=l,this.dispatcher=y,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},h),o.extend(this,o.pick(h,["url","scheme","tileSize"]))}load(l){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=at(this._options,this.map._requestManager,null,null,(h,y)=>{this._tileJSONRequest=null,this._loaded=!0,h?this.fire(new o.ErrorEvent(h)):y&&(o.extend(this,y),y.bounds&&(this.tileBounds=new At(y.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(y.tiles),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),l&&l(h)})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,h){const y=o.exported.devicePixelRatio>=2,_=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),y,this.tileSize);l.request=o.getImage(this.map._requestManager.transformRequest(_,o.ResourceType.Tile),(w,C,R,P)=>(delete l.request,l.aborted?(l.state="unloaded",h(null)):w?(l.state="errored",h(w)):C?(this.map._refreshExpiredTiles&&l.setExpiryData({cacheControl:R,expires:P}),l.setTexture(C,this.map.painter),l.state="loaded",o.cacheEntryPossiblyAdded(this.dispatcher),void h(null)):h(null)))}static loadTileData(l,h,y){l.setTexture(h,y)}static unloadTileData(l,h){l.texture&&h.saveTileTexture(l.texture)}abortTile(l,h){l.request&&(l.request.cancel(),delete l.request),h()}unloadTile(l,h){l.texture&&this.map.painter.saveTileTexture(l.texture),h()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function _n(m,l,h,y,_,w,C,R){const P=[m,h,_,l,y,w,1,1,1],z=[C,R,1],D=o.adjoint([],P),[q,te,ce]=o.transformMat3(z,z,o.transpose(D,D));return o.multiply$1(P,[q,0,0,0,te,0,0,0,ce],P)}class En extends o.Evented{constructor(l,h,y,_){super(),this.id=l,this.dispatcher=y,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=h,this._dirty=!1}load(l,h){this._loaded=h||!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),(y,_)=>{if(this._imageRequest=null,this._loaded=!0,y)this.fire(new o.ErrorEvent(y));else if(_){const{HTMLImageElement:w}=o.window;this.image=_ instanceof w?o.exported.getImageData(_):_,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,l&&(this.coordinates=l),this._finishLoading()}})}loaded(){return this._loaded}updateImage(l){return this.image&&l.url?(this._imageRequest&&l.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=l.url,this.load(l.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(l){this.coordinates=l,this._boundsArray=void 0;const h=l.map(o.MercatorCoordinate.fromLngLat);return this.tileID=function(y){let _=1/0,w=1/0,C=-1/0,R=-1/0;for(const q of y)_=Math.min(_,q.x),w=Math.min(w,q.y),C=Math.max(C,q.x),R=Math.max(R,q.y);const P=Math.max(C-_,R-w),z=Math.max(0,Math.floor(-Math.log(P)/Math.LN2)),D=Math.pow(2,z);return new o.CanonicalTileID(z,Math.floor((_+C)/2*D),Math.floor((w+R)/2*D))}(h),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(l){for(const P in this.tiles){const z=this.tiles[P];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture)}if(this._boundsArray)return;const h=o.tileTransform(this.tileID,this.map.transform.projection),[y,_,w,C]=this.coordinates.map(P=>{const z=h.projection.project(P[0],P[1]);return o.getTilePoint(h,z)._round()});this.perspectiveTransform=function(P,z,D,q,te,ce,fe,he,me,H){const le=_n(0,0,P,0,0,z,P,z),_e=_n(D,q,te,ce,fe,he,me,H);return o.multiply$1(_e,o.adjoint(le,le),_e),[_e[6]/_e[8]*P/o.EXTENT,_e[7]/_e[8]*z/o.EXTENT]}(this.width,this.height,y.x,y.y,_.x,_.y,C.x,C.y,w.x,w.y);const R=this._boundsArray=new o.StructArrayLayout4i8;R.emplaceBack(y.x,y.y,0,0),R.emplaceBack(_.x,_.y,o.EXTENT,0),R.emplaceBack(C.x,C.y,0,o.EXTENT),R.emplaceBack(w.x,w.y,o.EXTENT,o.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=l.createVertexBuffer(R,o.boundsAttributes.members),this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,h=l.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new o.Texture(l,this.image,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(l)}loadTile(l,h){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={},h(null)):(l.state="errored",h(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const rn={vector:Dt,raster:Et,"raster-dem":class extends Et{constructor(m,l,h,y){super(m,l,h,y),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox"}loadTile(m,l){const h=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function y(_,w){_&&(m.state="errored",l(_)),w&&(m.dem=w,m.dem.onDeserialize(),m.needsHillshadePrepare=!0,m.needsDEMTextureUpload=!0,m.state="loaded",l(null))}m.request=o.getImage(this.map._requestManager.transformRequest(h,o.ResourceType.Tile),function(_,w,C,R){if(delete m.request,m.aborted)m.state="unloaded",l(null);else if(_)m.state="errored",l(_);else if(w){this.map._refreshExpiredTiles&&m.setExpiryData({cacheControl:C,expires:R});const P=o.window.ImageBitmap&&w instanceof o.window.ImageBitmap&&(Je==null&&(Je=o.window.OffscreenCanvas&&new o.window.OffscreenCanvas(1,1).getContext("2d")&&typeof o.window.createImageBitmap=="function"),Je),z=1-(w.width-o.prevPowerOfTwo(w.width))/2;z<1||m.neighboringTiles||(m.neighboringTiles=this._getNeighboringTiles(m.tileID));const D=P?w:o.exported.getImageData(w,z),q={uid:m.uid,coord:m.tileID,source:this.id,rawImageData:D,encoding:this.encoding,padding:z};m.actor&&m.state!=="expired"||(m.actor=this.dispatcher.getActor(),m.actor.send("loadDEMTile",q,y.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(m){const l=m.canonical,h=Math.pow(2,l.z),y=(l.x-1+h)%h,_=l.x===0?m.wrap-1:m.wrap,w=(l.x+1+h)%h,C=l.x+1===h?m.wrap+1:m.wrap,R={};return R[new o.OverscaledTileID(m.overscaledZ,_,l.z,y,l.y).key]={backfilled:!1},R[new o.OverscaledTileID(m.overscaledZ,C,l.z,w,l.y).key]={backfilled:!1},l.y>0&&(R[new o.OverscaledTileID(m.overscaledZ,_,l.z,y,l.y-1).key]={backfilled:!1},R[new o.OverscaledTileID(m.overscaledZ,m.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},R[new o.OverscaledTileID(m.overscaledZ,C,l.z,w,l.y-1).key]={backfilled:!1}),l.y+1<h&&(R[new o.OverscaledTileID(m.overscaledZ,_,l.z,y,l.y+1).key]={backfilled:!1},R[new o.OverscaledTileID(m.overscaledZ,m.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},R[new o.OverscaledTileID(m.overscaledZ,C,l.z,w,l.y+1).key]={backfilled:!1}),R}unloadTile(m){m.demTexture&&this.map.painter.saveTileTexture(m.demTexture),m.fbo&&(m.fbo.destroy(),delete m.fbo),m.dem&&delete m.dem,delete m.neighboringTiles,m.state="unloaded"}},geojson:class extends o.Evented{constructor(m,l,h,y){super(),this.id=m,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=h.getActor(),this.setEventedParent(y),this._data=l.data,this._options=o.extend({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const _=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*_,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*_,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:o.EXTENT,radius:(l.clusterRadius!==void 0?l.clusterRadius:50)*_,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions)}onAdd(m){this.map=m,this.setData(this._data)}setData(m){return this._data=m,this._updateWorkerData(),this}getClusterExpansionZoom(m,l){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:m,source:this.id},l),this}getClusterChildren(m,l){return this.actor.send("geojson.getClusterChildren",{clusterId:m,source:this.id},l),this}getClusterLeaves(m,l,h,y){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:m,limit:l,offset:h},y),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new o.Event("dataloading",{dataType:"source"})),this._loaded=!1;const m=o.extend({},this.workerOptions),l=this._data;typeof l=="string"?(m.request=this.map._requestManager.transformRequest(o.exported.resolveURL(l),o.ResourceType.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(l),this._pendingLoad=this.actor.send(`${this.type}.loadData`,m,(h,y)=>{if(this._loaded=!0,this._pendingLoad=null,h)this.fire(new o.ErrorEvent(h));else{const _={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&y&&y.resourceTiming&&y.resourceTiming[this.id]&&(_.resourceTiming=y.resourceTiming[this.id]),this.fire(new o.Event("data",_)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(m,l){const h=m.actor?"reloadTile":"loadTile";m.actor=this.actor,m.request=this.actor.send(h,{type:this.type,uid:m.uid,tileID:m.tileID,tileZoom:m.tileZoom,zoom:m.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(y,_)=>(delete m.request,m.unloadVectorData(),m.aborted?l(null):y?l(y):(m.loadVectorData(_,this.map.painter,h==="reloadTile"),l(null))),void 0,h==="loadTile")}abortTile(m){m.request&&(m.request.cancel(),delete m.request),m.aborted=!0}unloadTile(m){m.unloadVectorData(),this.actor.send("removeTile",{uid:m.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return o.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends En{constructor(m,l,h,y){super(m,l,h,y),this.roundZoom=!0,this.type="video",this.options=l}load(){this._loaded=!1;const m=this.options;this.urls=[];for(const l of m.urls)this.urls.push(this.map._requestManager.transformRequest(l,o.ResourceType.Source).url);o.getVideo(this.urls,(l,h)=>{this._loaded=!0,l?this.fire(new o.ErrorEvent(l)):h&&(this.video=h,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(m){if(this.video){const l=this.video.seekable;m<l.start(0)||m>l.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=m}}getVideo(){return this.video}onAdd(m){this.map||(this.map=m,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const m=this.map.painter.context,l=m.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(m,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(m)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:En,canvas:class extends En{constructor(m,l,h,y){super(m,l,h,y),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(w=>typeof w!="number"))||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${m}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${m}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${m}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${m}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${m}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(m){this.map=m,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let m=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,m=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,m=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context;this.texture?(m||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(l,this.canvas,l.gl.RGBA,{premultiply:!0}),this._prepareData(l)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const m of[this.canvas.width,this.canvas.height])if(isNaN(m)||m<=0)return!0;return!1}},custom:class extends o.Evented{constructor(m,l,h,y){super(),this.id=m,this.type="custom",this._dataType="raster",this._dispatcher=h,this._implementation=l,this.setEventedParent(y),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new o.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new o.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new At(this._implementation.bounds,this.minzoom,this.maxzoom)),l.update=this._update.bind(this),l.clearTiles=this._clearTiles.bind(this),l.coveringTiles=this._coveringTiles.bind(this),o.extend(this,o.pick(l,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return o.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(m){this._map=m,this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(m),this.load()}onRemove(m){this._implementation.onRemove&&this._implementation.onRemove(m)}hasTile(m){if(this._implementation.hasTile){const{x:l,y:h,z:y}=m.canonical;return this._implementation.hasTile({x:l,y:h,z:y})}return!this.tileBounds||this.tileBounds.contains(m.canonical)}loadTile(m,l){const{x:h,y,z:_}=m.tileID.canonical,w=new o.window.AbortController;m.request=Promise.resolve(this._implementation.loadTile({x:h,y,z:_},{signal:w.signal})).then(function(C){return delete m.request,m.aborted?(m.state="unloaded",l(null)):C===void 0?(m.state="errored",l(null)):C===null?(this.loadTileData(m,{width:this.tileSize,height:this.tileSize,data:null}),m.state="loaded",l(null)):function(R){return R instanceof o.window.ImageData||R instanceof o.window.HTMLCanvasElement||R instanceof o.window.ImageBitmap||R instanceof o.window.HTMLImageElement}(C)?(this.loadTileData(m,C),m.state="loaded",void l(null)):(m.state="errored",l(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(C=>{C.code!==20&&(m.state="errored",l(C))}),m.request.cancel=()=>w.abort()}loadTileData(m,l){Et.loadTileData(m,l,this._map.painter)}unloadTileData(m){Et.unloadTileData(m,this._map.painter)}unloadTile(m,l){if(this.unloadTileData(m),this._implementation.unloadTile){const{x:h,y,z:_}=m.tileID.canonical;this._implementation.unloadTile({x:h,y,z:_})}l()}abortTile(m,l){m.request&&m.request.cancel&&(m.request.cancel(),delete m.request),l()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(m=>({x:m.canonical.x,y:m.canonical.y,z:m.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}}},gn=function(m,l,h,y){const _=new rn[l.type](m,l,h,y);if(_.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${_.id}`);return o.bindAll(["load","abort","unload","serialize","prepare"],_),_};function Cn(m,l){const h=o.identity([]);return o.scale(h,h,[.5*m.width,.5*-m.height,1]),o.translate(h,h,[1,-1,0]),o.multiply(h,h,m.calculateProjMatrix(l.toUnwrapped())),Float32Array.from(h)}function ir(m,l,h,y,_,w,C,R=!1){const P=m.tilesIn(y,C,R);P.sort(Hr);const z=[];for(const q of P)z.push({wrappedTileID:q.tile.tileID.wrapped().key,queryResults:q.tile.queryRenderedFeatures(l,h,m._state,q,_,w,Cn(m.transform,q.tile.tileID),R)});const D=function(q){const te={},ce={};for(const fe of q){const he=fe.queryResults,me=fe.wrappedTileID,H=ce[me]=ce[me]||{};for(const le in he){const _e=he[le],xe=H[le]=H[le]||{},Oe=te[le]=te[le]||[];for(const Fe of _e)xe[Fe.featureIndex]||(xe[Fe.featureIndex]=!0,Oe.push(Fe))}}return te}(z);for(const q in D)D[q].forEach(te=>{const ce=te.feature,fe=ce.layer;fe&&fe.type!=="background"&&fe.type!=="sky"&&(ce.source=fe.source,fe["source-layer"]&&(ce.sourceLayer=fe["source-layer"]),ce.state=ce.id!==void 0?m.getFeatureState(fe["source-layer"],ce.id):{})});return D}function Gn(m,l){const h=m.getRenderableIds().map(w=>m.getTileByID(w)),y=[],_={};for(let w=0;w<h.length;w++){const C=h[w],R=C.tileID.canonical.key;_[R]||(_[R]=!0,C.querySourceFeatures(y,l))}return y}function Hr(m,l){const h=m.tileID,y=l.tileID;return h.overscaledZ-y.overscaledZ||h.canonical.y-y.canonical.y||h.wrap-y.wrap||h.canonical.x-y.canonical.x}function Ln(){return Ll.workerClass!=null?new Ll.workerClass:new o.window.Worker(Ll.workerUrl)}const ur="mapboxgl_preloaded_worker_pool";class Zr{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<Zr.workerCount;)this.workers.push(new Ln);return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(h=>{h.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ur]}numActive(){return Object.keys(this.active).length}}let fi;function zi(){return fi||(fi=new Zr),fi}function xx(m,l){const h={};for(const y in m)y!=="ref"&&(h[y]=m[y]);return o.refProperties.forEach(y=>{y in l&&(h[y]=l[y])}),h}function dy(m){m=m.slice();const l=Object.create(null);for(let h=0;h<m.length;h++)l[m[h].id]=m[h];for(let h=0;h<m.length;h++)"ref"in m[h]&&(m[h]=xx(m[h],l[m[h].ref]));return m}Zr.workerCount=2;const tr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Ef(m,l,h){h.push({command:tr.addSource,args:[m,l[m]]})}function zc(m,l,h){l.push({command:tr.removeSource,args:[m]}),h[m]=!0}function Tf(m,l,h,y){zc(m,h,y),Ef(m,l,h)}function sd(m,l,h){let y;for(y in m[h])if(m[h].hasOwnProperty(y)&&y!=="data"&&!x(m[h][y],l[h][y]))return!1;for(y in l[h])if(l[h].hasOwnProperty(y)&&y!=="data"&&!x(m[h][y],l[h][y]))return!1;return!0}function ra(m,l,h,y,_,w){let C;for(C in l=l||{},m=m||{})m.hasOwnProperty(C)&&(x(m[C],l[C])||h.push({command:w,args:[y,C,l[C],_]}));for(C in l)l.hasOwnProperty(C)&&!m.hasOwnProperty(C)&&(x(m[C],l[C])||h.push({command:w,args:[y,C,l[C],_]}))}function Ea(m){return m.id}function Cf(m,l){return m[l.id]=l,m}class Rf{constructor(l,h){this.reset(l,h)}reset(l,h){this.points=l||[],this._distances=[0];for(let y=1;y<this.points.length;y++)this._distances[y]=this._distances[y-1]+this.points[y].dist(this.points[y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=o.clamp(l,0,1);let h=1,y=this._distances[h];const _=l*this.paddedLength+this.padding;for(;y<_&&h<this._distances.length;)y=this._distances[++h];const w=h-1,C=this._distances[w],R=y-C,P=R>0?(_-C)/R:0;return this.points[w].mult(1-P).add(this.points[h].mult(P))}}class Cs{constructor(l,h,y){const _=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(l/y),this.yCellCount=Math.ceil(h/y);for(let C=0;C<this.xCellCount*this.yCellCount;C++)_.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=h,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,h,y,_,w){this._forEachCell(h,y,_,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(h),this.bboxes.push(y),this.bboxes.push(_),this.bboxes.push(w)}insertCircle(l,h,y,_){this._forEachCell(h-_,y-_,h+_,y+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(h),this.circles.push(y),this.circles.push(_)}_insertBoxCell(l,h,y,_,w,C){this.boxCells[w].push(C)}_insertCircleCell(l,h,y,_,w,C){this.circleCells[w].push(C)}_query(l,h,y,_,w,C){if(y<0||l>this.width||_<0||h>this.height)return!w&&[];const R=[];if(l<=0&&h<=0&&this.width<=y&&this.height<=_){if(w)return!0;for(let P=0;P<this.boxKeys.length;P++)R.push({key:this.boxKeys[P],x1:this.bboxes[4*P],y1:this.bboxes[4*P+1],x2:this.bboxes[4*P+2],y2:this.bboxes[4*P+3]});for(let P=0;P<this.circleKeys.length;P++){const z=this.circles[3*P],D=this.circles[3*P+1],q=this.circles[3*P+2];R.push({key:this.circleKeys[P],x1:z-q,y1:D-q,x2:z+q,y2:D+q})}return C?R.filter(C):R}return this._forEachCell(l,h,y,_,this._queryCell,R,{hitTest:w,seenUids:{box:{},circle:{}}},C),w?R.length>0:R}_queryCircle(l,h,y,_,w){const C=l-y,R=l+y,P=h-y,z=h+y;if(R<0||C>this.width||z<0||P>this.height)return!_&&[];const D=[];return this._forEachCell(C,P,R,z,this._queryCellCircle,D,{hitTest:_,circle:{x:l,y:h,radius:y},seenUids:{box:{},circle:{}}},w),_?D.length>0:D}query(l,h,y,_,w){return this._query(l,h,y,_,!1,w)}hitTest(l,h,y,_,w){return this._query(l,h,y,_,!0,w)}hitTestCircle(l,h,y,_){return this._queryCircle(l,h,y,!0,_)}_queryCell(l,h,y,_,w,C,R,P){const z=R.seenUids,D=this.boxCells[w];if(D!==null){const te=this.bboxes;for(const ce of D)if(!z.box[ce]){z.box[ce]=!0;const fe=4*ce;if(l<=te[fe+2]&&h<=te[fe+3]&&y>=te[fe+0]&&_>=te[fe+1]&&(!P||P(this.boxKeys[ce]))){if(R.hitTest)return C.push(!0),!0;C.push({key:this.boxKeys[ce],x1:te[fe],y1:te[fe+1],x2:te[fe+2],y2:te[fe+3]})}}}const q=this.circleCells[w];if(q!==null){const te=this.circles;for(const ce of q)if(!z.circle[ce]){z.circle[ce]=!0;const fe=3*ce;if(this._circleAndRectCollide(te[fe],te[fe+1],te[fe+2],l,h,y,_)&&(!P||P(this.circleKeys[ce]))){if(R.hitTest)return C.push(!0),!0;{const he=te[fe],me=te[fe+1],H=te[fe+2];C.push({key:this.circleKeys[ce],x1:he-H,y1:me-H,x2:he+H,y2:me+H})}}}}}_queryCellCircle(l,h,y,_,w,C,R,P){const z=R.circle,D=R.seenUids,q=this.boxCells[w];if(q!==null){const ce=this.bboxes;for(const fe of q)if(!D.box[fe]){D.box[fe]=!0;const he=4*fe;if(this._circleAndRectCollide(z.x,z.y,z.radius,ce[he+0],ce[he+1],ce[he+2],ce[he+3])&&(!P||P(this.boxKeys[fe])))return C.push(!0),!0}}const te=this.circleCells[w];if(te!==null){const ce=this.circles;for(const fe of te)if(!D.circle[fe]){D.circle[fe]=!0;const he=3*fe;if(this._circlesCollide(ce[he],ce[he+1],ce[he+2],z.x,z.y,z.radius)&&(!P||P(this.circleKeys[fe])))return C.push(!0),!0}}}_forEachCell(l,h,y,_,w,C,R,P){const z=this._convertToXCellCoord(l),D=this._convertToYCellCoord(h),q=this._convertToXCellCoord(y),te=this._convertToYCellCoord(_);for(let ce=z;ce<=q;ce++)for(let fe=D;fe<=te;fe++)if(w.call(this,l,h,y,_,this.xCellCount*fe+ce,C,R,P))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,h,y,_,w,C){const R=_-l,P=w-h,z=y+C;return z*z>R*R+P*P}_circleAndRectCollide(l,h,y,_,w,C,R){const P=(C-_)/2,z=Math.abs(l-(_+P));if(z>P+y)return!1;const D=(R-w)/2,q=Math.abs(h-(w+D));if(q>D+y)return!1;if(z<=P||q<=D)return!0;const te=z-P,ce=q-D;return te*te+ce*ce<=y*y}}const Ta={unknown:0,flipRequired:1,flipNotRequired:2},Fc=Math.tan(85*Math.PI/180);function ft(m,l,h,y,_,w,C){const R=o.create();if(h)if(w.name==="globe"){const P=o.calculateGlobeLabelMatrix(_,l);o.multiply(R,R,P)}else{const P=J([],C);R[0]=P[0],R[1]=P[1],R[4]=P[2],R[5]=P[3],y||o.rotateZ(R,R,_.angle)}else o.multiply(R,_.labelPlaneMatrix,m);return R}function Ca(m,l,h,y,_,w,C){const R=ft(m,l,h,y,_,w,C);return w.name==="globe"&&h||(R[2]=R[6]=R[10]=R[14]=0),R}function ni(m,l,h,y,_,w,C){if(h){if(w.name==="globe"){const R=ft(m,l,h,y,_,w,C);return o.invert(R,R),o.multiply(R,m,R),R}{const R=o.clone(m),P=o.identity([]);return P[0]=C[0],P[1]=C[1],P[4]=C[2],P[5]=C[3],o.multiply(R,R,P),y||o.rotateZ(R,R,-_.angle),R}}return _.glCoordMatrix}function bi(m,l,h,y){const _=[m,l,h,1];h?o.transformMat4$1(_,_,y):zn(_,_,y);const w=_[3];return _[0]/=w,_[1]/=w,_[2]/=w,_}function hy(m,l){return Math.min(.5+m/l*.5,1.5)}function ia(m,l){const h=m[0]/m[3],y=m[1]/m[3];return h>=-l[0]&&h<=l[0]&&y>=-l[1]&&y<=l[1]}function Mf(m,l,h,y,_,w,C,R,P,z){const D=h.transform,q=y?m.textSizeData:m.iconSizeData,te=o.evaluateSizeForZoom(q,h.transform.zoom),ce=D.projection.name==="globe",fe=[256/h.width*2+1,256/h.height*2+1],he=y?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;he.clear();let me=null;ce&&(me=y?m.text.globeExtVertexArray:m.icon.globeExtVertexArray);const H=m.lineVertexArray,le=y?m.text.placedSymbolArray:m.icon.placedSymbolArray,_e=h.transform.width/h.transform.height;let xe,Oe=!1;for(let Fe=0;Fe<le.length;Fe++){const ze=le.get(Fe),{numGlyphs:He,writingMode:qe}=ze;if(qe!==o.WritingMode.vertical||Oe||xe===o.WritingMode.horizontal||(Oe=!0),xe=qe,(ze.hidden||qe===o.WritingMode.vertical)&&!Oe){Uo(He,he);continue}Oe=!1;const it=new o.Point(ze.tileAnchorX,ze.tileAnchorY);let{x:Pt,y:et,z:vt}=D.projection.projectTilePoint(it.x,it.y,z.canonical);if(P){const[Tn,en,yn]=P(it);Pt+=Tn,et+=en,vt+=yn}const st=[Pt,et,vt,1];if(o.transformMat4$1(st,st,l),!ia(st,fe)){Uo(He,he);continue}const kt=hy(h.transform.cameraToCenterDistance,st[3]),rt=o.evaluateSizeForFeature(q,te,ze),yt=C?rt/kt:rt*kt,Lt=bi(Pt,et,vt,_);if(Lt[3]<=0){Uo(He,he);continue}let wt={};const Ot=C?null:P,un=Zt(ze,yt,!1,R,l,_,w,m.glyphOffsetArray,H,he,me,Lt,it,wt,_e,Ot,D.projection,z,C);Oe=un.useVertical,Ot&&un.needsFlipping&&(wt={}),(un.notEnoughRoom||Oe||un.needsFlipping&&Zt(ze,yt,!0,R,l,_,w,m.glyphOffsetArray,H,he,me,Lt,it,wt,_e,Ot,D.projection,z,C).notEnoughRoom)&&Uo(He,he)}y?(m.text.dynamicLayoutVertexBuffer.updateData(he),me&&m.text.globeExtVertexBuffer.updateData(me)):(m.icon.dynamicLayoutVertexBuffer.updateData(he),me&&m.icon.globeExtVertexBuffer.updateData(me))}function fy(m,l,h,y,_,w,C,R,P,z,D,q,te,ce,fe,he){const{lineStartIndex:me,glyphStartIndex:H,segment:le}=R,_e=H+R.numGlyphs,xe=me+R.lineLength,Oe=l.getoffsetX(H),Fe=l.getoffsetX(_e-1),ze=ho(m*Oe,h,y,_,w,C,le,me,xe,P,z,D,q,te,!0,ce,fe,he);if(!ze)return null;const He=ho(m*Fe,h,y,_,w,C,le,me,xe,P,z,D,q,te,!0,ce,fe,he);return He?{first:ze,last:He}:null}function gl(m,l,h,y){return m===o.WritingMode.horizontal&&Math.abs(y)>Math.abs(h)?{useVertical:!0}:m===o.WritingMode.vertical?y>0?{needsFlipping:!0}:null:l!==Ta.unknown&&function(_,w){return _===0||Math.abs(w/_)>Fc}(h,y)?l===Ta.flipRequired?{needsFlipping:!0}:null:h<0?{needsFlipping:!0}:null}function Zt(m,l,h,y,_,w,C,R,P,z,D,q,te,ce,fe,he,me,H,le){const _e=l/24,xe=m.lineOffsetX*_e,Oe=m.lineOffsetY*_e,{lineStartIndex:Fe,glyphStartIndex:ze,numGlyphs:He,segment:qe,writingMode:it,flipState:Pt}=m,et=Fe+m.lineLength,vt=st=>{if(D){const[Lt,wt,Ot]=st.up,un=z.length;o.updateGlobeVertexNormal(D,un+0,Lt,wt,Ot),o.updateGlobeVertexNormal(D,un+1,Lt,wt,Ot),o.updateGlobeVertexNormal(D,un+2,Lt,wt,Ot),o.updateGlobeVertexNormal(D,un+3,Lt,wt,Ot)}const[kt,rt,yt]=st.point;o.addDynamicAttributes(z,kt,rt,yt,st.angle)};if(He>1){const st=fy(_e,R,xe,Oe,h,q,te,m,P,w,ce,he,!1,me,H,le);if(!st)return{notEnoughRoom:!0};if(y&&!h){let[kt,rt,yt]=st.first.point,[Lt,wt,Ot]=st.last.point;[kt,rt]=bi(kt,rt,yt,C),[Lt,wt]=bi(Lt,wt,Ot,C);const un=gl(it,Pt,(Lt-kt)*fe,wt-rt);if(m.flipState=un&&un.needsFlipping?Ta.flipRequired:Ta.flipNotRequired,un)return un}vt(st.first);for(let kt=ze+1;kt<ze+He-1;kt++){const rt=ho(_e*R.getoffsetX(kt),xe,Oe,h,q,te,qe,Fe,et,P,w,ce,he,!1,!1,me,H,le);if(!rt)return z.length-=4*(kt-ze),{notEnoughRoom:!0};vt(rt)}vt(st.last)}else{if(y&&!h){const kt=bi(te.x,te.y,0,_),rt=Fe+qe+1,yt=new o.Point(P.getx(rt),P.gety(rt)),Lt=bi(yt.x,yt.y,0,_),wt=Lt[3]>0?Lt:Dn(te,yt,kt,1,_,void 0,me,H.canonical),Ot=gl(it,Pt,(wt[0]-kt[0])*fe,wt[1]-kt[1]);if(m.flipState=Ot&&Ot.needsFlipping?Ta.flipRequired:Ta.flipNotRequired,Ot)return Ot}const st=ho(_e*R.getoffsetX(ze),xe,Oe,h,q,te,qe,Fe,et,P,w,ce,he,!1,!1,me,H,le);if(!st)return{notEnoughRoom:!0};vt(st)}return{}}function Nn(m,l,h,y,_){const{x:w,y:C,z:R}=y.projectTilePoint(m.x,m.y,l);if(!_)return bi(w,C,R,h);const[P,z,D]=_(m);return bi(w+P,C+z,R+D,h)}function Dn(m,l,h,y,_,w,C,R){const P=Nn(m.sub(l)._unit()._add(m),R,_,C,w);return o.sub(P,h,P),o.normalize(P,P),o.scaleAndAdd(P,h,P,y)}function ho(m,l,h,y,_,w,C,R,P,z,D,q,te,ce,fe,he,me,H){const le=y?m-l:m+l;let _e=le>0?1:-1,xe=0;y&&(_e*=-1,xe=Math.PI),_e<0&&(xe+=Math.PI);let Oe=R+C+(_e>0?0:1)|0,Fe=_,ze=_,He=0,qe=0;const it=Math.abs(le),Pt=[],et=[];let vt=w,st=vt;const kt=()=>Dn(st,vt,ze,it-He+1,D,te,he,me.canonical);for(;He+qe<=it;){if(Oe+=_e,Oe<R||Oe>=P)return null;if(ze=Fe,st=vt,Pt.push(ze),ce&&et.push(st),vt=new o.Point(z.getx(Oe),z.gety(Oe)),Fe=q[Oe],!Fe){const yn=Nn(vt,me.canonical,D,he,te);Fe=yn[3]>0?q[Oe]=yn:kt()}He+=qe,qe=o.distance(ze,Fe)}fe&&te&&(q[Oe]&&(Fe=kt(),qe=o.distance(ze,Fe)),q[Oe]=Fe);const rt=(it-He)/qe,yt=vt.sub(st)._mult(rt)._add(st),Lt=o.sub([],Fe,ze),wt=o.scaleAndAdd([],ze,Lt,rt);let Ot=[0,0,1],un=Lt[0],Tn=Lt[1];if(H&&(Ot=he.upVector(me.canonical,yt.x,yt.y),Ot[0]!==0||Ot[1]!==0||Ot[2]!==1)){const yn=[Ot[2],0,-Ot[0]],Fn=o.cross([],Ot,yn);o.normalize(yn,yn),o.normalize(Fn,Fn),un=o.dot(Lt,yn),Tn=o.dot(Lt,Fn)}if(h){const yn=o.cross([],Ot,Lt);o.normalize(yn,yn),o.scaleAndAdd(wt,wt,yn,h*_e)}const en=xe+Math.atan2(Tn,un);return Pt.push(wt),ce&&et.push(yt),{point:wt,angle:en,path:Pt,tilePath:et,up:Ot}}function Uo(m,l){const h=l.length,y=h+4*m;l.resize(y),l.float32.fill(-1/0,4*h,4*y)}function zn(m,l,h){const y=l[0],_=l[1];return m[0]=h[0]*y+h[4]*_+h[12],m[1]=h[1]*y+h[5]*_+h[13],m[3]=h[3]*y+h[7]*_+h[15],m}const fo=100;class Bc{constructor(l,h,y=new Cs(l.width+200,l.height+200,25),_=new Cs(l.width+200,l.height+200,25)){this.transform=l,this.grid=y,this.ignoredGrid=_,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+fo,this.screenBottomBoundary=l.height+fo,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.fogState=h}placeCollisionBox(l,h,y,_,w,C,R,P){let z=y.projectedAnchorX,D=y.projectedAnchorY,q=y.projectedAnchorZ;const te=y.elevation,ce=y.tileID,fe=l.getProjection();if(te&&ce){const[Fe,ze,He]=fe.upVector(ce.canonical,y.tileAnchorX,y.tileAnchorY),qe=fe.upVectorScale(ce.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;z+=Fe*te*qe,D+=ze*te*qe,q+=He*te*qe}const he=this.projectAndGetPerspectiveRatio(R,z,D,q,y.tileID,fe.name==="globe"||!!te||this.transform.pitch>0,fe),me=C*he.perspectiveRatio,H=(y.x1*h+_.x-y.padding)*me+he.point.x,le=(y.y1*h+_.y-y.padding)*me+he.point.y,_e=(y.x2*h+_.x+y.padding)*me+he.point.x,xe=(y.y2*h+_.y+y.padding)*me+he.point.y,Oe=he.perspectiveRatio<=.55||he.occluded;return!this.isInsideGrid(H,le,_e,xe)||!w&&this.grid.hitTest(H,le,_e,xe,P)||Oe?{box:[],offscreen:!1,occluded:he.occluded}:{box:[H,le,_e,xe],offscreen:this.isOffscreen(H,le,_e,xe),occluded:!1}}placeCollisionCircles(l,h,y,_,w,C,R,P,z,D,q,te,ce,fe,he){const me=[],H=this.transform.elevation,le=l.getProjection(),_e=H?H.getAtTileOffsetFunc(he,this.transform.center.lat,this.transform.worldSize,le):null,xe=new o.Point(y.tileAnchorX,y.tileAnchorY);let{x:Oe,y:Fe,z:ze}=le.projectTilePoint(xe.x,xe.y,he.canonical);if(_e){const[yt,Lt,wt]=_e(xe);Oe+=yt,Fe+=Lt,ze+=wt}const He=le.name==="globe",qe=this.projectAndGetPerspectiveRatio(R,Oe,Fe,ze,he,He||!!H||this.transform.pitch>0,le),{perspectiveRatio:it}=qe,Pt=(q?C/it:C*it)/o.ONE_EM,et=bi(Oe,Fe,ze,P),vt=qe.signedDistanceFromCamera>0?fy(Pt,w,y.lineOffsetX*Pt,y.lineOffsetY*Pt,!1,et,xe,y,_,P,{},H&&!q?_e:null,q&&!!H,le,he,q):null;let st=!1,kt=!1,rt=!0;if(vt&&!qe.occluded){const yt=.5*ce*it+fe,Lt=new o.Point(-100,-100),wt=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),Ot=new Rf,{first:un,last:Tn}=vt,en=un.path.length;let yn=[];for(let cn=en-1;cn>=1;cn--)yn.push(un.path[cn]);for(let cn=1;cn<Tn.path.length;cn++)yn.push(Tn.path[cn]);const Fn=2.5*yt;z&&(yn=yn.map(([cn,or,dr],hr)=>(_e&&!He&&(dr=_e(hr<en-1?un.tilePath[en-1-hr]:Tn.tilePath[hr-en+2])[2]),bi(cn,or,dr,z))),yn.some(cn=>cn[3]<=0)&&(yn=[]));let On=[];if(yn.length>0){let cn=1/0,or=-1/0,dr=1/0,hr=-1/0;for(const fr of yn)cn=Math.min(cn,fr[0]),dr=Math.min(dr,fr[1]),or=Math.max(or,fr[0]),hr=Math.max(hr,fr[1]);or>=Lt.x&&cn<=wt.x&&hr>=Lt.y&&dr<=wt.y&&(On=[yn.map(fr=>new o.Point(fr[0],fr[1]))],(cn<Lt.x||or>wt.x||dr<Lt.y||hr>wt.y)&&(On=o.clipLine(On,Lt.x,Lt.y,wt.x,wt.y)))}for(const cn of On){Ot.reset(cn,.25*yt);let or=0;or=Ot.length<=.5*yt?1:Math.ceil(Ot.paddedLength/Fn)+1;for(let dr=0;dr<or;dr++){const hr=dr/Math.max(or-1,1),fr=Ot.lerp(hr),Bi=fr.x+fo,Si=fr.y+fo;me.push(Bi,Si,yt,0);const To=Bi-yt,la=Si-yt,Dr=Bi+yt,pr=Si+yt;if(rt=rt&&this.isOffscreen(To,la,Dr,pr),kt=kt||this.isInsideGrid(To,la,Dr,pr),!h&&this.grid.hitTestCircle(Bi,Si,yt,te)&&(st=!0,!D))return{circles:[],offscreen:!1,collisionDetected:st,occluded:!1}}}}return{circles:!D&&st||!kt?[]:me,offscreen:rt,collisionDetected:st,occluded:qe.occluded}}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[];let y=1/0,_=1/0,w=-1/0,C=-1/0;for(const D of l){const q=new o.Point(D.x+fo,D.y+fo);y=Math.min(y,q.x),_=Math.min(_,q.y),w=Math.max(w,q.x),C=Math.max(C,q.y),h.push(q)}const R=this.grid.query(y,_,w,C).concat(this.ignoredGrid.query(y,_,w,C)),P={},z={};for(const D of R){const q=D.key;if(P[q.bucketInstanceId]===void 0&&(P[q.bucketInstanceId]={}),P[q.bucketInstanceId][q.featureIndex])continue;const te=[new o.Point(D.x1,D.y1),new o.Point(D.x2,D.y1),new o.Point(D.x2,D.y2),new o.Point(D.x1,D.y2)];o.polygonIntersectsPolygon(h,te)&&(P[q.bucketInstanceId][q.featureIndex]=!0,z[q.bucketInstanceId]===void 0&&(z[q.bucketInstanceId]=[]),z[q.bucketInstanceId].push(q.featureIndex))}return z}insertCollisionBox(l,h,y,_,w){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:_,collisionGroupID:w},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,h,y,_,w){const C=h?this.ignoredGrid:this.grid,R={bucketInstanceId:y,featureIndex:_,collisionGroupID:w};for(let P=0;P<l.length;P+=4)C.insertCircle(R,l[P],l[P+1],l[P+2])}projectAndGetPerspectiveRatio(l,h,y,_,w,C,R){const P=[h,y,_,1];let z=!1;_||this.transform.pitch>0?(o.transformMat4$1(P,P,l),this.fogState&&w&&R.name!=="globe"&&(z=function(te,ce,fe,he,me,H){const le=H.calculateFogTileMatrix(me),_e=[ce,fe,he];return o.transformMat4(_e,_e,le),Qe(te,_e,H.pitch,H._fov)}(this.fogState,h,y,_,w.toUnwrapped(),this.transform)>.9)):zn(P,P,l);const D=P[3];return{point:new o.Point((P[0]/D+1)/2*this.transform.width+fo,(-P[1]/D+1)/2*this.transform.height+fo),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(R)/D*.5,1.5),signedDistanceFromCamera:D,occluded:C&&P[2]>D||z}}isOffscreen(l,h,y,_){return y<fo||l>=this.screenRightBoundary||_<fo||h>this.screenBottomBoundary}isInsideGrid(l,h,y,_){return y>=0&&l<this.gridRightBoundary&&_>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const l=o.identity([]);return o.translate(l,l,[-100,-100,0]),l}}function Rs(m,l,h){const y=l.createTileMatrix(m,m.worldSize,h.toUnwrapped());return o.multiply(new Float32Array(16),m.projMatrix,y)}function bo(m,l,h){if(l.projection.name===h.projection.name)return m.projMatrix;const y=h.clone();return y.setProjection(l.projection),Rs(y,l.getProjection(),m)}function Or(m,l,h){return l.name===h.projection.name?m.projMatrix:Rs(h,l,m)}class py{constructor(l,h,y,_){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?h:-h))):_&&y?1:0,this.placed=y}isHidden(){return this.opacity===0&&!this.placed}}class Ra{constructor(l,h,y,_,w,C=!1){this.text=new py(l?l.text:null,h,y,w),this.icon=new py(l?l.icon:null,h,_,w),this.clipped=C}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Nc{constructor(l,h,y,_=!1){this.text=l,this.icon=h,this.skipFade=y,this.clipped=_}}class $c{constructor(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]}}class Af{constructor(l,h,y,_,w){this.bucketInstanceId=l,this.featureIndex=h,this.sourceLayerIndex=y,this.bucketIndex=_,this.tileID=w}}class my{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const h=++this.maxGroupID;this.collisionGroups[l]={ID:h,predicate:y=>y.collisionGroupID===h}}return this.collisionGroups[l]}}function Uc(m,l,h,y,_){const{horizontalAlign:w,verticalAlign:C}=o.getAnchorAlignment(m),R=-(w-.5)*l,P=-(C-.5)*h,z=o.evaluateVariableOffset(m,y);return new o.Point(R+z[0]*_,P+z[1]*_)}function jc(m,l,h,y,_){const w=new o.Point(m,l);return h&&w._rotate(y?_:-_),w}class ld{constructor(l,h,y,_,w){this.transform=l.clone(),this.projection=l.projection.name,this.collisionIndex=new Bc(this.transform,w),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new my(y),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,h,y,_){const w=y.getBucket(h),C=y.latestFeatureIndex;if(!w||!C||h.id!==w.layerIds[0])return;const R=w.layers[0].layout,P=y.collisionBoxArray,z=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),D=y.tileSize/o.EXTENT,q=y.tileID.toUnwrapped();this.transform.setProjection(w.projection);const te=(ce=y.tileID,fe=w.getProjection(),he=this.transform,fe.name===this.projection?he.calculateProjMatrix(ce.toUnwrapped()):Rs(he,fe,ce));var ce,fe,he;const me=R.get("text-pitch-alignment")==="map",H=R.get("text-rotation-alignment")==="map";h.compileFilter();const le=h.dynamicFilter(),_e=h.dynamicFilterNeedsFeature(),xe=this.transform.calculatePixelsToTileUnitsMatrix(y),Oe=Ca(te,y.tileID.canonical,me,H,this.transform,w.getProjection(),xe);let Fe=null;if(me){const qe=ni(te,y.tileID.canonical,me,H,this.transform,w.getProjection(),xe);Fe=o.multiply([],this.transform.labelPlaneMatrix,qe)}let ze=null;le&&y.latestFeatureIndex&&(ze={unwrappedTileID:q,dynamicFilter:le,dynamicFilterNeedsFeature:_e,featureIndex:y.latestFeatureIndex}),this.retainedQueryData[w.bucketInstanceId]=new Af(w.bucketInstanceId,C,w.sourceLayerIndex,w.index,y.tileID);const He={bucket:w,layout:R,posMatrix:te,textLabelPlaneMatrix:Oe,labelToScreenMatrix:Fe,clippingData:ze,scale:z,textPixelRatio:D,holdingForFade:y.holdingForFade(),collisionBoxArray:P,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(w.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:o.evaluateSizeForZoom(w.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(_)for(const qe of w.sortKeyRanges){const{sortKey:it,symbolInstanceStart:Pt,symbolInstanceEnd:et}=qe;l.push({sortKey:it,symbolInstanceStart:Pt,symbolInstanceEnd:et,parameters:He})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:He})}attemptAnchorPlacement(l,h,y,_,w,C,R,P,z,D,q,te,ce,fe,he,me,H,le){const{textOffset0:_e,textOffset1:xe,crossTileID:Oe}=te,Fe=[_e,xe],ze=Uc(l,y,_,Fe,w),He=this.collisionIndex.placeCollisionBox(fe,w,h,jc(ze.x,ze.y,C,R,this.transform.angle),q,P,z,D.predicate);if(me){const qe=fe.getSymbolInstanceIconSize(le,this.transform.zoom,te.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(fe,qe,me,jc(ze.x,ze.y,C,R,this.transform.angle),q,P,z,D.predicate).box.length===0)return}if(He.box.length>0){let qe;return this.prevPlacement&&this.prevPlacement.variableOffsets[Oe]&&this.prevPlacement.placements[Oe]&&this.prevPlacement.placements[Oe].text&&(qe=this.prevPlacement.variableOffsets[Oe].anchor),this.variableOffsets[Oe]={textOffset:Fe,width:y,height:_,anchor:l,textScale:w,prevAnchor:qe},this.markUsedJustification(fe,l,te,he),fe.allowVerticalPlacement&&(this.markUsedOrientation(fe,he,te),this.placedOrientations[Oe]=he),{shift:ze,placedGlyphBoxes:He}}}placeLayerBucketPart(l,h,y,_){const{bucket:w,layout:C,posMatrix:R,textLabelPlaneMatrix:P,labelToScreenMatrix:z,clippingData:D,textPixelRatio:q,holdingForFade:te,collisionBoxArray:ce,partiallyEvaluatedTextSize:fe,partiallyEvaluatedIconSize:he,collisionGroup:me}=l.parameters,H=C.get("text-optional"),le=C.get("icon-optional"),_e=C.get("text-allow-overlap"),xe=C.get("icon-allow-overlap"),Oe=C.get("text-rotation-alignment")==="map",Fe=C.get("text-pitch-alignment")==="map",ze=C.get("icon-text-fit")!=="none",He=C.get("symbol-z-order")==="viewport-y";this.transform.setProjection(w.projection);let qe=_e&&(xe||!w.hasIconData()||le),it=xe&&(_e||!w.hasTextData()||H);!w.collisionArrays&&ce&&w.deserializeCollisionBoxes(ce),y&&_&&w.updateCollisionDebugBuffers(this.transform.zoom,ce);const Pt=(et,vt,st)=>{const{crossTileID:kt,numVerticalGlyphVertices:rt}=et;if(D){const Dr={zoom:this.transform.zoom,pitch:this.transform.pitch};let pr=null;if(D.dynamicFilterNeedsFeature){const Qn=this.retainedQueryData[w.bucketInstanceId];pr=D.featureIndex.loadFeature({featureIndex:et.featureIndex,bucketIndex:Qn.bucketIndex,sourceLayerIndex:Qn.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,D.dynamicFilter)(Dr,pr,this.retainedQueryData[w.bucketInstanceId].tileID.canonical,new o.Point(et.tileAnchorX,et.tileAnchorY),this.transform.calculateDistanceTileData(D.unwrappedTileID)))return this.placements[kt]=new Nc(!1,!1,!1,!0),void h.add(kt)}if(h.has(kt))return;if(te)return void(this.placements[kt]=new Nc(!1,!1,!1));let yt=!1,Lt=!1,wt=!0,Ot=!1,un=!1,Tn=null,en={box:null,offscreen:null,occluded:null},yn={box:null,offscreen:null,occluded:null},Fn=null,On=null,cn=null,or=0,dr=0,hr=0;st.textFeatureIndex?or=st.textFeatureIndex:et.useRuntimeCollisionCircles&&(or=et.featureIndex),st.verticalTextFeatureIndex&&(dr=st.verticalTextFeatureIndex);const fr=Dr=>{Dr.tileID=this.retainedQueryData[w.bucketInstanceId].tileID;const pr=this.transform.elevation;(pr||Dr.elevation)&&(Dr.elevation=pr?pr.getAtTileOffset(Dr.tileID,Dr.tileAnchorX,Dr.tileAnchorY):0)},Bi=st.textBox;if(Bi){fr(Bi);const Dr=Qn=>{let ri=o.WritingMode.horizontal;if(w.allowVerticalPlacement&&!Qn&&this.prevPlacement){const Wi=this.prevPlacement.placedOrientations[kt];Wi&&(this.placedOrientations[kt]=Wi,ri=Wi,this.markUsedOrientation(w,ri,et))}return ri},pr=(Qn,ri)=>{if(w.allowVerticalPlacement&&rt>0&&st.verticalTextBox){for(const Wi of w.writingModes)if(Wi===o.WritingMode.vertical?(en=ri(),yn=en):en=Qn(),en&&en.box&&en.box.length)break}else en=Qn()};if(C.get("text-variable-anchor")){let Qn=C.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[kt]){const kr=this.prevPlacement.variableOffsets[kt];Qn.indexOf(kr.anchor)>0&&(Qn=Qn.filter(eo=>eo!==kr.anchor),Qn.unshift(kr.anchor))}const ri=(kr,eo,Dd)=>{const Ds=w.getSymbolInstanceTextSize(fe,et,this.transform.zoom,vt),lu=(kr.x2-kr.x1)*Ds+2*kr.padding,Oa=(kr.y2-kr.y1)*Ds+2*kr.padding,rs=ze&&!xe?eo:null;rs&&fr(rs);let zs={box:[],offscreen:!1,occluded:!1};const zd=_e?2*Qn.length:Qn.length;for(let cu=0;cu<zd;++cu){const _p=this.attemptAnchorPlacement(Qn[cu%Qn.length],kr,lu,Oa,Ds,Oe,Fe,q,R,me,cu>=Qn.length,et,vt,w,Dd,rs,fe,he);if(_p&&(zs=_p.placedGlyphBoxes,zs&&zs.box&&zs.box.length)){yt=!0,Tn=_p.shift;break}}return zs};pr(()=>ri(Bi,st.iconBox,o.WritingMode.horizontal),()=>{const kr=st.verticalTextBox;return kr&&fr(kr),w.allowVerticalPlacement&&!(en&&en.box&&en.box.length)&&rt>0&&kr?ri(kr,st.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),en&&(yt=en.box,wt=en.offscreen,Ot=en.occluded);const Wi=Dr(!(!en||!en.box));if(!yt&&this.prevPlacement){const kr=this.prevPlacement.variableOffsets[kt];kr&&(this.variableOffsets[kt]=kr,this.markUsedJustification(w,kr.anchor,et,Wi))}}else{const Qn=(ri,Wi)=>{const kr=w.getSymbolInstanceTextSize(fe,et,this.transform.zoom,vt),eo=this.collisionIndex.placeCollisionBox(w,kr,ri,new o.Point(0,0),_e,q,R,me.predicate);return eo&&eo.box&&eo.box.length&&(this.markUsedOrientation(w,Wi,et),this.placedOrientations[kt]=Wi),eo};pr(()=>Qn(Bi,o.WritingMode.horizontal),()=>{const ri=st.verticalTextBox;return w.allowVerticalPlacement&&rt>0&&ri?(fr(ri),Qn(ri,o.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Dr(!!(en&&en.box&&en.box.length))}}if(Fn=en,yt=Fn&&Fn.box&&Fn.box.length>0,wt=Fn&&Fn.offscreen,Ot=Fn&&Fn.occluded,et.useRuntimeCollisionCircles){const Dr=w.text.placedSymbolArray.get(et.centerJustifiedTextSymbolIndex>=0?et.centerJustifiedTextSymbolIndex:et.verticalPlacedTextSymbolIndex),pr=o.evaluateSizeForFeature(w.textSizeData,fe,Dr),Qn=C.get("text-padding");On=this.collisionIndex.placeCollisionCircles(w,_e,Dr,w.lineVertexArray,w.glyphOffsetArray,pr,R,P,z,y,Fe,me.predicate,et.collisionCircleDiameter*pr/o.ONE_EM,Qn,this.retainedQueryData[w.bucketInstanceId].tileID),yt=_e||On.circles.length>0&&!On.collisionDetected,wt=wt&&On.offscreen,Ot=On.occluded}if(st.iconFeatureIndex&&(hr=st.iconFeatureIndex),st.iconBox){const Dr=pr=>{fr(pr);const Qn=ze&&Tn?jc(Tn.x,Tn.y,Oe,Fe,this.transform.angle):new o.Point(0,0),ri=w.getSymbolInstanceIconSize(he,this.transform.zoom,et.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(w,ri,pr,Qn,xe,q,R,me.predicate)};yn&&yn.box&&yn.box.length&&st.verticalIconBox?(cn=Dr(st.verticalIconBox),Lt=cn.box.length>0):(cn=Dr(st.iconBox),Lt=cn.box.length>0),wt=wt&&cn.offscreen,un=cn.occluded}const Si=H||et.numHorizontalGlyphVertices===0&&rt===0,To=le||et.numIconVertices===0;if(Si||To?To?Si||(Lt=Lt&&yt):yt=Lt&&yt:Lt=yt=Lt&&yt,yt&&Fn&&Fn.box&&this.collisionIndex.insertCollisionBox(Fn.box,C.get("text-ignore-placement"),w.bucketInstanceId,yn&&yn.box&&dr?dr:or,me.ID),Lt&&cn&&this.collisionIndex.insertCollisionBox(cn.box,C.get("icon-ignore-placement"),w.bucketInstanceId,hr,me.ID),On&&(yt&&this.collisionIndex.insertCollisionCircles(On.circles,C.get("text-ignore-placement"),w.bucketInstanceId,or,me.ID),y)){const Dr=w.bucketInstanceId;let pr=this.collisionCircleArrays[Dr];pr===void 0&&(pr=this.collisionCircleArrays[Dr]=new $c);for(let Qn=0;Qn<On.circles.length;Qn+=4)pr.circles.push(On.circles[Qn+0]),pr.circles.push(On.circles[Qn+1]),pr.circles.push(On.circles[Qn+2]),pr.circles.push(On.collisionDetected?1:0)}const la=w.projection.name!=="globe";qe=qe&&(la||!Ot),it=it&&(la||!un),this.placements[kt]=new Nc(yt||qe,Lt||it,wt||w.justReloaded),h.add(kt)};if(He){const et=w.getSortedSymbolIndexes(this.transform.angle);for(let vt=et.length-1;vt>=0;--vt){const st=et[vt];Pt(w.symbolInstances.get(st),st,w.collisionArrays[st])}}else for(let et=l.symbolInstanceStart;et<l.symbolInstanceEnd;et++)Pt(w.symbolInstances.get(et),et,w.collisionArrays[et]);if(y&&w.bucketInstanceId in this.collisionCircleArrays){const et=this.collisionCircleArrays[w.bucketInstanceId];o.invert(et.invProjMatrix,R),et.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1}markUsedJustification(l,h,y,_){const{leftJustifiedTextSymbolIndex:w,centerJustifiedTextSymbolIndex:C,rightJustifiedTextSymbolIndex:R,verticalPlacedTextSymbolIndex:P,crossTileID:z}=y,D=o.getAnchorJustification(h),q=_===o.WritingMode.vertical?P:D==="left"?w:D==="center"?C:D==="right"?R:-1;w>=0&&(l.text.placedSymbolArray.get(w).crossTileID=q>=0&&w!==q?0:z),C>=0&&(l.text.placedSymbolArray.get(C).crossTileID=q>=0&&C!==q?0:z),R>=0&&(l.text.placedSymbolArray.get(R).crossTileID=q>=0&&R!==q?0:z),P>=0&&(l.text.placedSymbolArray.get(P).crossTileID=q>=0&&P!==q?0:z)}markUsedOrientation(l,h,y){const _=h===o.WritingMode.horizontal||h===o.WritingMode.horizontalOnly?h:0,w=h===o.WritingMode.vertical?h:0,{leftJustifiedTextSymbolIndex:C,centerJustifiedTextSymbolIndex:R,rightJustifiedTextSymbolIndex:P,verticalPlacedTextSymbolIndex:z}=y,D=l.text.placedSymbolArray;C>=0&&(D.get(C).placedOrientation=_),R>=0&&(D.get(R).placedOrientation=_),P>=0&&(D.get(P).placedOrientation=_),z>=0&&(D.get(z).placedOrientation=w)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let y=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const _=h?h.symbolFadeChange(l):1,w=h?h.opacities:{},C=h?h.variableOffsets:{},R=h?h.placedOrientations:{};for(const P in this.placements){const z=this.placements[P],D=w[P];D?(this.opacities[P]=new Ra(D,_,z.text,z.icon,null,z.clipped),y=y||z.text!==D.text.placed||z.icon!==D.icon.placed):(this.opacities[P]=new Ra(null,_,z.text,z.icon,z.skipFade,z.clipped),y=y||z.text||z.icon)}for(const P in w){const z=w[P];if(!this.opacities[P]){const D=new Ra(z,_,!1,!1);D.isHidden()||(this.opacities[P]=D,y=y||z.text.placed||z.icon.placed)}}for(const P in C)this.variableOffsets[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.variableOffsets[P]=C[P]);for(const P in R)this.placedOrientations[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.placedOrientations[P]=R[P]);y?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:l)}updateLayerOpacities(l,h){const y=new Set;for(const _ of h){const w=_.getBucket(l);w&&_.latestFeatureIndex&&l.id===w.layerIds[0]&&this.updateBucketOpacities(w,y,_.collisionBoxArray)}}updateBucketOpacities(l,h,y){l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const _=l.layers[0].layout,w=!!l.layers[0].dynamicFilter(),C=new Ra(null,0,!1,!1,!0),R=_.get("text-allow-overlap"),P=_.get("icon-allow-overlap"),z=_.get("text-variable-anchor"),D=_.get("text-rotation-alignment")==="map",q=_.get("text-pitch-alignment")==="map",te=_.get("icon-text-fit")!=="none",ce=new Ra(null,0,R&&(P||!l.hasIconData()||_.get("icon-optional")),P&&(R||!l.hasTextData()||_.get("text-optional")),!0);!l.collisionArrays&&y&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(y);const fe=(me,H,le)=>{for(let _e=0;_e<H/4;_e++)me.opacityVertexArray.emplaceBack(le)};let he=0;for(let me=0;me<l.symbolInstances.length;me++){const H=l.symbolInstances.get(me),{numHorizontalGlyphVertices:le,numVerticalGlyphVertices:_e,crossTileID:xe,numIconVertices:Oe}=H,Fe=h.has(xe);let ze=this.opacities[xe];Fe?ze=C:ze||(ze=ce,this.opacities[xe]=ze),h.add(xe);const He=le>0||_e>0,qe=Oe>0,it=this.placedOrientations[xe],Pt=it===o.WritingMode.vertical,et=it===o.WritingMode.horizontal||it===o.WritingMode.horizontalOnly;if(!He&&!qe||ze.isHidden()||he++,He){const vt=Vc(ze.text);fe(l.text,le,Pt?Ur:vt),fe(l.text,_e,et?Ur:vt);const st=ze.text.isHidden(),{leftJustifiedTextSymbolIndex:kt,centerJustifiedTextSymbolIndex:rt,rightJustifiedTextSymbolIndex:yt,verticalPlacedTextSymbolIndex:Lt}=H,wt=l.text.placedSymbolArray,Ot=st||Pt?1:0;kt>=0&&(wt.get(kt).hidden=Ot),rt>=0&&(wt.get(rt).hidden=Ot),yt>=0&&(wt.get(yt).hidden=Ot),Lt>=0&&(wt.get(Lt).hidden=st||et?1:0);const un=this.variableOffsets[xe];un&&this.markUsedJustification(l,un.anchor,H,it);const Tn=this.placedOrientations[xe];Tn&&(this.markUsedJustification(l,"left",H,Tn),this.markUsedOrientation(l,Tn,H))}if(qe){const vt=Vc(ze.icon),{placedIconSymbolIndex:st,verticalPlacedIconSymbolIndex:kt}=H,rt=l.icon.placedSymbolArray,yt=ze.icon.isHidden()?1:0;st>=0&&(fe(l.icon,Oe,Pt?Ur:vt),rt.get(st).hidden=yt),kt>=0&&(fe(l.icon,H.numVerticalIconVertices,et?Ur:vt),rt.get(kt).hidden=yt)}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const vt=l.collisionArrays[me];if(vt){let st=new o.Point(0,0),kt=!0;if(vt.textBox||vt.verticalTextBox){if(z){const yt=this.variableOffsets[xe];yt?(st=Uc(yt.anchor,yt.width,yt.height,yt.textOffset,yt.textScale),D&&st._rotate(q?this.transform.angle:-this.transform.angle)):kt=!1}w&&(kt=!ze.clipped),vt.textBox&&yl(l.textCollisionBox.collisionVertexArray,ze.text.placed,!kt||Pt,st.x,st.y),vt.verticalTextBox&&yl(l.textCollisionBox.collisionVertexArray,ze.text.placed,!kt||et,st.x,st.y)}const rt=kt&&!!(!et&&vt.verticalIconBox);vt.iconBox&&yl(l.iconCollisionBox.collisionVertexArray,ze.icon.placed,rt,te?st.x:0,te?st.y:0),vt.verticalIconBox&&yl(l.iconCollisionBox.collisionVertexArray,ze.icon.placed,!rt,te?st.x:0,te?st.y:0)}}}if(l.fullyClipped=he===0,l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){const me=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=me.invProjMatrix,l.placementViewportMatrix=me.viewportMatrix,l.collisionCircleArray=me.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,h){const y=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*y>l}setStale(){this.stale=!0}}function yl(m,l,h,y,_){m.emplaceBack(l?1:0,h?1:0,y||0,_||0),m.emplaceBack(l?1:0,h?1:0,y||0,_||0),m.emplaceBack(l?1:0,h?1:0,y||0,_||0),m.emplaceBack(l?1:0,h?1:0,y||0,_||0)}const Qi=Math.pow(2,25),Xr=Math.pow(2,24),kf=Math.pow(2,17),Pf=Math.pow(2,16),Ji=Math.pow(2,9),wo=Math.pow(2,8),gy=Math.pow(2,1);function Vc(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;const l=m.placed?1:0,h=Math.floor(127*m.opacity);return h*Qi+l*Xr+h*kf+l*Pf+h*Ji+l*wo+h*gy+l}const Ur=0;class Gc{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&l.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(l,h,y,_,w){const C=this._bucketParts;for(;this._currentTileIndex<l.length;)if(h.getBucketParts(C,_,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((R,P)=>R.sortKey-P.sortKey));this._currentPartIndex<C.length;){const R=C[this._currentPartIndex];if(h.placeLayerBucketPart(R,this._seenCrossTileIDs,y,R.symbolInstanceStart===0),this._currentPartIndex++,w())return!0}return!1}}class If{constructor(l,h,y,_,w,C,R,P){this.placement=new ld(l,w,C,R,P),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(l,h,y){const _=o.exported.now(),w=()=>{const C=o.exported.now()-_;return!this._forceFullPlacement&&C>2};for(;this._currentPlacementIndex>=0;){const C=h[l[this._currentPlacementIndex]],R=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=R)&&(!C.maxzoom||C.maxzoom>R)){if(this._inProgressLayer||(this._inProgressLayer=new Gc(C)),this._inProgressLayer.continuePlacement(y[C.source],this.placement,this._showCollisionBoxes,C,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const Ms=512/o.EXTENT/2;class ki{constructor(l,h,y){this.tileID=l,this.bucketInstanceId=y,this.index=new o.KDBush(h.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const _=l.canonical.x*o.EXTENT,w=l.canonical.y*o.EXTENT;for(let C=0;C<h.length;C++){const{key:R,crossTileID:P,tileAnchorX:z,tileAnchorY:D}=h.get(C),q=Math.floor((_+z)*Ms),te=Math.floor((w+D)*Ms);this.index.add(q,te),this.keys.push(R),this.crossTileIDs.push(P)}this.index.finish()}findMatches(l,h,y){const _=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z),w=Ms/Math.pow(2,h.canonical.z-this.tileID.canonical.z),C=h.canonical.x*o.EXTENT,R=h.canonical.y*o.EXTENT;for(let P=0;P<l.length;P++){const z=l.get(P);if(z.crossTileID)continue;const{key:D,tileAnchorX:q,tileAnchorY:te}=z,ce=Math.floor((C+q)*w),fe=Math.floor((R+te)*w),he=this.index.range(ce-_,fe-_,ce+_,fe+_);for(const me of he){const H=this.crossTileIDs[me];if(this.keys[me]===D&&!y.has(H)){y.add(H),z.crossTileID=H;break}}}}}class Lf{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Of{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const h=Math.round((l-this.lng)/360);if(h!==0)for(const y in this.indexes){const _=this.indexes[y],w={};for(const C in _){const R=_[C];R.tileID=R.tileID.unwrapTo(R.tileID.wrap+h),w[R.tileID.key]=R}this.indexes[y]=w}this.lng=l}addBucket(l,h,y){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let w=0;w<h.symbolInstances.length;w++)h.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]=new Set);const _=this.usedCrossTileIDs[l.overscaledZ];for(const w in this.indexes){const C=this.indexes[w];if(Number(w)>l.overscaledZ)for(const R in C){const P=C[R];P.tileID.isChildOf(l)&&P.findMatches(h.symbolInstances,l,_)}else{const R=C[l.scaledTo(Number(w)).key];R&&R.findMatches(h.symbolInstances,l,_)}}for(let w=0;w<h.symbolInstances.length;w++){const C=h.symbolInstances.get(w);C.crossTileID||(C.crossTileID=y.generate(),_.add(C.crossTileID))}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new ki(l,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(l,h){for(const y of h.crossTileIDs)this.usedCrossTileIDs[l].delete(y)}removeStaleBuckets(l){let h=!1;for(const y in this.indexes){const _=this.indexes[y];for(const w in _)l[_[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(y,_[w]),delete _[w],h=!0)}return h}}class Ma{constructor(){this.layerIndexes={},this.crossTileIDs=new Lf,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,h,y,_){let w=this.layerIndexes[l.id];w===void 0&&(w=this.layerIndexes[l.id]=new Of);let C=!1;const R={};_.name!=="globe"&&w.handleWrapJump(y);for(const P of h){const z=P.getBucket(l);z&&l.id===z.layerIds[0]&&(z.bucketInstanceId||(z.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(P.tileID,z,this.crossTileIDs)&&(C=!0),R[z.bucketInstanceId]=!0)}return w.removeStaleBuckets(R)&&(C=!0),C}pruneUnusedLayers(l){const h={};l.forEach(y=>{h[y]=!0});for(const y in this.layerIndexes)h[y]||delete this.layerIndexes[y]}}const ts=(m,l)=>o.emitValidationErrors(m,l&&l.filter(h=>h.identifier!=="source.canvas")),cd=o.pick(tr,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),bx=o.pick(tr,["setCenter","setZoom","setBearing","setPitch"]),Df={version:8,layers:[],sources:{}},vl={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class oa extends o.Evented{constructor(l,h={}){super(),this.map=l,this.dispatcher=new Te(zi(),this),this.imageManager=new pe,this.imageManager.setEventedParent(this),this.glyphManager=new o.GlyphManager(l._requestManager,h.localFontFamily?o.LocalGlyphMode.all:h.localIdeographFontFamily?o.LocalGlyphMode.ideographs:o.LocalGlyphMode.none,h.localFontFamily||h.localIdeographFontFamily),this.crossTileSymbolIndex=new Ma,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());const y=this;this._rtlTextPluginCallback=oa.registerForPluginStateChange(_=>{y.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:_.pluginStatus,pluginURL:_.pluginURL},(w,C)=>{if(o.triggerPluginCompletionEvent(w),C&&C.every(R=>R))for(const R in y._sourceCaches){const P=y._sourceCaches[R],z=P.getSource().type;z!=="vector"&&z!=="geojson"||P.reload()}})}),this.on("data",_=>{if(_.dataType!=="source"||_.sourceDataType!=="metadata")return;const w=this.getSource(_.sourceId);if(w&&w.vectorLayerIds)for(const C in this._layers){const R=this._layers[C];R.source===w.id&&this._validateLayer(R)}})}loadURL(l,h={}){this.fire(new o.Event("dataloading",{dataType:"style"}));const y=typeof h.validate=="boolean"?h.validate:!o.isMapboxURL(l);l=this.map._requestManager.normalizeStyleURL(l,h.accessToken);const _=this.map._requestManager.transformRequest(l,o.ResourceType.Style);this._request=o.getJSON(_,(w,C)=>{this._request=null,w?this.fire(new o.ErrorEvent(w)):C&&this._load(C,y)})}loadJSON(l,h={}){this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.exported.frame(()=>{this._request=null,this._load(l,h.validate!==!1)})}loadEmpty(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(Df,!1)}_updateLayerCount(l,h){const y=h?1:-1;l.is3D()&&(this._num3DLayers+=y),l.type==="circle"&&(this._numCircleLayers+=y),l.type==="symbol"&&(this._numSymbolLayers+=y)}_load(l,h){if(h&&ts(this,o.validateStyle(l)))return;this._loaded=!0,this.stylesheet=o.clone$1(l),this._updateMapProjection();for(const _ in l.sources)this.addSource(_,l.sources[_],{validate:!1});this._changed=!1,l.sprite?this._loadSprite(l.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(l.glyphs);const y=dy(this.stylesheet.layers);this._order=y.map(_=>_.id),this._layers={},this._serializedLayers={};for(const _ of y){const w=o.createStyleLayer(_);w.setEventedParent(this,{layer:{id:w.id}}),this._layers[w.id]=w,this._serializedLayers[w.id]=w.serialize(),this._updateLayerCount(w,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Ge(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(l){l?this.stylesheet.projection=l:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(l){this._spriteRequest=function(h,y,_){let w,C,R;const P=o.exported.devicePixelRatio>1?"@2x":"";let z=o.getJSON(y.transformRequest(y.normalizeSpriteURL(h,P,".json"),o.ResourceType.SpriteJSON),(te,ce)=>{z=null,R||(R=te,w=ce,q())}),D=o.getImage(y.transformRequest(y.normalizeSpriteURL(h,P,".png"),o.ResourceType.SpriteImage),(te,ce)=>{D=null,R||(R=te,C=ce,q())});function q(){if(R)_(R);else if(w&&C){const te=o.exported.getImageData(C),ce={};for(const fe in w){const{width:he,height:me,x:H,y:le,sdf:_e,pixelRatio:xe,stretchX:Oe,stretchY:Fe,content:ze}=w[fe],He=new o.RGBAImage({width:he,height:me});o.RGBAImage.copy(te,He,{x:H,y:le},{x:0,y:0},{width:he,height:me}),ce[fe]={data:He,pixelRatio:xe,sdf:_e,stretchX:Oe,stretchY:Fe,content:ze}}_(null,ce)}}return{cancel(){z&&(z.cancel(),z=null),D&&(D.cancel(),D=null)}}}(l,this.map._requestManager,(h,y)=>{if(this._spriteRequest=null,h)this.fire(new o.ErrorEvent(h));else if(y)for(const _ in y)this.imageManager.addImage(_,y[_]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new o.Event("data",{dataType:"style"}))})}_validateLayer(l){const h=this.getSource(l.source);if(!h)return;const y=l.sourceLayer;y&&(h.type==="geojson"||h.vectorLayerIds&&h.vectorLayerIds.indexOf(y)===-1)&&this.fire(new o.ErrorEvent(new Error(`Source layer "${y}" does not exist on source "${h.id}" as specified by style layer "${l.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this._sourceCaches)if(!this._sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(l){const h=[];for(const y of l){const _=this._layers[y];_.type!=="custom"&&h.push(_.serialize())}return h}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const l in this._sourceCaches)if(this._sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(l){return!!this.terrain&&(typeof l.isLayerDraped=="function"?l.isLayerDraped():vl[l.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(l){if(!this._loaded)return;const h=this._changed;if(this._changed){const _=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(_.length||w.length)&&this._updateWorkerLayers(_,w);for(const C in this._updatedSources){const R=this._updatedSources[C];R==="reload"?this._reloadSource(C):R==="clear"&&this._clearSource(C)}this._updateTilesForChangedImages();for(const C in this._updatedPaintProps)this._layers[C].updateTransitions(l);this.light.updateTransitions(l),this.fog&&this.fog.updateTransitions(l),this._resetUpdates()}const y={};for(const _ in this._sourceCaches){const w=this._sourceCaches[_];y[_]=w.used,w.used=!1}for(const _ of this._order){const w=this._layers[_];if(w.recalculate(l,this._availableImages),!w.isHidden(l.zoom)){const R=this._getLayerSourceCache(w);R&&(R.used=!0)}const C=this.map.painter;if(C){const R=w.getProgramIds();if(!R)continue;const P=w.getProgramConfiguration(l.zoom);for(const z of R)C.useProgram(z,P)}}for(const _ in y){const w=this._sourceCaches[_];y[_]!==w.used&&w.getSource().fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:w.getSource().id}))}this.light.recalculate(l),this.terrain&&this.terrain.recalculate(l),this.fog&&this.fog.recalculate(l),this.z=l.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),h&&this.fire(new o.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const h in this._sourceCaches)this._sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateWorkerLayers(l,h){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(l),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(l){if(this._checkLoaded(),ts(this,o.validateStyle(l)))return!1;(l=o.clone$1(l)).layers=dy(l.layers);const h=function(_,w){if(!_)return[{command:tr.setStyle,args:[w]}];let C=[];try{if(!x(_.version,w.version))return[{command:tr.setStyle,args:[w]}];x(_.center,w.center)||C.push({command:tr.setCenter,args:[w.center]}),x(_.zoom,w.zoom)||C.push({command:tr.setZoom,args:[w.zoom]}),x(_.bearing,w.bearing)||C.push({command:tr.setBearing,args:[w.bearing]}),x(_.pitch,w.pitch)||C.push({command:tr.setPitch,args:[w.pitch]}),x(_.sprite,w.sprite)||C.push({command:tr.setSprite,args:[w.sprite]}),x(_.glyphs,w.glyphs)||C.push({command:tr.setGlyphs,args:[w.glyphs]}),x(_.transition,w.transition)||C.push({command:tr.setTransition,args:[w.transition]}),x(_.light,w.light)||C.push({command:tr.setLight,args:[w.light]}),x(_.fog,w.fog)||C.push({command:tr.setFog,args:[w.fog]}),x(_.projection,w.projection)||C.push({command:tr.setProjection,args:[w.projection]});const R={},P=[];(function(q,te,ce,fe){let he;for(he in te=te||{},q=q||{})q.hasOwnProperty(he)&&(te.hasOwnProperty(he)||zc(he,ce,fe));for(he in te){if(!te.hasOwnProperty(he))continue;const me=te[he];q.hasOwnProperty(he)?x(q[he],me)||(q[he].type==="geojson"&&me.type==="geojson"&&sd(q,te,he)?ce.push({command:tr.setGeoJSONSourceData,args:[he,me.data]}):Tf(he,te,ce,fe)):Ef(he,te,ce)}})(_.sources,w.sources,P,R);const z=[];_.layers&&_.layers.forEach(q=>{q.source&&R[q.source]?C.push({command:tr.removeLayer,args:[q.id]}):z.push(q)});let D=_.terrain;D&&R[D.source]&&(C.push({command:tr.setTerrain,args:[void 0]}),D=void 0),C=C.concat(P),x(D,w.terrain)||C.push({command:tr.setTerrain,args:[w.terrain]}),function(q,te,ce){te=te||[];const fe=(q=q||[]).map(Ea),he=te.map(Ea),me=q.reduce(Cf,{}),H=te.reduce(Cf,{}),le=fe.slice(),_e=Object.create(null);let xe,Oe,Fe,ze,He,qe,it;for(xe=0,Oe=0;xe<fe.length;xe++)Fe=fe[xe],H.hasOwnProperty(Fe)?Oe++:(ce.push({command:tr.removeLayer,args:[Fe]}),le.splice(le.indexOf(Fe,Oe),1));for(xe=0,Oe=0;xe<he.length;xe++)Fe=he[he.length-1-xe],le[le.length-1-xe]!==Fe&&(me.hasOwnProperty(Fe)?(ce.push({command:tr.removeLayer,args:[Fe]}),le.splice(le.lastIndexOf(Fe,le.length-Oe),1)):Oe++,qe=le[le.length-xe],ce.push({command:tr.addLayer,args:[H[Fe],qe]}),le.splice(le.length-xe,0,Fe),_e[Fe]=!0);for(xe=0;xe<he.length;xe++)if(Fe=he[xe],ze=me[Fe],He=H[Fe],!_e[Fe]&&!x(ze,He))if(x(ze.source,He.source)&&x(ze["source-layer"],He["source-layer"])&&x(ze.type,He.type)){for(it in ra(ze.layout,He.layout,ce,Fe,null,tr.setLayoutProperty),ra(ze.paint,He.paint,ce,Fe,null,tr.setPaintProperty),x(ze.filter,He.filter)||ce.push({command:tr.setFilter,args:[Fe,He.filter]}),x(ze.minzoom,He.minzoom)&&x(ze.maxzoom,He.maxzoom)||ce.push({command:tr.setLayerZoomRange,args:[Fe,He.minzoom,He.maxzoom]}),ze)ze.hasOwnProperty(it)&&it!=="layout"&&it!=="paint"&&it!=="filter"&&it!=="metadata"&&it!=="minzoom"&&it!=="maxzoom"&&(it.indexOf("paint.")===0?ra(ze[it],He[it],ce,Fe,it.slice(6),tr.setPaintProperty):x(ze[it],He[it])||ce.push({command:tr.setLayerProperty,args:[Fe,it,He[it]]}));for(it in He)He.hasOwnProperty(it)&&!ze.hasOwnProperty(it)&&it!=="layout"&&it!=="paint"&&it!=="filter"&&it!=="metadata"&&it!=="minzoom"&&it!=="maxzoom"&&(it.indexOf("paint.")===0?ra(ze[it],He[it],ce,Fe,it.slice(6),tr.setPaintProperty):x(ze[it],He[it])||ce.push({command:tr.setLayerProperty,args:[Fe,it,He[it]]}))}else ce.push({command:tr.removeLayer,args:[Fe]}),qe=le[le.lastIndexOf(Fe)+1],ce.push({command:tr.addLayer,args:[He,qe]})}(z,w.layers,C)}catch(R){console.warn("Unable to compute style diff:",R),C=[{command:tr.setStyle,args:[w]}]}return C}(this.serialize(),l).filter(_=>!(_.command in bx));if(h.length===0)return!1;const y=h.filter(_=>!(_.command in cd));if(y.length>0)throw new Error(`Unimplemented: ${y.map(_=>_.command).join(", ")}.`);return h.forEach(_=>{_.command!=="setTransition"&&_.command!=="setProjection"&&this[_.command].apply(this,_.args)}),this.stylesheet=l,this._updateMapProjection(),!0}addImage(l,h){return this.getImage(l)?this.fire(new o.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(l,h),this._afterImageUpdated(l),this)}updateImage(l,h){this.imageManager.updateImage(l,h)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){return this.getImage(l)?(this.imageManager.removeImage(l),this._afterImageUpdated(l),this):this.fire(new o.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(l,h,y={}){if(this._checkLoaded(),this.getSource(l)!==void 0)throw new Error("There is already a source with this ID");if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(o.validateSource,`sources.${l}`,h,null,y))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const _=gn(l,h,this.dispatcher,this);_.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(l),source:_.serialize(),sourceId:l}));const w=C=>{const R=(C?"symbol:":"other:")+l,P=this._sourceCaches[R]=new o.SourceCache(R,_,C);(C?this._symbolSourceCaches:this._otherSourceCaches)[l]=P,P.style=this,P.onAdd(this.map)};w(!1),h.type!=="vector"&&h.type!=="geojson"||w(!0),_.onAdd&&_.onAdd(this.map),this._changed=!0}removeSource(l){this._checkLoaded();const h=this.getSource(l);if(!h)throw new Error("There is no source with this ID");for(const _ in this._layers)if(this._layers[_].source===l)return this.fire(new o.ErrorEvent(new Error(`Source "${l}" cannot be removed while layer "${_}" is using it.`)));if(this.terrain&&this.terrain.get().source===l)return this.fire(new o.ErrorEvent(new Error(`Source "${l}" cannot be removed while terrain is using it.`)));const y=this._getSourceCaches(l);for(const _ of y)delete this._sourceCaches[_.id],delete this._updatedSources[_.id],_.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:_.getSource().id})),_.setEventedParent(null),_.clearTiles();return delete this._otherSourceCaches[l],delete this._symbolSourceCaches[l],h.setEventedParent(null),h.onRemove&&h.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(l,h){this._checkLoaded(),this.getSource(l).setData(h),this._changed=!0}getSource(l){const h=this._getSourceCache(l);return h&&h.getSource()}_getSources(){const l=[];for(const h in this._otherSourceCaches){const y=this._getSourceCache(h);y&&l.push(y.getSource())}return l}addLayer(l,h,y={}){this._checkLoaded();const _=l.id;if(this.getLayer(_))return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${_}" already exists on this map`)));let w;if(l.type==="custom"){if(ts(this,o.validateCustomStyleLayer(l)))return;w=o.createStyleLayer(l)}else{if(typeof l.source=="object"&&(this.addSource(_,l.source),l=o.clone$1(l),l=o.extend(l,{source:_})),this._validate(o.validateLayer,`layers.${_}`,l,{arrayIndex:-1},y))return;w=o.createStyleLayer(l),this._validateLayer(w),w.setEventedParent(this,{layer:{id:_}}),this._serializedLayers[w.id]=w.serialize(),this._updateLayerCount(w,!0)}const C=h?this._order.indexOf(h):this._order.length;if(h&&C===-1)return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${h}" does not exist on this map.`)));this._order.splice(C,0,_),this._layerOrderChanged=!0,this._layers[_]=w;const R=this._getLayerSourceCache(w);if(this._removedLayers[_]&&w.source&&R&&w.type!=="custom"){const P=this._removedLayers[_];delete this._removedLayers[_],P.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",R.pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(l,h){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===h)return;const y=this._order.indexOf(l);this._order.splice(y,1);const _=h?this._order.indexOf(h):this._order.length;h&&_===-1?this.fire(new o.ErrorEvent(new Error(`Layer with id "${h}" does not exist on this map.`))):(this._order.splice(_,0,l),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(l){this._checkLoaded();const h=this._layers[l];if(!h)return void this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be removed.`)));h.setEventedParent(null),this._updateLayerCount(h,!1);const y=this._order.indexOf(l);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=h,delete this._layers[l],delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],h.onRemove&&h.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(l){return this._layers[l]}hasLayer(l){return l in this._layers}hasLayerType(l){for(const h in this._layers)if(this._layers[h].type===l)return!0;return!1}setLayerZoomRange(l,h,y){this._checkLoaded();const _=this.getLayer(l);_?_.minzoom===h&&_.maxzoom===y||(h!=null&&(_.minzoom=h),y!=null&&(_.maxzoom=y),this._updateLayer(_)):this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(l,h,y={}){this._checkLoaded();const _=this.getLayer(l);if(_){if(!x(_.filter,h))return h==null?(_.filter=void 0,void this._updateLayer(_)):void(this._validate(o.validateFilter,`layers.${_.id}.filter`,h,{layerType:_.type},y)||(_.filter=o.clone$1(h),this._updateLayer(_)))}else this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be filtered.`)))}getFilter(l){const h=this.getLayer(l);return h&&o.clone$1(h.filter)}setLayoutProperty(l,h,y,_={}){this._checkLoaded();const w=this.getLayer(l);w?x(w.getLayoutProperty(h),y)||(w.setLayoutProperty(h,y,_),this._updateLayer(w)):this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(l,h){const y=this.getLayer(l);if(y)return y.getLayoutProperty(h);this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style.`)))}setPaintProperty(l,h,y,_={}){this._checkLoaded();const w=this.getLayer(l);w?x(w.getPaintProperty(h),y)||(w.setPaintProperty(h,y,_)&&this._updateLayer(w),this._changed=!0,this._updatedPaintProps[l]=!0):this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(l,h){const y=this.getLayer(l);return y&&y.getPaintProperty(h)}setFeatureState(l,h){this._checkLoaded();const y=l.source,_=l.sourceLayer,w=this.getSource(y);if(!w)return void this.fire(new o.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)));const C=w.type;if(C==="geojson"&&_)return void this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(C==="vector"&&!_)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));l.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided.")));const R=this._getSourceCaches(y);for(const P of R)P.setFeatureState(_,l.id,h)}removeFeatureState(l,h){this._checkLoaded();const y=l.source,_=this.getSource(y);if(!_)return void this.fire(new o.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)));const w=_.type,C=w==="vector"?l.sourceLayer:void 0;if(w==="vector"&&!C)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(h&&typeof l.id!="string"&&typeof l.id!="number")return void this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const R=this._getSourceCaches(y);for(const P of R)P.removeFeatureState(C,l.id,h)}getFeatureState(l){this._checkLoaded();const h=l.source,y=l.sourceLayer,_=this.getSource(h);if(_){if(_.type!=="vector"||y)return l.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(h)[0].getFeatureState(y,l.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const l={};for(const h in this._sourceCaches){const y=this._sourceCaches[h].getSource();l[y.id]||(l[y.id]=y.serialize())}return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:l,layers:this._serializeLayers(this._order)},h=>h!==void 0)}_updateLayer(l){this._updatedLayers[l.id]=!0;const h=this._getLayerSourceCache(l);l.source&&!this._updatedSources[l.source]&&h&&h.getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",h.pause()),this._changed=!0,l.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(l){const h=C=>this._layers[C].type==="fill-extrusion",y={},_=[];for(let C=this._order.length-1;C>=0;C--){const R=this._order[C];if(h(R)){y[R]=C;for(const P of l){const z=P[R];if(z)for(const D of z)_.push(D)}}}_.sort((C,R)=>R.intersectionZ-C.intersectionZ);const w=[];for(let C=this._order.length-1;C>=0;C--){const R=this._order[C];if(h(R))for(let P=_.length-1;P>=0;P--){const z=_[P].feature;if(y[z.layer.id]<C)break;w.push(z),_.pop()}else for(const P of l){const z=P[R];if(z)for(const D of z)w.push(D.feature)}}return w}queryRenderedFeatures(l,h,y){h&&h.filter&&this._validate(o.validateFilter,"queryRenderedFeatures.filter",h.filter,null,h);const _={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const P of h.layers){const z=this._layers[P];if(!z)return this.fire(new o.ErrorEvent(new Error(`The layer '${P}' does not exist in the map's style and cannot be queried for features.`))),[];_[z.source]=!0}}const w=[];h.availableImages=this._availableImages;const C=h&&h.layers?h.layers.some(P=>{const z=this.getLayer(P);return z&&z.is3D()}):this.has3DLayers(),R=we.createFromScreenPoints(l,y);for(const P in this._sourceCaches){const z=this._sourceCaches[P].getSource().id;h.layers&&!_[z]||w.push(ir(this._sourceCaches[P],this._layers,this._serializedLayers,R,h,y,C,!!this.map._showQueryGeometry))}return this.placement&&w.push(function(P,z,D,q,te,ce,fe){const he={},me=ce.queryRenderedSymbols(q),H=[];for(const le of Object.keys(me).map(Number))H.push(fe[le]);H.sort(Hr);for(const le of H){const _e=le.featureIndex.lookupSymbolFeatures(me[le.bucketInstanceId],z,le.bucketIndex,le.sourceLayerIndex,te.filter,te.layers,te.availableImages,P);for(const xe in _e){const Oe=he[xe]=he[xe]||[],Fe=_e[xe];Fe.sort((ze,He)=>{const qe=le.featureSortOrder;if(qe){const it=qe.indexOf(ze.featureIndex);return qe.indexOf(He.featureIndex)-it}return He.featureIndex-ze.featureIndex});for(const ze of Fe)Oe.push(ze)}}for(const le in he)he[le].forEach(_e=>{const xe=_e.feature,Oe=D(P[le]);if(!Oe)return;const Fe=Oe.getFeatureState(xe.layer["source-layer"],xe.id);xe.source=xe.layer.source,xe.layer["source-layer"]&&(xe.sourceLayer=xe.layer["source-layer"]),xe.state=Fe});return he}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),R.screenGeometry,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(l,h){h&&h.filter&&this._validate(o.validateFilter,"querySourceFeatures.filter",h.filter,null,h);const y=this._getSourceCaches(l);let _=[];for(const w of y)_=_.concat(Gn(w,h));return _}addSourceType(l,h,y){return oa.getSourceType(l)?y(new Error(`A source type called "${l}" already exists.`)):(oa.setSourceType(l,h),h.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:h.workerSourceURL},y):y(null,null))}getLight(){return this.light.getLight()}setLight(l,h={}){this._checkLoaded();const y=this.light.getLight();let _=!1;for(const C in l)if(!x(l[C],y[C])){_=!0;break}if(!_)return;const w=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(l,h),this.light.updateTransitions(w)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(l,h=1){if(this._checkLoaded(),!l)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let y=l;if(h===1){if(typeof y.source=="object"){const _="terrain-dem-src";this.addSource(_,y.source),y=o.clone$1(y),y=o.extend(y,{source:_})}if(this._validate(o.validateTerrain,"terrain",y))return}if(!this.terrain||this.terrain&&h!==this.terrain.drapeRenderMode){if(!y)return;this._createTerrain(y,h)}else{const _=this.terrain,w=_.get();for(const C of Object.keys(o.spec.terrain))!y.hasOwnProperty(C)&&o.spec.terrain[C].default&&(y[C]=o.spec.terrain[C].default);for(const C in y)if(!x(y[C],w[C])){_.set(y),this.stylesheet.terrain=y;const R=this._setTransitionParameters({duration:0});_.updateTransitions(R);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(l){const h=this.fog=new Ce(l,this.map.transform);this.stylesheet.fog=l;const y=this._setTransitionParameters({duration:0});h.updateTransitions(y)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const l of this.map._markers)l._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(l){if(this._checkLoaded(),!l)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const h=this.fog,y=h.get();Object.keys(l).length===0&&h.set(l);for(const _ in l)if(!x(l[_],y[_])){h.set(l),this.stylesheet.fog=l;const w=this._setTransitionParameters({duration:0});h.updateTransitions(w);break}}else this._createFog(l);this._markersNeedUpdate=!0}_setTransitionParameters(l){return{now:o.exported.now(),transition:o.extend(l,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const l=this._order.filter(y=>this.isLayerDraped(this._layers[y])),h=this._order.filter(y=>!this.isLayerDraped(this._layers[y]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...l),this._drapedFirstOrder.push(...h)}_createTerrain(l,h){const y=this.terrain=new Ze(l,h);this.stylesheet.terrain=l,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const _=this._setTransitionParameters({duration:0});y.updateTransitions(_)}_force3DLayerUpdate(){for(const l in this._layers){const h=this._layers[l];h.type==="fill-extrusion"&&this._updateLayer(h)}}_forceSymbolLayerUpdate(){for(const l in this._layers){const h=this._layers[l];h.type==="symbol"&&this._updateLayer(h)}}_validate(l,h,y,_,w={}){return(!w||w.validate!==!1)&&ts(this,l.call(o.validateStyle,o.extend({key:h,style:this.serialize(),value:y,styleSpec:o.spec},_)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this._sourceCaches)this._sourceCaches[l].clearTiles(),this._sourceCaches[l].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(l){const h=this._getSourceCaches(l);for(const y of h)y.clearTiles()}_reloadSource(l){const h=this._getSourceCaches(l);for(const y of h)y.resume(),y.reload()}_reloadSources(){for(const l of this._getSources())l.reload&&l.reload()}_updateSources(l){for(const h in this._sourceCaches)this._sourceCaches[h].update(l)}_generateCollisionBoxes(){for(const l in this._sourceCaches){const h=this._sourceCaches[l];h.resume(),h.reload()}}_updatePlacement(l,h,y,_,w=!1){let C=!1,R=!1;const P={};for(const z of this._order){const D=this._layers[z];if(D.type!=="symbol")continue;if(!P[D.source]){const te=this._getLayerSourceCache(D);if(!te)continue;P[D.source]=te.getRenderableIds(!0).map(ce=>te.getTileByID(ce)).sort((ce,fe)=>fe.tileID.overscaledZ-ce.tileID.overscaledZ||(ce.tileID.isLessThan(fe.tileID)?-1:1))}const q=this.crossTileSymbolIndex.addLayer(D,P[D.source],l.center.lng,l.projection);C=C||q}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),w=w||this._layerOrderChanged||y===0,this._layerOrderChanged&&this.fire(new o.Event("neworder")),(w||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.exported.now(),l.zoom))&&(this.pauseablePlacement=new If(l,this._order,w,h,y,_,this.placement,this.fog&&l.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,P),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.exported.now()),R=!0),C&&this.pauseablePlacement.placement.setStale()),R||C)for(const z of this._order){const D=this._layers[z];D.type==="symbol"&&this.placement.updateLayerOpacities(D,P[D.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.exported.now())}_releaseSymbolFadeTiles(){for(const l in this._sourceCaches)this._sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,h,y){this.imageManager.getImages(h.icons,y),this._updateTilesForChangedImages();const _=w=>{w&&w.setDependencies(h.tileID.key,h.type,h.icons)};_(this._otherSourceCaches[h.source]),_(this._symbolSourceCaches[h.source])}getGlyphs(l,h,y){this.glyphManager.getGlyphs(h.stacks,y)}getResource(l,h,y){return o.makeRequest(h,y)}_getSourceCache(l){return this._otherSourceCaches[l]}_getLayerSourceCache(l){return l.type==="symbol"?this._symbolSourceCaches[l.source]:this._otherSourceCaches[l.source]}_getSourceCaches(l){const h=[];return this._otherSourceCaches[l]&&h.push(this._otherSourceCaches[l]),this._symbolSourceCaches[l]&&h.push(this._symbolSourceCaches[l]),h}_isSourceCacheLoaded(l){const h=this._getSourceCaches(l);return h.length===0?(this.fire(new o.ErrorEvent(new Error(`There is no source with ID '${l}'`))),!1):h.every(y=>y.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}oa.getSourceType=function(m){return rn[m]},oa.setSourceType=function(m,l){rn[m]=l},oa.registerForPluginStateChange=o.registerForPluginStateChange;var zf=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,As="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Aa=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,Wc=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,ka=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let ud={},_l={};const qc=[];xl(zf,qc),xl(Aa,qc),xl(Wc,qc),xl(ka,qc),ud=nr("",Aa),_l=nr(ka,Wc);const yy=nr(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),dd=zf,Ff=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var Bf={background:nr(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:nr(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:nr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:nr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:nr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:nr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:nr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:nr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:nr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:nr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:nr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:nr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:nr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:nr(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:nr(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:nr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:nr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:nr(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:nr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:nr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:nr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:nr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:nr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:nr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:nr(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:nr(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,As),skyboxGradient:nr(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,As),skyboxCapture:nr(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:nr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:nr(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function xl(m,l){const h=m.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let y of h)if(y=y.trim(),y[0]==="#"&&y.includes("if")&&!y.includes("endif")){y=y.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const _=y.split(" ");for(const w of _)l.includes(w)||l.push(w)}}function nr(m,l){const h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,y=l.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),_={},w=[...qc];return xl(m,w),xl(l,w),{fragmentSource:m=m.replace(h,(C,R,P,z,D)=>(_[D]=!0,R==="define"?`
#ifndef HAS_UNIFORM_u_${D}
varying ${P} ${z} ${D};
#else
uniform ${P} ${z} u_${D};
#endif
`:`
#ifdef HAS_UNIFORM_u_${D}
    ${P} ${z} ${D} = u_${D};
#endif
`)),vertexSource:l=l.replace(h,(C,R,P,z,D)=>{const q=z==="float"?"vec2":"vec4",te=D.match(/color/)?"color":q;return _[D]?R==="define"?`
#ifndef HAS_UNIFORM_u_${D}
uniform lowp float u_${D}_t;
attribute ${P} ${q} a_${D};
varying ${P} ${z} ${D};
#else
uniform ${P} ${z} u_${D};
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_${D}
    ${D} = a_${D};
#else
    ${P} ${z} ${D} = u_${D};
#endif
`:`
#ifndef HAS_UNIFORM_u_${D}
    ${D} = unpack_mix_${te}(a_${D}, u_${D}_t);
#else
    ${P} ${z} ${D} = u_${D};
#endif
`:R==="define"?`
#ifndef HAS_UNIFORM_u_${D}
uniform lowp float u_${D}_t;
attribute ${P} ${q} a_${D};
#else
uniform ${P} ${z} u_${D};
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_${D}
    ${P} ${z} ${D} = a_${D};
#else
    ${P} ${z} ${D} = u_${D};
#endif
`:`
#ifndef HAS_UNIFORM_u_${D}
    ${P} ${z} ${D} = unpack_mix_${te}(a_${D}, u_${D}_t);
#else
    ${P} ${z} ${D} = u_${D};
#endif
`}),staticAttributes:y,usedDefines:w}}class wx{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(l,h,y,_,w,C,R){this.context=l;let P=this.boundPaintVertexBuffers.length!==_.length;for(let D=0;!P&&D<_.length;D++)this.boundPaintVertexBuffers[D]!==_[D]&&(P=!0);let z=this.boundDynamicVertexBuffers.length!==R.length;for(let D=0;!z&&D<R.length;D++)this.boundDynamicVertexBuffers[D]!==R[D]&&(z=!0);if(!l.extVertexArrayObject||!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==y||P||z||this.boundIndexBuffer!==w||this.boundVertexOffset!==C)this.freshBind(h,y,_,w,C,R);else{l.bindVertexArrayOES.set(this.vao);for(const D of R)D&&D.bind();w&&w.dynamicDraw&&w.bind()}}freshBind(l,h,y,_,w,C){let R;const P=l.numAttributes,z=this.context,D=z.gl;if(z.extVertexArrayObject)this.vao&&this.destroy(),this.vao=z.extVertexArrayObject.createVertexArrayOES(),z.bindVertexArrayOES.set(this.vao),R=0,this.boundProgram=l,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=y,this.boundIndexBuffer=_,this.boundVertexOffset=w,this.boundDynamicVertexBuffers=C;else{R=z.currentNumAttributes||0;for(let q=P;q<R;q++)D.disableVertexAttribArray(q)}h.enableAttributes(D,l),h.bind(),h.setVertexAttribPointers(D,l,w);for(const q of y)q.enableAttributes(D,l),q.bind(),q.setVertexAttribPointers(D,l,w);for(const q of C)q&&(q.enableAttributes(D,l),q.bind(),q.setVertexAttribPointers(D,l,w));_&&_.bind(),z.currentNumAttributes=P}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Nf(m,l){const h=Math.pow(2,l.canonical.z),y=l.canonical.y;return[new o.MercatorCoordinate(0,y/h).toLngLat().lat,new o.MercatorCoordinate(0,(y+1)/h).toLngLat().lat]}function vy(m,l,h,y,_,w,C){const R=m.context,P=R.gl,z=h.fbo;if(!z)return;m.prepareDrawTile();const D=m.useProgram("hillshade");R.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,z.colorAttachment.get());const q=((he,me,H,le)=>{const _e=H.paint.get("hillshade-shadow-color"),xe=H.paint.get("hillshade-highlight-color"),Oe=H.paint.get("hillshade-accent-color");let Fe=H.paint.get("hillshade-illumination-direction")*(Math.PI/180);H.paint.get("hillshade-illumination-anchor")==="viewport"&&(Fe-=he.transform.angle);const ze=!he.options.moving;return{u_matrix:le||he.transform.calculateProjMatrix(me.tileID.toUnwrapped(),ze),u_image:0,u_latrange:Nf(0,me.tileID),u_light:[H.paint.get("hillshade-exaggeration"),Fe],u_shadow:_e,u_highlight:xe,u_accent:Oe}})(m,h,y,m.terrain?l.projMatrix:null);m.prepareDrawProgram(R,D,l.toUnwrapped());const{tileBoundsBuffer:te,tileBoundsIndexBuffer:ce,tileBoundsSegments:fe}=m.getTileBoundsBuffers(h);D.draw(R,P.TRIANGLES,_,w,C,o.CullFaceMode.disabled,q,y.id,te,ce,fe)}function $f(m,l,h){if(!l.needsDEMTextureUpload)return;const y=m.context,_=y.gl;y.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||m.getTileTexture(h.stride);const w=h.getPixels();l.demTexture?l.demTexture.update(w,{premultiply:!1}):l.demTexture=new o.Texture(y,w,_.RGBA,{premultiply:!1}),l.needsDEMTextureUpload=!1}function _y(m,l,h,y,_,w){const C=m.context,R=C.gl;if(!l.dem)return;const P=l.dem;if(C.activeTexture.set(R.TEXTURE1),$f(m,l,P),!l.demTexture)return;l.demTexture.bind(R.NEAREST,R.CLAMP_TO_EDGE);const z=P.dim;C.activeTexture.set(R.TEXTURE0);let D=l.fbo;if(!D){const fe=new o.Texture(C,{width:z,height:z,data:null},R.RGBA);fe.bind(R.LINEAR,R.CLAMP_TO_EDGE),D=l.fbo=C.createFramebuffer(z,z,!0),D.colorAttachment.set(fe.texture)}C.bindFramebuffer.set(D.framebuffer),C.viewport.set([0,0,z,z]);const{tileBoundsBuffer:q,tileBoundsIndexBuffer:te,tileBoundsSegments:ce}=m.getMercatorTileBoundsBuffers();m.useProgram("hillshadePrepare").draw(C,R.TRIANGLES,y,_,w,o.CullFaceMode.disabled,((fe,he)=>{const me=he.stride,H=o.create();return o.ortho(H,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(H,H,[0,-o.EXTENT,0]),{u_matrix:H,u_image:1,u_dimension:[me,me],u_zoom:fe.overscaledZ,u_unpack:he.unpackVector}})(l.tileID,P),h.id,q,te,ce),l.needsHillshadePrepare=!1}const Uf=m=>({u_matrix:new o.UniformMatrix4f(m),u_image0:new o.Uniform1i(m),u_skirt_height:new o.Uniform1f(m)}),bl=(m,l)=>({u_matrix:m,u_image0:0,u_skirt_height:l}),hd=(m,l,h,y,_,w,C,R,P,z,D,q,te,ce,fe)=>({u_proj_matrix:Float32Array.from(m),u_globe_matrix:l,u_normalize_matrix:Float32Array.from(y),u_merc_matrix:h,u_zoom_transition:_,u_merc_center:w,u_image0:0,u_frustum_tl:C,u_frustum_tr:R,u_frustum_br:P,u_frustum_bl:z,u_globe_pos:D,u_globe_radius:q,u_viewport:te,u_grid_matrix:fe?Float32Array.from(fe):new Float32Array(9),u_skirt_height:ce});function wl(m,l){return m!=null&&l!=null&&!(!m.hasData()||!l.hasData())&&m.demTexture!=null&&l.demTexture!=null&&m.tileID.key!==l.tileID.key}const Pa=new class{constructor(){this.operations={}}newMorphing(m,l,h,y,_){if(m in this.operations){const w=this.operations[m];w.to.tileID.key!==h.tileID.key&&(w.queued=h)}else this.operations[m]={startTime:y,phase:0,duration:_,from:l,to:h,queued:null}}getMorphValuesForProxy(m){if(!(m in this.operations))return null;const l=this.operations[m];return{from:l.from,to:l.to,phase:l.phase}}update(m){for(const l in this.operations){const h=this.operations[l];for(h.phase=(m-h.startTime)/h.duration;h.phase>=1||!this._validOp(h);)if(!this._nextOp(h,m)){delete this.operations[l];break}}}_nextOp(m,l){return!!m.queued&&(m.from=m.to,m.to=m.queued,m.queued=null,m.phase=0,m.startTime=l,!0)}_validOp(m){return m.from.hasData()&&m.to.hasData()}},ks={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function fd(m){return 6*Math.pow(1.5,22-m)}function xy(m,l){const h=1<<m.z;return!l&&(m.x===0||m.x===h-1)||m.y===0||m.y===h-1}const Hc=m=>({u_matrix:m});function jf(m,l,h,y,_){if(_>0){const w=o.exported.now(),C=(w-m.timeAdded)/_,R=l?(w-l.timeAdded)/_:-1,P=h.getSource(),z=y.coveringZoomLevel({tileSize:P.tileSize,roundZoom:P.roundZoom}),D=!l||Math.abs(l.tileID.overscaledZ-z)>Math.abs(m.tileID.overscaledZ-z),q=D&&m.refreshedUponExpiration?1:o.clamp(D?C:1-R,0,1);return m.refreshedUponExpiration&&C>=1&&(m.refreshedUponExpiration=!1),l?{opacity:1,mix:1-q}:{opacity:q,mix:0}}return{opacity:1,mix:0}}class Vf extends o.SourceCache{constructor(l){const h={type:"raster-dem",maxzoom:l.transform.maxZoom},y=new Te(zi(),null),_=gn("mock-dem",h,y,l.style);super("mock-dem",_,!1),_.setEventedParent(this),this._sourceLoaded=!0}_loadTile(l,h){l.state="loaded",h(null)}}class pd extends o.SourceCache{constructor(l){const h=gn("proxy",{type:"geojson",maxzoom:l.transform.maxZoom},new Te(zi(),null),l.style);super("proxy",h,!1),h.setEventedParent(this),this.map=this.getSource().map=l,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(l,h,y){if(l.freezeTileCoverage)return;this.transform=l;const _=l.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((w,C)=>{if(w[C.key]="",!this._tiles[C.key]){const R=new o.Tile(C,this._source.tileSize*C.overscaleFactor(),l.tileZoom);R.state="loaded",this._tiles[C.key]=R}return w},{});for(const w in this._tiles)w in _||(this.freeFBO(w),this._tiles[w].unloadVectorData(),delete this._tiles[w])}freeFBO(l){const h=this.proxyCachedFBO[l];if(h!==void 0){const y=Object.values(h);this.renderCachePool.push(...y),delete this.proxyCachedFBO[l]}}deallocRenderCache(){this.renderCache.forEach(l=>l.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class md extends o.OverscaledTileID{constructor(l,h,y){super(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,l.canonical.y),this.proxyTileKey=h,this.projMatrix=y}}class Gf extends o.Elevation{constructor(l,h){super(),this.painter=l,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[y,_,w]=function(P){const z=new o.StructArrayLayout2i4,D=new o.StructArrayLayout3ui6,q=131;z.reserve(17161),D.reserve(33800);const te=o.EXTENT/128,ce=o.EXTENT+te/2,fe=ce+te;for(let me=-te;me<fe;me+=te)for(let H=-te;H<fe;H+=te){const le=H<0||H>ce||me<0||me>ce?24575:0,_e=o.clamp(Math.round(H),0,o.EXTENT),xe=o.clamp(Math.round(me),0,o.EXTENT);z.emplaceBack(_e+le,xe)}const he=(me,H)=>{const le=H*q+me;D.emplaceBack(le+1,le,le+q),D.emplaceBack(le+q,le+q+1,le+1)};for(let me=1;me<129;me++)for(let H=1;H<129;H++)he(H,me);return[0,129].forEach(me=>{for(let H=0;H<130;H++)he(H,me),he(me,H)}),[z,D,32768]}(),C=l.context;this.gridBuffer=C.createVertexBuffer(y,o.posAttributes.members),this.gridIndexBuffer=C.createIndexBuffer(_),this.gridSegments=o.SegmentVector.simpleSegment(0,0,y.length,_.length),this.gridNoSkirtSegments=o.SegmentVector.simpleSegment(0,0,y.length,w),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new pd(h.map),this.orthoMatrix=o.create(),o.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,o.EXTENT,0,o.EXTENT,0,1);const R=C.gl;this._overlapStencilMode=new o.StencilMode({func:R.GEQUAL,mask:255},0,255,R.KEEP,R.KEEP,R.REPLACE),this._previousZoom=l.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=h,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Vf(h.map)}set style(l){l.on("data",this._onStyleDataEvent.bind(this)),l.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=l,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(l,h,y){if(l&&l.terrain){this._style!==l&&(this.style=l),this.enabled=!0;const _=l.terrain.properties;this.sourceCache=l.terrain.drapeRenderMode===0?this._mockSourceCache:l._getSourceCache(_.get("source")),this._exaggeration=_.get("exaggeration");const w=()=>{this.sourceCache.used&&o.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const C=this.getScaledDemTileSize();this.sourceCache.update(h,C,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,w(),this._initializing=!0),w(),h.updateElevation(!0,y),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(h),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(l){this._findCoveringTileCache[l]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const l=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||l.efficiency!==100&&o.warnOnce(`Terrain render cache efficiency is not optimal (${l.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${l.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(l){l.coord&&l.dataType==="source"?this._clearRenderCacheForTile(l.sourceCacheId,l.coord):l.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const l in this._style._sourceCaches)this._style._sourceCaches[l].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(l=>l.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const l=2*this.proxySourceCache.getSource().tileSize;return[l,l]}set useVertexMorphing(l){this._useVertexMorphing=l}updateTileBinding(l){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const h=this.proxySourceCache,y=this.painter.transform;this._initializing&&(this._initializing=y._centerAltitude===0&&this.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(y.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const _=this.proxyCoords=h.getIds().map(P=>{const z=h.getTileByID(P).tileID;return z.projMatrix=y.calculateProjMatrix(z.toUnwrapped()),z});(function(P,z){const D=z.transform.pointCoordinate(z.transform.getCameraPoint()),q=new o.Point(D.x,D.y);P.sort((te,ce)=>{if(ce.overscaledZ-te.overscaledZ)return ce.overscaledZ-te.overscaledZ;const fe=new o.Point(te.canonical.x+(1<<te.canonical.z)*te.wrap,te.canonical.y),he=new o.Point(ce.canonical.x+(1<<ce.canonical.z)*ce.wrap,ce.canonical.y),me=q.mult(1<<te.canonical.z);return me.x-=.5,me.y-=.5,me.distSqr(fe)-me.distSqr(he)})})(_,this.painter),this._previousZoom=y.zoom;const w=this.proxyToSource||{};this.proxyToSource={},_.forEach(P=>{this.proxyToSource[P.key]={}}),this.terrainTileForTile={};const C=this._style._sourceCaches;for(const P in C){const z=C[P];if(!z.used||(z!==this.sourceCache&&this.resetTileLookupCache(z.id),this._setupProxiedCoordsForOrtho(z,l[P],w),z.usedForTerrain))continue;const D=l[P];z.getSource().reparseOverscaled&&this._assignTerrainTiles(D)}this.proxiedCoords[h.id]=_.map(P=>new md(P,P.key,this.orthoMatrix)),this._assignTerrainTiles(_),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(w),this.renderingToTexture=!1,this._updateTimestamp=o.exported.now();const R={};this._visibleDemTiles=[];for(const P of this.proxyCoords){const z=this.terrainTileForTile[P.key];if(!z)continue;const D=z.tileID.key;D in R||(this._visibleDemTiles.push(z),R[D]=D)}}_assignTerrainTiles(l){this._initializing||l.forEach(h=>{if(this.terrainTileForTile[h.key])return;const y=this._findTileCoveringTileID(h,this.sourceCache);y&&(this.terrainTileForTile[h.key]=y)})}_prepareDEMTextures(){const l=this.painter.context,h=l.gl;for(const y in this.terrainTileForTile){const _=this.terrainTileForTile[y],w=_.dem;!w||_.demTexture&&!_.needsDEMTextureUpload||(l.activeTexture.set(h.TEXTURE1),$f(this.painter,_,w))}}_prepareDemTileUniforms(l,h,y,_){if(!h||h.demTexture==null)return!1;const w=l.tileID.canonical,C=Math.pow(2,h.tileID.canonical.z-w.z),R=_||"";return y[`u_dem_tl${R}`]=[w.x*C%1,w.y*C%1],y[`u_dem_scale${R}`]=C,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const l=this.painter.context,h=l.gl;if(!this._emptyDepthBufferTexture){const y=new o.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new o.Texture(l,y,h.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let l=0;const h=this._visibleDemTiles.reduce((y,_)=>{if(!_.dem)return y;const w=_.dem.tree.minimums[0];return w>0&&l++,y+w},0);return l?h/l:0}_updateEmptyDEMTexture(){const l=this.painter.context,h=l.gl;l.activeTexture.set(h.TEXTURE2);const y=this._getLoadedAreaMinimum(),_=new o.RGBAImage({width:1,height:1},new Uint8Array(o.DEMData.pack(y,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let w=this._emptyDEMTexture;return w?w.update(_,{premultiply:!1}):w=this._emptyDEMTexture=new o.Texture(l,_,h.RGBA,{premultiply:!1}),w}setupElevationDraw(l,h,y){const _=this.painter.context,w=_.gl,C=(R=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:o.DEMData.getUnpackVector(R),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var R;C.u_dem_size=this.sourceCache.getSource().tileSize,C.u_exaggeration=this.exaggeration();let P=null,z=null,D=1;if(y&&y.morphing&&this._useVertexMorphing){const q=y.morphing.srcDemTile,te=y.morphing.dstDemTile;D=y.morphing.phase,q&&te&&(this._prepareDemTileUniforms(l,q,C,"_prev")&&(z=q),this._prepareDemTileUniforms(l,te,C)&&(P=te))}if(z&&P?(_.activeTexture.set(w.TEXTURE2),P.demTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE,w.NEAREST),_.activeTexture.set(w.TEXTURE4),z.demTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE,w.NEAREST),C.u_dem_lerp=D):(P=this.terrainTileForTile[l.tileID.key],_.activeTexture.set(w.TEXTURE2),(this._prepareDemTileUniforms(l,P,C)?P.demTexture:this.emptyDEMTexture).bind(w.NEAREST,w.CLAMP_TO_EDGE)),_.activeTexture.set(w.TEXTURE3),y&&y.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),this._depthFBO&&(C.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),C.u_depth_size_inv=[1,1]),y&&y.useMeterToDem&&P){const q=(1<<P.tileID.canonical.z)*o.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;C.u_meter_to_dem=q}if(y&&y.labelPlaneMatrixInv&&(C.u_label_plane_matrix_inv=y.labelPlaneMatrixInv),h.setTerrainUniformValues(_,C),this.painter.transform.projection.name==="globe"){const q=this.globeUniformValues(this.painter.transform,l.tileID.canonical,y&&y.useDenormalizedUpVectorScale);h.setGlobeUniformValues(_,q)}}globeUniformValues(l,h,y){const _=l.projection;return{u_tile_tl_up:_.upVector(h,0,0),u_tile_tr_up:_.upVector(h,o.EXTENT,0),u_tile_br_up:_.upVector(h,o.EXTENT,o.EXTENT),u_tile_bl_up:_.upVector(h,0,o.EXTENT),u_tile_up_scale:y?o.globeMetersToEcef(1):_.upVectorScale(h,l.center.lat,l.worldSize).metersToTile}}renderToBackBuffer(l){const h=this.painter,y=this.painter.context;l.length!==0&&(y.bindFramebuffer.set(null),y.viewport.set([0,0,h.width,h.height]),h.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(_,w,C,R,P){if(_.transform.projection.name==="globe")(function(z,D,q,te,ce){const fe=z.context,he=fe.gl;let me,H;const le=z.options.showTerrainWireframe?2:0,_e=z.transform,xe=o.globeUseCustomAntiAliasing(z,fe,_e),Oe=(kt,rt)=>{if(H===kt)return;const yt=[ks[kt],"PROJECTION_GLOBE_VIEW"];xe&&yt.push("CUSTOM_ANTIALIASING"),rt&&yt.push(ks[le]),me=z.useProgram("globeRaster",null,yt),H=kt},Fe=z.colorModeForRenderPass(),ze=new o.DepthMode(he.LEQUAL,o.DepthMode.ReadWrite,z.depthRangeFor3D);Pa.update(ce);const He=o.calculateGlobeMercatorMatrix(_e),qe=[o.mercatorXfromLng(_e.center.lng),o.mercatorYfromLat(_e.center.lat)],it=le?[!1,!0]:[!1],Pt=z.globeSharedBuffers,et=[_e.width*o.exported.devicePixelRatio,_e.height*o.exported.devicePixelRatio],vt=Float32Array.from(_e.globeMatrix),st={useDenormalizedUpVectorScale:!0};if(it.forEach(kt=>{const rt=z.transform,yt=fd(rt.zoom)*D.exaggeration();H=-1;const Lt=kt?he.LINES:he.TRIANGLES;for(const wt of te){const Ot=q.getTile(wt),un=o.StencilMode.disabled,Tn=D.prevTerrainTileForTile[wt.key],en=D.terrainTileForTile[wt.key];wl(Tn,en)&&Pa.newMorphing(wt.key,Tn,en,ce,250),fe.activeTexture.set(he.TEXTURE0),Ot.texture.bind(he.LINEAR,he.CLAMP_TO_EDGE);const yn=Pa.getMorphValuesForProxy(wt.key),Fn=yn?1:0;yn&&o.extend$1(st,{morphing:{srcDemTile:yn.from,dstDemTile:yn.to,phase:o.easeCubicInOut(yn.phase)}});const On=o.tileCornersToBounds(wt.canonical),cn=o.getLatitudinalLod(On.getCenter().lat),or=o.getGridMatrix(wt.canonical,On,cn,rt.worldSize/rt._pixelsPerMercatorPixel),dr=o.globeNormalizeECEF(o.globeTileBounds(wt.canonical)),hr=hd(rt.projMatrix,vt,He,dr,o.globeToMercatorTransition(rt.zoom),qe,rt.frustumCorners.TL,rt.frustumCorners.TR,rt.frustumCorners.BR,rt.frustumCorners.BL,rt.globeCenterInViewSpace,rt.globeRadius,et,yt,or);if(Oe(Fn,kt),D.setupElevationDraw(Ot,me,st),z.prepareDrawProgram(fe,me,wt.toUnwrapped()),Pt){const[fr,Bi,Si]=kt?Pt.getWirefameBuffers(z.context,cn):Pt.getGridBuffers(cn,yt!==0);me.draw(fe,Lt,ze,un,Fe,o.CullFaceMode.backCCW,hr,"globe_raster",fr,Bi,Si)}}}),Pt){const kt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];xe&&kt.push("CUSTOM_ANTIALIASING"),me=z.useProgram("globeRaster",null,kt);for(const rt of te){const{x:yt,y:Lt,z:wt}=rt.canonical,Ot=Lt===0,un=Lt===(1<<wt)-1,[Tn,en,yn,Fn]=Pt.getPoleBuffers(wt);if(Fn&&(Ot||un)){const On=q.getTile(rt);fe.activeTexture.set(he.TEXTURE0),On.texture.bind(he.LINEAR,he.CLAMP_TO_EDGE);let cn=o.globePoleMatrixForTile(wt,yt,_e);const or=o.globeNormalizeECEF(o.globeTileBounds(rt.canonical)),dr=(hr,fr)=>hr.draw(fe,he.TRIANGLES,ze,o.StencilMode.disabled,Fe,o.CullFaceMode.disabled,hd(_e.projMatrix,cn,cn,or,0,qe,_e.frustumCorners.TL,_e.frustumCorners.TR,_e.frustumCorners.BR,_e.frustumCorners.BL,_e.globeCenterInViewSpace,_e.globeRadius,et,0),"globe_pole_raster",fr,yn,Fn);D.setupElevationDraw(On,me,st),z.prepareDrawProgram(fe,me,rt.toUnwrapped()),Ot&&dr(me,Tn),un&&(cn=o.scale(o.create(),cn,[1,-1,1]),dr(me,en))}}}})(_,w,C,R,P);else{const z=_.context,D=z.gl;let q,te;const ce=_.options.showTerrainWireframe?2:0,fe=(_e,xe)=>{if(te===_e)return;const Oe=[ks[_e]];xe&&Oe.push(ks[ce]),q=_.useProgram("terrainRaster",null,Oe),te=_e},he=_.colorModeForRenderPass(),me=new o.DepthMode(D.LEQUAL,o.DepthMode.ReadWrite,_.depthRangeFor3D);Pa.update(P);const H=_.transform,le=fd(H.zoom)*w.exaggeration();(ce?[!1,!0]:[!1]).forEach(_e=>{te=-1;const xe=_e?D.LINES:D.TRIANGLES,[Oe,Fe]=_e?w.getWirefameBuffer():[w.gridIndexBuffer,w.gridSegments];for(const ze of R){const He=C.getTile(ze),qe=o.StencilMode.disabled,it=w.prevTerrainTileForTile[ze.key],Pt=w.terrainTileForTile[ze.key];wl(it,Pt)&&Pa.newMorphing(ze.key,it,Pt,P,250),z.activeTexture.set(D.TEXTURE0),He.texture.bind(D.LINEAR,D.CLAMP_TO_EDGE,D.LINEAR_MIPMAP_NEAREST);const et=Pa.getMorphValuesForProxy(ze.key),vt=et?1:0;let st;et&&(st={morphing:{srcDemTile:et.from,dstDemTile:et.to,phase:o.easeCubicInOut(et.phase)}});const kt=bl(ze.projMatrix,xy(ze.canonical,H.renderWorldCopies)?le/10:le);fe(vt,_e),w.setupElevationDraw(He,q,st),_.prepareDrawProgram(z,q,ze.toUnwrapped()),q.draw(z,xe,me,qe,he,o.CullFaceMode.backCCW,kt,"terrain_raster",w.gridBuffer,Oe,Fe)}})}}(h,this,this.proxySourceCache,l,this._updateTimestamp),this.renderingToTexture=!0,h.gpuTimingDeferredRenderEnd(),l.splice(0,l.length))}renderBatch(l){if(this._drapedRenderBatches.length===0)return l+1;this.renderingToTexture=!0;const h=this.painter,y=this.painter.context,_=this.proxySourceCache,w=this.proxiedCoords[_.id],C=this._drapedRenderBatches.shift(),R=[],P=h.style.order;let z=0;for(const D of w){const q=_.getTileByID(D.proxyTileKey),te=_.proxyCachedFBO[D.key]?_.proxyCachedFBO[D.key][l]:void 0,ce=te!==void 0?_.renderCache[te]:this.pool[z++],fe=te!==void 0;if(q.texture=ce.tex,fe&&!ce.dirty){R.push(q.tileID);continue}let he;y.bindFramebuffer.set(ce.fb.framebuffer),this.renderedToTile=!1,ce.dirty&&(y.clear({color:o.Color.transparent,stencil:0}),ce.dirty=!1);for(let me=C.start;me<=C.end;++me){const H=h.style._layers[P[me]];if(H.isHidden(h.transform.zoom))continue;const le=h.style._getLayerSourceCache(H),_e=le?this.proxyToSource[D.key][le.id]:[D];if(!_e)continue;const xe=_e;y.viewport.set([0,0,ce.fb.width,ce.fb.height]),he!==(le?le.id:null)&&(this._setupStencil(ce,_e,H,le),he=le?le.id:null),h.renderLayer(h,le,H,xe)}this.renderedToTile?(ce.dirty=!0,R.push(q.tileID)):fe||--z,z===5&&(z=0,this.renderToBackBuffer(R))}return this.renderToBackBuffer(R),this.renderingToTexture=!1,y.bindFramebuffer.set(null),y.viewport.set([0,0,h.width,h.height]),C.end+1}postRender(){}renderCacheEfficiency(l){const h=l.order.length;if(h===0)return{efficiency:100};let y,_=0,w=0,C=!1;for(let R=0;R<h;++R){const P=l._layers[l.order[R]];this._style.isLayerDraped(P)?(C&&++_,++w):C||(C=!0,y=P.id)}return w===0?{efficiency:100}:{efficiency:100*(1-_/w),firstUndrapedLayer:y}}getMinElevationBelowMSL(){let l=0;return this._visibleDemTiles.filter(h=>h.dem).forEach(h=>{l=Math.min(l,h.dem.tree.minimums[0])}),l===0?l:(l-30)*this._exaggeration}raycast(l,h,y){if(!this._visibleDemTiles)return null;const _=this._visibleDemTiles.filter(w=>w.dem).map(w=>{const C=w.tileID,R=1<<C.overscaledZ,{x:P,y:z}=C.canonical,D=P/R,q=(P+1)/R,te=z/R,ce=(z+1)/R;return{minx:D,miny:te,maxx:q,maxy:ce,t:w.dem.tree.raycastRoot(D,te,q,ce,l,h,y),tile:w}});_.sort((w,C)=>(w.t!==null?w.t:Number.MAX_VALUE)-(C.t!==null?C.t:Number.MAX_VALUE));for(const w of _){if(w.t==null)return null;const C=w.tile.dem.tree.raycast(w.minx,w.miny,w.maxx,w.maxy,l,h,y);if(C!=null)return C}return null}_createFBO(){const l=this.painter.context,h=l.gl,y=this.drapeBufferSize;l.activeTexture.set(h.TEXTURE0);const _=new o.Texture(l,{width:y[0],height:y[1],data:null},h.RGBA);_.bind(h.LINEAR,h.CLAMP_TO_EDGE);const w=l.createFramebuffer(y[0],y[1],!1);return w.colorAttachment.set(_.texture),w.depthAttachment=new Ie(l,w.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=l.createRenderbuffer(l.gl.DEPTH_STENCIL,y[0],y[1]),this._stencilRef=0,w.depthAttachment.set(this._sharedDepthStencil),l.clear({stencil:0})):w.depthAttachment.set(this._sharedDepthStencil),l.extTextureFilterAnisotropic&&!l.extTextureFilterAnisotropicForceOff&&h.texParameterf(h.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax),{fb:w,tex:_,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const l in this._style._sourceCaches)if(this._style._sourceCaches[l].hasTransition())return!0;return this._style.order.some(l=>{const h=this._style._layers[l],y=h.isHidden(this.painter.transform.zoom);return h.type==="custom"?!y&&h.shouldRedrape():!y&&h.hasTransition()})}_clearLineLayersFromRenderCache(){let l=!1;for(const y of this._style._getSources())if(y instanceof Dt){l=!0;break}if(!l)return;const h={};for(let y=0;y<this._style.order.length;++y){const _=this._style._layers[this._style.order[y]],w=this._style._getLayerSourceCache(_);if(w&&!h[w.id]&&!_.isHidden(this.painter.transform.zoom)&&_.type==="line"&&_.widthExpression()instanceof o.ZoomDependentExpression){h[w.id]=!0;for(const C of this.proxyCoords){const R=this.proxyToSource[C.key][w.id];if(R)for(const P of R)this._clearRenderCacheForTile(w.id,P)}}}}_clearRasterLayersFromRenderCache(){let l=!1;for(const y in this._style._sourceCaches)if(this._style._sourceCaches[y]._source instanceof Et){l=!0;break}if(!l)return;const h={};for(let y=0;y<this._style.order.length;++y){const _=this._style._layers[this._style.order[y]],w=this._style._getLayerSourceCache(_);if(!w||h[w.id]||_.isHidden(this.painter.transform.zoom)||_.type!=="raster")continue;const C=_.paint.get("raster-fade-duration");for(const R of this.proxyCoords){const P=this.proxyToSource[R.key][w.id];if(P)for(const z of P){const D=jf(w.getTile(z),w.findLoadedParent(z,0),w,this.painter.transform,C);(D.opacity!==1||D.mix!==0)&&this._clearRenderCacheForTile(w.id,z)}}}}_setupDrapedRenderBatches(){const l=this._style.order,h=l.length;if(h===0)return;const y=[];let _,w=0,C=this._style._layers[l[w]];for(;!this._style.isLayerDraped(C)&&C.isHidden(this.painter.transform.zoom)&&++w<h;)C=this._style._layers[l[w]];for(;w<h;++w){const R=this._style._layers[l[w]];R.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(R)?_===void 0&&(_=w):_!==void 0&&(y.push({start:_,end:w-1}),_=void 0))}_!==void 0&&y.push({start:_,end:w-1}),this._drapedRenderBatches=y}_setupRenderCache(l){const h=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,h.renderCache.length>h.renderCachePool.length){const C=Object.values(h.proxyCachedFBO);h.proxyCachedFBO={};for(let R=0;R<C.length;++R){const P=Object.values(C[R]);h.renderCachePool.push(...P)}}return}this._clearRasterLayersFromRenderCache();const y=this.proxyCoords,_=this._tilesDirty;for(let C=y.length-1;C>=0;C--){const R=y[C];if(h.getTileByID(R.key),h.proxyCachedFBO[R.key]!==void 0){const P=l[R.key],z=this.proxyToSource[R.key];let D=0;for(const q in z){const te=z[q],ce=P[q];if(!ce||ce.length!==te.length||te.some((fe,he)=>fe!==ce[he]||_[q]&&_[q].hasOwnProperty(fe.key))){D=-1;break}++D}for(const q in h.proxyCachedFBO[R.key])h.renderCache[h.proxyCachedFBO[R.key][q]].dirty=D<0||D!==Object.values(P).length}}const w=[...this._drapedRenderBatches];w.sort((C,R)=>R.end-R.start-(C.end-C.start));for(const C of w)for(const R of y){if(h.proxyCachedFBO[R.key])continue;let P=h.renderCachePool.pop();P===void 0&&h.renderCache.length<50&&(P=h.renderCache.length,h.renderCache.push(this._createFBO())),P!==void 0&&(h.proxyCachedFBO[R.key]={},h.proxyCachedFBO[R.key][C.start]=P,h.renderCache[P].dirty=!0)}this._tilesDirty={}}_setupStencil(l,h,y,_){if(!_||!this._sourceTilesOverlap[_.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const w=this.painter.context,C=w.gl;if(h.length<=1)return void(this._overlapStencilType=!1);let R;if(y.isTileClipped())R=h.length,this._overlapStencilMode.test={func:C.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(h[0].overscaledZ>h[h.length-1].overscaledZ))return void(this._overlapStencilType=!1);R=1,this._overlapStencilMode.test={func:C.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+R>255&&(w.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=R,this._overlapStencilMode.ref=this._stencilRef,y.isTileClipped()&&this._renderTileClippingMasks(h,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(l){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[l.key]),this._overlapStencilMode):o.StencilMode.disabled}_renderTileClippingMasks(l,h){const y=this.painter,_=this.painter.context,w=_.gl;y._tileClippingMaskIDs={},_.setColorMode(o.ColorMode.disabled),_.setDepthMode(o.DepthMode.disabled);const C=y.useProgram("clippingMask");for(const R of l){const P=y._tileClippingMaskIDs[R.key]=--h;C.draw(_,w.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:w.ALWAYS,mask:0},P,255,w.KEEP,w.KEEP,w.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,Hc(R.projMatrix),"$clipping",y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}}pointCoordinate(l){const h=this.painter.transform;if(l.x<0||l.x>h.width||l.y<0||l.y>h.height)return null;const y=[l.x,l.y,1,1];o.transformMat4$1(y,y,h.pixelMatrixInverse),o.scale$1(y,y,1/y[3]),y[0]/=h.worldSize,y[1]/=h.worldSize;const _=h._camera.position,w=o.mercatorZfromAltitude(1,h.center.lat),C=[_[0],_[1],_[2]/w,0],R=o.subtract([],y.slice(0,3),C);o.normalize(R,R);const P=this.raycast(C,R,this._exaggeration);return P!==null&&P?(o.scaleAndAdd(C,C,R,P),C[3]=C[2],C[2]*=w,C):null}drawDepth(){const l=this.painter,h=l.context,y=this.proxySourceCache,_=Math.ceil(l.width),w=Math.ceil(l.height);if(!this._depthFBO||this._depthFBO.width===_&&this._depthFBO.height===w||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const C=h.gl,R=h.createFramebuffer(_,w,!0);h.activeTexture.set(C.TEXTURE0);const P=new o.Texture(h,{width:_,height:w,data:null},C.RGBA);P.bind(C.NEAREST,C.CLAMP_TO_EDGE),R.colorAttachment.set(P.texture);const z=h.createRenderbuffer(h.gl.DEPTH_COMPONENT16,_,w);R.depthAttachment.set(z),this._depthFBO=R,this._depthTexture=P}h.bindFramebuffer.set(this._depthFBO.framebuffer),h.viewport.set([0,0,_,w]),function(C,R,P,z){if(C.transform.projection.name==="globe")return;const D=C.context,q=D.gl;D.clear({depth:1});const te=C.useProgram("terrainDepth"),ce=new o.DepthMode(q.LESS,o.DepthMode.ReadWrite,C.depthRangeFor3D);for(const fe of z){const he=P.getTile(fe),me=bl(fe.projMatrix,0);R.setupElevationDraw(he,te),te.draw(D,q.TRIANGLES,ce,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.backCCW,me,"terrain_depth",R.gridBuffer,R.gridIndexBuffer,R.gridNoSkirtSegments)}}(l,this,y,this.proxyCoords)}_setupProxiedCoordsForOrtho(l,h,y){if(l.getSource()instanceof En)return this._setupProxiedCoordsForImageSource(l,h,y);this._findCoveringTileCache[l.id]=this._findCoveringTileCache[l.id]||{};const _=this.proxiedCoords[l.id]=[],w=this.proxyCoords;for(let R=0;R<w.length;R++){const P=w[R],z=this._findTileCoveringTileID(P,l);if(z){const D=this._createProxiedId(P,z,y[P.key]&&y[P.key][l.id]);_.push(D),this.proxyToSource[P.key][l.id]=[D]}}let C=!1;for(let R=0;R<h.length;R++){const P=l.getTile(h[R]);if(!P||!P.hasData())continue;const z=this._findTileCoveringTileID(P.tileID,this.proxySourceCache);if(z&&z.tileID.canonical.z!==P.tileID.canonical.z){const D=this.proxyToSource[z.tileID.key][l.id],q=this._createProxiedId(z.tileID,P,y[z.tileID.key]&&y[z.tileID.key][l.id]);D?D.splice(D.length-1,0,q):this.proxyToSource[z.tileID.key][l.id]=[q],_.push(q),C=!0}}this._sourceTilesOverlap[l.id]=C}_setupProxiedCoordsForImageSource(l,h,y){if(!l.getSource().loaded())return;const _=this.proxiedCoords[l.id]=[],w=this.proxyCoords,C=l.getSource(),R=new o.Point(C.tileID.x,C.tileID.y)._div(1<<C.tileID.z),P=C.coordinates.map(o.MercatorCoordinate.fromLngLat).reduce((D,q)=>(D.min.x=Math.min(D.min.x,q.x-R.x),D.min.y=Math.min(D.min.y,q.y-R.y),D.max.x=Math.max(D.max.x,q.x-R.x),D.max.y=Math.max(D.max.y,q.y-R.y),D),{min:new o.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new o.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),z=(D,q)=>{const te=D.wrap+D.canonical.x/(1<<D.canonical.z),ce=D.canonical.y/(1<<D.canonical.z),fe=o.EXTENT/(1<<D.canonical.z),he=q.wrap+q.canonical.x/(1<<q.canonical.z),me=q.canonical.y/(1<<q.canonical.z);return te+fe<he+P.min.x||te>he+P.max.x||ce+fe<me+P.min.y||ce>me+P.max.y};for(let D=0;D<w.length;D++){const q=w[D];for(let te=0;te<h.length;te++){const ce=l.getTile(h[te]);if(!ce||!ce.hasData()||z(q,ce.tileID))continue;const fe=this._createProxiedId(q,ce,y[q.key]&&y[q.key][l.id]),he=this.proxyToSource[q.key][l.id];he?he.push(fe):this.proxyToSource[q.key][l.id]=[fe],_.push(fe)}}}_createProxiedId(l,h,y){let _=this.orthoMatrix;if(y){const w=y.find(C=>C.key===h.tileID.key);if(w)return w}if(h.tileID.key!==l.key){const w=l.canonical.z-h.tileID.canonical.z;let C,R,P;_=o.create();const z=h.tileID.wrap-l.wrap<<l.overscaledZ;w>0?(C=o.EXTENT>>w,R=C*((h.tileID.canonical.x<<w)-l.canonical.x+z),P=C*((h.tileID.canonical.y<<w)-l.canonical.y)):(C=o.EXTENT<<-w,R=o.EXTENT*(h.tileID.canonical.x-(l.canonical.x+z<<-w)),P=o.EXTENT*(h.tileID.canonical.y-(l.canonical.y<<-w))),o.ortho(_,0,C,0,C,0,1),o.translate(_,_,[R,P,0])}return new md(h.tileID,l.key,_)}_findTileCoveringTileID(l,h){let y=h.getTile(l);if(y&&y.hasData())return y;const _=this._findCoveringTileCache[h.id],w=_[l.key];if(y=w?h.getTileByID(w):null,y&&y.hasData()||w===null)return y;let C=y?y.tileID:l,R=C.overscaledZ;const P=h.getSource().minzoom,z=[];if(!w){const q=h.getSource().maxzoom;if(l.canonical.z>=q){const te=l.canonical.z-q;h.getSource().reparseOverscaled?(R=Math.max(l.canonical.z+2,h.transform.tileZoom),C=new o.OverscaledTileID(R,l.wrap,q,l.canonical.x>>te,l.canonical.y>>te)):te!==0&&(R=q,C=new o.OverscaledTileID(R,l.wrap,q,l.canonical.x>>te,l.canonical.y>>te))}C.key!==l.key&&(z.push(C.key),y=h.getTile(C))}const D=q=>{z.forEach(te=>{_[te]=q}),z.length=0};for(R-=1;R>=P&&(!y||!y.hasData());R--){y&&D(y.tileID.key);const q=C.calculateScaledKey(R);if(y=h.getTileByID(q),y&&y.hasData())break;const te=_[q];if(te===null)break;te===void 0?z.push(q):y=h.getTileByID(te)}return D(y?y.tileID.key:null),y&&y.hasData()?y:null}findDEMTileFor(l){return this.enabled?this._findTileCoveringTileID(l,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(l,h){let y=this._tilesDirty[l];y||(y=this._tilesDirty[l]={}),y[h.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const l=function(h){let y=0;const _=new o.StructArrayLayout2ui4,w=131;for(let C=1;C<129;C++){for(let R=1;R<129;R++)y=C*w+R,_.emplaceBack(y,y+1),_.emplaceBack(y,y+w),_.emplaceBack(y+1,y+w),C===128&&_.emplaceBack(y+w,y+w+1);_.emplaceBack(y+1,y+1+w)}return _}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(l),this.wireframeSegments=o.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,l.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Zn{static cacheKey(l,h,y,_){let w=`${h}${_?_.cacheKey:""}`;for(const C of y)l.usedDefines.includes(C)&&(w+=`/${C}`);return w}constructor(l,h,y,_,w,C){const R=l.gl;this.program=R.createProgram();const P=function(H){const le=[];for(let _e=0;_e<H.length;_e++){if(H[_e]===null)continue;const xe=H[_e].split(" ");le.push(xe.pop())}return le}(y.staticAttributes),z=_?_.getBinderAttributes():[],D=P.concat(z);let q=_?_.defines():[];q=q.concat(C.map(H=>`#define ${H}`));const te=l.isWebGL2?`#version 300 es
`:"",ce=te+q.concat(l.extStandardDerivatives&&te.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(Ff):Ff,Ff,dd,yy.fragmentSource,_l.fragmentSource,y.fragmentSource).join(`
`),fe=te+q.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,dd,yy.vertexSource,_l.vertexSource,ud.vertexSource,y.vertexSource).join(`
`),he=R.createShader(R.FRAGMENT_SHADER);if(R.isContextLost())return void(this.failedToCreate=!0);R.shaderSource(he,ce),R.compileShader(he),R.attachShader(this.program,he);const me=R.createShader(R.VERTEX_SHADER);if(R.isContextLost())this.failedToCreate=!0;else{R.shaderSource(me,fe),R.compileShader(me),R.attachShader(this.program,me),this.attributes={},this.numAttributes=D.length;for(let H=0;H<this.numAttributes;H++)D[H]&&(R.bindAttribLocation(this.program,H,D[H]),this.attributes[D[H]]=H);R.linkProgram(this.program),R.deleteShader(me),R.deleteShader(he),this.fixedUniforms=w(l),this.binderUniforms=_?_.getUniforms(l):[],C.includes("TERRAIN")&&(this.terrainUniforms=(H=>({u_dem:new o.Uniform1i(H),u_dem_prev:new o.Uniform1i(H),u_dem_unpack:new o.Uniform4f(H),u_dem_tl:new o.Uniform2f(H),u_dem_scale:new o.Uniform1f(H),u_dem_tl_prev:new o.Uniform2f(H),u_dem_scale_prev:new o.Uniform1f(H),u_dem_size:new o.Uniform1f(H),u_dem_lerp:new o.Uniform1f(H),u_exaggeration:new o.Uniform1f(H),u_depth:new o.Uniform1i(H),u_depth_size_inv:new o.Uniform2f(H),u_meter_to_dem:new o.Uniform1f(H),u_label_plane_matrix_inv:new o.UniformMatrix4f(H)}))(l)),C.includes("GLOBE")&&(this.globeUniforms=(H=>({u_tile_tl_up:new o.Uniform3f(H),u_tile_tr_up:new o.Uniform3f(H),u_tile_br_up:new o.Uniform3f(H),u_tile_bl_up:new o.Uniform3f(H),u_tile_up_scale:new o.Uniform1f(H)}))(l)),C.includes("FOG")&&(this.fogUniforms=(H=>({u_fog_matrix:new o.UniformMatrix4f(H),u_fog_range:new o.Uniform2f(H),u_fog_color:new o.Uniform4f(H),u_fog_horizon_blend:new o.Uniform1f(H),u_fog_temporal_offset:new o.Uniform1f(H),u_frustum_tl:new o.Uniform3f(H),u_frustum_tr:new o.Uniform3f(H),u_frustum_br:new o.Uniform3f(H),u_frustum_bl:new o.Uniform3f(H),u_globe_pos:new o.Uniform3f(H),u_globe_radius:new o.Uniform1f(H),u_globe_transition:new o.Uniform1f(H),u_is_globe:new o.Uniform1i(H),u_viewport:new o.Uniform2f(H)}))(l))}}setTerrainUniformValues(l,h){if(!this.terrainUniforms)return;const y=this.terrainUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const _ in h)y[_]&&y[_].set(this.program,_,h[_])}}setGlobeUniformValues(l,h){if(!this.globeUniforms)return;const y=this.globeUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const _ in h)y[_]&&y[_].set(this.program,_,h[_])}}setFogUniformValues(l,h){if(!this.fogUniforms)return;const y=this.fogUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const _ in h)y[_].set(this.program,_,h[_])}}draw(l,h,y,_,w,C,R,P,z,D,q,te,ce,fe,he){const me=l.gl;if(this.failedToCreate)return;l.program.set(this.program),l.setDepthMode(y),l.setStencilMode(_),l.setColorMode(w),l.setCullFace(C);for(const le of Object.keys(this.fixedUniforms))this.fixedUniforms[le].set(this.program,le,R[le]);fe&&fe.setUniforms(this.program,l,this.binderUniforms,te,{zoom:ce});const H={[me.LINES]:2,[me.TRIANGLES]:3,[me.LINE_STRIP]:1}[h];for(const le of q.get()){const _e=le.vaos||(le.vaos={});(_e[P]||(_e[P]=new wx)).bind(l,this,z,fe?fe.getPaintVertexBuffers():[],D,le.vertexOffset,he||[]),me.drawElements(h,le.primitiveLength*H,me.UNSIGNED_SHORT,le.primitiveOffset*H*2)}}}function Zc(m,l){const h=Math.pow(2,l.tileID.overscaledZ),y=l.tileSize*Math.pow(2,m.transform.tileZoom)/h,_=y*(l.tileID.canonical.x+l.tileID.wrap*h),w=y*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_tile_units_to_pixels:1/Ve(l,1,m.transform.tileZoom),u_pixel_coord_upper:[_>>16,w>>16],u_pixel_coord_lower:[65535&_,65535&w]}}const by=o.create(),Wf=(m,l,h,y,_,w,C,R,P,z,D)=>{const q=l.style.light,te=q.properties.get("position"),ce=[te.x,te.y,te.z],fe=o.create$1();q.properties.get("anchor")==="viewport"&&(o.fromRotation(fe,-l.transform.angle),o.transformMat3(ce,ce,fe));const he=q.properties.get("color"),me=l.transform,H={u_matrix:m,u_lightpos:ce,u_lightintensity:q.properties.get("intensity"),u_lightcolor:[he.r,he.g,he.b],u_vertical_gradient:+h,u_opacity:y,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:by,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:_,u_edge_radius:w};return me.projection.name==="globe"&&(H.u_tile_id=[C.canonical.x,C.canonical.y,1<<C.canonical.z],H.u_zoom_transition=P,H.u_inv_rot_matrix=D,H.u_merc_center=z,H.u_up_dir=me.projection.upVector(new o.CanonicalTileID(0,0,0),z[0]*o.EXTENT,z[1]*o.EXTENT),H.u_height_lift=R),H},wy=(m,l,h,y,_,w,C,R,P,z,D,q)=>{const te=Wf(m,l,h,y,_,w,C,P,z,D,q),ce={u_height_factor:-Math.pow(2,C.overscaledZ)/R.tileSize/8};return o.extend(te,Zc(l,R),ce)},Ps=m=>({u_matrix:m}),qf=(m,l,h)=>o.extend(Ps(m),Zc(l,h)),Sx=(m,l)=>({u_matrix:m,u_world:l}),Ex=(m,l,h,y)=>o.extend(qf(m,l,h),{u_world:y}),Tx=o.create(),Hf=(m,l,h,y,_,w)=>{const C=m.transform,R=C.projection.name==="globe";let P;if(w.paint.get("circle-pitch-alignment")==="map")if(R){const D=o.globePixelsToTileUnits(C.zoom,l.canonical)*C._pixelsPerMercatorPixel;P=Float32Array.from([D,0,0,D])}else P=C.calculatePixelsToTileUnitsMatrix(h);else P=new Float32Array([C.pixelsToGLUnits[0],0,0,C.pixelsToGLUnits[1]]);const z={u_camera_to_center_distance:C.cameraToCenterDistance,u_matrix:m.translatePosMatrix(l.projMatrix,h,w.paint.get("circle-translate"),w.paint.get("circle-translate-anchor")),u_device_pixel_ratio:o.exported.devicePixelRatio,u_extrude_scale:P,u_inv_rot_matrix:Tx,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(R){z.u_inv_rot_matrix=y,z.u_merc_center=_,z.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],z.u_zoom_transition=o.globeToMercatorTransition(C.zoom);const D=_[0]*o.EXTENT,q=_[1]*o.EXTENT;z.u_up_dir=C.projection.upVector(new o.CanonicalTileID(0,0,0),D,q)}return z},Zf=m=>{const l=[];return m.paint.get("circle-pitch-alignment")==="map"&&l.push("PITCH_WITH_MAP"),m.paint.get("circle-pitch-scale")==="map"&&l.push("SCALE_WITH_MAP"),l},Xf=(m,l,h,y)=>{const _=o.EXTENT/h.tileSize;return{u_matrix:m,u_camera_to_center_distance:l.getCameraToCenterDistance(y),u_extrude_scale:[l.pixelsToGLUnits[0]/_,l.pixelsToGLUnits[1]/_]}},gd=(m,l,h=1)=>({u_matrix:m,u_color:l,u_overlay:0,u_overlay_scale:h}),Sy=o.create(),Ey=(m,l,h,y,_,w,C)=>{const R=m.transform,P=R.projection.name==="globe",z=P?o.globePixelsToTileUnits(R.zoom,l.canonical)*R._pixelsPerMercatorPixel:Ve(h,1,w),D={u_matrix:l.projMatrix,u_extrude_scale:z,u_intensity:C,u_inv_rot_matrix:Sy,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(P){D.u_inv_rot_matrix=y,D.u_merc_center=_,D.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],D.u_zoom_transition=o.globeToMercatorTransition(R.zoom);const q=_[0]*o.EXTENT,te=_[1]*o.EXTENT;D.u_up_dir=R.projection.upVector(new o.CanonicalTileID(0,0,0),q,te)}return D},Cx=(m,l,h,y,_,w,C)=>{const R=m.transform,P=R.calculatePixelsToTileUnitsMatrix(l);return{u_matrix:Kf(m,l,h,y),u_pixels_to_tile_units:P,u_device_pixel_ratio:w,u_units_to_pixels:[1/R.pixelsToGLUnits[0],1/R.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:_,u_texsize:Kc(h)?l.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Sl(l,m.transform),u_alpha_discard_threshold:0,u_trim_offset:C}},Xc=(m,l,h,y,_)=>{const w=m.transform;return{u_matrix:Kf(m,l,h,y),u_texsize:l.imageAtlasTexture.size,u_pixels_to_tile_units:w.calculatePixelsToTileUnitsMatrix(l),u_device_pixel_ratio:_,u_image:0,u_tile_units_to_pixels:Sl(l,w),u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Sl(m,l){return 1/Ve(m,1,l.tileZoom)}function Kf(m,l,h,y){return m.translatePosMatrix(y||l.tileID.projMatrix,l,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}function Kc(m){const l=m.paint.get("line-dasharray").value;return l.value||l.kind!=="constant"}const Yf=(m,l,h,y,_,w)=>{return{u_matrix:m,u_tl_parent:l,u_scale_parent:h,u_fade_t:y.mix,u_opacity:y.opacity*_.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:_.paint.get("raster-brightness-min"),u_brightness_high:_.paint.get("raster-brightness-max"),u_saturation_factor:(R=_.paint.get("raster-saturation"),R>0?1-1/(1.001-R):-R),u_contrast_factor:(C=_.paint.get("raster-contrast"),C>0?1/(1-C):1+C),u_spin_weights:aa(_.paint.get("raster-hue-rotate")),u_perspective_transform:w};var C,R};function aa(m){m*=Math.PI/180;const l=Math.sin(m),h=Math.cos(m);return[(2*h+1)/3,(-Math.sqrt(3)*l-h+1)/3,(Math.sqrt(3)*l-h+1)/3]}const yd=o.create(),Qf=(m,l,h,y,_,w,C,R,P,z,D,q,te,ce,fe,he)=>{const me=_.transform,H={u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:me.cameraToCenterDistance,u_rotate_symbol:+h,u_aspect_ratio:me.width/me.height,u_fade_change:_.options.fadeDuration?_.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:C,u_coord_matrix:R,u_is_text:+P,u_pitch_with_map:+y,u_texsize:z,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:yd,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:yd,u_up_vector:[0,-1,0]};return he.name==="globe"&&(H.u_tile_id=[D.canonical.x,D.canonical.y,1<<D.canonical.z],H.u_zoom_transition=q,H.u_inv_rot_matrix=ce,H.u_merc_center=te,H.u_camera_forward=me._camera.forward(),H.u_ecef_origin=o.globeECEFOrigin(me.globeMatrix,D.toUnwrapped()),H.u_tile_matrix=Float32Array.from(me.globeMatrix),H.u_up_vector=fe),H},vd=(m,l,h,y,_,w,C,R,P,z,D,q,te,ce,fe,he,me)=>o.extend(Qf(m,l,h,y,_,w,C,R,P,z,q,te,ce,fe,he,me),{u_gamma_scale:y?_.transform.cameraToCenterDistance*Math.cos(_.terrain?0:_.transform._pitch):1,u_device_pixel_ratio:o.exported.devicePixelRatio,u_is_halo:+D}),Ty=(m,l,h,y,_,w,C,R,P,z,D,q,te,ce,fe,he)=>o.extend(vd(m,l,h,y,_,w,C,R,!0,P,!0,D,q,te,ce,fe,he),{u_texsize_icon:z,u_texture_icon:1}),Jf=(m,l,h)=>({u_matrix:m,u_opacity:l,u_color:h}),Rx=(m,l,h,y,_)=>o.extend(function(w,C,R){const P=C.imageManager.getPattern(w.toString()),{width:z,height:D}=C.imageManager.getPixelSize(),q=Math.pow(2,R.tileID.overscaledZ),te=R.tileSize*Math.pow(2,C.transform.tileZoom)/q,ce=te*(R.tileID.canonical.x+R.tileID.wrap*q),fe=te*R.tileID.canonical.y;return{u_image:0,u_pattern_tl:P.tl,u_pattern_br:P.br,u_texsize:[z,D],u_pattern_size:P.displaySize,u_tile_units_to_pixels:1/Ve(R,1,C.transform.tileZoom),u_pixel_coord_upper:[ce>>16,fe>>16],u_pixel_coord_lower:[65535&ce,65535&fe]}}(y,h,_),{u_matrix:m,u_opacity:l}),ep={fillExtrusion:m=>({u_matrix:new o.UniformMatrix4f(m),u_lightpos:new o.Uniform3f(m),u_lightintensity:new o.Uniform1f(m),u_lightcolor:new o.Uniform3f(m),u_vertical_gradient:new o.Uniform1f(m),u_opacity:new o.Uniform1f(m),u_edge_radius:new o.Uniform1f(m),u_ao:new o.Uniform2f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_up_dir:new o.Uniform3f(m),u_height_lift:new o.Uniform1f(m)}),fillExtrusionPattern:m=>({u_matrix:new o.UniformMatrix4f(m),u_lightpos:new o.Uniform3f(m),u_lightintensity:new o.Uniform1f(m),u_lightcolor:new o.Uniform3f(m),u_vertical_gradient:new o.Uniform1f(m),u_height_factor:new o.Uniform1f(m),u_edge_radius:new o.Uniform1f(m),u_ao:new o.Uniform2f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_up_dir:new o.Uniform3f(m),u_height_lift:new o.Uniform1f(m),u_image:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_pixel_coord_upper:new o.Uniform2f(m),u_pixel_coord_lower:new o.Uniform2f(m),u_tile_units_to_pixels:new o.Uniform1f(m),u_opacity:new o.Uniform1f(m)}),fill:m=>({u_matrix:new o.UniformMatrix4f(m)}),fillPattern:m=>({u_matrix:new o.UniformMatrix4f(m),u_image:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_pixel_coord_upper:new o.Uniform2f(m),u_pixel_coord_lower:new o.Uniform2f(m),u_tile_units_to_pixels:new o.Uniform1f(m)}),fillOutline:m=>({u_matrix:new o.UniformMatrix4f(m),u_world:new o.Uniform2f(m)}),fillOutlinePattern:m=>({u_matrix:new o.UniformMatrix4f(m),u_world:new o.Uniform2f(m),u_image:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_pixel_coord_upper:new o.Uniform2f(m),u_pixel_coord_lower:new o.Uniform2f(m),u_tile_units_to_pixels:new o.Uniform1f(m)}),circle:m=>({u_camera_to_center_distance:new o.Uniform1f(m),u_extrude_scale:new o.UniformMatrix2f(m),u_device_pixel_ratio:new o.Uniform1f(m),u_matrix:new o.UniformMatrix4f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_up_dir:new o.Uniform3f(m)}),collisionBox:m=>({u_matrix:new o.UniformMatrix4f(m),u_camera_to_center_distance:new o.Uniform1f(m),u_extrude_scale:new o.Uniform2f(m)}),collisionCircle:m=>({u_matrix:new o.UniformMatrix4f(m),u_inv_matrix:new o.UniformMatrix4f(m),u_camera_to_center_distance:new o.Uniform1f(m),u_viewport_size:new o.Uniform2f(m)}),debug:m=>({u_color:new o.UniformColor(m),u_matrix:new o.UniformMatrix4f(m),u_overlay:new o.Uniform1i(m),u_overlay_scale:new o.Uniform1f(m)}),clippingMask:m=>({u_matrix:new o.UniformMatrix4f(m)}),heatmap:m=>({u_extrude_scale:new o.Uniform1f(m),u_intensity:new o.Uniform1f(m),u_matrix:new o.UniformMatrix4f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_up_dir:new o.Uniform3f(m)}),heatmapTexture:m=>({u_image:new o.Uniform1i(m),u_color_ramp:new o.Uniform1i(m),u_opacity:new o.Uniform1f(m)}),hillshade:m=>({u_matrix:new o.UniformMatrix4f(m),u_image:new o.Uniform1i(m),u_latrange:new o.Uniform2f(m),u_light:new o.Uniform2f(m),u_shadow:new o.UniformColor(m),u_highlight:new o.UniformColor(m),u_accent:new o.UniformColor(m)}),hillshadePrepare:m=>({u_matrix:new o.UniformMatrix4f(m),u_image:new o.Uniform1i(m),u_dimension:new o.Uniform2f(m),u_zoom:new o.Uniform1f(m),u_unpack:new o.Uniform4f(m)}),line:m=>({u_matrix:new o.UniformMatrix4f(m),u_pixels_to_tile_units:new o.UniformMatrix2f(m),u_device_pixel_ratio:new o.Uniform1f(m),u_units_to_pixels:new o.Uniform2f(m),u_dash_image:new o.Uniform1i(m),u_gradient_image:new o.Uniform1i(m),u_image_height:new o.Uniform1f(m),u_texsize:new o.Uniform2f(m),u_tile_units_to_pixels:new o.Uniform1f(m),u_alpha_discard_threshold:new o.Uniform1f(m),u_trim_offset:new o.Uniform2f(m)}),linePattern:m=>({u_matrix:new o.UniformMatrix4f(m),u_texsize:new o.Uniform2f(m),u_pixels_to_tile_units:new o.UniformMatrix2f(m),u_device_pixel_ratio:new o.Uniform1f(m),u_image:new o.Uniform1i(m),u_units_to_pixels:new o.Uniform2f(m),u_tile_units_to_pixels:new o.Uniform1f(m),u_alpha_discard_threshold:new o.Uniform1f(m)}),raster:m=>({u_matrix:new o.UniformMatrix4f(m),u_tl_parent:new o.Uniform2f(m),u_scale_parent:new o.Uniform1f(m),u_fade_t:new o.Uniform1f(m),u_opacity:new o.Uniform1f(m),u_image0:new o.Uniform1i(m),u_image1:new o.Uniform1i(m),u_brightness_low:new o.Uniform1f(m),u_brightness_high:new o.Uniform1f(m),u_saturation_factor:new o.Uniform1f(m),u_contrast_factor:new o.Uniform1f(m),u_spin_weights:new o.Uniform3f(m),u_perspective_transform:new o.Uniform2f(m)}),symbolIcon:m=>({u_is_size_zoom_constant:new o.Uniform1i(m),u_is_size_feature_constant:new o.Uniform1i(m),u_size_t:new o.Uniform1f(m),u_size:new o.Uniform1f(m),u_camera_to_center_distance:new o.Uniform1f(m),u_rotate_symbol:new o.Uniform1i(m),u_aspect_ratio:new o.Uniform1f(m),u_fade_change:new o.Uniform1f(m),u_matrix:new o.UniformMatrix4f(m),u_label_plane_matrix:new o.UniformMatrix4f(m),u_coord_matrix:new o.UniformMatrix4f(m),u_is_text:new o.Uniform1i(m),u_pitch_with_map:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_camera_forward:new o.Uniform3f(m),u_tile_matrix:new o.UniformMatrix4f(m),u_up_vector:new o.Uniform3f(m),u_ecef_origin:new o.Uniform3f(m),u_texture:new o.Uniform1i(m)}),symbolSDF:m=>({u_is_size_zoom_constant:new o.Uniform1i(m),u_is_size_feature_constant:new o.Uniform1i(m),u_size_t:new o.Uniform1f(m),u_size:new o.Uniform1f(m),u_camera_to_center_distance:new o.Uniform1f(m),u_rotate_symbol:new o.Uniform1i(m),u_aspect_ratio:new o.Uniform1f(m),u_fade_change:new o.Uniform1f(m),u_matrix:new o.UniformMatrix4f(m),u_label_plane_matrix:new o.UniformMatrix4f(m),u_coord_matrix:new o.UniformMatrix4f(m),u_is_text:new o.Uniform1i(m),u_pitch_with_map:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_texture:new o.Uniform1i(m),u_gamma_scale:new o.Uniform1f(m),u_device_pixel_ratio:new o.Uniform1f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_camera_forward:new o.Uniform3f(m),u_tile_matrix:new o.UniformMatrix4f(m),u_up_vector:new o.Uniform3f(m),u_ecef_origin:new o.Uniform3f(m),u_is_halo:new o.Uniform1i(m)}),symbolTextAndIcon:m=>({u_is_size_zoom_constant:new o.Uniform1i(m),u_is_size_feature_constant:new o.Uniform1i(m),u_size_t:new o.Uniform1f(m),u_size:new o.Uniform1f(m),u_camera_to_center_distance:new o.Uniform1f(m),u_rotate_symbol:new o.Uniform1i(m),u_aspect_ratio:new o.Uniform1f(m),u_fade_change:new o.Uniform1f(m),u_matrix:new o.UniformMatrix4f(m),u_label_plane_matrix:new o.UniformMatrix4f(m),u_coord_matrix:new o.UniformMatrix4f(m),u_is_text:new o.Uniform1i(m),u_pitch_with_map:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_texsize_icon:new o.Uniform2f(m),u_texture:new o.Uniform1i(m),u_texture_icon:new o.Uniform1i(m),u_gamma_scale:new o.Uniform1f(m),u_device_pixel_ratio:new o.Uniform1f(m),u_is_halo:new o.Uniform1i(m)}),background:m=>({u_matrix:new o.UniformMatrix4f(m),u_opacity:new o.Uniform1f(m),u_color:new o.UniformColor(m)}),backgroundPattern:m=>({u_matrix:new o.UniformMatrix4f(m),u_opacity:new o.Uniform1f(m),u_image:new o.Uniform1i(m),u_pattern_tl:new o.Uniform2f(m),u_pattern_br:new o.Uniform2f(m),u_texsize:new o.Uniform2f(m),u_pattern_size:new o.Uniform2f(m),u_pixel_coord_upper:new o.Uniform2f(m),u_pixel_coord_lower:new o.Uniform2f(m),u_tile_units_to_pixels:new o.Uniform1f(m)}),terrainRaster:Uf,terrainDepth:Uf,skybox:m=>({u_matrix:new o.UniformMatrix4f(m),u_sun_direction:new o.Uniform3f(m),u_cubemap:new o.Uniform1i(m),u_opacity:new o.Uniform1f(m),u_temporal_offset:new o.Uniform1f(m)}),skyboxGradient:m=>({u_matrix:new o.UniformMatrix4f(m),u_color_ramp:new o.Uniform1i(m),u_center_direction:new o.Uniform3f(m),u_radius:new o.Uniform1f(m),u_opacity:new o.Uniform1f(m),u_temporal_offset:new o.Uniform1f(m)}),skyboxCapture:m=>({u_matrix_3f:new o.UniformMatrix3f(m),u_sun_direction:new o.Uniform3f(m),u_sun_intensity:new o.Uniform1f(m),u_color_tint_r:new o.Uniform4f(m),u_color_tint_m:new o.Uniform4f(m),u_luminance:new o.Uniform1f(m)}),globeRaster:m=>({u_proj_matrix:new o.UniformMatrix4f(m),u_globe_matrix:new o.UniformMatrix4f(m),u_normalize_matrix:new o.UniformMatrix4f(m),u_merc_matrix:new o.UniformMatrix4f(m),u_zoom_transition:new o.Uniform1f(m),u_merc_center:new o.Uniform2f(m),u_image0:new o.Uniform1i(m),u_grid_matrix:new o.UniformMatrix3f(m),u_skirt_height:new o.Uniform1f(m),u_frustum_tl:new o.Uniform3f(m),u_frustum_tr:new o.Uniform3f(m),u_frustum_br:new o.Uniform3f(m),u_frustum_bl:new o.Uniform3f(m),u_globe_pos:new o.Uniform3f(m),u_globe_radius:new o.Uniform1f(m),u_viewport:new o.Uniform2f(m)}),globeAtmosphere:m=>({u_frustum_tl:new o.Uniform3f(m),u_frustum_tr:new o.Uniform3f(m),u_frustum_br:new o.Uniform3f(m),u_frustum_bl:new o.Uniform3f(m),u_horizon:new o.Uniform1f(m),u_transition:new o.Uniform1f(m),u_fadeout_range:new o.Uniform1f(m),u_color:new o.Uniform4f(m),u_high_color:new o.Uniform4f(m),u_space_color:new o.Uniform4f(m),u_star_intensity:new o.Uniform1f(m),u_star_density:new o.Uniform1f(m),u_star_size:new o.Uniform1f(m),u_temporal_offset:new o.Uniform1f(m),u_horizon_angle:new o.Uniform1f(m),u_rotation_matrix:new o.UniformMatrix4f(m)})};let _d;function Yc(m,l,h,y,_,w,C){const R=m.context,P=R.gl,z=m.transform,D=m.useProgram("collisionBox"),q=[];let te=0,ce=0;for(let xe=0;xe<y.length;xe++){const Oe=y[xe],Fe=l.getTile(Oe),ze=Fe.getBucket(h);if(!ze)continue;const He=bo(Oe,ze,z);let qe=He;_[0]===0&&_[1]===0||(qe=m.translatePosMatrix(He,Fe,_,w));const it=C?ze.textCollisionBox:ze.iconCollisionBox,Pt=ze.collisionCircleArray;if(Pt.length>0){const et=o.create(),vt=qe;o.mul(et,ze.placementInvProjMatrix,z.glCoordMatrix),o.mul(et,et,ze.placementViewportMatrix),q.push({circleArray:Pt,circleOffset:ce,transform:vt,invTransform:et,projection:ze.getProjection()}),te+=Pt.length/4,ce=te}it&&(m.terrain&&m.terrain.setupElevationDraw(Fe,D),D.draw(R,P.LINES,o.DepthMode.disabled,o.StencilMode.disabled,m.colorModeForRenderPass(),o.CullFaceMode.disabled,Xf(qe,z,Fe,ze.getProjection()),h.id,it.layoutVertexBuffer,it.indexBuffer,it.segments,null,z.zoom,null,[it.collisionVertexBuffer,it.collisionVertexBufferExt]))}if(!C||!q.length)return;const fe=m.useProgram("collisionCircle"),he=new o.StructArrayLayout2f1f2i16;he.resize(4*te),he._trim();let me=0;for(const xe of q)for(let Oe=0;Oe<xe.circleArray.length/4;Oe++){const Fe=4*Oe,ze=xe.circleArray[Fe+0],He=xe.circleArray[Fe+1],qe=xe.circleArray[Fe+2],it=xe.circleArray[Fe+3];he.emplace(me++,ze,He,qe,it,0),he.emplace(me++,ze,He,qe,it,1),he.emplace(me++,ze,He,qe,it,2),he.emplace(me++,ze,He,qe,it,3)}(!_d||_d.length<2*te)&&(_d=function(xe){const Oe=2*xe,Fe=new o.StructArrayLayout3ui6;Fe.resize(Oe),Fe._trim();for(let ze=0;ze<Oe;ze++){const He=6*ze;Fe.uint16[He+0]=4*ze+0,Fe.uint16[He+1]=4*ze+1,Fe.uint16[He+2]=4*ze+2,Fe.uint16[He+3]=4*ze+2,Fe.uint16[He+4]=4*ze+3,Fe.uint16[He+5]=4*ze+0}return Fe}(te));const H=R.createIndexBuffer(_d,!0),le=R.createVertexBuffer(he,o.collisionCircleLayout.members,!0);for(const xe of q){const Oe={u_matrix:xe.transform,u_inv_matrix:xe.invTransform,u_camera_to_center_distance:(_e=z).getCameraToCenterDistance(xe.projection),u_viewport_size:[_e.width,_e.height]};fe.draw(R,P.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,m.colorModeForRenderPass(),o.CullFaceMode.disabled,Oe,h.id,le,H,o.SegmentVector.simpleSegment(0,2*xe.circleOffset,xe.circleArray.length,xe.circleArray.length/2),null,z.zoom)}var _e;le.destroy(),H.destroy()}const Cy=o.create();function tp({width:m,height:l,anchor:h,textOffset:y,textScale:_},w){const{horizontalAlign:C,verticalAlign:R}=o.getAnchorAlignment(h),P=-(C-.5)*m,z=-(R-.5)*l,D=o.evaluateVariableOffset(h,y);return new o.Point((P/_+D[0])*w,(z/_+D[1])*w)}function Mx(m,l,h,y,_,w,C,R,P,z,D){const q=m.text.placedSymbolArray,te=m.text.dynamicLayoutVertexArray,ce=m.icon.dynamicLayoutVertexArray,fe={},he=m.getProjection(),me=Or(R,he,w),H=w.elevation,le=he.upVectorScale(R.canonical,w.center.lat,w.worldSize).metersToTile;te.clear();for(let _e=0;_e<q.length;_e++){const xe=q.get(_e),{tileAnchorX:Oe,tileAnchorY:Fe,numGlyphs:ze}=xe,He=xe.hidden||!xe.crossTileID||m.allowVerticalPlacement&&!xe.placedOrientation?null:y[xe.crossTileID];if(He){let qe=0,it=0,Pt=0;if(H){const Ot=H?H.getAtTileOffset(R,Oe,Fe):0,[un,Tn,en]=he.upVector(R.canonical,Oe,Fe);qe=Ot*un*le,it=Ot*Tn*le,Pt=Ot*en*le}let[et,vt,st,kt]=bi(xe.projectedAnchorX+qe,xe.projectedAnchorY+it,xe.projectedAnchorZ+Pt,h?me:C);const rt=hy(w.getCameraToCenterDistance(he),kt);let yt=_.evaluateSizeForFeature(m.textSizeData,z,xe)*rt/o.ONE_EM;h&&(yt*=m.tilePixelRatio/P);const Lt=tp(He,yt);h?({x:et,y:vt,z:st}=he.projectTilePoint(Oe+Lt.x,Fe+Lt.y,R.canonical),[et,vt,st]=bi(et+qe,vt+it,st+Pt,C)):(l&&Lt._rotate(-w.angle),et+=Lt.x,vt+=Lt.y,st=0);const wt=m.allowVerticalPlacement&&xe.placedOrientation===o.WritingMode.vertical?Math.PI/2:0;for(let Ot=0;Ot<ze;Ot++)o.addDynamicAttributes(te,et,vt,st,wt);D&&xe.associatedIconIndex>=0&&(fe[xe.associatedIconIndex]={x:et,y:vt,z:st,angle:wt})}else Uo(ze,te)}if(D){ce.clear();const _e=m.icon.placedSymbolArray;for(let xe=0;xe<_e.length;xe++){const Oe=_e.get(xe),{numGlyphs:Fe}=Oe,ze=fe[xe];if(Oe.hidden||!ze)Uo(Fe,ce);else{const{x:He,y:qe,z:it,angle:Pt}=ze;for(let et=0;et<Fe;et++)o.addDynamicAttributes(ce,He,qe,it,Pt)}}m.icon.dynamicLayoutVertexBuffer.updateData(ce)}m.text.dynamicLayoutVertexBuffer.updateData(te)}function np(m,l,h){return h.iconsInText&&l?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function Ry(m,l,h,y,_,w,C,R,P,z,D,q){const te=m.context,ce=te.gl,fe=m.transform,he=R==="map",me=P==="map",H=he&&h.layout.get("symbol-placement")!=="point",le=he&&!me&&!H,_e=h.layout.get("symbol-sort-key").constantOr(1)!==void 0;let xe=!1;const Oe=m.depthModeForSublayer(0,o.DepthMode.ReadOnly),Fe=[o.mercatorXfromLng(fe.center.lng),o.mercatorYfromLat(fe.center.lat)],ze=h.layout.get("text-variable-anchor"),He=fe.projection.name==="globe",qe=[],it=[0,-1,0];let Pt=it;!He&&!fe.mercatorFromTransition||he||(Pt=function(et){const vt=et._camera.getWorldToCamera(et.worldSize,1),st=o.multiply([],vt,et.globeMatrix);o.invert(st,st);const kt=[0,0,0],rt=[0,1,0,0];return o.transformMat4$1(rt,rt,st),kt[0]=rt[0],kt[1]=rt[1],kt[2]=rt[2],o.normalize(kt,kt),kt}(fe));for(const et of y){const vt=l.getTile(et),st=vt.getBucket(h);if(!st||st.projection.name==="mercator"&&He)continue;const kt=_?st.text:st.icon;if(!kt||st.fullyClipped||!kt.segments.get().length)continue;const rt=kt.programConfigurations.get(h.id),yt=_||st.sdfIcons,Lt=_?st.textSizeData:st.iconSizeData,wt=me||fe.pitch!==0,Ot=o.evaluateSizeForZoom(Lt,fe.zoom);let un,Tn,en,yn,Fn=[0,0],On=null;if(_)Tn=vt.glyphAtlasTexture,en=ce.LINEAR,un=vt.glyphAtlasTexture.size,st.iconsInText&&(Fn=vt.imageAtlasTexture.size,On=vt.imageAtlasTexture,yn=wt||m.options.rotating||m.options.zooming||Lt.kind==="composite"||Lt.kind==="camera"?ce.LINEAR:ce.NEAREST);else{const Oa=h.layout.get("icon-size").constantOr(0)!==1||st.iconsNeedLinear;Tn=vt.imageAtlasTexture,en=yt||m.options.rotating||m.options.zooming||Oa||wt?ce.LINEAR:ce.NEAREST,un=vt.imageAtlasTexture.size}const cn=st.projection.name==="globe",or=cn?Pt:it,dr=cn?o.globeToMercatorTransition(fe.zoom):0,hr=Or(et,st.getProjection(),fe),fr=fe.calculatePixelsToTileUnitsMatrix(vt),Bi=ft(hr,vt.tileID.canonical,me,he,fe,st.getProjection(),fr),Si=m.terrain&&me&&H?o.invert(o.create(),Bi):Cy,To=ni(hr,vt.tileID.canonical,me,he,fe,st.getProjection(),fr),la=ze&&st.hasTextData(),Dr=h.layout.get("icon-text-fit")!=="none"&&la&&st.hasIconData();if(H){const Oa=fe.elevation,rs=Oa?Oa.getAtTileOffsetFunc(et,fe.center.lat,fe.worldSize,st.getProjection()):null,zs=Ca(hr,vt.tileID.canonical,me,he,fe,st.getProjection(),fr);Mf(st,hr,m,_,zs,To,me,z,rs,et)}const pr=H||_&&ze||Dr,Qn=m.translatePosMatrix(hr,vt,w,C),ri=pr?Cy:Bi,Wi=m.translatePosMatrix(To,vt,w,C,!0),kr=st.getProjection().createInversionMatrix(fe,et.canonical),eo=[];m.terrainRenderModeElevated()&&me&&eo.push("PITCH_WITH_MAP_TERRAIN"),cn&&eo.push("PROJECTION_GLOBE_VIEW"),pr&&eo.push("PROJECTED_POS_ON_VIEWPORT");const Dd=yt&&h.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ds;Ds=yt?st.iconsInText?Ty(Lt.kind,Ot,le,me,m,Qn,ri,Wi,un,Fn,et,dr,Fe,kr,or,st.getProjection()):vd(Lt.kind,Ot,le,me,m,Qn,ri,Wi,_,un,!0,et,dr,Fe,kr,or,st.getProjection()):Qf(Lt.kind,Ot,le,me,m,Qn,ri,Wi,_,un,et,dr,Fe,kr,or,st.getProjection());const lu={program:m.useProgram(np(yt,_,st),rt,eo),buffers:kt,uniformValues:Ds,atlasTexture:Tn,atlasTextureIcon:On,atlasInterpolation:en,atlasInterpolationIcon:yn,isSDF:yt,hasHalo:Dd,tile:vt,labelPlaneMatrixInv:Si};if(_e&&st.canOverlap){xe=!0;const Oa=kt.segments.get();for(const rs of Oa)qe.push({segments:new o.SegmentVector([rs]),sortKey:rs.sortKey,state:lu})}else qe.push({segments:kt.segments,sortKey:0,state:lu})}xe&&qe.sort((et,vt)=>et.sortKey-vt.sortKey);for(const et of qe){const vt=et.state;if(m.terrain&&m.terrain.setupElevationDraw(vt.tile,vt.program,{useDepthForOcclusion:!He,labelPlaneMatrixInv:vt.labelPlaneMatrixInv}),te.activeTexture.set(ce.TEXTURE0),vt.atlasTexture.bind(vt.atlasInterpolation,ce.CLAMP_TO_EDGE),vt.atlasTextureIcon&&(te.activeTexture.set(ce.TEXTURE1),vt.atlasTextureIcon&&vt.atlasTextureIcon.bind(vt.atlasInterpolationIcon,ce.CLAMP_TO_EDGE)),vt.isSDF){const st=vt.uniformValues;vt.hasHalo&&(st.u_is_halo=1,Qc(vt.buffers,et.segments,h,m,vt.program,Oe,D,q,st)),st.u_is_halo=0}Qc(vt.buffers,et.segments,h,m,vt.program,Oe,D,q,vt.uniformValues)}}function Qc(m,l,h,y,_,w,C,R,P){const z=y.context,D=[m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer,m.globeExtVertexBuffer];_.draw(z,z.gl.TRIANGLES,w,C,R,o.CullFaceMode.disabled,P,h.id,m.layoutVertexBuffer,m.indexBuffer,l,h.paint,y.transform.zoom,m.programConfigurations.get(h.id),D)}function My(m,l,h,y,_,w,C){const R=m.context.gl,P=h.paint.get("fill-pattern"),z=P&&P.constantOr(1);let D,q,te,ce,fe;C?(q=z&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",D=R.LINES):(q=z?"fillPattern":"fill",D=R.TRIANGLES);for(const he of y){const me=l.getTile(he);if(z&&!me.patternsLoaded())continue;const H=me.getBucket(h);if(!H)continue;m.prepareDrawTile();const le=H.programConfigurations.get(h.id),_e=m.useProgram(q,le);z&&(m.context.activeTexture.set(R.TEXTURE0),me.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),le.updatePaintBuffers());const xe=P.constantOr(null);if(xe&&me.imageAtlas){const Fe=me.imageAtlas.patternPositions[xe.toString()];Fe&&le.setConstantPatternPositions(Fe)}const Oe=m.translatePosMatrix(he.projMatrix,me,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));if(C){ce=H.indexBuffer2,fe=H.segments2;const Fe=m.terrain&&m.terrain.renderingToTexture?m.terrain.drapeBufferSize:[R.drawingBufferWidth,R.drawingBufferHeight];te=q==="fillOutlinePattern"&&z?Ex(Oe,m,me,Fe):Sx(Oe,Fe)}else ce=H.indexBuffer,fe=H.segments,te=z?qf(Oe,m,me):Ps(Oe);m.prepareDrawProgram(m.context,_e,he.toUnwrapped()),_e.draw(m.context,D,_,m.stencilModeForClipping(he),w,o.CullFaceMode.disabled,te,h.id,H.layoutVertexBuffer,ce,fe,h.paint,m.transform.zoom,le)}}function xd(m,l,h,y,_,w,C){const R=m.context,P=R.gl,z=m.transform,D=h.paint.get("fill-extrusion-pattern"),q=D.constantOr(1),te=h.paint.get("fill-extrusion-opacity"),ce=[h.paint.get("fill-extrusion-ambient-occlusion-intensity"),h.paint.get("fill-extrusion-ambient-occlusion-radius")],fe=h.layout.get("fill-extrusion-edge-radius"),he=fe>0&&!h.paint.get("fill-extrusion-rounded-roof"),me=he?0:fe,H=z.projection.name==="globe"?o.fillExtrusionHeightLift():0,le=z.projection.name==="globe",_e=le?o.globeToMercatorTransition(z.zoom):0,xe=[o.mercatorXfromLng(z.center.lng),o.mercatorYfromLat(z.center.lat)],Oe=[];le&&Oe.push("PROJECTION_GLOBE_VIEW"),ce[0]>0&&Oe.push("FAUX_AO"),he&&Oe.push("ZERO_ROOF_RADIUS");for(const Fe of y){const ze=l.getTile(Fe),He=ze.getBucket(h);if(!He||He.projection.name!==z.projection.name)continue;const qe=He.programConfigurations.get(h.id),it=m.useProgram(q?"fillExtrusionPattern":"fillExtrusion",qe,Oe);if(m.terrain){const yt=m.terrain;if(m.style.terrainSetForDrapingOnly())yt.setupElevationDraw(ze,it,{useMeterToDem:!0});else{if(!He.enableTerrain)continue;if(yt.setupElevationDraw(ze,it,{useMeterToDem:!0}),Ay(R,l,Fe,He,h,yt),!He.centroidVertexBuffer){const Lt=it.attributes.a_centroid_pos;Lt!==void 0&&P.vertexAttrib2f(Lt,0,0)}}}q&&(m.context.activeTexture.set(P.TEXTURE0),ze.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),qe.updatePaintBuffers());const Pt=D.constantOr(null);if(Pt&&ze.imageAtlas){const yt=ze.imageAtlas.patternPositions[Pt.toString()];yt&&qe.setConstantPatternPositions(yt)}const et=m.translatePosMatrix(Fe.projMatrix,ze,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),vt=z.projection.createInversionMatrix(z,Fe.canonical),st=h.paint.get("fill-extrusion-vertical-gradient"),kt=q?wy(et,m,st,te,ce,me,Fe,ze,H,_e,xe,vt):Wf(et,m,st,te,ce,me,Fe,H,_e,xe,vt);m.prepareDrawProgram(R,it,Fe.toUnwrapped());const rt=[];m.terrain&&rt.push(He.centroidVertexBuffer),le&&rt.push(He.layoutVertexExtBuffer),it.draw(R,R.gl.TRIANGLES,_,w,C,o.CullFaceMode.backCCW,kt,h.id,He.layoutVertexBuffer,He.indexBuffer,He.segments,h.paint,m.transform.zoom,qe,rt)}}function Ay(m,l,h,y,_,w){const C=[H=>{let le=H.canonical.x-1,_e=H.wrap;return le<0&&(le=(1<<H.canonical.z)-1,_e--),new o.OverscaledTileID(H.overscaledZ,_e,H.canonical.z,le,H.canonical.y)},H=>{let le=H.canonical.x+1,_e=H.wrap;return le===1<<H.canonical.z&&(le=0,_e++),new o.OverscaledTileID(H.overscaledZ,_e,H.canonical.z,le,H.canonical.y)},H=>new o.OverscaledTileID(H.overscaledZ,H.wrap,H.canonical.z,H.canonical.x,(H.canonical.y===0?1<<H.canonical.z:H.canonical.y)-1),H=>new o.OverscaledTileID(H.overscaledZ,H.wrap,H.canonical.z,H.canonical.x,H.canonical.y===(1<<H.canonical.z)-1?0:H.canonical.y+1)],R=H=>{const le=l.getSource().minzoom,_e=Oe=>{const Fe=l.getTileByID(Oe);if(Fe&&Fe.hasData())return Fe.getBucket(_)},xe=[0,-1,1];for(const Oe of xe){if(H.overscaledZ+Oe<le)continue;const Fe=_e(H.calculateScaledKey(H.overscaledZ+Oe));if(Fe)return Fe}},P=[0,0,0],z=(H,le)=>(P[0]=Math.min(H.min.y,le.min.y),P[1]=Math.max(H.max.y,le.max.y),P[2]=o.EXTENT-le.min.x>H.max.x?le.min.x-o.EXTENT:H.max.x,P),D=(H,le)=>(P[0]=Math.min(H.min.x,le.min.x),P[1]=Math.max(H.max.x,le.max.x),P[2]=o.EXTENT-le.min.y>H.max.y?le.min.y-o.EXTENT:H.max.y,P),q=[(H,le)=>z(H,le),(H,le)=>z(le,H),(H,le)=>D(H,le),(H,le)=>D(le,H)],te=new o.Point(0,0);let ce,fe,he;const me=(H,le,_e,xe,Oe)=>{const Fe=[[xe?_e:H,xe?H:_e,0],[xe?_e:le,xe?le:_e,0]],ze=Oe<0?o.EXTENT+Oe:Oe,He=[xe?ze:(H+le)/2,xe?(H+le)/2:ze,0];return _e===0&&Oe<0||_e!==0&&Oe>0?w.getForTilePoints(he,[He],!0,fe):Fe.push(He),w.getForTilePoints(h,Fe,!0,ce),Math.max(Fe[0][2],Fe[1][2],He[2])/w.exaggeration()};for(let H=0;H<4;H++){const le=(H<2?1:5)-H,_e=y.borders[H];if(_e.length===0)continue;const xe=he=C[H](h),Oe=R(xe);if(!(Oe&&Oe instanceof o.FillExtrusionBucket&&Oe.enableTerrain)||y.borderDoneWithNeighborZ[H]===Oe.canonical.z&&Oe.borderDoneWithNeighborZ[le]===y.canonical.z||(fe=w.findDEMTileFor(xe),!fe||!fe.dem))continue;if(!ce){const qe=w.findDEMTileFor(h);if(!qe||!qe.dem)return;ce=qe}const Fe=Oe.borders[le];let ze=0;const He=Oe.borderDoneWithNeighborZ[le]!==y.canonical.z;if(y.canonical.z===Oe.canonical.z){for(let qe=0;qe<_e.length;qe++){const it=y.featuresOnBorder[_e[qe]],Pt=it.borders[H];let et;for(;ze<Fe.length&&(et=Oe.featuresOnBorder[Fe[ze]],!(et.borders[le][1]>Pt[0]+3));)He&&Oe.encodeCentroid(void 0,et,!1),ze++;if(et&&ze<Fe.length){const vt=ze;let st=0;for(;!(et.borders[le][0]>Pt[1]-3)&&(st++,++ze!==Fe.length);)et=Oe.featuresOnBorder[Fe[ze]];if(et=Oe.featuresOnBorder[Fe[vt]],it.intersectsCount()>1||et.intersectsCount()>1||st!==1){st!==1&&(ze=vt),y.encodeCentroid(void 0,it,!1),He&&Oe.encodeCentroid(void 0,et,!1);continue}const kt=q[H](it,et),rt=H%2?o.EXTENT-1:0;te.x=me(kt[0],Math.min(o.EXTENT-1,kt[1]),rt,H<2,kt[2]),te.y=0,y.encodeCentroid(te,it,!1),He&&Oe.encodeCentroid(te,et,!1)}else y.encodeCentroid(void 0,it,!1)}y.borderDoneWithNeighborZ[H]=Oe.canonical.z,y.needsCentroidUpdate=!0,He&&(Oe.borderDoneWithNeighborZ[le]=y.canonical.z,Oe.needsCentroidUpdate=!0)}else{for(const qe of _e)y.encodeCentroid(void 0,y.featuresOnBorder[qe],!1);if(He){for(const qe of Fe)Oe.encodeCentroid(void 0,Oe.featuresOnBorder[qe],!1);Oe.borderDoneWithNeighborZ[le]=y.canonical.z,Oe.needsCentroidUpdate=!0}y.borderDoneWithNeighborZ[H]=Oe.canonical.z,y.needsCentroidUpdate=!0}}(y.needsCentroidUpdate||!y.centroidVertexBuffer&&y.centroidVertexArray.length!==0)&&y.uploadCentroid(m)}const El=new o.Color(1,0,0,1),Ax=new o.Color(0,1,0,1),kx=new o.Color(0,0,1,1),Px=new o.Color(1,0,1,1),Ix=new o.Color(0,1,1,1);function Lx(m,l,h){const y=m.context,_=m.transform,w=y.gl,C=_.projection.name==="globe",R=C?["PROJECTION_GLOBE_VIEW"]:null;let P=h.projMatrix;if(C&&o.globeToMercatorTransition(_.zoom)>0){const it=o.transitionTileAABBinECEF(h.canonical,_),Pt=o.globeDenormalizeECEF(it);P=o.multiply(new Float32Array(16),_.globeMatrix,Pt),o.multiply(P,_.projMatrix,P)}const z=m.useProgram("debug",null,R),D=l.getTileByID(h.key);m.terrain&&m.terrain.setupElevationDraw(D,z);const q=o.DepthMode.disabled,te=o.StencilMode.disabled,ce=m.colorModeForRenderPass(),fe="$debug";y.activeTexture.set(w.TEXTURE0),m.emptyTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE),C?D._makeGlobeTileDebugBuffers(m.context,_):D._makeDebugTileBoundsBuffers(m.context,_.projection);const he=D._tileDebugBuffer||m.debugBuffer,me=D._tileDebugIndexBuffer||m.debugIndexBuffer,H=D._tileDebugSegments||m.debugSegments;z.draw(y,w.LINE_STRIP,q,te,ce,o.CullFaceMode.disabled,gd(P,o.Color.red),fe,he,me,H,null,null,null,[D._globeTileDebugBorderBuffer]);const le=D.latestRawTileData,_e=Math.floor((le&&le.byteLength||0)/1024),xe=l.getTile(h).tileSize,Oe=512/Math.min(xe,512)*(h.overscaledZ/_.zoom)*.5;let Fe=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(Fe+=` => ${h.overscaledZ}`),Fe+=` ${_e}kb`,function(it,Pt){it.initDebugOverlayCanvas();const et=it.debugOverlayCanvas,vt=it.context.gl,st=it.debugOverlayCanvas.getContext("2d");st.clearRect(0,0,et.width,et.height),st.shadowColor="white",st.shadowBlur=2,st.lineWidth=1.5,st.strokeStyle="white",st.textBaseline="top",st.font="bold 36px Open Sans, sans-serif",st.fillText(Pt,5,5),st.strokeText(Pt,5,5),it.debugOverlayTexture.update(et),it.debugOverlayTexture.bind(vt.LINEAR,vt.CLAMP_TO_EDGE)}(m,Fe);const ze=D._tileDebugTextBuffer||m.debugBuffer,He=D._tileDebugTextIndexBuffer||m.quadTriangleIndexBuffer,qe=D._tileDebugTextSegments||m.debugSegments;z.draw(y,w.TRIANGLES,q,te,o.ColorMode.alphaBlended,o.CullFaceMode.disabled,gd(P,o.Color.transparent,Oe),fe,ze,He,qe,null,null,null,[D._globeTileDebugTextBuffer])}function ky(m,l,h,y){Tl(m,0,l+h/2,m.transform.width,h,y)}function bd(m,l,h,y){Tl(m,l-h/2,0,h,m.transform.height,y)}function Tl(m,l,h,y,_,w){const C=m.context,R=C.gl;R.enable(R.SCISSOR_TEST),R.scissor(l*o.exported.devicePixelRatio,h*o.exported.devicePixelRatio,y*o.exported.devicePixelRatio,_*o.exported.devicePixelRatio),C.clear({color:w}),R.disable(R.SCISSOR_TEST)}const Py=o.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Iy}=Py;function Ia(m,l,h,y){m.emplaceBack(l,h,y)}class wd{constructor(l){this.vertexArray=new o.StructArrayLayout3f12,this.indices=new o.StructArrayLayout3ui6,Ia(this.vertexArray,-1,-1,1),Ia(this.vertexArray,1,-1,1),Ia(this.vertexArray,-1,1,1),Ia(this.vertexArray,1,1,1),Ia(this.vertexArray,-1,-1,-1),Ia(this.vertexArray,1,-1,-1),Ia(this.vertexArray,-1,1,-1),Ia(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=l.createVertexBuffer(this.vertexArray,Iy),this.indexBuffer=l.createIndexBuffer(this.indices),this.segment=o.SegmentVector.simpleSegment(0,0,36,12)}}function So(m,l,h,y,_,w){const C=m.gl,R=l.paint.get("sky-atmosphere-color"),P=l.paint.get("sky-atmosphere-halo-color"),z=l.paint.get("sky-atmosphere-sun-intensity"),D=((q,te,ce,fe,he)=>({u_matrix_3f:q,u_sun_direction:te,u_sun_intensity:ce,u_color_tint_r:[fe.r,fe.g,fe.b,fe.a],u_color_tint_m:[he.r,he.g,he.b,he.a],u_luminance:5e-5}))(o.fromMat4(o.create$1(),y),_,z,R,P);C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_CUBE_MAP_POSITIVE_X+w,l.skyboxTexture,0),h.draw(m,C.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.frontCW,D,"skyboxCapture",l.skyboxGeometry.vertexBuffer,l.skyboxGeometry.indexBuffer,l.skyboxGeometry.segment)}const Jc=o.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Ly{constructor(l){const h=new o.StructArrayLayout5f20;h.emplaceBack(-1,1,1,0,0),h.emplaceBack(1,1,1,1,0),h.emplaceBack(1,-1,1,1,1),h.emplaceBack(-1,-1,1,0,1);const y=new o.StructArrayLayout3ui6;y.emplaceBack(0,1,2),y.emplaceBack(2,3,0),this.vertexBuffer=l.createVertexBuffer(h,Jc.members),this.indexBuffer=l.createIndexBuffer(y),this.segments=o.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Is={symbol:function(m,l,h,y,_){if(m.renderPass!=="translucent")return;const w=o.StencilMode.disabled,C=m.colorModeForRenderPass();h.layout.get("text-variable-anchor")&&function(R,P,z,D,q,te,ce){const fe=P.transform,he=q==="map",me=te==="map";for(const H of R){const le=D.getTile(H),_e=le.getBucket(z);if(!_e||!_e.text||!_e.text.segments.get().length)continue;const xe=o.evaluateSizeForZoom(_e.textSizeData,fe.zoom),Oe=Or(H,_e.getProjection(),fe),Fe=fe.calculatePixelsToTileUnitsMatrix(le),ze=ft(Oe,le.tileID.canonical,me,he,fe,_e.getProjection(),Fe),He=z.layout.get("icon-text-fit")!=="none"&&_e.hasIconData();if(xe){const qe=Math.pow(2,fe.zoom-le.tileID.overscaledZ);Mx(_e,he,me,ce,o.symbolSize,fe,ze,H,qe,xe,He)}}}(y,m,h,l,h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),_),h.paint.get("icon-opacity").constantOr(1)!==0&&Ry(m,l,h,y,!1,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),h.layout.get("icon-rotation-alignment"),h.layout.get("icon-pitch-alignment"),h.layout.get("icon-keep-upright"),w,C),h.paint.get("text-opacity").constantOr(1)!==0&&Ry(m,l,h,y,!0,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),h.layout.get("text-keep-upright"),w,C),l.map.showCollisionBoxes&&(Yc(m,l,h,y,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),!0),Yc(m,l,h,y,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),!1))},circle:function(m,l,h,y){if(m.renderPass!=="translucent")return;const _=h.paint.get("circle-opacity"),w=h.paint.get("circle-stroke-width"),C=h.paint.get("circle-stroke-opacity"),R=h.layout.get("circle-sort-key").constantOr(1)!==void 0;if(_.constantOr(1)===0&&(w.constantOr(1)===0||C.constantOr(1)===0))return;const P=m.context,z=P.gl,D=m.transform,q=m.depthModeForSublayer(0,o.DepthMode.ReadOnly),te=o.StencilMode.disabled,ce=m.colorModeForRenderPass(),fe=D.projection.name==="globe",he=[o.mercatorXfromLng(D.center.lng),o.mercatorYfromLat(D.center.lat)],me=[];for(let le=0;le<y.length;le++){const _e=y[le],xe=l.getTile(_e),Oe=xe.getBucket(h);if(!Oe||Oe.projection.name!==D.projection.name)continue;const Fe=Oe.programConfigurations.get(h.id),ze=Zf(h);fe&&ze.push("PROJECTION_GLOBE_VIEW");const He=m.useProgram("circle",Fe,ze),qe=Oe.layoutVertexBuffer,it=Oe.globeExtVertexBuffer,Pt=Oe.indexBuffer,et=D.projection.createInversionMatrix(D,_e.canonical),vt={programConfiguration:Fe,program:He,layoutVertexBuffer:qe,globeExtVertexBuffer:it,indexBuffer:Pt,uniformValues:Hf(m,_e,xe,et,he,h),tile:xe};if(R){const st=Oe.segments.get();for(const kt of st)me.push({segments:new o.SegmentVector([kt]),sortKey:kt.sortKey,state:vt})}else me.push({segments:Oe.segments,sortKey:0,state:vt})}R&&me.sort((le,_e)=>le.sortKey-_e.sortKey);const H={useDepthForOcclusion:!fe};for(const le of me){const{programConfiguration:_e,program:xe,layoutVertexBuffer:Oe,globeExtVertexBuffer:Fe,indexBuffer:ze,uniformValues:He,tile:qe}=le.state,it=le.segments;m.terrain&&m.terrain.setupElevationDraw(qe,xe,H),m.prepareDrawProgram(P,xe,qe.tileID.toUnwrapped()),xe.draw(P,z.TRIANGLES,q,te,ce,o.CullFaceMode.disabled,He,h.id,Oe,ze,it,h.paint,D.zoom,_e,[Fe])}},heatmap:function(m,l,h,y){if(h.paint.get("heatmap-opacity")!==0)if(m.renderPass==="offscreen"){const _=m.context,w=_.gl,C=o.StencilMode.disabled,R=new o.ColorMode([w.ONE,w.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(ce,fe,he,me){const H=ce.gl,le=fe.width*me,_e=fe.height*me;ce.activeTexture.set(H.TEXTURE1),ce.viewport.set([0,0,le,_e]);let xe=he.heatmapFbo;if(!xe||xe&&(xe.width!==le||xe.height!==_e)){xe&&xe.destroy();const Oe=H.createTexture();H.bindTexture(H.TEXTURE_2D,Oe),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_S,H.CLAMP_TO_EDGE),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_T,H.CLAMP_TO_EDGE),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MIN_FILTER,H.LINEAR),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MAG_FILTER,H.LINEAR),xe=he.heatmapFbo=ce.createFramebuffer(le,_e,!1),function(Fe,ze,He,qe,it,Pt){const et=Fe.gl;et.texImage2D(et.TEXTURE_2D,0,Fe.isWebGL2&&Fe.extRenderToTextureHalfFloat?et.RGBA16F:et.RGBA,it,Pt,0,et.RGBA,Fe.extRenderToTextureHalfFloat?Fe.isWebGL2?et.HALF_FLOAT:Fe.extTextureHalfFloat.HALF_FLOAT_OES:et.UNSIGNED_BYTE,null),qe.colorAttachment.set(He)}(ce,0,Oe,xe,le,_e)}else H.bindTexture(H.TEXTURE_2D,xe.colorAttachment.get()),ce.bindFramebuffer.set(xe.framebuffer)})(_,m,h,m.transform.projection.name==="globe"?.5:.25),_.clear({color:o.Color.transparent});const P=m.transform,z=P.projection.name==="globe",D=z?["PROJECTION_GLOBE_VIEW"]:null,q=z?o.CullFaceMode.frontCCW:o.CullFaceMode.disabled,te=[o.mercatorXfromLng(P.center.lng),o.mercatorYfromLat(P.center.lat)];for(let ce=0;ce<y.length;ce++){const fe=y[ce];if(l.hasRenderableParent(fe))continue;const he=l.getTile(fe),me=he.getBucket(h);if(!me||me.projection.name!==P.projection.name)continue;const H=me.programConfigurations.get(h.id),le=m.useProgram("heatmap",H,D),{zoom:_e}=m.transform;m.terrain&&m.terrain.setupElevationDraw(he,le),m.prepareDrawProgram(_,le,fe.toUnwrapped());const xe=P.projection.createInversionMatrix(P,fe.canonical);le.draw(_,w.TRIANGLES,o.DepthMode.disabled,C,R,q,Ey(m,fe,he,xe,te,_e,h.paint.get("heatmap-intensity")),h.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,h.paint,m.transform.zoom,H,z?[me.globeExtVertexBuffer]:null)}_.viewport.set([0,0,m.width,m.height])}else m.renderPass==="translucent"&&(m.context.setColorMode(m.colorModeForRenderPass()),function(_,w){const C=_.context,R=C.gl,P=w.heatmapFbo;if(!P)return;C.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,P.colorAttachment.get()),C.activeTexture.set(R.TEXTURE1);let z=w.colorRampTexture;z||(z=w.colorRampTexture=new o.Texture(C,w.colorRamp,R.RGBA)),z.bind(R.LINEAR,R.CLAMP_TO_EDGE),_.useProgram("heatmapTexture").draw(C,R.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,_.colorModeForRenderPass(),o.CullFaceMode.disabled,((D,q,te,ce)=>({u_image:0,u_color_ramp:1,u_opacity:q.paint.get("heatmap-opacity")}))(0,w),w.id,_.viewportBuffer,_.quadTriangleIndexBuffer,_.viewportSegments,w.paint,_.transform.zoom)}(m,h))},line:function(m,l,h,y){if(m.renderPass!=="translucent")return;const _=h.paint.get("line-opacity"),w=h.paint.get("line-width");if(_.constantOr(1)===0||w.constantOr(1)===0)return;const C=m.depthModeForSublayer(0,o.DepthMode.ReadOnly),R=m.colorModeForRenderPass(),P=m.terrain&&m.terrain.renderingToTexture?1:o.exported.devicePixelRatio,z=h.paint.get("line-dasharray"),D=z.constantOr(1),q=h.layout.get("line-cap"),te=h.paint.get("line-pattern"),ce=te.constantOr(1),fe=h.paint.get("line-gradient"),he=ce?"linePattern":"line",me=m.context,H=me.gl,le=(xe=>{const Oe=[];Kc(xe)&&Oe.push("RENDER_LINE_DASH"),xe.paint.get("line-gradient")&&Oe.push("RENDER_LINE_GRADIENT");const Fe=xe.paint.get("line-trim-offset");Fe[0]===0&&Fe[1]===0||Oe.push("RENDER_LINE_TRIM_OFFSET");const ze=xe.paint.get("line-pattern").constantOr(1),He=xe.paint.get("line-opacity").constantOr(1)!==1;return!ze&&He&&Oe.push("RENDER_LINE_ALPHA_DISCARD"),Oe})(h);let _e=le.includes("RENDER_LINE_ALPHA_DISCARD");m.terrain&&m.terrain.clipOrMaskOverlapStencilType()&&(_e=!1);for(const xe of y){const Oe=l.getTile(xe);if(ce&&!Oe.patternsLoaded())continue;const Fe=Oe.getBucket(h);if(!Fe)continue;m.prepareDrawTile();const ze=Fe.programConfigurations.get(h.id),He=m.useProgram(he,ze,le),qe=te.constantOr(null);if(qe&&Oe.imageAtlas){const yt=Oe.imageAtlas.patternPositions[qe.toString()];yt&&ze.setConstantPatternPositions(yt)}const it=z.constantOr(null),Pt=q.constantOr(null);if(!ce&&it&&Pt&&Oe.lineAtlas){const yt=Oe.lineAtlas.getDash(it,Pt);yt&&ze.setConstantPatternPositions(yt)}let[et,vt]=h.paint.get("line-trim-offset");(Pt==="round"||Pt==="square")&&et!==vt&&(et===0&&(et-=1),vt===1&&(vt+=1));const st=m.terrain?xe.projMatrix:null,kt=ce?Xc(m,Oe,h,st,P):Cx(m,Oe,h,st,Fe.lineClipsArray.length,P,[et,vt]);if(fe){const yt=Fe.gradients[h.id];let Lt=yt.texture;if(h.gradientVersion!==yt.version){let wt=256;if(h.stepInterpolant){const Ot=l.getSource().maxzoom,un=xe.canonical.z===Ot?Math.ceil(1<<m.transform.maxZoom-xe.canonical.z):1;wt=o.clamp(o.nextPowerOfTwo(Fe.maxLineLength/o.EXTENT*1024*un),256,me.maxTextureSize)}yt.gradient=o.renderColorRamp({expression:h.gradientExpression(),evaluationKey:"lineProgress",resolution:wt,image:yt.gradient||void 0,clips:Fe.lineClipsArray}),yt.texture?yt.texture.update(yt.gradient):yt.texture=new o.Texture(me,yt.gradient,H.RGBA),yt.version=h.gradientVersion,Lt=yt.texture}me.activeTexture.set(H.TEXTURE1),Lt.bind(h.stepInterpolant?H.NEAREST:H.LINEAR,H.CLAMP_TO_EDGE)}D&&(me.activeTexture.set(H.TEXTURE0),Oe.lineAtlasTexture.bind(H.LINEAR,H.REPEAT),ze.updatePaintBuffers()),ce&&(me.activeTexture.set(H.TEXTURE0),Oe.imageAtlasTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),ze.updatePaintBuffers()),m.prepareDrawProgram(me,He,xe.toUnwrapped());const rt=yt=>{He.draw(me,H.TRIANGLES,C,yt,R,o.CullFaceMode.disabled,kt,h.id,Fe.layoutVertexBuffer,Fe.indexBuffer,Fe.segments,h.paint,m.transform.zoom,ze,[Fe.layoutVertexBuffer2])};if(_e){const yt=m.stencilModeForClipping(xe).ref;yt===0&&m.terrain&&me.clear({stencil:0});const Lt={func:H.EQUAL,mask:255};kt.u_alpha_discard_threshold=.8,rt(new o.StencilMode(Lt,yt,255,H.KEEP,H.KEEP,H.INVERT)),kt.u_alpha_discard_threshold=0,rt(new o.StencilMode(Lt,yt,255,H.KEEP,H.KEEP,H.KEEP))}else rt(m.stencilModeForClipping(xe))}_e&&(m.resetStencilClippingMasks(),m.terrain&&me.clear({stencil:0}))},fill:function(m,l,h,y){const _=h.paint.get("fill-color"),w=h.paint.get("fill-opacity");if(w.constantOr(1)===0)return;const C=m.colorModeForRenderPass(),R=h.paint.get("fill-pattern"),P=m.opaquePassEnabledForLayer()&&!R.constantOr(1)&&_.constantOr(o.Color.transparent).a===1&&w.constantOr(0)===1?"opaque":"translucent";if(m.renderPass===P){const z=m.depthModeForSublayer(1,m.renderPass==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly);My(m,l,h,y,z,C,!1)}if(m.renderPass==="translucent"&&h.paint.get("fill-antialias")){const z=m.depthModeForSublayer(h.getPaintProperty("fill-outline-color")?2:0,o.DepthMode.ReadOnly);My(m,l,h,y,z,C,!0)}},"fill-extrusion":function(m,l,h,y){const _=h.paint.get("fill-extrusion-opacity");if(_!==0&&m.renderPass==="translucent"){const w=new o.DepthMode(m.context.gl.LEQUAL,o.DepthMode.ReadWrite,m.depthRangeFor3D);if(_!==1||h.paint.get("fill-extrusion-pattern").constantOr(1))xd(m,l,h,y,w,o.StencilMode.disabled,o.ColorMode.disabled),xd(m,l,h,y,w,m.stencilModeFor3D(),m.colorModeForRenderPass()),m.resetStencilClippingMasks();else{const C=m.colorModeForRenderPass();xd(m,l,h,y,w,o.StencilMode.disabled,C)}}},hillshade:function(m,l,h,y){if(m.renderPass!=="offscreen"&&m.renderPass!=="translucent")return;const _=m.context,w=m.depthModeForSublayer(0,o.DepthMode.ReadOnly),C=m.colorModeForRenderPass(),R=m.terrain&&m.terrain.renderingToTexture,[P,z]=m.renderPass!=="translucent"||R?[{},y]:m.stencilConfigForOverlap(y);for(const D of z){const q=l.getTile(D);if(q.needsHillshadePrepare&&m.renderPass==="offscreen")_y(m,q,h,w,o.StencilMode.disabled,C);else if(m.renderPass==="translucent"){const te=R&&m.terrain?m.terrain.stencilModeForRTTOverlap(D):P[D.overscaledZ];vy(m,D,q,h,w,te,C)}}_.viewport.set([0,0,m.width,m.height]),m.resetStencilClippingMasks()},raster:function(m,l,h,y,_,w){if(m.renderPass!=="translucent"||h.paint.get("raster-opacity")===0||!y.length)return;const C=m.context,R=C.gl,P=l.getSource(),z=m.useProgram("raster"),D=m.colorModeForRenderPass(),q=m.terrain&&m.terrain.renderingToTexture,[te,ce]=P instanceof En||q?[{},y]:m.stencilConfigForOverlap(y),fe=ce[ce.length-1].overscaledZ,he=!m.options.moving;for(const me of ce){const H=q?o.DepthMode.disabled:m.depthModeForSublayer(me.overscaledZ-fe,h.paint.get("raster-opacity")===1?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly,R.LESS),le=me.toUnwrapped(),_e=l.getTile(me);if(q&&(!_e||!_e.hasData()))continue;const xe=q?me.projMatrix:m.transform.calculateProjMatrix(le,he),Oe=m.terrain&&q?m.terrain.stencilModeForRTTOverlap(me):te[me.overscaledZ],Fe=w?0:h.paint.get("raster-fade-duration");_e.registerFadeDuration(Fe);const ze=l.findLoadedParent(me,0),He=jf(_e,ze,l,m.transform,Fe);let qe,it;m.terrain&&m.terrain.prepareDrawTile();const Pt=h.paint.get("raster-resampling")==="nearest"?R.NEAREST:R.LINEAR;C.activeTexture.set(R.TEXTURE0),_e.texture.bind(Pt,R.CLAMP_TO_EDGE),C.activeTexture.set(R.TEXTURE1),ze?(ze.texture.bind(Pt,R.CLAMP_TO_EDGE),qe=Math.pow(2,ze.tileID.overscaledZ-_e.tileID.overscaledZ),it=[_e.tileID.canonical.x*qe%1,_e.tileID.canonical.y*qe%1]):_e.texture.bind(Pt,R.CLAMP_TO_EDGE),_e.texture.useMipmap&&C.extTextureFilterAnisotropic&&m.transform.pitch>20&&R.texParameterf(R.TEXTURE_2D,C.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,C.extTextureFilterAnisotropicMax);const et=Yf(xe,it||[0,0],qe||1,He,h,P instanceof En?P.perspectiveTransform:[0,0]);if(m.prepareDrawProgram(C,z,le),P instanceof En)P.boundsBuffer&&P.boundsSegments&&z.draw(C,R.TRIANGLES,H,o.StencilMode.disabled,D,o.CullFaceMode.disabled,et,h.id,P.boundsBuffer,m.quadTriangleIndexBuffer,P.boundsSegments);else{const{tileBoundsBuffer:vt,tileBoundsIndexBuffer:st,tileBoundsSegments:kt}=m.getTileBoundsBuffers(_e);z.draw(C,R.TRIANGLES,H,Oe,D,o.CullFaceMode.disabled,et,h.id,vt,st,kt)}}m.resetStencilClippingMasks()},background:function(m,l,h,y){const _=h.paint.get("background-color"),w=h.paint.get("background-opacity");if(w===0)return;const C=m.context,R=C.gl,P=m.transform,z=P.tileSize,D=h.paint.get("background-pattern");if(m.isPatternMissing(D))return;const q=!D&&_.a===1&&w===1&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass!==q)return;const te=o.StencilMode.disabled,ce=m.depthModeForSublayer(0,q==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly),fe=m.colorModeForRenderPass(),he=m.useProgram(D?"backgroundPattern":"background");let me,H=y;H||(me=m.getBackgroundTiles(),H=Object.values(me).map(le=>le.tileID)),D&&(C.activeTexture.set(R.TEXTURE0),m.imageManager.bind(m.context));for(const le of H){const _e=le.toUnwrapped(),xe=y?le.projMatrix:m.transform.calculateProjMatrix(_e);m.prepareDrawTile();const Oe=l?l.getTile(le):me?me[le.key]:new o.Tile(le,z,P.zoom,m),Fe=D?Rx(xe,w,m,D,{tileID:le,tileSize:z}):Jf(xe,w,_);m.prepareDrawProgram(C,he,_e);const{tileBoundsBuffer:ze,tileBoundsIndexBuffer:He,tileBoundsSegments:qe}=m.getTileBoundsBuffers(Oe);he.draw(C,R.TRIANGLES,ce,te,fe,o.CullFaceMode.disabled,Fe,h.id,ze,He,qe)}},sky:function(m,l,h){const y=m.transform,_=y.projection.name==="mercator"||y.projection.name==="globe"?1:o.smoothstep(7,8,y.zoom),w=h.paint.get("sky-opacity")*_;if(w===0)return;const C=m.context,R=h.paint.get("sky-type"),P=new o.DepthMode(C.gl.LEQUAL,o.DepthMode.ReadOnly,[0,1]),z=m.frameCounter/1e3%1;R==="atmosphere"?m.renderPass==="offscreen"?h.needsSkyboxCapture(m)&&(function(D,q,te,ce){const fe=D.context,he=fe.gl;let me=q.skyboxFbo;if(!me){me=q.skyboxFbo=fe.createFramebuffer(32,32,!1),q.skyboxGeometry=new wd(fe),q.skyboxTexture=fe.gl.createTexture(),he.bindTexture(he.TEXTURE_CUBE_MAP,q.skyboxTexture),he.texParameteri(he.TEXTURE_CUBE_MAP,he.TEXTURE_WRAP_S,he.CLAMP_TO_EDGE),he.texParameteri(he.TEXTURE_CUBE_MAP,he.TEXTURE_WRAP_T,he.CLAMP_TO_EDGE),he.texParameteri(he.TEXTURE_CUBE_MAP,he.TEXTURE_MIN_FILTER,he.LINEAR),he.texParameteri(he.TEXTURE_CUBE_MAP,he.TEXTURE_MAG_FILTER,he.LINEAR);for(let xe=0;xe<6;++xe)he.texImage2D(he.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0,he.RGBA,32,32,0,he.RGBA,he.UNSIGNED_BYTE,null)}fe.bindFramebuffer.set(me.framebuffer),fe.viewport.set([0,0,32,32]);const H=q.getCenter(D,!0),le=D.useProgram("skyboxCapture"),_e=new Float64Array(16);o.identity(_e),o.rotateY(_e,_e,.5*-Math.PI),So(fe,q,le,_e,H,0),o.identity(_e),o.rotateY(_e,_e,.5*Math.PI),So(fe,q,le,_e,H,1),o.identity(_e),o.rotateX(_e,_e,.5*-Math.PI),So(fe,q,le,_e,H,2),o.identity(_e),o.rotateX(_e,_e,.5*Math.PI),So(fe,q,le,_e,H,3),o.identity(_e),So(fe,q,le,_e,H,4),o.identity(_e),o.rotateY(_e,_e,Math.PI),So(fe,q,le,_e,H,5),fe.viewport.set([0,0,D.width,D.height])}(m,h),h.markSkyboxValid(m)):m.renderPass==="sky"&&function(D,q,te,ce,fe){const he=D.context,me=he.gl,H=D.transform,le=D.useProgram("skybox");he.activeTexture.set(me.TEXTURE0),me.bindTexture(me.TEXTURE_CUBE_MAP,q.skyboxTexture);const _e=((xe,Oe,Fe,ze,He)=>({u_matrix:xe,u_sun_direction:Oe,u_cubemap:0,u_opacity:ze,u_temporal_offset:He}))(H.skyboxMatrix,q.getCenter(D,!1),0,ce,fe);D.prepareDrawProgram(he,le),le.draw(he,me.TRIANGLES,te,o.StencilMode.disabled,D.colorModeForRenderPass(),o.CullFaceMode.backCW,_e,"skybox",q.skyboxGeometry.vertexBuffer,q.skyboxGeometry.indexBuffer,q.skyboxGeometry.segment)}(m,h,P,w,z):R==="gradient"&&m.renderPass==="sky"&&function(D,q,te,ce,fe){const he=D.context,me=he.gl,H=D.transform,le=D.useProgram("skyboxGradient");q.skyboxGeometry||(q.skyboxGeometry=new wd(he)),he.activeTexture.set(me.TEXTURE0);let _e=q.colorRampTexture;_e||(_e=q.colorRampTexture=new o.Texture(he,q.colorRamp,me.RGBA)),_e.bind(me.LINEAR,me.CLAMP_TO_EDGE);const xe=((Oe,Fe,ze,He,qe)=>({u_matrix:Oe,u_color_ramp:0,u_center_direction:Fe,u_radius:o.degToRad(ze),u_opacity:He,u_temporal_offset:qe}))(H.skyboxMatrix,q.getCenter(D,!1),q.paint.get("sky-gradient-radius"),ce,fe);D.prepareDrawProgram(he,le),le.draw(he,me.TRIANGLES,te,o.StencilMode.disabled,D.colorModeForRenderPass(),o.CullFaceMode.backCW,xe,"skyboxGradient",q.skyboxGeometry.vertexBuffer,q.skyboxGeometry.indexBuffer,q.skyboxGeometry.segment)}(m,h,P,w,z)},debug:function(m,l,h){for(let y=0;y<h.length;y++)Lx(m,l,h[y])},custom:function(m,l,h,y){const _=m.context,w=h.implementation;if(!m.transform.projection.unsupportedLayers||!m.transform.projection.unsupportedLayers.includes("custom")||m.terrain&&(m.terrain.renderingToTexture||m.renderPass==="offscreen")&&h.isLayerDraped()){if(m.renderPass==="offscreen"){const C=w.prerender;if(C){if(m.setCustomLayerDefaults(),_.setColorMode(m.colorModeForRenderPass()),m.transform.projection.name==="globe"){const R=m.transform.pointMerc;C.call(w,_.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),o.globeToMercatorTransition(m.transform.zoom),[R.x,R.y],m.transform.pixelsPerMeterRatio)}else C.call(w,_.gl,m.transform.customLayerMatrix());_.setDirty(),m.setBaseState()}}else if(m.renderPass==="translucent"){if(m.terrain&&m.terrain.renderingToTexture){const R=w.renderToTile;if(R){const P=y[0].canonical,z=new o.MercatorCoordinate(P.x+y[0].wrap*(1<<P.z),P.y,P.z);_.setDepthMode(o.DepthMode.disabled),_.setStencilMode(o.StencilMode.disabled),_.setColorMode(m.colorModeForRenderPass()),m.setCustomLayerDefaults(),R.call(w,_.gl,z),_.setDirty(),m.setBaseState()}return}m.setCustomLayerDefaults(),_.setColorMode(m.colorModeForRenderPass()),_.setStencilMode(o.StencilMode.disabled);const C=w.renderingMode==="3d"?new o.DepthMode(m.context.gl.LEQUAL,o.DepthMode.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,o.DepthMode.ReadOnly);if(_.setDepthMode(C),m.transform.projection.name==="globe"){const R=m.transform.pointMerc;w.render(_.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),o.globeToMercatorTransition(m.transform.zoom),[R.x,R.y],m.transform.pixelsPerMeterRatio)}else w.render(_.gl,m.transform.customLayerMatrix());_.setDirty(),m.setBaseState(),_.bindFramebuffer.set(null)}}else o.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Cl{constructor(l,h,y=!1){this.context=new bt(l,y),this.transform=h,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=o.SourceCache.maxUnderzooming+o.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(l,h){const y=!!l&&!!l.terrain&&this.transform.projection.supportsTerrain;if(!(y||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Gf(this,l));const _=this._terrain;this.transform.elevation=y?_:null,_.update(l,this.transform,h)}_updateFog(l){const h=l.fog;if(!h||this.transform.projection.name==="globe"||h.getOpacity(this.transform.pitch)<1||h.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[y,_]=h.getFovAdjustedRange(this.transform._fov);if(y>_)return void(this.transform.fogCullDistSq=null);const w=y+.78*(_-y);this.transform.fogCullDistSq=w*w}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(l,h){if(this.width=l*o.exported.devicePixelRatio,this.height=h*o.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style.order)this.style._layers[y].resize()}setup(){const l=this.context,h=new o.StructArrayLayout2i4;h.emplaceBack(0,0),h.emplaceBack(o.EXTENT,0),h.emplaceBack(0,o.EXTENT),h.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(h,o.posAttributes.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);const y=new o.StructArrayLayout2i4;y.emplaceBack(0,0),y.emplaceBack(o.EXTENT,0),y.emplaceBack(0,o.EXTENT),y.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=l.createVertexBuffer(y,o.posAttributes.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);const _=new o.StructArrayLayout2i4;_.emplaceBack(-1,-1),_.emplaceBack(1,-1),_.emplaceBack(-1,1),_.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(_,o.posAttributes.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);const w=new o.StructArrayLayout4i8;w.emplaceBack(0,0,0,0),w.emplaceBack(o.EXTENT,0,o.EXTENT,0),w.emplaceBack(0,o.EXTENT,0,o.EXTENT),w.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.mercatorBoundsBuffer=l.createVertexBuffer(w,o.boundsAttributes.members),this.mercatorBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);const C=new o.StructArrayLayout3ui6;C.emplaceBack(0,1,2),C.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(C);const R=new o.StructArrayLayout1ui2;for(const z of[0,1,3,2,0])R.emplaceBack(z);this.debugIndexBuffer=l.createIndexBuffer(R),this.emptyTexture=new o.Texture(l,new o.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),l.gl.RGBA),this.identityMat=o.create();const P=this.context.gl;this.stencilClearMode=new o.StencilMode({func:P.ALWAYS,mask:0},0,255,P.ZERO,P.ZERO,P.ZERO),this.loadTimeStamps.push(o.window.performance.now()),this.atmosphereBuffer=new Ly(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(l){return l._makeTileBoundsBuffers(this.context,this.transform.projection),l._tileBoundsBuffer?{tileBoundsBuffer:l._tileBoundsBuffer,tileBoundsIndexBuffer:l._tileBoundsIndexBuffer,tileBoundsSegments:l._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const l=this.context,h=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(l,h.TRIANGLES,o.DepthMode.disabled,this.stencilClearMode,o.ColorMode.disabled,o.CullFaceMode.disabled,Hc(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(l,h,y){if(!h||this.currentStencilSource===h.id||!l.isTileClipped()||!y||y.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let R=!1;for(const P of y)if(this._tileClippingMaskIDs[P.key]===void 0){R=!0;break}if(!R)return}this.currentStencilSource=h.id;const _=this.context,w=_.gl;this.nextStencilID+y.length>256&&this.clearStencil(),_.setColorMode(o.ColorMode.disabled),_.setDepthMode(o.DepthMode.disabled);const C=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const R of y){const P=h.getTile(R),z=this._tileClippingMaskIDs[R.key]=this.nextStencilID++,{tileBoundsBuffer:D,tileBoundsIndexBuffer:q,tileBoundsSegments:te}=this.getTileBoundsBuffers(P);C.draw(_,w.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:w.ALWAYS,mask:0},z,255,w.KEEP,w.KEEP,w.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,Hc(R.projMatrix),"$clipping",D,q,te)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,h=this.context.gl;return new o.StencilMode({func:h.NOTEQUAL,mask:255},l,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(l){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(l);const h=this.context.gl;return new o.StencilMode({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,h.KEEP,h.KEEP,h.REPLACE)}stencilConfigForOverlap(l){const h=this.context.gl,y=l.sort((C,R)=>R.overscaledZ-C.overscaledZ),_=y[y.length-1].overscaledZ,w=y[0].overscaledZ-_+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();const C={};for(let R=0;R<w;R++)C[R+_]=new o.StencilMode({func:h.GEQUAL,mask:255},R+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=w,[C,y]}return[{[_]:o.StencilMode.disabled},y]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new o.ColorMode([l.CONSTANT_COLOR,l.ONE],new o.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?o.ColorMode.unblended:o.ColorMode.alphaBlended}depthModeForSublayer(l,h,y){if(!this.opaquePassEnabledForLayer())return o.DepthMode.disabled;const _=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new o.DepthMode(y||this.context.gl.LEQUAL,h,[_,_])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,h){this.style=l,this.options=h,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(o.exported.now()),this.imageManager.beginFrame();const y=this.style.order,_=this.style._sourceCaches;for(const z in _){const D=_[z];D.used&&D.prepare(this.context)}const w={},C={},R={};for(const z in _){const D=_[z];w[z]=D.getVisibleCoordinates(),C[z]=w[z].slice().reverse(),R[z]=D.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let z=0;z<y.length;z++)if(this.style._layers[y[z]].is3D()){this.opaquePassCutoff=z;break}if(this.terrain&&(this.terrain.updateTileBinding(R),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new o.GlobeSharedBuffers(this.context)),!o.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const z of y){const D=this.style._layers[z],q=l._getLayerSourceCache(D);if(!D.hasOffscreenPass()||D.isHidden(this.transform.zoom))continue;const te=q?C[q.id]:void 0;(D.type==="custom"||D.isSky()||te&&te.length)&&this.renderLayer(this,q,D,te)}this.depthRangeFor3D=[0,1-(l.order.length+2)*this.numSublayers*this.depthEpsilon];const P=this.terrain;if(P&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&P.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:h.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=y.length-1;this.currentLayer>=0;this.currentLayer--){const z=this.style._layers[y[this.currentLayer]],D=l._getLayerSourceCache(z);if(z.isSky())continue;const q=D?C[D.id]:void 0;this._renderTileClippingMasks(z,D,q),this.renderLayer(this,D,z,q)}if(this.style.fog&&this.transform.projection.supportsFog&&function(z,D){const q=z.context,te=q.gl,ce=z.transform,fe=new o.DepthMode(te.LEQUAL,o.DepthMode.ReadOnly,[0,1]),he=z.useProgram("globeAtmosphere",null,ce.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),me=o.globeToMercatorTransition(ce.zoom),H=D.properties.get("color").toArray01(),le=D.properties.get("high-color").toArray01(),_e=D.properties.get("space-color").toArray01PremultipliedAlpha(),xe=o.identity$1([]);o.rotateY$1(xe,xe,-o.degToRad(ce._center.lng)),o.rotateX$1(xe,xe,o.degToRad(ce._center.lat)),o.rotateZ$1(xe,xe,ce.angle),o.rotateX$1(xe,xe,-ce._pitch);const Oe=o.fromQuat(new Float32Array(16),xe),Fe=o.mapValue(D.properties.get("star-intensity"),0,1,0,.25),ze=5e-4,He=o.mapValue(D.properties.get("horizon-blend"),0,1,ze,.25),qe=o.globeUseCustomAntiAliasing(z,q,ce)&&He===ze?ce.worldSize/(2*Math.PI*1.025)-1:ce.globeRadius,it=z.frameCounter/1e3%1,Pt=o.length(ce.globeCenterInViewSpace),et=Math.sqrt(Math.pow(Pt,2)-Math.pow(qe,2)),vt=Math.acos(et/Pt),st=((rt,yt,Lt,wt,Ot,un,Tn,en,yn,Fn,On,cn,or,dr)=>({u_frustum_tl:rt,u_frustum_tr:yt,u_frustum_br:Lt,u_frustum_bl:wt,u_horizon:Ot,u_transition:un,u_fadeout_range:Tn,u_color:en,u_high_color:yn,u_space_color:Fn,u_star_intensity:On,u_star_size:5*o.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:cn,u_horizon_angle:or,u_rotation_matrix:dr}))(ce.frustumCorners.TL,ce.frustumCorners.TR,ce.frustumCorners.BR,ce.frustumCorners.BL,ce.frustumCorners.horizon,me,He,H,le,_e,Fe,it,vt,Oe);z.prepareDrawProgram(q,he);const kt=z.atmosphereBuffer;kt&&he.draw(q,te.TRIANGLES,fe,o.StencilMode.disabled,o.ColorMode.alphaBlended,o.CullFaceMode.backCW,st,"skybox",kt.vertexBuffer,kt.indexBuffer,kt.segments)}(this,this.style.fog),this.renderPass="sky",(o.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<y.length;this.currentLayer++){const z=this.style._layers[y[this.currentLayer]],D=l._getLayerSourceCache(z);z.isSky()&&this.renderLayer(this,D,z,D?C[D.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<y.length;){const z=this.style._layers[y[this.currentLayer]],D=l._getLayerSourceCache(z);if(z.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(z)){if(z.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const q=D?(z.type==="symbol"?R:C)[D.id]:void 0;this._renderTileClippingMasks(z,D,D?w[D.id]:void 0),this.renderLayer(this,D,z,q),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let z=null;o.values(this.style._layers).forEach(D=>{const q=l._getLayerSourceCache(D);q&&!D.isHidden(this.transform.zoom)&&(!z||z.getSource().maxzoom<q.getSource().maxzoom)&&(z=q)}),z&&this.options.showTileBoundaries&&Is.debug(this,z,z.getVisibleCoordinates())}this.options.showPadding&&function(z){const D=z.transform.padding;ky(z,z.transform.height-(D.top||0),3,El),ky(z,D.bottom||0,3,Ax),bd(z,D.left||0,3,kx),bd(z,z.transform.width-(D.right||0),3,Px);const q=z.transform.centerPoint;(function(te,ce,fe,he){Tl(te,ce-1,fe-10,2,20,he),Tl(te,ce-10,fe-1,20,2,he)})(z,q.x,z.transform.height-q.y,Ix)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(o.window.performance.now()),this.saveCanvasCopy())}renderLayer(l,h,y,_){y.isHidden(this.transform.zoom)||(y.type==="background"||y.type==="sky"||y.type==="custom"||_&&_.length)&&(this.id=y.id,this.gpuTimingStart(y),(!l.transform.projection.unsupportedLayers||!l.transform.projection.unsupportedLayers.includes(y.type)||l.terrain&&y.type==="custom")&&Is[y.type](l,h,y,_,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(l){if(!this.options.gpuTiming)return;const h=this.context.extTimerQuery;let y=this.gpuTimers[l.id];y||(y=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:h.createQueryEXT()}),y.calls++,h.beginQueryEXT(h.TIME_ELAPSED_EXT,y.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const l=this.context.extTimerQuery,h=l.createQueryEXT();this.deferredRenderGpuTimeQueries.push(h),l.beginQueryEXT(l.TIME_ELAPSED_EXT,h)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}collectGpuTimers(){const l=this.gpuTimers;return this.gpuTimers={},l}collectDeferredRenderGpuQueries(){const l=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],l}queryGpuTimers(l){const h={};for(const y in l){const _=l[y],w=this.context.extTimerQuery,C=w.getQueryObjectEXT(_.query,w.QUERY_RESULT_EXT)/1e6;w.deleteQueryEXT(_.query),h[y]=C}return h}queryGpuTimeDeferredRender(l){if(!this.options.gpuTimingDeferredRender)return 0;const h=this.context.extTimerQuery;let y=0;for(const _ of l)y+=h.getQueryObjectEXT(_,h.QUERY_RESULT_EXT)/1e6,h.deleteQueryEXT(_);return y}translatePosMatrix(l,h,y,_,w){if(!y[0]&&!y[1])return l;const C=w?_==="map"?this.transform.angle:0:_==="viewport"?-this.transform.angle:0;if(C){const z=Math.sin(C),D=Math.cos(C);y=[y[0]*D-y[1]*z,y[0]*z+y[1]*D]}const R=[w?y[0]:Ve(h,y[0],this.transform.zoom),w?y[1]:Ve(h,y[1],this.transform.zoom),0],P=new Float32Array(16);return o.translate(P,l,R),P}saveTileTexture(l){const h=this._tileTextures[l.size[0]];h?h.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const h=this._tileTextures[l];return h&&h.length>0?h.pop():null}isPatternMissing(l){return l===null||l!==void 0&&!this.imageManager.getPattern(l.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const l=this.terrain&&this.terrain.renderingToTexture,h=this.terrain&&this.terrain.exaggeration()===0,y=this.style&&this.style.fog,_=[];return this.terrainRenderModeElevated()&&_.push("TERRAIN"),this.transform.projection.name==="globe"&&_.push("GLOBE"),h&&_.push("ZERO_EXAGGERATION"),y&&!l&&y.getOpacity(this.transform.pitch)!==0&&_.push("FOG"),l&&_.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&_.push("OVERDRAW_INSPECTOR"),_}useProgram(l,h,y){this.cache=this.cache||{};const _=y||[],w=this.currentGlobalDefines().concat(_),C=Zn.cacheKey(Bf[l],l,w,h);return this.cache[C]||(this.cache[C]=new Zn(this.context,l,Bf[l],h,ep[l],w)),this.cache[C]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(l,h,y){if(this.terrain&&this.terrain.renderingToTexture)return;const _=this.style.fog;if(_){const w=_.getOpacity(this.transform.pitch),C=((R,P,z,D,q,te,ce,fe,he,me,H)=>{const le=R.transform,_e=P.properties.get("color").toArray01();_e[3]=D;const xe=R.frameCounter/1e3%1;return{u_fog_matrix:z?le.calculateFogTileMatrix(z):R.identityMat,u_fog_range:P.getFovAdjustedRange(le._fov),u_fog_color:_e,u_fog_horizon_blend:P.properties.get("horizon-blend"),u_fog_temporal_offset:xe,u_frustum_tl:q,u_frustum_tr:te,u_frustum_br:ce,u_frustum_bl:fe,u_globe_pos:he,u_globe_radius:me,u_viewport:H,u_globe_transition:o.globeToMercatorTransition(le.zoom),u_is_globe:+(le.projection.name==="globe")}})(this,_,y,w,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*o.exported.devicePixelRatio,this.transform.height*o.exported.devicePixelRatio]);h.setFogUniformValues(l,C)}}setTileLoadedFlag(l){this.tileLoaded=l}saveCanvasCopy(){const l=this.canvasCopy();l&&(this.frameCopies.push(l),this.tileLoaded=!1)}canvasCopy(){const l=this.context.gl,h=l.createTexture();return l.bindTexture(l.TEXTURE_2D,h),l.copyTexImage2D(l.TEXTURE_2D,0,l.RGBA,0,0,l.drawingBufferWidth,l.drawingBufferHeight,0),h}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const l=this.style&&this.style.fog;return!!l&&l.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const l=this._backgroundTiles,h=this._backgroundTiles={},y=this.transform.coveringTiles({tileSize:512});for(const _ of y)h[_.key]=l[_.key]||new o.Tile(_,512,this.transform.tileZoom,this);return h}clearBackgroundTiles(){this._backgroundTiles={}}}class Sd{constructor(l=0,h=0,y=0,_=0){if(isNaN(l)||l<0||isNaN(h)||h<0||isNaN(y)||y<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=h,this.left=y,this.right=_}interpolate(l,h,y){return h.top!=null&&l.top!=null&&(this.top=o.number(l.top,h.top,y)),h.bottom!=null&&l.bottom!=null&&(this.bottom=o.number(l.bottom,h.bottom,y)),h.left!=null&&l.left!=null&&(this.left=o.number(l.left,h.left,y)),h.right!=null&&l.right!=null&&(this.right=o.number(l.right,h.right,y)),this}getCenter(l,h){const y=o.clamp((this.left+l-this.right)/2,0,l),_=o.clamp((this.top+h-this.bottom)/2,0,h);return new o.Point(y,_)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new Sd(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Ed(m,l){const h=o.getColumn(m,3);o.fromQuat(m,l),o.setColumn(m,3,h)}function Kn(m,l){const h=o.identity$1([]);return o.rotateZ$1(h,h,-l),o.rotateX$1(h,h,-m),h}function eu(m,l){const h=[m[0],m[1],0],y=[l[0],l[1],0];if(o.length(h)>=1e-15){const C=o.normalize([],h);o.scale$2(y,C,o.dot(y,C)),l[0]=y[0],l[1]=y[1]}const _=o.cross([],l,m);if(o.len(_)<1e-15)return null;const w=Math.atan2(-_[1],_[0]);return Kn(Math.atan2(Math.sqrt(m[0]*m[0]+m[1]*m[1]),-m[2]),w)}class Oy{constructor(l,h){this.position=l,this.orientation=h}get position(){return this._position}set position(l){if(l){const h=l instanceof o.MercatorCoordinate?l:new o.MercatorCoordinate(l[0],l[1],l[2]);this._renderWorldCopies&&(h.x=o.wrap(h.x,0,1)),this._position=h}else this._position=null}lookAtPoint(l,h){if(this.orientation=null,!this.position)return;const y=this.position,_=this._elevation?this._elevation.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(l)):0,w=o.MercatorCoordinate.fromLngLat(l,_),C=[w.x-y.x,w.y-y.y,w.z-y.z];h||(h=[0,0,1]),h[2]=Math.abs(h[2]),this.orientation=eu(C,h)}setPitchBearing(l,h){this.orientation=Kn(o.degToRad(l),o.degToRad(-h))}}class Td{constructor(l,h){this._transform=o.identity([]),this.orientation=h,this.position=l}get mercatorPosition(){const l=this.position;return new o.MercatorCoordinate(l[0],l[1],l[2])}get position(){const l=o.getColumn(this._transform,3);return[l[0],l[1],l[2]]}set position(l){var h;l&&o.setColumn(this._transform,3,[(h=l)[0],h[1],h[2],1])}get orientation(){return this._orientation}set orientation(l){this._orientation=l||o.identity$1([]),l&&Ed(this._transform,this._orientation)}getPitchBearing(){const l=this.forward(),h=this.right();return{bearing:Math.atan2(-h[1],h[0]),pitch:Math.atan2(Math.sqrt(l[0]*l[0]+l[1]*l[1]),-l[2])}}setPitchBearing(l,h){this._orientation=Kn(l,h),Ed(this._transform,this._orientation)}forward(){const l=o.getColumn(this._transform,2);return[-l[0],-l[1],-l[2]]}up(){const l=o.getColumn(this._transform,1);return[-l[0],-l[1],-l[2]]}right(){const l=o.getColumn(this._transform,0);return[l[0],l[1],l[2]]}getCameraToWorld(l,h){const y=new Float64Array(16);return o.invert(y,this.getWorldToCamera(l,h)),y}getWorldToCameraPosition(l,h,y){const _=this.position;o.scale$2(_,_,-l);const w=new Float64Array(16);return o.fromScaling(w,[y,y,y]),o.translate(w,w,_),w[10]*=h,w}getWorldToCamera(l,h){const y=new Float64Array(16),_=new Float64Array(4),w=this.position;return o.conjugate(_,this._orientation),o.scale$2(w,w,-l),o.fromQuat(y,_),o.translate(y,y,w),y[1]*=-1,y[5]*=-1,y[9]*=-1,y[13]*=-1,y[8]*=h,y[9]*=h,y[10]*=h,y[11]*=h,y}getCameraToClipPerspective(l,h,y,_){const w=new Float64Array(16);return o.perspective(w,l,h,y,_),w}getDistanceToElevation(l,h=!1){const y=l===0?0:o.mercatorZfromAltitude(l,h?o.latFromMercatorY(this.position[1]):this.position[1]),_=this.forward();return(y-this.position[2])/_[2]}clone(){return new Td([...this.position],[...this.orientation])}}function Rl(m,l){const h=Cd(m.projection,m.zoom,m.width,m.height),y=function(w,C,R,P,z){const D=new o.LngLat(R.lng-180*La,R.lat),q=new o.LngLat(R.lng+180*La,R.lat),te=w.project(D.lng,D.lat),ce=w.project(q.lng,q.lat),fe=-Math.atan2(ce.y-te.y,ce.x-te.x),he=o.MercatorCoordinate.fromLngLat(R);he.y=o.clamp(he.y,-1+La,1-La);const me=he.toLngLat(),H=w.project(me.lng,me.lat),le=o.MercatorCoordinate.fromLngLat(me);le.x+=La;const _e=le.toLngLat(),xe=w.project(_e.lng,_e.lat),Oe=Rd(xe.x-H.x,xe.y-H.y,fe),Fe=o.MercatorCoordinate.fromLngLat(me);Fe.y+=La;const ze=Fe.toLngLat(),He=w.project(ze.lng,ze.lat),qe=Rd(He.x-H.x,He.y-H.y,fe),it=Math.abs(Oe.x)/Math.abs(qe.y),Pt=o.identity([]);o.rotateZ(Pt,Pt,-fe*(1-(z?0:P)));const et=o.identity([]);return o.scale(et,et,[1,1-(1-it)*P,1]),et[4]=-qe.x/qe.y*P,o.rotateZ(et,et,fe),o.multiply(et,Pt,et),et}(m.projection,0,m.center,h,l),_=Dy(m);return o.scale(y,y,[_,_,1]),y}function Dy(m){const l=m.projection,h=Cd(m.projection,m.zoom,m.width,m.height),y=zy(l,m.center),_=zy(l,o.LngLat.convert(l.center));return Math.pow(2,y*h+(1-h)*_)}function Cd(m,l,h,y,_=1/0){const w=m.range;if(!w)return 0;const C=Math.min(_,Math.max(h,y)),R=Math.log(C/1024)/Math.LN2;return o.smoothstep(w[0]+R,w[1]+R,l)}const La=1/4e4;function zy(m,l){const h=o.clamp(l.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),y=new o.LngLat(l.lng-180*La,h),_=new o.LngLat(l.lng+180*La,h),w=m.project(y.lng,h),C=m.project(_.lng,h),R=o.MercatorCoordinate.fromLngLat(y),P=o.MercatorCoordinate.fromLngLat(_),z=C.x-w.x,D=C.y-w.y,q=P.x-R.x,te=P.y-R.y,ce=Math.sqrt((q*q+te*te)/(z*z+D*D));return Math.log(ce)/Math.LN2}function Rd(m,l,h){const y=Math.cos(h),_=Math.sin(h);return{x:m*y-l*_,y:m*_+l*y}}class Ml{constructor(l,h,y,_,w,C,R){this.tileSize=512,this._renderWorldCopies=w===void 0||w,this._minZoom=l||0,this._maxZoom=h||22,this._minPitch=y??0,this._maxPitch=_??60,this.setProjection(C),this.setMaxBounds(R),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Sd,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Td,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const l=new Ml(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return l._elevation=this._elevation,l._centerAltitude=this._centerAltitude,l._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,l.tileSize=this.tileSize,l.mercatorFromTransition=this.mercatorFromTransition,l.width=this.width,l.height=this.height,l.cameraElevationReference=this.cameraElevationReference,l._center=this._center,l._setZoom(this.zoom),l._seaLevelZoom=this._seaLevelZoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._nearZ=this._nearZ,l._farZ=this._farZ,l._averageElevation=this._averageElevation,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._camera=this._camera.clone(),l._calcMatrices(),l.freezeTileCoverage=this.freezeTileCoverage,l.frustumCorners=this.frustumCorners,l}get elevation(){return this._elevation}set elevation(l){this._elevation!==l&&(this._elevation=l,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(l,h=!1){const y=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||y)&&this._updateCameraOnTerrain(),(l||y)&&this._constrainCamera(h),this._calcMatrices()}getProjection(){return o.pick(this.projection,["name","center","parallels"])}setProjection(l){this.projectionOptions=l||{name:"mercator"};const h=this.projection?this.getProjection():void 0;this.projection=o.getProjection(this.projectionOptions);const y=!x(h,this.getProjection());return y&&this._calcMatrices(),this.mercatorFromTransition=!1,y}setMercatorFromTransition(){const l=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=o.getProjection({name:"mercator"});const h=l!==this.projection.name;return h&&this._calcMatrices(),h}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get cameraWorldSize(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return o.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.Point(this.width,this.height)}get bearing(){return o.wrap(this.rotation,-180,180)}set bearing(l){this.rotation=l}get rotation(){return-this.angle/Math.PI*180}set rotation(l){const h=-l*Math.PI/180;var y;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=(y=new o.ARRAY_TYPE(4),o.ARRAY_TYPE!=Float32Array&&(y[1]=0,y[2]=0),y[0]=1,y[3]=1,y),function(_,w,C){var R=w[0],P=w[1],z=w[2],D=w[3],q=Math.sin(C),te=Math.cos(C);_[0]=R*te+z*q,_[1]=P*te+D*q,_[2]=R*-q+z*te,_[3]=P*-q+D*te}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const h=o.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const l=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/l)}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=o.degToRad(l),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(l){this._averageElevation=l,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(l){const h=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._setZoom(h),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(l){this._zoom=l,this.scale=this.zoomScale(l),this.tileZoom=Math.floor(l),this.zoomFraction=l-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const l=this._elevation;this._centerAltitude=l.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=l.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const l=this._elevation,h=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],y=this.horizonLineFromTop();let _=0,w=0;for(let C=0;C<h.length;C++){const R=new o.Point(h[C][0]*this.width,y+h[C][1]*(this.height-y)),P=l.pointCoordinate(R);if(!P)continue;const z=1/Math.hypot(P[0]-this._camera.position[0],P[1]-this._camera.position[1]);_+=P[3]*z,w+=z}return w===0?NaN:_/w}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const l=this._seaLevelZoom,h=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),y=this.pixelsPerMeter/this.worldSize*h,_=this._mercatorZfromZoom(l),w=this._mercatorZfromZoom(this._maxZoom),C=Math.max(_-y,w);this._setZoom(this._zoomFromMercatorZ(C))}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}computeZoomRelativeTo(l){const h=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,l.toAltitude()));let y;y=l.z<this._camera.position[2]?[h.x,h.y,h.z]:[l.x,l.y,l.z];const _=o.length(o.sub([],this._camera.position,y));return o.clamp(this._zoomFromMercatorZ(_),this._minZoom,this._maxZoom)}setFreeCameraOptions(l){if(!this.height||!l.position&&!l.orientation)return;this._updateCameraState();let h=!1;if(l.orientation&&!o.exactEquals(l.orientation,this._camera.orientation)&&(h=this._setCameraOrientation(l.orientation)),l.position){const y=[l.position.x,l.position.y,l.position.z];o.exactEquals$1(y,this._camera.position)||(this._setCameraPosition(y),h=!0)}h&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const l=this._camera.position,h=new Oy;return h.position=new o.MercatorCoordinate(l[0],l[1],l[2]),h.orientation=this._camera.orientation,h._elevation=this.elevation,h._renderWorldCopies=this.renderWorldCopies,h}_setCameraOrientation(l){if(!o.length$1(l))return!1;o.normalize$1(l,l);const h=o.transformQuat([],[0,0,-1],l),y=o.transformQuat([],[0,-1,0],l);if(y[2]<0)return!1;const _=eu(h,y);return!!_&&(this._camera.orientation=_,!0)}_setCameraPosition(l){const h=this.zoomScale(this.minZoom)*this.tileSize,y=this.zoomScale(this.maxZoom)*this.tileSize,_=this.cameraToCenterDistance;l[2]=o.clamp(l[2],_/y,_/h),this._camera.position=l}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,h,y){this._unmodified=!1,this._edgeInsets.interpolate(l,h,y),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const h=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,h)}getVisibleUnwrappedCoordinates(l){const h=[new o.UnwrappedTileID(0,l)];if(this.renderWorldCopies){const y=this.pointCoordinate(new o.Point(0,0)),_=this.pointCoordinate(new o.Point(this.width,0)),w=this.pointCoordinate(new o.Point(this.width,this.height)),C=this.pointCoordinate(new o.Point(0,this.height)),R=Math.floor(Math.min(y.x,_.x,w.x,C.x)),P=Math.floor(Math.max(y.x,_.x,w.x,C.x)),z=1;for(let D=R-z;D<=P+z;D++)D!==0&&h.push(new o.UnwrappedTileID(D,l))}return h}coveringTiles(l){let h=this.coveringZoomLevel(l);const y=h,_=this.elevation&&!l.isTerrainDEM,w=this.projection.name==="mercator";if(l.minzoom!==void 0&&h<l.minzoom)return[];l.maxzoom!==void 0&&h>l.maxzoom&&(h=l.maxzoom);const C=this.locationCoordinate(this.center),R=this.center.lat,P=1<<h,z=[P*C.x,P*C.y,0],D=this.projection.name==="globe",q=!D,te=o.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,h,q),ce=D?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),fe=P*o.mercatorZfromAltitude(1,this.center.lat),he=this._camera.position[2]/o.mercatorZfromAltitude(1,this.center.lat),me=[P*ce.x,P*ce.y,he*(q?1:fe)],H=this.cameraToCenterDistance/l.tileSize*(l.roundZoom?1:.502),le=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?h:0,_e=l.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,xe=l.isTerrainDEM?-_e:this._elevation?this._elevation.getMinElevationBelowMSL():0,Oe=this.projection.isReprojectedInTileSpace?Dy(this):1,Fe=rt=>{const Lt=new o.MercatorCoordinate(rt.x+25e-6,rt.y,rt.z),wt=new o.MercatorCoordinate(rt.x,rt.y+25e-6,rt.z),Ot=rt.toLngLat(),un=Lt.toLngLat(),Tn=wt.toLngLat(),en=this.locationCoordinate(Ot),yn=this.locationCoordinate(un),Fn=this.locationCoordinate(Tn),On=Math.hypot(yn.x-en.x,yn.y-en.y),cn=Math.hypot(Fn.x-en.x,Fn.y-en.y);return Math.sqrt(On*cn)*Oe/25e-6},ze=rt=>{const yt=_e,Lt=xe;return{aabb:o.tileAABB(this,P,0,0,0,rt,Lt,yt,this.projection),zoom:0,x:0,y:0,minZ:Lt,maxZ:yt,wrap:rt,fullyVisible:!1}},He=[];let qe=[];const it=h,Pt=l.reparseOverscaled?y:h,et=rt=>rt*rt,vt=et((he-this._centerAltitude)*fe),st=rt=>{if(!this._elevation||!rt.tileID||!w)return;const yt=this._elevation.getMinMaxForTile(rt.tileID),Lt=rt.aabb;yt?(Lt.min[2]=yt.min,Lt.max[2]=yt.max,Lt.center[2]=(Lt.min[2]+Lt.max[2])/2):(rt.shouldSplit=kt(rt),rt.shouldSplit||(Lt.min[2]=Lt.max[2]=Lt.center[2]=this._centerAltitude))},kt=rt=>{if(rt.zoom<le)return!0;if(rt.zoom===it)return!1;if(rt.shouldSplit!=null)return rt.shouldSplit;const yt=rt.aabb.distanceX(me),Lt=rt.aabb.distanceY(me);let wt=vt,Ot=1;if(D){wt=et(rt.aabb.distanceZ(me));const en=Math.pow(2,rt.zoom),yn=o.latFromMercatorY((rt.y+1)/en),Fn=o.latFromMercatorY(rt.y/en),On=Math.min(Math.max(R,yn),Fn),cn=o.circumferenceAtLatitude(On)/o.circumferenceAtLatitude(R);if(Ot=On===R?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,cn/this._mercatorScaleRatio),this.zoom<=o.GLOBE_ZOOM_THRESHOLD_MIN&&rt.zoom===it-1&&cn>=.9)return!0}else if(_&&(wt=et(rt.aabb.distanceZ(me)*fe)),this.projection.isReprojectedInTileSpace&&y<=5){const en=Math.pow(2,rt.zoom),yn=Fe(new o.MercatorCoordinate((rt.x+.5)/en,(rt.y+.5)/en));Ot=yn>.85?1:yn}const un=yt*yt+Lt*Lt+wt,Tn=et((1<<it-rt.zoom)*H*Ot*((en,yn)=>{if(yn*et(.707)<en)return 1;const Fn=Math.sqrt(yn/en);return Fn/(1.4144271570014144+(Math.pow(1.1,Fn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(wt,vt),un));return un<Tn};if(this.renderWorldCopies)for(let rt=1;rt<=3;rt++)He.push(ze(-rt)),He.push(ze(rt));for(He.push(ze(0));He.length>0;){const rt=He.pop(),yt=rt.x,Lt=rt.y;let wt=rt.fullyVisible;if(!wt){const Ot=rt.aabb.intersects(te);if(Ot===0)continue;wt=Ot===2}if(rt.zoom!==it&&kt(rt))for(let Ot=0;Ot<4;Ot++){const un=(yt<<1)+Ot%2,Tn=(Lt<<1)+(Ot>>1),en={aabb:w?rt.aabb.quadrant(Ot):o.tileAABB(this,P,rt.zoom+1,un,Tn,rt.wrap,rt.minZ,rt.maxZ,this.projection),zoom:rt.zoom+1,x:un,y:Tn,wrap:rt.wrap,fullyVisible:wt,tileID:void 0,shouldSplit:void 0,minZ:rt.minZ,maxZ:rt.maxZ};_&&!D&&(en.tileID=new o.OverscaledTileID(rt.zoom+1===it?Pt:rt.zoom+1,rt.wrap,rt.zoom+1,un,Tn),st(en)),He.push(en)}else{const Ot=rt.zoom===it?Pt:rt.zoom;if(l.minzoom&&l.minzoom>Ot)continue;const un=z[0]-(.5+yt+(rt.wrap<<rt.zoom))*(1<<h-rt.zoom),Tn=z[1]-.5-Lt,en=rt.tileID?rt.tileID:new o.OverscaledTileID(Ot,rt.wrap,rt.zoom,yt,Lt);qe.push({tileID:en,distanceSq:un*un+Tn*Tn})}}if(this.fogCullDistSq){const rt=this.fogCullDistSq,yt=this.horizonLineFromTop();qe=qe.filter(Lt=>{const wt=[0,0,0,1],Ot=[o.EXTENT,o.EXTENT,0,1],un=this.calculateFogTileMatrix(Lt.tileID.toUnwrapped());o.transformMat4$1(wt,wt,un),o.transformMat4$1(Ot,Ot,un);const Tn=o.getAABBPointSquareDist(wt,Ot);if(Tn===0)return!0;let en=!1;const yn=this._elevation;if(yn&&Tn>rt&&yt!==0){const Fn=this.calculateProjMatrix(Lt.tileID.toUnwrapped());let On;l.isTerrainDEM||(On=yn.getMinMaxForTile(Lt.tileID)),On||(On={min:xe,max:_e});const cn=o.furthestTileCorner(this.rotation),or=[cn[0]*o.EXTENT,cn[1]*o.EXTENT,On.max];o.transformMat4(or,or,Fn),en=(1-or[1])*this.height*.5<yt}return Tn<rt||en})}return qe.sort((rt,yt)=>rt.distanceSq-yt.distanceSq).map(rt=>rt.tileID)}resize(l,h){this.width=l,this.height=h,this.pixelsToGLUnits=[2/l,-2/h],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const h=o.clamp(l.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),y=this.projection.project(l.lng,h);return new o.Point(y.x*this.worldSize,y.y*this.worldSize)}unproject(l){return this.projection.unproject(l.x/this.worldSize,l.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/o.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(l,h){let y,_;const w=this.centerPoint;if(this.projection.name==="globe"){const R=this.worldSize;y=(h.x-w.x)/R,_=(h.y-w.y)/R}else{const R=this.pointCoordinate(h),P=this.pointCoordinate(w);y=R.x-P.x,_=R.y-P.y}const C=this.locationCoordinate(l);this.setLocation(new o.MercatorCoordinate(C.x-y,C.y-_))}setLocation(l){this.center=this.coordinateLocation(l),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(l){return this.projection.locationPoint(this,l)}locationPoint3D(l){return this.projection.locationPoint(this,l,!0)}pointLocation(l){return this.coordinateLocation(this.pointCoordinate(l))}pointLocation3D(l){return this.coordinateLocation(this.pointCoordinate3D(l))}locationCoordinate(l,h){const y=h?o.mercatorZfromAltitude(h,l.lat):void 0,_=this.projection.project(l.lng,l.lat);return new o.MercatorCoordinate(_.x,_.y,y)}coordinateLocation(l){return this.projection.unproject(l.x,l.y)}pointRayIntersection(l,h){const y=h??this._centerAltitude,_=[l.x,l.y,0,1],w=[l.x,l.y,1,1];o.transformMat4$1(_,_,this.pixelMatrixInverse),o.transformMat4$1(w,w,this.pixelMatrixInverse);const C=w[3];o.scale$1(_,_,1/_[3]),o.scale$1(w,w,1/C);const R=_[2],P=w[2];return{p0:_,p1:w,t:R===P?0:(y-R)/(P-R)}}screenPointToMercatorRay(l){const h=[l.x,l.y,0,1],y=[l.x,l.y,1,1];return o.transformMat4$1(h,h,this.pixelMatrixInverse),o.transformMat4$1(y,y,this.pixelMatrixInverse),o.scale$1(h,h,1/h[3]),o.scale$1(y,y,1/y[3]),h[2]=o.mercatorZfromAltitude(h[2],this._center.lat)*this.worldSize,y[2]=o.mercatorZfromAltitude(y[2],this._center.lat)*this.worldSize,o.scale$1(h,h,1/this.worldSize),o.scale$1(y,y,1/this.worldSize),new o.Ray([h[0],h[1],h[2]],o.normalize([],o.sub([],y,h)))}rayIntersectionCoordinate(l){const{p0:h,p1:y,t:_}=l,w=o.mercatorZfromAltitude(h[2],this._center.lat),C=o.mercatorZfromAltitude(y[2],this._center.lat);return new o.MercatorCoordinate(o.number(h[0],y[0],_)/this.worldSize,o.number(h[1],y[1],_)/this.worldSize,o.number(w,C,_))}pointCoordinate(l,h=this._centerAltitude){return this.projection.pointCoordinate(this,l.x,l.y,h)}pointCoordinate3D(l){if(!this.elevation)return this.pointCoordinate(l);let h=this.projection.pointCoordinate3D(this,l.x,l.y);if(h)return new o.MercatorCoordinate(h[0],h[1],h[2]);let y=0,_=this.horizonLineFromTop();if(l.y>_)return this.pointCoordinate(l);const w=.02*_,C=l.clone();for(let R=0;R<10&&_-y>w;R++){C.y=o.number(y,_,.66);const P=this.projection.pointCoordinate3D(this,C.x,C.y);P?(_=C.y,h=P):y=C.y}return h?new o.MercatorCoordinate(h[0],h[1],h[2]):this.pointCoordinate(l)}isPointAboveHorizon(l){return this.projection.isPointAboveHorizon(this,l)}isPointOnSurface(l){if(l.y<0||l.y>this.height||l.x<0||l.x>this.width)return!1;if(this.elevation||this.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(l);const h=this.pointCoordinate(l);return h.y>=0&&h.y<=1}_coordinatePoint(l,h){const y=h&&this.elevation?this.elevation.getAtPointOrZero(l,this._centerAltitude):this._centerAltitude,_=[l.x*this.worldSize,l.y*this.worldSize,y+l.toAltitude(),1];return o.transformMat4$1(_,_,this.pixelMatrix),_[3]>0?new o.Point(_[0]/_[3],_[1]/_[3]):new o.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:l,left:h}=this._edgeInsets,y=this.height-this._edgeInsets.bottom,_=this.width-this._edgeInsets.right,w=this.pointLocation3D(new o.Point(h,l)),C=this.pointLocation3D(new o.Point(_,l)),R=this.pointLocation3D(new o.Point(_,y)),P=this.pointLocation3D(new o.Point(h,y));let z=Math.min(w.lng,C.lng,R.lng,P.lng),D=Math.max(w.lng,C.lng,R.lng,P.lng),q=Math.min(w.lat,C.lat,R.lat,P.lat),te=Math.max(w.lat,C.lat,R.lat,P.lat);const ce=Math.pow(2,-this.zoom)/16*270,fe=this.projection.name==="globe"?1:4,he=(me,H,le,_e,xe)=>{const Oe=(me+le)/2,Fe=(H+_e)/2,ze=new o.Point(Oe,Fe),{lng:He,lat:qe}=this.pointLocation3D(ze),it=Math.max(0,z-He,q-qe,He-D,qe-te);z=Math.min(z,He),D=Math.max(D,He),q=Math.min(q,qe),te=Math.max(te,qe),(xe<fe||it>ce)&&(he(me,H,Oe,Fe,xe+1),he(Oe,Fe,le,_e,xe+1))};if(he(h,l,_,l,1),he(_,l,_,y,1),he(_,y,h,y,1),he(h,y,h,l,1),this.projection.name==="globe"){const[me,H]=o.polesInViewport(this);me?(te=90,D=180,z=-180):H&&(q=-90,D=180,z=-180)}return new o.LngLatBounds(new o.LngLat(z,q),new o.LngLat(D,te))}_getBoundsRectangular(l,h){const{top:y,left:_}=this._edgeInsets,w=this.height-this._edgeInsets.bottom,C=this.width-this._edgeInsets.right,R=new o.Point(_,y),P=new o.Point(C,y),z=new o.Point(C,w),D=new o.Point(_,w);let q=this.pointCoordinate(R,l),te=this.pointCoordinate(P,l);const ce=this.pointCoordinate(z,h),fe=this.pointCoordinate(D,h),he=(me,H)=>(H.y-me.y)/(H.x-me.x);return q.y>1&&te.y>=0?q=new o.MercatorCoordinate((1-fe.y)/he(fe,q)+fe.x,1):q.y<0&&te.y<=1&&(q=new o.MercatorCoordinate(-fe.y/he(fe,q)+fe.x,0)),te.y>1&&q.y>=0?te=new o.MercatorCoordinate((1-ce.y)/he(ce,te)+ce.x,1):te.y<0&&q.y<=1&&(te=new o.MercatorCoordinate(-ce.y/he(ce,te)+ce.x,0)),new o.LngLatBounds().extend(this.coordinateLocation(q)).extend(this.coordinateLocation(te)).extend(this.coordinateLocation(fe)).extend(this.coordinateLocation(ce))}_getBoundsRectangularTerrain(){const l=this.elevation;if(!l.visibleDemTiles.length||l.isUsingMockSource())return this._getBoundsRectangular(0,0);const h=l.visibleDemTiles.reduce((y,_)=>{if(_.dem){const w=_.dem.tree;y.min=Math.min(y.min,w.minimums[0]),y.max=Math.max(y.max,w.maximums[0])}return y},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(h.min*l.exaggeration(),h.max*l.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(l=!0){const h=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,y=this.height/2-h*(1-this._horizonShift);return l?Math.max(0,y):y}getMaxBounds(){return this.maxBounds}setMaxBounds(l){this.maxBounds=l,this.minLat=-o.MAX_MERCATOR_LATITUDE,this.maxLat=o.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,l&&(this.minLat=l.getSouth(),this.maxLat=l.getNorth(),this.minLng=l.getWest(),this.maxLng=l.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=o.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=o.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=o.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=o.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(l,h){return this.projection.createTileMatrix(this,h,l)}calculateDistanceTileData(l){const h=l.key,y=this._distanceTileDataCache;if(y[h])return y[h];const _=l.canonical,w=1/this.height,C=this.cameraWorldSize,R=C/this.zoomScale(_.z),P=(_.x+Math.pow(2,_.z)*l.wrap)*R,z=_.y*R,D=this.point;D.x*=C/this.worldSize,D.y*=C/this.worldSize;const q=this.angle,te=Math.sin(-q),ce=-Math.cos(-q);return y[h]={bearing:[te,ce],center:[(D.x-P)*w,(D.y-z)*w],scale:R/o.EXTENT*w},y[h]}calculateFogTileMatrix(l){const h=l.key,y=this._fogTileMatrixCache;if(y[h])return y[h];const _=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,l);return o.multiply(_,this.worldToFogMatrix,_),y[h]=new Float32Array(_),y[h]}calculateProjMatrix(l,h=!1){const y=l.key,_=h?this._alignedProjMatrixCache:this._projMatrixCache;if(_[y])return _[y];const w=this.calculatePosMatrix(l,this.worldSize);return o.multiply(w,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:h?this.alignedProjMatrix:this.projMatrix,w),_[y]=new Float32Array(w),_[y]}calculatePixelsToTileUnitsMatrix(l){const h=l.tileID.key,y=this._pixelsToTileUnitsCache;if(y[h])return y[h];const _=function(w,C){const{scale:R}=w.tileTransform,P=R*o.EXTENT/(w.tileSize*Math.pow(2,C.zoom-w.tileID.overscaledZ+w.tileID.canonical.z));return z=new Float32Array(4),te=(D=C.inverseAdjustmentMatrix)[1],ce=D[2],fe=D[3],me=(q=[P,P])[1],z[0]=D[0]*(he=q[0]),z[1]=te*he,z[2]=ce*me,z[3]=fe*me,z;var z,D,q,te,ce,fe,he,me}(l,this);return y[h]=_,y[h]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const l=1/this.worldSize,h=o.fromScaling([],[l,l,l]);return o.multiply(h,h,this.globeMatrix),h}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const l=this._elevation;this._updateCameraState();const h=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,y=this._computeCameraPosition(h),_=this._camera.forward(),w=o.mercatorZfromAltitude(1,this._center.lat);y[2]/=w,_[2]/=w,o.normalize(_,_);const C=l.raycast(y,_,l.exaggeration());if(C){const R=o.scaleAndAdd([],y,_,C),P=new o.MercatorCoordinate(R[0],R[1],o.mercatorZfromAltitude(R[2],o.latFromMercatorY(R[1]))),z=(P.z+o.length([P.x-y[0],P.y-y[1],P.z-y[2]*w]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(z),this._centerAltitude=P.toAltitude(),this._center=this.coordinateLocation(P),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(l=!1){if(!this._elevation)return;const h=this._elevation,y=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,_=this._computeCameraPosition(y),w=h.getAtPointOrZero(new o.MercatorCoordinate(..._)),C=this.pixelsPerMeter/this.worldSize*w,R=this._minimumHeightOverTerrain(),P=_[2]-C;if(P<=R)if(P<0||l){const z=this.locationCoordinate(this._center,this._centerAltitude),D=[_[0],_[1],z.z-_[2]],q=o.length(D);D[2]-=(R-P)/this._pixelsPerMercatorPixel;const te=o.length(D);if(te===0)return;o.scale$2(D,D,q/te*this._pixelsPerMercatorPixel),this._camera.position=[_[0],_[1],z.z*this._pixelsPerMercatorPixel-D[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const l=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||l){const te=this.center;return te.lat=o.clamp(te.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!l)&&(te.lng=o.clamp(te.lng,this.minLng,this.maxLng)),this.center=te,void(this._constraining=!1)}const h=this._unmodified,{x:y,y:_}=this.point;let w=0,C=y,R=_;const P=this.width/2,z=this.height/2,D=this.worldMinY*this.scale,q=this.worldMaxY*this.scale;if(_-z<D&&(R=D+z),_+z>q&&(R=q-z),q-D<this.height&&(w=Math.max(w,this.height/(q-D)),R=(q+D)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const te=this.worldMinX*this.scale,ce=this.worldMaxX*this.scale,fe=this.worldSize/2-(te+ce)/2;C=(y+fe+this.worldSize)%this.worldSize-fe,C-P<te&&(C=te+P),C+P>ce&&(C=ce-P),ce-te<this.width&&(w=Math.max(w,this.width/(ce-te)),C=(ce+te)/2)}C===y&&R===_||(this.center=this.unproject(new o.Point(C,R))),w&&(this.zoom+=this.scaleZoom(w)),this._constrainCamera(),this._unmodified=h,this._constraining=!1}_minZoomForBounds(){let l=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(l=Math.max(l,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),l}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,h=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=o.mercatorZfromAltitude(1,this.center.lat)/o.mercatorZfromAltitude(1,o.GLOBE_SCALE_MATCH_LATITUDE));const y=Cd(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,y),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const _=this.projection.zAxisUnit==="meters"?h:1,w=this._camera.getWorldToCamera(this.worldSize,_),C=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);C[8]=2*-l.x/this.width,C[9]=2*l.y/this.height;let R=o.mul([],C,w);if(this.projection.isReprojectedInTileSpace){const Fe=this.locationCoordinate(this.center),ze=o.identity([]);o.translate(ze,ze,[Fe.x*this.worldSize,Fe.y*this.worldSize,0]),o.multiply(ze,ze,Rl(this)),o.translate(ze,ze,[-Fe.x*this.worldSize,-Fe.y*this.worldSize,0]),o.multiply(R,R,ze),this.inverseAdjustmentMatrix=function(He){const qe=Rl(He,!0);return J([],[qe[0],qe[1],qe[4],qe[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=o.scale([],R,[this.worldSize,this.worldSize,this.worldSize/_,1]),this.projMatrix=R,this.invProjMatrix=o.invert(new Float64Array(16),this.projMatrix);const P=o.invert([],C);this.frustumCorners=o.FrustumCorners.fromInvProjectionMatrix(P,this.horizonLineFromTop(),this.height);const z=new Float32Array(16);o.identity(z),o.scale(z,z,[1,-1,1]),o.rotateX(z,z,this._pitch),o.rotateZ(z,z,this.angle);const D=o.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),q=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;D[8]=2*-l.x/this.width,D[9]=2*(l.y+q)/this.height,this.skyboxMatrix=o.multiply(z,D,z);const te=this.point,ce=te.x,fe=te.y,he=this.width%2/2,me=this.height%2/2,H=Math.cos(this.angle),le=Math.sin(this.angle),_e=ce-Math.round(ce)+H*he+le*me,xe=fe-Math.round(fe)+H*me+le*he,Oe=new Float64Array(R);if(o.translate(Oe,Oe,[_e>.5?_e-1:_e,xe>.5?xe-1:xe,0]),this.alignedProjMatrix=Oe,R=o.create(),o.scale(R,R,[this.width/2,-this.height/2,1]),o.translate(R,R,[1,-1,0]),this.labelPlaneMatrix=R,R=o.create(),o.scale(R,R,[1,-1,1]),o.translate(R,R,[-1,-1,0]),o.scale(R,R,[2/this.width,2/this.height,1]),this.glCoordMatrix=R,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},R=o.invert(new Float64Array(16),this.pixelMatrix),!R)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=R,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=o.calculateGlobeMatrix(this);const Fe=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=o.transformMat4(Fe,Fe,w),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=R;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const l=this.cameraWorldSizeForFog,h=this.cameraPixelsPerMeter,y=this._camera.position,_=1/this.height/this._pixelsPerMercatorPixel,w=[l,l,h];o.scale$2(w,w,_),o.scale$2(y,y,-1),o.multiply$2(y,y,w);const C=o.create();o.translate(C,C,y),o.scale(C,C,w),this.mercatorFogMatrix=C,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(l,h,_)}_computeCameraPosition(l){const h=(l=l||this.pixelsPerMeter)/this.pixelsPerMeter,y=this._camera.forward(),_=this.point,w=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*h-l/this.worldSize*this._centerAltitude;return[_.x/this.worldSize-y[0]*w,_.y/this.worldSize-y[1]*w,l/this.worldSize*this._centerAltitude-y[2]*w]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(l){const h=this._maxCameraBoundsDistance()*Math.cos(this._pitch),y=this._camera.position[2],_=l[2];let w=1;this.projection.wrap&&(this.center=this.center.wrap()),_>0&&(w=Math.min((h-y)/_,1)),this._camera.position=o.scaleAndAdd([],this._camera.position,l,w),this._updateStateFromCamera()}_updateStateFromCamera(){const l=this._camera.position,h=this._camera.forward(),{pitch:y,bearing:_}=this._camera.getPitchBearing(),w=o.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,C=this._mercatorZfromZoom(this._maxZoom)*Math.cos(o.degToRad(this._maxPitch)),R=Math.max((l[2]-w)/Math.cos(y),C),P=this._zoomFromMercatorZ(R);o.scaleAndAdd(l,l,h,R),this._pitch=o.clamp(y,o.degToRad(this.minPitch),o.degToRad(this.maxPitch)),this.angle=o.wrap(_,-Math.PI,Math.PI),this._setZoom(o.clamp(P,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new o.MercatorCoordinate(l[0],l[1],l[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(l){return Math.pow(2,l)*this.tileSize}_mercatorZfromZoom(l){return this.cameraToCenterDistance/this._worldSizeFromZoom(l)}_minimumHeightOverTerrain(){const l=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(l)}_zoomFromMercatorZ(l){return this.scaleZoom(this.cameraToCenterDistance/(l*this.tileSize))}zoomFromMercatorZAdjusted(l){let h=0,y=o.GLOBE_ZOOM_THRESHOLD_MAX,_=0,w=1/0;for(;y-h>1e-6&&y>h;){const C=h+.5*(y-h),R=this.tileSize*Math.pow(2,C),P=this.getCameraToCenterDistance(this.projection,C,R),z=this.scaleZoom(P/(l*this.tileSize)),D=Math.abs(C-z);D<w&&(w=D,_=C),C<z?h=C:y=C}return _}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(o.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(l,h){const y=Math.min(l.x,h.x),_=Math.max(l.x,h.x),w=Math.min(l.y,h.y),C=Math.max(l.y,h.y);if(w<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const R=[new o.Point(y,w),new o.Point(_,C),new o.Point(y,C),new o.Point(_,w)],P=this.renderWorldCopies?-3:0,z=this.renderWorldCopies?4:1;for(const D of R){const q=this.pointRayIntersection(D);if(q.t<0)return!0;const te=this.rayIntersectionCoordinate(q);if(te.x<P||te.y<0||te.x>z||te.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+o.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new o.Point(0,0),new o.Point(this.width,this.height))}zoomDeltaToMovement(l,h){const y=o.length(o.sub([],this._camera.position,l)),_=this._zoomFromMercatorZ(y)+h;return y-this._mercatorZfromZoom(_)}getCameraPoint(){if(this.projection.name==="globe"){const l=function([h,y,_],w){const C=[h,y,_,1];o.transformMat4$1(C,C,w);const R=C[3]=Math.max(C[3],1e-6);return C[0]/=R,C[1]/=R,C[2]/=R,C}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new o.Point(l[0],l[1])}{const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,l))}}getCameraToCenterDistance(l,h=this.zoom,y=this.worldSize){const _=Cd(l,h,this.width,this.height,1024),w=l.pixelSpaceConversion(this.center.lat,y,_);return .5/Math.tan(.5*this._fov)*this.height*w}getWorldToCameraMatrix(){const l=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&o.multiply(l,l,this.globeMatrix),l}}function Al(m,l){let h=!1,y=null;const _=()=>{y=null,h&&(m(),y=setTimeout(_,l),h=!1)};return()=>(h=!0,y||_(),y)}class rp{constructor(l){this._hashName=l&&encodeURIComponent(l),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Al(this._updateHashUnthrottled.bind(this),300)}addTo(l){return this._map=l,o.window.addEventListener("hashchange",this._onHashChange,!1),l.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),o.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const l=this._map;if(!l)return"";const h=tu(l);if(this._hashName){const y=this._hashName;let _=!1;const w=o.window.location.hash.slice(1).split("&").map(C=>{const R=C.split("=")[0];return R===y?(_=!0,`${R}=${h}`):C}).filter(C=>C);return _||w.push(`${y}=${h}`),`#${w.join("&")}`}return`#${h}`}_getCurrentHash(){const l=o.window.location.hash.replace("#","");if(this._hashName){let h;return l.split("&").map(y=>y.split("=")).forEach(y=>{y[0]===this._hashName&&(h=y)}),(h&&h[1]||"").split("/")}return l.split("/")}_onHashChange(){const l=this._map;if(!l)return!1;const h=this._getCurrentHash();if(h.length>=3&&!h.some(y=>isNaN(y))){const y=l.dragRotate.isEnabled()&&l.touchZoomRotate.isEnabled()?+(h[3]||0):l.getBearing();return l.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:y,pitch:+(h[4]||0)}),!0}return!1}_updateHashUnthrottled(){const l=o.window.location.href.replace(/(#.+)?$/,this.getHashString());o.window.history.replaceState(o.window.history.state,null,l)}}function tu(m,l){const h=m.getCenter(),y=Math.round(100*m.getZoom())/100,_=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,_),C=Math.round(h.lng*w)/w,R=Math.round(h.lat*w)/w,P=m.getBearing(),z=m.getPitch();let D=l?`/${C}/${R}/${y}`:`${y}/${R}/${C}`;return(P||z)&&(D+="/"+Math.round(10*P)/10),z&&(D+=`/${Math.round(z)}`),D}const nu={linearity:.3,easing:o.bezier(0,0,.3,1)},Md=o.extend({deceleration:2500,maxSpeed:1400},nu),Ad=o.extend({deceleration:20,maxSpeed:1400},nu),Xt=o.extend({deceleration:1e3,maxSpeed:360},nu),jo=o.extend({deceleration:1e3,maxSpeed:90},nu);class Fy{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.exported.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,h=o.exported.now();for(;l.length>0&&h-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const h={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:w}of this._inertiaBuffer)h.zoom+=w.zoomDelta||0,h.bearing+=w.bearingDelta||0,h.pitch+=w.pitchDelta||0,w.panDelta&&h.pan._add(w.panDelta),w.around&&(h.around=w.around),w.pinchAround&&(h.pinchAround=w.pinchAround);const y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(h.pan.mag()){const w=iu(h.pan.mag(),y,o.extend({},Md,l||{}));_.offset=h.pan.mult(w.amount/h.pan.mag()),_.center=this._map.transform.center,ru(_,w)}if(h.zoom){const w=iu(h.zoom,y,Ad);_.zoom=this._map.transform.zoom+w.amount,ru(_,w)}if(h.bearing){const w=iu(h.bearing,y,Xt);_.bearing=this._map.transform.bearing+o.clamp(w.amount,-179,179),ru(_,w)}if(h.pitch){const w=iu(h.pitch,y,jo);_.pitch=this._map.transform.pitch+w.amount,ru(_,w)}if(_.zoom||_.bearing){const w=h.pinchAround===void 0?h.around:h.pinchAround;_.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),_.noMoveStart=!0,_}}function ru(m,l){(!m.duration||m.duration<l.duration)&&(m.duration=l.duration,m.easing=l.easing)}function iu(m,l,h){const{maxSpeed:y,linearity:_,deceleration:w}=h,C=o.clamp(m*_/(l/1e3),-y,y),R=Math.abs(C)/(w*_);return{easing:h.easing,duration:1e3*R,amount:C*(R/2)}}class wi extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,h,y,_={}){const w=ae(h.getCanvasContainer(),y),C=h.unproject(w);super(l,o.extend({point:w,lngLat:C,originalEvent:y},_)),this._defaultPrevented=!1,this.target=h}}class ou extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,h,y){const _=l==="touchend"?y.changedTouches:y.touches,w=ue(h.getCanvasContainer(),_),C=w.map(P=>h.unproject(P)),R=w.reduce((P,z,D,q)=>P.add(z.div(q.length)),new o.Point(0,0));super(l,{points:w,point:R,lngLats:C,lngLat:h.unproject(R),originalEvent:y}),this._defaultPrevented=!1}}class kd extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,h,y){super(l,{originalEvent:y}),this._defaultPrevented=!1}}class ip{constructor(l,h){this._map=l,this._clickTolerance=h.clickTolerance}reset(){this._mousedownPos=void 0}wheel(l){return this._firePreventable(new kd(l.type,this._map,l))}mousedown(l,h){return this._mousedownPos=h,this._firePreventable(new wi(l.type,this._map,l))}mouseup(l){this._map.fire(new wi(l.type,this._map,l))}preclick(l){const h=o.extend({},l);h.type="preclick",this._map.fire(new wi(h.type,this._map,h))}click(l,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||(this.preclick(l),this._map.fire(new wi(l.type,this._map,l)))}dblclick(l){return this._firePreventable(new wi(l.type,this._map,l))}mouseover(l){this._map.fire(new wi(l.type,this._map,l))}mouseout(l){this._map.fire(new wi(l.type,this._map,l))}touchstart(l){return this._firePreventable(new ou(l.type,this._map,l))}touchmove(l){this._map.fire(new ou(l.type,this._map,l))}touchend(l){this._map.fire(new ou(l.type,this._map,l))}touchcancel(l){this._map.fire(new ou(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Pd{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(l){this._map.fire(new wi(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new wi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new wi(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class By{constructor(l,h){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,h){this.isEnabled()&&l.shiftKey&&l.button===0&&(B(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(l,h){if(!this._active)return;const y=h,_=this._startPos,w=this._lastPos;if(!_||!w||w.equals(y)||!this._box&&y.dist(_)<this._clickTolerance)return;this._lastPos=y,this._box||(this._box=L("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));const C=Math.min(_.x,y.x),R=Math.max(_.x,y.x),P=Math.min(_.y,y.y),z=Math.max(_.y,y.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${C}px,${P}px)`,this._box.style.width=R-C+"px",this._box.style.height=z-P+"px")})}mouseupWindow(l,h){if(!this._active)return;const y=this._startPos,_=h;if(y&&l.button===0){if(this.reset(),Q(),y.x!==_.x||y.y!==_.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:w=>w.fitScreenCoordinates(y,_,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",l)}}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),$(),delete this._startPos,delete this._lastPos}_fireEvent(l,h){return this._map.fire(new o.Event(l,{originalEvent:h}))}}function Id(m,l){const h={};for(let y=0;y<m.length;y++)h[m[y].identifier]=l[y];return h}class kl{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(l,h,y){(this.centroid||y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=l.timeStamp),y.length===this.numTouches&&(this.centroid=function(_){const w=new o.Point(0,0);for(const C of _)w._add(C);return w.div(_.length)}(h),this.touches=Id(y,h)))}touchmove(l,h,y){if(this.aborted||!this.centroid)return;const _=Id(y,h);for(const w in this.touches){const C=_[w];(!C||C.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(l,h,y){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),y.length===0){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class op{constructor(l){this.singleTap=new kl(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(l,h,y){this.singleTap.touchstart(l,h,y)}touchmove(l,h,y){this.singleTap.touchmove(l,h,y)}touchend(l,h,y){const _=this.singleTap.touchend(l,h,y);if(_){const w=l.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(_)<30;if(w&&C||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class Ox{constructor(){this._zoomIn=new op({numTouches:1,numTaps:2}),this._zoomOut=new op({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,h,y){this._zoomIn.touchstart(l,h,y),this._zoomOut.touchstart(l,h,y)}touchmove(l,h,y){this._zoomIn.touchmove(l,h,y),this._zoomOut.touchmove(l,h,y)}touchend(l,h,y){const _=this._zoomIn.touchend(l,h,y),w=this._zoomOut.touchend(l,h,y);return _?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:C.getZoom()+1,around:C.unproject(_)},{originalEvent:l})}):w?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:C.getZoom()-1,around:C.unproject(w)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Ny={0:1,2:2};class Pl{constructor(l){this.reset(),this._clickTolerance=l.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(l,h){return!1}_move(l,h){return{}}mousedown(l,h){if(this._lastPoint)return;const y=de(l);this._correctButton(l,y)&&(this._lastPoint=h,this._eventButton=y)}mousemoveWindow(l,h){const y=this._lastPoint;if(y){if(l.preventDefault(),this._eventButton!=null&&function(_,w){const C=Ny[w];return _.buttons===void 0||(_.buttons&C)!==C}(l,this._eventButton))this.reset();else if(this._moved||!(h.dist(y)<this._clickTolerance))return this._moved=!0,this._lastPoint=h,this._move(y,h)}}mouseupWindow(l){this._lastPoint&&de(l)===this._eventButton&&(this._moved&&Q(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ap extends Pl{mousedown(l,h){super.mousedown(l,h),this._lastPoint&&(this._active=!0)}_correctButton(l,h){return h===0&&!l.ctrlKey}_move(l,h){return{around:h,panDelta:h.sub(l)}}}class sp extends Pl{_correctButton(l,h){return h===0&&l.ctrlKey||h===2}_move(l,h){const y=.8*(h.x-l.x);if(y)return this._active=!0,{bearingDelta:y}}contextmenu(l){l.preventDefault()}}class lp extends Pl{_correctButton(l,h){return h===0&&l.ctrlKey||h===2}_move(l,h){const y=-.5*(h.y-l.y);if(y)return this._active=!0,{pitchDelta:y}}contextmenu(l){l.preventDefault()}}class Ld{constructor(l,h){this._map=l,this._el=l.getCanvasContainer(),this._minTouches=1,this._clickTolerance=h.clickTolerance||1,this.reset(),o.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)}touchstart(l,h,y){return this._calculateTransform(l,h,y)}touchmove(l,h,y){if(this._active&&!(y.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(y.length===1&&!o.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return l.cancelable&&l.preventDefault(),this._calculateTransform(l,h,y)}}touchend(l,h,y){this._calculateTransform(l,h,y),this._active&&y.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,h,y){y.length>0&&(this._active=!0);const _=Id(y,h),w=new o.Point(0,0),C=new o.Point(0,0);let R=0;for(const z in _){const D=_[z],q=this._touches[z];q&&(w._add(D),C._add(D.sub(q)),R++,_[z]=D)}if(this._touches=_,R<this._minTouches||!C.mag())return;const P=C.div(R);return this._sum._add(P),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(R),panDelta:P}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=L("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class au{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(l){}_move(l,h,y){return{}}touchstart(l,h,y){this._firstTwoTouches||y.length<2||(this._firstTwoTouches=[y[0].identifier,y[1].identifier],this._start([h[0],h[1]]))}touchmove(l,h,y){const _=this._firstTwoTouches;if(!_)return;l.preventDefault();const[w,C]=_,R=su(y,h,w),P=su(y,h,C);if(!R||!P)return;const z=this._aroundCenter?null:R.add(P).div(2);return this._move([R,P],z,l)}touchend(l,h,y){if(!this._firstTwoTouches)return;const[_,w]=this._firstTwoTouches,C=su(y,h,_),R=su(y,h,w);C&&R||(this._active&&Q(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function su(m,l,h){for(let y=0;y<m.length;y++)if(m[y].identifier===h)return l[y]}function cp(m,l){return Math.log(m/l)/Math.LN2}class $y extends au{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,h){const y=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(cp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:cp(this._distance,y),pinchAround:h}}}function up(m,l){return 180*m.angleWith(l)/Math.PI}class Uy extends au{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,h){const y=this._vector;if(this._vector=l[0].sub(l[1]),y&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:up(this._vector,y),pinchAround:h}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const h=25/(Math.PI*this._minDiameter)*360,y=this._startVector;if(!y)return!1;const _=up(l,y);return Math.abs(_)<h}}function ns(m){return Math.abs(m.y)>Math.abs(m.x)}class jy extends au{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(l){this._lastPoints=l,ns(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,h,y){const _=this._lastPoints;if(!_)return;const w=l[0].sub(_[0]),C=l[1].sub(_[1]);return this._map._cooperativeGestures&&!o.isFullscreen()&&y.touches.length<3||(this._valid=this.gestureBeginsVertically(w,C,y.timeStamp),!this._valid)?void 0:(this._lastPoints=l,this._active=!0,{pitchDelta:(w.y+C.y)/2*-.5})}gestureBeginsVertically(l,h,y){if(this._valid!==void 0)return this._valid;const _=l.mag()>=2,w=h.mag()>=2;if(!_&&!w)return;if(!_||!w)return this._firstMove==null&&(this._firstMove=y),y-this._firstMove<100&&void 0;const C=l.y>0==h.y>0;return ns(l)&&ns(h)&&C}}const Vy={panStep:100,bearingStep:15,pitchStep:10};class Dx{constructor(){const l=Vy;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let h=0,y=0,_=0,w=0,C=0;switch(l.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:l.shiftKey?y=-1:(l.preventDefault(),w=-1);break;case 39:l.shiftKey?y=1:(l.preventDefault(),w=1);break;case 38:l.shiftKey?_=1:(l.preventDefault(),C=-1);break;case 40:l.shiftKey?_=-1:(l.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(y=0,_=0),{cameraAnimation:R=>{const P=R.getZoom();R.easeTo({duration:300,easeId:"keyboardHandler",easing:Gy,zoom:h?Math.round(P)+h*(l.shiftKey?2:1):P,bearing:R.getBearing()+y*this._bearingStep,pitch:R.getPitch()+_*this._pitchStep,offset:[-w*this._panStep,-C*this._panStep],center:R.getCenter()},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Gy(m){return m*(2-m)}const dp=4.000244140625;class Wy{constructor(l,h){this._map=l,this._el=l.getCanvasContainer(),this._handler=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(l.ctrlKey||l.metaKey||this.isZooming()||o.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let h=l.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const y=o.exported.now(),_=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,h!==0&&h%dp==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(_*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),l.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=l,this._delta-=h,this._active||this._start(l)),l.preventDefault()}_onTimeout(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=ae(this._el,l);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:h,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._map.transform;this._type==="wheel"&&l.projection.wrap&&(l._center.lng>=180||l._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const h=()=>l._terrainEnabled()&&this._aroundCoord?l.computeZoomRelativeTo(this._aroundCoord):l.zoom;if(this._delta!==0){const P=this._type==="wheel"&&Math.abs(this._delta)>dp?this._wheelZoomRate:this._defaultZoomRate;let z=2/(1+Math.exp(-Math.abs(this._delta*P)));this._delta<0&&z!==0&&(z=1/z);const D=h(),q=Math.pow(2,D),te=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):q;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(te*z))),this._type==="wheel"&&(this._startZoom=D,this._easing=this._smoothOutEasing(200)),this._delta=0}const y=typeof this._targetZoom=="number"?this._targetZoom:h(),_=this._startZoom,w=this._easing;let C,R=!1;if(this._type==="wheel"&&_&&w){const P=Math.min((o.exported.now()-this._lastWheelEventTime)/200,1),z=w(P);C=o.number(_,y,z),P<1?this._frameId||(this._frameId=!0):R=!0}else C=y,R=!0;return this._active=!0,R&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!R,zoomDelta:C-h(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let h=o.ease;if(this._prevEase){const y=this._prevEase,_=(o.exported.now()-y.start)/y.duration,w=y.easing(_+.01)-y.easing(_),C=.27/Math.sqrt(w*w+1e-4)*.01,R=Math.sqrt(.0729-C*C);h=o.bezier(C,R,.25,1)}return this._prevEase={start:o.exported.now(),duration:l,easing:h},h}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=L("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(o.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class qy{constructor(l,h){this._clickZoom=l,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Fi{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(l,h){return l.preventDefault(),{cameraAnimation:y=>{y.easeTo({duration:300,zoom:y.getZoom()+(l.shiftKey?-1:1),around:y.unproject(h)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zx{constructor(){this._tap=new op({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(l,h,y){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?y.length>0&&(this._swipePoint=h[0],this._swipeTouch=y[0].identifier):this._tap.touchstart(l,h,y))}touchmove(l,h,y){if(this._tapTime){if(this._swipePoint){if(y[0].identifier!==this._swipeTouch)return;const _=h[0],w=_.y-this._swipePoint.y;return this._swipePoint=_,l.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(l,h,y)}touchend(l,h,y){this._tapTime?this._swipePoint&&y.length===0&&this.reset():this._tap.touchend(l,h,y)&&(this._tapTime=l.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hy{constructor(l,h,y){this._el=l,this._mousePan=h,this._touchPan=y}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Fx{constructor(l,h,y){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=h,this._mousePitch=y}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Bx{constructor(l,h,y,_){this._el=l,this._touchZoom=h,this._touchRotate=y,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Eo=m=>m.zoom||m.drag||m.pitch||m.rotate;class Zy extends o.Event{}class Nx{constructor(){this.constants=[1,1,.01],this.radius=0}setup(l,h){const y=o.sub([],h,l);this.radius=o.length(y[2]<0?o.div([],y,this.constants):[y[0],y[1],0])}projectRay(l){o.div(l,l,this.constants),o.normalize(l,l),o.mul$1(l,l,this.constants);const h=o.scale$2([],l,this.radius);if(h[2]>0){const y=o.scale$2([],[0,0,1],o.dot(h,[0,0,1])),_=o.scale$2([],o.normalize([],[h[0],h[1],0]),this.radius),w=o.add([],h,o.scale$2([],o.sub([],o.add([],_,y),h),2));h[0]=w[0],h[1]=w[1]}return h}}function Vo(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}class sa{constructor(l,h){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Fy(l),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Nx,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(h),o.bindAll(["handleEvent","handleWindowEvent"],this);const y=this._el;this._listeners=[[y,"touchstart",{passive:!0}],[y,"touchmove",{passive:!1}],[y,"touchend",void 0],[y,"touchcancel",void 0],[y,"mousedown",void 0],[y,"mousemove",void 0],[y,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[y,"mouseover",void 0],[y,"mouseout",void 0],[y,"dblclick",void 0],[y,"click",void 0],[y,"keydown",{capture:!1}],[y,"keyup",void 0],[y,"wheel",{passive:!1}],[y,"contextmenu",void 0],[o.window,"blur",void 0]];for(const[_,w,C]of this._listeners)_.addEventListener(w,_===o.window.document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(const[l,h,y]of this._listeners)l.removeEventListener(h,l===o.window.document?this.handleWindowEvent:this.handleEvent,y)}_addDefaultHandlers(l){const h=this._map,y=h.getCanvasContainer();this._add("mapEvent",new ip(h,l));const _=h.boxZoom=new By(h,l);this._add("boxZoom",_);const w=new Ox,C=new Fi;h.doubleClickZoom=new qy(C,w),this._add("tapZoom",w),this._add("clickZoom",C);const R=new zx;this._add("tapDragZoom",R);const P=h.touchPitch=new jy(h);this._add("touchPitch",P);const z=new sp(l),D=new lp(l);h.dragRotate=new Fx(l,z,D),this._add("mouseRotate",z,["mousePitch"]),this._add("mousePitch",D,["mouseRotate"]);const q=new ap(l),te=new Ld(h,l);h.dragPan=new Hy(y,q,te),this._add("mousePan",q),this._add("touchPan",te,["touchZoom","touchRotate"]);const ce=new Uy,fe=new $y;h.touchZoomRotate=new Bx(y,fe,ce,R),this._add("touchRotate",ce,["touchPan","touchZoom"]),this._add("touchZoom",fe,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Pd(h));const he=h.scrollZoom=new Wy(h,this);this._add("scrollZoom",he,["mousePan"]);const me=h.keyboard=new Dx;this._add("keyboard",me);for(const H of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])l.interactive&&l[H]&&h[H].enable(l[H])}_add(l,h,y){this._handlers.push({handlerName:l,handler:h,allowed:y}),this._handlersById[l]=h}stop(l){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Eo(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(l,h,y){for(const _ in l)if(_!==y&&(!h||h.indexOf(_)<0))return!0;return!1}handleWindowEvent(l){this.handleEvent(l,`${l.type}Window`)}_getMapTouches(l){const h=[];for(const y of l)this._el.contains(y.target)&&h.push(y);return h}handleEvent(l,h){this._updatingCamera=!0;const y=l.type==="renderFrame",_=y?void 0:l,w={needsRenderFrame:!1},C={},R={},P=l.touches?this._getMapTouches(l.touches):void 0,z=P?ue(this._el,P):y?void 0:ae(this._el,l);for(const{handlerName:te,handler:ce,allowed:fe}of this._handlers){if(!ce.isEnabled())continue;let he;this._blockedByActive(R,fe,te)?ce.reset():ce[h||l.type]&&(he=ce[h||l.type](l,z,P),this.mergeHandlerResult(w,C,he,te,_),he&&he.needsRenderFrame&&this._triggerRenderFrame()),(he||ce.isActive())&&(R[te]=ce)}const D={};for(const te in this._previousActiveHandlers)R[te]||(D[te]=_);this._previousActiveHandlers=R,(Object.keys(D).length||Vo(w))&&(this._changes.push([w,C,D]),this._triggerRenderFrame()),(Object.keys(R).length||Vo(w))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:q}=w;q&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],q(this._map))}mergeHandlerResult(l,h,y,_,w){if(!y)return;o.extend(l,y);const C={handlerName:_,originalEvent:y.originalEvent||w};y.zoomDelta!==void 0&&(h.zoom=C),y.panDelta!==void 0&&(h.drag=C),y.pitchDelta!==void 0&&(h.pitch=C),y.bearingDelta!==void 0&&(h.rotate=C)}_applyChanges(){const l={},h={},y={};for(const[_,w,C]of this._changes)_.panDelta&&(l.panDelta=(l.panDelta||new o.Point(0,0))._add(_.panDelta)),_.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+_.pitchDelta),_.around!==void 0&&(l.around=_.around),_.aroundCoord!==void 0&&(l.aroundCoord=_.aroundCoord),_.pinchAround!==void 0&&(l.pinchAround=_.pinchAround),_.noInertia&&(l.noInertia=_.noInertia),o.extend(h,w),o.extend(y,C);this._updateMapTransform(l,h,y),this._changes=[]}_updateMapTransform(l,h,y){const _=this._map,w=_.transform,C=le=>[le.x,le.y,le.z];if((le=>{const _e=this._eventsInProgress.drag;return _e&&!this._handlersById[_e.handlerName].isActive()})()&&!Vo(l)){const le=w.zoom;w.cameraElevationReference="sea",w.recenterOnTerrain(),w.cameraElevationReference="ground",le!==w.zoom&&this._map._update(!0)}if(w._isCameraConstrained&&_._stop(!0),!Vo(l))return void this._fireEvents(h,y,!0);let{panDelta:R,zoomDelta:P,bearingDelta:z,pitchDelta:D,around:q,aroundCoord:te,pinchAround:ce}=l;w._isCameraConstrained&&(P>0&&(P=0),w._isCameraConstrained=!1),ce!==void 0&&(q=ce),(P||(le=>h[le]&&!this._eventsInProgress[le])("drag"))&&q&&(this._dragOrigin=C(w.pointCoordinate3D(q)),this._trackingEllipsoid.setup(w._camera.position,this._dragOrigin)),w.cameraElevationReference="sea",_._stop(!0),q=q||_.transform.centerPoint,z&&(w.bearing+=z),D&&(w.pitch+=D),w._updateCameraState();const fe=[0,0,0];if(R)if(w.projection.name==="mercator"){const le=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(q).dir),_e=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(q.sub(R)).dir);fe[0]=_e[0]-le[0],fe[1]=_e[1]-le[1]}else{const le=w.pointCoordinate(q);if(w.projection.name==="globe"){R=R.rotate(-w.angle);const _e=w._pixelsPerMercatorPixel/w.worldSize;fe[0]=-R.x*o.mercatorScale(o.latFromMercatorY(le.y))*_e,fe[1]=-R.y*o.mercatorScale(w.center.lat)*_e}else{const _e=w.pointCoordinate(q.sub(R));le&&_e&&(fe[0]=_e.x-le.x,fe[1]=_e.y-le.y)}}const he=w.zoom,me=[0,0,0];if(P){const le=C(te||w.pointCoordinate3D(q)),_e={dir:o.normalize([],o.sub([],le,w._camera.position))};if(_e.dir[2]<0){const xe=w.zoomDeltaToMovement(le,P);o.scale$2(me,_e.dir,xe)}}const H=o.add(fe,fe,me);w._translateCameraConstrained(H),P&&Math.abs(w.zoom-he)>1e-4&&w.recenterOnTerrain(),w.cameraElevationReference="ground",this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(h,y,!0)}_fireEvents(l,h,y){const _=Eo(this._eventsInProgress),w=Eo(l),C={};for(const D in l){const{originalEvent:q}=l[D];this._eventsInProgress[D]||(C[`${D}start`]=q),this._eventsInProgress[D]=l[D]}!_&&w&&this._fireEvent("movestart",w.originalEvent);for(const D in C)this._fireEvent(D,C[D]);w&&this._fireEvent("move",w.originalEvent);for(const D in l){const{originalEvent:q}=l[D];this._fireEvent(D,q)}const R={};let P;for(const D in this._eventsInProgress){const{handlerName:q,originalEvent:te}=this._eventsInProgress[D];this._handlersById[q].isActive()||(delete this._eventsInProgress[D],P=h[q]||te,R[`${D}end`]=P)}for(const D in R)this._fireEvent(D,R[D]);const z=Eo(this._eventsInProgress);if(y&&(_||w)&&!z){this._updatingCamera=!0;const D=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),q=te=>te!==0&&-this._bearingSnap<te&&te<this._bearingSnap;D?(q(D.bearing||this._map.getBearing())&&(D.bearing=0),this._map.easeTo(D,{originalEvent:P})):(this._map.fire(new o.Event("moveend",{originalEvent:P})),q(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,h){this._map.fire(new o.Event(l,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{this._frameId=void 0,this.handleEvent(new Zy("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Ls="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Od extends o.Evented{constructor(l,h){super(),this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=h.bearingSnap,this._respectPrefersReducedMotion=h.respectPrefersReducedMotion!==!1,o.bindAll(["_renderFrameCallback"],this)}getCenter(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(l,h){return this.jumpTo({center:l},h)}panBy(l,h,y){return l=o.Point.convert(l).mult(-1),this.panTo(this.transform.center,o.extend({offset:l},h),y)}panTo(l,h,y){return this.easeTo(o.extend({center:l},h),y)}getZoom(){return this.transform.zoom}setZoom(l,h){return this.jumpTo({zoom:l},h),this}zoomTo(l,h,y){return this.easeTo(o.extend({zoom:l},h),y)}zoomIn(l,h){return this.zoomTo(this.getZoom()+1,l,h),this}zoomOut(l,h){return this.zoomTo(this.getZoom()-1,l,h),this}getBearing(){return this.transform.bearing}setBearing(l,h){return this.jumpTo({bearing:l},h),this}getPadding(){return this.transform.padding}setPadding(l,h){return this.jumpTo({padding:l},h),this}rotateTo(l,h,y){return this.easeTo(o.extend({bearing:l},h),y)}resetNorth(l,h){return this.rotateTo(0,o.extend({duration:1e3},l),h),this}resetNorthPitch(l,h){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},l),h),this}snapToNorth(l,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,h):this}getPitch(){return this.transform.pitch}setPitch(l,h){return this.jumpTo({pitch:l},h),this}cameraForBounds(l,h){l=o.LngLatBounds.convert(l);const y=h&&h.bearing||0,_=h&&h.pitch||0,w=l.getNorthWest(),C=l.getSouthEast();return this._cameraForBounds(this.transform,w,C,y,_,h)}_extendCameraOptions(l){const h={top:0,bottom:0,right:0,left:0};if(typeof(l=o.extend({padding:h,offset:[0,0],maxZoom:this.transform.maxZoom},l)).padding=="number"){const y=l.padding;l.padding={top:y,bottom:y,right:y,left:y}}return l.padding=o.extend(h,l.padding),l}_minimumAABBFrustumDistance(l,h){const y=h.max[0]-h.min[0],_=h.max[1]-h.min[1];return y/_>l.aspect?y/(2*Math.tan(.5*l.fovX)*l.aspect):_/(2*Math.tan(.5*l.fovY)*l.aspect)}_cameraForBoundsOnGlobe(l,h,y,_,w,C){const R=l.clone(),P=this._extendCameraOptions(C);R.bearing=_,R.pitch=w;const z=o.LngLat.convert(h),D=o.LngLat.convert(y),q=.5*(z.lat+D.lat),te=.5*(z.lng+D.lng),ce=o.latLngToECEF(q,te),fe=o.normalize([],ce),he=o.normalize([],o.cross([],fe,[0,1,0])),me=o.cross([],he,fe),H=[he[0],he[1],he[2],0,me[0],me[1],me[2],0,fe[0],fe[1],fe[2],0,0,0,0,1],le=[ce,o.latLngToECEF(z.lat,z.lng),o.latLngToECEF(D.lat,z.lng),o.latLngToECEF(D.lat,D.lng),o.latLngToECEF(z.lat,D.lng),o.latLngToECEF(q,z.lng),o.latLngToECEF(q,D.lng),o.latLngToECEF(z.lat,te),o.latLngToECEF(D.lat,te)];let _e=o.Aabb.fromPoints(le.map(wt=>[o.dot(he,wt),o.dot(me,wt),o.dot(fe,wt)]));const xe=o.transformMat4([],_e.center,H);o.squaredLength(xe)===0&&o.set(xe,0,0,1),o.normalize(xe,xe),o.scale$2(xe,xe,o.GLOBE_RADIUS),R.center=o.ecefToLatLng(xe);const Oe=R.getWorldToCameraMatrix(),Fe=o.invert(new Float64Array(16),Oe);_e=o.Aabb.applyTransform(_e,o.multiply([],Oe,H)),o.transformMat4(xe,xe,Oe);const ze=.5*(_e.max[2]-_e.min[2]),He=this._minimumAABBFrustumDistance(R,_e),qe=o.scale$2([],[0,0,1],ze),it=o.add(qe,xe,qe),Pt=He+(R.pitch===0?0:o.distance(xe,it)),et=R.globeCenterInViewSpace,vt=o.sub([],xe,[et[0],et[1],et[2]]);o.normalize(vt,vt),o.scale$2(vt,vt,Pt);const st=o.add([],xe,vt);o.transformMat4(st,st,Fe);const kt=o.earthRadius/o.GLOBE_RADIUS,rt=o.length(st),yt=o.mercatorZfromAltitude(Math.max(rt*kt-o.earthRadius,Number.EPSILON),0),Lt=Math.min(R.zoomFromMercatorZAdjusted(yt),P.maxZoom);return Lt>.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(R.setProjection({name:"mercator"}),R.zoom=Lt,this._cameraForBounds(R,h,y,_,w,C)):{center:R.center,zoom:Lt,bearing:_,pitch:w}}queryTerrainElevation(l,h){const y=this.transform.elevation;return y?(h=o.extend({},{exaggerated:!0},h),y.getAtPoint(o.MercatorCoordinate.fromLngLat(l),null,h.exaggerated)):null}_cameraForBounds(l,h,y,_,w,C){if(l.projection.name==="globe")return this._cameraForBoundsOnGlobe(l,h,y,_,w,C);const R=l.clone(),P=this._extendCameraOptions(C),z=R.padding;R.bearing=_,R.pitch=w;const D=o.LngLat.convert(h),q=o.LngLat.convert(y),te=new o.LngLat(D.lng,q.lat),ce=new o.LngLat(q.lng,D.lat),fe=R.project(D),he=R.project(q),me=this.queryTerrainElevation(D),H=this.queryTerrainElevation(q),le=this.queryTerrainElevation(te),_e=this.queryTerrainElevation(ce),xe=[[fe.x,fe.y,Math.min(me||0,H||0,le||0,_e||0)],[he.x,he.y,Math.max(me||0,H||0,le||0,_e||0)]];let Oe=o.Aabb.fromPoints(xe);const Fe=R.getWorldToCameraMatrix(),ze=o.invert(new Float64Array(16),Fe);Oe=o.Aabb.applyTransform(Oe,Fe);const He=o.sub([],Oe.max,Oe.min),qe=z.left||0,it=z.right||0,Pt=z.bottom||0,et=z.top||0,{left:vt,right:st,top:kt,bottom:rt}=P.padding,yt=.5*(qe+it),Lt=.5*(et+Pt),wt=Math.min(R.scaleZoom(R.scale*Math.min((R.width-(qe+it+vt+st))/He[0],(R.height-(Pt+et+rt+kt))/He[1])),P.maxZoom),Ot=R.scale/R.zoomScale(wt);Oe=new o.Aabb([Oe.min[0]-(vt+yt)*Ot,Oe.min[1]-(rt+Lt)*Ot,Oe.min[2]],[Oe.max[0]+(st+yt)*Ot,Oe.max[1]+(kt+Lt)*Ot,Oe.max[2]]);const un=.5*He[2],Tn=this._minimumAABBFrustumDistance(R,Oe),en=[0,0,1,0];o.transformMat4$1(en,en,Fe),o.normalize$2(en,en);const yn=o.scale$2([],en,Tn+un),Fn=o.add([],Oe.center,yn),On=(typeof P.offset.x=="number"&&typeof P.offset.y=="number"?new o.Point(P.offset.x,P.offset.y):o.Point.convert(P.offset)).rotate(-o.degToRad(_));Oe.center[0]-=On.x*Ot,Oe.center[1]+=On.y*Ot,o.transformMat4(Oe.center,Oe.center,ze),o.transformMat4(Fn,Fn,ze);const cn=[Oe.center[0],Oe.center[1],Fn[2]*R.pixelsPerMeter];o.scale$2(cn,cn,1/R.worldSize);const or=o.lngFromMercatorX(cn[0]),dr=o.latFromMercatorY(cn[1]),hr=Math.min(R._zoomFromMercatorZ(cn[2]),P.maxZoom),fr=new o.LngLat(or,dr);return R.mercatorFromTransition&&hr<.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(R.setProjection({name:"globe"}),R.zoom=hr,this._cameraForBounds(R,h,y,_,w,C)):{center:fr,zoom:hr,bearing:_,pitch:w}}fitBounds(l,h,y){const _=this.cameraForBounds(l,h);return this._fitInternal(_,h,y)}fitScreenCoordinates(l,h,y,_,w){const C=o.Point.convert(l),R=o.Point.convert(h),P=new o.Point(Math.min(C.x,R.x),Math.min(C.y,R.y)),z=new o.Point(Math.max(C.x,R.x),Math.max(C.y,R.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(C,R))return this;const D=this.transform.pointLocation3D(P),q=this.transform.pointLocation3D(z),te=this.transform.pointLocation3D(new o.Point(P.x,z.y)),ce=this.transform.pointLocation3D(new o.Point(z.x,P.y)),fe=[Math.min(D.lng,q.lng,te.lng,ce.lng),Math.min(D.lat,q.lat,te.lat,ce.lat)],he=[Math.max(D.lng,q.lng,te.lng,ce.lng),Math.max(D.lat,q.lat,te.lat,ce.lat)],me=_&&_.pitch?_.pitch:this.getPitch(),H=this._cameraForBounds(this.transform,fe,he,y,me,_);return this._fitInternal(H,_,w)}_fitInternal(l,h,y){return l?(delete(h=o.extend(l,h)).padding,h.linear?this.easeTo(h,y):this.flyTo(h,y)):this}jumpTo(l,h){this.stop();const y=l.preloadOnly?this.transform.clone():this.transform;let _=!1,w=!1,C=!1;return"zoom"in l&&y.zoom!==+l.zoom&&(_=!0,y.zoom=+l.zoom),l.center!==void 0&&(y.center=o.LngLat.convert(l.center)),"bearing"in l&&y.bearing!==+l.bearing&&(w=!0,y.bearing=+l.bearing),"pitch"in l&&y.pitch!==+l.pitch&&(C=!0,y.pitch=+l.pitch),l.padding==null||y.isPaddingEqual(l.padding)||(y.padding=l.padding),l.preloadOnly?(this._preloadTiles(y),this):(this.fire(new o.Event("movestart",h)).fire(new o.Event("move",h)),_&&this.fire(new o.Event("zoomstart",h)).fire(new o.Event("zoom",h)).fire(new o.Event("zoomend",h)),w&&this.fire(new o.Event("rotatestart",h)).fire(new o.Event("rotate",h)).fire(new o.Event("rotateend",h)),C&&this.fire(new o.Event("pitchstart",h)).fire(new o.Event("pitch",h)).fire(new o.Event("pitchend",h)),this.fire(new o.Event("moveend",h)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||o.warnOnce(Ls),this.transform.getFreeCameraOptions()}setFreeCameraOptions(l,h){const y=this.transform;if(!y.projection.supportsFreeCamera)return o.warnOnce(Ls),this;this.stop();const _=y.zoom,w=y.pitch,C=y.bearing;y.setFreeCameraOptions(l);const R=_!==y.zoom,P=w!==y.pitch,z=C!==y.bearing;return this.fire(new o.Event("movestart",h)).fire(new o.Event("move",h)),R&&this.fire(new o.Event("zoomstart",h)).fire(new o.Event("zoom",h)).fire(new o.Event("zoomend",h)),z&&this.fire(new o.Event("rotatestart",h)).fire(new o.Event("rotate",h)).fire(new o.Event("rotateend",h)),P&&this.fire(new o.Event("pitchstart",h)).fire(new o.Event("pitch",h)).fire(new o.Event("pitchend",h)),this.fire(new o.Event("moveend",h)),this}easeTo(l,h){this._stop(!1,l.easeId),((l=o.extend({offset:[0,0],duration:500,easing:o.ease},l)).animate===!1||this._prefersReducedMotion(l))&&(l.duration=0);const y=this.transform,_=this.getZoom(),w=this.getBearing(),C=this.getPitch(),R=this.getPadding(),P="zoom"in l?+l.zoom:_,z="bearing"in l?this._normalizeBearing(l.bearing,w):w,D="pitch"in l?+l.pitch:C,q="padding"in l?l.padding:y.padding,te=o.Point.convert(l.offset);let ce,fe,he;if(y.projection.name==="globe"){const qe=o.MercatorCoordinate.fromLngLat(y.center),it=te.rotate(-y.angle);qe.x+=it.x/y.worldSize,qe.y+=it.y/y.worldSize;const Pt=qe.toLngLat(),et=o.LngLat.convert(l.center||Pt);this._normalizeCenter(et),ce=y.centerPoint.add(it),fe=new o.Point(qe.x,qe.y).mult(y.worldSize),he=new o.Point(o.mercatorXfromLng(et.lng),o.mercatorYfromLat(et.lat)).mult(y.worldSize).sub(fe)}else{ce=y.centerPoint.add(te);const qe=y.pointLocation(ce),it=o.LngLat.convert(l.center||qe);this._normalizeCenter(it),fe=y.project(qe),he=y.project(it).sub(fe)}const me=y.zoomScale(P-_);let H,le;l.around&&(H=o.LngLat.convert(l.around),le=y.locationPoint(H));const _e=this._zooming||P!==_,xe=this._rotating||w!==z,Oe=this._pitching||D!==C,Fe=!y.isPaddingEqual(q),ze=qe=>it=>{if(_e&&(qe.zoom=o.number(_,P,it)),xe&&(qe.bearing=o.number(w,z,it)),Oe&&(qe.pitch=o.number(C,D,it)),Fe&&(qe.interpolatePadding(R,q,it),ce=qe.centerPoint.add(te)),H)qe.setLocationAtPoint(H,le);else{const Pt=qe.zoomScale(qe.zoom-_),et=P>_?Math.min(2,me):Math.max(.5,me),vt=Math.pow(et,1-it),st=qe.unproject(fe.add(he.mult(it*vt)).mult(Pt));qe.setLocationAtPoint(qe.renderWorldCopies?st.wrap():st,ce)}return l.preloadOnly||this._fireMoveEvents(h),qe};if(l.preloadOnly){const qe=this._emulate(ze,l.duration,y);return this._preloadTiles(qe),this}const He={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=_e,this._rotating=xe,this._pitching=Oe,this._padding=Fe,this._easeId=l.easeId,this._prepareEase(h,l.noMoveStart,He),this._ease(ze(y),qe=>{y.recenterOnTerrain(),this._afterEase(h,qe)},l),this}_prepareEase(l,h,y={}){this._moving=!0,this.transform.cameraElevationReference="sea",h||y.moving||this.fire(new o.Event("movestart",l)),this._zooming&&!y.zooming&&this.fire(new o.Event("zoomstart",l)),this._rotating&&!y.rotating&&this.fire(new o.Event("rotatestart",l)),this._pitching&&!y.pitching&&this.fire(new o.Event("pitchstart",l))}_fireMoveEvents(l){this.fire(new o.Event("move",l)),this._zooming&&this.fire(new o.Event("zoom",l)),this._rotating&&this.fire(new o.Event("rotate",l)),this._pitching&&this.fire(new o.Event("pitch",l))}_afterEase(l,h){if(this._easeId&&h&&this._easeId===h)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const y=this._zooming,_=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,y&&this.fire(new o.Event("zoomend",l)),_&&this.fire(new o.Event("rotateend",l)),w&&this.fire(new o.Event("pitchend",l)),this.fire(new o.Event("moveend",l))}flyTo(l,h){if(this._prefersReducedMotion(l)){const wt=o.pick(l,["center","zoom","bearing","pitch","around"]);return this.jumpTo(wt,h)}this.stop(),l=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},l);const y=this.transform,_=this.getZoom(),w=this.getBearing(),C=this.getPitch(),R=this.getPadding(),P="zoom"in l?o.clamp(+l.zoom,y.minZoom,y.maxZoom):_,z="bearing"in l?this._normalizeBearing(l.bearing,w):w,D="pitch"in l?+l.pitch:C,q="padding"in l?l.padding:y.padding,te=y.zoomScale(P-_),ce=o.Point.convert(l.offset);let fe=y.centerPoint.add(ce);const he=y.pointLocation(fe),me=o.LngLat.convert(l.center||he);this._normalizeCenter(me);const H=y.project(he),le=y.project(me).sub(H);let _e=l.curve;const xe=Math.max(y.width,y.height),Oe=xe/te,Fe=le.mag();if("minZoom"in l){const wt=o.clamp(Math.min(l.minZoom,_,P),y.minZoom,y.maxZoom),Ot=xe/y.zoomScale(wt-_);_e=Math.sqrt(Ot/Fe*2)}const ze=_e*_e;function He(wt){const Ot=(Oe*Oe-xe*xe+(wt?-1:1)*ze*ze*Fe*Fe)/(2*(wt?Oe:xe)*ze*Fe);return Math.log(Math.sqrt(Ot*Ot+1)-Ot)}function qe(wt){return(Math.exp(wt)-Math.exp(-wt))/2}function it(wt){return(Math.exp(wt)+Math.exp(-wt))/2}const Pt=He(0);let et=function(wt){return it(Pt)/it(Pt+_e*wt)},vt=function(wt){return xe*((it(Pt)*(qe(Ot=Pt+_e*wt)/it(Ot))-qe(Pt))/ze)/Fe;var Ot},st=(He(1)-Pt)/_e;if(Math.abs(Fe)<1e-6||!isFinite(st)){if(Math.abs(xe-Oe)<1e-6)return this.easeTo(l,h);const wt=Oe<xe?-1:1;st=Math.abs(Math.log(Oe/xe))/_e,vt=function(){return 0},et=function(Ot){return Math.exp(wt*_e*Ot)}}l.duration="duration"in l?+l.duration:1e3*st/("screenSpeed"in l?+l.screenSpeed/_e:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0);const kt=w!==z,rt=D!==C,yt=!y.isPaddingEqual(q),Lt=wt=>Ot=>{const un=Ot*st,Tn=1/et(un);wt.zoom=Ot===1?P:_+wt.scaleZoom(Tn),kt&&(wt.bearing=o.number(w,z,Ot)),rt&&(wt.pitch=o.number(C,D,Ot)),yt&&(wt.interpolatePadding(R,q,Ot),fe=wt.centerPoint.add(ce));const en=Ot===1?me:wt.unproject(H.add(le.mult(vt(un))).mult(Tn));return wt.setLocationAtPoint(wt.renderWorldCopies?en.wrap():en,fe),wt._updateCameraOnTerrain(),l.preloadOnly||this._fireMoveEvents(h),wt};if(l.preloadOnly){const wt=this._emulate(Lt,l.duration,y);return this._preloadTiles(wt),this}return this._zooming=!0,this._rotating=kt,this._pitching=rt,this._padding=yt,this._prepareEase(h,!1),this._ease(Lt(y),()=>this._afterEase(h),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,h){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const y=this._onEaseEnd;this._onEaseEnd=void 0,y.call(this,h)}if(!l){const y=this.handlers;y&&y.stop(!1)}return this}_ease(l,h,y){y.animate===!1||y.duration===0?(l(1),h()):(this._easeStart=o.exported.now(),this._easeOptions=y,this._onEaseFrame=l,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const l=Math.min((o.exported.now()-this._easeStart)/this._easeOptions.duration,1),h=this._onEaseFrame;h&&h(this._easeOptions.easing(l)),l<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(l,h){l=o.wrap(l,-180,180);const y=Math.abs(l-h);return Math.abs(l-360-h)<y&&(l-=360),Math.abs(l+360-h)<y&&(l+=360),l}_normalizeCenter(l){const h=this.transform;if(!h.renderWorldCopies||h.maxBounds)return;const y=l.lng-h.center.lng;l.lng+=y>180?-360:y<-180?360:0}_prefersReducedMotion(l){return this._respectPrefersReducedMotion&&o.exported.prefersReducedMotion&&!(l&&l.essential)}_emulate(l,h,y){const _=Math.ceil(15*h/1e3),w=[],C=l(y.clone());for(let R=0;R<=_;R++){const P=C(R/_);w.push(P.clone())}return w}}class Jt{constructor(l={}){this.options=l,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(l){const h=this.options&&this.options.compact;return this._map=l,this._container=L("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=L("button","mapboxgl-ctrl-attrib-button",this._container),L("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=L("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),h&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),h===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(l,h){const y=this._map._getUIString(`AttributionControl.${h}`);l.setAttribute("aria-label",y),l.removeAttribute("title"),l.firstElementChild&&l.firstElementChild.setAttribute("title",y)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));const h=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(l){const y=h.reduce((_,w,C)=>(w.value&&(_+=`${w.key}=${w.value}${C<h.length-1?"&":""}`),_),"?");l.href=`${o.config.FEEDBACK_URL}/${y}#${tu(this._map,!0)}`,l.rel="noopener nofollow",this._setElementTitle(l,"MapFeedback")}}_updateData(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let l=[];if(this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const h=this._map.style._sourceCaches;for(const _ in h){const w=h[_];if(w.used){const C=w.getSource();C.attribution&&l.indexOf(C.attribution)<0&&l.push(C.attribution)}}l.sort((_,w)=>_.length-w.length),l=l.filter((_,w)=>{for(let C=w+1;C<l.length;C++)if(l[C].indexOf(_)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=[...this.options.customAttribution,...l]:l.unshift(this.options.customAttribution));const y=l.join(" | ");y!==this._attribHTML&&(this._attribHTML=y,l.length?(this._innerContainer.innerHTML=y,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class hp{constructor(){o.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(l){this._map=l,this._container=L("div","mapboxgl-ctrl");const h=L("a","mapboxgl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://www.mapbox.com/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(l){l&&l.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const l=this._map.style._sourceCaches;if(Object.entries(l).length===0)return!0;for(const h in l){const y=l[h].getSource();if(y.hasOwnProperty("mapbox_logo")&&!y.mapbox_logo)return!1}return!0}_updateCompact(){const l=this._container.children;if(l.length){const h=l[0];this._map.getCanvasContainer().offsetWidth<250?h.classList.add("mapboxgl-compact"):h.classList.remove("mapboxgl-compact")}}}class fp{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const h=++this._id;return this._queue.push({callback:l,id:h,cancelled:!1}),h}remove(l){const h=this._currentlyRunning,y=h?this._queue.concat(h):this._queue;for(const _ of y)if(_.id===l)return void(_.cancelled=!0)}run(l=0){const h=this._currentlyRunning=this._queue;this._queue=[];for(const y of h)if(!y.cancelled&&(y.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Il(m,l,h){if(m=new o.LngLat(m.lng,m.lat),l){const y=new o.LngLat(m.lng-360,m.lat),_=new o.LngLat(m.lng+360,m.lat),w=360*Math.ceil(Math.abs(m.lng-h.center.lng)/360),C=h.locationPoint(m).distSqr(l),R=l.x<0||l.y<0||l.x>h.width||l.y>h.height;h.locationPoint(y).distSqr(l)<C&&(R||Math.abs(y.lng-h.center.lng)<w)?m=y:h.locationPoint(_).distSqr(l)<C&&(R||Math.abs(_.lng-h.center.lng)<w)&&(m=_)}for(;Math.abs(m.lng-h.center.lng)>180;){const y=h.locationPoint(m);if(y.x>=0&&y.y>=0&&y.x<=h.width&&y.y<=h.height)break;m.lng>h.center.lng?m.lng-=360:m.lng+=360}return m}const Os={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class qt extends o.Evented{constructor(l,h){if(super(),(l instanceof o.window.HTMLElement||h)&&(l=o.extend({element:l},h)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=l&&l.occludedOpacity||.2,l&&l.element)this._element=l.element,this._offset=o.Point.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=L("div");const _=41,w=27,C=j("svg",{display:"block",height:_*this._scale+"px",width:w*this._scale+"px",viewBox:`0 0 ${w} ${_}`},this._element),R=j("radialGradient",{id:"shadowGradient"},j("defs",{},C));j("stop",{offset:"10%","stop-opacity":.4},R),j("stop",{offset:"100%","stop-opacity":.05},R),j("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},C),j("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},C),j("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},C),j("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},C),this._offset=o.Point.convert(l&&l.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",_=>{_.preventDefault()}),this._element.addEventListener("mousedown",_=>{_.preventDefault()});const y=this._element.classList;for(const _ in Os)y.remove(`mapboxgl-marker-anchor-${_}`);y.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(l){return l===this._map||(this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._updateMoving),l.on("moveend",this._update),l.on("remove",this._clearFadeTimer),l._addMarker(this),this.setDraggable(this._draggable),this._update(),l.on("click",this._onMapClick)),this}remove(){const l=this._map;return l&&(l.off("click",this._onMapClick),l.off("move",this._updateMoving),l.off("moveend",this._update),l.off("mousedown",this._addDragHandler),l.off("touchstart",this._addDragHandler),l.off("mouseup",this._onUp),l.off("touchend",this._onUp),l.off("mousemove",this._onMove),l.off("touchmove",this._onMove),l.off("remove",this._clearFadeTimer),l._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=o.LngLat.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const _=Math.sqrt(Math.pow(13.5,2)/2);l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,l._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(l){const h=l.code,y=l.charCode||l.keyCode;h!=="Space"&&h!=="Enter"&&y!==32&&y!==13||this.togglePopup()}_onMapClick(l){const h=l.originalEvent.target,y=this._element;this._popup&&(h===y||y.contains(h))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?(l.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(l.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const l=this._map,h=this._pos;if(!l||!h)return!1;const y=l.unproject(h),_=l.getFreeCameraOptions();if(!_.position)return!1;const w=_.position.toLngLat();return w.distanceTo(y)<.9*w.distanceTo(this._lngLat)}_evaluateOpacity(){const l=this._map;if(!l)return;const h=this._pos;if(!h||h.x<0||h.x>l.transform.width||h.y<0||h.y>l.transform.height)return void this._clearFadeTimer();const y=l.unproject(h);let _;l._showingGlobe()&&o.isLngLatBehindGlobe(l.transform,this._lngLat)?_=0:(_=1-l._queryFogOpacity(y),l.transform._terrainEnabled()&&l.getTerrain()&&this._behindTerrain()&&(_*=this._occludedOpacity)),this._element.style.opacity=`${_}`,this._element.style.pointerEvents=_>0?"auto":"none",this._popup&&this._popup._setOpacity(_),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const l=this._pos;if(!l||!this._map)return;const h=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${l.x}px,${l.y}px)
            ${Os[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${h.x}px,${h.y}px)
        `}_calculateXYTransform(){const l=this._pos,h=this._map,y=this.getPitchAlignment();if(!h||!l||y!=="map")return"";if(!h._showingGlobe()){const P=h.getPitch();return P?`rotateX(${P}deg)`:""}const _=o.radToDeg(o.globeTiltAtLngLat(h.transform,this._lngLat)),w=l.sub(o.globeCenterToScreenPoint(h.transform)),C=Math.abs(w.x)+Math.abs(w.y);if(C===0)return"";const R=_/C;return`rotateX(${-w.y*R}deg) rotateY(${w.x*R}deg)`}_calculateZTransform(){const l=this._pos,h=this._map;if(!h||!l)return"";let y=0;const _=this.getRotationAlignment();if(_==="map")if(h._showingGlobe()){const w=h.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),C=h.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(w);y=o.radToDeg(Math.atan2(C.y,C.x))-90}else y=-h.getBearing();else if(_==="horizon"){const w=o.smoothstep(4,6,h.getZoom()),C=o.globeCenterToScreenPoint(h.transform);C.y+=w*h.transform.height;const R=l.sub(C),P=o.radToDeg(Math.atan2(R.y,R.x));y=(P>90?P-270:P+90)*(1-w)}return y+=this._rotation,y?`rotateZ(${y}deg)`:""}_update(l){o.window.cancelAnimationFrame(this._updateFrameId);const h=this._map;h&&(h.transform.renderWorldCopies&&(this._lngLat=Il(this._lngLat,this._pos,h.transform)),this._pos=h.project(this._lngLat),l===!0?this._updateFrameId=o.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),h._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(h._showingGlobe()||h.getTerrain()||h.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(l){return this._offset=o.Point.convert(l),this._update(),this}_onMove(l){const h=this._map;if(!h)return;const y=this._pointerdownPos,_=this._positionDelta;if(y&&_){if(!this._isDragging){const w=this._clickTolerance||h._clickTolerance;if(l.point.dist(y)<w)return;this._isDragging=!0}this._pos=l.point.sub(_),this._lngLat=h.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const l=this._map;l&&(l.off("mousemove",this._onMove),l.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"}_addDragHandler(l){const h=this._map,y=this._pos;h&&y&&this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(y),this._pointerdownPos=l.point,this._state="pending",h.on("mousemove",this._onMove),h.on("touchmove",this._onMove),h.once("mouseup",this._onUp),h.once("touchend",this._onUp))}setDraggable(l){this._draggable=!!l;const h=this._map;return h&&(l?(h.on("mousedown",this._addDragHandler),h.on("touchstart",this._addDragHandler)):(h.off("mousedown",this._addDragHandler),h.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(l){return this._occludedOpacity=l||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const pp={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},$x=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Xy(m=new o.Point(0,0),l="bottom"){if(typeof m=="number"){const h=Math.round(Math.sqrt(.5*Math.pow(m,2)));switch(l){case"top":return new o.Point(0,m);case"top-left":return new o.Point(h,h);case"top-right":return new o.Point(-h,h);case"bottom":return new o.Point(0,-m);case"bottom-left":return new o.Point(h,-h);case"bottom-right":return new o.Point(-h,-h);case"left":return new o.Point(m,0);case"right":return new o.Point(-m,0)}return new o.Point(0,0)}return m instanceof o.Point||Array.isArray(m)?o.Point.convert(m):o.Point.convert(m[l]||[0,0])}class mp{constructor(l){this.jumpTo(l)}getValue(l){if(l<=this._startTime)return this._start;if(l>=this._endTime)return this._end;const h=o.easeCubicInOut((l-this._startTime)/(this._endTime-this._startTime));return this._start*(1-h)+this._end*h}isEasing(l){return l>=this._startTime&&l<=this._endTime}jumpTo(l){this._startTime=-1/0,this._endTime=-1/0,this._start=l,this._end=l}easeTo(l,h,y){this._start=this.getValue(h),this._end=l,this._startTime=h,this._endTime=h+y}}const Ky={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Yy={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},Ux={showCompass:!0,showZoom:!0,visualizePitch:!1};class jx{constructor(l,h,y=!1){this._clickTolerance=10,this.element=h,this.mouseRotate=new sp({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,y&&(this.mousePitch=new lp({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),h.addEventListener("mousedown",this.mousedown),h.addEventListener("touchstart",this.touchstart,{passive:!1}),h.addEventListener("touchmove",this.touchmove),h.addEventListener("touchend",this.touchend),h.addEventListener("touchcancel",this.reset)}down(l,h){this.mouseRotate.mousedown(l,h),this.mousePitch&&this.mousePitch.mousedown(l,h),B()}move(l,h){const y=this.map,_=this.mouseRotate.mousemoveWindow(l,h),w=_&&_.bearingDelta;if(w&&y.setBearing(y.getBearing()+w),this.mousePitch){const C=this.mousePitch.mousemoveWindow(l,h),R=C&&C.pitchDelta;R&&y.setPitch(y.getPitch()+R)}}off(){const l=this.element;l.removeEventListener("mousedown",this.mousedown),l.removeEventListener("touchstart",this.touchstart,{passive:!1}),l.removeEventListener("touchmove",this.touchmove),l.removeEventListener("touchend",this.touchend),l.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){$(),o.window.removeEventListener("mousemove",this.mousemove),o.window.removeEventListener("mouseup",this.mouseup)}mousedown(l){this.down(o.extend({},l,{ctrlKey:!0,preventDefault:()=>l.preventDefault()}),ae(this.element,l)),o.window.addEventListener("mousemove",this.mousemove),o.window.addEventListener("mouseup",this.mouseup)}mousemove(l){this.move(l,ae(this.element,l))}mouseup(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()}touchstart(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=ue(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>l.preventDefault()},this._startPos))}touchmove(l){l.targetTouches.length!==1?this.reset():(this._lastPos=ue(this.element,l.targetTouches)[0],this.move({preventDefault:()=>l.preventDefault()},this._lastPos))}touchend(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const gp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},yp={maxWidth:100,unit:"metric"},vp={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Ll={version:o.version,supported:S,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:class extends Od{constructor(m){if(o.LivePerformanceUtils.mark(o.PerformanceMarkers.create),(m=o.extend({},Yy,m)).minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(m.antialias&&o.isSafariWithAntialiasingBug(o.window)&&(m.antialias=!1,o.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Ml(m.minZoom,m.maxZoom,m.minPitch,m.maxPitch,m.renderWorldCopies),m),this._interactive=m.interactive,this._minTileCacheSize=m.minTileCacheSize,this._maxTileCacheSize=m.maxTileCacheSize,this._failIfMajorPerformanceCaveat=m.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=m.preserveDrawingBuffer,this._antialias=m.antialias,this._useWebGL2=m.useWebGL2,this._trackResize=m.trackResize,this._bearingSnap=m.bearingSnap,this._refreshExpiredTiles=m.refreshExpiredTiles,this._fadeDuration=m.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=m.crossSourceCollisions,this._collectResourceTiming=m.collectResourceTiming,this._optimizeForTerrain=m.optimizeForTerrain,this._language=this._parseLanguage(m.language),this._worldview=m.worldview,this._renderTaskQueue=new fp,this._domRenderTaskQueue=new fp,this._controls=[],this._markers=[],this._popups=[],this._mapId=o.uniqueId(),this._locale=o.extend({},Ky,m.locale),this._clickTolerance=m.clickTolerance,this._cooperativeGestures=m.cooperativeGestures,this._performanceMetricsCollection=m.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new mp(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new o.RequestManager(m.transformRequest,m.accessToken,m.testMode),this._silenceAuthErrors=!!m.testMode,typeof m.container=="string"){if(this._container=o.window.document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof o.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(this._container.childNodes.length>0&&o.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),m.maxBounds&&this.setMaxBounds(m.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1),o.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new sa(this,m),this._localFontFamily=m.localFontFamily,this._localIdeographFontFamily=m.localIdeographFontFamily,m.style&&this.setStyle(m.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),m.projection&&this.setProjection(m.projection),this._hash=m.hash&&new rp(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,o.extend({},m.fitBoundsOptions,{duration:0})))),this.resize(),m.attributionControl&&this.addControl(new Jt({customAttribution:m.customAttribution})),this._logoControl=new hp,this.addControl(this._logoControl,m.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",l=>{this._update(l.dataType==="style"),this.fire(new o.Event(`${l.dataType}data`,l))}),this.on("dataloading",l=>{this.fire(new o.Event(`${l.dataType}dataloading`,l))})}_getMapId(){return this._mapId}addControl(m,l){if(l===void 0&&(l=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=m.onAdd(this);this._controls.push(m);const y=this._controlPositions[l];return l.indexOf("bottom")!==-1?y.insertBefore(h,y.firstChild):y.appendChild(h),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(m);return l>-1&&this._controls.splice(l,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(m){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const l=!this._moving;return l&&this.fire(new o.Event("movestart",m)).fire(new o.Event("move",m)),this.fire(new o.Event("resize",m)),l&&this.fire(new o.Event("moveend",m)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(m){return this.transform.setMaxBounds(o.LngLatBounds.convert(m)),this._update()}setMinZoom(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m?this.setZoom(m):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m??22)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m?this.setZoom(m):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m?this.setPitch(m):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m?this.setPitch(m):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.renderWorldCopies=m,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(m){return m==="auto"?o.window.navigator.language:Array.isArray(m)?m.length===0?void 0:m.map(l=>l==="auto"?o.window.navigator.language:l):m}setLanguage(m){const l=this._parseLanguage(m);if(!this.style||l===this._language)return this;this._language=l,this.style._reloadSources();for(const h of this._controls)h._setLanguage&&h._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(m){return this.style&&m!==this._worldview?(this._worldview=m,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(m){return this._lazyInitEmptyStyle(),m?typeof m=="string"&&(m={name:m}):m=null,this._useExplicitProjection=!!m,this._prioritizeAndUpdateProjection(m,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const m=this.transform,l=m.projection.name;let h;l==="globe"&&m.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?(m.setMercatorFromTransition(),h=!0):l==="mercator"&&m.zoom<o.GLOBE_ZOOM_THRESHOLD_MAX&&(m.setProjection({name:"globe"}),h=!0),h&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(m,l){return this._updateProjection(m||l||{name:"mercator"})}_updateProjection(m){let l;if(l=m.name==="globe"&&this.transform.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(m),this.style.applyProjectionUpdate(),l){this.painter.clearBackgroundTiles();for(const h in this.style._sourceCaches)this.style._sourceCaches[h].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(m){return this.transform.locationPoint3D(o.LngLat.convert(m))}unproject(m){return this.transform.pointLocation3D(o.Point.convert(m))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(m,l,h){if(m==="mouseenter"||m==="mouseover"){let y=!1;const _=C=>{const R=l.filter(z=>this.getLayer(z)),P=R.length?this.queryRenderedFeatures(C.point,{layers:R}):[];P.length?y||(y=!0,h.call(this,new wi(m,this,C.originalEvent,{features:P}))):y=!1},w=()=>{y=!1};return{layers:new Set(l),listener:h,delegates:{mousemove:_,mouseout:w}}}if(m==="mouseleave"||m==="mouseout"){let y=!1;const _=C=>{const R=l.filter(P=>this.getLayer(P));(R.length?this.queryRenderedFeatures(C.point,{layers:R}):[]).length?y=!0:y&&(y=!1,h.call(this,new wi(m,this,C.originalEvent)))},w=C=>{y&&(y=!1,h.call(this,new wi(m,this,C.originalEvent)))};return{layers:new Set(l),listener:h,delegates:{mousemove:_,mouseout:w}}}{const y=_=>{const w=l.filter(R=>this.getLayer(R)),C=w.length?this.queryRenderedFeatures(_.point,{layers:w}):[];C.length&&(_.features=C,h.call(this,_),delete _.features)};return{layers:new Set(l),listener:h,delegates:{[m]:y}}}}on(m,l,h){if(h===void 0)return super.on(m,l);Array.isArray(l)||(l=[l]);const y=this._createDelegatedListener(m,l,h);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(y);for(const _ in y.delegates)this.on(_,y.delegates[_]);return this}once(m,l,h){if(h===void 0)return super.once(m,l);Array.isArray(l)||(l=[l]);const y=this._createDelegatedListener(m,l,h);for(const _ in y.delegates)this.once(_,y.delegates[_]);return this}off(m,l,h){if(h===void 0)return super.off(m,l);l=new Set(Array.isArray(l)?l:[l]);const y=(w,C)=>{if(w.size!==C.size)return!1;for(const R of w)if(!C.has(R))return!1;return!0},_=this._delegatedListeners?this._delegatedListeners[m]:void 0;return _&&(w=>{for(let C=0;C<w.length;C++){const R=w[C];if(R.listener===h&&y(R.layers,l)){for(const P in R.delegates)this.off(P,R.delegates[P]);return w.splice(C,1),this}}})(_),this}queryRenderedFeatures(m,l){return this.style?(l!==void 0||m===void 0||m instanceof o.Point||Array.isArray(m)||(l=m,m=void 0),this.style.queryRenderedFeatures(m=m||[[0,0],[this.transform.width,this.transform.height]],l=l||{},this.transform)):[]}querySourceFeatures(m,l){return this.style.querySourceFeatures(m,l)}isPointOnSurface(m){const{name:l}=this.transform.projection;return l!=="globe"&&l!=="mercator"&&o.warnOnce(`${l} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(o.Point.convert(m))}setStyle(m,l){return(l=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&l.localFontFamily===this._localFontFamily&&this.style&&m?(this._diffStyle(m,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._localFontFamily=l.localFontFamily,this._updateStyle(m,l))}_getUIString(m){const l=this._locale[m];if(l==null)throw new Error(`Missing UI string '${m}'`);return l}_updateStyle(m,l){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),m&&(this.style=new oa(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof m=="string"?this.style.loadURL(m):this.style.loadJSON(m)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new oa(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(m,l){if(typeof m=="string"){const h=this._requestManager.normalizeStyleURL(m),y=this._requestManager.transformRequest(h,o.ResourceType.Style);o.getJSON(y,(_,w)=>{_?this.fire(new o.ErrorEvent(_)):w&&this._updateDiff(w,l)})}else typeof m=="object"&&this._updateDiff(m,l)}_updateDiff(m,l){try{this.style.setState(m)&&this._update(!0)}catch(h){o.warnOnce(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(m,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(o.warnOnce("There is no style added to the map."),!1)}addSource(m,l){return this._lazyInitEmptyStyle(),this.style.addSource(m,l),this._update(!0)}isSourceLoaded(m){return!!this.style&&this.style._isSourceCacheLoaded(m)}areTilesLoaded(){const m=this.style&&this.style._sourceCaches;for(const l in m){const h=m[l]._tiles;for(const y in h){const _=h[y];if(_.state!=="loaded"&&_.state!=="errored")return!1}}return!0}addSourceType(m,l,h){this._lazyInitEmptyStyle(),this.style.addSourceType(m,l,h)}removeSource(m){return this.style.removeSource(m),this._updateTerrain(),this._update(!0)}getSource(m){return this.style.getSource(m)}addImage(m,l,{pixelRatio:h=1,sdf:y=!1,stretchX:_,stretchY:w,content:C}={}){if(this._lazyInitEmptyStyle(),l instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&l instanceof o.window.ImageBitmap){const{width:R,height:P,data:z}=o.exported.getImageData(l);this.style.addImage(m,{data:new o.RGBAImage({width:R,height:P},z),pixelRatio:h,stretchX:_,stretchY:w,content:C,sdf:y,version:0})}else if(l.width===void 0||l.height===void 0)this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:R,height:P}=l,z=l;this.style.addImage(m,{data:new o.RGBAImage({width:R,height:P},new Uint8Array(z.data)),pixelRatio:h,stretchX:_,stretchY:w,content:C,sdf:y,version:0,userImage:z}),z.onAdd&&z.onAdd(this,m)}}updateImage(m,l){const h=this.style.getImage(m);if(!h)return void this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const y=l instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&l instanceof o.window.ImageBitmap?o.exported.getImageData(l):l,{width:_,height:w}=y;_!==void 0&&w!==void 0?_===h.data.width&&w===h.data.height?(h.data.replace(y.data,!(l instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&l instanceof o.window.ImageBitmap)),this.style.updateImage(m,h)):this.fire(new o.ErrorEvent(new Error(`The width and height of the updated image (${_}, ${w})
                must be that same as the previous version of the image
                (${h.data.width}, ${h.data.height})`))):this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(m){return m?!!this.style.getImage(m):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m,l){o.getImage(this._requestManager.transformRequest(m,o.ResourceType.Image),(h,y)=>{l(h,y instanceof o.window.HTMLImageElement?o.exported.getImageData(y):y)})}listImages(){return this.style.listImages()}addLayer(m,l){return this._lazyInitEmptyStyle(),this.style.addLayer(m,l),this._update(!0)}moveLayer(m,l){return this.style.moveLayer(m,l),this._update(!0)}removeLayer(m){return this.style.removeLayer(m),this._update(!0)}getLayer(m){return this.style.getLayer(m)}setLayerZoomRange(m,l,h){return this.style.setLayerZoomRange(m,l,h),this._update(!0)}setFilter(m,l,h={}){return this.style.setFilter(m,l,h),this._update(!0)}getFilter(m){return this.style.getFilter(m)}setPaintProperty(m,l,h,y={}){return this.style.setPaintProperty(m,l,h,y),this._update(!0)}getPaintProperty(m,l){return this.style.getPaintProperty(m,l)}setLayoutProperty(m,l,h,y={}){return this.style.setLayoutProperty(m,l,h,y),this._update(!0)}getLayoutProperty(m,l){return this.style.getLayoutProperty(m,l)}setLight(m,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(m,l),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(m){return this._lazyInitEmptyStyle(),!m&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(m),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(m){return this._lazyInitEmptyStyle(),this.style.setFog(m),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(m){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(o.LngLat.convert(m),this.transform):0}setFeatureState(m,l){return this.style.setFeatureState(m,l),this._update()}removeFeatureState(m,l){return this.style.removeFeatureState(m,l),this._update()}getFeatureState(m){return this.style.getFeatureState(m)}_updateContainerDimensions(){if(!this._container)return;const m=this._container.getBoundingClientRect().width||400,l=this._container.getBoundingClientRect().height||300;let h,y,_,w=this._container;for(;w&&(!y||!_);){const C=o.window.getComputedStyle(w).transform;C&&C!=="none"&&(h=C.match(/matrix.*\((.+)\)/)[1].split(", "),h[0]&&h[0]!=="0"&&h[0]!=="1"&&(y=h[0]),h[3]&&h[3]!=="0"&&h[3]!=="1"&&(_=h[3])),w=w.parentElement}this._containerWidth=y?Math.abs(m/y):m,this._containerHeight=_?Math.abs(l/_):l}_detectMissingCSS(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const m=this._container;m.classList.add("mapboxgl-map"),(this._missingCSSCanary=L("div","mapboxgl-canary",m)).style.visibility="hidden",this._detectMissingCSS();const l=this._canvasContainer=L("div","mapboxgl-canvas-container",m);this._interactive&&l.classList.add("mapboxgl-interactive"),this._canvas=L("canvas","mapboxgl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const h=this._controlContainer=L("div","mapboxgl-control-container",m),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(_=>{y[_]=L("div",`mapboxgl-ctrl-${_}`,h)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,l){const h=o.exported.devicePixelRatio||1;this._canvas.width=h*Math.ceil(m),this._canvas.height=h*Math.ceil(l),this._canvas.style.width=`${m}px`,this._canvas.style.height=`${l}px`}_addMarker(m){this._markers.push(m)}_removeMarker(m){const l=this._markers.indexOf(m);l!==-1&&this._markers.splice(l,1)}_addPopup(m){this._popups.push(m)}_removePopup(m){const l=this._popups.indexOf(m);l!==-1&&this._popups.splice(l,1)}_setupPainter(){const m=o.extend({},S.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),l=this._useWebGL2&&this._canvas.getContext("webgl2",m),h=l||this._canvas.getContext("webgl",m)||this._canvas.getContext("experimental-webgl",m);h?(this._useWebGL2&&!l&&o.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),o.storeAuthState(h,!0),this.painter=new Cl(h,this.transform,!!l),this.on("data",y=>{y.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),o.exported$1.testSupport(h)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(m){m.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:m}))}_contextRestored(m){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:m}))}_onMapScroll(m){if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(m){return this.style?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_requestDomTask(m){!this.loaded()||this.loaded()&&!this.isMoving()?m():this._domRenderTaskQueue.add(m)}_render(m){let l;const h=this.painter.context.extTimerQuery,y=o.exported.now();if(this.listens("gpu-timing-frame")&&(l=h.createQueryEXT(),h.beginQueryEXT(h.TIME_ELAPSED_EXT,l)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],o.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],o.window.performance.now())),this._renderTaskQueue.run(m),this._domRenderTaskQueue.run(m),this._removed)return;this._updateProjectionTransition();const _=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const R=this.transform.zoom,P=this.transform.pitch,z=o.exported.now(),D=new o.EvaluationParameters(R,{now:z,fadeDuration:_,pitch:P,transition:this.style.getTransition()});this.style.update(D)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let w=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),w=this._updateAverageElevation(y),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):w=this._updateAverageElevation(y),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,_,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:_,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),l){const R=o.exported.now()-y;h.endQueryEXT(h.TIME_ELAPSED_EXT,l),setTimeout(()=>{const P=h.getQueryObjectEXT(l,h.QUERY_RESULT_EXT)/1e6;h.deleteQueryEXT(l),this.fire(new o.Event("gpu-timing-frame",{cpuTime:R,gpuTime:P})),o.window.performance.mark("frame-gpu",{startTime:y,detail:{gpuTime:P}})},50)}if(this.listens("gpu-timing-layer")){const R=this.painter.collectGpuTimers();setTimeout(()=>{const P=this.painter.queryGpuTimers(R);this.fire(new o.Event("gpu-timing-layer",{layerTimes:P}))},50)}if(this.listens("gpu-timing-deferred-render")){const R=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const P=this.painter.queryGpuTimeDeferredRender(R);this.fire(new o.Event("gpu-timing-deferred-render",{gpuTime:P}))},50)}const C=this._sourcesDirty||this._styleDirty||this._placementDirty||w;if(C||this._repaint)this.triggerRepaint();else{const R=!this.isMoving()&&this.loaded();if(R&&(w=this._updateAverageElevation(y,!0)),w)this.triggerRepaint();else if(this._triggerFrame(!1),R&&(this.fire(new o.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const P=this._calculateSpeedIndex();this.fire(new o.Event("speedindexcompleted",{speedIndex:P})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||C||(this._fullyLoaded=!0,o.LivePerformanceUtils.mark(o.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&o.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(m){for(const l of this._markers)m&&!this.getRenderWorldCopies()&&(l._lngLat=l._lngLat.wrap()),l._update();for(const l of this._popups)!m||this.getRenderWorldCopies()||l._trackPointer||(l._lngLat=l._lngLat.wrap()),l._update()}_updateAverageElevation(m,l=!1){const h=y=>(this.transform.averageElevation=y,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&h(0);if((l||m-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(m)){const y=this.transform.averageElevation;let _=this.transform.sampleAverageElevation(),w=!1;this.transform.elevation&&(w=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(_)?_=0:this._averageElevationLastSampledAt=m;const C=Math.abs(y-_);if(C>1){if(this._isInitialLoad||w)return this._averageElevation.jumpTo(_),h(_);this._averageElevation.easeTo(_,m,300)}else if(C>1e-4)return this._averageElevation.jumpTo(_),h(_)}return!!this._averageElevation.isEasing(m)&&h(this._averageElevation.getValue(m))}_authenticate(){o.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,m=>{if(m&&(m.message===o.AUTH_ERR_MSG||m.status===401)){const l=this.painter.context.gl;o.storeAuthState(l,!1),this._logoControl instanceof hp&&this._logoControl._updateLogo(),l&&l.clear(l.DEPTH_BUFFER_BIT|l.COLOR_BUFFER_BIT|l.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new o.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),o.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const m=this._isDragging();this.painter.updateTerrain(this.style,m)}_calculateSpeedIndex(){const m=this.painter.canvasCopy(),l=this.painter.getCanvasCopiesAndTimestamps();l.timeStamps.push(performance.now());const h=this.painter.context.gl,y=h.createFramebuffer();function _(w){h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,w,0);const C=new Uint8Array(h.drawingBufferWidth*h.drawingBufferHeight*4);return h.readPixels(0,0,h.drawingBufferWidth,h.drawingBufferHeight,h.RGBA,h.UNSIGNED_BYTE,C),C}return h.bindFramebuffer(h.FRAMEBUFFER,y),this._canvasPixelComparison(_(m),l.canvasCopies.map(_),l.timeStamps)}_canvasPixelComparison(m,l,h){let y=h[1]-h[0];const _=m.length/4;for(let w=0;w<l.length;w++){const C=l[w];let R=0;for(let P=0;P<C.length;P+=4)C[P]===m[P]&&C[P+1]===m[P+1]&&C[P+2]===m[P+2]&&C[P+3]===m[P+3]&&(R+=1);y+=(h[w+2]-h[w+1])*(1-R/_)}return y}remove(){this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1),o.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const m=this.painter.context.gl.getExtension("WEBGL_lose_context");m&&m.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),o.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new o.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(m){this._renderNextFrame=this._renderNextFrame||m,this.style&&!this._frame&&(this._frame=o.exported.frame(l=>{const h=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,h&&this._render(l)}))}_preloadTiles(m){const l=this.style?Object.values(this.style._sourceCaches):[];return o.asyncAll(l,(h,y)=>h._preloadTiles(m,y),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(m){this._trackResize&&this.resize({originalEvent:m})._update()}_onVisibilityChange(){o.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(m){this._showTerrainWireframe!==m&&(this._showTerrainWireframe=m,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(m){this._speedIndexTiming!==m&&(this._speedIndexTiming=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(m){this._showTileAABBs!==m&&(this._showTileAABBs=m,m&&this._update())}_setCacheLimits(m,l){o.setCacheLimits(m,l)}get version(){return o.version}},NavigationControl:class{constructor(m){this.options=o.extend({},Ux,m),this._container=L("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",l=>{this._map&&this._map.zoomIn({},{originalEvent:l})}),L("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",l=>{this._map&&this._map.zoomOut({},{originalEvent:l})}),L("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",l=>{const h=this._map;h&&(this.options.visualizePitch?h.resetNorthPitch({},{originalEvent:l}):h.resetNorth({},{originalEvent:l}))}),this._compassIcon=L("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const m=this._map;if(!m)return;const l=m.getZoom(),h=l===m.getMaxZoom(),y=l===m.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=y,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",y.toString())}_rotateCompassArrow(){const m=this._map;if(!m)return;const l=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(m.transform.pitch*(Math.PI/180)),.5)}) rotateX(${m.transform.pitch}deg) rotateZ(${m.transform.angle*(180/Math.PI)}deg)`:`rotate(${m.transform.angle*(180/Math.PI)}deg)`;m._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=l)})}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),m.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&m.on("pitch",this._rotateCompassArrow),m.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new jx(m,this._compass,this.options.visualizePitch)),this._container}onRemove(){const m=this._map;m&&(this._container.remove(),this.options.showZoom&&m.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&m.off("pitch",this._rotateCompassArrow),m.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(m,l){const h=L("button",m,this._container);return h.type="button",h.addEventListener("click",l),h}_setButtonTitle(m,l){if(!this._map)return;const h=this._map._getUIString(`NavigationControl.${l}`);m.setAttribute("aria-label",h),m.firstElementChild&&m.firstElementChild.setAttribute("title",h)}},GeolocateControl:class extends o.Evented{constructor(m){super(),this.options=o.extend({geolocation:o.window.navigator.geolocation},gp,m),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Al(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(m){return this._map=m,this._container=L("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(m){const l=(h=!!this.options.geolocation)=>{this._supportsGeolocation=h,m(h)};this._supportsGeolocation!==void 0?m(this._supportsGeolocation):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(h=>l(h.state!=="denied")).catch(()=>l()):l()}_isOutOfMapMaxBounds(m){const l=this._map.getMaxBounds(),h=m.coords;return!!l&&(h.longitude<l.getWest()||h.longitude>l.getEast()||h.latitude<l.getSouth()||h.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(m){if(this._map){if(this._isOutOfMapMaxBounds(m))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",m)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=m,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(m),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(m),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",m)),this._finish()}}_updateCamera(m){const l=new o.LngLat(m.coords.longitude,m.coords.latitude),h=m.coords.accuracy,y=this._map.getBearing(),_=o.extend({bearing:y},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(h),_,{geolocateSource:!0})}_updateMarker(m){if(m){const l=new o.LngLat(m.coords.longitude,m.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=m.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const m=this._map.transform,l=o.mercatorZfromAltitude(1,m._center.lat)*m.worldSize,h=Math.ceil(2*this._accuracy*l);this._circleElement.style.width=`${h}px`,this._circleElement.style.height=`${h}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(m){if(this._map){if(this.options.trackUserLocation)if(m.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(m.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",m)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(m){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=L("button","mapboxgl-ctrl-geolocate",this._container),L("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",m===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=L("div","mapboxgl-user-location"),this._dotElement.appendChild(L("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(L("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new qt({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=L("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new qt({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new o.Event("trackuserlocationend")))})}}_onDeviceOrientation(m){this._userLocationDotMarker&&(m.webkitCompassHeading?this._heading=m.webkitCompassHeading:m.absolute===!0&&(this._heading=-1*m.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let m;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(m={maximumAge:6e5,timeout:0},this._noTimeout=!0):(m=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,m),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const m=()=>{o.window.addEventListener("ondeviceorientationabsolute"in o.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};o.window.DeviceMotionEvent!==void 0&&typeof o.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(l=>{l==="granted"&&m()}).catch(console.error):m()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),o.window.removeEventListener("deviceorientation",this._onDeviceOrientation),o.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Jt,ScaleControl:class{constructor(m){this.options=o.extend({},yp,m),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),o.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const m=this.options.maxWidth||100,l=this._map,h=l._containerHeight/2,y=l._containerWidth/2-m/2,_=l.unproject([y,h]),w=l.unproject([y+m,h]),C=_.distanceTo(w);if(this.options.unit==="imperial"){const R=3.2808*C;R>5280?this._setScale(m,R/5280,"mile"):this._setScale(m,R,"foot")}else this.options.unit==="nautical"?this._setScale(m,C/1852,"nautical-mile"):C>=1e3?this._setScale(m,C/1e3,"kilometer"):this._setScale(m,C,"meter")}_setScale(m,l,h){this._map._requestDomTask(()=>{const y=function(w){const C=Math.pow(10,`${Math.floor(w)}`.length-1);let R=w/C;return R=R>=10?10:R>=5?5:R>=3?3:R>=2?2:R>=1?1:function(P){const z=Math.pow(10,Math.ceil(-Math.log(P)/Math.LN10));return Math.round(P*z)/z}(R),C*R}(l),_=y/l;this._container.innerHTML=this._isNumberFormatSupported&&h!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:h}).format(y):`${y}&nbsp;${vp[h]}`,this._container.style.width=m*_+"px"})}onAdd(m){return this._map=m,this._language=m.getLanguage(),this._container=L("div","mapboxgl-ctrl mapboxgl-ctrl-scale",m.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(m){this._language=m,this._update()}setUnit(m){this.options.unit=m,this._update()}},FullscreenControl:class{constructor(m){this._fullscreen=!1,m&&m.container&&(m.container instanceof o.window.HTMLElement?this._container=m.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in o.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=L("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!o.window.document.fullscreenEnabled&&!o.window.document.webkitFullscreenEnabled)}_setupUI(){const m=this._fullscreenButton=L("button","mapboxgl-ctrl-fullscreen",this._controlContainer);L("span","mapboxgl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",m)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(o.window.document.fullscreenElement||o.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends o.Evented{constructor(m){super(),this.options=o.extend(Object.create(pp),m),o.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(m&&m.className?m.className.trim().split(/\s+/):[])}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&m.on("preclick",this._onClose),this.options.closeOnMove&&m.on("move",this._onClose),m.on("remove",this.remove),this._update(),m._addPopup(this),this._focusFirstElement(),this._trackPointer?(m.on("mousemove",this._onMouseEvent),m.on("mouseup",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")):m.on("move",this._update),this.fire(new o.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const m=this._map;return m&&(m.off("move",this._update),m.off("move",this._onClose),m.off("preclick",this._onClose),m.off("click",this._onClose),m.off("remove",this.remove),m.off("mousemove",this._onMouseEvent),m.off("mouseup",this._onMouseEvent),m.off("drag",this._onMouseEvent),m._canvasContainer&&m._canvasContainer.classList.remove("mapboxgl-track-pointer"),m._removePopup(this),this._map=void 0),this.fire(new o.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(m){this._lngLat=o.LngLat.convert(m),this._pos=null,this._trackPointer=!1,this._update();const l=this._map;return l&&(l.on("move",this._update),l.off("mousemove",this._onMouseEvent),l._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const m=this._map;return m&&(m.off("move",this._update),m.on("mousemove",this._onMouseEvent),m.on("drag",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(o.window.document.createTextNode(m))}setHTML(m){const l=o.window.document.createDocumentFragment(),h=o.window.document.createElement("body");let y;for(h.innerHTML=m;y=h.firstChild,y;)l.appendChild(y);return this.setDOMContent(l)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){let l=this._content;if(l)for(;l.hasChildNodes();)l.firstChild&&l.removeChild(l.firstChild);else l=this._content=L("div","mapboxgl-popup-content",this._container||void 0);if(l.appendChild(m),this.options.closeButton){const h=this._closeButton=L("button","mapboxgl-popup-close-button",l);h.type="button",h.setAttribute("aria-label","Close popup"),h.setAttribute("aria-hidden","true"),h.innerHTML="&#215;",h.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(m){return this._classList.add(m),this._updateClassList(),this}removeClassName(m){return this._classList.delete(m),this._updateClassList(),this}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){let l;return this._classList.delete(m)?l=!1:(this._classList.add(m),l=!0),this._updateClassList(),l}_onMouseEvent(m){this._update(m.point)}_getAnchor(m){if(this.options.anchor)return this.options.anchor;const l=this._map,h=this._container,y=this._pos;if(!l||!h||!y)return"bottom";const _=h.offsetWidth,w=h.offsetHeight,C=y.x<_/2,R=y.x>l.transform.width-_/2;if(y.y+m<w)return C?"top-left":R?"top-right":"top";if(y.y>l.transform.height-w){if(C)return"bottom-left";if(R)return"bottom-right"}return C?"left":R?"right":"bottom"}_updateClassList(){const m=this._container;if(!m)return;const l=[...this._classList];l.push("mapboxgl-popup"),this._anchor&&l.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&l.push("mapboxgl-popup-track-pointer"),m.className=l.join(" ")}_update(m){const l=this._map,h=this._content;if(!l||!this._lngLat&&!this._trackPointer||!h)return;let y=this._container;if(y||(y=this._container=L("div","mapboxgl-popup",l.getContainer()),this._tip=L("div","mapboxgl-popup-tip",y),y.appendChild(h)),this.options.maxWidth&&y.style.maxWidth!==this.options.maxWidth&&(y.style.maxWidth=this.options.maxWidth),l.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Il(this._lngLat,this._pos,l.transform)),!this._trackPointer||m){const _=this._pos=this._trackPointer&&m?m:l.project(this._lngLat),w=Xy(this.options.offset),C=this._anchor=this._getAnchor(w.y),R=Xy(this.options.offset,C),P=_.add(R).round();l._requestDomTask(()=>{this._container&&C&&(this._container.style.transform=`${Os[C]} translate(${P.x}px,${P.y}px)`)})}if(!this._marker&&l._showingGlobe()){const _=o.isLngLatBehindGlobe(l.transform,this._lngLat)?0:1;this._setOpacity(_)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const m=this._container.querySelector($x);m&&m.focus()}_onClose(){this.remove()}_setOpacity(m){this._container&&(this._container.style.opacity=`${m}`),this._content&&(this._content.style.pointerEvents=m?"auto":"none")}},Marker:qt,Style:oa,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,FreeCameraOptions:Oy,Evented:o.Evented,config:o.config,prewarm:function(){zi().acquire(ur)},clearPrewarmedResources:function(){const m=fi;m&&(m.isPreloaded()&&m.numActive()===1?(m.release(ur),fi=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(m){o.config.ACCESS_TOKEN=m},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(m){o.config.API_URL=m},get workerCount(){return Zr.workerCount},set workerCount(m){Zr.workerCount=m},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(m){o.config.MAX_PARALLEL_IMAGE_REQUESTS=m},clearStorage(m){o.clearTileCache(m)},workerUrl:"",workerClass:null,setNow:o.exported.setNow,restoreNow:o.exported.restoreNow};return Ll});var p=c;return p})})(AF);var PF=AF.exports;const DC=uf(PF),Ole=$3({__proto__:null,default:DC},[PF]),Dle=()=>{const{open:e,Drawer:t,toggleDrawer:n}=dF(),i=Gi(),c=new Date,[u,p]=X.useState(`${c.getFullYear()}.${c.getMonth()<10?"0"+c.getMonth():c.getMonth()}`),o="ontouchstart"in window;return Yt(Cc,{children:[ne(xn,{sx:{"& .mapboxgl-map":{touchAction:"none"}},children:ne(vx,{initialViewState:{latitude:35.8555,longitude:128.4936,zoom:14,bearing:0,pitch:0},mapboxAccessToken:"pk.eyJ1IjoiM28xNCIsImEiOiJjbGdxZjhldTUwMHIzM3NxdmcxNHY5dzA4In0.zfZX942Gc86CfIXcM5G9Vw",mapStyle:`mapbox://styles/mapbox/${i.palette.mode}-v9`,style:{width:"100%",height:"100vh",backgroundColor:i.palette.mode==="light"?"#f6f6f4":"#343332"},mapLib:DC})}),!o&&ne(xn,{onClick:n,sx:hF}),ne(t,{open:e,toggleDrawer:n,headerChildren:ile(u),drawerBleeding:100,children:ne(lle,{setDisplayDate:p})})]})};function zle(){const{setHeadOpt:e,navigate:t,setWrapperOpt:n,setCategory:i,shaking:c,setShaking:u}=Fo(),p={latitude:void 0,longitude:void 0,address:null,category:null,photo:[],title:"",content:""},[o,x]=X.useState(p),S={menus:[{key:"위치",value:"/add-post"},{key:"카테고리",value:"/add-post/category"},{key:"내용",value:"/add-post/content"}],isForward:!1,icon_R:sy,fn_R:()=>t("/")},M={isFullWidth:!0,isNoneHeadPadding:!1,isBtn:!0};return X.useEffect(()=>{e(S),n(M)},[]),X.useEffect(()=>{console.log("[header]업로드할 우연 정보: ",o),i(o==null?void 0:o.category)},[o]),ne(LT,{context:{setHeadOpt:e,post:o,setPost:x,shaking:c,setShaking:u}})}var IF={},LF={exports:{}};(function(e){var t=function(n){var i=Object.prototype,c=i.hasOwnProperty,u=Object.defineProperty||function(Ce,Te,Ve){Ce[Te]=Ve.value},p,o=typeof Symbol=="function"?Symbol:{},x=o.iterator||"@@iterator",S=o.asyncIterator||"@@asyncIterator",M=o.toStringTag||"@@toStringTag";function k(Ce,Te,Ve){return Object.defineProperty(Ce,Te,{value:Ve,enumerable:!0,configurable:!0,writable:!0}),Ce[Te]}try{k({},"")}catch{k=function(Te,Ve,we){return Te[Ve]=we}}function L(Ce,Te,Ve,we){var be=Te&&Te.prototype instanceof Z?Te:Z,Ue=Object.create(be.prototype),nt=new Qe(we||[]);return u(Ue,"_invoke",{value:$e(Ce,Ve,nt)}),Ue}n.wrap=L;function j(Ce,Te,Ve){try{return{type:"normal",arg:Ce.call(Te,Ve)}}catch(we){return{type:"throw",arg:we}}}var F="suspendedStart",V="suspendedYield",oe="executing",B="completed",$={};function Z(){}function Q(){}function ae(){}var ue={};k(ue,x,function(){return this});var de=Object.getPrototypeOf,ke=de&&de(de(gt([])));ke&&ke!==i&&c.call(ke,x)&&(ue=ke);var J=ae.prototype=Z.prototype=Object.create(ue);Q.prototype=ae,u(J,"constructor",{value:ae,configurable:!0}),u(ae,"constructor",{value:Q,configurable:!0}),Q.displayName=k(ae,M,"GeneratorFunction");function G(Ce){["next","throw","return"].forEach(function(Te){k(Ce,Te,function(Ve){return this._invoke(Te,Ve)})})}n.isGeneratorFunction=function(Ce){var Te=typeof Ce=="function"&&Ce.constructor;return Te?Te===Q||(Te.displayName||Te.name)==="GeneratorFunction":!1},n.mark=function(Ce){return Object.setPrototypeOf?Object.setPrototypeOf(Ce,ae):(Ce.__proto__=ae,k(Ce,M,"GeneratorFunction")),Ce.prototype=Object.create(J),Ce},n.awrap=function(Ce){return{__await:Ce}};function pe(Ce,Te){function Ve(Ue,nt,at,At){var Ft=j(Ce[Ue],Ce,nt);if(Ft.type==="throw")At(Ft.arg);else{var Rt=Ft.arg,Mt=Rt.value;return Mt&&typeof Mt=="object"&&c.call(Mt,"__await")?Te.resolve(Mt.__await).then(function(ct){Ve("next",ct,at,At)},function(ct){Ve("throw",ct,at,At)}):Te.resolve(Mt).then(function(ct){Rt.value=ct,at(Rt)},function(ct){return Ve("throw",ct,at,At)})}}var we;function be(Ue,nt){function at(){return new Te(function(At,Ft){Ve(Ue,nt,At,Ft)})}return we=we?we.then(at,at):at()}u(this,"_invoke",{value:be})}G(pe.prototype),k(pe.prototype,S,function(){return this}),n.AsyncIterator=pe,n.async=function(Ce,Te,Ve,we,be){be===void 0&&(be=Promise);var Ue=new pe(L(Ce,Te,Ve,we),be);return n.isGeneratorFunction(Te)?Ue:Ue.next().then(function(nt){return nt.done?nt.value:Ue.next()})};function $e(Ce,Te,Ve){var we=F;return function(Ue,nt){if(we===oe)throw new Error("Generator is already running");if(we===B){if(Ue==="throw")throw nt;return Me()}for(Ve.method=Ue,Ve.arg=nt;;){var at=Ve.delegate;if(at){var At=Ge(at,Ve);if(At){if(At===$)continue;return At}}if(Ve.method==="next")Ve.sent=Ve._sent=Ve.arg;else if(Ve.method==="throw"){if(we===F)throw we=B,Ve.arg;Ve.dispatchException(Ve.arg)}else Ve.method==="return"&&Ve.abrupt("return",Ve.arg);we=oe;var Ft=j(Ce,Te,Ve);if(Ft.type==="normal"){if(we=Ve.done?B:V,Ft.arg===$)continue;return{value:Ft.arg,done:Ve.done}}else Ft.type==="throw"&&(we=B,Ve.method="throw",Ve.arg=Ft.arg)}}}function Ge(Ce,Te){var Ve=Te.method,we=Ce.iterator[Ve];if(we===p)return Te.delegate=null,Ve==="throw"&&Ce.iterator.return&&(Te.method="return",Te.arg=p,Ge(Ce,Te),Te.method==="throw")||Ve!=="return"&&(Te.method="throw",Te.arg=new TypeError("The iterator does not provide a '"+Ve+"' method")),$;var be=j(we,Ce.iterator,Te.arg);if(be.type==="throw")return Te.method="throw",Te.arg=be.arg,Te.delegate=null,$;var Ue=be.arg;if(!Ue)return Te.method="throw",Te.arg=new TypeError("iterator result is not an object"),Te.delegate=null,$;if(Ue.done)Te[Ce.resultName]=Ue.value,Te.next=Ce.nextLoc,Te.method!=="return"&&(Te.method="next",Te.arg=p);else return Ue;return Te.delegate=null,$}G(J),k(J,M,"Generator"),k(J,x,function(){return this}),k(J,"toString",function(){return"[object Generator]"});function Ae(Ce){var Te={tryLoc:Ce[0]};1 in Ce&&(Te.catchLoc=Ce[1]),2 in Ce&&(Te.finallyLoc=Ce[2],Te.afterLoc=Ce[3]),this.tryEntries.push(Te)}function Ze(Ce){var Te=Ce.completion||{};Te.type="normal",delete Te.arg,Ce.completion=Te}function Qe(Ce){this.tryEntries=[{tryLoc:"root"}],Ce.forEach(Ae,this),this.reset(!0)}n.keys=function(Ce){var Te=Object(Ce),Ve=[];for(var we in Te)Ve.push(we);return Ve.reverse(),function be(){for(;Ve.length;){var Ue=Ve.pop();if(Ue in Te)return be.value=Ue,be.done=!1,be}return be.done=!0,be}};function gt(Ce){if(Ce){var Te=Ce[x];if(Te)return Te.call(Ce);if(typeof Ce.next=="function")return Ce;if(!isNaN(Ce.length)){var Ve=-1,we=function be(){for(;++Ve<Ce.length;)if(c.call(Ce,Ve))return be.value=Ce[Ve],be.done=!1,be;return be.value=p,be.done=!0,be};return we.next=we}}return{next:Me}}n.values=gt;function Me(){return{value:p,done:!0}}return Qe.prototype={constructor:Qe,reset:function(Ce){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(Ze),!Ce)for(var Te in this)Te.charAt(0)==="t"&&c.call(this,Te)&&!isNaN(+Te.slice(1))&&(this[Te]=p)},stop:function(){this.done=!0;var Ce=this.tryEntries[0],Te=Ce.completion;if(Te.type==="throw")throw Te.arg;return this.rval},dispatchException:function(Ce){if(this.done)throw Ce;var Te=this;function Ve(At,Ft){return Ue.type="throw",Ue.arg=Ce,Te.next=At,Ft&&(Te.method="next",Te.arg=p),!!Ft}for(var we=this.tryEntries.length-1;we>=0;--we){var be=this.tryEntries[we],Ue=be.completion;if(be.tryLoc==="root")return Ve("end");if(be.tryLoc<=this.prev){var nt=c.call(be,"catchLoc"),at=c.call(be,"finallyLoc");if(nt&&at){if(this.prev<be.catchLoc)return Ve(be.catchLoc,!0);if(this.prev<be.finallyLoc)return Ve(be.finallyLoc)}else if(nt){if(this.prev<be.catchLoc)return Ve(be.catchLoc,!0)}else if(at){if(this.prev<be.finallyLoc)return Ve(be.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(Ce,Te){for(var Ve=this.tryEntries.length-1;Ve>=0;--Ve){var we=this.tryEntries[Ve];if(we.tryLoc<=this.prev&&c.call(we,"finallyLoc")&&this.prev<we.finallyLoc){var be=we;break}}be&&(Ce==="break"||Ce==="continue")&&be.tryLoc<=Te&&Te<=be.finallyLoc&&(be=null);var Ue=be?be.completion:{};return Ue.type=Ce,Ue.arg=Te,be?(this.method="next",this.next=be.finallyLoc,$):this.complete(Ue)},complete:function(Ce,Te){if(Ce.type==="throw")throw Ce.arg;return Ce.type==="break"||Ce.type==="continue"?this.next=Ce.arg:Ce.type==="return"?(this.rval=this.arg=Ce.arg,this.method="return",this.next="end"):Ce.type==="normal"&&Te&&(this.next=Te),$},finish:function(Ce){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var Ve=this.tryEntries[Te];if(Ve.finallyLoc===Ce)return this.complete(Ve.completion,Ve.afterLoc),Ze(Ve),$}},catch:function(Ce){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var Ve=this.tryEntries[Te];if(Ve.tryLoc===Ce){var we=Ve.completion;if(we.type==="throw"){var be=we.arg;Ze(Ve)}return be}}throw new Error("illegal catch attempt")},delegateYield:function(Ce,Te,Ve){return this.delegate={iterator:gt(Ce),resultName:Te,nextLoc:Ve},this.method==="next"&&(this.arg=p),$}},n}(e.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})(LF);var Fle=LF.exports;(function(e){var t=Fle;function n(F,V,oe,B,$,Z,Q){try{var ae=F[Z](Q),ue=ae.value}catch(de){return void oe(de)}ae.done?V(ue):Promise.resolve(ue).then(B,$)}function i(F){return function(){var V=this,oe=arguments;return new Promise(function(B,$){var Z=F.apply(V,oe);function Q(ue){n(Z,B,$,Q,ae,"next",ue)}function ae(ue){n(Z,B,$,Q,ae,"throw",ue)}Q(void 0)})}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=!1,u=null,p="en",o=null,x=null,S="https://maps.googleapis.com/maps/api/geocode/json";function M(F){var V=arguments.length>1&&arguments[1]!==void 0&&arguments[1];c&&(V?console.warn(F):console.log(F))}function k(F){return L.apply(this,arguments)}function L(){return(L=i(t.mark(function F(V){var oe,B;return t.wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,fetch(V).catch(function(){return Promise.reject(new Error("Error fetching data"))});case 2:return oe=$.sent,$.next=5,oe.json().catch(function(){return M("Error parsing server response"),Promise.reject(new Error("Error parsing server response"))});case 5:if((B=$.sent).status!=="OK"){$.next=9;break}return M(B),$.abrupt("return",B);case 9:return M("".concat(B.error_message,`.
Server returned status code `).concat(B.status),!0),$.abrupt("return",Promise.reject(new Error("".concat(B.error_message,`.
Server returned status code `).concat(B.status))));case 11:case"end":return $.stop()}},F)}))).apply(this,arguments)}var j={setApiKey:function(F){u=F},setLanguage:function(F){p=F},setRegion:function(F){o=F},setLocationType:function(F){x=F},enableDebug:function(){var F=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];c=F},fromLatLng:function(F,V,oe,B,$,Z){return i(t.mark(function Q(){var ae,ue;return t.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(F&&V){de.next=3;break}return M("Provided coordinates are invalid",!0),de.abrupt("return",Promise.reject(new Error("Provided coordinates are invalid")));case 3:return ae="".concat(F,",").concat(V),ue="".concat(S,"?latlng=").concat(encodeURIComponent(ae)),(oe||u)&&(ue+="&key=".concat(u=oe||u)),(B||p)&&(ue+="&language=".concat(p=B||p)),($||o)&&(o=$||o,ue+="&region=".concat(encodeURIComponent(o))),(Z||x)&&(x=Z||x,ue+="&location_type=".concat(encodeURIComponent(x))),de.abrupt("return",k(ue));case 9:case"end":return de.stop()}},Q)}))()},fromAddress:function(F,V,oe,B){return i(t.mark(function $(){var Z;return t.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(F){Q.next=3;break}return M("Provided address is invalid",!0),Q.abrupt("return",Promise.reject(new Error("Provided address is invalid")));case 3:return Z="".concat(S,"?address=").concat(encodeURIComponent(F)),(V||u)&&(Z+="&key=".concat(u=V||u)),(oe||p)&&(Z+="&language=".concat(p=oe||p)),(B||o)&&(o=B||o,Z+="&region=".concat(encodeURIComponent(o))),Q.abrupt("return",k(Z));case 8:case"end":return Q.stop()}},$)}))()}};e.default=j})(IF);const vv=uf(IF);function Ble({setViewState:e}){navigator.geolocation.getCurrentPosition(t=>{e({latitude:t.coords.latitude,longitude:t.coords.longitude,zoom:15})})}async function Nle(e){const t=[];vv.setApiKey("AIzaSyAgl2juFj3hlySKnJ9J7kWsYy9e9TFNKOM"),vv.setLanguage("ko"),vv.setRegion("ko");try{return(await vv.fromLatLng(String(e.latitude),String(e.longitude))).results[1].address_components.map(i=>{i.types.map(c=>{switch(c){case"sublocality":t.push(i.long_name),console.log(typeof t);break;case"administrative_area_level_1":t.push(i.long_name);break;case"administrative_area_level_2":t.push(i.long_name);break}})}),t}catch(n){return console.error(n),[]}}const _v={longitude:127.9068,latitude:35.6699,zoom:6},$le=()=>{const{post:e,setPost:t}=Fo(),n=X.useRef(null),[i,c]=Xe.useState(_v);X.useEffect(()=>{o.current==_v&&Ble({setViewState:c}),console.log("viewstate: ",i),console.log("navigator: ",navigator)},[navigator]);const[u,p]=X.useState(void 0),o=X.useRef(_v),x=Gi();return X.useEffect(()=>{o.current=i,o.current!==void 0&&Nle(o.current).then(S=>{p(S.reverse().join(" "))}),t(S=>({...S,latitude:i==null?void 0:i.latitude,longitude:i==null?void 0:i.longitude,address:u})),console.log("지도 정보입력 후: ",e)},[i]),Yt(xn,{sx:{padding:"1rem 0",maxHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"space-between","& .mapboxgl-ctrl, & .mapboxgl-ctrl-logo ":{display:"none"}},children:[Yt(xn,{sx:{padding:"1rem 1.5rem"},children:[Yt(Rr,{variant:"h5",fontWeight:600,children:["지도를 움직여 추가할 ",ne("br",{}),"우연의 장소를 지정해 주세요"]}),ne(Rr,{variant:"subtitle1",sx:{color:"#A2A2A2"},children:u||ne(nE,{variant:"text",animation:"wave",width:250})})]}),ne(xn,{padding:0,sx:{width:"100%",maxWidth:500,"@media (max-width: 375px)":{height:350},height:530,overflow:"hidden"},children:o.current!==_v?ne(vx,{ref:n,mapboxAccessToken:"pk.eyJ1IjoiM28xNCIsImEiOiJjbGdxZjhldTUwMHIzM3NxdmcxNHY5dzA4In0.zfZX942Gc86CfIXcM5G9Vw",...i,onMove:S=>c(S.viewState),mapStyle:`mapbox://styles/mapbox/${x.palette.mode}-v9`,style:{backgroundColor:x.palette.mode==="light"?"#f6f6f4":"#343332"},mapLib:DC,children:ne(Mle,{longitude:i.longitude,latitude:i.latitude,anchor:"center",children:ne(Rr,{variant:"h5",sx:{marginBottom:"40px"},children:"🍀"})})}):ne(nE,{variant:"rectangular",height:400,sx:{maxHeight:"65vh"}})})]})},Ule=fl({palette:{primary:{main:"#EEF1EE"},secondary:{main:"#00A651"}}}),jle=({category:e})=>{const[t,n]=X.useState("primary"),{post:i,setPost:c}=Fo(),{shaking:u,setShaking:p}=Fo(),o=()=>{i!=null&&i.category?i.category===e.id?(c(x=>({...x,category:null})),n(t==="primary"?"secondary":"primary"),p(!1)):(console.log("님 이미 선택함"),p(!0)):(c(x=>({...x,category:e.id})),n(t==="primary"?"secondary":"primary"))};return X.useEffect(()=>{(i==null?void 0:i.category)===e.id&&n("secondary")},[]),ne(iy,{theme:Ule,children:ne(nF,{activeColor:t,handleButtonClick:o,category:e})})},Vle=()=>{const{shaking:e}=Fo(),t=ix(Rr)(({shaking:n})=>({animation:n?"shake 1s":"none","@keyframes shake":{"0%":{transform:"translateX(0)"},"25%":{transform:"translateX(-5px)"},"50%":{transform:"translateX(5px)"},"75%":{transform:"translateX(-5px)"},"100%":{transform:"translateX(0)"}}}));return Yt(xn,{sx:{maxHeight:"100vh",padding:"1rem",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[Yt(xn,{sx:{padding:"1rem 0.5rem"},children:[ne(Rr,{variant:"h5",fontWeight:600,children:"추가할 우연의 카테고리를"}),ne(Rr,{variant:"h5",fontWeight:600,paddingBottom:"1rem",children:"선택해주세요"}),ne(t,{variant:"subtitle1",fontWeight:500,sx:{color:"#A2A2A2"},shaking:e,children:"1개의 카테고리를 선택해 주세요."})]}),ne(xn,{sx:{pt:"10rem","@media (max-width: 375px)":{pt:"3rem"}},children:ne(tc,{container:!0,rowSpacing:3,columnSpacing:2,margin:"0 auto",children:T_.map(n=>ne(tc,{xs:6,sx:{height:"7rem","@media (max-width: 375px)":{height:"6rem"}},children:ne(jle,{category:n})},T_.indexOf(n)))})})]})};var OF={},zC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getListFiles=e.getImage=e.getBase64=e.getAcceptTypeString=e.openFileDialog=void 0,e.openFileDialog=function(t){t.current&&t.current.click()},e.getAcceptTypeString=function(t,n){return t!=null&&t.length?t.map(function(i){return"."+i}).join(", "):n?"":"image/*"},e.getBase64=function(t){var n=new FileReader;return new Promise(function(i){n.addEventListener("load",function(){return i(String(n.result))}),n.readAsDataURL(t)})},e.getImage=function(t){var n=new Image;return new Promise(function(i){n.addEventListener("load",function(){return i(n)}),n.src=URL.createObjectURL(t)})},e.getListFiles=function(t,n){for(var i=[],c=0;c<t.length;c+=1)i.push(e.getBase64(t[c]));return Promise.all(i).then(function(u){var p=u.map(function(o,x){var S;return S={},S[n]=o,S.file=t[x],S});return p})}})(zC);var DF={},el={};Object.defineProperty(el,"__esModule",{value:!0});el.DEFAULT_DATA_URL_KEY=el.INIT_MAX_NUMBER=el.DEFAULT_NULL_INDEX=void 0;el.DEFAULT_NULL_INDEX=-1;el.INIT_MAX_NUMBER=1e3;el.DEFAULT_DATA_URL_KEY="dataURL";(function(e){var t=Ai&&Ai.__awaiter||function(u,p,o,x){function S(M){return M instanceof o?M:new o(function(k){k(M)})}return new(o||(o=Promise))(function(M,k){function L(V){try{F(x.next(V))}catch(oe){k(oe)}}function j(V){try{F(x.throw(V))}catch(oe){k(oe)}}function F(V){V.done?M(V.value):S(V.value).then(L,j)}F((x=x.apply(u,p||[])).next())})},n=Ai&&Ai.__generator||function(u,p){var o={label:0,sent:function(){if(M[0]&1)throw M[1];return M[1]},trys:[],ops:[]},x,S,M,k;return k={next:L(0),throw:L(1),return:L(2)},typeof Symbol=="function"&&(k[Symbol.iterator]=function(){return this}),k;function L(F){return function(V){return j([F,V])}}function j(F){if(x)throw new TypeError("Generator is already executing.");for(;o;)try{if(x=1,S&&(M=F[0]&2?S.return:F[0]?S.throw||((M=S.return)&&M.call(S),0):S.next)&&!(M=M.call(S,F[1])).done)return M;switch(S=0,M&&(F=[F[0]&2,M.value]),F[0]){case 0:case 1:M=F;break;case 4:return o.label++,{value:F[1],done:!1};case 5:o.label++,S=F[1],F=[0];continue;case 7:F=o.ops.pop(),o.trys.pop();continue;default:if(M=o.trys,!(M=M.length>0&&M[M.length-1])&&(F[0]===6||F[0]===2)){o=0;continue}if(F[0]===3&&(!M||F[1]>M[0]&&F[1]<M[3])){o.label=F[1];break}if(F[0]===6&&o.label<M[1]){o.label=M[1],M=F;break}if(M&&o.label<M[2]){o.label=M[2],o.ops.push(F);break}M[2]&&o.ops.pop(),o.trys.pop();continue}F=p.call(u,o)}catch(V){F=[6,V],S=0}finally{x=M=0}if(F[0]&5)throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.getErrorValidation=e.isMaxNumberValid=e.isAcceptTypeValid=e.isMaxFileSizeValid=e.isImageValid=e.isResolutionValid=void 0;var i=el,c=zC;e.isResolutionValid=function(u,p,o,x){if(o===void 0&&(o=0),x===void 0&&(x=1),!o||!x||!u.width||!u.height)return!0;switch(p){case"absolute":{if(u.width===o&&u.height===x)return!0;break}case"ratio":{var S=o/x;if(u.width/u.height===S)return!0;break}case"less":{if(u.width<=o&&u.height<=x)return!0;break}case"more":{if(u.width>=o&&u.height>=x)return!0;break}}return!1},e.isImageValid=function(u){return!!u.includes("image")},e.isMaxFileSizeValid=function(u,p){return p?u<=p:!0},e.isAcceptTypeValid=function(u,p){if(u&&u.length>0){var o=p.split(".").pop()||"";if(u.findIndex(function(x){return x.toLowerCase()===o.toLowerCase()})<0)return!1}return!0},e.isMaxNumberValid=function(u,p,o){if(p!==0&&!p)return!0;if(o===i.DEFAULT_NULL_INDEX){if(u<=p)return!0}else if(u<=p+1)return!0;return!1},e.getErrorValidation=function(u){var p=u.fileList,o=u.value,x=u.maxNumber,S=u.keyUpdate,M=u.acceptType,k=u.maxFileSize,L=u.resolutionType,j=u.resolutionWidth,F=u.resolutionHeight,V=u.allowNonImageType;return t(void 0,void 0,void 0,function(){var oe,B,$,Z,Q;return n(this,function(ae){switch(ae.label){case 0:return oe={},e.isMaxNumberValid(p.length+o.length,x,S)?[3,1]:(oe.maxNumber=!0,[3,5]);case 1:B=0,ae.label=2;case 2:return B<p.length?($=p[B].file,$?!V&&!e.isImageValid($.type)?(oe.acceptType=!0,[3,5]):e.isAcceptTypeValid(M,$.name)?e.isMaxFileSizeValid($.size,k)?L?[4,c.getImage($)]:[3,4]:(oe.maxFileSize=!0,[3,5]):(oe.acceptType=!0,[3,5]):[3,4]):[3,5];case 3:if(Z=ae.sent(),Q=e.isResolutionValid(Z,L,j,F),!Q)return oe.resolution=!0,[3,5];ae.label=4;case 4:return B+=1,[3,2];case 5:return Object.values(oe).find(Boolean)?[2,oe]:[2,null]}})})}})(DF);var aE=Ai&&Ai.__assign||function(){return aE=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},aE.apply(this,arguments)},Gle=Ai&&Ai.__createBinding||(Object.create?function(e,t,n,i){i===void 0&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]}),Wle=Ai&&Ai.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),qle=Ai&&Ai.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&Gle(t,e,n);return Wle(t,e),t},h2=Ai&&Ai.__awaiter||function(e,t,n,i){function c(u){return u instanceof n?u:new n(function(p){p(u)})}return new(n||(n=Promise))(function(u,p){function o(M){try{S(i.next(M))}catch(k){p(k)}}function x(M){try{S(i.throw(M))}catch(k){p(k)}}function S(M){M.done?u(M.value):c(M.value).then(o,x)}S((i=i.apply(e,t||[])).next())})},f2=Ai&&Ai.__generator||function(e,t){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,c,u,p;return p={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function o(S){return function(M){return x([S,M])}}function x(S){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,c&&(u=S[0]&2?c.return:S[0]?c.throw||((u=c.return)&&u.call(c),0):c.next)&&!(u=u.call(c,S[1])).done)return u;switch(c=0,u&&(S=[S[0]&2,u.value]),S[0]){case 0:case 1:u=S;break;case 4:return n.label++,{value:S[1],done:!1};case 5:n.label++,c=S[1],S=[0];continue;case 7:S=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(S[0]===6||S[0]===2)){n=0;continue}if(S[0]===3&&(!u||S[1]>u[0]&&S[1]<u[3])){n.label=S[1];break}if(S[0]===6&&n.label<u[1]){n.label=u[1],u=S;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(S);break}u[2]&&n.ops.pop(),n.trys.pop();continue}S=t.call(e,n)}catch(M){S=[6,M],c=0}finally{i=u=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}},p2=Ai&&Ai.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),c=0,t=0;t<n;t++)for(var u=arguments[t],p=0,o=u.length;p<o;p++,c++)i[c]=u[p];return i};Object.defineProperty(OF,"__esModule",{value:!0});var Wa=qle(X),m2=zC,Hle=DF,Xl=el,Zle=function(e){var t=e.value,n=t===void 0?[]:t,i=e.onChange,c=e.onError,u=e.children,p=e.dataURLKey,o=p===void 0?Xl.DEFAULT_DATA_URL_KEY:p,x=e.multiple,S=x===void 0?!1:x,M=e.maxNumber,k=M===void 0?Xl.INIT_MAX_NUMBER:M,L=e.acceptType,j=e.maxFileSize,F=e.resolutionWidth,V=e.resolutionHeight,oe=e.resolutionType,B=e.inputProps,$=B===void 0?{}:B,Z=e.allowNonImageType,Q=Z===void 0?!1:Z,ae=n||[],ue=Wa.useRef(null),de=Wa.useState(Xl.DEFAULT_NULL_INDEX),ke=de[0],J=de[1],G=Wa.useState(null),pe=G[0],$e=G[1],Ge=Wa.useState(!1),Ae=Ge[0],Ze=Ge[1],Qe=Wa.useCallback(function(){return m2.openFileDialog(ue)},[ue]),gt=Wa.useCallback(function(){J(Xl.DEFAULT_NULL_INDEX),Qe()},[Qe]),Me=Wa.useCallback(function(){i==null||i([])},[i]),Ce=function(Mt){var ct=p2(ae);Array.isArray(Mt)?Mt.forEach(function(Nt){ct.splice(Nt,1)}):ct.splice(Mt,1),i==null||i(ct)},Te=function(Mt){J(Mt),Qe()},Ve=function(Mt){return h2(void 0,void 0,void 0,function(){var ct;return f2(this,function(Nt){switch(Nt.label){case 0:return[4,Hle.getErrorValidation({fileList:Mt,maxFileSize:j,maxNumber:k,acceptType:L,keyUpdate:ke,resolutionType:oe,resolutionWidth:F,resolutionHeight:V,value:ae,allowNonImageType:Q})];case 1:return ct=Nt.sent(),ct?($e(ct),c==null||c(ct,Mt),[2,!1]):(pe&&$e(null),[2,!0])}})})},we=function(Mt){return h2(void 0,void 0,void 0,function(){var ct,Nt,Ht,ln,Kt,wn;return f2(this,function(hn){switch(hn.label){case 0:return Mt?[4,m2.getListFiles(Mt,o)]:[2];case 1:return ct=hn.sent(),ct.length?[4,Ve(ct)]:[2];case 2:if(Nt=hn.sent(),!Nt)return[2];if(ln=[],ke>Xl.DEFAULT_NULL_INDEX)Kt=ct[0],Ht=p2(ae),Ht[ke]=Kt,ln.push(ke);else if(S)for(Ht=p2(ae,ct),wn=ae.length;wn<Ht.length;wn+=1)ln.push(wn);else Ht=[ct[0]],ln.push(0);return i==null||i(Ht,ln),[2]}})})},be=function(Mt){return h2(void 0,void 0,void 0,function(){return f2(this,function(ct){switch(ct.label){case 0:return[4,we(Mt.target.files)];case 1:return ct.sent(),ke>Xl.DEFAULT_NULL_INDEX&&J(Xl.DEFAULT_NULL_INDEX),ue.current&&(ue.current.value=""),[2]}})})},Ue=Wa.useMemo(function(){return m2.getAcceptTypeString(L,Q)},[L,Q]),nt=function(Mt){Mt.preventDefault(),Mt.stopPropagation()},at=function(Mt){Mt.preventDefault(),Mt.stopPropagation(),Mt.dataTransfer.items&&Mt.dataTransfer.items.length>0&&Ze(!0)},At=function(Mt){Mt.preventDefault(),Mt.stopPropagation(),Ze(!1)},Ft=function(Mt){Mt.preventDefault(),Mt.stopPropagation(),Ze(!1),Mt.dataTransfer.files&&Mt.dataTransfer.files.length>0&&we(Mt.dataTransfer.files)},Rt=function(Mt){Mt.preventDefault(),Mt.stopPropagation(),Mt.dataTransfer.clearData()};return Wa.default.createElement(Wa.default.Fragment,null,Wa.default.createElement("input",aE({type:"file",accept:Ue,ref:ue,multiple:S&&ke===Xl.DEFAULT_NULL_INDEX,onChange:be,style:{display:"none"}},$)),u==null?void 0:u({imageList:ae,onImageUpload:gt,onImageRemoveAll:Me,onImageUpdate:Te,onImageRemove:Ce,errors:pe,dragProps:{onDrop:Ft,onDragEnter:at,onDragLeave:At,onDragOver:nt,onDragStart:Rt},isDragging:Ae}))},Xle=OF.default=Zle;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var zF=function(e,t){return(zF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var c in i)i.hasOwnProperty(c)&&(n[c]=i[c])})(e,t)},Kle,xv,Yle=(function(e){/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var t={}.hasOwnProperty;function n(){for(var i=[],c=0;c<arguments.length;c++){var u=arguments[c];if(u){var p=typeof u;if(p==="string"||p==="number")i.push(u);else if(Array.isArray(u)&&u.length){var o=n.apply(null,u);o&&i.push(o)}else if(p==="object")for(var x in u)t.call(u,x)&&u[x]&&i.push(x)}}return i.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n})()}(xv={path:Kle,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(t==null&&xv.path)}},xv.exports),xv.exports);function sE(e,t,n){var i,c,u,p,o;function x(){var M=Date.now()-p;M<t&&M>=0?i=setTimeout(x,t-M):(i=null,n||(o=e.apply(u,c),u=c=null))}t==null&&(t=100);var S=function(){u=this,c=arguments,p=Date.now();var M=n&&!i;return i||(i=setTimeout(x,t)),M&&(o=e.apply(u,c),u=c=null),o};return S.clear=function(){i&&(clearTimeout(i),i=null)},S.flush=function(){i&&(o=e.apply(u,c),u=c=null,clearTimeout(i),i=null)},S}sE.debounce=sE;var Qle=sE;(function(e,t){t===void 0&&(t={});var n=t.insertAt;if(e&&typeof document<"u"){var i=document.head||document.getElementsByTagName("head")[0],c=document.createElement("style");c.type="text/css",n==="top"&&i.firstChild?i.insertBefore(c,i.firstChild):i.appendChild(c),c.styleSheet?c.styleSheet.cssText=e:c.appendChild(document.createTextNode(e))}})(`.indiana-scroll-container {
  overflow: auto; }
  .indiana-scroll-container--dragging {
    scroll-behavior: auto !important; }
    .indiana-scroll-container--dragging > * {
      pointer-events: none;
      cursor: -webkit-grab;
      cursor: grab; }
  .indiana-scroll-container--hide-scrollbars {
    overflow: hidden;
    overflow: -moz-scrollbars-none;
    -ms-overflow-style: none;
    scrollbar-width: none; }
    .indiana-scroll-container--hide-scrollbars::-webkit-scrollbar {
      display: none !important;
      height: 0 !important;
      width: 0 !important;
      background: transparent !important;
      -webkit-appearance: none !important; }
  .indiana-scroll-container--native-scroll {
    overflow: auto; }

.indiana-dragging {
  cursor: -webkit-grab;
  cursor: grab; }
`);var g2,Jle=(g2="indiana-scroll-container",function(e,t){if(!e)return g2;var n;typeof e=="string"?n=e:t=e;var i=g2;return n&&(i+="__"+n),i+(t?Object.keys(t).reduce(function(c,u){var p=t[u];return p&&(c+=" "+(typeof p=="boolean"?i+"--"+u:i+"--"+u+"_"+p)),c},""):"")}),ece=function(e){function t(n){var i=e.call(this,n)||this;return i.onEndScroll=function(){i.scrolling=!1,!i.pressed&&i.started&&i.processEnd()},i.onScroll=function(c){var u=i.container.current;u.scrollLeft===i.scrollLeft&&u.scrollTop===i.scrollTop||(i.scrolling=!0,i.processScroll(c),i.onEndScroll())},i.onTouchStart=function(c){var u=i.props.nativeMobileScroll;if(i.isDraggable(c.target))if(i.internal=!0,u&&i.scrolling)i.pressed=!0;else{var p=c.touches[0];i.processClick(c,p.clientX,p.clientY),!u&&i.props.stopPropagation&&c.stopPropagation()}},i.onTouchEnd=function(c){var u=i.props.nativeMobileScroll;i.pressed&&(!i.started||i.scrolling&&u?i.pressed=!1:i.processEnd(),i.forceUpdate())},i.onTouchMove=function(c){var u=i.props.nativeMobileScroll;if(i.pressed&&(!u||!i.isMobile)){var p=c.touches[0];p&&i.processMove(c,p.clientX,p.clientY),c.preventDefault(),i.props.stopPropagation&&c.stopPropagation()}},i.onMouseDown=function(c){i.isDraggable(c.target)&&i.isScrollable()&&(i.internal=!0,i.props.buttons.indexOf(c.button)!==-1&&(i.processClick(c,c.clientX,c.clientY),c.preventDefault(),i.props.stopPropagation&&c.stopPropagation()))},i.onMouseMove=function(c){i.pressed&&(i.processMove(c,c.clientX,c.clientY),c.preventDefault(),i.props.stopPropagation&&c.stopPropagation())},i.onMouseUp=function(c){i.pressed&&(i.started?i.processEnd():(i.internal=!1,i.pressed=!1,i.forceUpdate(),i.props.onClick&&i.props.onClick(c)),c.preventDefault(),i.props.stopPropagation&&c.stopPropagation())},i.container=Xe.createRef(),i.onEndScroll=Qle(i.onEndScroll,300),i.scrolling=!1,i.started=!1,i.pressed=!1,i.internal=!1,i.getRef=i.getRef.bind(i),i}return function(n,i){function c(){this.constructor=n}zF(n,i),n.prototype=i===null?Object.create(i):(c.prototype=i.prototype,new c)}(t,e),t.prototype.componentDidMount=function(){var n=this.props.nativeMobileScroll,i=this.container.current;window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd),i.addEventListener("touchstart",this.onTouchStart,{passive:!1}),i.addEventListener("mousedown",this.onMouseDown,{passive:!1}),n&&(this.isMobile=this.isMobileDevice(),this.isMobile&&this.forceUpdate())},t.prototype.componentWillUnmount=function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},t.prototype.getElement=function(){return this.container.current},t.prototype.isMobileDevice=function(){return window.orientation!==void 0||navigator.userAgent.indexOf("IEMobile")!==-1},t.prototype.isDraggable=function(n){var i=this.props.ignoreElements;if(i){var c=n.closest(i);return c===null||c.contains(this.getElement())}return!0},t.prototype.isScrollable=function(){var n=this.container.current;return n&&(n.scrollWidth>n.clientWidth||n.scrollHeight>n.clientHeight)},t.prototype.processClick=function(n,i,c){var u=this.container.current;this.scrollLeft=u.scrollLeft,this.scrollTop=u.scrollTop,this.clientX=i,this.clientY=c,this.pressed=!0},t.prototype.processStart=function(n){n===void 0&&(n=!0);var i=this.props.onStartScroll;this.started=!0,n&&document.body.classList.add("indiana-dragging"),i&&i({external:!this.internal}),this.forceUpdate()},t.prototype.processScroll=function(n){if(this.started){var i=this.props.onScroll;i&&i({external:!this.internal})}else this.processStart(!1)},t.prototype.processMove=function(n,i,c){var u=this.props,p=u.horizontal,o=u.vertical,x=u.activationDistance,S=u.onScroll,M=this.container.current;this.started?(p&&(M.scrollLeft-=i-this.clientX),o&&(M.scrollTop-=c-this.clientY),S&&S({external:!this.internal}),this.clientX=i,this.clientY=c,this.scrollLeft=M.scrollLeft,this.scrollTop=M.scrollTop):(p&&Math.abs(i-this.clientX)>x||o&&Math.abs(c-this.clientY)>x)&&(this.clientX=i,this.clientY=c,this.processStart())},t.prototype.processEnd=function(){var n=this.props.onEndScroll;this.container.current&&n&&n({external:!this.internal}),this.pressed=!1,this.started=!1,this.scrolling=!1,this.internal=!1,document.body.classList.remove("indiana-dragging"),this.forceUpdate()},t.prototype.getRef=function(n){[this.container,this.props.innerRef].forEach(function(i){i&&(typeof i=="function"?i(n):i.current=n)})},t.prototype.render=function(){var n=this.props,i=n.children,c=n.draggingClassName,u=n.className,p=n.style,o=n.hideScrollbars,x=n.component;return Xe.createElement(x,{className:Yle(u,this.pressed&&c,Jle({dragging:this.pressed,"hide-scrollbars":o,"native-scroll":this.isMobile})),style:p,ref:this.getRef,onScroll:this.onScroll},i)},t.defaultProps={nativeMobileScroll:!0,hideScrollbars:!0,activationDistance:10,vertical:!0,horizontal:!0,stopPropagation:!1,style:{},component:"div",buttons:[0]},t}(X.PureComponent);function er(){return er=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},er.apply(this,arguments)}function lE(e){"@babel/helpers - typeof";return lE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lE(e)}function y2(e){return e&&lE(e)==="object"&&e.constructor===Object}function lf(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{clone:!0},i=n.clone?er({},e):e;return y2(e)&&y2(t)&&Object.keys(t).forEach(function(c){c!=="__proto__"&&(y2(t[c])&&c in e?i[c]=lf(e[c],t[c],n):i[c]=t[c])}),i}function v2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cE(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}function FF(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.min(Math.max(t,e),n)}function tce(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&n[0].length===1&&(n=n.map(function(i){return i+i})),n?"rgb".concat(n.length===4?"a":"","(").concat(n.map(function(i,c){return c<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3}).join(", "),")"):""}function nce(e){e=cf(e);var t=e,n=t.values,i=n[0],c=n[1]/100,u=n[2]/100,p=c*Math.min(u,1-u),o=function(k){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(k+i/30)%12;return u-p*Math.max(Math.min(L-3,9-L,1),-1)},x="rgb",S=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return e.type==="hsla"&&(x+="a",S.push(n[3])),FC({type:x,values:S})}function cf(e){if(e.type)return e;if(e.charAt(0)==="#")return cf(tce(e));var t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla"].indexOf(n)===-1)throw new Error(cE(3,e));var i=e.substring(t+1,e.length-1).split(",");return i=i.map(function(c){return parseFloat(c)}),{type:n,values:i}}function FC(e){var t=e.type,n=e.values;return t.indexOf("rgb")!==-1?n=n.map(function(i,c){return c<3?parseInt(i,10):i}):t.indexOf("hsl")!==-1&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(t,"(").concat(n.join(", "),")")}function rce(e,t){var n=DL(e),i=DL(t);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)}function DL(e){e=cf(e);var t=e.type==="hsl"?cf(nce(e)).values:e.values;return t=t.map(function(n){return n/=255,n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function ice(e,t){if(e=cf(e),t=FF(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1)for(var n=0;n<3;n+=1)e.values[n]*=1-t;return FC(e)}function oce(e,t){if(e=cf(e),t=FF(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return FC(e)}function BF(e,t){if(e==null)return{};var n={},i=Object.keys(e),c,u;for(u=0;u<i.length;u++)c=i[u],!(t.indexOf(c)>=0)&&(n[c]=e[c]);return n}function wf(e,t){if(e==null)return{};var n=BF(e,t),i,c;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(c=0;c<u.length;c++)i=u[c],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}var Kl=["xs","sm","md","lg","xl"];function ace(e){var t=e.values,n=t===void 0?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,i=e.unit,c=i===void 0?"px":i,u=e.step,p=u===void 0?5:u,o=wf(e,["values","unit","step"]);function x(j){var F=typeof n[j]=="number"?n[j]:j;return"@media (min-width:".concat(F).concat(c,")")}function S(j){var F=Kl.indexOf(j)+1,V=n[Kl[F]];if(F===Kl.length)return x("xs");var oe=typeof V=="number"&&F>0?V:j;return"@media (max-width:".concat(oe-p/100).concat(c,")")}function M(j,F){var V=Kl.indexOf(F);return V===Kl.length-1?x(j):"@media (min-width:".concat(typeof n[j]=="number"?n[j]:j).concat(c,") and ")+"(max-width:".concat((V!==-1&&typeof n[Kl[V+1]]=="number"?n[Kl[V+1]]:F)-p/100).concat(c,")")}function k(j){return M(j,j)}function L(j){return n[j]}return er({keys:Kl,values:n,up:x,down:S,between:M,only:k,width:L},o)}function sce(e,t,n){var i;return er({gutters:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:",`
      paddingLeft: theme.spacing(2),
      paddingRight: theme.spacing(2),
      [theme.breakpoints.up('sm')]: {
        paddingLeft: theme.spacing(3),
        paddingRight: theme.spacing(3),
      },
      `].join(`
`)),er({paddingLeft:t(2),paddingRight:t(2)},u,v2({},e.up("sm"),er({paddingLeft:t(3),paddingRight:t(3)},u[e.up("sm")])))},toolbar:(i={minHeight:56},v2(i,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),v2(i,e.up("sm"),{minHeight:64}),i)},n)}var lce={black:"#000",white:"#fff"};const L_=lce;var cce={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"};const BC=cce;var uce={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"};const _2=uce;var dce={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"};const x2=dce;var hce={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"};const b2=hce;var fce={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"};const w2=fce;var pce={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"};const S2=pce;var mce={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};const E2=mce;var zL={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:L_.white,default:BC[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},T2={text:{primary:L_.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:BC[800],default:"#303030"},action:{active:L_.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function FL(e,t,n,i){var c=i.light||i,u=i.dark||i*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=oce(e.main,c):t==="dark"&&(e.dark=ice(e.main,u)))}function gce(e){var t=e.primary,n=t===void 0?{light:_2[300],main:_2[500],dark:_2[700]}:t,i=e.secondary,c=i===void 0?{light:x2.A200,main:x2.A400,dark:x2.A700}:i,u=e.error,p=u===void 0?{light:b2[300],main:b2[500],dark:b2[700]}:u,o=e.warning,x=o===void 0?{light:w2[300],main:w2[500],dark:w2[700]}:o,S=e.info,M=S===void 0?{light:S2[300],main:S2[500],dark:S2[700]}:S,k=e.success,L=k===void 0?{light:E2[300],main:E2[500],dark:E2[700]}:k,j=e.type,F=j===void 0?"light":j,V=e.contrastThreshold,oe=V===void 0?3:V,B=e.tonalOffset,$=B===void 0?.2:B,Z=wf(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function Q(ke){var J=rce(ke,T2.text.primary)>=oe?T2.text.primary:zL.text.primary;return J}var ae=function(J){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:500,pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:300,$e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:700;if(J=er({},J),!J.main&&J[G]&&(J.main=J[G]),!J.main)throw new Error(cE(4,G));if(typeof J.main!="string")throw new Error(cE(5,JSON.stringify(J.main)));return FL(J,"light",pe,$),FL(J,"dark",$e,$),J.contrastText||(J.contrastText=Q(J.main)),J},ue={dark:T2,light:zL},de=lf(er({common:L_,type:F,primary:ae(n),secondary:ae(c,"A400","A200","A700"),error:ae(p),warning:ae(x),info:ae(M),success:ae(L),grey:BC,contrastThreshold:oe,getContrastText:Q,augmentColor:ae,tonalOffset:$},ue[F]),Z);return de}function NF(e){return Math.round(e*1e5)/1e5}function yce(e){return NF(e)}var BL={textTransform:"uppercase"},NL='"Roboto", "Helvetica", "Arial", sans-serif';function vce(e,t){var n=typeof t=="function"?t(e):t,i=n.fontFamily,c=i===void 0?NL:i,u=n.fontSize,p=u===void 0?14:u,o=n.fontWeightLight,x=o===void 0?300:o,S=n.fontWeightRegular,M=S===void 0?400:S,k=n.fontWeightMedium,L=k===void 0?500:k,j=n.fontWeightBold,F=j===void 0?700:j,V=n.htmlFontSize,oe=V===void 0?16:V,B=n.allVariants,$=n.pxToRem,Z=wf(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]),Q=p/14,ae=$||function(ke){return"".concat(ke/oe*Q,"rem")},ue=function(J,G,pe,$e,Ge){return er({fontFamily:c,fontWeight:J,fontSize:ae(G),lineHeight:pe},c===NL?{letterSpacing:"".concat(NF($e/G),"em")}:{},Ge,B)},de={h1:ue(x,96,1.167,-1.5),h2:ue(x,60,1.2,-.5),h3:ue(M,48,1.167,0),h4:ue(M,34,1.235,.25),h5:ue(M,24,1.334,0),h6:ue(L,20,1.6,.15),subtitle1:ue(M,16,1.75,.15),subtitle2:ue(L,14,1.57,.1),body1:ue(M,16,1.5,.15),body2:ue(M,14,1.43,.15),button:ue(L,14,1.75,.4,BL),caption:ue(M,12,1.66,.4),overline:ue(M,12,2.66,1,BL)};return lf(er({htmlFontSize:oe,pxToRem:ae,round:yce,fontFamily:c,fontSize:p,fontWeightLight:x,fontWeightRegular:M,fontWeightMedium:L,fontWeightBold:F},de),Z,{clone:!1})}var _ce=.2,xce=.14,bce=.12;function Qr(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(_ce,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(xce,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(bce,")")].join(",")}var wce=["none",Qr(0,2,1,-1,0,1,1,0,0,1,3,0),Qr(0,3,1,-2,0,2,2,0,0,1,5,0),Qr(0,3,3,-2,0,3,4,0,0,1,8,0),Qr(0,2,4,-1,0,4,5,0,0,1,10,0),Qr(0,3,5,-1,0,5,8,0,0,1,14,0),Qr(0,3,5,-1,0,6,10,0,0,1,18,0),Qr(0,4,5,-2,0,7,10,1,0,2,16,1),Qr(0,5,5,-3,0,8,10,1,0,3,14,2),Qr(0,5,6,-3,0,9,12,1,0,3,16,2),Qr(0,6,6,-3,0,10,14,1,0,4,18,3),Qr(0,6,7,-4,0,11,15,1,0,4,20,3),Qr(0,7,8,-4,0,12,17,2,0,5,22,4),Qr(0,7,8,-4,0,13,19,2,0,5,24,4),Qr(0,7,9,-4,0,14,21,2,0,5,26,4),Qr(0,8,9,-5,0,15,22,2,0,6,28,5),Qr(0,8,10,-5,0,16,24,2,0,6,30,5),Qr(0,8,11,-5,0,17,26,2,0,6,32,5),Qr(0,9,11,-5,0,18,28,2,0,7,34,6),Qr(0,9,12,-6,0,19,29,2,0,7,36,6),Qr(0,10,13,-6,0,20,31,3,0,8,38,7),Qr(0,10,13,-6,0,21,33,3,0,8,40,7),Qr(0,10,14,-6,0,22,35,3,0,8,42,7),Qr(0,11,14,-7,0,23,36,3,0,9,44,8),Qr(0,11,15,-7,0,24,38,3,0,9,46,8)];const Sce=wce;var Ece={borderRadius:4};const Tce=Ece;function uE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Cce(e){if(Array.isArray(e))return uE(e)}function Rce(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Mce(e,t){if(e){if(typeof e=="string")return uE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uE(e,t)}}function Ace(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kce(e){return Cce(e)||Rce(e)||Mce(e)||Ace()}function Pce(e){var t=e.spacing||8;return typeof t=="number"?function(n){return t*n}:Array.isArray(t)?function(n){return t[n]}:typeof t=="function"?t:function(){}}function Ice(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:8;if(e.mui)return e;var t=Pce({spacing:e}),n=function(){for(var c=arguments.length,u=new Array(c),p=0;p<c;p++)u[p]=arguments[p];return u.length===0?t(1):u.length===1?t(u[0]):u.map(function(o){if(typeof o=="string")return o;var x=t(o);return typeof x=="number"?"".concat(x,"px"):x}).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return e}}),n.mui=!0,n}var $L={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},UL={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function jL(e){return"".concat(Math.round(e),"ms")}const Lce={easing:$L,duration:UL,create:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["all"],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.duration,c=i===void 0?UL.standard:i,u=n.easing,p=u===void 0?$L.easeInOut:u,o=n.delay,x=o===void 0?0:o;return wf(n,["duration","easing","delay"]),(Array.isArray(t)?t:[t]).map(function(S){return"".concat(S," ").concat(typeof c=="string"?c:jL(c)," ").concat(p," ").concat(typeof x=="string"?x:jL(x))}).join(",")},getAutoHeightDuration:function(t){if(!t)return 0;var n=t/36;return Math.round((4+15*Math.pow(n,.25)+n/5)*10)}};var Oce={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};const Dce=Oce;function zce(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.breakpoints,n=t===void 0?{}:t,i=e.mixins,c=i===void 0?{}:i,u=e.palette,p=u===void 0?{}:u,o=e.spacing,x=e.typography,S=x===void 0?{}:x,M=wf(e,["breakpoints","mixins","palette","spacing","typography"]),k=gce(p),L=ace(n),j=Ice(o),F=lf({breakpoints:L,direction:"ltr",mixins:sce(L,j,c),overrides:{},palette:k,props:{},shadows:Sce,typography:vce(k,S),spacing:j,shape:Tce,transitions:Lce,zIndex:Dce},M),V=arguments.length,oe=new Array(V>1?V-1:0),B=1;B<V;B++)oe[B-1]=arguments[B];return F=oe.reduce(function($,Z){return lf($,Z)},F),F}var Fce=typeof Symbol=="function"&&Symbol.for;const Bce=Fce?Symbol.for("mui.nested"):"__THEME_NESTED__";var Nce=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];function $ce(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.disableGlobal,n=t===void 0?!1:t,i=e.productionPrefix,c=i===void 0?"jss":i,u=e.seed,p=u===void 0?"":u,o=p===""?"":"".concat(p,"-"),x=0,S=function(){return x+=1,x};return function(M,k){var L=k.options.name;if(L&&L.indexOf("Mui")===0&&!k.options.link&&!n){if(Nce.indexOf(M.key)!==-1)return"Mui-".concat(M.key);var j="".concat(o).concat(L,"-").concat(M.key);return!k.options.theme[Bce]||p!==""?j:"".concat(j,"-").concat(S())}return"".concat(o).concat(c).concat(S())}}var VL=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uy=(typeof window>"u"?"undefined":VL(window))==="object"&&(typeof document>"u"?"undefined":VL(document))==="object"&&document.nodeType===9;function GL(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function $F(e,t,n){return t&&GL(e.prototype,t),n&&GL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function dE(e,t){return dE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,c){return i.__proto__=c,i},dE(e,t)}function UF(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,dE(e,t)}function WL(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Uce={}.constructor;function hE(e){if(e==null||typeof e!="object")return e;if(Array.isArray(e))return e.map(hE);if(e.constructor!==Uce)return e;var t={};for(var n in e)t[n]=hE(e[n]);return t}function NC(e,t,n){e===void 0&&(e="unnamed");var i=n.jss,c=hE(t),u=i.plugins.onCreateRule(e,c,n);return u||(e[0],null)}var qL=function(t,n){for(var i="",c=0;c<t.length&&t[c]!=="!important";c++)i&&(i+=n),i+=t[c];return i},ju=function(t){if(!Array.isArray(t))return t;var n="";if(Array.isArray(t[0]))for(var i=0;i<t.length&&t[i]!=="!important";i++)n&&(n+=", "),n+=qL(t[i]," ");else n=qL(t,", ");return t[t.length-1]==="!important"&&(n+=" !important"),n};function Sf(e){return e&&e.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function km(e,t){for(var n="",i=0;i<t;i++)n+="  ";return n+e}function Lg(e,t,n){n===void 0&&(n={});var i="";if(!t)return i;var c=n,u=c.indent,p=u===void 0?0:u,o=t.fallbacks;n.format===!1&&(p=-1/0);var x=Sf(n),S=x.linebreak,M=x.space;if(e&&p++,o)if(Array.isArray(o))for(var k=0;k<o.length;k++){var L=o[k];for(var j in L){var F=L[j];F!=null&&(i&&(i+=S),i+=km(j+":"+M+ju(F)+";",p))}}else for(var V in o){var oe=o[V];oe!=null&&(i&&(i+=S),i+=km(V+":"+M+ju(oe)+";",p))}for(var B in t){var $=t[B];$!=null&&B!=="fallbacks"&&(i&&(i+=S),i+=km(B+":"+M+ju($)+";",p))}return!i&&!n.allowEmpty||!e?i:(p--,i&&(i=""+S+i+S),km(""+e+M+"{"+i,p)+km("}",p))}var jce=/([[\].#*$><+~=|^:(),"'`\s])/g,HL=typeof CSS<"u"&&CSS.escape,$C=function(e){return HL?HL(e):e.replace(jce,"\\$1")},jF=function(){function e(n,i,c){this.type="style",this.isProcessed=!1;var u=c.sheet,p=c.Renderer;this.key=n,this.options=c,this.style=i,u?this.renderer=u.renderer:p&&(this.renderer=new p)}var t=e.prototype;return t.prop=function(i,c,u){if(c===void 0)return this.style[i];var p=u?u.force:!1;if(!p&&this.style[i]===c)return this;var o=c;(!u||u.process!==!1)&&(o=this.options.jss.plugins.onChangeValue(c,i,this));var x=o==null||o===!1,S=i in this.style;if(x&&!S&&!p)return this;var M=x&&S;if(M?delete this.style[i]:this.style[i]=o,this.renderable&&this.renderer)return M?this.renderer.removeProperty(this.renderable,i):this.renderer.setProperty(this.renderable,i,o),this;var k=this.options.sheet;return k&&k.attached,this},e}(),fE=function(e){UF(t,e);function t(i,c,u){var p;p=e.call(this,i,c,u)||this;var o=u.selector,x=u.scoped,S=u.sheet,M=u.generateId;return o?p.selectorText=o:x!==!1&&(p.id=M(WL(WL(p)),S),p.selectorText="."+$C(p.id)),p}var n=t.prototype;return n.applyTo=function(c){var u=this.renderer;if(u){var p=this.toJSON();for(var o in p)u.setProperty(c,o,p[o])}return this},n.toJSON=function(){var c={};for(var u in this.style){var p=this.style[u];typeof p!="object"?c[u]=p:Array.isArray(p)&&(c[u]=ju(p))}return c},n.toString=function(c){var u=this.options.sheet,p=u?u.options.link:!1,o=p?er({},c,{allowEmpty:!0}):c;return Lg(this.selectorText,this.style,o)},$F(t,[{key:"selector",set:function(c){if(c!==this.selectorText){this.selectorText=c;var u=this.renderer,p=this.renderable;if(!(!p||!u)){var o=u.setSelector(p,c);o||u.replaceRule(p,this)}}},get:function(){return this.selectorText}}]),t}(jF),Vce={onCreateRule:function(t,n,i){return t[0]==="@"||i.parent&&i.parent.type==="keyframes"?null:new fE(t,n,i)}},C2={indent:1,children:!0},Gce=/@([\w-]+)/,Wce=function(){function e(n,i,c){this.type="conditional",this.isProcessed=!1,this.key=n;var u=n.match(Gce);this.at=u?u[1]:"unknown",this.query=c.name||"@"+this.at,this.options=c,this.rules=new _x(er({},c,{parent:this}));for(var p in i)this.rules.add(p,i[p]);this.rules.process()}var t=e.prototype;return t.getRule=function(i){return this.rules.get(i)},t.indexOf=function(i){return this.rules.indexOf(i)},t.addRule=function(i,c,u){var p=this.rules.add(i,c,u);return p?(this.options.jss.plugins.onProcessRule(p),p):null},t.replaceRule=function(i,c,u){var p=this.rules.replace(i,c,u);return p&&this.options.jss.plugins.onProcessRule(p),p},t.toString=function(i){i===void 0&&(i=C2);var c=Sf(i),u=c.linebreak;if(i.indent==null&&(i.indent=C2.indent),i.children==null&&(i.children=C2.children),i.children===!1)return this.query+" {}";var p=this.rules.toString(i);return p?this.query+" {"+u+p+u+"}":""},e}(),qce=/@container|@media|@supports\s+/,Hce={onCreateRule:function(t,n,i){return qce.test(t)?new Wce(t,n,i):null}},R2={indent:1,children:!0},Zce=/@keyframes\s+([\w-]+)/,pE=function(){function e(n,i,c){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var u=n.match(Zce);u&&u[1]?this.name=u[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=c;var p=c.scoped,o=c.sheet,x=c.generateId;this.id=p===!1?this.name:$C(x(this,o)),this.rules=new _x(er({},c,{parent:this}));for(var S in i)this.rules.add(S,i[S],er({},c,{parent:this}));this.rules.process()}var t=e.prototype;return t.toString=function(i){i===void 0&&(i=R2);var c=Sf(i),u=c.linebreak;if(i.indent==null&&(i.indent=R2.indent),i.children==null&&(i.children=R2.children),i.children===!1)return this.at+" "+this.id+" {}";var p=this.rules.toString(i);return p&&(p=""+u+p+u),this.at+" "+this.id+" {"+p+"}"},e}(),Xce=/@keyframes\s+/,Kce=/\$([\w-]+)/g,mE=function(t,n){return typeof t=="string"?t.replace(Kce,function(i,c){return c in n?n[c]:i}):t},ZL=function(t,n,i){var c=t[n],u=mE(c,i);u!==c&&(t[n]=u)},Yce={onCreateRule:function(t,n,i){return typeof t=="string"&&Xce.test(t)?new pE(t,n,i):null},onProcessStyle:function(t,n,i){return n.type!=="style"||!i||("animation-name"in t&&ZL(t,"animation-name",i.keyframes),"animation"in t&&ZL(t,"animation",i.keyframes)),t},onChangeValue:function(t,n,i){var c=i.options.sheet;if(!c)return t;switch(n){case"animation":return mE(t,c.keyframes);case"animation-name":return mE(t,c.keyframes);default:return t}}},Qce=function(e){UF(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;return n.toString=function(c){var u=this.options.sheet,p=u?u.options.link:!1,o=p?er({},c,{allowEmpty:!0}):c;return Lg(this.key,this.style,o)},t}(jF),Jce={onCreateRule:function(t,n,i){return i.parent&&i.parent.type==="keyframes"?new Qce(t,n,i):null}},eue=function(){function e(n,i,c){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=i,this.options=c}var t=e.prototype;return t.toString=function(i){var c=Sf(i),u=c.linebreak;if(Array.isArray(this.style)){for(var p="",o=0;o<this.style.length;o++)p+=Lg(this.at,this.style[o]),this.style[o+1]&&(p+=u);return p}return Lg(this.at,this.style,i)},e}(),tue=/@font-face/,nue={onCreateRule:function(t,n,i){return tue.test(t)?new eue(t,n,i):null}},rue=function(){function e(n,i,c){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=i,this.options=c}var t=e.prototype;return t.toString=function(i){return Lg(this.key,this.style,i)},e}(),iue={onCreateRule:function(t,n,i){return t==="@viewport"||t==="@-ms-viewport"?new rue(t,n,i):null}},oue=function(){function e(n,i,c){this.type="simple",this.isProcessed=!1,this.key=n,this.value=i,this.options=c}var t=e.prototype;return t.toString=function(i){if(Array.isArray(this.value)){for(var c="",u=0;u<this.value.length;u++)c+=this.key+" "+this.value[u]+";",this.value[u+1]&&(c+=`
`);return c}return this.key+" "+this.value+";"},e}(),aue={"@charset":!0,"@import":!0,"@namespace":!0},sue={onCreateRule:function(t,n,i){return t in aue?new oue(t,n,i):null}},XL=[Vce,Hce,Yce,Jce,nue,iue,sue],lue={process:!0},KL={force:!0,process:!0},_x=function(){function e(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var t=e.prototype;return t.add=function(i,c,u){var p=this.options,o=p.parent,x=p.sheet,S=p.jss,M=p.Renderer,k=p.generateId,L=p.scoped,j=er({classes:this.classes,parent:o,sheet:x,jss:S,Renderer:M,generateId:k,scoped:L,name:i,keyframes:this.keyframes,selector:void 0},u),F=i;i in this.raw&&(F=i+"-d"+this.counter++),this.raw[F]=c,F in this.classes&&(j.selector="."+$C(this.classes[F]));var V=NC(F,c,j);if(!V)return null;this.register(V);var oe=j.index===void 0?this.index.length:j.index;return this.index.splice(oe,0,V),V},t.replace=function(i,c,u){var p=this.get(i),o=this.index.indexOf(p);p&&this.remove(p);var x=u;return o!==-1&&(x=er({},u,{index:o})),this.add(i,c,x)},t.get=function(i){return this.map[i]},t.remove=function(i){this.unregister(i),delete this.raw[i.key],this.index.splice(this.index.indexOf(i),1)},t.indexOf=function(i){return this.index.indexOf(i)},t.process=function(){var i=this.options.jss.plugins;this.index.slice(0).forEach(i.onProcessRule,i)},t.register=function(i){this.map[i.key]=i,i instanceof fE?(this.map[i.selector]=i,i.id&&(this.classes[i.key]=i.id)):i instanceof pE&&this.keyframes&&(this.keyframes[i.name]=i.id)},t.unregister=function(i){delete this.map[i.key],i instanceof fE?(delete this.map[i.selector],delete this.classes[i.key]):i instanceof pE&&delete this.keyframes[i.name]},t.update=function(){var i,c,u;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(i=arguments.length<=0?void 0:arguments[0],c=arguments.length<=1?void 0:arguments[1],u=arguments.length<=2?void 0:arguments[2]):(c=arguments.length<=0?void 0:arguments[0],u=arguments.length<=1?void 0:arguments[1],i=null),i)this.updateOne(this.get(i),c,u);else for(var p=0;p<this.index.length;p++)this.updateOne(this.index[p],c,u)},t.updateOne=function(i,c,u){u===void 0&&(u=lue);var p=this.options,o=p.jss.plugins,x=p.sheet;if(i.rules instanceof e){i.rules.update(c,u);return}var S=i.style;if(o.onUpdate(c,i,x,u),u.process&&S&&S!==i.style){o.onProcessStyle(i.style,i,x);for(var M in i.style){var k=i.style[M],L=S[M];k!==L&&i.prop(M,k,KL)}for(var j in S){var F=i.style[j],V=S[j];F==null&&F!==V&&i.prop(j,null,KL)}}},t.toString=function(i){for(var c="",u=this.options.sheet,p=u?u.options.link:!1,o=Sf(i),x=o.linebreak,S=0;S<this.index.length;S++){var M=this.index[S],k=M.toString(i);!k&&!p||(c&&(c+=x),c+=k)}return c},e}(),VF=function(){function e(n,i){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=er({},i,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),i.Renderer&&(this.renderer=new i.Renderer(this)),this.rules=new _x(this.options);for(var c in n)this.rules.add(c,n[c]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(i,c,u){var p=this.queue;this.attached&&!p&&(this.queue=[]);var o=this.rules.add(i,c,u);return o?(this.options.jss.plugins.onProcessRule(o),this.attached?(this.deployed&&(p?p.push(o):(this.insertRule(o),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),o):(this.deployed=!1,o)):null},t.replaceRule=function(i,c,u){var p=this.rules.get(i);if(!p)return this.addRule(i,c,u);var o=this.rules.replace(i,c,u);return o&&this.options.jss.plugins.onProcessRule(o),this.attached?(this.deployed&&this.renderer&&(o?p.renderable&&this.renderer.replaceRule(p.renderable,o):this.renderer.deleteRule(p)),o):(this.deployed=!1,o)},t.insertRule=function(i){this.renderer&&this.renderer.insertRule(i)},t.addRules=function(i,c){var u=[];for(var p in i){var o=this.addRule(p,i[p],c);o&&u.push(o)}return u},t.getRule=function(i){return this.rules.get(i)},t.deleteRule=function(i){var c=typeof i=="object"?i:this.rules.get(i);return!c||this.attached&&!c.renderable?!1:(this.rules.remove(c),this.attached&&c.renderable&&this.renderer?this.renderer.deleteRule(c.renderable):!0)},t.indexOf=function(i){return this.rules.indexOf(i)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var i;return(i=this.rules).update.apply(i,arguments),this},t.updateOne=function(i,c,u){return this.rules.updateOne(i,c,u),this},t.toString=function(i){return this.rules.toString(i)},e}(),cue=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(i,c,u){for(var p=0;p<this.registry.onCreateRule.length;p++){var o=this.registry.onCreateRule[p](i,c,u);if(o)return o}return null},t.onProcessRule=function(i){if(!i.isProcessed){for(var c=i.options.sheet,u=0;u<this.registry.onProcessRule.length;u++)this.registry.onProcessRule[u](i,c);i.style&&this.onProcessStyle(i.style,i,c),i.isProcessed=!0}},t.onProcessStyle=function(i,c,u){for(var p=0;p<this.registry.onProcessStyle.length;p++)c.style=this.registry.onProcessStyle[p](c.style,c,u)},t.onProcessSheet=function(i){for(var c=0;c<this.registry.onProcessSheet.length;c++)this.registry.onProcessSheet[c](i)},t.onUpdate=function(i,c,u,p){for(var o=0;o<this.registry.onUpdate.length;o++)this.registry.onUpdate[o](i,c,u,p)},t.onChangeValue=function(i,c,u){for(var p=i,o=0;o<this.registry.onChangeValue.length;o++)p=this.registry.onChangeValue[o](p,c,u);return p},t.use=function(i,c){c===void 0&&(c={queue:"external"});var u=this.plugins[c.queue];u.indexOf(i)===-1&&(u.push(i),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(p,o){for(var x in o)x in p&&p[x].push(o[x]);return p},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),uue=function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(i){var c=this.registry,u=i.options.index;if(c.indexOf(i)===-1){if(c.length===0||u>=this.index){c.push(i);return}for(var p=0;p<c.length;p++)if(c[p].options.index>u){c.splice(p,0,i);return}}},t.reset=function(){this.registry=[]},t.remove=function(i){var c=this.registry.indexOf(i);this.registry.splice(c,1)},t.toString=function(i){for(var c=i===void 0?{}:i,u=c.attached,p=BF(c,["attached"]),o=Sf(p),x=o.linebreak,S="",M=0;M<this.registry.length;M++){var k=this.registry[M];u!=null&&k.attached!==u||(S&&(S+=x),S+=k.toString(p))}return S},$F(e,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),e}(),og=new uue,gE=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),yE="2f1acc6c3a606b082e5eef5e54414ffb";gE[yE]==null&&(gE[yE]=0);var YL=gE[yE]++,QL=function(t){t===void 0&&(t={});var n=0,i=function(u,p){n+=1;var o="",x="";return p&&(p.options.classNamePrefix&&(x=p.options.classNamePrefix),p.options.jss.id!=null&&(o=String(p.options.jss.id))),t.minify?""+(x||"c")+YL+o+n:x+u.key+"-"+YL+(o?"-"+o:"")+"-"+n};return i},GF=function(t){var n;return function(){return n||(n=t()),n}},due=function(t,n){try{return t.attributeStyleMap?t.attributeStyleMap.get(n):t.style.getPropertyValue(n)}catch{return""}},hue=function(t,n,i){try{var c=i;if(Array.isArray(i)&&(c=ju(i)),t.attributeStyleMap)t.attributeStyleMap.set(n,c);else{var u=c?c.indexOf("!important"):-1,p=u>-1?c.substr(0,u-1):c;t.style.setProperty(n,p,u>-1?"important":"")}}catch{return!1}return!0},fue=function(t,n){try{t.attributeStyleMap?t.attributeStyleMap.delete(n):t.style.removeProperty(n)}catch{}},pue=function(t,n){return t.selectorText=n,t.selectorText===n},WF=GF(function(){return document.querySelector("head")});function mue(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.attached&&i.options.index>t.index&&i.options.insertionPoint===t.insertionPoint)return i}return null}function gue(e,t){for(var n=e.length-1;n>=0;n--){var i=e[n];if(i.attached&&i.options.insertionPoint===t.insertionPoint)return i}return null}function yue(e){for(var t=WF(),n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];if(i.nodeType===8&&i.nodeValue.trim()===e)return i}return null}function vue(e){var t=og.registry;if(t.length>0){var n=mue(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=gue(t,e),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var i=e.insertionPoint;if(i&&typeof i=="string"){var c=yue(i);if(c)return{parent:c.parentNode,node:c.nextSibling}}return!1}function _ue(e,t){var n=t.insertionPoint,i=vue(t);if(i!==!1&&i.parent){i.parent.insertBefore(e,i.node);return}if(n&&typeof n.nodeType=="number"){var c=n,u=c.parentNode;u&&u.insertBefore(e,c.nextSibling);return}WF().appendChild(e)}var xue=GF(function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null}),JL=function(t,n,i){try{"insertRule"in t?t.insertRule(n,i):"appendRule"in t&&t.appendRule(n)}catch{return!1}return t.cssRules[i]},e3=function(t,n){var i=t.cssRules.length;return n===void 0||n>i?i:n},bue=function(){var t=document.createElement("style");return t.textContent=`
`,t},wue=function(){function e(n){this.getPropertyValue=due,this.setProperty=hue,this.removeProperty=fue,this.setSelector=pue,this.hasInsertedRules=!1,this.cssRules=[],n&&og.add(n),this.sheet=n;var i=this.sheet?this.sheet.options:{},c=i.media,u=i.meta,p=i.element;this.element=p||bue(),this.element.setAttribute("data-jss",""),c&&this.element.setAttribute("media",c),u&&this.element.setAttribute("data-meta",u);var o=xue();o&&this.element.setAttribute("nonce",o)}var t=e.prototype;return t.attach=function(){if(!(this.element.parentNode||!this.sheet)){_ue(this.element,this.sheet.options);var i=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&i&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var i=this.element.parentNode;i&&i.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},t.deploy=function(){var i=this.sheet;if(i){if(i.options.link){this.insertRules(i.rules);return}this.element.textContent=`
`+i.toString()+`
`}},t.insertRules=function(i,c){for(var u=0;u<i.index.length;u++)this.insertRule(i.index[u],u,c)},t.insertRule=function(i,c,u){if(u===void 0&&(u=this.element.sheet),i.rules){var p=i,o=u;if(i.type==="conditional"||i.type==="keyframes"){var x=e3(u,c);if(o=JL(u,p.toString({children:!1}),x),o===!1)return!1;this.refCssRule(i,x,o)}return this.insertRules(p.rules,o),o}var S=i.toString();if(!S)return!1;var M=e3(u,c),k=JL(u,S,M);return k===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(i,M,k),k)},t.refCssRule=function(i,c,u){i.renderable=u,i.options.parent instanceof VF&&this.cssRules.splice(c,0,u)},t.deleteRule=function(i){var c=this.element.sheet,u=this.indexOf(i);return u===-1?!1:(c.deleteRule(u),this.cssRules.splice(u,1),!0)},t.indexOf=function(i){return this.cssRules.indexOf(i)},t.replaceRule=function(i,c){var u=this.indexOf(i);return u===-1?!1:(this.element.sheet.deleteRule(u),this.cssRules.splice(u,1),this.insertRule(c,u))},t.getRules=function(){return this.element.sheet.cssRules},e}(),Sue=0,Eue=function(){function e(n){this.id=Sue++,this.version="10.10.0",this.plugins=new cue,this.options={id:{minify:!1},createGenerateId:QL,Renderer:uy?wue:null,plugins:[]},this.generateId=QL({minify:!1});for(var i=0;i<XL.length;i++)this.plugins.use(XL[i],{queue:"internal"});this.setup(n)}var t=e.prototype;return t.setup=function(i){return i===void 0&&(i={}),i.createGenerateId&&(this.options.createGenerateId=i.createGenerateId),i.id&&(this.options.id=er({},this.options.id,i.id)),(i.createGenerateId||i.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),i.insertionPoint!=null&&(this.options.insertionPoint=i.insertionPoint),"Renderer"in i&&(this.options.Renderer=i.Renderer),i.plugins&&this.use.apply(this,i.plugins),this},t.createStyleSheet=function(i,c){c===void 0&&(c={});var u=c,p=u.index;typeof p!="number"&&(p=og.index===0?0:og.index+1);var o=new VF(i,er({},c,{jss:this,generateId:c.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:p}));return this.plugins.onProcessSheet(o),o},t.removeStyleSheet=function(i){return i.detach(),og.remove(i),this},t.createRule=function(i,c,u){if(c===void 0&&(c={}),u===void 0&&(u={}),typeof i=="object")return this.createRule(void 0,i,c);var p=er({},u,{name:i,jss:this,Renderer:this.options.Renderer});p.generateId||(p.generateId=this.generateId),p.classes||(p.classes={}),p.keyframes||(p.keyframes={});var o=NC(i,c,p);return o&&this.plugins.onProcessRule(o),o},t.use=function(){for(var i=this,c=arguments.length,u=new Array(c),p=0;p<c;p++)u[p]=arguments[p];return u.forEach(function(o){i.plugins.use(o)}),this},e}(),qF=function(t){return new Eue(t)},UC=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function HF(e){var t=null;for(var n in e){var i=e[n],c=typeof i;if(c==="function")t||(t={}),t[n]=i;else if(c==="object"&&i!==null&&!Array.isArray(i)){var u=HF(i);u&&(t||(t={}),t[n]=u)}}return t}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */qF();var ZF=Date.now(),M2="fnValues"+ZF,A2="fnStyle"+ ++ZF,Tue=function(){return{onCreateRule:function(n,i,c){if(typeof i!="function")return null;var u=NC(n,{},c);return u[A2]=i,u},onProcessStyle:function(n,i){if(M2 in i||A2 in i)return n;var c={};for(var u in n){var p=n[u];typeof p=="function"&&(delete n[u],c[u]=p)}return i[M2]=c,n},onUpdate:function(n,i,c,u){var p=i,o=p[A2];o&&(p.style=o(n)||{});var x=p[M2];if(x)for(var S in x)p.prop(S,x[S](n),u)}}};const Cue=Tue;var vc="@global",vE="@global ",Rue=function(){function e(n,i,c){this.type="global",this.at=vc,this.isProcessed=!1,this.key=n,this.options=c,this.rules=new _x(er({},c,{parent:this}));for(var u in i)this.rules.add(u,i[u]);this.rules.process()}var t=e.prototype;return t.getRule=function(i){return this.rules.get(i)},t.addRule=function(i,c,u){var p=this.rules.add(i,c,u);return p&&this.options.jss.plugins.onProcessRule(p),p},t.replaceRule=function(i,c,u){var p=this.rules.replace(i,c,u);return p&&this.options.jss.plugins.onProcessRule(p),p},t.indexOf=function(i){return this.rules.indexOf(i)},t.toString=function(i){return this.rules.toString(i)},e}(),Mue=function(){function e(n,i,c){this.type="global",this.at=vc,this.isProcessed=!1,this.key=n,this.options=c;var u=n.substr(vE.length);this.rule=c.jss.createRule(u,i,er({},c,{parent:this}))}var t=e.prototype;return t.toString=function(i){return this.rule?this.rule.toString(i):""},e}(),Aue=/\s*,\s*/g;function XF(e,t){for(var n=e.split(Aue),i="",c=0;c<n.length;c++)i+=t+" "+n[c].trim(),n[c+1]&&(i+=", ");return i}function kue(e,t){var n=e.options,i=e.style,c=i?i[vc]:null;if(c){for(var u in c)t.addRule(u,c[u],er({},n,{selector:XF(u,e.selector)}));delete i[vc]}}function Pue(e,t){var n=e.options,i=e.style;for(var c in i)if(!(c[0]!=="@"||c.substr(0,vc.length)!==vc)){var u=XF(c.substr(vc.length),e.selector);t.addRule(u,i[c],er({},n,{selector:u})),delete i[c]}}function Iue(){function e(n,i,c){if(!n)return null;if(n===vc)return new Rue(n,i,c);if(n[0]==="@"&&n.substr(0,vE.length)===vE)return new Mue(n,i,c);var u=c.parent;return u&&(u.type==="global"||u.options.parent&&u.options.parent.type==="global")&&(c.scoped=!1),!c.selector&&c.scoped===!1&&(c.selector=n),null}function t(n,i){n.type!=="style"||!i||(kue(n,i),Pue(n,i))}return{onCreateRule:e,onProcessRule:t}}var t3=/\s*,\s*/g,Lue=/&/g,Oue=/\$([\w-]+)/g;function Due(){function e(c,u){return function(p,o){var x=c.getRule(o)||u&&u.getRule(o);return x?x.selector:o}}function t(c,u){for(var p=u.split(t3),o=c.split(t3),x="",S=0;S<p.length;S++)for(var M=p[S],k=0;k<o.length;k++){var L=o[k];x&&(x+=", "),x+=L.indexOf("&")!==-1?L.replace(Lue,M):M+" "+L}return x}function n(c,u,p){if(p)return er({},p,{index:p.index+1});var o=c.options.nestingLevel;o=o===void 0?1:o+1;var x=er({},c.options,{nestingLevel:o,index:u.indexOf(c)+1});return delete x.name,x}function i(c,u,p){if(u.type!=="style")return c;var o=u,x=o.options.parent,S,M;for(var k in c){var L=k.indexOf("&")!==-1,j=k[0]==="@";if(!(!L&&!j)){if(S=n(o,x,S),L){var F=t(k,o.selector);M||(M=e(x,p)),F=F.replace(Oue,M);var V=o.key+"-"+k;"replaceRule"in x?x.replaceRule(V,c[k],er({},S,{selector:F})):x.addRule(V,c[k],er({},S,{selector:F}))}else j&&x.addRule(k,{},S).addRule(o.key,c[k],{selector:o.selector});delete c[k]}}return c}return{onProcessStyle:i}}var zue=/[A-Z]/g,Fue=/^ms-/,k2={};function Bue(e){return"-"+e.toLowerCase()}function KF(e){if(k2.hasOwnProperty(e))return k2[e];var t=e.replace(zue,Bue);return k2[e]=Fue.test(t)?"-"+t:t}function O_(e){var t={};for(var n in e){var i=n.indexOf("--")===0?n:KF(n);t[i]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(O_):t.fallbacks=O_(e.fallbacks)),t}function Nue(){function e(n){if(Array.isArray(n)){for(var i=0;i<n.length;i++)n[i]=O_(n[i]);return n}return O_(n)}function t(n,i,c){if(i.indexOf("--")===0)return n;var u=KF(i);return i===u?n:(c.prop(u,n),null)}return{onProcessStyle:e,onChangeValue:t}}var Ct=UC&&CSS?CSS.px:"px",bv=UC&&CSS?CSS.ms:"ms",hh=UC&&CSS?CSS.percent:"%",$ue={"animation-delay":bv,"animation-duration":bv,"background-position":Ct,"background-position-x":Ct,"background-position-y":Ct,"background-size":Ct,border:Ct,"border-bottom":Ct,"border-bottom-left-radius":Ct,"border-bottom-right-radius":Ct,"border-bottom-width":Ct,"border-left":Ct,"border-left-width":Ct,"border-radius":Ct,"border-right":Ct,"border-right-width":Ct,"border-top":Ct,"border-top-left-radius":Ct,"border-top-right-radius":Ct,"border-top-width":Ct,"border-width":Ct,"border-block":Ct,"border-block-end":Ct,"border-block-end-width":Ct,"border-block-start":Ct,"border-block-start-width":Ct,"border-block-width":Ct,"border-inline":Ct,"border-inline-end":Ct,"border-inline-end-width":Ct,"border-inline-start":Ct,"border-inline-start-width":Ct,"border-inline-width":Ct,"border-start-start-radius":Ct,"border-start-end-radius":Ct,"border-end-start-radius":Ct,"border-end-end-radius":Ct,margin:Ct,"margin-bottom":Ct,"margin-left":Ct,"margin-right":Ct,"margin-top":Ct,"margin-block":Ct,"margin-block-end":Ct,"margin-block-start":Ct,"margin-inline":Ct,"margin-inline-end":Ct,"margin-inline-start":Ct,padding:Ct,"padding-bottom":Ct,"padding-left":Ct,"padding-right":Ct,"padding-top":Ct,"padding-block":Ct,"padding-block-end":Ct,"padding-block-start":Ct,"padding-inline":Ct,"padding-inline-end":Ct,"padding-inline-start":Ct,"mask-position-x":Ct,"mask-position-y":Ct,"mask-size":Ct,height:Ct,width:Ct,"min-height":Ct,"max-height":Ct,"min-width":Ct,"max-width":Ct,bottom:Ct,left:Ct,top:Ct,right:Ct,inset:Ct,"inset-block":Ct,"inset-block-end":Ct,"inset-block-start":Ct,"inset-inline":Ct,"inset-inline-end":Ct,"inset-inline-start":Ct,"box-shadow":Ct,"text-shadow":Ct,"column-gap":Ct,"column-rule":Ct,"column-rule-width":Ct,"column-width":Ct,"font-size":Ct,"font-size-delta":Ct,"letter-spacing":Ct,"text-decoration-thickness":Ct,"text-indent":Ct,"text-stroke":Ct,"text-stroke-width":Ct,"word-spacing":Ct,motion:Ct,"motion-offset":Ct,outline:Ct,"outline-offset":Ct,"outline-width":Ct,perspective:Ct,"perspective-origin-x":hh,"perspective-origin-y":hh,"transform-origin":hh,"transform-origin-x":hh,"transform-origin-y":hh,"transform-origin-z":hh,"transition-delay":bv,"transition-duration":bv,"vertical-align":Ct,"flex-basis":Ct,"shape-margin":Ct,size:Ct,gap:Ct,grid:Ct,"grid-gap":Ct,"row-gap":Ct,"grid-row-gap":Ct,"grid-column-gap":Ct,"grid-template-rows":Ct,"grid-template-columns":Ct,"grid-auto-rows":Ct,"grid-auto-columns":Ct,"box-shadow-x":Ct,"box-shadow-y":Ct,"box-shadow-blur":Ct,"box-shadow-spread":Ct,"font-line-height":Ct,"text-shadow-x":Ct,"text-shadow-y":Ct,"text-shadow-blur":Ct};function YF(e){var t=/(-[a-z])/g,n=function(p){return p[1].toUpperCase()},i={};for(var c in e)i[c]=e[c],i[c.replace(t,n)]=e[c];return i}var Uue=YF($ue);function ag(e,t,n){if(t==null)return t;if(Array.isArray(t))for(var i=0;i<t.length;i++)t[i]=ag(e,t[i],n);else if(typeof t=="object")if(e==="fallbacks")for(var c in t)t[c]=ag(c,t[c],n);else for(var u in t)t[u]=ag(e+"-"+u,t[u],n);else if(typeof t=="number"&&isNaN(t)===!1){var p=n[e]||Uue[e];return p&&!(t===0&&p===Ct)?typeof p=="function"?p(t).toString():""+t+p:t.toString()}return t}function jue(e){e===void 0&&(e={});var t=YF(e);function n(c,u){if(u.type!=="style")return c;for(var p in c)c[p]=ag(p,c[p],t);return c}function i(c,u){return ag(u,c,t)}return{onProcessStyle:n,onChangeValue:i}}var Nm="",_E="",QF="",JF="",Vue=uy&&"ontouchstart"in document.documentElement;if(uy){var P2={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},Gue=document.createElement("p"),I2=Gue.style,Wue="Transform";for(var L2 in P2)if(L2+Wue in I2){Nm=L2,_E=P2[L2];break}Nm==="Webkit"&&"msHyphens"in I2&&(Nm="ms",_E=P2.ms,JF="edge"),Nm==="Webkit"&&"-apple-trailing-word"in I2&&(QF="apple")}var Vn={js:Nm,css:_E,vendor:QF,browser:JF,isTouch:Vue};function que(e){return e[1]==="-"||Vn.js==="ms"?e:"@"+Vn.css+"keyframes"+e.substr(10)}var Hue={noPrefill:["appearance"],supportedProperty:function(t){return t!=="appearance"?!1:Vn.js==="ms"?"-webkit-"+t:Vn.css+t}},Zue={noPrefill:["color-adjust"],supportedProperty:function(t){return t!=="color-adjust"?!1:Vn.js==="Webkit"?Vn.css+"print-"+t:t}},Xue=/[-\s]+(.)?/g;function Kue(e,t){return t?t.toUpperCase():""}function jC(e){return e.replace(Xue,Kue)}function Ec(e){return jC("-"+e)}var Yue={noPrefill:["mask"],supportedProperty:function(t,n){if(!/^mask/.test(t))return!1;if(Vn.js==="Webkit"){var i="mask-image";if(jC(i)in n)return t;if(Vn.js+Ec(i)in n)return Vn.css+t}return t}},Que={noPrefill:["text-orientation"],supportedProperty:function(t){return t!=="text-orientation"?!1:Vn.vendor==="apple"&&!Vn.isTouch?Vn.css+t:t}},Jue={noPrefill:["transform"],supportedProperty:function(t,n,i){return t!=="transform"?!1:i.transform?t:Vn.css+t}},ede={noPrefill:["transition"],supportedProperty:function(t,n,i){return t!=="transition"?!1:i.transition?t:Vn.css+t}},tde={noPrefill:["writing-mode"],supportedProperty:function(t){return t!=="writing-mode"?!1:Vn.js==="Webkit"||Vn.js==="ms"&&Vn.browser!=="edge"?Vn.css+t:t}},nde={noPrefill:["user-select"],supportedProperty:function(t){return t!=="user-select"?!1:Vn.js==="Moz"||Vn.js==="ms"||Vn.vendor==="apple"?Vn.css+t:t}},rde={supportedProperty:function(t,n){if(!/^break-/.test(t))return!1;if(Vn.js==="Webkit"){var i="WebkitColumn"+Ec(t);return i in n?Vn.css+"column-"+t:!1}if(Vn.js==="Moz"){var c="page"+Ec(t);return c in n?"page-"+t:!1}return!1}},ide={supportedProperty:function(t,n){if(!/^(border|margin|padding)-inline/.test(t))return!1;if(Vn.js==="Moz")return t;var i=t.replace("-inline","");return Vn.js+Ec(i)in n?Vn.css+i:!1}},ode={supportedProperty:function(t,n){return jC(t)in n?t:!1}},ade={supportedProperty:function(t,n){var i=Ec(t);return t[0]==="-"||t[0]==="-"&&t[1]==="-"?t:Vn.js+i in n?Vn.css+t:Vn.js!=="Webkit"&&"Webkit"+i in n?"-webkit-"+t:!1}},sde={supportedProperty:function(t){return t.substring(0,11)!=="scroll-snap"?!1:Vn.js==="ms"?""+Vn.css+t:t}},lde={supportedProperty:function(t){return t!=="overscroll-behavior"?!1:Vn.js==="ms"?Vn.css+"scroll-chaining":t}},cde={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},ude={supportedProperty:function(t,n){var i=cde[t];return i&&Vn.js+Ec(i)in n?Vn.css+i:!1}},eB={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},dde=Object.keys(eB),hde=function(t){return Vn.css+t},fde={supportedProperty:function(t,n,i){var c=i.multiple;if(dde.indexOf(t)>-1){var u=eB[t];if(!Array.isArray(u))return Vn.js+Ec(u)in n?Vn.css+u:!1;if(!c)return!1;for(var p=0;p<u.length;p++)if(!(Vn.js+Ec(u[0])in n))return!1;return u.map(hde)}return!1}},tB=[Hue,Zue,Yue,Que,Jue,ede,tde,nde,rde,ide,ode,ade,sde,lde,ude,fde],n3=tB.filter(function(e){return e.supportedProperty}).map(function(e){return e.supportedProperty}),pde=tB.filter(function(e){return e.noPrefill}).reduce(function(e,t){return e.push.apply(e,kce(t.noPrefill)),e},[]),$m,Iu={};if(uy){$m=document.createElement("p");var O2=window.getComputedStyle(document.documentElement,"");for(var D2 in O2)isNaN(D2)||(Iu[O2[D2]]=O2[D2]);pde.forEach(function(e){return delete Iu[e]})}function xE(e,t){if(t===void 0&&(t={}),!$m)return e;if(Iu[e]!=null)return Iu[e];(e==="transition"||e==="transform")&&(t[e]=e in $m.style);for(var n=0;n<n3.length&&(Iu[e]=n3[n](e,$m.style,t),!Iu[e]);n++);try{$m.style[e]=""}catch{return!1}return Iu[e]}var fh={},mde={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},gde=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Yl;function yde(e,t,n){if(t==="var")return"var";if(t==="all")return"all";if(n==="all")return", all";var i=t?xE(t):", "+xE(n);return i||t||n}uy&&(Yl=document.createElement("p"));function r3(e,t){var n=t;if(!Yl||e==="content")return t;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var i=e+n;if(fh[i]!=null)return fh[i];try{Yl.style[e]=n}catch{return fh[i]=!1,!1}if(mde[e])n=n.replace(gde,yde);else if(Yl.style[e]===""&&(n=Vn.css+n,n==="-ms-flex"&&(Yl.style[e]="-ms-flexbox"),Yl.style[e]=n,Yl.style[e]===""))return fh[i]=!1,!1;return Yl.style[e]="",fh[i]=n,fh[i]}function vde(){function e(c){if(c.type==="keyframes"){var u=c;u.at=que(u.at)}}function t(c){for(var u in c){var p=c[u];if(u==="fallbacks"&&Array.isArray(p)){c[u]=p.map(t);continue}var o=!1,x=xE(u);x&&x!==u&&(o=!0);var S=!1,M=r3(x,ju(p));M&&M!==p&&(S=!0),(o||S)&&(o&&delete c[u],c[x||u]=M||p)}return c}function n(c,u){return u.type!=="style"?c:t(c)}function i(c,u){return r3(u,ju(c))||c}return{onProcessRule:e,onProcessStyle:n,onChangeValue:i}}function _de(){var e=function(n,i){return n.length===i.length?n>i?1:-1:n.length-i.length};return{onProcessStyle:function(n,i){if(i.type!=="style")return n;for(var c={},u=Object.keys(n).sort(e),p=0;p<u.length;p++)c[u[p]]=n[u[p]];return c}}}function xde(){return{plugins:[Cue(),Iue(),Due(),Nue(),jue(),typeof window>"u"?null:vde(),_de()]}}function nB(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.baseClasses,n=e.newClasses;if(e.Component,!n)return t;var i=er({},t);return Object.keys(n).forEach(function(c){n[c]&&(i[c]="".concat(t[c]," ").concat(n[c]))}),i}var bde={set:function(t,n,i,c){var u=t.get(n);u||(u=new Map,t.set(n,u)),u.set(i,c)},get:function(t,n,i){var c=t.get(n);return c?c.get(i):void 0},delete:function(t,n,i){var c=t.get(n);c.delete(i)}};const kh=bde;var wde=Xe.createContext(null);const Sde=wde;function Ede(){var e=Xe.useContext(Sde);return e}var Tde=qF(xde()),Cde=$ce(),Rde=new Map,Mde={disableGeneration:!1,generateClassName:Cde,jss:Tde,sheetsCache:null,sheetsManager:Rde,sheetsRegistry:null},Ade=Xe.createContext(Mde),i3=-1e9;function kde(){return i3+=1,i3}var Pde={};const Ide=Pde;function Lde(e){var t=typeof e=="function";return{create:function(i,c){var u;try{u=t?e(i):e}catch(x){throw x}if(!c||!i.overrides||!i.overrides[c])return u;var p=i.overrides[c],o=er({},u);return Object.keys(p).forEach(function(x){o[x]=lf(o[x],p[x])}),o},options:{}}}function Ode(e,t,n){var i=e.state,c=e.stylesOptions;if(c.disableGeneration)return t||{};i.cacheClasses||(i.cacheClasses={value:null,lastProp:null,lastJSS:{}});var u=!1;return i.classes!==i.cacheClasses.lastJSS&&(i.cacheClasses.lastJSS=i.classes,u=!0),t!==i.cacheClasses.lastProp&&(i.cacheClasses.lastProp=t,u=!0),u&&(i.cacheClasses.value=nB({baseClasses:i.cacheClasses.lastJSS,newClasses:t,Component:n})),i.cacheClasses.value}function Dde(e,t){var n=e.state,i=e.theme,c=e.stylesOptions,u=e.stylesCreator,p=e.name;if(!c.disableGeneration){var o=kh.get(c.sheetsManager,u,i);o||(o={refs:0,staticSheet:null,dynamicStyles:null},kh.set(c.sheetsManager,u,i,o));var x=er({},u.options,c,{theme:i,flip:typeof c.flip=="boolean"?c.flip:i.direction==="rtl"});x.generateId=x.serverGenerateClassName||x.generateClassName;var S=c.sheetsRegistry;if(o.refs===0){var M;c.sheetsCache&&(M=kh.get(c.sheetsCache,u,i));var k=u.create(i,p);M||(M=c.jss.createStyleSheet(k,er({link:!1},x)),M.attach(),c.sheetsCache&&kh.set(c.sheetsCache,u,i,M)),S&&S.add(M),o.staticSheet=M,o.dynamicStyles=HF(k)}if(o.dynamicStyles){var L=c.jss.createStyleSheet(o.dynamicStyles,er({link:!0},x));L.update(t),L.attach(),n.dynamicSheet=L,n.classes=nB({baseClasses:o.staticSheet.classes,newClasses:L.classes}),S&&S.add(L)}else n.classes=o.staticSheet.classes;o.refs+=1}}function zde(e,t){var n=e.state;n.dynamicSheet&&n.dynamicSheet.update(t)}function Fde(e){var t=e.state,n=e.theme,i=e.stylesOptions,c=e.stylesCreator;if(!i.disableGeneration){var u=kh.get(i.sheetsManager,c,n);u.refs-=1;var p=i.sheetsRegistry;u.refs===0&&(kh.delete(i.sheetsManager,c,n),i.jss.removeStyleSheet(u.staticSheet),p&&p.remove(u.staticSheet)),t.dynamicSheet&&(i.jss.removeStyleSheet(t.dynamicSheet),p&&p.remove(t.dynamicSheet))}}function Bde(e,t){var n=Xe.useRef([]),i,c=Xe.useMemo(function(){return{}},t);n.current!==c&&(n.current=c,i=e()),Xe.useEffect(function(){return function(){i&&i()}},[c])}function Nde(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.name,i=t.classNamePrefix,c=t.Component,u=t.defaultTheme,p=u===void 0?Ide:u,o=wf(t,["name","classNamePrefix","Component","defaultTheme"]),x=Lde(e),S=n||i||"makeStyles";x.options={index:kde(),name:n,meta:S,classNamePrefix:S};var M=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},j=Ede()||p,F=er({},Xe.useContext(Ade),o),V=Xe.useRef(),oe=Xe.useRef();Bde(function(){var $={name:n,state:{},stylesCreator:x,stylesOptions:F,theme:j};return Dde($,L),oe.current=!1,V.current=$,function(){Fde($)}},[j,x]),Xe.useEffect(function(){oe.current&&zde(V.current,L),oe.current=!0});var B=Ode(V.current,L.classes,c);return B};return M}var $de=zce();const Ude=$de;function jde(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Nde(e,er({defaultTheme:Ude},t))}const Vde=jde(e=>({default:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},image:{display:"flex",height:"100%"}})),Gde=e=>fl({palette:{mode:e.palette.mode,primary:{main:"#00A651"},secondary:{main:"#EEF1EE"}},components:{MuiTextField:{styleOverrides:{root:{"--TextField-brandBorderColor":"#E0E3E7","--TextField-brandBorderHoverColor":"#B2BAC2","--TextField-brandBorderFocusedColor":"#6F7E8C","& label.Mui-focused":{color:"var(--TextField-brandBorderFocusedColor)"}}}},MuiOutlinedInput:{styleOverrides:{notchedOutline:{borderColor:"var(--TextField-brandBorderColor)"}}},MuiFilledInput:{styleOverrides:{root:{"&:before, &:after":{borderBottom:"2px solid var(--TextField-brandBorderColor)"},"&:hover:not(.Mui-disabled, .Mui-error):before":{borderBottom:"2px solid var(--TextField-brandBorderHoverColor)"},"&.Mui-focused:after":{borderBottom:"2px solid var(--TextField-brandBorderFocusedColor)"}}}},MuiInput:{styleOverrides:{root:{"&:before":{borderBottom:"2px solid var(--TextField-brandBorderColor)"},"&:hover:not(.Mui-disabled, .Mui-error):before":{borderBottom:"2px solid var(--TextField-brandBorderHoverColor)"},"&.Mui-focused:after":{borderBottom:"2px solid var(--TextField-brandBorderFocusedColor)"}}}}}}),Wde={bgcolor:"primary.main",width:30,height:30},qde={borderRadius:"50%"},Hde=()=>{const{post:e,setPost:t}=Fo(),[n,i]=X.useState(),[c,u]=X.useState(),p=Gi(),o=Vde(),[x,S]=X.useState([]),M=10,k=(ae,ue)=>{console.log(ae,ue),S(ae)},L=ae=>{i(ae.target.value)},j=ae=>{u(ae.target.value)};X.useEffect(()=>{t(ae=>({...ae,title:n,content:c,photo:x})),console.log("최종: ",e),console.log("images's lenght: ",x.length)},[n,c,x]);const[F,V]=X.useState(!1),[oe,B]=X.useState({}),[$,Z]=X.useState(),Q=ae=>{Z(ae),V(ue=>!ue),B({filter:oe==="brightness(50%)"?"none":"brightness(50%)"})};return ne(iy,{theme:Gde(p),children:Yt(xn,{sx:{maxHeight:"100vh",padding:"1rem 1.5rem",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[Yt(xn,{sx:{display:"flex",flexDirection:"column"},children:[ne(xn,{sx:{pb:"1rem"},children:ne(_J,{label:e==null?void 0:e.category,size:"medium",color:"primary",sx:{fontWeight:"900"}})}),ne(Yw,{label:"주소를 확인해 주세요",variant:"standard",InputProps:{readOnly:!0},defaultValue:e==null?void 0:e.address,margin:"dense"}),ne(Yw,{label:"우연의 제목을 입력해 주세요",variant:"standard",margin:"dense",color:"primary",value:n,onChange:L}),ne(Yw,{multiline:!0,rows:4,label:"어떤 일이 있었나요?",variant:"standard",margin:"dense",InputProps:{disableUnderline:!0},value:c,onChange:j})]}),ne(Xle,{multiple:!0,value:x,onChange:k,maxNumber:M,children:({imageList:ae,onImageUpload:ue,onImageRemove:de})=>ne(xn,{children:Yt(ece,{className:`scroll-container ${x.length==0?o.default:o.image}`,horizontal:!0,vertical:!1,children:[ae.map((ke,J)=>Yt(xn,{display:"flex",justifyContent:"center",alignItems:"center",sx:{p:20,"@media (max-width: 375px)":{p:14},position:"relative",mr:3},onClick:()=>Q(J),children:[ne("img",{src:ke.dataURL,style:{position:"absolute",width:"100%",height:"100%",objectFit:"cover",borderRadius:"15px",filter:$===J&&F?"brightness(50%)":"none"}}),ne(lee,{color:"secondary",overlap:"circular",badgeContent:" ",invisible:!0,sx:{position:"absolute",top:"5%",left:"86%","@media (max-width: 375px)":{left:"83%"},transform:"translate(-50%, -50%)"},children:ne(xn,{component:"span",sx:{...Wde,...qde,position:"absolute",display:"flex",justifyContent:"center",textAlign:"center",pt:.3,color:"white",fontWeight:"bold"},children:J+1})}),$===J?F&&ne("button",{onClick:()=>{de(J)},style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"transparent",border:"none",padding:0,color:"white",fontSize:"1.5rem",fontWeight:"bold"},children:"지우기"}):null]},J)),ne(xn,{display:"flex",justifyContent:"center",alignItems:"center",sx:{p:20,"@media (max-width: 375px)":{p:15},position:"relative"},children:Yt(cl,{onClick:ue,style:{border:"2px dashed #B2B1B1",borderRadius:"20px",backgroundColor:"#F3F3F3",position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[ne(bne,{style:{fontSize:"3rem",color:"#ED6728"},children:"add_circle"}),ne(Rr,{sx:{color:"black",fontSize:"1.2rem",fontWeight:"medium"},children:"사진 추가"})]})})]})})})]})})};var rB="en",VC={},bE={};function iB(){return rB}function Zde(e){rB=e}function Xde(e){return VC[e]}function Kde(e){if(!e)throw new Error("No locale data passed");VC[e.locale]=e,bE[e.locale.toLowerCase()]=e.locale}function o3(e){if(VC[e])return e;if(bE[e.toLowerCase()])return bE[e.toLowerCase()]}function oB(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.localeMatcher||"lookup";switch(n){case"lookup":return a3(e);case"best fit":return a3(e);default:throw new RangeError('Invalid "localeMatcher" option: '.concat(n))}}function a3(e){var t=o3(e);if(t)return t;for(var n=e.split("-");e.length>1;){n.pop(),e=n.join("-");var i=o3(e);if(i)return i}}var Ye={af:function(t){return t==1?"one":"other"},am:function(t){return t>=0&&t<=1?"one":"other"},ar:function(t){var n=String(t).split("."),i=Number(n[0])==t,c=i&&n[0].slice(-2);return t==0?"zero":t==1?"one":t==2?"two":c>=3&&c<=10?"few":c>=11&&c<=99?"many":"other"},ast:function(t){var n=String(t).split("."),i=!n[1];return t==1&&i?"one":"other"},be:function(t){var n=String(t).split("."),i=Number(n[0])==t,c=i&&n[0].slice(-1),u=i&&n[0].slice(-2);return c==1&&u!=11?"one":c>=2&&c<=4&&(u<12||u>14)?"few":i&&c==0||c>=5&&c<=9||u>=11&&u<=14?"many":"other"},br:function(t){var n=String(t).split("."),i=Number(n[0])==t,c=i&&n[0].slice(-1),u=i&&n[0].slice(-2),p=i&&n[0].slice(-6);return c==1&&u!=11&&u!=71&&u!=91?"one":c==2&&u!=12&&u!=72&&u!=92?"two":(c==3||c==4||c==9)&&(u<10||u>19)&&(u<70||u>79)&&(u<90||u>99)?"few":t!=0&&i&&p==0?"many":"other"},bs:function(t){var n=String(t).split("."),i=n[0],c=n[1]||"",u=!n[1],p=i.slice(-1),o=i.slice(-2),x=c.slice(-1),S=c.slice(-2);return u&&p==1&&o!=11||x==1&&S!=11?"one":u&&p>=2&&p<=4&&(o<12||o>14)||x>=2&&x<=4&&(S<12||S>14)?"few":"other"},ca:function(t){var n=String(t).split("."),i=n[0],c=!n[1],u=i.slice(-6);return t==1&&c?"one":i!=0&&u==0&&c?"many":"other"},ceb:function(t){var n=String(t).split("."),i=n[0],c=n[1]||"",u=!n[1],p=i.slice(-1),o=c.slice(-1);return u&&(i==1||i==2||i==3)||u&&p!=4&&p!=6&&p!=9||!u&&o!=4&&o!=6&&o!=9?"one":"other"},cs:function(t){var n=String(t).split("."),i=n[0],c=!n[1];return t==1&&c?"one":i>=2&&i<=4&&c?"few":c?"other":"many"},cy:function(t){return t==0?"zero":t==1?"one":t==2?"two":t==3?"few":t==6?"many":"other"},da:function(t){var n=String(t).split("."),i=n[0],c=Number(n[0])==t;return t==1||!c&&(i==0||i==1)?"one":"other"},dsb:function(t){var n=String(t).split("."),i=n[0],c=n[1]||"",u=!n[1],p=i.slice(-2),o=c.slice(-2);return u&&p==1||o==1?"one":u&&p==2||o==2?"two":u&&(p==3||p==4)||o==3||o==4?"few":"other"},dz:function(t){return"other"},es:function(t){var n=String(t).split("."),i=n[0],c=!n[1],u=i.slice(-6);return t==1?"one":i!=0&&u==0&&c?"many":"other"},ff:function(t){return t>=0&&t<2?"one":"other"},fr:function(t){var n=String(t).split("."),i=n[0],c=!n[1],u=i.slice(-6);return t>=0&&t<2?"one":i!=0&&u==0&&c?"many":"other"},ga:function(t){var n=String(t).split("."),i=Number(n[0])==t;return t==1?"one":t==2?"two":i&&t>=3&&t<=6?"few":i&&t>=7&&t<=10?"many":"other"},gd:function(t){var n=String(t).split("."),i=Number(n[0])==t;return t==1||t==11?"one":t==2||t==12?"two":i&&t>=3&&t<=10||i&&t>=13&&t<=19?"few":"other"},he:function(t){var n=String(t).split("."),i=n[0],c=!n[1];return i==1&&c||i==0&&!c?"one":i==2&&c?"two":"other"},is:function(t){var n=String(t).split("."),i=n[0],c=(n[1]||"").replace(/0+$/,""),u=Number(n[0])==t,p=i.slice(-1),o=i.slice(-2);return u&&p==1&&o!=11||c%10==1&&c%100!=11?"one":"other"},ksh:function(t){return t==0?"zero":t==1?"one":"other"},lt:function(t){var n=String(t).split("."),i=n[1]||"",c=Number(n[0])==t,u=c&&n[0].slice(-1),p=c&&n[0].slice(-2);return u==1&&(p<11||p>19)?"one":u>=2&&u<=9&&(p<11||p>19)?"few":i!=0?"many":"other"},lv:function(t){var n=String(t).split("."),i=n[1]||"",c=i.length,u=Number(n[0])==t,p=u&&n[0].slice(-1),o=u&&n[0].slice(-2),x=i.slice(-2),S=i.slice(-1);return u&&p==0||o>=11&&o<=19||c==2&&x>=11&&x<=19?"zero":p==1&&o!=11||c==2&&S==1&&x!=11||c!=2&&S==1?"one":"other"},mk:function(t){var n=String(t).split("."),i=n[0],c=n[1]||"",u=!n[1],p=i.slice(-1),o=i.slice(-2),x=c.slice(-1),S=c.slice(-2);return u&&p==1&&o!=11||x==1&&S!=11?"one":"other"},mt:function(t){var n=String(t).split("."),i=Number(n[0])==t,c=i&&n[0].slice(-2);return t==1?"one":t==2?"two":t==0||c>=3&&c<=10?"few":c>=11&&c<=19?"many":"other"},pa:function(t){return t==0||t==1?"one":"other"},pl:function(t){var n=String(t).split("."),i=n[0],c=!n[1],u=i.slice(-1),p=i.slice(-2);return t==1&&c?"one":c&&u>=2&&u<=4&&(p<12||p>14)?"few":c&&i!=1&&(u==0||u==1)||c&&u>=5&&u<=9||c&&p>=12&&p<=14?"many":"other"},pt:function(t){var n=String(t).split("."),i=n[0],c=!n[1],u=i.slice(-6);return i==0||i==1?"one":i!=0&&u==0&&c?"many":"other"},ro:function(t){var n=String(t).split("."),i=!n[1],c=Number(n[0])==t,u=c&&n[0].slice(-2);return t==1&&i?"one":!i||t==0||t!=1&&u>=1&&u<=19?"few":"other"},ru:function(t){var n=String(t).split("."),i=n[0],c=!n[1],u=i.slice(-1),p=i.slice(-2);return c&&u==1&&p!=11?"one":c&&u>=2&&u<=4&&(p<12||p>14)?"few":c&&u==0||c&&u>=5&&u<=9||c&&p>=11&&p<=14?"many":"other"},se:function(t){return t==1?"one":t==2?"two":"other"},si:function(t){var n=String(t).split("."),i=n[0],c=n[1]||"";return t==0||t==1||i==0&&c==1?"one":"other"},sl:function(t){var n=String(t).split("."),i=n[0],c=!n[1],u=i.slice(-2);return c&&u==1?"one":c&&u==2?"two":c&&(u==3||u==4)||!c?"few":"other"}};Ye.as=Ye.am;Ye.az=Ye.af;Ye.bg=Ye.af;Ye.bn=Ye.am;Ye.brx=Ye.af;Ye.ce=Ye.af;Ye.chr=Ye.af;Ye.de=Ye.ast;Ye.ee=Ye.af;Ye.el=Ye.af;Ye.en=Ye.ast;Ye.et=Ye.ast;Ye.eu=Ye.af;Ye.fa=Ye.am;Ye.fi=Ye.ast;Ye.fil=Ye.ceb;Ye.fo=Ye.af;Ye.fur=Ye.af;Ye.fy=Ye.ast;Ye.gl=Ye.ast;Ye.gu=Ye.am;Ye.ha=Ye.af;Ye.hi=Ye.am;Ye.hr=Ye.bs;Ye.hsb=Ye.dsb;Ye.hu=Ye.af;Ye.hy=Ye.ff;Ye.ia=Ye.ast;Ye.id=Ye.dz;Ye.ig=Ye.dz;Ye.it=Ye.ca;Ye.ja=Ye.dz;Ye.jgo=Ye.af;Ye.jv=Ye.dz;Ye.ka=Ye.af;Ye.kea=Ye.dz;Ye.kk=Ye.af;Ye.kl=Ye.af;Ye.km=Ye.dz;Ye.kn=Ye.am;Ye.ko=Ye.dz;Ye.ks=Ye.af;Ye.ku=Ye.af;Ye.ky=Ye.af;Ye.lb=Ye.af;Ye.lkt=Ye.dz;Ye.lo=Ye.dz;Ye.ml=Ye.af;Ye.mn=Ye.af;Ye.mr=Ye.af;Ye.ms=Ye.dz;Ye.my=Ye.dz;Ye.nb=Ye.af;Ye.ne=Ye.af;Ye.nl=Ye.ast;Ye.nn=Ye.af;Ye.no=Ye.af;Ye.or=Ye.af;Ye.pcm=Ye.am;Ye.ps=Ye.af;Ye.rm=Ye.af;Ye.sah=Ye.dz;Ye.sc=Ye.ast;Ye.sd=Ye.af;Ye.sk=Ye.cs;Ye.so=Ye.af;Ye.sq=Ye.af;Ye.sr=Ye.bs;Ye.su=Ye.dz;Ye.sv=Ye.ast;Ye.sw=Ye.ast;Ye.ta=Ye.af;Ye.te=Ye.af;Ye.th=Ye.dz;Ye.ti=Ye.pa;Ye.tk=Ye.af;Ye.to=Ye.dz;Ye.tr=Ye.af;Ye.ug=Ye.af;Ye.uk=Ye.ru;Ye.ur=Ye.ast;Ye.uz=Ye.af;Ye.vi=Ye.dz;Ye.wae=Ye.af;Ye.wo=Ye.dz;Ye.xh=Ye.af;Ye.yi=Ye.ast;Ye.yo=Ye.dz;Ye.yue=Ye.dz;Ye.zh=Ye.dz;Ye.zu=Ye.am;const s3=Ye;function l3(e){return e==="pt-PT"?e:Qde(e)}var Yde=/^([a-z0-9]+)/i;function Qde(e){var t=e.match(Yde);if(!t)throw new TypeError("Invalid locale: ".concat(e));return t[1]}function Jde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c3(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ehe(e,t,n){return t&&c3(e.prototype,t),n&&c3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var wE=function(){function e(t,n){Jde(this,e);var i=e.supportedLocalesOf(t);if(i.length===0)throw new RangeError("Unsupported locale: "+t);if(n&&n.type!=="cardinal")throw new RangeError('Only "cardinal" "type" is supported');this.$=s3[l3(i[0])]}return ehe(e,[{key:"select",value:function(n){return this.$(n)}}],[{key:"supportedLocalesOf",value:function(n){return typeof n=="string"&&(n=[n]),n.filter(function(i){return s3[l3(i)]})}}]),e}();function SE(e){"@babel/helpers - typeof";return SE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},SE(e)}function u3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function d3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?u3(Object(n),!0).forEach(function(i){the(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function the(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h3(e,t){return ohe(e)||ihe(e,t)||rhe(e,t)||nhe()}function nhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rhe(e,t){if(e){if(typeof e=="string")return f3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f3(e,t)}}function f3(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ihe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i=[],c=!0,u=!1,p,o;try{for(n=n.call(e);!(c=(p=n.next()).done)&&(i.push(p.value),!(t&&i.length===t));c=!0);}catch(x){u=!0,o=x}finally{try{!c&&n.return!=null&&n.return()}finally{if(u)throw o}}return i}}function ohe(e){if(Array.isArray(e))return e}function ahe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p3(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function she(e,t,n){return t&&p3(e.prototype,t),n&&p3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var lhe=["second","minute","hour","day","week","month","quarter","year"],che=["auto","always"],uhe=["long","short","narrow"],dhe=["lookup","best fit"],Tc=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ahe(this,e);var i=n.numeric,c=n.style,u=n.localeMatcher;if(this.numeric="always",this.style="long",this.localeMatcher="lookup",i!==void 0){if(che.indexOf(i)<0)throw new RangeError('Invalid "numeric" option: '.concat(i));this.numeric=i}if(c!==void 0){if(uhe.indexOf(c)<0)throw new RangeError('Invalid "style" option: '.concat(c));this.style=c}if(u!==void 0){if(dhe.indexOf(u)<0)throw new RangeError('Invalid "localeMatcher" option: '.concat(u));this.localeMatcher=u}if(typeof t=="string"&&(t=[t]),t.push(iB()),this.locale=e.supportedLocalesOf(t,{localeMatcher:this.localeMatcher})[0],!this.locale)throw new Error("No supported locale was found");wE.supportedLocalesOf(this.locale).length>0?this.pluralRules=new wE(this.locale):console.warn('"'.concat(this.locale,'" locale is not supported')),typeof Intl<"u"&&Intl.NumberFormat?(this.numberFormat=new Intl.NumberFormat(this.locale),this.numberingSystem=this.numberFormat.resolvedOptions().numberingSystem):this.numberingSystem="latn",this.locale=oB(this.locale,{localeMatcher:this.localeMatcher})}return she(e,[{key:"format",value:function(){var n=m3(arguments),i=h3(n,2),c=i[0],u=i[1];return this.getRule(c,u).replace("{0}",this.formatNumber(Math.abs(c)))}},{key:"formatToParts",value:function(){var n=m3(arguments),i=h3(n,2),c=i[0],u=i[1],p=this.getRule(c,u),o=p.indexOf("{0}");if(o<0)return[{type:"literal",value:p}];var x=[];return o>0&&x.push({type:"literal",value:p.slice(0,o)}),x=x.concat(this.formatNumberToParts(Math.abs(c)).map(function(S){return d3(d3({},S),{},{unit:u})})),o+3<p.length-1&&x.push({type:"literal",value:p.slice(o+3)}),x}},{key:"getRule",value:function(n,i){var c=Xde(this.locale)[this.style][i];if(typeof c=="string")return c;if(this.numeric==="auto"){if(n===-2||n===-1){var u=c["previous".concat(n===-1?"":"-"+Math.abs(n))];if(u)return u}else if(n===1||n===2){var p=c["next".concat(n===1?"":"-"+Math.abs(n))];if(p)return p}else if(n===0&&c.current)return c.current}var o=c[ghe(n)?"past":"future"];if(typeof o=="string")return o;var x=this.pluralRules&&this.pluralRules.select(Math.abs(n))||"other";return o[x]||o.other}},{key:"formatNumber",value:function(n){return this.numberFormat?this.numberFormat.format(n):String(n)}},{key:"formatNumberToParts",value:function(n){return this.numberFormat&&this.numberFormat.formatToParts?this.numberFormat.formatToParts(n):[{type:"integer",value:this.formatNumber(n)}]}},{key:"resolvedOptions",value:function(){return{locale:this.locale,style:this.style,numeric:this.numeric,numberingSystem:this.numberingSystem}}}]),e}();Tc.supportedLocalesOf=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof e=="string")e=[e];else if(!Array.isArray(e))throw new TypeError('Invalid "locales" argument');return e.filter(function(n){return oB(n,t)})};Tc.addLocale=Kde;Tc.setDefaultLocale=Zde;Tc.getDefaultLocale=iB;Tc.PluralRules=wE;var z2='Invalid "unit" argument';function hhe(e){if(SE(e)==="symbol")throw new TypeError(z2);if(typeof e!="string")throw new RangeError("".concat(z2,": ").concat(e));if(e[e.length-1]==="s"&&(e=e.slice(0,e.length-1)),lhe.indexOf(e)<0)throw new RangeError("".concat(z2,": ").concat(e));return e}var fhe='Invalid "number" argument';function phe(e){if(e=Number(e),Number.isFinite&&!Number.isFinite(e))throw new RangeError("".concat(fhe,": ").concat(e));return e}function mhe(e){return 1/e===-1/0}function ghe(e){return e<0||e===0&&mhe(e)}function m3(e){if(e.length<2)throw new TypeError('"unit" argument is required');return[phe(e[0]),hhe(e[1])]}function D_(e){"@babel/helpers - typeof";return D_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D_(e)}function yhe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g3(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function vhe(e,t,n){return t&&g3(e.prototype,t),n&&g3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var y3=function(){function e(){yhe(this,e),this.cache={}}return vhe(e,[{key:"get",value:function(){for(var n=this.cache,i=arguments.length,c=new Array(i),u=0;u<i;u++)c[u]=arguments[u];for(var p=0,o=c;p<o.length;p++){var x=o[p];if(D_(n)!=="object")return;n=n[x]}return n}},{key:"put",value:function(){for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];for(var u=i.pop(),p=i.pop(),o=this.cache,x=0,S=i;x<S.length;x++){var M=S[x];D_(o[M])!=="object"&&(o[M]={}),o=o[M]}return o[p]=u}}]),e}();function EE(e){"@babel/helpers - typeof";return EE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},EE(e)}function _he(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=xhe(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xhe(e,t){if(e){if(typeof e=="string")return v3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v3(e,t)}}function v3(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function bhe(e,t){for(var n=_he(e),i;!(i=n()).done;){var c=i.value;if(t(c))return c;for(var u=c.split("-");u.length>1;)if(u.pop(),c=u.join("-"),t(c))return c}throw new Error("No locale data has been registered for any of the locales: ".concat(e.join(", ")))}function whe(){var e=(typeof Intl>"u"?"undefined":EE(Intl))==="object";return e&&typeof Intl.DateTimeFormat=="function"}function TE(e){"@babel/helpers - typeof";return TE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},TE(e)}function She(e){return The(e)&&(Array.isArray(e.steps)||Array.isArray(e.gradation)||Array.isArray(e.flavour)||typeof e.flavour=="string"||Array.isArray(e.labels)||typeof e.labels=="string"||Array.isArray(e.units)||typeof e.custom=="function")}var Ehe={}.constructor;function The(e){return TE(e)!==void 0&&e!==null&&e.constructor===Ehe}var Xs=60,z_=60*Xs,Vu=24*z_,CE=7*Vu,RE=30.44*Vu,aB=146097/400*Vu;function Vh(e){switch(e){case"second":return 1;case"minute":return Xs;case"hour":return z_;case"day":return Vu;case"week":return CE;case"month":return RE;case"year":return aB}}function sB(e){return e.factor!==void 0?e.factor:Vh(e.unit||e.formatAs)||1}function Og(e){switch(e){case"floor":return Math.floor;default:return Math.round}}function GC(e){switch(e){case"floor":return 1;default:return .5}}function ME(e){"@babel/helpers - typeof";return ME=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ME(e)}function lB(e,t){var n=t.prevStep,i=t.timestamp,c=t.now,u=t.future,p=t.round,o;return n&&(n.id||n.unit)&&(o=e["threshold_for_".concat(n.id||n.unit)]),o===void 0&&e.threshold!==void 0&&(o=e.threshold,typeof o=="function"&&(o=o(c,u))),o===void 0&&(o=e.minTime),ME(o)==="object"&&(n&&n.id&&o[n.id]!==void 0?o=o[n.id]:o=o.default),typeof o=="function"&&(o=o(i,{future:u,getMinTimeForUnit:function(S,M){return _3(S,M||n&&n.formatAs,{round:p})}})),o===void 0&&e.test&&(e.test(i,{now:c,future:u})?o=0:o=9007199254740991),o===void 0&&(n?e.formatAs&&n.formatAs&&(o=_3(e.formatAs,n.formatAs,{round:p})):o=0),o===void 0&&console.warn("[javascript-time-ago] A step should specify `minTime`:\n"+JSON.stringify(e,null,2)),o}function _3(e,t,n){var i=n.round,c=Vh(e),u;if(t==="now"?u=Vh(e):u=Vh(t),c!==void 0&&u!==void 0)return c-u*(1-GC(i))}function x3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function Che(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?x3(Object(n),!0).forEach(function(i){Rhe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Rhe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mhe(e,t,n){var i=n.now,c=n.future,u=n.round,p=n.units,o=n.getNextStep;e=khe(e,p);var x=Ahe(e,t,{now:i,future:c,round:u});if(o){if(x){var S=e[e.indexOf(x)-1],M=e[e.indexOf(x)+1];return[S,x,M]}return[void 0,void 0,e[0]]}return x}function Ahe(e,t,n){var i=n.now,c=n.future,u=n.round;if(e.length!==0){var p=cB(e,t,{now:i,future:c||t<0,round:u});if(p!==-1){var o=e[p];if(o.granularity){var x=Og(u)(Math.abs(t)/sB(o)/o.granularity)*o.granularity;if(x===0&&p>0)return e[p-1]}return o}}}function cB(e,t,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,c=lB(e[i],Che({prevStep:e[i-1],timestamp:n.now-t*1e3},n));return c===void 0||Math.abs(t)<c?i-1:i===e.length-1?i:cB(e,t,n,i+1)}function khe(e,t){return e.filter(function(n){var i=n.unit,c=n.formatAs;return i=i||c,i?t.indexOf(i)>=0:!0})}function Phe(e,t,n){var i=n.now,c=n.round;if(Vh(e)){var u=Vh(e)*1e3,p=t>i,o=Math.abs(t-i),x=Og(c)(o/u)*u;return p?x>0?o-x+Lhe(c,u):o-x+1:-(o-x)+Ihe(c,u)}}function Ihe(e,t){return GC(e)*t}function Lhe(e,t){return(1-GC(e))*t+1}var Ohe=365*24*60*60*1e3,uB=1e3*Ohe;function Dhe(e,t,n){var i=n.prevStep,c=n.nextStep,u=n.now,p=n.future,o=n.round,x=e.getTime?e.getTime():e,S=function(F){return Phe(F,x,{now:u,round:o})},M=Fhe(p?t:c,x,{future:p,now:u,round:o,prevStep:p?i:t});if(M!==void 0){var k;if(t&&(t.getTimeToNextUpdate&&(k=t.getTimeToNextUpdate(x,{getTimeToNextUpdateForUnit:S,getRoundFunction:Og,now:u,future:p,round:o})),k===void 0)){var L=t.unit||t.formatAs;L&&(k=S(L))}return k===void 0?M:Math.min(k,M)}}function zhe(e,t,n){var i=n.now,c=n.future,u=n.round,p=n.prevStep,o=lB(e,{timestamp:t,now:i,future:c,round:u,prevStep:p});if(o!==void 0)return c?t-o*1e3+1:o===0&&t===i?uB:t+o*1e3}function Fhe(e,t,n){var i=n.now,c=n.future,u=n.round,p=n.prevStep;if(e){var o=zhe(e,t,{now:i,future:c,round:u,prevStep:p});return o===void 0?void 0:o-i}else return c?t-i+1:uB}var dB={};function Ph(e){return dB[e]}function hB(e){if(!e)throw new Error("[javascript-time-ago] No locale data passed.");dB[e.locale]=e}const Bhe=[{formatAs:"now"},{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"},{formatAs:"day"},{formatAs:"week"},{formatAs:"month"},{formatAs:"year"}],AE={steps:Bhe,labels:"long"};function b3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function w3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?b3(Object(n),!0).forEach(function(i){Nhe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Nhe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const kE=w3(w3({},AE),{},{steps:AE.steps.filter(function(e){return e.formatAs!=="second"})}),fB=[{factor:1,unit:"now"},{threshold:1,threshold_for_now:45.5,factor:1,unit:"second"},{threshold:45.5,factor:Xs,unit:"minute"},{threshold:2.5*Xs,granularity:5,factor:Xs,unit:"minute"},{threshold:22.5*Xs,factor:.5*z_,unit:"half-hour"},{threshold:42.5*Xs,threshold_for_minute:52.5*Xs,factor:z_,unit:"hour"},{threshold:20.5/24*Vu,factor:Vu,unit:"day"},{threshold:5.5*Vu,factor:CE,unit:"week"},{threshold:3.5*CE,factor:RE,unit:"month"},{threshold:10.5*RE,factor:aB,unit:"year"}],S3={gradation:fB,flavour:"long",units:["now","minute","hour","day","week","month","year"]},$he={gradation:fB,flavour:"long-time",units:["now","minute","hour","day","week","month","year"]};function pB(e){return e instanceof Date?e:new Date(e)}var PE=[{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"}],vs={},Uhe={minTime:function(t,n){n.future;var i=n.getMinTimeForUnit;return i("day")},format:function(t,n){return vs[n]||(vs[n]={}),vs[n].dayMonth||(vs[n].dayMonth=new Intl.DateTimeFormat(n,{month:"short",day:"numeric"})),vs[n].dayMonth.format(pB(t))}},jhe={minTime:function(t,n){var i=n.future;if(i){var c=new Date(new Date(t).getFullYear(),0).getTime()-1;return(t-c)/1e3}else{var u=new Date(new Date(t).getFullYear()+1,0).getTime();return(u-t)/1e3}},format:function(t,n){return vs[n]||(vs[n]={}),vs[n].dayMonthYear||(vs[n].dayMonthYear=new Intl.DateTimeFormat(n,{year:"numeric",month:"short",day:"numeric"})),vs[n].dayMonthYear.format(pB(t))}};whe()?PE.push(Uhe,jhe):PE.push({formatAs:"day"},{formatAs:"week"},{formatAs:"month"},{formatAs:"year"});const ed={steps:PE,labels:["mini","short-time","narrow","short"]};function E3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function T3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?E3(Object(n),!0).forEach(function(i){Vhe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Vhe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ghe=T3(T3({},ed),{},{steps:[{formatAs:"now"}].concat(ed.steps)});function C3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function R3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?C3(Object(n),!0).forEach(function(i){Whe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Whe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const IE=R3(R3({},ed),{},{steps:ed.steps.filter(function(e){return e.formatAs!=="second"})});function M3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function A3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?M3(Object(n),!0).forEach(function(i){qhe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function qhe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Hhe=A3(A3({},IE),{},{steps:[{formatAs:"now"}].concat(IE.steps)});function k3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function wv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?k3(Object(n),!0).forEach(function(i){Zhe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Zhe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Xhe=wv(wv({},ed),{},{steps:ed.steps.filter(function(e){return e.formatAs!=="second"}).map(function(e){return e.formatAs==="minute"?wv(wv({},e),{},{minTime:Xs}):e})}),Dg={steps:[{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"},{formatAs:"day"},{formatAs:"month"},{formatAs:"year"}],labels:["mini","short-time","narrow","short"]};function P3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function I3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?P3(Object(n),!0).forEach(function(i){Khe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Khe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Yhe=I3(I3({},Dg),{},{steps:[{formatAs:"now"}].concat(Dg.steps)});function L3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function O3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?L3(Object(n),!0).forEach(function(i){Qhe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Qhe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const LE=O3(O3({},Dg),{},{steps:Dg.steps.filter(function(e){return e.formatAs!=="second"})});function D3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function z3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?D3(Object(n),!0).forEach(function(i){Jhe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Jhe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const efe=z3(z3({},LE),{},{steps:[{formatAs:"now"}].concat(LE.steps)});function tfe(e){switch(e){case"default":case"round":return AE;case"round-minute":return kE;case"approximate":return S3;case"time":case"approximate-time":return $he;case"mini":return Dg;case"mini-now":return Yhe;case"mini-minute":return LE;case"mini-minute-now":return efe;case"twitter":return ed;case"twitter-now":return Ghe;case"twitter-minute":return IE;case"twitter-minute-now":return Hhe;case"twitter-first-minute":return Xhe;default:return S3}}function F_(e){"@babel/helpers - typeof";return F_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F_(e)}function nfe(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=mB(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rfe(e,t){return afe(e)||ofe(e,t)||mB(e,t)||ife()}function ife(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mB(e,t){if(e){if(typeof e=="string")return F3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F3(e,t)}}function F3(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ofe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i=[],c=!0,u=!1,p,o;try{for(n=n.call(e);!(c=(p=n.next()).done)&&(i.push(p.value),!(t&&i.length===t));c=!0);}catch(x){u=!0,o=x}finally{try{!c&&n.return!=null&&n.return()}finally{if(u)throw o}}return i}}function afe(e){if(Array.isArray(e))return e}function sfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B3(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function lfe(e,t,n){return t&&B3(e.prototype,t),n&&B3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var vo=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.polyfill;sfe(this,e),typeof t=="string"&&(t=[t]),this.locale=bhe(t.concat(e.getDefaultLocale()),Ph),typeof Intl<"u"&&Intl.NumberFormat&&(this.numberFormat=new Intl.NumberFormat(this.locale)),i===!1?(this.IntlRelativeTimeFormat=Intl.RelativeTimeFormat,this.IntlPluralRules=Intl.PluralRules):(this.IntlRelativeTimeFormat=Tc,this.IntlPluralRules=Tc.PluralRules),this.relativeTimeFormatCache=new y3,this.pluralRulesCache=new y3}return lfe(e,[{key:"format",value:function(n,i,c){c||(i&&!ffe(i)?(c=i,i=void 0):c={}),i||(i=kE),typeof i=="string"&&(i=tfe(i));var u=cfe(n),p=this.getLabels(i.flavour||i.labels),o=p.labels,x=p.labelsType,S;i.now!==void 0&&(S=i.now),S===void 0&&c.now!==void 0&&(S=c.now),S===void 0&&(S=Date.now());var M=(S-u)/1e3,k=c.future||M<0,L=hfe(o,Ph(this.locale).now,Ph(this.locale).long,k);if(i.custom){var j=i.custom({now:S,date:new Date(u),time:u,elapsed:M,locale:this.locale});if(j!==void 0)return j}var F=dfe(i.units,o,L),V=c.round||i.round,oe=Mhe(i.gradation||i.steps||kE.steps,M,{now:S,units:F,round:V,future:k,getNextStep:!0}),B=rfe(oe,3),$=B[0],Z=B[1],Q=B[2],ae=this.formatDateForStep(u,Z,M,{labels:o,labelsType:x,nowLabel:L,now:S,future:k,round:V})||"";if(c.getTimeToNextUpdate){var ue=Dhe(u,Z,{nextStep:Q,prevStep:$,now:S,future:k,round:V});return[ae,ue]}return ae}},{key:"formatDateForStep",value:function(n,i,c,u){var p=this,o=u.labels,x=u.labelsType,S=u.nowLabel,M=u.now,k=u.future,L=u.round;if(i){if(i.format)return i.format(n,this.locale,{formatAs:function(B,$){return p.formatValue($,B,{labels:o,future:k})},now:M,future:k});var j=i.unit||i.formatAs;if(!j)throw new Error("[javascript-time-ago] Each step must define either `formatAs` or `format()`. Step: ".concat(JSON.stringify(i)));if(j==="now")return S;var F=Math.abs(c)/sB(i);i.granularity&&(F=Og(L)(F/i.granularity)*i.granularity);var V=-1*Math.sign(c)*Og(L)(F);switch(V===0&&(k?V=0:V=-0),x){case"long":case"short":case"narrow":return this.getFormatter(x).format(V,j);default:return this.formatValue(V,j,{labels:o,future:k})}}}},{key:"formatValue",value:function(n,i,c){var u=c.labels,p=c.future;return this.getFormattingRule(u,i,n,{future:p}).replace("{0}",this.formatNumber(Math.abs(n)))}},{key:"getFormattingRule",value:function(n,i,c,u){var p=u.future;if(this.locale,n=n[i],typeof n=="string")return n;var o=c===0?p?"future":"past":c<0?"past":"future",x=n[o]||n;if(typeof x=="string")return x;var S=this.getPluralRules().select(Math.abs(c));return x[S]||x.other}},{key:"formatNumber",value:function(n){return this.numberFormat?this.numberFormat.format(n):String(n)}},{key:"getFormatter",value:function(n){return this.relativeTimeFormatCache.get(this.locale,n)||this.relativeTimeFormatCache.put(this.locale,n,new this.IntlRelativeTimeFormat(this.locale,{style:n}))}},{key:"getPluralRules",value:function(){return this.pluralRulesCache.get(this.locale)||this.pluralRulesCache.put(this.locale,new this.IntlPluralRules(this.locale))}},{key:"getLabels",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];typeof n=="string"&&(n=[n]),n=n.map(function(o){switch(o){case"tiny":case"mini-time":return"mini";default:return o}}),n=n.concat("long");for(var i=Ph(this.locale),c=nfe(n),u;!(u=c()).done;){var p=u.value;if(i[p])return{labelsType:p,labels:i[p]}}}}]),e}(),gB="en";vo.getDefaultLocale=function(){return gB};vo.setDefaultLocale=function(e){return gB=e};vo.addDefaultLocale=function(e){if(N3)return console.error("[javascript-time-ago] `TimeAgo.addDefaultLocale()` can only be called once. To add other locales, use `TimeAgo.addLocale()`.");N3=!0,vo.setDefaultLocale(e.locale),vo.addLocale(e)};var N3;vo.addLocale=function(e){hB(e),Tc.addLocale(e)};vo.locale=vo.addLocale;vo.addLabels=function(e,t,n){var i=Ph(e);i||(hB({locale:e}),i=Ph(e)),i[t]=n};function cfe(e){if(e.constructor===Date||ufe(e))return e.getTime();if(typeof e=="number")return e;throw new Error("Unsupported relative time formatter input: ".concat(F_(e),", ").concat(e))}function ufe(e){return F_(e)==="object"&&typeof e.getTime=="function"}function dfe(e,t,n){var i=Object.keys(t);return n&&i.push("now"),e&&(i=e.filter(function(c){return c==="now"||i.indexOf(c)>=0})),i}function hfe(e,t,n,i){var c=e.now||t&&t.now;if(c)return typeof c=="string"?c:i?c.future:c.past;if(n&&n.second&&n.second.current)return n.second.current}function ffe(e){return typeof e=="string"||She(e)}const WC={locale:"ko",long:{year:{previous:"작년",current:"올해",next:"내년",past:"{0}년 전",future:"{0}년 후"},quarter:{previous:"지난 분기",current:"이번 분기",next:"다음 분기",past:"{0}분기 전",future:"{0}분기 후"},month:{previous:"지난달",current:"이번 달",next:"다음 달",past:"{0}개월 전",future:"{0}개월 후"},week:{previous:"지난주",current:"이번 주",next:"다음 주",past:"{0}주 전",future:"{0}주 후"},day:{previous:"어제","previous-2":"그저께",current:"오늘",next:"내일","next-2":"모레",past:"{0}일 전",future:"{0}일 후"},hour:{current:"현재 시간",past:"{0}시간 전",future:"{0}시간 후"},minute:{current:"현재 분",past:"{0}분 전",future:"{0}분 후"},second:{current:"지금",past:"{0}초 전",future:"{0}초 후"}},short:{year:{previous:"작년",current:"올해",next:"내년",past:"{0}년 전",future:"{0}년 후"},quarter:{previous:"지난 분기",current:"이번 분기",next:"다음 분기",past:"{0}분기 전",future:"{0}분기 후"},month:{previous:"지난달",current:"이번 달",next:"다음 달",past:"{0}개월 전",future:"{0}개월 후"},week:{previous:"지난주",current:"이번 주",next:"다음 주",past:"{0}주 전",future:"{0}주 후"},day:{previous:"어제","previous-2":"그저께",current:"오늘",next:"내일","next-2":"모레",past:"{0}일 전",future:"{0}일 후"},hour:{current:"현재 시간",past:"{0}시간 전",future:"{0}시간 후"},minute:{current:"현재 분",past:"{0}분 전",future:"{0}분 후"},second:{current:"지금",past:"{0}초 전",future:"{0}초 후"}},narrow:{year:{previous:"작년",current:"올해",next:"내년",past:"{0}년 전",future:"{0}년 후"},quarter:{previous:"지난 분기",current:"이번 분기",next:"다음 분기",past:"{0}분기 전",future:"{0}분기 후"},month:{previous:"지난달",current:"이번 달",next:"다음 달",past:"{0}개월 전",future:"{0}개월 후"},week:{previous:"지난주",current:"이번 주",next:"다음 주",past:"{0}주 전",future:"{0}주 후"},day:{previous:"어제","previous-2":"그저께",current:"오늘",next:"내일","next-2":"모레",past:"{0}일 전",future:"{0}일 후"},hour:{current:"현재 시간",past:"{0}시간 전",future:"{0}시간 후"},minute:{current:"현재 분",past:"{0}분 전",future:"{0}분 후"},second:{current:"지금",past:"{0}초 전",future:"{0}초 후"}},now:{now:{current:"지금",future:"잠시 후",past:"방금"}},mini:{year:"{0}년",quarter:"{0}분기",month:"{0}개월",week:"{0}주",day:"{0}일",hour:"{0}시간",minute:"{0}분",second:"{0}초",now:"지금"}},pfe=Yi(xn)(({theme:e})=>({display:"flex",flexDirection:"column",padding:"0.5rem",gap:1,color:e.palette.text.primary,"& .description":{width:"100%"},"& .notiHead":{display:"flex",flexDirection:"row",justifyContent:"space-between",paddingRight:.5},"& .notiHead .date":{fontSize:"0.8rem"},"&:hover":{backgroundColor:Gr(ol[800],.2)}}));function mo({prop:e}){vo.addLocale(WC);const t=new vo("ko");return t.format(new Date),Yt(pfe,{onClick:()=>console.log("hello"),children:[Yt(xn,{className:"notiHead",children:[Yt(Rr,{variant:"subtitle2",children:["🍀 ",e.title]}),ne(Rr,{variant:"body2",className:"date",children:t.format(e.alertAt)})]}),ne(Rr,{variant:"body2",className:"description",children:e.data})]})}function mfe(){const{headOpt:e,setHeadOpt:t,navigate:n,setWrapperOpt:i}=Fo(),c={menus:[{key:"알림",value:"/notification"}],icon_R:sy,fn_R:()=>n(-1),headerType:"V3"},u={isNoneHeadPadding:!1};X.useLayoutEffect(()=>{t(c),i(u)},[]);const p={title:"근처의 우연 발견!!",data:"신당동 주변의 우연을 사라지기 전에 확인해봐요!",alertAt:new Date},o={title:"근처의 우연 발견!!",data:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed euismod, nisi a egestas ultrices , nisl urna viverra diam, a ultricies ante nunc sit amet nisl. Sed euismod, nisi a egestas ultrices , nisl urna viverra diam, a ultricies ante nunc sit amet nisl. (장문 테스트)",alertAt:new Date(2023,4,3,23,55)};return e?ne(xf,{sx:{padding:0,maxHeight:"calc(100vh - 56px)",overflow:"hidden","@media (min-width: 600px)":{maxHeight:"calc(100vh - 64px)"}},children:Yt(xn,{sx:{maxHeight:"calc(100vh - 56px)",overflow:"scroll",paddingBottom:10,"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-thumb":{background:"#ddd",borderRadius:"5px"},"&::-webkit-scrollbar-button:vertical:end:decrement":{display:"block",height:"20px"},"&::-webkit-scrollbar-corner":{display:"none"},"@media (min-width: 600px)":{maxHeight:"calc(100vh - 64px)"}},children:[ne(mo,{prop:p}),ne(mo,{prop:p}),ne(mo,{prop:p}),ne(mo,{prop:p}),ne(mo,{prop:o}),ne(mo,{prop:p}),ne(mo,{prop:p}),ne(mo,{prop:p}),ne(mo,{prop:o}),ne(mo,{prop:p}),ne(mo,{prop:p}),ne(mo,{prop:p}),ne(mo,{prop:o}),ne(mo,{prop:p}),ne(mo,{prop:p})]})}):ne(xn,{})}function gfe(){const{setHeadOpt:e,navigate:t,setWrapperOpt:n}=Fo(),i=mH(Kg),c={menus:[{key:"마이페이지",value:"/mypage"}],icon_L:IC,fn_L:()=>t(-1),icon_R:aF,fn_R:()=>t("/mypage/setting"),headerType:"V3"},u={isNoneHeadPadding:!1};return X.useLayoutEffect(()=>{e(c),n(u)},[]),Yt(xf,{children:[ne(xn,{sx:{height:"20rem"},children:ne(Rr,{variant:"h3",children:"HELLO"})}),ne(cl,{fullWidth:!0,onClick:()=>t("/mypage/edit"),children:"프로필 수정"}),ne(cl,{fullWidth:!0,onClick:i,children:"로그아웃"})]})}function yfe(){const{setHeadOpt:e,navigate:t}=Fo(),n={menus:[{key:"프로필 수정",value:"/mypage/edit"}],icon_L:sy,fn_L:()=>t(-1),headerType:"V3"};return X.useLayoutEffect(()=>{e(n)},[]),ne(xf,{children:ne(xn,{sx:{height:"20rem"},children:ne(Rr,{variant:"h3",children:"프로필 수정"})})})}function vfe(){const{setHeadOpt:e,navigate:t}=Fo(),[n,i]=Lc(z4),c={menus:[{key:"설정",value:"/mypage/setting"}],icon_R:sy,fn_R:()=>t(-1),headerType:"V2"};return X.useLayoutEffect(()=>{e(c)},[]),ne(sie,{defaultValue:"system",value:n.theme,onChange:u=>{i(p=>({...p,theme:u.target.value})),localStorage.getItem("isFlutter")==="1"&&Theming.postMessage(u.target.value)},children:Yt(xf,{spacing:1,children:[ne(Rr,{variant:"h5",children:"테마 변경"}),ne(Vw,{value:"system",control:ne(Hw,{}),label:"시스템 설정 모드"}),ne(Vw,{value:"light",control:ne(Hw,{}),label:"라이트 모드"}),ne(Vw,{value:"dark",control:ne(Hw,{}),label:"다크 모드"})]})})}const _fe=async e=>(await new Promise(n=>setTimeout(n,1e3)),await fetch(`${X5}/post?post_id=${e}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwidXNlcl9pZCI6IjEyOTAzODEwMjk4MyIsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNTE2MjM5MDIyfQ.pGdZm2StiLp1ksKdF5qlMOEg1QYBg9BUAo5xWZkIuEg"}}).then(n=>n.json())),xfe=Yi(xn)(({theme:e})=>({padding:"0 1rem",position:"relative","& .detail_header":{width:"100%",backgroundColor:e.palette.background.default,padding:"1rem",borderRadius:"1rem",display:"flex",flexDirection:"column",gap:"1rem"},"& .detail_header .header_user":{display:"flex",gap:"1rem",alignItems:"center"},"& .detail_header .header_content":{minHeight:"3rem"}}));function bfe(){vo.addLocale(WC);const e=new vo("ko"),t=new Date;return ne(xfe,{children:Yt(xn,{className:"detail_header",children:[Yt(xn,{className:"header_user",children:[ne(uF,{}),Yt(xn,{sx:{width:"100%"},children:[ne(Rr,{variant:"body1",children:"우연한 발견"}),ne(Rr,{variant:"body2",children:e.format(t)})]}),ne(xn,{sx:{minWidth:"4rem",height:"2rem",lineHeight:"2rem",borderRadius:"1rem",backgroundColor:Ts,padding:"0rem 1rem",textAlign:"center",color:"#fff"},children:ne(Rr,{variant:"button",children:"일상"})})]}),Yt(xn,{className:"header_content",children:["삼덕 인더매스,, 좋아요! 주말에 들려보세영",ne("br",{})," 드립커피 잘해여 👍👍"]})]})})}const wfe=Yi(xn)(({theme:e})=>({display:"flex",alignItems:"row",justifyContent:"space-between"}));function F2({value:e,createAt:t}){return Yt(wfe,{children:[ne(xn,{className:"value",children:e}),ne(xn,{className:"createAt",children:t})]})}const Sfe=Yi(xn)(({theme:e})=>({"& .comments":{padding:"1rem",backgroundColor:e.palette.background.default,borderRadius:"1rem"}}));function Efe(){vo.addLocale(WC);const e=new vo("ko"),t=new Date;return ne(Sfe,{sx:{padding:"0 1rem"},children:Yt(xf,{spacing:2,className:"comments",children:[ne(F2,{value:"여기 좋긴하죠?",createAt:e.format(t)}),ne(F2,{value:"맞아용",createAt:e.format(t)}),ne(F2,{value:"저는 반대편에 고쿠라는 카페도 좋더라구요",createAt:e.format(t)})]})})}const Tfe=Yi("div")(({theme:e})=>({width:"100%",height:54,position:"absolute",top:0,backgroundColor:e.palette.background.default,zIndex:1,background:"linear-gradient(0deg, rgba(0,0,0,0) 10%, #22222250 90%)"}));function Cfe({activeStep:e,handleStepChange:t,images:n}){return ne(PC,{axis:"x",index:e,onChangeIndex:t,enableMouseEvents:!0,style:{width:"100%",aspectRatio:"3/4"},children:n==null?void 0:n.map(i=>ne(xn,{sx:{width:"100%",height:"100%",minHeight:"100%",display:"flex"},children:ne("img",{src:i.img_url,style:{width:"100%",minHeight:"50vh",objectFit:"contain"}})},i.img_id))})}function Rfe({wooyeon:e}){const[t,n]=X.useState(0);return Yt(xn,{sx:{width:"100%"},children:[ne(Tfe,{}),ne(Cfe,{activeStep:t,handleStepChange:c=>{n(c)},images:e==null?void 0:e.image}),ne($5,{steps:1,position:"static",activeStep:t,backButton:null,nextButton:null,sx:{alignItems:"center",justifyContent:"center",dotStyle:{mx:1},position:"relative",top:"-30px",background:"none"}})]})}function Mfe(){const{postId:e}=oj(),{setHeadOpt:t,navigate:n,setWrapperOpt:i}=Fo(),c=Gi(),u={menus:[{key:"",value:"/detail"}],icon_L:IC,fn_L:()=>n(-1),headerType:"V3",bgColor:"#ffffff00 !important",contentColor:"#fff"},p={isFullWidth:!0,isNoneHeadPadding:!0,noneFullHeight:!0};X.useLayoutEffect(()=>{X.startTransition(()=>{t(u),i(p)}),console.log(e)},[e,t,i]);const{data:o}=ele("getWooyeon",()=>_fe(e),{suspense:!0});return ne(X.Suspense,{fallback:ne("div",{children:"loading... "}),children:Yt(xn,{sx:{position:"relative",top:0,backgroundColor:c.palette.background.paper},children:[ne(X.Suspense,{fallback:ne(nE,{variant:"rectangular",width:"100%",height:400}),children:ne(Rfe,{wooyeon:o})}),Yt(xf,{sx:{top:"-24px",position:"relative",paddingTop:"1rem"},spacing:2,children:[ne(bfe,{}),ne(Efe,{})]})]})})}const Afe=()=>{const[e]=Lc(Kg),t=bj([{path:"auth/",element:ne(LI,{isHeader:!1}),children:[{index:!0,element:ne(rae,{}),loader:()=>!!e.first&&Cw("/auth/cate")},{path:"cate",element:ne(aae,{})}],loader:()=>e.role!=="GUEST"&&Cw("/")},{path:"/",element:ne(LI,{isHeader:!0}),errorElement:ne("div",{children:"error"}),children:[{path:"/",element:ne(ise,{}),children:[{index:!0,element:ne(tle,{})},{path:"previous",element:ne(Dle,{})}]},{path:"add-post/",element:ne(zle,{}),children:[{index:!0,element:ne($le,{})},{path:"category",element:ne(Vle,{})},{path:"content",element:ne(Hde,{})}]},{path:"notification",element:ne(mfe,{})},{path:"mypage/",children:[{index:!0,element:ne(gfe,{})},{path:"edit",element:ne(yfe,{})},{path:"setting",element:ne(vfe,{})}]},{path:"detail/:postId",element:ne(Mfe,{})}],loader:()=>e.role==="GUEST"&&Cw("/auth")}]);return ne(yj,{router:t})},kfe=Yi("div")(({theme:e})=>({height:"100%",backgroundColor:(e==null?void 0:e.palette.mode)==="dark"?"#262626":ol[100]}));function Pfe(){const[e]=Lc(z4),t=window.matchMedia("(prefers-color-scheme: dark)"),[n,i]=X.useState(()=>window.matchMedia("(prefers-color-scheme: dark)").matches?Jw:Qw),c=new jse,u=()=>{t.matches===!0?i(Jw):i(Qw)};return X.useEffect(()=>{e.theme!=="system"?e.theme==="dark"?i(Jw):i(Qw):u()},[e]),X.useEffect(()=>{if(e.theme==="system")return t.addEventListener("change",u),()=>{t.removeEventListener("change",u)}},[]),Yt(iy,{theme:n,children:[ne(M5,{}),ne(EC,{styles:{body:{userSelect:"none",touchAction:"pan-x",backgroundColor:e.theme==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"#262626":ol[100]:e.theme==="dark"?"#262626":ol[100]},touchAction:"none"}}),ne(kfe,{children:ne(Zse,{client:c,children:ne(Afe,{})})})]})}N2.createRoot(document.getElementById("root")).render(ne(Xe.StrictMode,{children:ne(pH,{children:ne(WZ,{injectFirst:!0,children:ne(Pfe,{})})})}));
