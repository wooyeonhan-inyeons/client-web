function $P(e,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const c in i)if(c!=="default"&&!(c in e)){const d=Object.getOwnPropertyDescriptor(i,c);d&&Object.defineProperty(e,c,d.get?d:{enumerable:!0,get:()=>i[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const y of d.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&i(y)}).observe(document,{childList:!0,subtree:!0});function r(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(c){if(c.ep)return;c.ep=!0;const d=r(c);fetch(c.href,d)}})();var Ai=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ef(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var UP={exports:{}},_v={},VP={exports:{}},cr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ug=Symbol.for("react.element"),AB=Symbol.for("react.portal"),kB=Symbol.for("react.fragment"),RB=Symbol.for("react.strict_mode"),IB=Symbol.for("react.profiler"),PB=Symbol.for("react.provider"),LB=Symbol.for("react.context"),DB=Symbol.for("react.forward_ref"),zB=Symbol.for("react.suspense"),OB=Symbol.for("react.memo"),FB=Symbol.for("react.lazy"),XM=Symbol.iterator;function BB(e){return e===null||typeof e!="object"?null:(e=XM&&e[XM]||e["@@iterator"],typeof e=="function"?e:null)}var jP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},GP=Object.assign,WP={};function tf(e,t,r){this.props=e,this.context=t,this.refs=WP,this.updater=r||jP}tf.prototype.isReactComponent={};tf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};tf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function qP(){}qP.prototype=tf.prototype;function gS(e,t,r){this.props=e,this.context=t,this.refs=WP,this.updater=r||jP}var yS=gS.prototype=new qP;yS.constructor=gS;GP(yS,tf.prototype);yS.isPureReactComponent=!0;var KM=Array.isArray,HP=Object.prototype.hasOwnProperty,_S={current:null},ZP={key:!0,ref:!0,__self:!0,__source:!0};function XP(e,t,r){var i,c={},d=null,y=null;if(t!=null)for(i in t.ref!==void 0&&(y=t.ref),t.key!==void 0&&(d=""+t.key),t)HP.call(t,i)&&!ZP.hasOwnProperty(i)&&(c[i]=t[i]);var a=arguments.length-2;if(a===1)c.children=r;else if(1<a){for(var b=Array(a),S=0;S<a;S++)b[S]=arguments[S+2];c.children=b}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)c[i]===void 0&&(c[i]=a[i]);return{$$typeof:ug,type:e,key:d,ref:y,props:c,_owner:_S.current}}function NB(e,t){return{$$typeof:ug,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function vS(e){return typeof e=="object"&&e!==null&&e.$$typeof===ug}function $B(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var YM=/\/+/g;function pb(e,t){return typeof e=="object"&&e!==null&&e.key!=null?$B(""+e.key):t.toString(36)}function o_(e,t,r,i,c){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var y=!1;if(e===null)y=!0;else switch(d){case"string":case"number":y=!0;break;case"object":switch(e.$$typeof){case ug:case AB:y=!0}}if(y)return y=e,c=c(y),e=i===""?"."+pb(y,0):i,KM(c)?(r="",e!=null&&(r=e.replace(YM,"$&/")+"/"),o_(c,t,r,"",function(S){return S})):c!=null&&(vS(c)&&(c=NB(c,r+(!c.key||y&&y.key===c.key?"":(""+c.key).replace(YM,"$&/")+"/")+e)),t.push(c)),1;if(y=0,i=i===""?".":i+":",KM(e))for(var a=0;a<e.length;a++){d=e[a];var b=i+pb(d,a);y+=o_(d,t,r,b,c)}else if(b=BB(e),typeof b=="function")for(e=b.call(e),a=0;!(d=e.next()).done;)d=d.value,b=i+pb(d,a++),y+=o_(d,t,r,b,c);else if(d==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return y}function x0(e,t,r){if(e==null)return e;var i=[],c=0;return o_(e,i,"","",function(d){return t.call(r,d,c++)}),i}function UB(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var wo={current:null},a_={transition:null},VB={ReactCurrentDispatcher:wo,ReactCurrentBatchConfig:a_,ReactCurrentOwner:_S};cr.Children={map:x0,forEach:function(e,t,r){x0(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return x0(e,function(){t++}),t},toArray:function(e){return x0(e,function(t){return t})||[]},only:function(e){if(!vS(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};cr.Component=tf;cr.Fragment=kB;cr.Profiler=IB;cr.PureComponent=gS;cr.StrictMode=RB;cr.Suspense=zB;cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VB;cr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=GP({},e.props),c=e.key,d=e.ref,y=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,y=_S.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(b in t)HP.call(t,b)&&!ZP.hasOwnProperty(b)&&(i[b]=t[b]===void 0&&a!==void 0?a[b]:t[b])}var b=arguments.length-2;if(b===1)i.children=r;else if(1<b){a=Array(b);for(var S=0;S<b;S++)a[S]=arguments[S+2];i.children=a}return{$$typeof:ug,type:e.type,key:c,ref:d,props:i,_owner:y}};cr.createContext=function(e){return e={$$typeof:LB,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:PB,_context:e},e.Consumer=e};cr.createElement=XP;cr.createFactory=function(e){var t=XP.bind(null,e);return t.type=e,t};cr.createRef=function(){return{current:null}};cr.forwardRef=function(e){return{$$typeof:DB,render:e}};cr.isValidElement=vS;cr.lazy=function(e){return{$$typeof:FB,_payload:{_status:-1,_result:e},_init:UB}};cr.memo=function(e,t){return{$$typeof:OB,type:e,compare:t===void 0?null:t}};cr.startTransition=function(e){var t=a_.transition;a_.transition={};try{e()}finally{a_.transition=t}};cr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};cr.useCallback=function(e,t){return wo.current.useCallback(e,t)};cr.useContext=function(e){return wo.current.useContext(e)};cr.useDebugValue=function(){};cr.useDeferredValue=function(e){return wo.current.useDeferredValue(e)};cr.useEffect=function(e,t){return wo.current.useEffect(e,t)};cr.useId=function(){return wo.current.useId()};cr.useImperativeHandle=function(e,t,r){return wo.current.useImperativeHandle(e,t,r)};cr.useInsertionEffect=function(e,t){return wo.current.useInsertionEffect(e,t)};cr.useLayoutEffect=function(e,t){return wo.current.useLayoutEffect(e,t)};cr.useMemo=function(e,t){return wo.current.useMemo(e,t)};cr.useReducer=function(e,t,r){return wo.current.useReducer(e,t,r)};cr.useRef=function(e){return wo.current.useRef(e)};cr.useState=function(e){return wo.current.useState(e)};cr.useSyncExternalStore=function(e,t,r){return wo.current.useSyncExternalStore(e,t,r)};cr.useTransition=function(){return wo.current.useTransition()};cr.version="18.2.0";VP.exports=cr;var H=VP.exports;const Qe=ef(H),Lw=$P({__proto__:null,default:Qe},[H]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jB=H,GB=Symbol.for("react.element"),WB=Symbol.for("react.fragment"),qB=Object.prototype.hasOwnProperty,HB=jB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZB={key:!0,ref:!0,__self:!0,__source:!0};function KP(e,t,r){var i,c={},d=null,y=null;r!==void 0&&(d=""+r),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(y=t.ref);for(i in t)qB.call(t,i)&&!ZB.hasOwnProperty(i)&&(c[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)c[i]===void 0&&(c[i]=t[i]);return{$$typeof:GB,type:e,key:d,ref:y,props:c,_owner:HB.current}}_v.Fragment=WB;_v.jsx=KP;_v.jsxs=KP;UP.exports=_v;var xS=UP.exports;const gc=xS.Fragment,ne=xS.jsx,en=xS.jsxs;var Dw={},YP={exports:{}},Qo={},QP={exports:{}},JP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Ue,Ee){var _e=Ue.length;Ue.push(Ee);e:for(;0<_e;){var $e=_e-1>>>1,be=Ue[$e];if(0<c(be,Ee))Ue[$e]=Ee,Ue[_e]=be,_e=$e;else break e}}function r(Ue){return Ue.length===0?null:Ue[0]}function i(Ue){if(Ue.length===0)return null;var Ee=Ue[0],_e=Ue.pop();if(_e!==Ee){Ue[0]=_e;e:for(var $e=0,be=Ue.length,Me=be>>>1;$e<Me;){var Ge=2*($e+1)-1,ut=Ue[Ge],ht=Ge+1,Lt=Ue[ht];if(0>c(ut,_e))ht<be&&0>c(Lt,ut)?(Ue[$e]=Lt,Ue[ht]=_e,$e=ht):(Ue[$e]=ut,Ue[Ge]=_e,$e=Ge);else if(ht<be&&0>c(Lt,_e))Ue[$e]=Lt,Ue[ht]=_e,$e=ht;else break e}}return Ee}function c(Ue,Ee){var _e=Ue.sortIndex-Ee.sortIndex;return _e!==0?_e:Ue.id-Ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var y=Date,a=y.now();e.unstable_now=function(){return y.now()-a}}var b=[],S=[],k=1,P=null,O=3,G=!1,F=!1,q=!1,ce=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Z(Ue){for(var Ee=r(S);Ee!==null;){if(Ee.callback===null)i(S);else if(Ee.startTime<=Ue)i(S),Ee.sortIndex=Ee.expirationTime,t(b,Ee);else break;Ee=r(S)}}function J(Ue){if(q=!1,Z(Ue),!F)if(r(b)!==null)F=!0,nt(Y);else{var Ee=r(S);Ee!==null&&_t(J,Ee.startTime-Ue)}}function Y(Ue,Ee){F=!1,q&&(q=!1,B(De),De=-1),G=!0;var _e=O;try{for(Z(Ee),P=r(b);P!==null&&(!(P.expirationTime>Ee)||Ue&&!ue());){var $e=P.callback;if(typeof $e=="function"){P.callback=null,O=P.priorityLevel;var be=$e(P.expirationTime<=Ee);Ee=e.unstable_now(),typeof be=="function"?P.callback=be:P===r(b)&&i(b),Z(Ee)}else i(b);P=r(b)}if(P!==null)var Me=!0;else{var Ge=r(S);Ge!==null&&_t(J,Ge.startTime-Ee),Me=!1}return Me}finally{P=null,O=_e,G=!1}}var he=!1,se=null,De=-1,fe=5,$=-1;function ue(){return!(e.unstable_now()-$<fe)}function Je(){if(se!==null){var Ue=e.unstable_now();$=Ue;var Ee=!0;try{Ee=se(!0,Ue)}finally{Ee?Ke():(he=!1,se=null)}}else he=!1}var Ke;if(typeof U=="function")Ke=function(){U(Je)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,ze=ke.port2;ke.port1.onmessage=Je,Ke=function(){ze.postMessage(null)}}else Ke=function(){ce(Je,0)};function nt(Ue){se=Ue,he||(he=!0,Ke())}function _t(Ue,Ee){De=ce(function(){Ue(e.unstable_now())},Ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ue){Ue.callback=null},e.unstable_continueExecution=function(){F||G||(F=!0,nt(Y))},e.unstable_forceFrameRate=function(Ue){0>Ue||125<Ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<Ue?Math.floor(1e3/Ue):5},e.unstable_getCurrentPriorityLevel=function(){return O},e.unstable_getFirstCallbackNode=function(){return r(b)},e.unstable_next=function(Ue){switch(O){case 1:case 2:case 3:var Ee=3;break;default:Ee=O}var _e=O;O=Ee;try{return Ue()}finally{O=_e}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ue,Ee){switch(Ue){case 1:case 2:case 3:case 4:case 5:break;default:Ue=3}var _e=O;O=Ue;try{return Ee()}finally{O=_e}},e.unstable_scheduleCallback=function(Ue,Ee,_e){var $e=e.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?$e+_e:$e):_e=$e,Ue){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=_e+be,Ue={id:k++,callback:Ee,priorityLevel:Ue,startTime:_e,expirationTime:be,sortIndex:-1},_e>$e?(Ue.sortIndex=_e,t(S,Ue),r(b)===null&&Ue===r(S)&&(q?(B(De),De=-1):q=!0,_t(J,_e-$e))):(Ue.sortIndex=be,t(b,Ue),F||G||(F=!0,nt(Y))),Ue},e.unstable_shouldYield=ue,e.unstable_wrapCallback=function(Ue){var Ee=O;return function(){var _e=O;O=Ee;try{return Ue.apply(this,arguments)}finally{O=_e}}}})(JP);QP.exports=JP;var XB=QP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eL=H,Yo=XB;function Wt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tL=new Set,Om={};function qu(e,t){Oh(e,t),Oh(e+"Capture",t)}function Oh(e,t){for(Om[e]=t,e=0;e<t.length;e++)tL.add(t[e])}var Zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zw=Object.prototype.hasOwnProperty,KB=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,QM={},JM={};function YB(e){return zw.call(JM,e)?!0:zw.call(QM,e)?!1:KB.test(e)?JM[e]=!0:(QM[e]=!0,!1)}function QB(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function JB(e,t,r,i){if(t===null||typeof t>"u"||QB(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function So(e,t,r,i,c,d,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=c,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=y}var to={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){to[e]=new So(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];to[t]=new So(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){to[e]=new So(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){to[e]=new So(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){to[e]=new So(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){to[e]=new So(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){to[e]=new So(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){to[e]=new So(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){to[e]=new So(e,5,!1,e.toLowerCase(),null,!1,!1)});var bS=/[\-:]([a-z])/g;function wS(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(bS,wS);to[t]=new So(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(bS,wS);to[t]=new So(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(bS,wS);to[t]=new So(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){to[e]=new So(e,1,!1,e.toLowerCase(),null,!1,!1)});to.xlinkHref=new So("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){to[e]=new So(e,1,!1,e.toLowerCase(),null,!0,!0)});function SS(e,t,r,i){var c=to.hasOwnProperty(t)?to[t]:null;(c!==null?c.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(JB(t,r,c,i)&&(r=null),i||c===null?YB(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):c.mustUseProperty?e[c.propertyName]=r===null?c.type===3?!1:"":r:(t=c.attributeName,i=c.attributeNamespace,r===null?e.removeAttribute(t):(c=c.type,r=c===3||c===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var rl=eL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b0=Symbol.for("react.element"),lh=Symbol.for("react.portal"),ch=Symbol.for("react.fragment"),ES=Symbol.for("react.strict_mode"),Ow=Symbol.for("react.profiler"),nL=Symbol.for("react.provider"),rL=Symbol.for("react.context"),TS=Symbol.for("react.forward_ref"),Fw=Symbol.for("react.suspense"),Bw=Symbol.for("react.suspense_list"),CS=Symbol.for("react.memo"),Wl=Symbol.for("react.lazy"),iL=Symbol.for("react.offscreen"),eA=Symbol.iterator;function zp(e){return e===null||typeof e!="object"?null:(e=eA&&e[eA]||e["@@iterator"],typeof e=="function"?e:null)}var fi=Object.assign,mb;function um(e){if(mb===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);mb=t&&t[1]||""}return`
`+mb+e}var gb=!1;function yb(e,t){if(!e||gb)return"";gb=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(S){var i=S}Reflect.construct(e,[],t)}else{try{t.call()}catch(S){i=S}e.call(t.prototype)}else{try{throw Error()}catch(S){i=S}e()}}catch(S){if(S&&i&&typeof S.stack=="string"){for(var c=S.stack.split(`
`),d=i.stack.split(`
`),y=c.length-1,a=d.length-1;1<=y&&0<=a&&c[y]!==d[a];)a--;for(;1<=y&&0<=a;y--,a--)if(c[y]!==d[a]){if(y!==1||a!==1)do if(y--,a--,0>a||c[y]!==d[a]){var b=`
`+c[y].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=y&&0<=a);break}}}finally{gb=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?um(e):""}function e6(e){switch(e.tag){case 5:return um(e.type);case 16:return um("Lazy");case 13:return um("Suspense");case 19:return um("SuspenseList");case 0:case 2:case 15:return e=yb(e.type,!1),e;case 11:return e=yb(e.type.render,!1),e;case 1:return e=yb(e.type,!0),e;default:return""}}function Nw(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ch:return"Fragment";case lh:return"Portal";case Ow:return"Profiler";case ES:return"StrictMode";case Fw:return"Suspense";case Bw:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case rL:return(e.displayName||"Context")+".Consumer";case nL:return(e._context.displayName||"Context")+".Provider";case TS:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case CS:return t=e.displayName||null,t!==null?t:Nw(e.type)||"Memo";case Wl:t=e._payload,e=e._init;try{return Nw(e(t))}catch{}}return null}function t6(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nw(t);case 8:return t===ES?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function dc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function oL(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function n6(e){var t=oL(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,d=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(y){i=""+y,d.call(this,y)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(y){i=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function w0(e){e._valueTracker||(e._valueTracker=n6(e))}function aL(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=oL(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function T_(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $w(e,t){var r=t.checked;return fi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function tA(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=dc(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function sL(e,t){t=t.checked,t!=null&&SS(e,"checked",t,!1)}function Uw(e,t){sL(e,t);var r=dc(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Vw(e,t.type,r):t.hasOwnProperty("defaultValue")&&Vw(e,t.type,dc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function nA(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Vw(e,t,r){(t!=="number"||T_(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var dm=Array.isArray;function Eh(e,t,r,i){if(e=e.options,t){t={};for(var c=0;c<r.length;c++)t["$"+r[c]]=!0;for(r=0;r<e.length;r++)c=t.hasOwnProperty("$"+e[r].value),e[r].selected!==c&&(e[r].selected=c),c&&i&&(e[r].defaultSelected=!0)}else{for(r=""+dc(r),t=null,c=0;c<e.length;c++){if(e[c].value===r){e[c].selected=!0,i&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function jw(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Wt(91));return fi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function rA(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Wt(92));if(dm(r)){if(1<r.length)throw Error(Wt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:dc(r)}}function lL(e,t){var r=dc(t.value),i=dc(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function iA(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function cL(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gw(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?cL(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var S0,uL=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,c){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(S0=S0||document.createElement("div"),S0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=S0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Fm(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var _m={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},r6=["Webkit","ms","Moz","O"];Object.keys(_m).forEach(function(e){r6.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),_m[t]=_m[e]})});function dL(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||_m.hasOwnProperty(e)&&_m[e]?(""+t).trim():t+"px"}function hL(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,c=dL(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,c):e[r]=c}}var i6=fi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ww(e,t){if(t){if(i6[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Wt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Wt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Wt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Wt(62))}}function qw(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hw=null;function MS(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Zw=null,Th=null,Ch=null;function oA(e){if(e=fg(e)){if(typeof Zw!="function")throw Error(Wt(280));var t=e.stateNode;t&&(t=Sv(t),Zw(e.stateNode,e.type,t))}}function fL(e){Th?Ch?Ch.push(e):Ch=[e]:Th=e}function pL(){if(Th){var e=Th,t=Ch;if(Ch=Th=null,oA(e),t)for(e=0;e<t.length;e++)oA(t[e])}}function mL(e,t){return e(t)}function gL(){}var _b=!1;function yL(e,t,r){if(_b)return e(t,r);_b=!0;try{return mL(e,t,r)}finally{_b=!1,(Th!==null||Ch!==null)&&(gL(),pL())}}function Bm(e,t){var r=e.stateNode;if(r===null)return null;var i=Sv(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Wt(231,t,typeof r));return r}var Xw=!1;if(Zs)try{var Op={};Object.defineProperty(Op,"passive",{get:function(){Xw=!0}}),window.addEventListener("test",Op,Op),window.removeEventListener("test",Op,Op)}catch{Xw=!1}function o6(e,t,r,i,c,d,y,a,b){var S=Array.prototype.slice.call(arguments,3);try{t.apply(r,S)}catch(k){this.onError(k)}}var vm=!1,C_=null,M_=!1,Kw=null,a6={onError:function(e){vm=!0,C_=e}};function s6(e,t,r,i,c,d,y,a,b){vm=!1,C_=null,o6.apply(a6,arguments)}function l6(e,t,r,i,c,d,y,a,b){if(s6.apply(this,arguments),vm){if(vm){var S=C_;vm=!1,C_=null}else throw Error(Wt(198));M_||(M_=!0,Kw=S)}}function Hu(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function _L(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function aA(e){if(Hu(e)!==e)throw Error(Wt(188))}function c6(e){var t=e.alternate;if(!t){if(t=Hu(e),t===null)throw Error(Wt(188));return t!==e?null:e}for(var r=e,i=t;;){var c=r.return;if(c===null)break;var d=c.alternate;if(d===null){if(i=c.return,i!==null){r=i;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===r)return aA(c),e;if(d===i)return aA(c),t;d=d.sibling}throw Error(Wt(188))}if(r.return!==i.return)r=c,i=d;else{for(var y=!1,a=c.child;a;){if(a===r){y=!0,r=c,i=d;break}if(a===i){y=!0,i=c,r=d;break}a=a.sibling}if(!y){for(a=d.child;a;){if(a===r){y=!0,r=d,i=c;break}if(a===i){y=!0,i=d,r=c;break}a=a.sibling}if(!y)throw Error(Wt(189))}}if(r.alternate!==i)throw Error(Wt(190))}if(r.tag!==3)throw Error(Wt(188));return r.stateNode.current===r?e:t}function vL(e){return e=c6(e),e!==null?xL(e):null}function xL(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=xL(e);if(t!==null)return t;e=e.sibling}return null}var bL=Yo.unstable_scheduleCallback,sA=Yo.unstable_cancelCallback,u6=Yo.unstable_shouldYield,d6=Yo.unstable_requestPaint,bi=Yo.unstable_now,h6=Yo.unstable_getCurrentPriorityLevel,AS=Yo.unstable_ImmediatePriority,wL=Yo.unstable_UserBlockingPriority,A_=Yo.unstable_NormalPriority,f6=Yo.unstable_LowPriority,SL=Yo.unstable_IdlePriority,vv=null,gs=null;function p6(e){if(gs&&typeof gs.onCommitFiberRoot=="function")try{gs.onCommitFiberRoot(vv,e,void 0,(e.current.flags&128)===128)}catch{}}var Ua=Math.clz32?Math.clz32:y6,m6=Math.log,g6=Math.LN2;function y6(e){return e>>>=0,e===0?32:31-(m6(e)/g6|0)|0}var E0=64,T0=4194304;function hm(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function k_(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,c=e.suspendedLanes,d=e.pingedLanes,y=r&268435455;if(y!==0){var a=y&~c;a!==0?i=hm(a):(d&=y,d!==0&&(i=hm(d)))}else y=r&~c,y!==0?i=hm(y):d!==0&&(i=hm(d));if(i===0)return 0;if(t!==0&&t!==i&&!(t&c)&&(c=i&-i,d=t&-t,c>=d||c===16&&(d&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-Ua(t),c=1<<r,i|=e[r],t&=~c;return i}function _6(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function v6(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes;0<d;){var y=31-Ua(d),a=1<<y,b=c[y];b===-1?(!(a&r)||a&i)&&(c[y]=_6(a,t)):b<=t&&(e.expiredLanes|=a),d&=~a}}function Yw(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function EL(){var e=E0;return E0<<=1,!(E0&4194240)&&(E0=64),e}function vb(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function dg(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ua(t),e[t]=r}function x6(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var c=31-Ua(r),d=1<<c;t[c]=0,i[c]=-1,e[c]=-1,r&=~d}}function kS(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-Ua(r),c=1<<i;c&t|e[i]&t&&(e[i]|=t),r&=~c}}var Br=0;function TL(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var CL,RS,ML,AL,kL,Qw=!1,C0=[],tc=null,nc=null,rc=null,Nm=new Map,$m=new Map,Kl=[],b6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lA(e,t){switch(e){case"focusin":case"focusout":tc=null;break;case"dragenter":case"dragleave":nc=null;break;case"mouseover":case"mouseout":rc=null;break;case"pointerover":case"pointerout":Nm.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":$m.delete(t.pointerId)}}function Fp(e,t,r,i,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:d,targetContainers:[c]},t!==null&&(t=fg(t),t!==null&&RS(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function w6(e,t,r,i,c){switch(t){case"focusin":return tc=Fp(tc,e,t,r,i,c),!0;case"dragenter":return nc=Fp(nc,e,t,r,i,c),!0;case"mouseover":return rc=Fp(rc,e,t,r,i,c),!0;case"pointerover":var d=c.pointerId;return Nm.set(d,Fp(Nm.get(d)||null,e,t,r,i,c)),!0;case"gotpointercapture":return d=c.pointerId,$m.set(d,Fp($m.get(d)||null,e,t,r,i,c)),!0}return!1}function RL(e){var t=Tu(e.target);if(t!==null){var r=Hu(t);if(r!==null){if(t=r.tag,t===13){if(t=_L(r),t!==null){e.blockedOn=t,kL(e.priority,function(){ML(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function s_(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Jw(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);Hw=i,r.target.dispatchEvent(i),Hw=null}else return t=fg(r),t!==null&&RS(t),e.blockedOn=r,!1;t.shift()}return!0}function cA(e,t,r){s_(e)&&r.delete(t)}function S6(){Qw=!1,tc!==null&&s_(tc)&&(tc=null),nc!==null&&s_(nc)&&(nc=null),rc!==null&&s_(rc)&&(rc=null),Nm.forEach(cA),$m.forEach(cA)}function Bp(e,t){e.blockedOn===t&&(e.blockedOn=null,Qw||(Qw=!0,Yo.unstable_scheduleCallback(Yo.unstable_NormalPriority,S6)))}function Um(e){function t(c){return Bp(c,e)}if(0<C0.length){Bp(C0[0],e);for(var r=1;r<C0.length;r++){var i=C0[r];i.blockedOn===e&&(i.blockedOn=null)}}for(tc!==null&&Bp(tc,e),nc!==null&&Bp(nc,e),rc!==null&&Bp(rc,e),Nm.forEach(t),$m.forEach(t),r=0;r<Kl.length;r++)i=Kl[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<Kl.length&&(r=Kl[0],r.blockedOn===null);)RL(r),r.blockedOn===null&&Kl.shift()}var Mh=rl.ReactCurrentBatchConfig,R_=!0;function E6(e,t,r,i){var c=Br,d=Mh.transition;Mh.transition=null;try{Br=1,IS(e,t,r,i)}finally{Br=c,Mh.transition=d}}function T6(e,t,r,i){var c=Br,d=Mh.transition;Mh.transition=null;try{Br=4,IS(e,t,r,i)}finally{Br=c,Mh.transition=d}}function IS(e,t,r,i){if(R_){var c=Jw(e,t,r,i);if(c===null)kb(e,t,i,I_,r),lA(e,i);else if(w6(c,e,t,r,i))i.stopPropagation();else if(lA(e,i),t&4&&-1<b6.indexOf(e)){for(;c!==null;){var d=fg(c);if(d!==null&&CL(d),d=Jw(e,t,r,i),d===null&&kb(e,t,i,I_,r),d===c)break;c=d}c!==null&&i.stopPropagation()}else kb(e,t,i,null,r)}}var I_=null;function Jw(e,t,r,i){if(I_=null,e=MS(i),e=Tu(e),e!==null)if(t=Hu(e),t===null)e=null;else if(r=t.tag,r===13){if(e=_L(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return I_=e,null}function IL(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(h6()){case AS:return 1;case wL:return 4;case A_:case f6:return 16;case SL:return 536870912;default:return 16}default:return 16}}var Jl=null,PS=null,l_=null;function PL(){if(l_)return l_;var e,t=PS,r=t.length,i,c="value"in Jl?Jl.value:Jl.textContent,d=c.length;for(e=0;e<r&&t[e]===c[e];e++);var y=r-e;for(i=1;i<=y&&t[r-i]===c[d-i];i++);return l_=c.slice(e,1<i?1-i:void 0)}function c_(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function M0(){return!0}function uA(){return!1}function Jo(e){function t(r,i,c,d,y){this._reactName=r,this._targetInst=c,this.type=i,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(d):d[a]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?M0:uA,this.isPropagationStopped=uA,this}return fi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=M0)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=M0)},persist:function(){},isPersistent:M0}),t}var nf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},LS=Jo(nf),hg=fi({},nf,{view:0,detail:0}),C6=Jo(hg),xb,bb,Np,xv=fi({},hg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:DS,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Np&&(Np&&e.type==="mousemove"?(xb=e.screenX-Np.screenX,bb=e.screenY-Np.screenY):bb=xb=0,Np=e),xb)},movementY:function(e){return"movementY"in e?e.movementY:bb}}),dA=Jo(xv),M6=fi({},xv,{dataTransfer:0}),A6=Jo(M6),k6=fi({},hg,{relatedTarget:0}),wb=Jo(k6),R6=fi({},nf,{animationName:0,elapsedTime:0,pseudoElement:0}),I6=Jo(R6),P6=fi({},nf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),L6=Jo(P6),D6=fi({},nf,{data:0}),hA=Jo(D6),z6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},O6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},F6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function B6(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=F6[e])?!!t[e]:!1}function DS(){return B6}var N6=fi({},hg,{key:function(e){if(e.key){var t=z6[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=c_(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?O6[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:DS,charCode:function(e){return e.type==="keypress"?c_(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?c_(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$6=Jo(N6),U6=fi({},xv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fA=Jo(U6),V6=fi({},hg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:DS}),j6=Jo(V6),G6=fi({},nf,{propertyName:0,elapsedTime:0,pseudoElement:0}),W6=Jo(G6),q6=fi({},xv,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),H6=Jo(q6),Z6=[9,13,27,32],zS=Zs&&"CompositionEvent"in window,xm=null;Zs&&"documentMode"in document&&(xm=document.documentMode);var X6=Zs&&"TextEvent"in window&&!xm,LL=Zs&&(!zS||xm&&8<xm&&11>=xm),pA=String.fromCharCode(32),mA=!1;function DL(e,t){switch(e){case"keyup":return Z6.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zL(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var uh=!1;function K6(e,t){switch(e){case"compositionend":return zL(t);case"keypress":return t.which!==32?null:(mA=!0,pA);case"textInput":return e=t.data,e===pA&&mA?null:e;default:return null}}function Y6(e,t){if(uh)return e==="compositionend"||!zS&&DL(e,t)?(e=PL(),l_=PS=Jl=null,uh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return LL&&t.locale!=="ko"?null:t.data;default:return null}}var Q6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gA(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Q6[e.type]:t==="textarea"}function OL(e,t,r,i){fL(i),t=P_(t,"onChange"),0<t.length&&(r=new LS("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var bm=null,Vm=null;function J6(e){HL(e,0)}function bv(e){var t=fh(e);if(aL(t))return e}function eN(e,t){if(e==="change")return t}var FL=!1;if(Zs){var Sb;if(Zs){var Eb="oninput"in document;if(!Eb){var yA=document.createElement("div");yA.setAttribute("oninput","return;"),Eb=typeof yA.oninput=="function"}Sb=Eb}else Sb=!1;FL=Sb&&(!document.documentMode||9<document.documentMode)}function _A(){bm&&(bm.detachEvent("onpropertychange",BL),Vm=bm=null)}function BL(e){if(e.propertyName==="value"&&bv(Vm)){var t=[];OL(t,Vm,e,MS(e)),yL(J6,t)}}function tN(e,t,r){e==="focusin"?(_A(),bm=t,Vm=r,bm.attachEvent("onpropertychange",BL)):e==="focusout"&&_A()}function nN(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return bv(Vm)}function rN(e,t){if(e==="click")return bv(t)}function iN(e,t){if(e==="input"||e==="change")return bv(t)}function oN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ja=typeof Object.is=="function"?Object.is:oN;function jm(e,t){if(ja(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var c=r[i];if(!zw.call(t,c)||!ja(e[c],t[c]))return!1}return!0}function vA(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xA(e,t){var r=vA(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=vA(r)}}function NL(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?NL(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $L(){for(var e=window,t=T_();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=T_(e.document)}return t}function OS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function aN(e){var t=$L(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&NL(r.ownerDocument.documentElement,r)){if(i!==null&&OS(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=r.textContent.length,d=Math.min(i.start,c);i=i.end===void 0?d:Math.min(i.end,c),!e.extend&&d>i&&(c=i,i=d,d=c),c=xA(r,d);var y=xA(r,i);c&&y&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),d>i?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var sN=Zs&&"documentMode"in document&&11>=document.documentMode,dh=null,e2=null,wm=null,t2=!1;function bA(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;t2||dh==null||dh!==T_(i)||(i=dh,"selectionStart"in i&&OS(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),wm&&jm(wm,i)||(wm=i,i=P_(e2,"onSelect"),0<i.length&&(t=new LS("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=dh)))}function A0(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var hh={animationend:A0("Animation","AnimationEnd"),animationiteration:A0("Animation","AnimationIteration"),animationstart:A0("Animation","AnimationStart"),transitionend:A0("Transition","TransitionEnd")},Tb={},UL={};Zs&&(UL=document.createElement("div").style,"AnimationEvent"in window||(delete hh.animationend.animation,delete hh.animationiteration.animation,delete hh.animationstart.animation),"TransitionEvent"in window||delete hh.transitionend.transition);function wv(e){if(Tb[e])return Tb[e];if(!hh[e])return e;var t=hh[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in UL)return Tb[e]=t[r];return e}var VL=wv("animationend"),jL=wv("animationiteration"),GL=wv("animationstart"),WL=wv("transitionend"),qL=new Map,wA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yc(e,t){qL.set(e,t),qu(t,[e])}for(var Cb=0;Cb<wA.length;Cb++){var Mb=wA[Cb],lN=Mb.toLowerCase(),cN=Mb[0].toUpperCase()+Mb.slice(1);yc(lN,"on"+cN)}yc(VL,"onAnimationEnd");yc(jL,"onAnimationIteration");yc(GL,"onAnimationStart");yc("dblclick","onDoubleClick");yc("focusin","onFocus");yc("focusout","onBlur");yc(WL,"onTransitionEnd");Oh("onMouseEnter",["mouseout","mouseover"]);Oh("onMouseLeave",["mouseout","mouseover"]);Oh("onPointerEnter",["pointerout","pointerover"]);Oh("onPointerLeave",["pointerout","pointerover"]);qu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qu("onBeforeInput",["compositionend","keypress","textInput","paste"]);qu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uN=new Set("cancel close invalid load scroll toggle".split(" ").concat(fm));function SA(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,l6(i,t,void 0,e),e.currentTarget=null}function HL(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],c=i.event;i=i.listeners;e:{var d=void 0;if(t)for(var y=i.length-1;0<=y;y--){var a=i[y],b=a.instance,S=a.currentTarget;if(a=a.listener,b!==d&&c.isPropagationStopped())break e;SA(c,a,S),d=b}else for(y=0;y<i.length;y++){if(a=i[y],b=a.instance,S=a.currentTarget,a=a.listener,b!==d&&c.isPropagationStopped())break e;SA(c,a,S),d=b}}}if(M_)throw e=Kw,M_=!1,Kw=null,e}function Xr(e,t){var r=t[a2];r===void 0&&(r=t[a2]=new Set);var i=e+"__bubble";r.has(i)||(ZL(t,e,2,!1),r.add(i))}function Ab(e,t,r){var i=0;t&&(i|=4),ZL(r,e,i,t)}var k0="_reactListening"+Math.random().toString(36).slice(2);function Gm(e){if(!e[k0]){e[k0]=!0,tL.forEach(function(r){r!=="selectionchange"&&(uN.has(r)||Ab(r,!1,e),Ab(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[k0]||(t[k0]=!0,Ab("selectionchange",!1,t))}}function ZL(e,t,r,i){switch(IL(t)){case 1:var c=E6;break;case 4:c=T6;break;default:c=IS}r=c.bind(null,t,r,e),c=void 0,!Xw||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),i?c!==void 0?e.addEventListener(t,r,{capture:!0,passive:c}):e.addEventListener(t,r,!0):c!==void 0?e.addEventListener(t,r,{passive:c}):e.addEventListener(t,r,!1)}function kb(e,t,r,i,c){var d=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var y=i.tag;if(y===3||y===4){var a=i.stateNode.containerInfo;if(a===c||a.nodeType===8&&a.parentNode===c)break;if(y===4)for(y=i.return;y!==null;){var b=y.tag;if((b===3||b===4)&&(b=y.stateNode.containerInfo,b===c||b.nodeType===8&&b.parentNode===c))return;y=y.return}for(;a!==null;){if(y=Tu(a),y===null)return;if(b=y.tag,b===5||b===6){i=d=y;continue e}a=a.parentNode}}i=i.return}yL(function(){var S=d,k=MS(r),P=[];e:{var O=qL.get(e);if(O!==void 0){var G=LS,F=e;switch(e){case"keypress":if(c_(r)===0)break e;case"keydown":case"keyup":G=$6;break;case"focusin":F="focus",G=wb;break;case"focusout":F="blur",G=wb;break;case"beforeblur":case"afterblur":G=wb;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=dA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=A6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=j6;break;case VL:case jL:case GL:G=I6;break;case WL:G=W6;break;case"scroll":G=C6;break;case"wheel":G=H6;break;case"copy":case"cut":case"paste":G=L6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=fA}var q=(t&4)!==0,ce=!q&&e==="scroll",B=q?O!==null?O+"Capture":null:O;q=[];for(var U=S,Z;U!==null;){Z=U;var J=Z.stateNode;if(Z.tag===5&&J!==null&&(Z=J,B!==null&&(J=Bm(U,B),J!=null&&q.push(Wm(U,J,Z)))),ce)break;U=U.return}0<q.length&&(O=new G(O,F,null,r,k),P.push({event:O,listeners:q}))}}if(!(t&7)){e:{if(O=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",O&&r!==Hw&&(F=r.relatedTarget||r.fromElement)&&(Tu(F)||F[Xs]))break e;if((G||O)&&(O=k.window===k?k:(O=k.ownerDocument)?O.defaultView||O.parentWindow:window,G?(F=r.relatedTarget||r.toElement,G=S,F=F?Tu(F):null,F!==null&&(ce=Hu(F),F!==ce||F.tag!==5&&F.tag!==6)&&(F=null)):(G=null,F=S),G!==F)){if(q=dA,J="onMouseLeave",B="onMouseEnter",U="mouse",(e==="pointerout"||e==="pointerover")&&(q=fA,J="onPointerLeave",B="onPointerEnter",U="pointer"),ce=G==null?O:fh(G),Z=F==null?O:fh(F),O=new q(J,U+"leave",G,r,k),O.target=ce,O.relatedTarget=Z,J=null,Tu(k)===S&&(q=new q(B,U+"enter",F,r,k),q.target=Z,q.relatedTarget=ce,J=q),ce=J,G&&F)t:{for(q=G,B=F,U=0,Z=q;Z;Z=Jd(Z))U++;for(Z=0,J=B;J;J=Jd(J))Z++;for(;0<U-Z;)q=Jd(q),U--;for(;0<Z-U;)B=Jd(B),Z--;for(;U--;){if(q===B||B!==null&&q===B.alternate)break t;q=Jd(q),B=Jd(B)}q=null}else q=null;G!==null&&EA(P,O,G,q,!1),F!==null&&ce!==null&&EA(P,ce,F,q,!0)}}e:{if(O=S?fh(S):window,G=O.nodeName&&O.nodeName.toLowerCase(),G==="select"||G==="input"&&O.type==="file")var Y=eN;else if(gA(O))if(FL)Y=iN;else{Y=nN;var he=tN}else(G=O.nodeName)&&G.toLowerCase()==="input"&&(O.type==="checkbox"||O.type==="radio")&&(Y=rN);if(Y&&(Y=Y(e,S))){OL(P,Y,r,k);break e}he&&he(e,O,S),e==="focusout"&&(he=O._wrapperState)&&he.controlled&&O.type==="number"&&Vw(O,"number",O.value)}switch(he=S?fh(S):window,e){case"focusin":(gA(he)||he.contentEditable==="true")&&(dh=he,e2=S,wm=null);break;case"focusout":wm=e2=dh=null;break;case"mousedown":t2=!0;break;case"contextmenu":case"mouseup":case"dragend":t2=!1,bA(P,r,k);break;case"selectionchange":if(sN)break;case"keydown":case"keyup":bA(P,r,k)}var se;if(zS)e:{switch(e){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else uh?DL(e,r)&&(De="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(De="onCompositionStart");De&&(LL&&r.locale!=="ko"&&(uh||De!=="onCompositionStart"?De==="onCompositionEnd"&&uh&&(se=PL()):(Jl=k,PS="value"in Jl?Jl.value:Jl.textContent,uh=!0)),he=P_(S,De),0<he.length&&(De=new hA(De,e,null,r,k),P.push({event:De,listeners:he}),se?De.data=se:(se=zL(r),se!==null&&(De.data=se)))),(se=X6?K6(e,r):Y6(e,r))&&(S=P_(S,"onBeforeInput"),0<S.length&&(k=new hA("onBeforeInput","beforeinput",null,r,k),P.push({event:k,listeners:S}),k.data=se))}HL(P,t)})}function Wm(e,t,r){return{instance:e,listener:t,currentTarget:r}}function P_(e,t){for(var r=t+"Capture",i=[];e!==null;){var c=e,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=Bm(e,r),d!=null&&i.unshift(Wm(e,d,c)),d=Bm(e,t),d!=null&&i.push(Wm(e,d,c))),e=e.return}return i}function Jd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function EA(e,t,r,i,c){for(var d=t._reactName,y=[];r!==null&&r!==i;){var a=r,b=a.alternate,S=a.stateNode;if(b!==null&&b===i)break;a.tag===5&&S!==null&&(a=S,c?(b=Bm(r,d),b!=null&&y.unshift(Wm(r,b,a))):c||(b=Bm(r,d),b!=null&&y.push(Wm(r,b,a)))),r=r.return}y.length!==0&&e.push({event:t,listeners:y})}var dN=/\r\n?/g,hN=/\u0000|\uFFFD/g;function TA(e){return(typeof e=="string"?e:""+e).replace(dN,`
`).replace(hN,"")}function R0(e,t,r){if(t=TA(t),TA(e)!==t&&r)throw Error(Wt(425))}function L_(){}var n2=null,r2=null;function i2(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var o2=typeof setTimeout=="function"?setTimeout:void 0,fN=typeof clearTimeout=="function"?clearTimeout:void 0,CA=typeof Promise=="function"?Promise:void 0,pN=typeof queueMicrotask=="function"?queueMicrotask:typeof CA<"u"?function(e){return CA.resolve(null).then(e).catch(mN)}:o2;function mN(e){setTimeout(function(){throw e})}function Rb(e,t){var r=t,i=0;do{var c=r.nextSibling;if(e.removeChild(r),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(i===0){e.removeChild(c),Um(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=c}while(r);Um(t)}function ic(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function MA(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var rf=Math.random().toString(36).slice(2),fs="__reactFiber$"+rf,qm="__reactProps$"+rf,Xs="__reactContainer$"+rf,a2="__reactEvents$"+rf,gN="__reactListeners$"+rf,yN="__reactHandles$"+rf;function Tu(e){var t=e[fs];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Xs]||r[fs]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=MA(e);e!==null;){if(r=e[fs])return r;e=MA(e)}return t}e=r,r=e.parentNode}return null}function fg(e){return e=e[fs]||e[Xs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function fh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Wt(33))}function Sv(e){return e[qm]||null}var s2=[],ph=-1;function _c(e){return{current:e}}function Qr(e){0>ph||(e.current=s2[ph],s2[ph]=null,ph--)}function Gr(e,t){ph++,s2[ph]=e.current,e.current=t}var hc={},mo=_c(hc),Lo=_c(!1),zu=hc;function Fh(e,t){var r=e.type.contextTypes;if(!r)return hc;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in r)c[d]=t[d];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Do(e){return e=e.childContextTypes,e!=null}function D_(){Qr(Lo),Qr(mo)}function AA(e,t,r){if(mo.current!==hc)throw Error(Wt(168));Gr(mo,t),Gr(Lo,r)}function XL(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var c in i)if(!(c in t))throw Error(Wt(108,t6(e)||"Unknown",c));return fi({},r,i)}function z_(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hc,zu=mo.current,Gr(mo,e),Gr(Lo,Lo.current),!0}function kA(e,t,r){var i=e.stateNode;if(!i)throw Error(Wt(169));r?(e=XL(e,t,zu),i.__reactInternalMemoizedMergedChildContext=e,Qr(Lo),Qr(mo),Gr(mo,e)):Qr(Lo),Gr(Lo,r)}var Us=null,Ev=!1,Ib=!1;function KL(e){Us===null?Us=[e]:Us.push(e)}function _N(e){Ev=!0,KL(e)}function vc(){if(!Ib&&Us!==null){Ib=!0;var e=0,t=Br;try{var r=Us;for(Br=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}Us=null,Ev=!1}catch(c){throw Us!==null&&(Us=Us.slice(e+1)),bL(AS,vc),c}finally{Br=t,Ib=!1}}return null}var mh=[],gh=0,O_=null,F_=0,da=[],ha=0,Ou=null,Gs=1,Ws="";function yu(e,t){mh[gh++]=F_,mh[gh++]=O_,O_=e,F_=t}function YL(e,t,r){da[ha++]=Gs,da[ha++]=Ws,da[ha++]=Ou,Ou=e;var i=Gs;e=Ws;var c=32-Ua(i)-1;i&=~(1<<c),r+=1;var d=32-Ua(t)+c;if(30<d){var y=c-c%5;d=(i&(1<<y)-1).toString(32),i>>=y,c-=y,Gs=1<<32-Ua(t)+c|r<<c|i,Ws=d+e}else Gs=1<<d|r<<c|i,Ws=e}function FS(e){e.return!==null&&(yu(e,1),YL(e,1,0))}function BS(e){for(;e===O_;)O_=mh[--gh],mh[gh]=null,F_=mh[--gh],mh[gh]=null;for(;e===Ou;)Ou=da[--ha],da[ha]=null,Ws=da[--ha],da[ha]=null,Gs=da[--ha],da[ha]=null}var Zo=null,Ho=null,ii=!1,Na=null;function QL(e,t){var r=fa(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function RA(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Zo=e,Ho=ic(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Zo=e,Ho=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ou!==null?{id:Gs,overflow:Ws}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=fa(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Zo=e,Ho=null,!0):!1;default:return!1}}function l2(e){return(e.mode&1)!==0&&(e.flags&128)===0}function c2(e){if(ii){var t=Ho;if(t){var r=t;if(!RA(e,t)){if(l2(e))throw Error(Wt(418));t=ic(r.nextSibling);var i=Zo;t&&RA(e,t)?QL(i,r):(e.flags=e.flags&-4097|2,ii=!1,Zo=e)}}else{if(l2(e))throw Error(Wt(418));e.flags=e.flags&-4097|2,ii=!1,Zo=e}}}function IA(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Zo=e}function I0(e){if(e!==Zo)return!1;if(!ii)return IA(e),ii=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!i2(e.type,e.memoizedProps)),t&&(t=Ho)){if(l2(e))throw JL(),Error(Wt(418));for(;t;)QL(e,t),t=ic(t.nextSibling)}if(IA(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Wt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ho=ic(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ho=null}}else Ho=Zo?ic(e.stateNode.nextSibling):null;return!0}function JL(){for(var e=Ho;e;)e=ic(e.nextSibling)}function Bh(){Ho=Zo=null,ii=!1}function NS(e){Na===null?Na=[e]:Na.push(e)}var vN=rl.ReactCurrentBatchConfig;function Oa(e,t){if(e&&e.defaultProps){t=fi({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var B_=_c(null),N_=null,yh=null,$S=null;function US(){$S=yh=N_=null}function VS(e){var t=B_.current;Qr(B_),e._currentValue=t}function u2(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function Ah(e,t){N_=e,$S=yh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Po=!0),e.firstContext=null)}function ga(e){var t=e._currentValue;if($S!==e)if(e={context:e,memoizedValue:t,next:null},yh===null){if(N_===null)throw Error(Wt(308));yh=e,N_.dependencies={lanes:0,firstContext:e}}else yh=yh.next=e;return t}var Cu=null;function jS(e){Cu===null?Cu=[e]:Cu.push(e)}function e3(e,t,r,i){var c=t.interleaved;return c===null?(r.next=r,jS(t)):(r.next=c.next,c.next=r),t.interleaved=r,Ks(e,i)}function Ks(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ql=!1;function GS(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function t3(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function oc(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,xr&2){var c=i.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),i.pending=t,Ks(e,r)}return c=i.interleaved,c===null?(t.next=t,jS(i)):(t.next=c.next,c.next=t),i.interleaved=t,Ks(e,r)}function u_(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,kS(e,r)}}function PA(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var c=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var y={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};d===null?c=d=y:d=d.next=y,r=r.next}while(r!==null);d===null?c=d=t:d=d.next=t}else c=d=t;r={baseState:i.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function $_(e,t,r,i){var c=e.updateQueue;ql=!1;var d=c.firstBaseUpdate,y=c.lastBaseUpdate,a=c.shared.pending;if(a!==null){c.shared.pending=null;var b=a,S=b.next;b.next=null,y===null?d=S:y.next=S,y=b;var k=e.alternate;k!==null&&(k=k.updateQueue,a=k.lastBaseUpdate,a!==y&&(a===null?k.firstBaseUpdate=S:a.next=S,k.lastBaseUpdate=b))}if(d!==null){var P=c.baseState;y=0,k=S=b=null,a=d;do{var O=a.lane,G=a.eventTime;if((i&O)===O){k!==null&&(k=k.next={eventTime:G,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var F=e,q=a;switch(O=t,G=r,q.tag){case 1:if(F=q.payload,typeof F=="function"){P=F.call(G,P,O);break e}P=F;break e;case 3:F.flags=F.flags&-65537|128;case 0:if(F=q.payload,O=typeof F=="function"?F.call(G,P,O):F,O==null)break e;P=fi({},P,O);break e;case 2:ql=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,O=c.effects,O===null?c.effects=[a]:O.push(a))}else G={eventTime:G,lane:O,tag:a.tag,payload:a.payload,callback:a.callback,next:null},k===null?(S=k=G,b=P):k=k.next=G,y|=O;if(a=a.next,a===null){if(a=c.shared.pending,a===null)break;O=a,a=O.next,O.next=null,c.lastBaseUpdate=O,c.shared.pending=null}}while(1);if(k===null&&(b=P),c.baseState=b,c.firstBaseUpdate=S,c.lastBaseUpdate=k,t=c.shared.interleaved,t!==null){c=t;do y|=c.lane,c=c.next;while(c!==t)}else d===null&&(c.shared.lanes=0);Bu|=y,e.lanes=y,e.memoizedState=P}}function LA(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],c=i.callback;if(c!==null){if(i.callback=null,i=r,typeof c!="function")throw Error(Wt(191,c));c.call(i)}}}var n3=new eL.Component().refs;function d2(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:fi({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Tv={isMounted:function(e){return(e=e._reactInternals)?Hu(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=xo(),c=sc(e),d=qs(i,c);d.payload=t,r!=null&&(d.callback=r),t=oc(e,d,c),t!==null&&(Va(t,e,c,i),u_(t,e,c))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=xo(),c=sc(e),d=qs(i,c);d.tag=1,d.payload=t,r!=null&&(d.callback=r),t=oc(e,d,c),t!==null&&(Va(t,e,c,i),u_(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=xo(),i=sc(e),c=qs(r,i);c.tag=2,t!=null&&(c.callback=t),t=oc(e,c,i),t!==null&&(Va(t,e,i,r),u_(t,e,i))}};function DA(e,t,r,i,c,d,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,d,y):t.prototype&&t.prototype.isPureReactComponent?!jm(r,i)||!jm(c,d):!0}function r3(e,t,r){var i=!1,c=hc,d=t.contextType;return typeof d=="object"&&d!==null?d=ga(d):(c=Do(t)?zu:mo.current,i=t.contextTypes,d=(i=i!=null)?Fh(e,c):hc),t=new t(r,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Tv,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=d),t}function zA(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&Tv.enqueueReplaceState(t,t.state,null)}function h2(e,t,r,i){var c=e.stateNode;c.props=r,c.state=e.memoizedState,c.refs=n3,GS(e);var d=t.contextType;typeof d=="object"&&d!==null?c.context=ga(d):(d=Do(t)?zu:mo.current,c.context=Fh(e,d)),c.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(d2(e,t,d,r),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&Tv.enqueueReplaceState(c,c.state,null),$_(e,r,c,i),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function $p(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Wt(309));var i=r.stateNode}if(!i)throw Error(Wt(147,e));var c=i,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(y){var a=c.refs;a===n3&&(a=c.refs={}),y===null?delete a[d]:a[d]=y},t._stringRef=d,t)}if(typeof e!="string")throw Error(Wt(284));if(!r._owner)throw Error(Wt(290,e))}return e}function P0(e,t){throw e=Object.prototype.toString.call(t),Error(Wt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function OA(e){var t=e._init;return t(e._payload)}function i3(e){function t(B,U){if(e){var Z=B.deletions;Z===null?(B.deletions=[U],B.flags|=16):Z.push(U)}}function r(B,U){if(!e)return null;for(;U!==null;)t(B,U),U=U.sibling;return null}function i(B,U){for(B=new Map;U!==null;)U.key!==null?B.set(U.key,U):B.set(U.index,U),U=U.sibling;return B}function c(B,U){return B=lc(B,U),B.index=0,B.sibling=null,B}function d(B,U,Z){return B.index=Z,e?(Z=B.alternate,Z!==null?(Z=Z.index,Z<U?(B.flags|=2,U):Z):(B.flags|=2,U)):(B.flags|=1048576,U)}function y(B){return e&&B.alternate===null&&(B.flags|=2),B}function a(B,U,Z,J){return U===null||U.tag!==6?(U=Bb(Z,B.mode,J),U.return=B,U):(U=c(U,Z),U.return=B,U)}function b(B,U,Z,J){var Y=Z.type;return Y===ch?k(B,U,Z.props.children,J,Z.key):U!==null&&(U.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===Wl&&OA(Y)===U.type)?(J=c(U,Z.props),J.ref=$p(B,U,Z),J.return=B,J):(J=g_(Z.type,Z.key,Z.props,null,B.mode,J),J.ref=$p(B,U,Z),J.return=B,J)}function S(B,U,Z,J){return U===null||U.tag!==4||U.stateNode.containerInfo!==Z.containerInfo||U.stateNode.implementation!==Z.implementation?(U=Nb(Z,B.mode,J),U.return=B,U):(U=c(U,Z.children||[]),U.return=B,U)}function k(B,U,Z,J,Y){return U===null||U.tag!==7?(U=Pu(Z,B.mode,J,Y),U.return=B,U):(U=c(U,Z),U.return=B,U)}function P(B,U,Z){if(typeof U=="string"&&U!==""||typeof U=="number")return U=Bb(""+U,B.mode,Z),U.return=B,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case b0:return Z=g_(U.type,U.key,U.props,null,B.mode,Z),Z.ref=$p(B,null,U),Z.return=B,Z;case lh:return U=Nb(U,B.mode,Z),U.return=B,U;case Wl:var J=U._init;return P(B,J(U._payload),Z)}if(dm(U)||zp(U))return U=Pu(U,B.mode,Z,null),U.return=B,U;P0(B,U)}return null}function O(B,U,Z,J){var Y=U!==null?U.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Y!==null?null:a(B,U,""+Z,J);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case b0:return Z.key===Y?b(B,U,Z,J):null;case lh:return Z.key===Y?S(B,U,Z,J):null;case Wl:return Y=Z._init,O(B,U,Y(Z._payload),J)}if(dm(Z)||zp(Z))return Y!==null?null:k(B,U,Z,J,null);P0(B,Z)}return null}function G(B,U,Z,J,Y){if(typeof J=="string"&&J!==""||typeof J=="number")return B=B.get(Z)||null,a(U,B,""+J,Y);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case b0:return B=B.get(J.key===null?Z:J.key)||null,b(U,B,J,Y);case lh:return B=B.get(J.key===null?Z:J.key)||null,S(U,B,J,Y);case Wl:var he=J._init;return G(B,U,Z,he(J._payload),Y)}if(dm(J)||zp(J))return B=B.get(Z)||null,k(U,B,J,Y,null);P0(U,J)}return null}function F(B,U,Z,J){for(var Y=null,he=null,se=U,De=U=0,fe=null;se!==null&&De<Z.length;De++){se.index>De?(fe=se,se=null):fe=se.sibling;var $=O(B,se,Z[De],J);if($===null){se===null&&(se=fe);break}e&&se&&$.alternate===null&&t(B,se),U=d($,U,De),he===null?Y=$:he.sibling=$,he=$,se=fe}if(De===Z.length)return r(B,se),ii&&yu(B,De),Y;if(se===null){for(;De<Z.length;De++)se=P(B,Z[De],J),se!==null&&(U=d(se,U,De),he===null?Y=se:he.sibling=se,he=se);return ii&&yu(B,De),Y}for(se=i(B,se);De<Z.length;De++)fe=G(se,B,De,Z[De],J),fe!==null&&(e&&fe.alternate!==null&&se.delete(fe.key===null?De:fe.key),U=d(fe,U,De),he===null?Y=fe:he.sibling=fe,he=fe);return e&&se.forEach(function(ue){return t(B,ue)}),ii&&yu(B,De),Y}function q(B,U,Z,J){var Y=zp(Z);if(typeof Y!="function")throw Error(Wt(150));if(Z=Y.call(Z),Z==null)throw Error(Wt(151));for(var he=Y=null,se=U,De=U=0,fe=null,$=Z.next();se!==null&&!$.done;De++,$=Z.next()){se.index>De?(fe=se,se=null):fe=se.sibling;var ue=O(B,se,$.value,J);if(ue===null){se===null&&(se=fe);break}e&&se&&ue.alternate===null&&t(B,se),U=d(ue,U,De),he===null?Y=ue:he.sibling=ue,he=ue,se=fe}if($.done)return r(B,se),ii&&yu(B,De),Y;if(se===null){for(;!$.done;De++,$=Z.next())$=P(B,$.value,J),$!==null&&(U=d($,U,De),he===null?Y=$:he.sibling=$,he=$);return ii&&yu(B,De),Y}for(se=i(B,se);!$.done;De++,$=Z.next())$=G(se,B,De,$.value,J),$!==null&&(e&&$.alternate!==null&&se.delete($.key===null?De:$.key),U=d($,U,De),he===null?Y=$:he.sibling=$,he=$);return e&&se.forEach(function(Je){return t(B,Je)}),ii&&yu(B,De),Y}function ce(B,U,Z,J){if(typeof Z=="object"&&Z!==null&&Z.type===ch&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case b0:e:{for(var Y=Z.key,he=U;he!==null;){if(he.key===Y){if(Y=Z.type,Y===ch){if(he.tag===7){r(B,he.sibling),U=c(he,Z.props.children),U.return=B,B=U;break e}}else if(he.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===Wl&&OA(Y)===he.type){r(B,he.sibling),U=c(he,Z.props),U.ref=$p(B,he,Z),U.return=B,B=U;break e}r(B,he);break}else t(B,he);he=he.sibling}Z.type===ch?(U=Pu(Z.props.children,B.mode,J,Z.key),U.return=B,B=U):(J=g_(Z.type,Z.key,Z.props,null,B.mode,J),J.ref=$p(B,U,Z),J.return=B,B=J)}return y(B);case lh:e:{for(he=Z.key;U!==null;){if(U.key===he)if(U.tag===4&&U.stateNode.containerInfo===Z.containerInfo&&U.stateNode.implementation===Z.implementation){r(B,U.sibling),U=c(U,Z.children||[]),U.return=B,B=U;break e}else{r(B,U);break}else t(B,U);U=U.sibling}U=Nb(Z,B.mode,J),U.return=B,B=U}return y(B);case Wl:return he=Z._init,ce(B,U,he(Z._payload),J)}if(dm(Z))return F(B,U,Z,J);if(zp(Z))return q(B,U,Z,J);P0(B,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"?(Z=""+Z,U!==null&&U.tag===6?(r(B,U.sibling),U=c(U,Z),U.return=B,B=U):(r(B,U),U=Bb(Z,B.mode,J),U.return=B,B=U),y(B)):r(B,U)}return ce}var Nh=i3(!0),o3=i3(!1),pg={},ys=_c(pg),Hm=_c(pg),Zm=_c(pg);function Mu(e){if(e===pg)throw Error(Wt(174));return e}function WS(e,t){switch(Gr(Zm,t),Gr(Hm,e),Gr(ys,pg),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Gw(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Gw(t,e)}Qr(ys),Gr(ys,t)}function $h(){Qr(ys),Qr(Hm),Qr(Zm)}function a3(e){Mu(Zm.current);var t=Mu(ys.current),r=Gw(t,e.type);t!==r&&(Gr(Hm,e),Gr(ys,r))}function qS(e){Hm.current===e&&(Qr(ys),Qr(Hm))}var di=_c(0);function U_(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Pb=[];function HS(){for(var e=0;e<Pb.length;e++)Pb[e]._workInProgressVersionPrimary=null;Pb.length=0}var d_=rl.ReactCurrentDispatcher,Lb=rl.ReactCurrentBatchConfig,Fu=0,hi=null,zi=null,Gi=null,V_=!1,Sm=!1,Xm=0,xN=0;function uo(){throw Error(Wt(321))}function ZS(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ja(e[r],t[r]))return!1;return!0}function XS(e,t,r,i,c,d){if(Fu=d,hi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,d_.current=e===null||e.memoizedState===null?EN:TN,e=r(i,c),Sm){d=0;do{if(Sm=!1,Xm=0,25<=d)throw Error(Wt(301));d+=1,Gi=zi=null,t.updateQueue=null,d_.current=CN,e=r(i,c)}while(Sm)}if(d_.current=j_,t=zi!==null&&zi.next!==null,Fu=0,Gi=zi=hi=null,V_=!1,t)throw Error(Wt(300));return e}function KS(){var e=Xm!==0;return Xm=0,e}function cs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gi===null?hi.memoizedState=Gi=e:Gi=Gi.next=e,Gi}function ya(){if(zi===null){var e=hi.alternate;e=e!==null?e.memoizedState:null}else e=zi.next;var t=Gi===null?hi.memoizedState:Gi.next;if(t!==null)Gi=t,zi=e;else{if(e===null)throw Error(Wt(310));zi=e,e={memoizedState:zi.memoizedState,baseState:zi.baseState,baseQueue:zi.baseQueue,queue:zi.queue,next:null},Gi===null?hi.memoizedState=Gi=e:Gi=Gi.next=e}return Gi}function Km(e,t){return typeof t=="function"?t(e):t}function Db(e){var t=ya(),r=t.queue;if(r===null)throw Error(Wt(311));r.lastRenderedReducer=e;var i=zi,c=i.baseQueue,d=r.pending;if(d!==null){if(c!==null){var y=c.next;c.next=d.next,d.next=y}i.baseQueue=c=d,r.pending=null}if(c!==null){d=c.next,i=i.baseState;var a=y=null,b=null,S=d;do{var k=S.lane;if((Fu&k)===k)b!==null&&(b=b.next={lane:0,action:S.action,hasEagerState:S.hasEagerState,eagerState:S.eagerState,next:null}),i=S.hasEagerState?S.eagerState:e(i,S.action);else{var P={lane:k,action:S.action,hasEagerState:S.hasEagerState,eagerState:S.eagerState,next:null};b===null?(a=b=P,y=i):b=b.next=P,hi.lanes|=k,Bu|=k}S=S.next}while(S!==null&&S!==d);b===null?y=i:b.next=a,ja(i,t.memoizedState)||(Po=!0),t.memoizedState=i,t.baseState=y,t.baseQueue=b,r.lastRenderedState=i}if(e=r.interleaved,e!==null){c=e;do d=c.lane,hi.lanes|=d,Bu|=d,c=c.next;while(c!==e)}else c===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function zb(e){var t=ya(),r=t.queue;if(r===null)throw Error(Wt(311));r.lastRenderedReducer=e;var i=r.dispatch,c=r.pending,d=t.memoizedState;if(c!==null){r.pending=null;var y=c=c.next;do d=e(d,y.action),y=y.next;while(y!==c);ja(d,t.memoizedState)||(Po=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),r.lastRenderedState=d}return[d,i]}function s3(){}function l3(e,t){var r=hi,i=ya(),c=t(),d=!ja(i.memoizedState,c);if(d&&(i.memoizedState=c,Po=!0),i=i.queue,YS(d3.bind(null,r,i,e),[e]),i.getSnapshot!==t||d||Gi!==null&&Gi.memoizedState.tag&1){if(r.flags|=2048,Ym(9,u3.bind(null,r,i,c,t),void 0,null),Wi===null)throw Error(Wt(349));Fu&30||c3(r,t,c)}return c}function c3(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=hi.updateQueue,t===null?(t={lastEffect:null,stores:null},hi.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function u3(e,t,r,i){t.value=r,t.getSnapshot=i,h3(t)&&f3(e)}function d3(e,t,r){return r(function(){h3(t)&&f3(e)})}function h3(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ja(e,r)}catch{return!0}}function f3(e){var t=Ks(e,1);t!==null&&Va(t,e,1,-1)}function FA(e){var t=cs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Km,lastRenderedState:e},t.queue=e,e=e.dispatch=SN.bind(null,hi,e),[t.memoizedState,e]}function Ym(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=hi.updateQueue,t===null?(t={lastEffect:null,stores:null},hi.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function p3(){return ya().memoizedState}function h_(e,t,r,i){var c=cs();hi.flags|=e,c.memoizedState=Ym(1|t,r,void 0,i===void 0?null:i)}function Cv(e,t,r,i){var c=ya();i=i===void 0?null:i;var d=void 0;if(zi!==null){var y=zi.memoizedState;if(d=y.destroy,i!==null&&ZS(i,y.deps)){c.memoizedState=Ym(t,r,d,i);return}}hi.flags|=e,c.memoizedState=Ym(1|t,r,d,i)}function BA(e,t){return h_(8390656,8,e,t)}function YS(e,t){return Cv(2048,8,e,t)}function m3(e,t){return Cv(4,2,e,t)}function g3(e,t){return Cv(4,4,e,t)}function y3(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _3(e,t,r){return r=r!=null?r.concat([e]):null,Cv(4,4,y3.bind(null,t,e),r)}function QS(){}function v3(e,t){var r=ya();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&ZS(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function x3(e,t){var r=ya();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&ZS(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function b3(e,t,r){return Fu&21?(ja(r,t)||(r=EL(),hi.lanes|=r,Bu|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Po=!0),e.memoizedState=r)}function bN(e,t){var r=Br;Br=r!==0&&4>r?r:4,e(!0);var i=Lb.transition;Lb.transition={};try{e(!1),t()}finally{Br=r,Lb.transition=i}}function w3(){return ya().memoizedState}function wN(e,t,r){var i=sc(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},S3(e))E3(t,r);else if(r=e3(e,t,r,i),r!==null){var c=xo();Va(r,e,i,c),T3(r,t,i)}}function SN(e,t,r){var i=sc(e),c={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(S3(e))E3(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var y=t.lastRenderedState,a=d(y,r);if(c.hasEagerState=!0,c.eagerState=a,ja(a,y)){var b=t.interleaved;b===null?(c.next=c,jS(t)):(c.next=b.next,b.next=c),t.interleaved=c;return}}catch{}finally{}r=e3(e,t,c,i),r!==null&&(c=xo(),Va(r,e,i,c),T3(r,t,i))}}function S3(e){var t=e.alternate;return e===hi||t!==null&&t===hi}function E3(e,t){Sm=V_=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function T3(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,kS(e,r)}}var j_={readContext:ga,useCallback:uo,useContext:uo,useEffect:uo,useImperativeHandle:uo,useInsertionEffect:uo,useLayoutEffect:uo,useMemo:uo,useReducer:uo,useRef:uo,useState:uo,useDebugValue:uo,useDeferredValue:uo,useTransition:uo,useMutableSource:uo,useSyncExternalStore:uo,useId:uo,unstable_isNewReconciler:!1},EN={readContext:ga,useCallback:function(e,t){return cs().memoizedState=[e,t===void 0?null:t],e},useContext:ga,useEffect:BA,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,h_(4194308,4,y3.bind(null,t,e),r)},useLayoutEffect:function(e,t){return h_(4194308,4,e,t)},useInsertionEffect:function(e,t){return h_(4,2,e,t)},useMemo:function(e,t){var r=cs();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=cs();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=wN.bind(null,hi,e),[i.memoizedState,e]},useRef:function(e){var t=cs();return e={current:e},t.memoizedState=e},useState:FA,useDebugValue:QS,useDeferredValue:function(e){return cs().memoizedState=e},useTransition:function(){var e=FA(!1),t=e[0];return e=bN.bind(null,e[1]),cs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=hi,c=cs();if(ii){if(r===void 0)throw Error(Wt(407));r=r()}else{if(r=t(),Wi===null)throw Error(Wt(349));Fu&30||c3(i,t,r)}c.memoizedState=r;var d={value:r,getSnapshot:t};return c.queue=d,BA(d3.bind(null,i,d,e),[e]),i.flags|=2048,Ym(9,u3.bind(null,i,d,r,t),void 0,null),r},useId:function(){var e=cs(),t=Wi.identifierPrefix;if(ii){var r=Ws,i=Gs;r=(i&~(1<<32-Ua(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=Xm++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=xN++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},TN={readContext:ga,useCallback:v3,useContext:ga,useEffect:YS,useImperativeHandle:_3,useInsertionEffect:m3,useLayoutEffect:g3,useMemo:x3,useReducer:Db,useRef:p3,useState:function(){return Db(Km)},useDebugValue:QS,useDeferredValue:function(e){var t=ya();return b3(t,zi.memoizedState,e)},useTransition:function(){var e=Db(Km)[0],t=ya().memoizedState;return[e,t]},useMutableSource:s3,useSyncExternalStore:l3,useId:w3,unstable_isNewReconciler:!1},CN={readContext:ga,useCallback:v3,useContext:ga,useEffect:YS,useImperativeHandle:_3,useInsertionEffect:m3,useLayoutEffect:g3,useMemo:x3,useReducer:zb,useRef:p3,useState:function(){return zb(Km)},useDebugValue:QS,useDeferredValue:function(e){var t=ya();return zi===null?t.memoizedState=e:b3(t,zi.memoizedState,e)},useTransition:function(){var e=zb(Km)[0],t=ya().memoizedState;return[e,t]},useMutableSource:s3,useSyncExternalStore:l3,useId:w3,unstable_isNewReconciler:!1};function Uh(e,t){try{var r="",i=t;do r+=e6(i),i=i.return;while(i);var c=r}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:c,digest:null}}function Ob(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function f2(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var MN=typeof WeakMap=="function"?WeakMap:Map;function C3(e,t,r){r=qs(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){W_||(W_=!0,S2=i),f2(e,t)},r}function M3(e,t,r){r=qs(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var c=t.value;r.payload=function(){return i(c)},r.callback=function(){f2(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(r.callback=function(){f2(e,t),typeof i!="function"&&(ac===null?ac=new Set([this]):ac.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),r}function NA(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new MN;var c=new Set;i.set(t,c)}else c=i.get(t),c===void 0&&(c=new Set,i.set(t,c));c.has(r)||(c.add(r),e=UN.bind(null,e,t,r),t.then(e,e))}function $A(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function UA(e,t,r,i,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=qs(-1,1),t.tag=2,oc(r,t,1))),r.lanes|=1),e)}var AN=rl.ReactCurrentOwner,Po=!1;function vo(e,t,r,i){t.child=e===null?o3(t,null,r,i):Nh(t,e.child,r,i)}function VA(e,t,r,i,c){r=r.render;var d=t.ref;return Ah(t,c),i=XS(e,t,r,i,d,c),r=KS(),e!==null&&!Po?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ys(e,t,c)):(ii&&r&&FS(t),t.flags|=1,vo(e,t,i,c),t.child)}function jA(e,t,r,i,c){if(e===null){var d=r.type;return typeof d=="function"&&!aE(d)&&d.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=d,A3(e,t,d,i,c)):(e=g_(r.type,null,i,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!(e.lanes&c)){var y=d.memoizedProps;if(r=r.compare,r=r!==null?r:jm,r(y,i)&&e.ref===t.ref)return Ys(e,t,c)}return t.flags|=1,e=lc(d,i),e.ref=t.ref,e.return=t,t.child=e}function A3(e,t,r,i,c){if(e!==null){var d=e.memoizedProps;if(jm(d,i)&&e.ref===t.ref)if(Po=!1,t.pendingProps=i=d,(e.lanes&c)!==0)e.flags&131072&&(Po=!0);else return t.lanes=e.lanes,Ys(e,t,c)}return p2(e,t,r,i,c)}function k3(e,t,r){var i=t.pendingProps,c=i.children,d=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Gr(vh,Wo),Wo|=r;else{if(!(r&1073741824))return e=d!==null?d.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Gr(vh,Wo),Wo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=d!==null?d.baseLanes:r,Gr(vh,Wo),Wo|=i}else d!==null?(i=d.baseLanes|r,t.memoizedState=null):i=r,Gr(vh,Wo),Wo|=i;return vo(e,t,c,r),t.child}function R3(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function p2(e,t,r,i,c){var d=Do(r)?zu:mo.current;return d=Fh(t,d),Ah(t,c),r=XS(e,t,r,i,d,c),i=KS(),e!==null&&!Po?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ys(e,t,c)):(ii&&i&&FS(t),t.flags|=1,vo(e,t,r,c),t.child)}function GA(e,t,r,i,c){if(Do(r)){var d=!0;z_(t)}else d=!1;if(Ah(t,c),t.stateNode===null)f_(e,t),r3(t,r,i),h2(t,r,i,c),i=!0;else if(e===null){var y=t.stateNode,a=t.memoizedProps;y.props=a;var b=y.context,S=r.contextType;typeof S=="object"&&S!==null?S=ga(S):(S=Do(r)?zu:mo.current,S=Fh(t,S));var k=r.getDerivedStateFromProps,P=typeof k=="function"||typeof y.getSnapshotBeforeUpdate=="function";P||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(a!==i||b!==S)&&zA(t,y,i,S),ql=!1;var O=t.memoizedState;y.state=O,$_(t,i,y,c),b=t.memoizedState,a!==i||O!==b||Lo.current||ql?(typeof k=="function"&&(d2(t,r,k,i),b=t.memoizedState),(a=ql||DA(t,r,a,i,O,b,S))?(P||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=b),y.props=i,y.state=b,y.context=S,i=a):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{y=t.stateNode,t3(e,t),a=t.memoizedProps,S=t.type===t.elementType?a:Oa(t.type,a),y.props=S,P=t.pendingProps,O=y.context,b=r.contextType,typeof b=="object"&&b!==null?b=ga(b):(b=Do(r)?zu:mo.current,b=Fh(t,b));var G=r.getDerivedStateFromProps;(k=typeof G=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(a!==P||O!==b)&&zA(t,y,i,b),ql=!1,O=t.memoizedState,y.state=O,$_(t,i,y,c);var F=t.memoizedState;a!==P||O!==F||Lo.current||ql?(typeof G=="function"&&(d2(t,r,G,i),F=t.memoizedState),(S=ql||DA(t,r,S,i,O,F,b)||!1)?(k||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(i,F,b),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(i,F,b)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||a===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=F),y.props=i,y.state=F,y.context=b,i=S):(typeof y.componentDidUpdate!="function"||a===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),i=!1)}return m2(e,t,r,i,d,c)}function m2(e,t,r,i,c,d){R3(e,t);var y=(t.flags&128)!==0;if(!i&&!y)return c&&kA(t,r,!1),Ys(e,t,d);i=t.stateNode,AN.current=t;var a=y&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&y?(t.child=Nh(t,e.child,null,d),t.child=Nh(t,null,a,d)):vo(e,t,a,d),t.memoizedState=i.state,c&&kA(t,r,!0),t.child}function I3(e){var t=e.stateNode;t.pendingContext?AA(e,t.pendingContext,t.pendingContext!==t.context):t.context&&AA(e,t.context,!1),WS(e,t.containerInfo)}function WA(e,t,r,i,c){return Bh(),NS(c),t.flags|=256,vo(e,t,r,i),t.child}var g2={dehydrated:null,treeContext:null,retryLane:0};function y2(e){return{baseLanes:e,cachePool:null,transitions:null}}function P3(e,t,r){var i=t.pendingProps,c=di.current,d=!1,y=(t.flags&128)!==0,a;if((a=y)||(a=e!==null&&e.memoizedState===null?!1:(c&2)!==0),a?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),Gr(di,c&1),e===null)return c2(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(y=i.children,e=i.fallback,d?(i=t.mode,d=t.child,y={mode:"hidden",children:y},!(i&1)&&d!==null?(d.childLanes=0,d.pendingProps=y):d=kv(y,i,0,null),e=Pu(e,i,r,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=y2(r),t.memoizedState=g2,e):JS(t,y));if(c=e.memoizedState,c!==null&&(a=c.dehydrated,a!==null))return kN(e,t,y,i,a,c,r);if(d){d=i.fallback,y=t.mode,c=e.child,a=c.sibling;var b={mode:"hidden",children:i.children};return!(y&1)&&t.child!==c?(i=t.child,i.childLanes=0,i.pendingProps=b,t.deletions=null):(i=lc(c,b),i.subtreeFlags=c.subtreeFlags&14680064),a!==null?d=lc(a,d):(d=Pu(d,y,r,null),d.flags|=2),d.return=t,i.return=t,i.sibling=d,t.child=i,i=d,d=t.child,y=e.child.memoizedState,y=y===null?y2(r):{baseLanes:y.baseLanes|r,cachePool:null,transitions:y.transitions},d.memoizedState=y,d.childLanes=e.childLanes&~r,t.memoizedState=g2,i}return d=e.child,e=d.sibling,i=lc(d,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function JS(e,t){return t=kv({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function L0(e,t,r,i){return i!==null&&NS(i),Nh(t,e.child,null,r),e=JS(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function kN(e,t,r,i,c,d,y){if(r)return t.flags&256?(t.flags&=-257,i=Ob(Error(Wt(422))),L0(e,t,y,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=i.fallback,c=t.mode,i=kv({mode:"visible",children:i.children},c,0,null),d=Pu(d,c,y,null),d.flags|=2,i.return=t,d.return=t,i.sibling=d,t.child=i,t.mode&1&&Nh(t,e.child,null,y),t.child.memoizedState=y2(y),t.memoizedState=g2,d);if(!(t.mode&1))return L0(e,t,y,null);if(c.data==="$!"){if(i=c.nextSibling&&c.nextSibling.dataset,i)var a=i.dgst;return i=a,d=Error(Wt(419)),i=Ob(d,i,void 0),L0(e,t,y,i)}if(a=(y&e.childLanes)!==0,Po||a){if(i=Wi,i!==null){switch(y&-y){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(i.suspendedLanes|y)?0:c,c!==0&&c!==d.retryLane&&(d.retryLane=c,Ks(e,c),Va(i,e,c,-1))}return oE(),i=Ob(Error(Wt(421))),L0(e,t,y,i)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=VN.bind(null,e),c._reactRetry=t,null):(e=d.treeContext,Ho=ic(c.nextSibling),Zo=t,ii=!0,Na=null,e!==null&&(da[ha++]=Gs,da[ha++]=Ws,da[ha++]=Ou,Gs=e.id,Ws=e.overflow,Ou=t),t=JS(t,i.children),t.flags|=4096,t)}function qA(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),u2(e.return,t,r)}function Fb(e,t,r,i,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:c}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=i,d.tail=r,d.tailMode=c)}function L3(e,t,r){var i=t.pendingProps,c=i.revealOrder,d=i.tail;if(vo(e,t,i.children,r),i=di.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&qA(e,r,t);else if(e.tag===19)qA(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Gr(di,i),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(r=t.child,c=null;r!==null;)e=r.alternate,e!==null&&U_(e)===null&&(c=r),r=r.sibling;r=c,r===null?(c=t.child,t.child=null):(c=r.sibling,r.sibling=null),Fb(t,!1,c,r,d);break;case"backwards":for(r=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&U_(e)===null){t.child=c;break}e=c.sibling,c.sibling=r,r=c,c=e}Fb(t,!0,r,null,d);break;case"together":Fb(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function f_(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ys(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Bu|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Wt(153));if(t.child!==null){for(e=t.child,r=lc(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=lc(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function RN(e,t,r){switch(t.tag){case 3:I3(t),Bh();break;case 5:a3(t);break;case 1:Do(t.type)&&z_(t);break;case 4:WS(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,c=t.memoizedProps.value;Gr(B_,i._currentValue),i._currentValue=c;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Gr(di,di.current&1),t.flags|=128,null):r&t.child.childLanes?P3(e,t,r):(Gr(di,di.current&1),e=Ys(e,t,r),e!==null?e.sibling:null);Gr(di,di.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return L3(e,t,r);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Gr(di,di.current),i)break;return null;case 22:case 23:return t.lanes=0,k3(e,t,r)}return Ys(e,t,r)}var D3,_2,z3,O3;D3=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};_2=function(){};z3=function(e,t,r,i){var c=e.memoizedProps;if(c!==i){e=t.stateNode,Mu(ys.current);var d=null;switch(r){case"input":c=$w(e,c),i=$w(e,i),d=[];break;case"select":c=fi({},c,{value:void 0}),i=fi({},i,{value:void 0}),d=[];break;case"textarea":c=jw(e,c),i=jw(e,i),d=[];break;default:typeof c.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=L_)}Ww(r,i);var y;r=null;for(S in c)if(!i.hasOwnProperty(S)&&c.hasOwnProperty(S)&&c[S]!=null)if(S==="style"){var a=c[S];for(y in a)a.hasOwnProperty(y)&&(r||(r={}),r[y]="")}else S!=="dangerouslySetInnerHTML"&&S!=="children"&&S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(Om.hasOwnProperty(S)?d||(d=[]):(d=d||[]).push(S,null));for(S in i){var b=i[S];if(a=c!=null?c[S]:void 0,i.hasOwnProperty(S)&&b!==a&&(b!=null||a!=null))if(S==="style")if(a){for(y in a)!a.hasOwnProperty(y)||b&&b.hasOwnProperty(y)||(r||(r={}),r[y]="");for(y in b)b.hasOwnProperty(y)&&a[y]!==b[y]&&(r||(r={}),r[y]=b[y])}else r||(d||(d=[]),d.push(S,r)),r=b;else S==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,a=a?a.__html:void 0,b!=null&&a!==b&&(d=d||[]).push(S,b)):S==="children"?typeof b!="string"&&typeof b!="number"||(d=d||[]).push(S,""+b):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&(Om.hasOwnProperty(S)?(b!=null&&S==="onScroll"&&Xr("scroll",e),d||a===b||(d=[])):(d=d||[]).push(S,b))}r&&(d=d||[]).push("style",r);var S=d;(t.updateQueue=S)&&(t.flags|=4)}};O3=function(e,t,r,i){r!==i&&(t.flags|=4)};function Up(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ho(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var c=e.child;c!==null;)r|=c.lanes|c.childLanes,i|=c.subtreeFlags&14680064,i|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)r|=c.lanes|c.childLanes,i|=c.subtreeFlags,i|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function IN(e,t,r){var i=t.pendingProps;switch(BS(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ho(t),null;case 1:return Do(t.type)&&D_(),ho(t),null;case 3:return i=t.stateNode,$h(),Qr(Lo),Qr(mo),HS(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(I0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Na!==null&&(C2(Na),Na=null))),_2(e,t),ho(t),null;case 5:qS(t);var c=Mu(Zm.current);if(r=t.type,e!==null&&t.stateNode!=null)z3(e,t,r,i,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(Wt(166));return ho(t),null}if(e=Mu(ys.current),I0(t)){i=t.stateNode,r=t.type;var d=t.memoizedProps;switch(i[fs]=t,i[qm]=d,e=(t.mode&1)!==0,r){case"dialog":Xr("cancel",i),Xr("close",i);break;case"iframe":case"object":case"embed":Xr("load",i);break;case"video":case"audio":for(c=0;c<fm.length;c++)Xr(fm[c],i);break;case"source":Xr("error",i);break;case"img":case"image":case"link":Xr("error",i),Xr("load",i);break;case"details":Xr("toggle",i);break;case"input":tA(i,d),Xr("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!d.multiple},Xr("invalid",i);break;case"textarea":rA(i,d),Xr("invalid",i)}Ww(r,d),c=null;for(var y in d)if(d.hasOwnProperty(y)){var a=d[y];y==="children"?typeof a=="string"?i.textContent!==a&&(d.suppressHydrationWarning!==!0&&R0(i.textContent,a,e),c=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(d.suppressHydrationWarning!==!0&&R0(i.textContent,a,e),c=["children",""+a]):Om.hasOwnProperty(y)&&a!=null&&y==="onScroll"&&Xr("scroll",i)}switch(r){case"input":w0(i),nA(i,d,!0);break;case"textarea":w0(i),iA(i);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(i.onclick=L_)}i=c,t.updateQueue=i,i!==null&&(t.flags|=4)}else{y=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=cL(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=y.createElement(r,{is:i.is}):(e=y.createElement(r),r==="select"&&(y=e,i.multiple?y.multiple=!0:i.size&&(y.size=i.size))):e=y.createElementNS(e,r),e[fs]=t,e[qm]=i,D3(e,t,!1,!1),t.stateNode=e;e:{switch(y=qw(r,i),r){case"dialog":Xr("cancel",e),Xr("close",e),c=i;break;case"iframe":case"object":case"embed":Xr("load",e),c=i;break;case"video":case"audio":for(c=0;c<fm.length;c++)Xr(fm[c],e);c=i;break;case"source":Xr("error",e),c=i;break;case"img":case"image":case"link":Xr("error",e),Xr("load",e),c=i;break;case"details":Xr("toggle",e),c=i;break;case"input":tA(e,i),c=$w(e,i),Xr("invalid",e);break;case"option":c=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},c=fi({},i,{value:void 0}),Xr("invalid",e);break;case"textarea":rA(e,i),c=jw(e,i),Xr("invalid",e);break;default:c=i}Ww(r,c),a=c;for(d in a)if(a.hasOwnProperty(d)){var b=a[d];d==="style"?hL(e,b):d==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&uL(e,b)):d==="children"?typeof b=="string"?(r!=="textarea"||b!=="")&&Fm(e,b):typeof b=="number"&&Fm(e,""+b):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Om.hasOwnProperty(d)?b!=null&&d==="onScroll"&&Xr("scroll",e):b!=null&&SS(e,d,b,y))}switch(r){case"input":w0(e),nA(e,i,!1);break;case"textarea":w0(e),iA(e);break;case"option":i.value!=null&&e.setAttribute("value",""+dc(i.value));break;case"select":e.multiple=!!i.multiple,d=i.value,d!=null?Eh(e,!!i.multiple,d,!1):i.defaultValue!=null&&Eh(e,!!i.multiple,i.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=L_)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ho(t),null;case 6:if(e&&t.stateNode!=null)O3(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(Wt(166));if(r=Mu(Zm.current),Mu(ys.current),I0(t)){if(i=t.stateNode,r=t.memoizedProps,i[fs]=t,(d=i.nodeValue!==r)&&(e=Zo,e!==null))switch(e.tag){case 3:R0(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&R0(i.nodeValue,r,(e.mode&1)!==0)}d&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[fs]=t,t.stateNode=i}return ho(t),null;case 13:if(Qr(di),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ii&&Ho!==null&&t.mode&1&&!(t.flags&128))JL(),Bh(),t.flags|=98560,d=!1;else if(d=I0(t),i!==null&&i.dehydrated!==null){if(e===null){if(!d)throw Error(Wt(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(Wt(317));d[fs]=t}else Bh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ho(t),d=!1}else Na!==null&&(C2(Na),Na=null),d=!0;if(!d)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||di.current&1?Oi===0&&(Oi=3):oE())),t.updateQueue!==null&&(t.flags|=4),ho(t),null);case 4:return $h(),_2(e,t),e===null&&Gm(t.stateNode.containerInfo),ho(t),null;case 10:return VS(t.type._context),ho(t),null;case 17:return Do(t.type)&&D_(),ho(t),null;case 19:if(Qr(di),d=t.memoizedState,d===null)return ho(t),null;if(i=(t.flags&128)!==0,y=d.rendering,y===null)if(i)Up(d,!1);else{if(Oi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(y=U_(e),y!==null){for(t.flags|=128,Up(d,!1),i=y.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)d=r,e=i,d.flags&=14680066,y=d.alternate,y===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=y.childLanes,d.lanes=y.lanes,d.child=y.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=y.memoizedProps,d.memoizedState=y.memoizedState,d.updateQueue=y.updateQueue,d.type=y.type,e=y.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Gr(di,di.current&1|2),t.child}e=e.sibling}d.tail!==null&&bi()>Vh&&(t.flags|=128,i=!0,Up(d,!1),t.lanes=4194304)}else{if(!i)if(e=U_(y),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Up(d,!0),d.tail===null&&d.tailMode==="hidden"&&!y.alternate&&!ii)return ho(t),null}else 2*bi()-d.renderingStartTime>Vh&&r!==1073741824&&(t.flags|=128,i=!0,Up(d,!1),t.lanes=4194304);d.isBackwards?(y.sibling=t.child,t.child=y):(r=d.last,r!==null?r.sibling=y:t.child=y,d.last=y)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=bi(),t.sibling=null,r=di.current,Gr(di,i?r&1|2:r&1),t):(ho(t),null);case 22:case 23:return iE(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Wo&1073741824&&(ho(t),t.subtreeFlags&6&&(t.flags|=8192)):ho(t),null;case 24:return null;case 25:return null}throw Error(Wt(156,t.tag))}function PN(e,t){switch(BS(t),t.tag){case 1:return Do(t.type)&&D_(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return $h(),Qr(Lo),Qr(mo),HS(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return qS(t),null;case 13:if(Qr(di),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Wt(340));Bh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Qr(di),null;case 4:return $h(),null;case 10:return VS(t.type._context),null;case 22:case 23:return iE(),null;case 24:return null;default:return null}}var D0=!1,po=!1,LN=typeof WeakSet=="function"?WeakSet:Set,_n=null;function _h(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){vi(e,t,i)}else r.current=null}function v2(e,t,r){try{r()}catch(i){vi(e,t,i)}}var HA=!1;function DN(e,t){if(n2=R_,e=$L(),OS(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var c=i.anchorOffset,d=i.focusNode;i=i.focusOffset;try{r.nodeType,d.nodeType}catch{r=null;break e}var y=0,a=-1,b=-1,S=0,k=0,P=e,O=null;t:for(;;){for(var G;P!==r||c!==0&&P.nodeType!==3||(a=y+c),P!==d||i!==0&&P.nodeType!==3||(b=y+i),P.nodeType===3&&(y+=P.nodeValue.length),(G=P.firstChild)!==null;)O=P,P=G;for(;;){if(P===e)break t;if(O===r&&++S===c&&(a=y),O===d&&++k===i&&(b=y),(G=P.nextSibling)!==null)break;P=O,O=P.parentNode}P=G}r=a===-1||b===-1?null:{start:a,end:b}}else r=null}r=r||{start:0,end:0}}else r=null;for(r2={focusedElem:e,selectionRange:r},R_=!1,_n=t;_n!==null;)if(t=_n,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,_n=e;else for(;_n!==null;){t=_n;try{var F=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(F!==null){var q=F.memoizedProps,ce=F.memoizedState,B=t.stateNode,U=B.getSnapshotBeforeUpdate(t.elementType===t.type?q:Oa(t.type,q),ce);B.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var Z=t.stateNode.containerInfo;Z.nodeType===1?Z.textContent="":Z.nodeType===9&&Z.documentElement&&Z.removeChild(Z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Wt(163))}}catch(J){vi(t,t.return,J)}if(e=t.sibling,e!==null){e.return=t.return,_n=e;break}_n=t.return}return F=HA,HA=!1,F}function Em(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var c=i=i.next;do{if((c.tag&e)===e){var d=c.destroy;c.destroy=void 0,d!==void 0&&v2(t,r,d)}c=c.next}while(c!==i)}}function Mv(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function x2(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function F3(e){var t=e.alternate;t!==null&&(e.alternate=null,F3(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[fs],delete t[qm],delete t[a2],delete t[gN],delete t[yN])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function B3(e){return e.tag===5||e.tag===3||e.tag===4}function ZA(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||B3(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function b2(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=L_));else if(i!==4&&(e=e.child,e!==null))for(b2(e,t,r),e=e.sibling;e!==null;)b2(e,t,r),e=e.sibling}function w2(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(w2(e,t,r),e=e.sibling;e!==null;)w2(e,t,r),e=e.sibling}var Yi=null,Ba=!1;function Vl(e,t,r){for(r=r.child;r!==null;)N3(e,t,r),r=r.sibling}function N3(e,t,r){if(gs&&typeof gs.onCommitFiberUnmount=="function")try{gs.onCommitFiberUnmount(vv,r)}catch{}switch(r.tag){case 5:po||_h(r,t);case 6:var i=Yi,c=Ba;Yi=null,Vl(e,t,r),Yi=i,Ba=c,Yi!==null&&(Ba?(e=Yi,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Yi.removeChild(r.stateNode));break;case 18:Yi!==null&&(Ba?(e=Yi,r=r.stateNode,e.nodeType===8?Rb(e.parentNode,r):e.nodeType===1&&Rb(e,r),Um(e)):Rb(Yi,r.stateNode));break;case 4:i=Yi,c=Ba,Yi=r.stateNode.containerInfo,Ba=!0,Vl(e,t,r),Yi=i,Ba=c;break;case 0:case 11:case 14:case 15:if(!po&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){c=i=i.next;do{var d=c,y=d.destroy;d=d.tag,y!==void 0&&(d&2||d&4)&&v2(r,t,y),c=c.next}while(c!==i)}Vl(e,t,r);break;case 1:if(!po&&(_h(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(a){vi(r,t,a)}Vl(e,t,r);break;case 21:Vl(e,t,r);break;case 22:r.mode&1?(po=(i=po)||r.memoizedState!==null,Vl(e,t,r),po=i):Vl(e,t,r);break;default:Vl(e,t,r)}}function XA(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new LN),t.forEach(function(i){var c=jN.bind(null,e,i);r.has(i)||(r.add(i),i.then(c,c))})}}function La(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var c=r[i];try{var d=e,y=t,a=y;e:for(;a!==null;){switch(a.tag){case 5:Yi=a.stateNode,Ba=!1;break e;case 3:Yi=a.stateNode.containerInfo,Ba=!0;break e;case 4:Yi=a.stateNode.containerInfo,Ba=!0;break e}a=a.return}if(Yi===null)throw Error(Wt(160));N3(d,y,c),Yi=null,Ba=!1;var b=c.alternate;b!==null&&(b.return=null),c.return=null}catch(S){vi(c,t,S)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)$3(t,e),t=t.sibling}function $3(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(La(t,e),ls(e),i&4){try{Em(3,e,e.return),Mv(3,e)}catch(q){vi(e,e.return,q)}try{Em(5,e,e.return)}catch(q){vi(e,e.return,q)}}break;case 1:La(t,e),ls(e),i&512&&r!==null&&_h(r,r.return);break;case 5:if(La(t,e),ls(e),i&512&&r!==null&&_h(r,r.return),e.flags&32){var c=e.stateNode;try{Fm(c,"")}catch(q){vi(e,e.return,q)}}if(i&4&&(c=e.stateNode,c!=null)){var d=e.memoizedProps,y=r!==null?r.memoizedProps:d,a=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{a==="input"&&d.type==="radio"&&d.name!=null&&sL(c,d),qw(a,y);var S=qw(a,d);for(y=0;y<b.length;y+=2){var k=b[y],P=b[y+1];k==="style"?hL(c,P):k==="dangerouslySetInnerHTML"?uL(c,P):k==="children"?Fm(c,P):SS(c,k,P,S)}switch(a){case"input":Uw(c,d);break;case"textarea":lL(c,d);break;case"select":var O=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!d.multiple;var G=d.value;G!=null?Eh(c,!!d.multiple,G,!1):O!==!!d.multiple&&(d.defaultValue!=null?Eh(c,!!d.multiple,d.defaultValue,!0):Eh(c,!!d.multiple,d.multiple?[]:"",!1))}c[qm]=d}catch(q){vi(e,e.return,q)}}break;case 6:if(La(t,e),ls(e),i&4){if(e.stateNode===null)throw Error(Wt(162));c=e.stateNode,d=e.memoizedProps;try{c.nodeValue=d}catch(q){vi(e,e.return,q)}}break;case 3:if(La(t,e),ls(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{Um(t.containerInfo)}catch(q){vi(e,e.return,q)}break;case 4:La(t,e),ls(e);break;case 13:La(t,e),ls(e),c=e.child,c.flags&8192&&(d=c.memoizedState!==null,c.stateNode.isHidden=d,!d||c.alternate!==null&&c.alternate.memoizedState!==null||(nE=bi())),i&4&&XA(e);break;case 22:if(k=r!==null&&r.memoizedState!==null,e.mode&1?(po=(S=po)||k,La(t,e),po=S):La(t,e),ls(e),i&8192){if(S=e.memoizedState!==null,(e.stateNode.isHidden=S)&&!k&&e.mode&1)for(_n=e,k=e.child;k!==null;){for(P=_n=k;_n!==null;){switch(O=_n,G=O.child,O.tag){case 0:case 11:case 14:case 15:Em(4,O,O.return);break;case 1:_h(O,O.return);var F=O.stateNode;if(typeof F.componentWillUnmount=="function"){i=O,r=O.return;try{t=i,F.props=t.memoizedProps,F.state=t.memoizedState,F.componentWillUnmount()}catch(q){vi(i,r,q)}}break;case 5:_h(O,O.return);break;case 22:if(O.memoizedState!==null){YA(P);continue}}G!==null?(G.return=O,_n=G):YA(P)}k=k.sibling}e:for(k=null,P=e;;){if(P.tag===5){if(k===null){k=P;try{c=P.stateNode,S?(d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(a=P.stateNode,b=P.memoizedProps.style,y=b!=null&&b.hasOwnProperty("display")?b.display:null,a.style.display=dL("display",y))}catch(q){vi(e,e.return,q)}}}else if(P.tag===6){if(k===null)try{P.stateNode.nodeValue=S?"":P.memoizedProps}catch(q){vi(e,e.return,q)}}else if((P.tag!==22&&P.tag!==23||P.memoizedState===null||P===e)&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===e)break e;for(;P.sibling===null;){if(P.return===null||P.return===e)break e;k===P&&(k=null),P=P.return}k===P&&(k=null),P.sibling.return=P.return,P=P.sibling}}break;case 19:La(t,e),ls(e),i&4&&XA(e);break;case 21:break;default:La(t,e),ls(e)}}function ls(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(B3(r)){var i=r;break e}r=r.return}throw Error(Wt(160))}switch(i.tag){case 5:var c=i.stateNode;i.flags&32&&(Fm(c,""),i.flags&=-33);var d=ZA(e);w2(e,d,c);break;case 3:case 4:var y=i.stateNode.containerInfo,a=ZA(e);b2(e,a,y);break;default:throw Error(Wt(161))}}catch(b){vi(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function zN(e,t,r){_n=e,U3(e)}function U3(e,t,r){for(var i=(e.mode&1)!==0;_n!==null;){var c=_n,d=c.child;if(c.tag===22&&i){var y=c.memoizedState!==null||D0;if(!y){var a=c.alternate,b=a!==null&&a.memoizedState!==null||po;a=D0;var S=po;if(D0=y,(po=b)&&!S)for(_n=c;_n!==null;)y=_n,b=y.child,y.tag===22&&y.memoizedState!==null?QA(c):b!==null?(b.return=y,_n=b):QA(c);for(;d!==null;)_n=d,U3(d),d=d.sibling;_n=c,D0=a,po=S}KA(e)}else c.subtreeFlags&8772&&d!==null?(d.return=c,_n=d):KA(e)}}function KA(e){for(;_n!==null;){var t=_n;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:po||Mv(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!po)if(r===null)i.componentDidMount();else{var c=t.elementType===t.type?r.memoizedProps:Oa(t.type,r.memoizedProps);i.componentDidUpdate(c,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&LA(t,d,i);break;case 3:var y=t.updateQueue;if(y!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}LA(t,y,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&r.focus();break;case"img":b.src&&(r.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var S=t.alternate;if(S!==null){var k=S.memoizedState;if(k!==null){var P=k.dehydrated;P!==null&&Um(P)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Wt(163))}po||t.flags&512&&x2(t)}catch(O){vi(t,t.return,O)}}if(t===e){_n=null;break}if(r=t.sibling,r!==null){r.return=t.return,_n=r;break}_n=t.return}}function YA(e){for(;_n!==null;){var t=_n;if(t===e){_n=null;break}var r=t.sibling;if(r!==null){r.return=t.return,_n=r;break}_n=t.return}}function QA(e){for(;_n!==null;){var t=_n;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Mv(4,t)}catch(b){vi(t,r,b)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var c=t.return;try{i.componentDidMount()}catch(b){vi(t,c,b)}}var d=t.return;try{x2(t)}catch(b){vi(t,d,b)}break;case 5:var y=t.return;try{x2(t)}catch(b){vi(t,y,b)}}}catch(b){vi(t,t.return,b)}if(t===e){_n=null;break}var a=t.sibling;if(a!==null){a.return=t.return,_n=a;break}_n=t.return}}var ON=Math.ceil,G_=rl.ReactCurrentDispatcher,eE=rl.ReactCurrentOwner,ma=rl.ReactCurrentBatchConfig,xr=0,Wi=null,Mi=null,eo=0,Wo=0,vh=_c(0),Oi=0,Qm=null,Bu=0,Av=0,tE=0,Tm=null,Io=null,nE=0,Vh=1/0,Ns=null,W_=!1,S2=null,ac=null,z0=!1,ec=null,q_=0,Cm=0,E2=null,p_=-1,m_=0;function xo(){return xr&6?bi():p_!==-1?p_:p_=bi()}function sc(e){return e.mode&1?xr&2&&eo!==0?eo&-eo:vN.transition!==null?(m_===0&&(m_=EL()),m_):(e=Br,e!==0||(e=window.event,e=e===void 0?16:IL(e.type)),e):1}function Va(e,t,r,i){if(50<Cm)throw Cm=0,E2=null,Error(Wt(185));dg(e,r,i),(!(xr&2)||e!==Wi)&&(e===Wi&&(!(xr&2)&&(Av|=r),Oi===4&&Yl(e,eo)),zo(e,i),r===1&&xr===0&&!(t.mode&1)&&(Vh=bi()+500,Ev&&vc()))}function zo(e,t){var r=e.callbackNode;v6(e,t);var i=k_(e,e===Wi?eo:0);if(i===0)r!==null&&sA(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&sA(r),t===1)e.tag===0?_N(JA.bind(null,e)):KL(JA.bind(null,e)),pN(function(){!(xr&6)&&vc()}),r=null;else{switch(TL(i)){case 1:r=AS;break;case 4:r=wL;break;case 16:r=A_;break;case 536870912:r=SL;break;default:r=A_}r=X3(r,V3.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function V3(e,t){if(p_=-1,m_=0,xr&6)throw Error(Wt(327));var r=e.callbackNode;if(kh()&&e.callbackNode!==r)return null;var i=k_(e,e===Wi?eo:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=H_(e,i);else{t=i;var c=xr;xr|=2;var d=G3();(Wi!==e||eo!==t)&&(Ns=null,Vh=bi()+500,Iu(e,t));do try{NN();break}catch(a){j3(e,a)}while(1);US(),G_.current=d,xr=c,Mi!==null?t=0:(Wi=null,eo=0,t=Oi)}if(t!==0){if(t===2&&(c=Yw(e),c!==0&&(i=c,t=T2(e,c))),t===1)throw r=Qm,Iu(e,0),Yl(e,i),zo(e,bi()),r;if(t===6)Yl(e,i);else{if(c=e.current.alternate,!(i&30)&&!FN(c)&&(t=H_(e,i),t===2&&(d=Yw(e),d!==0&&(i=d,t=T2(e,d))),t===1))throw r=Qm,Iu(e,0),Yl(e,i),zo(e,bi()),r;switch(e.finishedWork=c,e.finishedLanes=i,t){case 0:case 1:throw Error(Wt(345));case 2:_u(e,Io,Ns);break;case 3:if(Yl(e,i),(i&130023424)===i&&(t=nE+500-bi(),10<t)){if(k_(e,0)!==0)break;if(c=e.suspendedLanes,(c&i)!==i){xo(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=o2(_u.bind(null,e,Io,Ns),t);break}_u(e,Io,Ns);break;case 4:if(Yl(e,i),(i&4194240)===i)break;for(t=e.eventTimes,c=-1;0<i;){var y=31-Ua(i);d=1<<y,y=t[y],y>c&&(c=y),i&=~d}if(i=c,i=bi()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*ON(i/1960))-i,10<i){e.timeoutHandle=o2(_u.bind(null,e,Io,Ns),i);break}_u(e,Io,Ns);break;case 5:_u(e,Io,Ns);break;default:throw Error(Wt(329))}}}return zo(e,bi()),e.callbackNode===r?V3.bind(null,e):null}function T2(e,t){var r=Tm;return e.current.memoizedState.isDehydrated&&(Iu(e,t).flags|=256),e=H_(e,t),e!==2&&(t=Io,Io=r,t!==null&&C2(t)),e}function C2(e){Io===null?Io=e:Io.push.apply(Io,e)}function FN(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var c=r[i],d=c.getSnapshot;c=c.value;try{if(!ja(d(),c))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yl(e,t){for(t&=~tE,t&=~Av,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ua(t),i=1<<r;e[r]=-1,t&=~i}}function JA(e){if(xr&6)throw Error(Wt(327));kh();var t=k_(e,0);if(!(t&1))return zo(e,bi()),null;var r=H_(e,t);if(e.tag!==0&&r===2){var i=Yw(e);i!==0&&(t=i,r=T2(e,i))}if(r===1)throw r=Qm,Iu(e,0),Yl(e,t),zo(e,bi()),r;if(r===6)throw Error(Wt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_u(e,Io,Ns),zo(e,bi()),null}function rE(e,t){var r=xr;xr|=1;try{return e(t)}finally{xr=r,xr===0&&(Vh=bi()+500,Ev&&vc())}}function Nu(e){ec!==null&&ec.tag===0&&!(xr&6)&&kh();var t=xr;xr|=1;var r=ma.transition,i=Br;try{if(ma.transition=null,Br=1,e)return e()}finally{Br=i,ma.transition=r,xr=t,!(xr&6)&&vc()}}function iE(){Wo=vh.current,Qr(vh)}function Iu(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,fN(r)),Mi!==null)for(r=Mi.return;r!==null;){var i=r;switch(BS(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&D_();break;case 3:$h(),Qr(Lo),Qr(mo),HS();break;case 5:qS(i);break;case 4:$h();break;case 13:Qr(di);break;case 19:Qr(di);break;case 10:VS(i.type._context);break;case 22:case 23:iE()}r=r.return}if(Wi=e,Mi=e=lc(e.current,null),eo=Wo=t,Oi=0,Qm=null,tE=Av=Bu=0,Io=Tm=null,Cu!==null){for(t=0;t<Cu.length;t++)if(r=Cu[t],i=r.interleaved,i!==null){r.interleaved=null;var c=i.next,d=r.pending;if(d!==null){var y=d.next;d.next=c,i.next=y}r.pending=i}Cu=null}return e}function j3(e,t){do{var r=Mi;try{if(US(),d_.current=j_,V_){for(var i=hi.memoizedState;i!==null;){var c=i.queue;c!==null&&(c.pending=null),i=i.next}V_=!1}if(Fu=0,Gi=zi=hi=null,Sm=!1,Xm=0,eE.current=null,r===null||r.return===null){Oi=1,Qm=t,Mi=null;break}e:{var d=e,y=r.return,a=r,b=t;if(t=eo,a.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var S=b,k=a,P=k.tag;if(!(k.mode&1)&&(P===0||P===11||P===15)){var O=k.alternate;O?(k.updateQueue=O.updateQueue,k.memoizedState=O.memoizedState,k.lanes=O.lanes):(k.updateQueue=null,k.memoizedState=null)}var G=$A(y);if(G!==null){G.flags&=-257,UA(G,y,a,d,t),G.mode&1&&NA(d,S,t),t=G,b=S;var F=t.updateQueue;if(F===null){var q=new Set;q.add(b),t.updateQueue=q}else F.add(b);break e}else{if(!(t&1)){NA(d,S,t),oE();break e}b=Error(Wt(426))}}else if(ii&&a.mode&1){var ce=$A(y);if(ce!==null){!(ce.flags&65536)&&(ce.flags|=256),UA(ce,y,a,d,t),NS(Uh(b,a));break e}}d=b=Uh(b,a),Oi!==4&&(Oi=2),Tm===null?Tm=[d]:Tm.push(d),d=y;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var B=C3(d,b,t);PA(d,B);break e;case 1:a=b;var U=d.type,Z=d.stateNode;if(!(d.flags&128)&&(typeof U.getDerivedStateFromError=="function"||Z!==null&&typeof Z.componentDidCatch=="function"&&(ac===null||!ac.has(Z)))){d.flags|=65536,t&=-t,d.lanes|=t;var J=M3(d,a,t);PA(d,J);break e}}d=d.return}while(d!==null)}q3(r)}catch(Y){t=Y,Mi===r&&r!==null&&(Mi=r=r.return);continue}break}while(1)}function G3(){var e=G_.current;return G_.current=j_,e===null?j_:e}function oE(){(Oi===0||Oi===3||Oi===2)&&(Oi=4),Wi===null||!(Bu&268435455)&&!(Av&268435455)||Yl(Wi,eo)}function H_(e,t){var r=xr;xr|=2;var i=G3();(Wi!==e||eo!==t)&&(Ns=null,Iu(e,t));do try{BN();break}catch(c){j3(e,c)}while(1);if(US(),xr=r,G_.current=i,Mi!==null)throw Error(Wt(261));return Wi=null,eo=0,Oi}function BN(){for(;Mi!==null;)W3(Mi)}function NN(){for(;Mi!==null&&!u6();)W3(Mi)}function W3(e){var t=Z3(e.alternate,e,Wo);e.memoizedProps=e.pendingProps,t===null?q3(e):Mi=t,eE.current=null}function q3(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=PN(r,t),r!==null){r.flags&=32767,Mi=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Oi=6,Mi=null;return}}else if(r=IN(r,t,Wo),r!==null){Mi=r;return}if(t=t.sibling,t!==null){Mi=t;return}Mi=t=e}while(t!==null);Oi===0&&(Oi=5)}function _u(e,t,r){var i=Br,c=ma.transition;try{ma.transition=null,Br=1,$N(e,t,r,i)}finally{ma.transition=c,Br=i}return null}function $N(e,t,r,i){do kh();while(ec!==null);if(xr&6)throw Error(Wt(327));r=e.finishedWork;var c=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Wt(177));e.callbackNode=null,e.callbackPriority=0;var d=r.lanes|r.childLanes;if(x6(e,d),e===Wi&&(Mi=Wi=null,eo=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||z0||(z0=!0,X3(A_,function(){return kh(),null})),d=(r.flags&15990)!==0,r.subtreeFlags&15990||d){d=ma.transition,ma.transition=null;var y=Br;Br=1;var a=xr;xr|=4,eE.current=null,DN(e,r),$3(r,e),aN(r2),R_=!!n2,r2=n2=null,e.current=r,zN(r),d6(),xr=a,Br=y,ma.transition=d}else e.current=r;if(z0&&(z0=!1,ec=e,q_=c),d=e.pendingLanes,d===0&&(ac=null),p6(r.stateNode),zo(e,bi()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)c=t[r],i(c.value,{componentStack:c.stack,digest:c.digest});if(W_)throw W_=!1,e=S2,S2=null,e;return q_&1&&e.tag!==0&&kh(),d=e.pendingLanes,d&1?e===E2?Cm++:(Cm=0,E2=e):Cm=0,vc(),null}function kh(){if(ec!==null){var e=TL(q_),t=ma.transition,r=Br;try{if(ma.transition=null,Br=16>e?16:e,ec===null)var i=!1;else{if(e=ec,ec=null,q_=0,xr&6)throw Error(Wt(331));var c=xr;for(xr|=4,_n=e.current;_n!==null;){var d=_n,y=d.child;if(_n.flags&16){var a=d.deletions;if(a!==null){for(var b=0;b<a.length;b++){var S=a[b];for(_n=S;_n!==null;){var k=_n;switch(k.tag){case 0:case 11:case 15:Em(8,k,d)}var P=k.child;if(P!==null)P.return=k,_n=P;else for(;_n!==null;){k=_n;var O=k.sibling,G=k.return;if(F3(k),k===S){_n=null;break}if(O!==null){O.return=G,_n=O;break}_n=G}}}var F=d.alternate;if(F!==null){var q=F.child;if(q!==null){F.child=null;do{var ce=q.sibling;q.sibling=null,q=ce}while(q!==null)}}_n=d}}if(d.subtreeFlags&2064&&y!==null)y.return=d,_n=y;else e:for(;_n!==null;){if(d=_n,d.flags&2048)switch(d.tag){case 0:case 11:case 15:Em(9,d,d.return)}var B=d.sibling;if(B!==null){B.return=d.return,_n=B;break e}_n=d.return}}var U=e.current;for(_n=U;_n!==null;){y=_n;var Z=y.child;if(y.subtreeFlags&2064&&Z!==null)Z.return=y,_n=Z;else e:for(y=U;_n!==null;){if(a=_n,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Mv(9,a)}}catch(Y){vi(a,a.return,Y)}if(a===y){_n=null;break e}var J=a.sibling;if(J!==null){J.return=a.return,_n=J;break e}_n=a.return}}if(xr=c,vc(),gs&&typeof gs.onPostCommitFiberRoot=="function")try{gs.onPostCommitFiberRoot(vv,e)}catch{}i=!0}return i}finally{Br=r,ma.transition=t}}return!1}function ek(e,t,r){t=Uh(r,t),t=C3(e,t,1),e=oc(e,t,1),t=xo(),e!==null&&(dg(e,1,t),zo(e,t))}function vi(e,t,r){if(e.tag===3)ek(e,e,r);else for(;t!==null;){if(t.tag===3){ek(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ac===null||!ac.has(i))){e=Uh(r,e),e=M3(t,e,1),t=oc(t,e,1),e=xo(),t!==null&&(dg(t,1,e),zo(t,e));break}}t=t.return}}function UN(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=xo(),e.pingedLanes|=e.suspendedLanes&r,Wi===e&&(eo&r)===r&&(Oi===4||Oi===3&&(eo&130023424)===eo&&500>bi()-nE?Iu(e,0):tE|=r),zo(e,t)}function H3(e,t){t===0&&(e.mode&1?(t=T0,T0<<=1,!(T0&130023424)&&(T0=4194304)):t=1);var r=xo();e=Ks(e,t),e!==null&&(dg(e,t,r),zo(e,r))}function VN(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),H3(e,r)}function jN(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,c=e.memoizedState;c!==null&&(r=c.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(Wt(314))}i!==null&&i.delete(t),H3(e,r)}var Z3;Z3=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Lo.current)Po=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Po=!1,RN(e,t,r);Po=!!(e.flags&131072)}else Po=!1,ii&&t.flags&1048576&&YL(t,F_,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;f_(e,t),e=t.pendingProps;var c=Fh(t,mo.current);Ah(t,r),c=XS(null,t,i,e,c,r);var d=KS();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Do(i)?(d=!0,z_(t)):d=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,GS(t),c.updater=Tv,t.stateNode=c,c._reactInternals=t,h2(t,i,e,r),t=m2(null,t,i,!0,d,r)):(t.tag=0,ii&&d&&FS(t),vo(null,t,c,r),t=t.child),t;case 16:i=t.elementType;e:{switch(f_(e,t),e=t.pendingProps,c=i._init,i=c(i._payload),t.type=i,c=t.tag=WN(i),e=Oa(i,e),c){case 0:t=p2(null,t,i,e,r);break e;case 1:t=GA(null,t,i,e,r);break e;case 11:t=VA(null,t,i,e,r);break e;case 14:t=jA(null,t,i,Oa(i.type,e),r);break e}throw Error(Wt(306,i,""))}return t;case 0:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:Oa(i,c),p2(e,t,i,c,r);case 1:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:Oa(i,c),GA(e,t,i,c,r);case 3:e:{if(I3(t),e===null)throw Error(Wt(387));i=t.pendingProps,d=t.memoizedState,c=d.element,t3(e,t),$_(t,i,null,r);var y=t.memoizedState;if(i=y.element,d.isDehydrated)if(d={element:i,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){c=Uh(Error(Wt(423)),t),t=WA(e,t,i,r,c);break e}else if(i!==c){c=Uh(Error(Wt(424)),t),t=WA(e,t,i,r,c);break e}else for(Ho=ic(t.stateNode.containerInfo.firstChild),Zo=t,ii=!0,Na=null,r=o3(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Bh(),i===c){t=Ys(e,t,r);break e}vo(e,t,i,r)}t=t.child}return t;case 5:return a3(t),e===null&&c2(t),i=t.type,c=t.pendingProps,d=e!==null?e.memoizedProps:null,y=c.children,i2(i,c)?y=null:d!==null&&i2(i,d)&&(t.flags|=32),R3(e,t),vo(e,t,y,r),t.child;case 6:return e===null&&c2(t),null;case 13:return P3(e,t,r);case 4:return WS(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Nh(t,null,i,r):vo(e,t,i,r),t.child;case 11:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:Oa(i,c),VA(e,t,i,c,r);case 7:return vo(e,t,t.pendingProps,r),t.child;case 8:return vo(e,t,t.pendingProps.children,r),t.child;case 12:return vo(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,c=t.pendingProps,d=t.memoizedProps,y=c.value,Gr(B_,i._currentValue),i._currentValue=y,d!==null)if(ja(d.value,y)){if(d.children===c.children&&!Lo.current){t=Ys(e,t,r);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var a=d.dependencies;if(a!==null){y=d.child;for(var b=a.firstContext;b!==null;){if(b.context===i){if(d.tag===1){b=qs(-1,r&-r),b.tag=2;var S=d.updateQueue;if(S!==null){S=S.shared;var k=S.pending;k===null?b.next=b:(b.next=k.next,k.next=b),S.pending=b}}d.lanes|=r,b=d.alternate,b!==null&&(b.lanes|=r),u2(d.return,r,t),a.lanes|=r;break}b=b.next}}else if(d.tag===10)y=d.type===t.type?null:d.child;else if(d.tag===18){if(y=d.return,y===null)throw Error(Wt(341));y.lanes|=r,a=y.alternate,a!==null&&(a.lanes|=r),u2(y,r,t),y=d.sibling}else y=d.child;if(y!==null)y.return=d;else for(y=d;y!==null;){if(y===t){y=null;break}if(d=y.sibling,d!==null){d.return=y.return,y=d;break}y=y.return}d=y}vo(e,t,c.children,r),t=t.child}return t;case 9:return c=t.type,i=t.pendingProps.children,Ah(t,r),c=ga(c),i=i(c),t.flags|=1,vo(e,t,i,r),t.child;case 14:return i=t.type,c=Oa(i,t.pendingProps),c=Oa(i.type,c),jA(e,t,i,c,r);case 15:return A3(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:Oa(i,c),f_(e,t),t.tag=1,Do(i)?(e=!0,z_(t)):e=!1,Ah(t,r),r3(t,i,c),h2(t,i,c,r),m2(null,t,i,!0,e,r);case 19:return L3(e,t,r);case 22:return k3(e,t,r)}throw Error(Wt(156,t.tag))};function X3(e,t){return bL(e,t)}function GN(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fa(e,t,r,i){return new GN(e,t,r,i)}function aE(e){return e=e.prototype,!(!e||!e.isReactComponent)}function WN(e){if(typeof e=="function")return aE(e)?1:0;if(e!=null){if(e=e.$$typeof,e===TS)return 11;if(e===CS)return 14}return 2}function lc(e,t){var r=e.alternate;return r===null?(r=fa(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function g_(e,t,r,i,c,d){var y=2;if(i=e,typeof e=="function")aE(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case ch:return Pu(r.children,c,d,t);case ES:y=8,c|=8;break;case Ow:return e=fa(12,r,t,c|2),e.elementType=Ow,e.lanes=d,e;case Fw:return e=fa(13,r,t,c),e.elementType=Fw,e.lanes=d,e;case Bw:return e=fa(19,r,t,c),e.elementType=Bw,e.lanes=d,e;case iL:return kv(r,c,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case nL:y=10;break e;case rL:y=9;break e;case TS:y=11;break e;case CS:y=14;break e;case Wl:y=16,i=null;break e}throw Error(Wt(130,e==null?e:typeof e,""))}return t=fa(y,r,t,c),t.elementType=e,t.type=i,t.lanes=d,t}function Pu(e,t,r,i){return e=fa(7,e,i,t),e.lanes=r,e}function kv(e,t,r,i){return e=fa(22,e,i,t),e.elementType=iL,e.lanes=r,e.stateNode={isHidden:!1},e}function Bb(e,t,r){return e=fa(6,e,null,t),e.lanes=r,e}function Nb(e,t,r){return t=fa(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qN(e,t,r,i,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vb(0),this.expirationTimes=vb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vb(0),this.identifierPrefix=i,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function sE(e,t,r,i,c,d,y,a,b){return e=new qN(e,t,r,a,b),t===1?(t=1,d===!0&&(t|=8)):t=0,d=fa(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},GS(d),e}function HN(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:lh,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function K3(e){if(!e)return hc;e=e._reactInternals;e:{if(Hu(e)!==e||e.tag!==1)throw Error(Wt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Do(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Wt(171))}if(e.tag===1){var r=e.type;if(Do(r))return XL(e,r,t)}return t}function Y3(e,t,r,i,c,d,y,a,b){return e=sE(r,i,!0,e,c,d,y,a,b),e.context=K3(null),r=e.current,i=xo(),c=sc(r),d=qs(i,c),d.callback=t??null,oc(r,d,c),e.current.lanes=c,dg(e,c,i),zo(e,i),e}function Rv(e,t,r,i){var c=t.current,d=xo(),y=sc(c);return r=K3(r),t.context===null?t.context=r:t.pendingContext=r,t=qs(d,y),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=oc(c,t,y),e!==null&&(Va(e,c,y,d),u_(e,c,y)),y}function Z_(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function tk(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function lE(e,t){tk(e,t),(e=e.alternate)&&tk(e,t)}function ZN(){return null}var Q3=typeof reportError=="function"?reportError:function(e){console.error(e)};function cE(e){this._internalRoot=e}Iv.prototype.render=cE.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Wt(409));Rv(e,t,null,null)};Iv.prototype.unmount=cE.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Nu(function(){Rv(null,e,null,null)}),t[Xs]=null}};function Iv(e){this._internalRoot=e}Iv.prototype.unstable_scheduleHydration=function(e){if(e){var t=AL();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Kl.length&&t!==0&&t<Kl[r].priority;r++);Kl.splice(r,0,e),r===0&&RL(e)}};function uE(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Pv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function nk(){}function XN(e,t,r,i,c){if(c){if(typeof i=="function"){var d=i;i=function(){var S=Z_(y);d.call(S)}}var y=Y3(t,i,e,0,null,!1,!1,"",nk);return e._reactRootContainer=y,e[Xs]=y.current,Gm(e.nodeType===8?e.parentNode:e),Nu(),y}for(;c=e.lastChild;)e.removeChild(c);if(typeof i=="function"){var a=i;i=function(){var S=Z_(b);a.call(S)}}var b=sE(e,0,!1,null,null,!1,!1,"",nk);return e._reactRootContainer=b,e[Xs]=b.current,Gm(e.nodeType===8?e.parentNode:e),Nu(function(){Rv(t,b,r,i)}),b}function Lv(e,t,r,i,c){var d=r._reactRootContainer;if(d){var y=d;if(typeof c=="function"){var a=c;c=function(){var b=Z_(y);a.call(b)}}Rv(t,y,e,c)}else y=XN(r,t,e,c,i);return Z_(y)}CL=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=hm(t.pendingLanes);r!==0&&(kS(t,r|1),zo(t,bi()),!(xr&6)&&(Vh=bi()+500,vc()))}break;case 13:Nu(function(){var i=Ks(e,1);if(i!==null){var c=xo();Va(i,e,1,c)}}),lE(e,1)}};RS=function(e){if(e.tag===13){var t=Ks(e,134217728);if(t!==null){var r=xo();Va(t,e,134217728,r)}lE(e,134217728)}};ML=function(e){if(e.tag===13){var t=sc(e),r=Ks(e,t);if(r!==null){var i=xo();Va(r,e,t,i)}lE(e,t)}};AL=function(){return Br};kL=function(e,t){var r=Br;try{return Br=e,t()}finally{Br=r}};Zw=function(e,t,r){switch(t){case"input":if(Uw(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var c=Sv(i);if(!c)throw Error(Wt(90));aL(i),Uw(i,c)}}}break;case"textarea":lL(e,r);break;case"select":t=r.value,t!=null&&Eh(e,!!r.multiple,t,!1)}};mL=rE;gL=Nu;var KN={usingClientEntryPoint:!1,Events:[fg,fh,Sv,fL,pL,rE]},Vp={findFiberByHostInstance:Tu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},YN={bundleType:Vp.bundleType,version:Vp.version,rendererPackageName:Vp.rendererPackageName,rendererConfig:Vp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=vL(e),e===null?null:e.stateNode},findFiberByHostInstance:Vp.findFiberByHostInstance||ZN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var O0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!O0.isDisabled&&O0.supportsFiber)try{vv=O0.inject(YN),gs=O0}catch{}}Qo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KN;Qo.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uE(t))throw Error(Wt(200));return HN(e,t,null,r)};Qo.createRoot=function(e,t){if(!uE(e))throw Error(Wt(299));var r=!1,i="",c=Q3;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=sE(e,1,!1,null,null,r,!1,i,c),e[Xs]=t.current,Gm(e.nodeType===8?e.parentNode:e),new cE(t)};Qo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Wt(188)):(e=Object.keys(e).join(","),Error(Wt(268,e)));return e=vL(t),e=e===null?null:e.stateNode,e};Qo.flushSync=function(e){return Nu(e)};Qo.hydrate=function(e,t,r){if(!Pv(t))throw Error(Wt(200));return Lv(null,e,t,!0,r)};Qo.hydrateRoot=function(e,t,r){if(!uE(e))throw Error(Wt(405));var i=r!=null&&r.hydratedSources||null,c=!1,d="",y=Q3;if(r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onRecoverableError!==void 0&&(y=r.onRecoverableError)),t=Y3(t,null,e,1,r??null,c,!1,d,y),e[Xs]=t.current,Gm(e),i)for(e=0;e<i.length;e++)r=i[e],c=r._getVersion,c=c(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,c]:t.mutableSourceEagerHydrationData.push(r,c);return new Iv(t)};Qo.render=function(e,t,r){if(!Pv(t))throw Error(Wt(200));return Lv(null,e,t,!1,r)};Qo.unmountComponentAtNode=function(e){if(!Pv(e))throw Error(Wt(40));return e._reactRootContainer?(Nu(function(){Lv(null,null,e,!1,function(){e._reactRootContainer=null,e[Xs]=null})}),!0):!1};Qo.unstable_batchedUpdates=rE;Qo.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!Pv(r))throw Error(Wt(200));if(e==null||e._reactInternals===void 0)throw Error(Wt(38));return Lv(e,t,r,!1,i)};Qo.version="18.2.0-next-9e3b772b8-20220608";function J3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(J3)}catch(e){console.error(e)}}J3(),YP.exports=Qo;var fc=YP.exports;const xh=ef(fc);var rk=fc;Dw.createRoot=rk.createRoot,Dw.hydrateRoot=rk.hydrateRoot;/**
 * @remix-run/router v1.6.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tr(){return Tr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Tr.apply(this,arguments)}var Ti;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ti||(Ti={}));const ik="popstate";function QN(e){e===void 0&&(e={});function t(i,c){let{pathname:d,search:y,hash:a}=i.location;return Jm("",{pathname:d,search:y,hash:a},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function r(i,c){return typeof c=="string"?c:mg(c)}return e8(t,r,null,e)}function dr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function jh(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function JN(){return Math.random().toString(36).substr(2,8)}function ok(e,t){return{usr:e.state,key:e.key,idx:t}}function Jm(e,t,r,i){return r===void 0&&(r=null),Tr({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?il(t):t,{state:r,key:t&&t.key||i||JN()})}function mg(e){let{pathname:t="/",search:r="",hash:i=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function il(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function e8(e,t,r,i){i===void 0&&(i={});let{window:c=document.defaultView,v5Compat:d=!1}=i,y=c.history,a=Ti.Pop,b=null,S=k();S==null&&(S=0,y.replaceState(Tr({},y.state,{idx:S}),""));function k(){return(y.state||{idx:null}).idx}function P(){a=Ti.Pop;let ce=k(),B=ce==null?null:ce-S;S=ce,b&&b({action:a,location:q.location,delta:B})}function O(ce,B){a=Ti.Push;let U=Jm(q.location,ce,B);r&&r(U,ce),S=k()+1;let Z=ok(U,S),J=q.createHref(U);try{y.pushState(Z,"",J)}catch{c.location.assign(J)}d&&b&&b({action:a,location:q.location,delta:1})}function G(ce,B){a=Ti.Replace;let U=Jm(q.location,ce,B);r&&r(U,ce),S=k();let Z=ok(U,S),J=q.createHref(U);y.replaceState(Z,"",J),d&&b&&b({action:a,location:q.location,delta:0})}function F(ce){let B=c.location.origin!=="null"?c.location.origin:c.location.href,U=typeof ce=="string"?ce:mg(ce);return dr(B,"No window.location.(origin|href) available to create URL for href: "+U),new URL(U,B)}let q={get action(){return a},get location(){return e(c,y)},listen(ce){if(b)throw new Error("A history only accepts one active listener");return c.addEventListener(ik,P),b=ce,()=>{c.removeEventListener(ik,P),b=null}},createHref(ce){return t(c,ce)},createURL:F,encodeLocation(ce){let B=F(ce);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:O,replace:G,go(ce){return y.go(ce)}};return q}var Di;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Di||(Di={}));const t8=new Set(["lazy","caseSensitive","path","id","index","children"]);function n8(e){return e.index===!0}function eD(e,t,r,i){return r===void 0&&(r=[]),i===void 0&&(i={}),e.map((c,d)=>{let y=[...r,d],a=typeof c.id=="string"?c.id:y.join("-");if(dr(c.index!==!0||!c.children,"Cannot specify children on an index route"),dr(!i[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),n8(c)){let b=Tr({},c,t(c),{id:a});return i[a]=b,b}else{let b=Tr({},c,t(c),{id:a,children:void 0});return i[a]=b,c.children&&(b.children=eD(c.children,t,y,i)),b}})}function bh(e,t,r){r===void 0&&(r="/");let i=typeof t=="string"?il(t):t,c=gg(i.pathname||"/",r);if(c==null)return null;let d=tD(e);r8(d);let y=null;for(let a=0;y==null&&a<d.length;++a)y=h8(d[a],m8(c));return y}function tD(e,t,r,i){t===void 0&&(t=[]),r===void 0&&(r=[]),i===void 0&&(i="");let c=(d,y,a)=>{let b={relativePath:a===void 0?d.path||"":a,caseSensitive:d.caseSensitive===!0,childrenIndex:y,route:d};b.relativePath.startsWith("/")&&(dr(b.relativePath.startsWith(i),'Absolute route path "'+b.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),b.relativePath=b.relativePath.slice(i.length));let S=cc([i,b.relativePath]),k=r.concat(b);d.children&&d.children.length>0&&(dr(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+S+'".')),tD(d.children,t,k,S)),!(d.path==null&&!d.index)&&t.push({path:S,score:u8(S,d.index),routesMeta:k})};return e.forEach((d,y)=>{var a;if(d.path===""||!((a=d.path)!=null&&a.includes("?")))c(d,y);else for(let b of nD(d.path))c(d,y,b)}),t}function nD(e){let t=e.split("/");if(t.length===0)return[];let[r,...i]=t,c=r.endsWith("?"),d=r.replace(/\?$/,"");if(i.length===0)return c?[d,""]:[d];let y=nD(i.join("/")),a=[];return a.push(...y.map(b=>b===""?d:[d,b].join("/"))),c&&a.push(...y),a.map(b=>e.startsWith("/")&&b===""?"/":b)}function r8(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:d8(t.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const i8=/^:\w+$/,o8=3,a8=2,s8=1,l8=10,c8=-2,ak=e=>e==="*";function u8(e,t){let r=e.split("/"),i=r.length;return r.some(ak)&&(i+=c8),t&&(i+=a8),r.filter(c=>!ak(c)).reduce((c,d)=>c+(i8.test(d)?o8:d===""?s8:l8),i)}function d8(e,t){return e.length===t.length&&e.slice(0,-1).every((i,c)=>i===t[c])?e[e.length-1]-t[t.length-1]:0}function h8(e,t){let{routesMeta:r}=e,i={},c="/",d=[];for(let y=0;y<r.length;++y){let a=r[y],b=y===r.length-1,S=c==="/"?t:t.slice(c.length)||"/",k=f8({path:a.relativePath,caseSensitive:a.caseSensitive,end:b},S);if(!k)return null;Object.assign(i,k.params);let P=a.route;d.push({params:i,pathname:cc([c,k.pathname]),pathnameBase:v8(cc([c,k.pathnameBase])),route:P}),k.pathnameBase!=="/"&&(c=cc([c,k.pathnameBase]))}return d}function f8(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=p8(e.path,e.caseSensitive,e.end),c=t.match(r);if(!c)return null;let d=c[0],y=d.replace(/(.)\/+$/,"$1"),a=c.slice(1);return{params:i.reduce((S,k,P)=>{if(k==="*"){let O=a[P]||"";y=d.slice(0,d.length-O.length).replace(/(.)\/+$/,"$1")}return S[k]=g8(a[P]||"",k),S},{}),pathname:d,pathnameBase:y,pattern:e}}function p8(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),jh(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(y,a)=>(i.push(a),"/([^\\/]+)"));return e.endsWith("*")?(i.push("*"),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,t?void 0:"i"),i]}function m8(e){try{return decodeURI(e)}catch(t){return jh(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function g8(e,t){try{return decodeURIComponent(e)}catch(r){return jh(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+r+").")),e}}function gg(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=e.charAt(r);return i&&i!=="/"?null:e.slice(r)||"/"}function y8(e,t){t===void 0&&(t="/");let{pathname:r,search:i="",hash:c=""}=typeof e=="string"?il(e):e;return{pathname:r?r.startsWith("/")?r:_8(r,t):t,search:x8(i),hash:b8(c)}}function _8(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?r.length>1&&r.pop():c!=="."&&r.push(c)}),r.length>1?r.join("/"):"/"}function $b(e,t,r,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dE(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function rD(e,t,r,i){i===void 0&&(i=!1);let c;typeof e=="string"?c=il(e):(c=Tr({},e),dr(!c.pathname||!c.pathname.includes("?"),$b("?","pathname","search",c)),dr(!c.pathname||!c.pathname.includes("#"),$b("#","pathname","hash",c)),dr(!c.search||!c.search.includes("#"),$b("#","search","hash",c)));let d=e===""||c.pathname==="",y=d?"/":c.pathname,a;if(i||y==null)a=r;else{let P=t.length-1;if(y.startsWith("..")){let O=y.split("/");for(;O[0]==="..";)O.shift(),P-=1;c.pathname=O.join("/")}a=P>=0?t[P]:"/"}let b=y8(c,a),S=y&&y!=="/"&&y.endsWith("/"),k=(d||y===".")&&r.endsWith("/");return!b.pathname.endsWith("/")&&(S||k)&&(b.pathname+="/"),b}const cc=e=>e.join("/").replace(/\/\/+/g,"/"),v8=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),x8=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,b8=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Ub=function(t,r){r===void 0&&(r=302);let i=r;typeof i=="number"?i={status:i}:typeof i.status>"u"&&(i.status=302);let c=new Headers(i.headers);return c.set("Location",t),new Response(null,Tr({},i,{headers:c}))};class hE{constructor(t,r,i,c){c===void 0&&(c=!1),this.status=t,this.statusText=r||"",this.internal=c,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function iD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const oD=["post","put","patch","delete"],w8=new Set(oD),S8=["get",...oD],E8=new Set(S8),T8=new Set([301,302,303,307,308]),C8=new Set([307,308]),Vb={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},M8={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},sk={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},aD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",A8=!sD,k8=e=>({hasErrorBoundary:!!e.hasErrorBoundary});function R8(e){dr(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let t;if(e.mapRouteProperties)t=e.mapRouteProperties;else if(e.detectErrorBoundary){let Ne=e.detectErrorBoundary;t=Ze=>({hasErrorBoundary:Ne(Ze)})}else t=k8;let r={},i=eD(e.routes,t,void 0,r),c,d=e.basename||"/",y=Tr({v7_normalizeFormMethod:!1,v7_prependBasename:!1},e.future),a=null,b=new Set,S=null,k=null,P=null,O=e.hydrationData!=null,G=bh(i,e.history.location,d),F=null;if(G==null){let Ne=Fa(404,{pathname:e.history.location.pathname}),{matches:Ze,route:lt}=pk(i);G=Ze,F={[lt.id]:Ne}}let q=!G.some(Ne=>Ne.route.lazy)&&(!G.some(Ne=>Ne.route.loader)||e.hydrationData!=null),ce,B={historyAction:e.history.action,location:e.history.location,matches:G,initialized:q,navigation:Vb,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||F,fetchers:new Map,blockers:new Map},U=Ti.Pop,Z=!1,J,Y=!1,he=!1,se=[],De=[],fe=new Map,$=0,ue=-1,Je=new Map,Ke=new Set,ke=new Map,ze=new Map,nt=new Map,_t=!1;function Ue(){return a=e.history.listen(Ne=>{let{action:Ze,location:lt,delta:Gt}=Ne;if(_t){_t=!1;return}jh(nt.size===0||Gt!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let tn=Ut({currentLocation:B.location,nextLocation:lt,historyAction:Ze});if(tn&&Gt!=null){_t=!0,e.history.go(Gt*-1),fr(tn,{state:"blocked",location:lt,proceed(){fr(tn,{state:"proceeding",proceed:void 0,reset:void 0,location:lt}),e.history.go(Gt)},reset(){hr(tn),$e({blockers:new Map(ce.state.blockers)})}});return}return ut(Ze,lt)}),B.initialized||ut(Ti.Pop,B.location),ce}function Ee(){a&&a(),b.clear(),J&&J.abort(),B.fetchers.forEach((Ne,Ze)=>Pn(Ze)),B.blockers.forEach((Ne,Ze)=>hr(Ze))}function _e(Ne){return b.add(Ne),()=>b.delete(Ne)}function $e(Ne){B=Tr({},B,Ne),b.forEach(Ze=>Ze(B))}function be(Ne,Ze){var lt,Gt;let tn=B.actionData!=null&&B.navigation.formMethod!=null&&$s(B.navigation.formMethod)&&B.navigation.state==="loading"&&((lt=Ne.state)==null?void 0:lt._isRedirect)!==!0,Be;Ze.actionData?Object.keys(Ze.actionData).length>0?Be=Ze.actionData:Be=null:tn?Be=B.actionData:Be=null;let Le=Ze.loaderData?fk(B.loaderData,Ze.loaderData,Ze.matches||[],Ze.errors):B.loaderData;for(let[yt]of nt)hr(yt);let ft=Z===!0||B.navigation.formMethod!=null&&$s(B.navigation.formMethod)&&((Gt=Ne.state)==null?void 0:Gt._isRedirect)!==!0;c&&(i=c,c=void 0),$e(Tr({},Ze,{actionData:Be,loaderData:Le,historyAction:U,location:Ne,initialized:!0,navigation:Vb,revalidation:"idle",restoreScrollPosition:Cn(Ne,Ze.matches||B.matches),preventScrollReset:ft,blockers:new Map(B.blockers)})),Y||U===Ti.Pop||(U===Ti.Push?e.history.push(Ne,Ne.state):U===Ti.Replace&&e.history.replace(Ne,Ne.state)),U=Ti.Pop,Z=!1,Y=!1,he=!1,se=[],De=[]}async function Me(Ne,Ze){if(typeof Ne=="number"){e.history.go(Ne);return}let lt=M2(B.location,B.matches,d,y.v7_prependBasename,Ne,Ze==null?void 0:Ze.fromRouteId,Ze==null?void 0:Ze.relative),{path:Gt,submission:tn,error:Be}=lk(y.v7_normalizeFormMethod,!1,lt,Ze),Le=B.location,ft=Jm(B.location,Gt,Ze&&Ze.state);ft=Tr({},ft,e.history.encodeLocation(ft));let yt=Ze&&Ze.replace!=null?Ze.replace:void 0,It=Ti.Push;yt===!0?It=Ti.Replace:yt===!1||tn!=null&&$s(tn.formMethod)&&tn.formAction===B.location.pathname+B.location.search&&(It=Ti.Replace);let Ft=Ze&&"preventScrollReset"in Ze?Ze.preventScrollReset===!0:void 0,Qt=Ut({currentLocation:Le,nextLocation:ft,historyAction:It});if(Qt){fr(Qt,{state:"blocked",location:ft,proceed(){fr(Qt,{state:"proceeding",proceed:void 0,reset:void 0,location:ft}),Me(Ne,Ze)},reset(){hr(Qt),$e({blockers:new Map(B.blockers)})}});return}return await ut(It,ft,{submission:tn,pendingError:Be,preventScrollReset:Ft,replace:Ze&&Ze.replace})}function Ge(){if(Nt(),$e({revalidation:"loading"}),B.navigation.state!=="submitting"){if(B.navigation.state==="idle"){ut(B.historyAction,B.location,{startUninterruptedRevalidation:!0});return}ut(U||B.historyAction,B.navigation.location,{overrideNavigation:B.navigation})}}async function ut(Ne,Ze,lt){J&&J.abort(),J=null,U=Ne,Y=(lt&&lt.startUninterruptedRevalidation)===!0,Tn(B.location,B.matches),Z=(lt&&lt.preventScrollReset)===!0;let Gt=c||i,tn=lt&&lt.overrideNavigation,Be=bh(Gt,Ze,d);if(!Be){let Jt=Fa(404,{pathname:Ze.pathname}),{matches:an,route:bn}=pk(Gt);rn(),be(Ze,{matches:an,loaderData:{},errors:{[bn.id]:Jt}});return}if(z8(B.location,Ze)&&!(lt&&lt.submission&&$s(lt.submission.formMethod))){be(Ze,{matches:Be});return}J=new AbortController;let Le=Gp(e.history,Ze,J.signal,lt&&lt.submission),ft,yt;if(lt&&lt.pendingError)yt={[wh(Be).route.id]:lt.pendingError};else if(lt&&lt.submission&&$s(lt.submission.formMethod)){let Jt=await ht(Le,Ze,lt.submission,Be,{replace:lt.replace});if(Jt.shortCircuited)return;ft=Jt.pendingActionData,yt=Jt.pendingActionError,tn=Tr({state:"loading",location:Ze},lt.submission),Le=new Request(Le.url,{signal:Le.signal})}let{shortCircuited:It,loaderData:Ft,errors:Qt}=await Lt(Le,Ze,Be,tn,lt&&lt.submission,lt&&lt.fetcherSubmission,lt&&lt.replace,ft,yt);It||(J=null,be(Ze,Tr({matches:Be},ft?{actionData:ft}:{},{loaderData:Ft,errors:Qt})))}async function ht(Ne,Ze,lt,Gt,tn){Nt();let Be=Tr({state:"submitting",location:Ze},lt);$e({navigation:Be});let Le,ft=A2(Gt,Ze);if(!ft.route.action&&!ft.route.lazy)Le={type:Di.error,error:Fa(405,{method:Ne.method,pathname:Ze.pathname,routeId:ft.route.id})};else if(Le=await jp("action",Ne,ft,Gt,r,t,d),Ne.signal.aborted)return{shortCircuited:!0};if(Rh(Le)){let yt;return tn&&tn.replace!=null?yt=tn.replace:yt=Le.location===B.location.pathname+B.location.search,await Ct(B,Le,{submission:lt,replace:yt}),{shortCircuited:!0}}if(Mm(Le)){let yt=wh(Gt,ft.route.id);return(tn&&tn.replace)!==!0&&(U=Ti.Push),{pendingActionData:{},pendingActionError:{[yt.route.id]:Le.error}}}if(Au(Le))throw Fa(400,{type:"defer-action"});return{pendingActionData:{[ft.route.id]:Le.data}}}async function Lt(Ne,Ze,lt,Gt,tn,Be,Le,ft,yt){let It=Gt;It||(It=Tr({state:"loading",location:Ze,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},tn));let Ft=tn||Be?tn||Be:It.formMethod&&It.formAction&&It.formData&&It.formEncType?{formMethod:It.formMethod,formAction:It.formAction,formData:It.formData,formEncType:It.formEncType}:void 0,Qt=c||i,[Jt,an]=ck(e.history,B,lt,Ft,Ze,he,se,De,ke,Qt,d,ft,yt);if(rn(oe=>!(lt&&lt.some(ve=>ve.route.id===oe))||Jt&&Jt.some(ve=>ve.route.id===oe)),Jt.length===0&&an.length===0){let oe=Wr();return be(Ze,Tr({matches:lt,loaderData:{},errors:yt||null},ft?{actionData:ft}:{},oe?{fetchers:new Map(B.fetchers)}:{})),{shortCircuited:!0}}if(!Y){an.forEach(ve=>{let Pe=B.fetchers.get(ve.key),We={state:"loading",data:Pe&&Pe.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};B.fetchers.set(ve.key,We)});let oe=ft||B.actionData;$e(Tr({navigation:It},oe?Object.keys(oe).length===0?{actionData:null}:{actionData:oe}:{},an.length>0?{fetchers:new Map(B.fetchers)}:{}))}ue=++$,an.forEach(oe=>{oe.controller&&fe.set(oe.key,oe.controller)});let bn=()=>an.forEach(oe=>vn(oe.key));J&&J.signal.addEventListener("abort",bn);let{results:qn,loaderResults:br,fetcherResults:jn}=await Kt(B.matches,lt,Jt,an,Ne);if(Ne.signal.aborted)return{shortCircuited:!0};J&&J.signal.removeEventListener("abort",bn),an.forEach(oe=>fe.delete(oe.key));let ar=mk(qn);if(ar)return await Ct(B,ar,{replace:Le}),{shortCircuited:!0};let{loaderData:qr,errors:pi}=hk(B,lt,Jt,br,yt,an,jn,ze);ze.forEach((oe,ve)=>{oe.subscribe(Pe=>{(Pe||oe.done)&&ze.delete(ve)})});let pe=Wr(),j=Ln(ue),K=pe||j||an.length>0;return Tr({loaderData:qr,errors:pi},K?{fetchers:new Map(B.fetchers)}:{})}function zt(Ne){return B.fetchers.get(Ne)||M8}function Rt(Ne,Ze,lt,Gt){if(A8)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");fe.has(Ne)&&vn(Ne);let tn=c||i,Be=M2(B.location,B.matches,d,y.v7_prependBasename,lt,Ze,Gt==null?void 0:Gt.relative),Le=bh(tn,Be,d);if(!Le){pn(Ne,Ze,Fa(404,{pathname:Be}));return}let{path:ft,submission:yt}=lk(y.v7_normalizeFormMethod,!0,Be,Gt),It=A2(Le,ft);if(Z=(Gt&&Gt.preventScrollReset)===!0,yt&&$s(yt.formMethod)){St(Ne,Ze,ft,It,Le,yt);return}ke.set(Ne,{routeId:Ze,path:ft}),Et(Ne,Ze,ft,It,Le,yt)}async function St(Ne,Ze,lt,Gt,tn,Be){if(Nt(),ke.delete(Ne),!Gt.route.action&&!Gt.route.lazy){let Ve=Fa(405,{method:Be.formMethod,pathname:lt,routeId:Ze});pn(Ne,Ze,Ve);return}let Le=B.fetchers.get(Ne),ft=Tr({state:"submitting"},Be,{data:Le&&Le.data," _hasFetcherDoneAnything ":!0});B.fetchers.set(Ne,ft),$e({fetchers:new Map(B.fetchers)});let yt=new AbortController,It=Gp(e.history,lt,yt.signal,Be);fe.set(Ne,yt);let Ft=await jp("action",It,Gt,tn,r,t,d);if(It.signal.aborted){fe.get(Ne)===yt&&fe.delete(Ne);return}if(Rh(Ft)){fe.delete(Ne),Ke.add(Ne);let Ve=Tr({state:"loading"},Be,{data:void 0," _hasFetcherDoneAnything ":!0});return B.fetchers.set(Ne,Ve),$e({fetchers:new Map(B.fetchers)}),Ct(B,Ft,{submission:Be,isFetchActionRedirect:!0})}if(Mm(Ft)){pn(Ne,Ze,Ft.error);return}if(Au(Ft))throw Fa(400,{type:"defer-action"});let Qt=B.navigation.location||B.location,Jt=Gp(e.history,Qt,yt.signal),an=c||i,bn=B.navigation.state!=="idle"?bh(an,B.navigation.location,d):B.matches;dr(bn,"Didn't find any matches after fetcher action");let qn=++$;Je.set(Ne,qn);let br=Tr({state:"loading",data:Ft.data},Be,{" _hasFetcherDoneAnything ":!0});B.fetchers.set(Ne,br);let[jn,ar]=ck(e.history,B,bn,Be,Qt,he,se,De,ke,an,d,{[Gt.route.id]:Ft.data},void 0);ar.filter(Ve=>Ve.key!==Ne).forEach(Ve=>{let Oe=Ve.key,je=B.fetchers.get(Oe),mt={state:"loading",data:je&&je.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};B.fetchers.set(Oe,mt),Ve.controller&&fe.set(Oe,Ve.controller)}),$e({fetchers:new Map(B.fetchers)});let qr=()=>ar.forEach(Ve=>vn(Ve.key));yt.signal.addEventListener("abort",qr);let{results:pi,loaderResults:pe,fetcherResults:j}=await Kt(B.matches,bn,jn,ar,Jt);if(yt.signal.aborted)return;yt.signal.removeEventListener("abort",qr),Je.delete(Ne),fe.delete(Ne),ar.forEach(Ve=>fe.delete(Ve.key));let K=mk(pi);if(K)return Ct(B,K);let{loaderData:oe,errors:ve}=hk(B,B.matches,jn,pe,void 0,ar,j,ze),Pe={state:"idle",data:Ft.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};B.fetchers.set(Ne,Pe);let We=Ln(qn);B.navigation.state==="loading"&&qn>ue?(dr(U,"Expected pending action"),J&&J.abort(),be(B.navigation.location,{matches:bn,loaderData:oe,errors:ve,fetchers:new Map(B.fetchers)})):($e(Tr({errors:ve,loaderData:fk(B.loaderData,oe,bn,ve)},We?{fetchers:new Map(B.fetchers)}:{})),he=!1)}async function Et(Ne,Ze,lt,Gt,tn,Be){let Le=B.fetchers.get(Ne),ft=Tr({state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},Be,{data:Le&&Le.data," _hasFetcherDoneAnything ":!0});B.fetchers.set(Ne,ft),$e({fetchers:new Map(B.fetchers)});let yt=new AbortController,It=Gp(e.history,lt,yt.signal);fe.set(Ne,yt);let Ft=await jp("loader",It,Gt,tn,r,t,d);if(Au(Ft)&&(Ft=await dD(Ft,It.signal,!0)||Ft),fe.get(Ne)===yt&&fe.delete(Ne),It.signal.aborted)return;if(Rh(Ft)){Ke.add(Ne),await Ct(B,Ft);return}if(Mm(Ft)){let Jt=wh(B.matches,Ze);B.fetchers.delete(Ne),$e({fetchers:new Map(B.fetchers),errors:{[Jt.route.id]:Ft.error}});return}dr(!Au(Ft),"Unhandled fetcher deferred data");let Qt={state:"idle",data:Ft.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};B.fetchers.set(Ne,Qt),$e({fetchers:new Map(B.fetchers)})}async function Ct(Ne,Ze,lt){var Gt;let{submission:tn,replace:Be,isFetchActionRedirect:Le}=lt===void 0?{}:lt;Ze.revalidate&&(he=!0);let ft=Jm(Ne.location,Ze.location,Tr({_isRedirect:!0},Le?{_isFetchActionRedirect:!0}:{}));if(dr(ft,"Expected a location on the redirect navigation"),aD.test(Ze.location)&&sD&&typeof((Gt=window)==null?void 0:Gt.location)<"u"){let an=e.history.createURL(Ze.location),bn=gg(an.pathname,d)==null;if(window.location.origin!==an.origin||bn){Be?window.location.replace(Ze.location):window.location.assign(Ze.location);return}}J=null;let yt=Be===!0?Ti.Replace:Ti.Push,{formMethod:It,formAction:Ft,formEncType:Qt,formData:Jt}=Ne.navigation;!tn&&It&&Ft&&Jt&&Qt&&(tn={formMethod:It,formAction:Ft,formEncType:Qt,formData:Jt}),C8.has(Ze.status)&&tn&&$s(tn.formMethod)?await ut(yt,ft,{submission:Tr({},tn,{formAction:Ze.location}),preventScrollReset:Z}):Le?await ut(yt,ft,{overrideNavigation:{state:"loading",location:ft,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},fetcherSubmission:tn,preventScrollReset:Z}):await ut(yt,ft,{overrideNavigation:{state:"loading",location:ft,formMethod:tn?tn.formMethod:void 0,formAction:tn?tn.formAction:void 0,formEncType:tn?tn.formEncType:void 0,formData:tn?tn.formData:void 0},preventScrollReset:Z})}async function Kt(Ne,Ze,lt,Gt,tn){let Be=await Promise.all([...lt.map(yt=>jp("loader",tn,yt,Ze,r,t,d)),...Gt.map(yt=>yt.matches&&yt.match&&yt.controller?jp("loader",Gp(e.history,yt.path,yt.controller.signal),yt.match,yt.matches,r,t,d):{type:Di.error,error:Fa(404,{pathname:yt.path})})]),Le=Be.slice(0,lt.length),ft=Be.slice(lt.length);return await Promise.all([gk(Ne,lt,Le,Le.map(()=>tn.signal),!1,B.loaderData),gk(Ne,Gt.map(yt=>yt.match),ft,Gt.map(yt=>yt.controller?yt.controller.signal:null),!0)]),{results:Be,loaderResults:Le,fetcherResults:ft}}function Nt(){he=!0,se.push(...rn()),ke.forEach((Ne,Ze)=>{fe.has(Ze)&&(De.push(Ze),vn(Ze))})}function pn(Ne,Ze,lt){let Gt=wh(B.matches,Ze);Pn(Ne),$e({errors:{[Gt.route.id]:lt},fetchers:new Map(B.fetchers)})}function Pn(Ne){fe.has(Ne)&&vn(Ne),ke.delete(Ne),Je.delete(Ne),Ke.delete(Ne),B.fetchers.delete(Ne)}function vn(Ne){let Ze=fe.get(Ne);dr(Ze,"Expected fetch controller: "+Ne),Ze.abort(),fe.delete(Ne)}function or(Ne){for(let Ze of Ne){let Gt={state:"idle",data:zt(Ze).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};B.fetchers.set(Ze,Gt)}}function Wr(){let Ne=[],Ze=!1;for(let lt of Ke){let Gt=B.fetchers.get(lt);dr(Gt,"Expected fetcher: "+lt),Gt.state==="loading"&&(Ke.delete(lt),Ne.push(lt),Ze=!0)}return or(Ne),Ze}function Ln(Ne){let Ze=[];for(let[lt,Gt]of Je)if(Gt<Ne){let tn=B.fetchers.get(lt);dr(tn,"Expected fetcher: "+lt),tn.state==="loading"&&(vn(lt),Je.delete(lt),Ze.push(lt))}return or(Ze),Ze.length>0}function Xn(Ne,Ze){let lt=B.blockers.get(Ne)||sk;return nt.get(Ne)!==Ze&&nt.set(Ne,Ze),lt}function hr(Ne){B.blockers.delete(Ne),nt.delete(Ne)}function fr(Ne,Ze){let lt=B.blockers.get(Ne)||sk;dr(lt.state==="unblocked"&&Ze.state==="blocked"||lt.state==="blocked"&&Ze.state==="blocked"||lt.state==="blocked"&&Ze.state==="proceeding"||lt.state==="blocked"&&Ze.state==="unblocked"||lt.state==="proceeding"&&Ze.state==="unblocked","Invalid blocker state transition: "+lt.state+" -> "+Ze.state),B.blockers.set(Ne,Ze),$e({blockers:new Map(B.blockers)})}function Ut(Ne){let{currentLocation:Ze,nextLocation:lt,historyAction:Gt}=Ne;if(nt.size===0)return;nt.size>1&&jh(!1,"A router only supports one blocker at a time");let tn=Array.from(nt.entries()),[Be,Le]=tn[tn.length-1],ft=B.blockers.get(Be);if(!(ft&&ft.state==="proceeding")&&Le({currentLocation:Ze,nextLocation:lt,historyAction:Gt}))return Be}function rn(Ne){let Ze=[];return ze.forEach((lt,Gt)=>{(!Ne||Ne(Gt))&&(lt.cancel(),Ze.push(Gt),ze.delete(Gt))}),Ze}function En(Ne,Ze,lt){if(S=Ne,P=Ze,k=lt||(Gt=>Gt.key),!O&&B.navigation===Vb){O=!0;let Gt=Cn(B.location,B.matches);Gt!=null&&$e({restoreScrollPosition:Gt})}return()=>{S=null,P=null,k=null}}function Tn(Ne,Ze){if(S&&k&&P){let lt=Ze.map(tn=>yk(tn,B.loaderData)),Gt=k(Ne,lt)||Ne.key;S[Gt]=P()}}function Cn(Ne,Ze){if(S&&k&&P){let lt=Ze.map(Be=>yk(Be,B.loaderData)),Gt=k(Ne,lt)||Ne.key,tn=S[Gt];if(typeof tn=="number")return tn}return null}function ln(Ne){c=Ne}return ce={get basename(){return d},get state(){return B},get routes(){return i},initialize:Ue,subscribe:_e,enableScrollRestoration:En,navigate:Me,fetch:Rt,revalidate:Ge,createHref:Ne=>e.history.createHref(Ne),encodeLocation:Ne=>e.history.encodeLocation(Ne),getFetcher:zt,deleteFetcher:Pn,dispose:Ee,getBlocker:Xn,deleteBlocker:hr,_internalFetchControllers:fe,_internalActiveDeferreds:ze,_internalSetRoutes:ln},ce}function I8(e){return e!=null&&"formData"in e}function M2(e,t,r,i,c,d,y){let a,b;if(d!=null&&y!=="path"){a=[];for(let k of t)if(a.push(k),k.route.id===d){b=k;break}}else a=t,b=t[t.length-1];let S=rD(c||".",dE(a).map(k=>k.pathnameBase),gg(e.pathname,r)||e.pathname,y==="path");return c==null&&(S.search=e.search,S.hash=e.hash),(c==null||c===""||c===".")&&b&&b.route.index&&!fE(S.search)&&(S.search=S.search?S.search.replace(/^\?/,"?index&"):"?index"),i&&r!=="/"&&(S.pathname=S.pathname==="/"?r:cc([r,S.pathname])),mg(S)}function lk(e,t,r,i){if(!i||!I8(i))return{path:r};if(i.formMethod&&!B8(i.formMethod))return{path:r,error:Fa(405,{method:i.formMethod})};let c;if(i.formData){let a=i.formMethod||"get";if(c={formMethod:e?a.toUpperCase():a.toLowerCase(),formAction:uD(r),formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:i.formData},$s(c.formMethod))return{path:r,submission:c}}let d=il(r),y=cD(i.formData);return t&&d.search&&fE(d.search)&&y.append("index",""),d.search="?"+y,{path:mg(d),submission:c}}function P8(e,t){let r=e;if(t){let i=e.findIndex(c=>c.route.id===t);i>=0&&(r=e.slice(0,i))}return r}function ck(e,t,r,i,c,d,y,a,b,S,k,P,O){let G=O?Object.values(O)[0]:P?Object.values(P)[0]:void 0,F=e.createURL(t.location),q=e.createURL(c),ce=O?Object.keys(O)[0]:void 0,U=P8(r,ce).filter((J,Y)=>{if(J.route.lazy)return!0;if(J.route.loader==null)return!1;if(L8(t.loaderData,t.matches[Y],J)||y.some(De=>De===J.route.id))return!0;let he=t.matches[Y],se=J;return uk(J,Tr({currentUrl:F,currentParams:he.params,nextUrl:q,nextParams:se.params},i,{actionResult:G,defaultShouldRevalidate:d||F.pathname+F.search===q.pathname+q.search||F.search!==q.search||lD(he,se)}))}),Z=[];return b.forEach((J,Y)=>{if(!r.some(fe=>fe.route.id===J.routeId))return;let he=bh(S,J.path,k);if(!he){Z.push({key:Y,routeId:J.routeId,path:J.path,matches:null,match:null,controller:null});return}let se=A2(he,J.path);if(a.includes(Y)){Z.push({key:Y,routeId:J.routeId,path:J.path,matches:he,match:se,controller:new AbortController});return}uk(se,Tr({currentUrl:F,currentParams:t.matches[t.matches.length-1].params,nextUrl:q,nextParams:r[r.length-1].params},i,{actionResult:G,defaultShouldRevalidate:d}))&&Z.push({key:Y,routeId:J.routeId,path:J.path,matches:he,match:se,controller:new AbortController})}),[U,Z]}function L8(e,t,r){let i=!t||r.route.id!==t.route.id,c=e[r.route.id]===void 0;return i||c}function lD(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function uk(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}async function dk(e,t,r){if(!e.lazy)return;let i=await e.lazy();if(!e.lazy)return;let c=r[e.id];dr(c,"No route found in manifest");let d={};for(let y in i){let b=c[y]!==void 0&&y!=="hasErrorBoundary";jh(!b,'Route "'+c.id+'" has a static property "'+y+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+y+'" will be ignored.')),!b&&!t8.has(y)&&(d[y]=i[y])}Object.assign(c,d),Object.assign(c,Tr({},t(c),{lazy:void 0}))}async function jp(e,t,r,i,c,d,y,a,b,S){a===void 0&&(a=!1),b===void 0&&(b=!1);let k,P,O,G=ce=>{let B,U=new Promise((Z,J)=>B=J);return O=()=>B(),t.signal.addEventListener("abort",O),Promise.race([ce({request:t,params:r.params,context:S}),U])};try{let ce=r.route[e];if(r.route.lazy)if(ce)P=(await Promise.all([G(ce),dk(r.route,d,c)]))[0];else if(await dk(r.route,d,c),ce=r.route[e],ce)P=await G(ce);else if(e==="action"){let B=new URL(t.url),U=B.pathname+B.search;throw Fa(405,{method:t.method,pathname:U,routeId:r.route.id})}else return{type:Di.data,data:void 0};else if(ce)P=await G(ce);else{let B=new URL(t.url),U=B.pathname+B.search;throw Fa(404,{pathname:U})}dr(P!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(ce){k=Di.error,P=ce}finally{O&&t.signal.removeEventListener("abort",O)}if(F8(P)){let ce=P.status;if(T8.has(ce)){let Z=P.headers.get("Location");if(dr(Z,"Redirects returned/thrown from loaders/actions must have a Location header"),!aD.test(Z))Z=M2(new URL(t.url),i.slice(0,i.indexOf(r)+1),y,!0,Z);else if(!a){let J=new URL(t.url),Y=Z.startsWith("//")?new URL(J.protocol+Z):new URL(Z),he=gg(Y.pathname,y)!=null;Y.origin===J.origin&&he&&(Z=Y.pathname+Y.search+Y.hash)}if(a)throw P.headers.set("Location",Z),P;return{type:Di.redirect,status:ce,location:Z,revalidate:P.headers.get("X-Remix-Revalidate")!==null}}if(b)throw{type:k||Di.data,response:P};let B,U=P.headers.get("Content-Type");return U&&/\bapplication\/json\b/.test(U)?B=await P.json():B=await P.text(),k===Di.error?{type:k,error:new hE(ce,P.statusText,B),headers:P.headers}:{type:Di.data,data:B,statusCode:P.status,headers:P.headers}}if(k===Di.error)return{type:k,error:P};if(O8(P)){var F,q;return{type:Di.deferred,deferredData:P,statusCode:(F=P.init)==null?void 0:F.status,headers:((q=P.init)==null?void 0:q.headers)&&new Headers(P.init.headers)}}return{type:Di.data,data:P}}function Gp(e,t,r,i){let c=e.createURL(uD(t)).toString(),d={signal:r};if(i&&$s(i.formMethod)){let{formMethod:y,formEncType:a,formData:b}=i;d.method=y.toUpperCase(),d.body=a==="application/x-www-form-urlencoded"?cD(b):b}return new Request(c,d)}function cD(e){let t=new URLSearchParams;for(let[r,i]of e.entries())t.append(r,i instanceof File?i.name:i);return t}function D8(e,t,r,i,c){let d={},y=null,a,b=!1,S={};return r.forEach((k,P)=>{let O=t[P].route.id;if(dr(!Rh(k),"Cannot handle redirect results in processLoaderData"),Mm(k)){let G=wh(e,O),F=k.error;i&&(F=Object.values(i)[0],i=void 0),y=y||{},y[G.route.id]==null&&(y[G.route.id]=F),d[O]=void 0,b||(b=!0,a=iD(k.error)?k.error.status:500),k.headers&&(S[O]=k.headers)}else Au(k)?(c.set(O,k.deferredData),d[O]=k.deferredData.data):d[O]=k.data,k.statusCode!=null&&k.statusCode!==200&&!b&&(a=k.statusCode),k.headers&&(S[O]=k.headers)}),i&&(y=i,d[Object.keys(i)[0]]=void 0),{loaderData:d,errors:y,statusCode:a||200,loaderHeaders:S}}function hk(e,t,r,i,c,d,y,a){let{loaderData:b,errors:S}=D8(t,r,i,c,a);for(let k=0;k<d.length;k++){let{key:P,match:O,controller:G}=d[k];dr(y!==void 0&&y[k]!==void 0,"Did not find corresponding fetcher result");let F=y[k];if(!(G&&G.signal.aborted))if(Mm(F)){let q=wh(e.matches,O==null?void 0:O.route.id);S&&S[q.route.id]||(S=Tr({},S,{[q.route.id]:F.error})),e.fetchers.delete(P)}else if(Rh(F))dr(!1,"Unhandled fetcher revalidation redirect");else if(Au(F))dr(!1,"Unhandled fetcher deferred data");else{let q={state:"idle",data:F.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};e.fetchers.set(P,q)}}return{loaderData:b,errors:S}}function fk(e,t,r,i){let c=Tr({},t);for(let d of r){let y=d.route.id;if(t.hasOwnProperty(y)?t[y]!==void 0&&(c[y]=t[y]):e[y]!==void 0&&d.route.loader&&(c[y]=e[y]),i&&i.hasOwnProperty(y))break}return c}function wh(e,t){return(t?e.slice(0,e.findIndex(i=>i.route.id===t)+1):[...e]).reverse().find(i=>i.route.hasErrorBoundary===!0)||e[0]}function pk(e){let t=e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Fa(e,t){let{pathname:r,routeId:i,method:c,type:d}=t===void 0?{}:t,y="Unknown Server Error",a="Unknown @remix-run/router error";return e===400?(y="Bad Request",c&&r&&i?a="You made a "+c+' request to "'+r+'" but '+('did not provide a `loader` for route "'+i+'", ')+"so there is no way to handle the request.":d==="defer-action"&&(a="defer() is not supported in actions")):e===403?(y="Forbidden",a='Route "'+i+'" does not match URL "'+r+'"'):e===404?(y="Not Found",a='No route matches URL "'+r+'"'):e===405&&(y="Method Not Allowed",c&&r&&i?a="You made a "+c.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+i+'", ')+"so there is no way to handle the request.":c&&(a='Invalid request method "'+c.toUpperCase()+'"')),new hE(e||500,y,new Error(a),!0)}function mk(e){for(let t=e.length-1;t>=0;t--){let r=e[t];if(Rh(r))return r}}function uD(e){let t=typeof e=="string"?il(e):e;return mg(Tr({},t,{hash:""}))}function z8(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function Au(e){return e.type===Di.deferred}function Mm(e){return e.type===Di.error}function Rh(e){return(e&&e.type)===Di.redirect}function O8(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function F8(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function B8(e){return E8.has(e.toLowerCase())}function $s(e){return w8.has(e.toLowerCase())}async function gk(e,t,r,i,c,d){for(let y=0;y<r.length;y++){let a=r[y],b=t[y];if(!b)continue;let S=e.find(P=>P.route.id===b.route.id),k=S!=null&&!lD(S,b)&&(d&&d[b.route.id])!==void 0;if(Au(a)&&(c||k)){let P=i[y];dr(P,"Expected an AbortSignal for revalidating fetcher deferred result"),await dD(a,P,c).then(O=>{O&&(r[y]=O||r[y])})}}}async function dD(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:Di.data,data:e.deferredData.unwrappedData}}catch(c){return{type:Di.error,error:c}}return{type:Di.data,data:e.deferredData.data}}}function fE(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function yk(e,t){let{route:r,pathname:i,params:c}=e;return{id:r.id,pathname:i,params:c,data:t[r.id],handle:r.handle}}function A2(e,t){let r=typeof t=="string"?il(t).search:t.search;if(e[e.length-1].route.index&&fE(r||""))return e[e.length-1];let i=dE(e);return i[i.length-1]}/**
 * React Router v6.11.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function X_(){return X_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},X_.apply(this,arguments)}const pE=H.createContext(null),hD=H.createContext(null),Dv=H.createContext(null),zv=H.createContext(null),xc=H.createContext({outlet:null,matches:[],isDataRoute:!1}),fD=H.createContext(null);function Ov(){return H.useContext(zv)!=null}function Fv(){return Ov()||dr(!1),H.useContext(zv).location}function pD(e){H.useContext(Dv).static||H.useLayoutEffect(e)}function mD(){let{isDataRoute:e}=H.useContext(xc);return e?Q8():N8()}function N8(){Ov()||dr(!1);let{basename:e,navigator:t}=H.useContext(Dv),{matches:r}=H.useContext(xc),{pathname:i}=Fv(),c=JSON.stringify(dE(r).map(a=>a.pathnameBase)),d=H.useRef(!1);return pD(()=>{d.current=!0}),H.useCallback(function(a,b){if(b===void 0&&(b={}),!d.current)return;if(typeof a=="number"){t.go(a);return}let S=rD(a,JSON.parse(c),i,b.relative==="path");e!=="/"&&(S.pathname=S.pathname==="/"?e:cc([e,S.pathname])),(b.replace?t.replace:t.push)(S,b.state,b)},[e,t,c,i])}const gD=H.createContext(null);function ea(){return H.useContext(gD)}function $8(e){let t=H.useContext(xc).outlet;return t&&H.createElement(gD.Provider,{value:e},t)}function U8(){let{matches:e}=H.useContext(xc),t=e[e.length-1];return t?t.params:{}}function V8(e,t,r){Ov()||dr(!1);let{navigator:i}=H.useContext(Dv),{matches:c}=H.useContext(xc),d=c[c.length-1],y=d?d.params:{};d&&d.pathname;let a=d?d.pathnameBase:"/";d&&d.route;let b=Fv(),S;if(t){var k;let q=typeof t=="string"?il(t):t;a==="/"||(k=q.pathname)!=null&&k.startsWith(a)||dr(!1),S=q}else S=b;let P=S.pathname||"/",O=a==="/"?P:P.slice(a.length)||"/",G=bh(e,{pathname:O}),F=H8(G&&G.map(q=>Object.assign({},q,{params:Object.assign({},y,q.params),pathname:cc([a,i.encodeLocation?i.encodeLocation(q.pathname).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?a:cc([a,i.encodeLocation?i.encodeLocation(q.pathnameBase).pathname:q.pathnameBase])})),c,r);return t&&F?H.createElement(zv.Provider,{value:{location:X_({pathname:"/",search:"",hash:"",state:null,key:"default"},S),navigationType:Ti.Pop}},F):F}function j8(){let e=Y8(),t=iD(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},d=null;return H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},t),r?H.createElement("pre",{style:c},r):null,d)}const G8=H.createElement(j8,null);class W8 extends H.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error?H.createElement(xc.Provider,{value:this.props.routeContext},H.createElement(fD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function q8(e){let{routeContext:t,match:r,children:i}=e,c=H.useContext(pE);return c&&c.static&&c.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=r.route.id),H.createElement(xc.Provider,{value:t},i)}function H8(e,t,r){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),e==null){var c;if((c=r)!=null&&c.errors)e=r.matches;else return null}let d=e,y=(i=r)==null?void 0:i.errors;if(y!=null){let a=d.findIndex(b=>b.route.id&&(y==null?void 0:y[b.route.id]));a>=0||dr(!1),d=d.slice(0,Math.min(d.length,a+1))}return d.reduceRight((a,b,S)=>{let k=b.route.id?y==null?void 0:y[b.route.id]:null,P=null;r&&(P=b.route.errorElement||G8);let O=t.concat(d.slice(0,S+1)),G=()=>{let F;return k?F=P:b.route.Component?F=H.createElement(b.route.Component,null):b.route.element?F=b.route.element:F=a,H.createElement(q8,{match:b,routeContext:{outlet:a,matches:O,isDataRoute:r!=null},children:F})};return r&&(b.route.ErrorBoundary||b.route.errorElement||S===0)?H.createElement(W8,{location:r.location,revalidation:r.revalidation,component:P,error:k,children:G(),routeContext:{outlet:null,matches:O,isDataRoute:!0}}):G()},null)}var k2;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"})(k2||(k2={}));var eg;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"})(eg||(eg={}));function Z8(e){let t=H.useContext(pE);return t||dr(!1),t}function X8(e){let t=H.useContext(hD);return t||dr(!1),t}function K8(e){let t=H.useContext(xc);return t||dr(!1),t}function yD(e){let t=K8(),r=t.matches[t.matches.length-1];return r.route.id||dr(!1),r.route.id}function Y8(){var e;let t=H.useContext(fD),r=X8(eg.UseRouteError),i=yD(eg.UseRouteError);return t||((e=r.errors)==null?void 0:e[i])}function Q8(){let{router:e}=Z8(k2.UseNavigateStable),t=yD(eg.UseNavigateStable),r=H.useRef(!1);return pD(()=>{r.current=!0}),H.useCallback(function(c,d){d===void 0&&(d={}),r.current&&(typeof c=="number"?e.navigate(c):e.navigate(c,X_({fromRouteId:t},d)))},[e,t])}function J8(e){let{fallbackElement:t,router:r}=e,[i,c]=H.useState(r.state);H.useLayoutEffect(()=>r.subscribe(c),[r,c]);let d=H.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:b=>r.navigate(b),push:(b,S,k)=>r.navigate(b,{state:S,preventScrollReset:k==null?void 0:k.preventScrollReset}),replace:(b,S,k)=>r.navigate(b,{replace:!0,state:S,preventScrollReset:k==null?void 0:k.preventScrollReset})}),[r]),y=r.basename||"/",a=H.useMemo(()=>({router:r,navigator:d,static:!1,basename:y}),[r,d,y]);return H.createElement(H.Fragment,null,H.createElement(pE.Provider,{value:a},H.createElement(hD.Provider,{value:i},H.createElement(t$,{basename:r.basename,location:r.state.location,navigationType:r.state.historyAction,navigator:d},r.state.initialized?H.createElement(e$,{routes:r.routes,state:i}):t))),null)}function e$(e){let{routes:t,state:r}=e;return V8(t,void 0,r)}function mE(e){return $8(e.context)}function t$(e){let{basename:t="/",children:r=null,location:i,navigationType:c=Ti.Pop,navigator:d,static:y=!1}=e;Ov()&&dr(!1);let a=t.replace(/^\/*/,"/"),b=H.useMemo(()=>({basename:a,navigator:d,static:y}),[a,d,y]);typeof i=="string"&&(i=il(i));let{pathname:S="/",search:k="",hash:P="",state:O=null,key:G="default"}=i,F=H.useMemo(()=>{let q=gg(S,a);return q==null?null:{location:{pathname:q,search:k,hash:P,state:O,key:G},navigationType:c}},[a,S,k,P,O,G,c]);return F==null?null:H.createElement(Dv.Provider,{value:b},H.createElement(zv.Provider,{children:r,value:F}))}var _k;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(_k||(_k={}));new Promise(()=>{});function n$(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:H.createElement(e.Component),Component:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:H.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.11.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function K_(){return K_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},K_.apply(this,arguments)}function r$(e,t){return R8({basename:t==null?void 0:t.basename,future:K_({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:QN({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||i$(),routes:e,mapRouteProperties:n$}).initialize()}function i$(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=K_({},t,{errors:o$(t.errors)})),t}function o$(e){if(!e)return null;let t=Object.entries(e),r={};for(let[i,c]of t)if(c&&c.__type==="RouteErrorResponse")r[i]=new hE(c.status,c.statusText,c.data,c.internal===!0);else if(c&&c.__type==="Error"){let d=new Error(c.message);d.stack="",r[i]=d}else r[i]=c;return r}var vk;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(vk||(vk={}));var xk;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(xk||(xk={}));function a$(e){const t=new Error(e);if(t.stack===void 0)try{throw t}catch{}return t}var s$=a$,Yn=s$;function l$(e){return!!e&&typeof e.then=="function"}var Yr=l$;function c$(e,t){if(e!=null)return e;throw Yn(t??"Got unexpected null or undefined")}var oi=c$;function Wn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Bv{getValue(){throw Yn("BaseLoadable")}toPromise(){throw Yn("BaseLoadable")}valueMaybe(){throw Yn("BaseLoadable")}valueOrThrow(){throw Yn(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw Yn("BaseLoadable")}promiseOrThrow(){throw Yn(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw Yn("BaseLoadable")}errorOrThrow(){throw Yn(`Loadable expected error, but in "${this.state}" state`)}is(t){return t.state===this.state&&t.contents===this.contents}map(t){throw Yn("BaseLoadable")}}class u$ extends Bv{constructor(t){super(),Wn(this,"state","hasValue"),Wn(this,"contents",void 0),this.contents=t}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(t){try{const r=t(this.contents);return Yr(r)?$u(r):Gh(r)?r:yg(r)}catch(r){return Yr(r)?$u(r.next(()=>this.map(t))):Nv(r)}}}class d$ extends Bv{constructor(t){super(),Wn(this,"state","hasError"),Wn(this,"contents",void 0),this.contents=t}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(t){return this}}class _D extends Bv{constructor(t){super(),Wn(this,"state","loading"),Wn(this,"contents",void 0),this.contents=t}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(t){return $u(this.contents.then(r=>{const i=t(r);if(Gh(i)){const c=i;switch(c.state){case"hasValue":return c.contents;case"hasError":throw c.contents;case"loading":return c.contents}}return i}).catch(r=>{if(Yr(r))return r.then(()=>this.map(t).contents);throw r}))}}function yg(e){return Object.freeze(new u$(e))}function Nv(e){return Object.freeze(new d$(e))}function $u(e){return Object.freeze(new _D(e))}function vD(){return Object.freeze(new _D(new Promise(()=>{})))}function h$(e){return e.every(t=>t.state==="hasValue")?yg(e.map(t=>t.contents)):e.some(t=>t.state==="hasError")?Nv(oi(e.find(t=>t.state==="hasError"),"Invalid loadable passed to loadableAll").contents):$u(Promise.all(e.map(t=>t.contents)))}function xD(e){const r=(Array.isArray(e)?e:Object.getOwnPropertyNames(e).map(c=>e[c])).map(c=>Gh(c)?c:Yr(c)?$u(c):yg(c)),i=h$(r);return Array.isArray(e)?i:i.map(c=>Object.getOwnPropertyNames(e).reduce((d,y,a)=>({...d,[y]:c[a]}),{}))}function Gh(e){return e instanceof Bv}const f$={of:e=>Yr(e)?$u(e):Gh(e)?e:yg(e),error:e=>Nv(e),loading:()=>vD(),all:xD,isLoadable:Gh};var Zu={loadableWithValue:yg,loadableWithError:Nv,loadableWithPromise:$u,loadableLoading:vD,loadableAll:xD,isLoadable:Gh,RecoilLoadable:f$},p$=Zu.loadableWithValue,m$=Zu.loadableWithError,g$=Zu.loadableWithPromise,y$=Zu.loadableLoading,_$=Zu.loadableAll,v$=Zu.isLoadable,x$=Zu.RecoilLoadable,_g=Object.freeze({__proto__:null,loadableWithValue:p$,loadableWithError:m$,loadableWithPromise:g$,loadableLoading:y$,loadableAll:_$,isLoadable:v$,RecoilLoadable:x$});const R2={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0,RECOIL_GKS_ENABLED:new Set(["recoil_hamt_2020","recoil_sync_external_store","recoil_suppress_rerender_in_callback","recoil_memory_managament_2020"])};function b$(e,t){var r,i;const c=(r=process.env[e])===null||r===void 0||(i=r.toLowerCase())===null||i===void 0?void 0:i.trim();if(c==null||c==="")return;if(!["true","false"].includes(c))throw Yn(`({}).${e} value must be 'true', 'false', or empty: ${c}`);t(c==="true")}function w$(e,t){var r;const i=(r=process.env[e])===null||r===void 0?void 0:r.trim();i==null||i===""||t(i.split(/\s*,\s*|\s+/))}function S$(){var e;typeof process>"u"||((e=process)===null||e===void 0?void 0:e.env)!=null&&(b$("RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED",t=>{R2.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=t}),w$("RECOIL_GKS_ENABLED",t=>{t.forEach(r=>{R2.RECOIL_GKS_ENABLED.add(r)})}))}S$();var of=R2;function $v(e){return of.RECOIL_GKS_ENABLED.has(e)}$v.setPass=e=>{of.RECOIL_GKS_ENABLED.add(e)};$v.setFail=e=>{of.RECOIL_GKS_ENABLED.delete(e)};$v.clear=()=>{of.RECOIL_GKS_ENABLED.clear()};var jr=$v;function E$(e,t,{error:r}={}){return null}var T$=E$,gE=T$,jb,Gb,Wb;const C$=(jb=Qe.createMutableSource)!==null&&jb!==void 0?jb:Qe.unstable_createMutableSource,bD=(Gb=Qe.useMutableSource)!==null&&Gb!==void 0?Gb:Qe.unstable_useMutableSource,wD=(Wb=Qe.useSyncExternalStore)!==null&&Wb!==void 0?Wb:Qe.unstable_useSyncExternalStore;function M$(){var e;const{ReactCurrentDispatcher:t,ReactCurrentOwner:r}=Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return((e=t==null?void 0:t.current)!==null&&e!==void 0?e:r.currentDispatcher).useSyncExternalStore!=null}function A$(){return jr("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:jr("recoil_sync_external_store")&&wD!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:jr("recoil_mutable_source")&&bD!=null&&typeof window<"u"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?jr("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:jr("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function k$(){return!1}var vg={createMutableSource:C$,useMutableSource:bD,useSyncExternalStore:wD,currentRendererSupportsUseSyncExternalStore:M$,reactMode:A$,isFastRefreshEnabled:k$};class yE{constructor(t){Wn(this,"key",void 0),this.key=t}toJSON(){return{key:this.key}}}class SD extends yE{}class ED extends yE{}function R$(e){return e instanceof SD||e instanceof ED}var Uv={AbstractRecoilValue:yE,RecoilState:SD,RecoilValueReadOnly:ED,isRecoilValue:R$},I$=Uv.AbstractRecoilValue,P$=Uv.RecoilState,L$=Uv.RecoilValueReadOnly,D$=Uv.isRecoilValue,Wh=Object.freeze({__proto__:null,AbstractRecoilValue:I$,RecoilState:P$,RecoilValueReadOnly:L$,isRecoilValue:D$});function z$(e,t){return function*(){let r=0;for(const i of e)yield t(i,r++)}()}var Vv=z$;class TD{}const O$=new TD,Uu=new Map,_E=new Map;function F$(e){return Vv(e,t=>oi(_E.get(t)))}function B$(e){if(Uu.has(e)){const t=`Duplicate atom key "${e}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(t)}}function N$(e){of.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&B$(e.key),Uu.set(e.key,e);const t=e.set==null?new Wh.RecoilValueReadOnly(e.key):new Wh.RecoilState(e.key);return _E.set(e.key,t),t}class CD extends Error{}function $$(e){const t=Uu.get(e);if(t==null)throw new CD(`Missing definition for RecoilValue: "${e}""`);return t}function U$(e){return Uu.get(e)}const Y_=new Map;function V$(e){var t;if(!jr("recoil_memory_managament_2020"))return;const r=Uu.get(e);if(r!=null&&(t=r.shouldDeleteConfigOnRelease)!==null&&t!==void 0&&t.call(r)){var i;Uu.delete(e),(i=MD(e))===null||i===void 0||i(),Y_.delete(e)}}function j$(e,t){jr("recoil_memory_managament_2020")&&(t===void 0?Y_.delete(e):Y_.set(e,t))}function MD(e){return Y_.get(e)}var $o={nodes:Uu,recoilValues:_E,registerNode:N$,getNode:$$,getNodeMaybe:U$,deleteNodeConfigIfPossible:V$,setConfigDeletionHandler:j$,getConfigDeletionHandler:MD,recoilValuesForKeys:F$,NodeMissingError:CD,DefaultValue:TD,DEFAULT_VALUE:O$};function G$(e,t){t()}var W$={enqueueExecution:G$};function q$(e,t){return t={exports:{}},e(t,t.exports),t.exports}var H$=q$(function(e){var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Be){return typeof Be}:function(Be){return Be&&typeof Symbol=="function"&&Be.constructor===Symbol&&Be!==Symbol.prototype?"symbol":typeof Be},r={},i=5,c=Math.pow(2,i),d=c-1,y=c/2,a=c/4,b={},S=function(Le){return function(){return Le}},k=r.hash=function(Be){var Le=typeof Be>"u"?"undefined":t(Be);if(Le==="number")return Be;Le!=="string"&&(Be+="");for(var ft=0,yt=0,It=Be.length;yt<It;++yt){var Ft=Be.charCodeAt(yt);ft=(ft<<5)-ft+Ft|0}return ft},P=function(Le){return Le-=Le>>1&1431655765,Le=(Le&858993459)+(Le>>2&858993459),Le=Le+(Le>>4)&252645135,Le+=Le>>8,Le+=Le>>16,Le&127},O=function(Le,ft){return ft>>>Le&d},G=function(Le){return 1<<Le},F=function(Le,ft){return P(Le&ft-1)},q=function(Le,ft,yt,It){var Ft=It;if(!Le){var Qt=It.length;Ft=new Array(Qt);for(var Jt=0;Jt<Qt;++Jt)Ft[Jt]=It[Jt]}return Ft[ft]=yt,Ft},ce=function(Le,ft,yt){var It=yt.length-1,Ft=0,Qt=0,Jt=yt;if(Le)Ft=Qt=ft;else for(Jt=new Array(It);Ft<ft;)Jt[Qt++]=yt[Ft++];for(++Ft;Ft<=It;)Jt[Qt++]=yt[Ft++];return Le&&(Jt.length=It),Jt},B=function(Le,ft,yt,It){var Ft=It.length;if(Le){for(var Qt=Ft;Qt>=ft;)It[Qt--]=It[Qt];return It[ft]=yt,It}for(var Jt=0,an=0,bn=new Array(Ft+1);Jt<ft;)bn[an++]=It[Jt++];for(bn[ft]=yt;Jt<Ft;)bn[++an]=It[Jt++];return bn},U=1,Z=2,J=3,Y=4,he={__hamt_isEmpty:!0},se=function(Le){return Le===he||Le&&Le.__hamt_isEmpty},De=function(Le,ft,yt,It){return{type:U,edit:Le,hash:ft,key:yt,value:It,_modify:Ue}},fe=function(Le,ft,yt){return{type:Z,edit:Le,hash:ft,children:yt,_modify:Ee}},$=function(Le,ft,yt){return{type:J,edit:Le,mask:ft,children:yt,_modify:_e}},ue=function(Le,ft,yt){return{type:Y,edit:Le,size:ft,children:yt,_modify:$e}},Je=function(Le){return Le===he||Le.type===U||Le.type===Z},Ke=function(Le,ft,yt,It,Ft){for(var Qt=[],Jt=It,an=0,bn=0;Jt;++bn)Jt&1&&(Qt[bn]=Ft[an++]),Jt>>>=1;return Qt[ft]=yt,ue(Le,an+1,Qt)},ke=function(Le,ft,yt,It){for(var Ft=new Array(ft-1),Qt=0,Jt=0,an=0,bn=It.length;an<bn;++an)if(an!==yt){var qn=It[an];qn&&!se(qn)&&(Ft[Qt++]=qn,Jt|=1<<an)}return $(Le,Jt,Ft)},ze=function Be(Le,ft,yt,It,Ft,Qt){if(yt===Ft)return fe(Le,yt,[Qt,It]);var Jt=O(ft,yt),an=O(ft,Ft);return $(Le,G(Jt)|G(an),Jt===an?[Be(Le,ft+i,yt,It,Ft,Qt)]:Jt<an?[It,Qt]:[Qt,It])},nt=function(Le,ft,yt,It,Ft,Qt,Jt,an){for(var bn=Ft.length,qn=0;qn<bn;++qn){var br=Ft[qn];if(yt(Jt,br.key)){var jn=br.value,ar=Qt(jn);return ar===jn?Ft:ar===b?(--an.value,ce(Le,qn,Ft)):q(Le,qn,De(ft,It,Jt,ar),Ft)}}var qr=Qt();return qr===b?Ft:(++an.value,q(Le,bn,De(ft,It,Jt,qr),Ft))},_t=function(Le,ft){return Le===ft.edit},Ue=function(Le,ft,yt,It,Ft,Qt,Jt){if(ft(Qt,this.key)){var an=It(this.value);return an===this.value?this:an===b?(--Jt.value,he):_t(Le,this)?(this.value=an,this):De(Le,Ft,Qt,an)}var bn=It();return bn===b?this:(++Jt.value,ze(Le,yt,this.hash,this,Ft,De(Le,Ft,Qt,bn)))},Ee=function(Le,ft,yt,It,Ft,Qt,Jt){if(Ft===this.hash){var an=_t(Le,this),bn=nt(an,Le,ft,this.hash,this.children,It,Qt,Jt);return bn===this.children?this:bn.length>1?fe(Le,this.hash,bn):bn[0]}var qn=It();return qn===b?this:(++Jt.value,ze(Le,yt,this.hash,this,Ft,De(Le,Ft,Qt,qn)))},_e=function(Le,ft,yt,It,Ft,Qt,Jt){var an=this.mask,bn=this.children,qn=O(yt,Ft),br=G(qn),jn=F(an,br),ar=an&br,qr=ar?bn[jn]:he,pi=qr._modify(Le,ft,yt+i,It,Ft,Qt,Jt);if(qr===pi)return this;var pe=_t(Le,this),j=an,K=void 0;if(ar&&se(pi)){if(j&=~br,!j)return he;if(bn.length<=2&&Je(bn[jn^1]))return bn[jn^1];K=ce(pe,jn,bn)}else if(!ar&&!se(pi)){if(bn.length>=y)return Ke(Le,qn,pi,an,bn);j|=br,K=B(pe,jn,pi,bn)}else K=q(pe,jn,pi,bn);return pe?(this.mask=j,this.children=K,this):$(Le,j,K)},$e=function(Le,ft,yt,It,Ft,Qt,Jt){var an=this.size,bn=this.children,qn=O(yt,Ft),br=bn[qn],jn=(br||he)._modify(Le,ft,yt+i,It,Ft,Qt,Jt);if(br===jn)return this;var ar=_t(Le,this),qr=void 0;if(se(br)&&!se(jn))++an,qr=q(ar,qn,jn,bn);else if(!se(br)&&se(jn)){if(--an,an<=a)return ke(Le,an,qn,bn);qr=q(ar,qn,he,bn)}else qr=q(ar,qn,jn,bn);return ar?(this.size=an,this.children=qr,this):ue(Le,an,qr)};he._modify=function(Be,Le,ft,yt,It,Ft,Qt){var Jt=yt();return Jt===b?he:(++Qt.value,De(Be,It,Ft,Jt))};function be(Be,Le,ft,yt,It){this._editable=Be,this._edit=Le,this._config=ft,this._root=yt,this._size=It}be.prototype.setTree=function(Be,Le){return this._editable?(this._root=Be,this._size=Le,this):Be===this._root?this:new be(this._editable,this._edit,this._config,Be,Le)};var Me=r.tryGetHash=function(Be,Le,ft,yt){for(var It=yt._root,Ft=0,Qt=yt._config.keyEq;;)switch(It.type){case U:return Qt(ft,It.key)?It.value:Be;case Z:{if(Le===It.hash)for(var Jt=It.children,an=0,bn=Jt.length;an<bn;++an){var qn=Jt[an];if(Qt(ft,qn.key))return qn.value}return Be}case J:{var br=O(Ft,Le),jn=G(br);if(It.mask&jn){It=It.children[F(It.mask,jn)],Ft+=i;break}return Be}case Y:{if(It=It.children[O(Ft,Le)],It){Ft+=i;break}return Be}default:return Be}};be.prototype.tryGetHash=function(Be,Le,ft){return Me(Be,Le,ft,this)};var Ge=r.tryGet=function(Be,Le,ft){return Me(Be,ft._config.hash(Le),Le,ft)};be.prototype.tryGet=function(Be,Le){return Ge(Be,Le,this)};var ut=r.getHash=function(Be,Le,ft){return Me(void 0,Be,Le,ft)};be.prototype.getHash=function(Be,Le){return ut(Be,Le,this)},r.get=function(Be,Le){return Me(void 0,Le._config.hash(Be),Be,Le)},be.prototype.get=function(Be,Le){return Ge(Le,Be,this)};var ht=r.has=function(Be,Le,ft){return Me(b,Be,Le,ft)!==b};be.prototype.hasHash=function(Be,Le){return ht(Be,Le,this)};var Lt=r.has=function(Be,Le){return ht(Le._config.hash(Be),Be,Le)};be.prototype.has=function(Be){return Lt(Be,this)};var zt=function(Le,ft){return Le===ft};r.make=function(Be){return new be(0,0,{keyEq:Be&&Be.keyEq||zt,hash:Be&&Be.hash||k},he,0)},r.empty=r.make();var Rt=r.isEmpty=function(Be){return Be&&!!se(Be._root)};be.prototype.isEmpty=function(){return Rt(this)};var St=r.modifyHash=function(Be,Le,ft,yt){var It={value:yt._size},Ft=yt._root._modify(yt._editable?yt._edit:NaN,yt._config.keyEq,0,Be,Le,ft,It);return yt.setTree(Ft,It.value)};be.prototype.modifyHash=function(Be,Le,ft){return St(ft,Be,Le,this)};var Et=r.modify=function(Be,Le,ft){return St(Be,ft._config.hash(Le),Le,ft)};be.prototype.modify=function(Be,Le){return Et(Le,Be,this)};var Ct=r.setHash=function(Be,Le,ft,yt){return St(S(ft),Be,Le,yt)};be.prototype.setHash=function(Be,Le,ft){return Ct(Be,Le,ft,this)};var Kt=r.set=function(Be,Le,ft){return Ct(ft._config.hash(Be),Be,Le,ft)};be.prototype.set=function(Be,Le){return Kt(Be,Le,this)};var Nt=S(b),pn=r.removeHash=function(Be,Le,ft){return St(Nt,Be,Le,ft)};be.prototype.removeHash=be.prototype.deleteHash=function(Be,Le){return pn(Be,Le,this)};var Pn=r.remove=function(Be,Le){return pn(Le._config.hash(Be),Be,Le)};be.prototype.remove=be.prototype.delete=function(Be){return Pn(Be,this)};var vn=r.beginMutation=function(Be){return new be(Be._editable+1,Be._edit+1,Be._config,Be._root,Be._size)};be.prototype.beginMutation=function(){return vn(this)};var or=r.endMutation=function(Be){return Be._editable=Be._editable&&Be._editable-1,Be};be.prototype.endMutation=function(){return or(this)};var Wr=r.mutate=function(Be,Le){var ft=vn(Le);return Be(ft),or(ft)};be.prototype.mutate=function(Be){return Wr(Be,this)};var Ln=function(Le){return Le&&Xn(Le[0],Le[1],Le[2],Le[3],Le[4])},Xn=function(Le,ft,yt,It,Ft){for(;yt<Le;){var Qt=ft[yt++];if(Qt&&!se(Qt))return hr(Qt,It,[Le,ft,yt,It,Ft])}return Ln(Ft)},hr=function(Le,ft,yt){switch(Le.type){case U:return{value:ft(Le),rest:yt};case Z:case Y:case J:var It=Le.children;return Xn(It.length,It,0,ft,yt);default:return Ln(yt)}},fr={done:!0};function Ut(Be){this.v=Be}Ut.prototype.next=function(){if(!this.v)return fr;var Be=this.v;return this.v=Ln(Be.rest),Be},Ut.prototype[Symbol.iterator]=function(){return this};var rn=function(Le,ft){return new Ut(hr(Le._root,ft))},En=function(Le){return[Le.key,Le.value]},Tn=r.entries=function(Be){return rn(Be,En)};be.prototype.entries=be.prototype[Symbol.iterator]=function(){return Tn(this)};var Cn=function(Le){return Le.key},ln=r.keys=function(Be){return rn(Be,Cn)};be.prototype.keys=function(){return ln(this)};var Ne=function(Le){return Le.value},Ze=r.values=be.prototype.values=function(Be){return rn(Be,Ne)};be.prototype.values=function(){return Ze(this)};var lt=r.fold=function(Be,Le,ft){var yt=ft._root;if(yt.type===U)return Be(Le,yt.value,yt.key);for(var It=[yt.children],Ft=void 0;Ft=It.pop();)for(var Qt=0,Jt=Ft.length;Qt<Jt;){var an=Ft[Qt++];an&&an.type&&(an.type===U?Le=Be(Le,an.value,an.key):It.push(an.children))}return Le};be.prototype.fold=function(Be,Le){return lt(Be,Le,this)};var Gt=r.forEach=function(Be,Le){return lt(function(ft,yt,It){return Be(yt,It,Le)},null,Le)};be.prototype.forEach=function(Be){return Gt(Be,this)};var tn=r.count=function(Be){return Be._size};be.prototype.count=function(){return tn(this)},Object.defineProperty(be.prototype,"size",{get:be.prototype.count}),e.exports?e.exports=r:(void 0).hamt=r});class Z${constructor(t){Wn(this,"_map",void 0),this._map=new Map(t==null?void 0:t.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(t){return this._map.get(t)}has(t){return this._map.has(t)}set(t,r){return this._map.set(t,r),this}delete(t){return this._map.delete(t),this}clone(){return xE(this)}toMap(){return new Map(this._map)}}class vE{constructor(t){if(Wn(this,"_hamt",H$.empty.beginMutation()),t instanceof vE){const r=t._hamt.endMutation();t._hamt=r.beginMutation(),this._hamt=r.beginMutation()}else if(t)for(const[r,i]of t.entries())this._hamt.set(r,i)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(t){return this._hamt.get(t)}has(t){return this._hamt.has(t)}set(t,r){return this._hamt.set(t,r),this}delete(t){return this._hamt.delete(t),this}clone(){return xE(this)}toMap(){return new Map(this._hamt)}}function xE(e){return jr("recoil_hamt_2020")?new vE(e):new Z$(e)}var X$={persistentMap:xE},K$=X$.persistentMap,Y$=Object.freeze({__proto__:null,persistentMap:K$});function Q$(e,...t){const r=new Set;e:for(const i of e){for(const c of t)if(c.has(i))continue e;r.add(i)}return r}var Am=Q$;function J$(e,t){const r=new Map;return e.forEach((i,c)=>{r.set(c,t(i,c))}),r}var Q_=J$;function eU(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function tU(e){return{nodeDeps:Q_(e.nodeDeps,t=>new Set(t)),nodeToNodeSubscriptions:Q_(e.nodeToNodeSubscriptions,t=>new Set(t))}}function qb(e,t,r,i){const{nodeDeps:c,nodeToNodeSubscriptions:d}=r,y=c.get(e);if(y&&i&&y!==i.nodeDeps.get(e))return;c.set(e,t);const a=y==null?t:Am(t,y);for(const b of a)d.has(b)||d.set(b,new Set),oi(d.get(b)).add(e);if(y){const b=Am(y,t);for(const S of b){if(!d.has(S))return;const k=oi(d.get(S));k.delete(e),k.size===0&&d.delete(S)}}}function nU(e,t,r,i){var c,d,y,a;const b=r.getState();i===b.currentTree.version||i===((c=b.nextTree)===null||c===void 0?void 0:c.version)||((d=b.previousTree)===null||d===void 0||d.version);const S=r.getGraph(i);if(qb(e,t,S),i===((y=b.previousTree)===null||y===void 0?void 0:y.version)){const P=r.getGraph(b.currentTree.version);qb(e,t,P,S)}if(i===((a=b.previousTree)===null||a===void 0?void 0:a.version)||i===b.currentTree.version){var k;const P=(k=b.nextTree)===null||k===void 0?void 0:k.version;if(P!==void 0){const O=r.getGraph(P);qb(e,t,O,S)}}}var xg={cloneGraph:tU,graph:eU,saveDepsToStore:nU};let rU=0;const iU=()=>rU++;let oU=0;const aU=()=>oU++;let sU=0;const lU=()=>sU++;var jv={getNextTreeStateVersion:iU,getNextStoreID:aU,getNextComponentID:lU};const{persistentMap:bk}=Y$,{graph:cU}=xg,{getNextTreeStateVersion:AD}=jv;function kD(){const e=AD();return{version:e,stateID:e,transactionMetadata:{},dirtyAtoms:new Set,atomValues:bk(),nonvalidatedAtoms:bk()}}function uU(){const e=kD();return{currentTree:e,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(e.version,cU()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var RD={makeEmptyTreeState:kD,makeEmptyStoreState:uU,getNextTreeStateVersion:AD};class ID{}function dU(){return new ID}var Gv={RetentionZone:ID,retentionZone:dU};function hU(e,t){const r=new Set(e);return r.add(t),r}function fU(e,t){const r=new Set(e);return r.delete(t),r}function pU(e,t,r){const i=new Map(e);return i.set(t,r),i}function mU(e,t,r){const i=new Map(e);return i.set(t,r(i.get(t))),i}function gU(e,t){const r=new Map(e);return r.delete(t),r}function yU(e,t){const r=new Map(e);return t.forEach(i=>r.delete(i)),r}var PD={setByAddingToSet:hU,setByDeletingFromSet:fU,mapBySettingInMap:pU,mapByUpdatingInMap:mU,mapByDeletingFromMap:gU,mapByDeletingMultipleFromMap:yU};function*_U(e,t){let r=0;for(const i of e)t(i,r++)&&(yield i)}var bE=_U;function vU(e,t){return new Proxy(e,{get:(i,c)=>(!(c in i)&&c in t&&(i[c]=t[c]()),i[c]),ownKeys:i=>Object.keys(i)})}var LD=vU;const{getNode:bg,getNodeMaybe:xU,recoilValuesForKeys:wk}=$o,{RetentionZone:Sk}=Gv,{setByAddingToSet:bU}=PD,wU=Object.freeze(new Set);class SU extends Error{}function EU(e,t,r){if(!jr("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:i}=e.getState().retention;function c(d){let y=i.get(d);y||i.set(d,y=new Set),y.add(t)}if(r instanceof Sk)c(r);else if(Array.isArray(r))for(const d of r)c(d);return()=>{if(!jr("recoil_memory_managament_2020"))return;const{retention:d}=e.getState();function y(a){const b=d.nodesRetainedByZone.get(a);b==null||b.delete(t),b&&b.size===0&&d.nodesRetainedByZone.delete(a)}if(r instanceof Sk)y(r);else if(Array.isArray(r))for(const a of r)y(a)}}function wE(e,t,r,i){const c=e.getState();if(c.nodeCleanupFunctions.has(r))return;const d=bg(r),y=EU(e,r,d.retainedBy),a=d.init(e,t,i);c.nodeCleanupFunctions.set(r,()=>{a(),y()})}function TU(e,t,r){wE(e,e.getState().currentTree,t,r)}function CU(e,t){var r;const i=e.getState();(r=i.nodeCleanupFunctions.get(t))===null||r===void 0||r(),i.nodeCleanupFunctions.delete(t)}function MU(e,t,r){return wE(e,t,r,"get"),bg(r).get(e,t)}function DD(e,t,r){return bg(r).peek(e,t)}function AU(e,t,r){var i;const c=xU(t);return c==null||(i=c.invalidate)===null||i===void 0||i.call(c,e),{...e,atomValues:e.atomValues.clone().delete(t),nonvalidatedAtoms:e.nonvalidatedAtoms.clone().set(t,r),dirtyAtoms:bU(e.dirtyAtoms,t)}}function kU(e,t,r,i){const c=bg(r);if(c.set==null)throw new SU(`Attempt to set read-only RecoilValue: ${r}`);const d=c.set;return wE(e,t,r,"set"),d(e,t,i)}function RU(e,t,r){const i=e.getState(),c=e.getGraph(t.version),d=bg(r).nodeType;return LD({type:d},{loadable:()=>DD(e,t,r),isActive:()=>i.knownAtoms.has(r)||i.knownSelectors.has(r),isSet:()=>d==="selector"?!1:t.atomValues.has(r),isModified:()=>t.dirtyAtoms.has(r),deps:()=>{var y;return wk((y=c.nodeDeps.get(r))!==null&&y!==void 0?y:[])},subscribers:()=>{var y,a;return{nodes:wk(bE(zD(e,t,new Set([r])),b=>b!==r)),components:Vv((y=(a=i.nodeToComponentSubscriptions.get(r))===null||a===void 0?void 0:a.values())!==null&&y!==void 0?y:[],([b])=>({name:b}))}}})}function zD(e,t,r){const i=new Set,c=Array.from(r),d=e.getGraph(t.version);for(let a=c.pop();a;a=c.pop()){var y;i.add(a);const b=(y=d.nodeToNodeSubscriptions.get(a))!==null&&y!==void 0?y:wU;for(const S of b)i.has(S)||c.push(S)}return i}var bc={getNodeLoadable:MU,peekNodeLoadable:DD,setNodeValue:kU,initializeNode:TU,cleanUpNode:CU,setUnvalidatedAtomValue_DEPRECATED:AU,peekNodeInfo:RU,getDownstreamNodes:zD};let OD=null;function IU(e){OD=e}function PU(){var e;(e=OD)===null||e===void 0||e()}var FD={setInvalidateMemoizedSnapshot:IU,invalidateMemoizedSnapshot:PU};const{getDownstreamNodes:LU,getNodeLoadable:BD,setNodeValue:DU}=bc,{getNextComponentID:zU}=jv,{getNode:OU,getNodeMaybe:ND}=$o,{DefaultValue:SE}=$o,{reactMode:FU}=vg,{AbstractRecoilValue:BU,RecoilState:NU,RecoilValueReadOnly:$U,isRecoilValue:UU}=Wh,{invalidateMemoizedSnapshot:VU}=FD;function jU(e,{key:t},r=e.getState().currentTree){var i,c;const d=e.getState();r.version===d.currentTree.version||r.version===((i=d.nextTree)===null||i===void 0?void 0:i.version)||(r.version,(c=d.previousTree)===null||c===void 0||c.version);const y=BD(e,r,t);return y.state==="loading"&&y.contents.catch(()=>{}),y}function GU(e,t){const r=e.clone();return t.forEach((i,c)=>{i.state==="hasValue"&&i.contents instanceof SE?r.delete(c):r.set(c,i)}),r}function WU(e,t,{key:r},i){if(typeof i=="function"){const c=BD(e,t,r);if(c.state==="loading"){const d=`Tried to set atom or selector "${r}" using an updater function while the current state is pending, this is not currently supported.`;throw Yn(d)}else if(c.state==="hasError")throw c.contents;return i(c.contents)}else return i}function qU(e,t,r){if(r.type==="set"){const{recoilValue:c,valueOrUpdater:d}=r,y=WU(e,t,c,d),a=DU(e,t,c.key,y);for(const[b,S]of a.entries())I2(t,b,S)}else if(r.type==="setLoadable"){const{recoilValue:{key:c},loadable:d}=r;I2(t,c,d)}else if(r.type==="markModified"){const{recoilValue:{key:c}}=r;t.dirtyAtoms.add(c)}else if(r.type==="setUnvalidated"){var i;const{recoilValue:{key:c},unvalidatedValue:d}=r,y=ND(c);y==null||(i=y.invalidate)===null||i===void 0||i.call(y,t),t.atomValues.delete(c),t.nonvalidatedAtoms.set(c,d),t.dirtyAtoms.add(c)}else gE(`Unknown action ${r.type}`)}function I2(e,t,r){r.state==="hasValue"&&r.contents instanceof SE?e.atomValues.delete(t):e.atomValues.set(t,r),e.dirtyAtoms.add(t),e.nonvalidatedAtoms.delete(t)}function $D(e,t){e.replaceState(r=>{const i=UD(r);for(const c of t)qU(e,i,c);return VD(e,i),VU(),i})}function Wv(e,t){if(km.length){const r=km[km.length-1];let i=r.get(e);i||r.set(e,i=[]),i.push(t)}else $D(e,[t])}const km=[];function HU(){const e=new Map;return km.push(e),()=>{for(const[t,r]of e)$D(t,r);km.pop()}}function UD(e){return{...e,atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(e.dirtyAtoms)}}function VD(e,t){const r=LU(e,t,t.dirtyAtoms);for(const d of r){var i,c;(i=ND(d))===null||i===void 0||(c=i.invalidate)===null||c===void 0||c.call(i,t)}}function jD(e,t,r){Wv(e,{type:"set",recoilValue:t,valueOrUpdater:r})}function ZU(e,t,r){if(r instanceof SE)return jD(e,t,r);Wv(e,{type:"setLoadable",recoilValue:t,loadable:r})}function XU(e,t){Wv(e,{type:"markModified",recoilValue:t})}function KU(e,t,r){Wv(e,{type:"setUnvalidated",recoilValue:t,unvalidatedValue:r})}function YU(e,{key:t},r,i=null){const c=zU(),d=e.getState();d.nodeToComponentSubscriptions.has(t)||d.nodeToComponentSubscriptions.set(t,new Map),oi(d.nodeToComponentSubscriptions.get(t)).set(c,[i??"<not captured>",r]);const y=FU();if(y.early&&(y.mode==="LEGACY"||y.mode==="MUTABLE_SOURCE")){const a=e.getState().nextTree;a&&a.dirtyAtoms.has(t)&&r(a)}return{release:()=>{const a=e.getState(),b=a.nodeToComponentSubscriptions.get(t);b===void 0||!b.has(c)||(b.delete(c),b.size===0&&a.nodeToComponentSubscriptions.delete(t))}}}function QU(e,t){var r;const{currentTree:i}=e.getState(),c=OU(t.key);(r=c.clearCache)===null||r===void 0||r.call(c,e,i)}var vs={RecoilValueReadOnly:$U,AbstractRecoilValue:BU,RecoilState:NU,getRecoilValueAsLoadable:jU,setRecoilValue:jD,setRecoilValueLoadable:ZU,markRecoilValueModified:XU,setUnvalidatedRecoilValue:KU,subscribeToRecoilValue:YU,isRecoilValue:UU,applyAtomValueWrites:GU,batchStart:HU,writeLoadableToTreeState:I2,invalidateDownstreams:VD,copyTreeState:UD,refreshRecoilValue:QU};function JU(e,t,r){const i=e.entries();let c=i.next();for(;!c.done;){const d=c.value;if(t.call(r,d[1],d[0],e))return!0;c=i.next()}return!1}var eV=JU;const{cleanUpNode:tV}=bc,{deleteNodeConfigIfPossible:nV,getNode:GD}=$o,{RetentionZone:WD}=Gv,rV=12e4,qD=new Set;function HD(e,t){const r=e.getState(),i=r.currentTree;if(r.nextTree)return;const c=new Set;for(const y of t)if(y instanceof WD)for(const a of sV(r,y))c.add(a);else c.add(y);const d=iV(e,c);for(const y of d)aV(e,i,y)}function iV(e,t){const r=e.getState(),i=r.currentTree,c=e.getGraph(i.version),d=new Set,y=new Set;return a(t),d;function a(b){const S=new Set,k=oV(e,i,b,d,y);for(const F of k){var P;if(GD(F).retainedBy==="recoilRoot"){y.add(F);continue}if(((P=r.retention.referenceCounts.get(F))!==null&&P!==void 0?P:0)>0){y.add(F);continue}if(ZD(F).some(ce=>r.retention.referenceCounts.get(ce))){y.add(F);continue}const q=c.nodeToNodeSubscriptions.get(F);if(q&&eV(q,ce=>y.has(ce))){y.add(F);continue}d.add(F),S.add(F)}const O=new Set;for(const F of S)for(const q of(G=c.nodeDeps.get(F))!==null&&G!==void 0?G:qD){var G;d.has(q)||O.add(q)}O.size&&a(O)}}function oV(e,t,r,i,c){const d=e.getGraph(t.version),y=[],a=new Set;for(;r.size>0;)b(oi(r.values().next().value));return y;function b(S){if(i.has(S)||c.has(S)){r.delete(S);return}if(a.has(S))return;const k=d.nodeToNodeSubscriptions.get(S);if(k)for(const P of k)b(P);a.add(S),r.delete(S),y.push(S)}}function aV(e,t,r){if(!jr("recoil_memory_managament_2020"))return;tV(e,r);const i=e.getState();i.knownAtoms.delete(r),i.knownSelectors.delete(r),i.nodeTransactionSubscriptions.delete(r),i.retention.referenceCounts.delete(r);const c=ZD(r);for(const b of c){var d;(d=i.retention.nodesRetainedByZone.get(b))===null||d===void 0||d.delete(r)}t.atomValues.delete(r),t.dirtyAtoms.delete(r),t.nonvalidatedAtoms.delete(r);const y=i.graphsByVersion.get(t.version);if(y){const b=y.nodeDeps.get(r);if(b!==void 0){y.nodeDeps.delete(r);for(const S of b){var a;(a=y.nodeToNodeSubscriptions.get(S))===null||a===void 0||a.delete(r)}}y.nodeToNodeSubscriptions.delete(r)}nV(r)}function sV(e,t){var r;return(r=e.retention.nodesRetainedByZone.get(t))!==null&&r!==void 0?r:qD}function ZD(e){const t=GD(e).retainedBy;return t===void 0||t==="components"||t==="recoilRoot"?[]:t instanceof WD?[t]:t}function lV(e,t){const r=e.getState();r.nextTree?r.retention.retainablesToCheckForRelease.add(t):HD(e,new Set([t]))}function cV(e,t,r){var i;if(!jr("recoil_memory_managament_2020"))return;const c=e.getState().retention.referenceCounts,d=((i=c.get(t))!==null&&i!==void 0?i:0)+r;d===0?XD(e,t):c.set(t,d)}function XD(e,t){if(!jr("recoil_memory_managament_2020"))return;e.getState().retention.referenceCounts.delete(t),lV(e,t)}function uV(e){if(!jr("recoil_memory_managament_2020"))return;const t=e.getState();HD(e,t.retention.retainablesToCheckForRelease),t.retention.retainablesToCheckForRelease.clear()}function dV(e){return e===void 0?"recoilRoot":e}var Xu={SUSPENSE_TIMEOUT_MS:rV,updateRetainCount:cV,updateRetainCountToZero:XD,releaseScheduledRetainablesNow:uV,retainedByOptionWithDefault:dV};const{unstable_batchedUpdates:hV}=xh;var fV={unstable_batchedUpdates:hV};const{unstable_batchedUpdates:pV}=fV;var mV={unstable_batchedUpdates:pV};const{batchStart:gV}=vs,{unstable_batchedUpdates:yV}=mV;let EE=yV||(e=>e());const _V=e=>{EE=e},vV=()=>EE,xV=e=>{EE(()=>{let t=()=>{};try{t=gV(),e()}finally{t()}})};var qv={getBatcher:vV,setBatcher:_V,batchUpdates:xV};function*bV(e){for(const t of e)for(const r of t)yield r}var KD=bV;const YD=typeof Window>"u"||typeof window>"u",wV=e=>!YD&&(e===window||e instanceof Window),SV=typeof navigator<"u"&&navigator.product==="ReactNative";var Hv={isSSR:YD,isReactNative:SV,isWindow:wV};function EV(e,t){let r;return(...i)=>{r||(r={});const c=t(...i);return Object.hasOwnProperty.call(r,c)||(r[c]=e(...i)),r[c]}}function TV(e,t){let r,i;return(...c)=>{const d=t(...c);return r===d||(r=d,i=e(...c)),i}}function CV(e,t){let r,i;return[(...y)=>{const a=t(...y);return r===a||(r=a,i=e(...y)),i},()=>{r=null}]}var MV={memoizeWithArgsHash:EV,memoizeOneWithArgsHash:TV,memoizeOneWithArgsHashAndInvalidation:CV};const{batchUpdates:P2}=qv,{initializeNode:AV,peekNodeInfo:kV}=bc,{graph:RV}=xg,{getNextStoreID:IV}=jv,{DEFAULT_VALUE:PV,recoilValues:Ek,recoilValuesForKeys:Tk}=$o,{AbstractRecoilValue:LV,getRecoilValueAsLoadable:DV,setRecoilValue:Ck,setUnvalidatedRecoilValue:zV}=vs,{updateRetainCount:y_}=Xu,{setInvalidateMemoizedSnapshot:OV}=FD,{getNextTreeStateVersion:FV,makeEmptyStoreState:BV}=RD,{isSSR:NV}=Hv,{memoizeOneWithArgsHashAndInvalidation:$V}=MV;class Zv{constructor(t,r){Wn(this,"_store",void 0),Wn(this,"_refCount",1),Wn(this,"getLoadable",i=>(this.checkRefCount_INTERNAL(),DV(this._store,i))),Wn(this,"getPromise",i=>(this.checkRefCount_INTERNAL(),this.getLoadable(i).toPromise())),Wn(this,"getNodes_UNSTABLE",i=>{if(this.checkRefCount_INTERNAL(),(i==null?void 0:i.isModified)===!0){if((i==null?void 0:i.isInitialized)===!1)return[];const y=this._store.getState().currentTree;return Tk(y.dirtyAtoms)}const c=this._store.getState().knownAtoms,d=this._store.getState().knownSelectors;return(i==null?void 0:i.isInitialized)==null?Ek.values():i.isInitialized===!0?Tk(KD([c,d])):bE(Ek.values(),({key:y})=>!c.has(y)&&!d.has(y))}),Wn(this,"getInfo_UNSTABLE",({key:i})=>(this.checkRefCount_INTERNAL(),kV(this._store,this._store.getState().currentTree,i))),Wn(this,"map",i=>{this.checkRefCount_INTERNAL();const c=new L2(this,P2);return i(c),c}),Wn(this,"asyncMap",async i=>{this.checkRefCount_INTERNAL();const c=new L2(this,P2);return c.retain(),await i(c),c.autoRelease_INTERNAL(),c}),this._store={storeID:IV(),parentStoreID:r,getState:()=>t,replaceState:i=>{t.currentTree=i(t.currentTree)},getGraph:i=>{const c=t.graphsByVersion;if(c.has(i))return oi(c.get(i));const d=RV();return c.set(i,d),d},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw Yn("Cannot subscribe to Snapshots")}};for(const i of this._store.getState().knownAtoms)AV(this._store,i,"get"),y_(this._store,i,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0,this._refCount++;let t=!1;return()=>{t||(t=!0,this._release())}}autoRelease_INTERNAL(){NV||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(t=>t()),this._store.getState().nodeCleanupFunctions.clear(),!jr("recoil_memory_managament_2020"))return}else this._refCount<0}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){jr("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function QD(e,t,r=!1){const i=e.getState(),c=r?FV():t.version;return{currentTree:{version:r?c:t.version,stateID:r?c:t.stateID,transactionMetadata:{...t.transactionMetadata},dirtyAtoms:new Set(t.dirtyAtoms),atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(i.knownAtoms),knownSelectors:new Set(i.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(c,e.getGraph(t.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(Vv(i.nodeCleanupFunctions.entries(),([d])=>[d,()=>{}]))}}function UV(e){const t=new Zv(BV());return e!=null?t.map(e):t}const[Mk,JD]=$V((e,t)=>{var r;const i=e.getState(),c=t==="latest"?(r=i.nextTree)!==null&&r!==void 0?r:i.currentTree:oi(i.previousTree);return new Zv(QD(e,c),e.storeID)},(e,t)=>{var r,i;return String(t)+String(e.storeID)+String((r=e.getState().nextTree)===null||r===void 0?void 0:r.version)+String(e.getState().currentTree.version)+String((i=e.getState().previousTree)===null||i===void 0?void 0:i.version)});OV(JD);function VV(e,t="latest"){const r=Mk(e,t);return r.isRetained()?r:(JD(),Mk(e,t))}class L2 extends Zv{constructor(t,r){super(QD(t.getStore_INTERNAL(),t.getStore_INTERNAL().getState().currentTree,!0),t.getStoreID()),Wn(this,"_batch",void 0),Wn(this,"set",(i,c)=>{this.checkRefCount_INTERNAL();const d=this.getStore_INTERNAL();this._batch(()=>{y_(d,i.key,1),Ck(this.getStore_INTERNAL(),i,c)})}),Wn(this,"reset",i=>{this.checkRefCount_INTERNAL();const c=this.getStore_INTERNAL();this._batch(()=>{y_(c,i.key,1),Ck(this.getStore_INTERNAL(),i,PV)})}),Wn(this,"setUnvalidatedAtomValues_DEPRECATED",i=>{this.checkRefCount_INTERNAL();const c=this.getStore_INTERNAL();P2(()=>{for(const[d,y]of i.entries())y_(c,d,1),zV(c,new LV(d),y)})}),this._batch=r}}var Xv={Snapshot:Zv,MutableSnapshot:L2,freshSnapshot:UV,cloneSnapshot:VV},jV=Xv.Snapshot,GV=Xv.MutableSnapshot,WV=Xv.freshSnapshot,qV=Xv.cloneSnapshot,Kv=Object.freeze({__proto__:null,Snapshot:jV,MutableSnapshot:GV,freshSnapshot:WV,cloneSnapshot:qV});function HV(...e){const t=new Set;for(const r of e)for(const i of r)t.add(i);return t}var ZV=HV;const{useRef:XV}=Qe;function KV(e){const t=XV(e);return t.current===e&&typeof e=="function"&&(t.current=e()),t}var Ak=KV;const{getNextTreeStateVersion:YV,makeEmptyStoreState:ez}=RD,{cleanUpNode:QV,getDownstreamNodes:JV,initializeNode:ej,setNodeValue:tj,setUnvalidatedAtomValue_DEPRECATED:nj}=bc,{graph:rj}=xg,{cloneGraph:ij}=xg,{getNextStoreID:tz}=jv,{createMutableSource:Hb,reactMode:nz}=vg,{applyAtomValueWrites:oj}=vs,{releaseScheduledRetainablesNow:rz}=Xu,{freshSnapshot:aj}=Kv,{useCallback:sj,useContext:iz,useEffect:D2,useMemo:lj,useRef:cj,useState:uj}=Qe;function Wp(){throw Yn("This component must be used inside a <RecoilRoot> component.")}const oz=Object.freeze({storeID:tz(),getState:Wp,replaceState:Wp,getGraph:Wp,subscribeToTransactions:Wp,addTransactionMetadata:Wp});let z2=!1;function kk(e){if(z2)throw Yn("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const t=e.getState();if(t.nextTree===null){jr("recoil_memory_managament_2020")&&jr("recoil_release_on_cascading_update_killswitch_2021")&&t.commitDepth>0&&rz(e);const r=t.currentTree.version,i=YV();t.nextTree={...t.currentTree,version:i,stateID:i,dirtyAtoms:new Set,transactionMetadata:{}},t.graphsByVersion.set(i,ij(oi(t.graphsByVersion.get(r))))}}const az=Qe.createContext({current:oz}),Yv=()=>iz(az),sz=Qe.createContext(null);function dj(){return iz(sz)}function TE(e,t,r){const i=JV(e,r,r.dirtyAtoms);for(const c of i){const d=t.nodeToComponentSubscriptions.get(c);if(d)for(const[y,[a,b]]of d)b(r)}}function lz(e){const t=e.getState(),r=t.currentTree,i=r.dirtyAtoms;if(i.size){for(const[c,d]of t.nodeTransactionSubscriptions)if(i.has(c))for(const[y,a]of d)a(e);for(const[c,d]of t.transactionSubscriptions)d(e);(!nz().early||t.suspendedComponentResolvers.size>0)&&(TE(e,t,r),t.suspendedComponentResolvers.forEach(c=>c()),t.suspendedComponentResolvers.clear())}t.queuedComponentCallbacks_DEPRECATED.forEach(c=>c(r)),t.queuedComponentCallbacks_DEPRECATED.splice(0,t.queuedComponentCallbacks_DEPRECATED.length)}function hj(e){const t=e.getState();t.commitDepth++;try{const{nextTree:r}=t;if(r==null)return;t.previousTree=t.currentTree,t.currentTree=r,t.nextTree=null,lz(e),t.previousTree!=null?t.graphsByVersion.delete(t.previousTree.version):gE("Ended batch with no previous state, which is unexpected","recoil"),t.previousTree=null,jr("recoil_memory_managament_2020")&&r==null&&rz(e)}finally{t.commitDepth--}}function fj({setNotifyBatcherOfChange:e}){const t=Yv(),[,r]=uj([]);return e(()=>r({})),D2(()=>(e(()=>r({})),()=>{e(()=>{})}),[e]),D2(()=>{W$.enqueueExecution("Batcher",()=>{hj(t.current)})}),null}function pj(e,t){const r=ez();return t({set:(i,c)=>{const d=r.currentTree,y=tj(e,d,i.key,c),a=new Set(y.keys()),b=d.nonvalidatedAtoms.clone();for(const S of a)b.delete(S);r.currentTree={...d,dirtyAtoms:ZV(d.dirtyAtoms,a),atomValues:oj(d.atomValues,y),nonvalidatedAtoms:b}},setUnvalidatedAtomValues:i=>{i.forEach((c,d)=>{r.currentTree=nj(r.currentTree,d,c)})}}),r}function mj(e){const t=aj(e),r=t.getStore_INTERNAL().getState();return t.retain(),r.nodeCleanupFunctions.forEach(i=>i()),r.nodeCleanupFunctions.clear(),r}let Rk=0;function gj({initializeState_DEPRECATED:e,initializeState:t,store_INTERNAL:r,children:i}){let c;const d=G=>{const F=c.current.graphsByVersion;if(F.has(G))return oi(F.get(G));const q=rj();return F.set(G,q),q},y=(G,F)=>{if(F==null){const{transactionSubscriptions:q}=P.current.getState(),ce=Rk++;return q.set(ce,G),{release:()=>{q.delete(ce)}}}else{const{nodeTransactionSubscriptions:q}=P.current.getState();q.has(F)||q.set(F,new Map);const ce=Rk++;return oi(q.get(F)).set(ce,G),{release:()=>{const B=q.get(F);B&&(B.delete(ce),B.size===0&&q.delete(F))}}}},a=G=>{kk(P.current);for(const F of Object.keys(G))oi(P.current.getState().nextTree).transactionMetadata[F]=G[F]},b=G=>{kk(P.current);const F=oi(c.current.nextTree);let q;try{z2=!0,q=G(F)}finally{z2=!1}q!==F&&(c.current.nextTree=q,nz().early&&TE(P.current,c.current,q),oi(S.current)())},S=cj(null),k=sj(G=>{S.current=G},[S]),P=Ak(()=>r??{storeID:tz(),getState:()=>c.current,replaceState:b,getGraph:d,subscribeToTransactions:y,addTransactionMetadata:a});r!=null&&(P.current=r),c=Ak(()=>e!=null?pj(P.current,e):t!=null?mj(t):ez());const O=lj(()=>Hb==null?void 0:Hb(c,()=>c.current.currentTree.version),[c]);return D2(()=>{const G=P.current;for(const F of new Set(G.getState().knownAtoms))ej(G,F,"get");return()=>{for(const F of G.getState().knownAtoms)QV(G,F)}},[P]),Qe.createElement(az.Provider,{value:P},Qe.createElement(sz.Provider,{value:O},Qe.createElement(fj,{setNotifyBatcherOfChange:k}),i))}function yj(e){const{override:t,...r}=e,i=Yv();return t===!1&&i.current!==oz?e.children:Qe.createElement(gj,r)}function _j(){return Yv().current.storeID}var ol={RecoilRoot:yj,useStoreRef:Yv,useRecoilMutableSource:dj,useRecoilStoreID:_j,notifyComponents_FOR_TESTING:TE,sendEndOfBatchNotifications_FOR_TESTING:lz};function vj(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0}var xj=vj;const{useEffect:bj,useRef:wj}=Qe;function Sj(e){const t=wj();return bj(()=>{t.current=e}),t.current}var cz=Sj;const{useStoreRef:Ej}=ol,{SUSPENSE_TIMEOUT_MS:Tj}=Xu,{updateRetainCount:qp}=Xu,{RetentionZone:Cj}=Gv,{useEffect:Mj,useRef:Aj}=Qe,{isSSR:Ik}=Hv;function kj(e){if(jr("recoil_memory_managament_2020"))return Rj(e)}function Rj(e){const r=(Array.isArray(e)?e:[e]).map(y=>y instanceof Cj?y:y.key),i=Ej();Mj(()=>{if(!jr("recoil_memory_managament_2020"))return;const y=i.current;if(c.current&&!Ik)window.clearTimeout(c.current),c.current=null;else for(const a of r)qp(y,a,1);return()=>{for(const a of r)qp(y,a,-1)}},[i,...r]);const c=Aj(),d=cz(r);if(!Ik&&(d===void 0||!xj(d,r))){const y=i.current;for(const a of r)qp(y,a,1);if(d)for(const a of d)qp(y,a,-1);c.current&&window.clearTimeout(c.current),c.current=window.setTimeout(()=>{c.current=null;for(const a of r)qp(y,a,-1)},Tj)}}var CE=kj;function Ij(){return"<component name not available>"}var wg=Ij;const{batchUpdates:Pj}=qv,{DEFAULT_VALUE:uz}=$o,{currentRendererSupportsUseSyncExternalStore:Lj,reactMode:af,useMutableSource:Dj,useSyncExternalStore:zj}=vg,{useRecoilMutableSource:Oj,useStoreRef:xs}=ol,{AbstractRecoilValue:O2,getRecoilValueAsLoadable:Sg,setRecoilValue:J_,setUnvalidatedRecoilValue:Fj,subscribeToRecoilValue:qh}=vs,{useCallback:Oo,useEffect:Hh,useMemo:dz,useRef:Rm,useState:ME}=Qe,{setByAddingToSet:Bj}=PD,{isSSR:Nj}=Hv;function AE(e,t,r){if(e.state==="hasValue")return e.contents;throw e.state==="loading"?new Promise(c=>{const d=r.current.getState().suspendedComponentResolvers;d.add(c),Nj&&Yr(e.contents)&&e.contents.finally(()=>{d.delete(c)})}):e.state==="hasError"?e.contents:Yn(`Invalid value of loadable atom "${t.key}"`)}function $j(){const e=wg(),t=xs(),[,r]=ME([]),i=Rm(new Set);i.current=new Set;const c=Rm(new Set),d=Rm(new Map),y=Oo(b=>{const S=d.current.get(b);S&&(S.release(),d.current.delete(b))},[d]),a=Oo((b,S)=>{d.current.has(S)&&r([])},[]);return Hh(()=>{const b=t.current;Am(i.current,c.current).forEach(S=>{if(d.current.has(S))return;const k=qh(b,new O2(S),O=>a(O,S),e);d.current.set(S,k),b.getState().nextTree?b.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a(b.getState(),S)}):a(b.getState(),S)}),Am(c.current,i.current).forEach(S=>{y(S)}),c.current=i.current}),Hh(()=>{const b=d.current;return Am(i.current,new Set(b.keys())).forEach(S=>{const k=qh(t.current,new O2(S),P=>a(P,S),e);b.set(S,k)}),()=>b.forEach((S,k)=>y(k))},[e,t,y,a]),dz(()=>{function b(F){return q=>{J_(t.current,F,q)}}function S(F){return()=>J_(t.current,F,uz)}function k(F){var q;i.current.has(F.key)||(i.current=Bj(i.current,F.key));const ce=t.current.getState();return Sg(t.current,F,af().early&&(q=ce.nextTree)!==null&&q!==void 0?q:ce.currentTree)}function P(F){const q=k(F);return AE(q,F,t)}function O(F){return[P(F),b(F)]}function G(F){return[k(F),b(F)]}return{getRecoilValue:P,getRecoilValueLoadable:k,getRecoilState:O,getRecoilStateLoadable:G,getSetRecoilState:b,getResetRecoilState:S}},[i,t])}const Uj={current:0};function Vj(e){const t=xs(),r=wg(),i=Oo(()=>{var a;const b=t.current,S=b.getState(),k=af().early&&(a=S.nextTree)!==null&&a!==void 0?a:S.currentTree;return{loadable:Sg(b,e,k),key:e.key}},[t,e]),c=Oo(a=>{let b;return()=>{var S,k;const P=a();return(S=b)!==null&&S!==void 0&&S.loadable.is(P.loadable)&&((k=b)===null||k===void 0?void 0:k.key)===P.key?b:(b=P,P)}},[]),d=dz(()=>c(i),[i,c]),y=Oo(a=>{const b=t.current;return qh(b,e,a,r).release},[t,e,r]);return zj(y,d,d).loadable}function jj(e){const t=xs(),r=Oo(()=>{var S;const k=t.current,P=k.getState(),O=af().early&&(S=P.nextTree)!==null&&S!==void 0?S:P.currentTree;return Sg(k,e,O)},[t,e]),i=Oo(()=>r(),[r]),c=wg(),d=Oo((S,k)=>{const P=t.current;return qh(P,e,()=>{if(!jr("recoil_suppress_rerender_in_callback"))return k();const G=r();b.current.is(G)||k(),b.current=G},c).release},[t,e,c,r]),y=Oj();if(y==null)throw Yn("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const a=Dj(y,i,d),b=Rm(a);return Hh(()=>{b.current=a}),a}function F2(e){const t=xs(),r=wg(),i=Oo(()=>{var b;const S=t.current,k=S.getState(),P=af().early&&(b=k.nextTree)!==null&&b!==void 0?b:k.currentTree;return Sg(S,e,P)},[t,e]),c=Oo(()=>({loadable:i(),key:e.key}),[i,e.key]),d=Oo(b=>{const S=c();return b.loadable.is(S.loadable)&&b.key===S.key?b:S},[c]);Hh(()=>{const b=qh(t.current,e,S=>{a(d)},r);return a(d),b.release},[r,e,t,d]);const[y,a]=ME(c);return y.key!==e.key?c().loadable:y.loadable}function Gj(e){const t=xs(),[,r]=ME([]),i=wg(),c=Oo(()=>{var a;const b=t.current,S=b.getState(),k=af().early&&(a=S.nextTree)!==null&&a!==void 0?a:S.currentTree;return Sg(b,e,k)},[t,e]),d=c(),y=Rm(d);return Hh(()=>{y.current=d}),Hh(()=>{const a=t.current,b=a.getState(),S=qh(a,e,P=>{var O;if(!jr("recoil_suppress_rerender_in_callback"))return r([]);const G=c();(O=y.current)!==null&&O!==void 0&&O.is(G)||r(G),y.current=G},i);if(b.nextTree)a.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{y.current=null,r([])});else{var k;if(!jr("recoil_suppress_rerender_in_callback"))return r([]);const P=c();(k=y.current)!==null&&k!==void 0&&k.is(P)||r(P),y.current=P}return S.release},[i,c,e,t]),d}function kE(e){return jr("recoil_memory_managament_2020")&&CE(e),{TRANSITION_SUPPORT:F2,SYNC_EXTERNAL_STORE:Lj()?Vj:F2,MUTABLE_SOURCE:jj,LEGACY:Gj}[af().mode](e)}function hz(e){const t=xs(),r=kE(e);return AE(r,e,t)}function Qv(e){const t=xs();return Oo(r=>{J_(t.current,e,r)},[t,e])}function Wj(e){const t=xs();return Oo(()=>{J_(t.current,e,uz)},[t,e])}function qj(e){return[hz(e),Qv(e)]}function Hj(e){return[kE(e),Qv(e)]}function Zj(){const e=xs();return(t,r={})=>{Pj(()=>{e.current.addTransactionMetadata(r),t.forEach((i,c)=>Fj(e.current,new O2(c),i))})}}function fz(e){return jr("recoil_memory_managament_2020")&&CE(e),F2(e)}function pz(e){const t=xs(),r=fz(e);return AE(r,e,t)}function Xj(e){return[pz(e),Qv(e)]}var Kj={recoilComponentGetRecoilValueCount_FOR_TESTING:Uj,useRecoilInterface:$j,useRecoilState:qj,useRecoilStateLoadable:Hj,useRecoilValue:hz,useRecoilValueLoadable:kE,useResetRecoilState:Wj,useSetRecoilState:Qv,useSetUnvalidatedAtomValues:Zj,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:fz,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:pz,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:Xj};function Yj(e,t){const r=new Map;for(const[i,c]of e)t(c,i)&&r.set(i,c);return r}var Qj=Yj;function Jj(e,t){const r=new Set;for(const i of e)t(i)&&r.add(i);return r}var e9=Jj;function t9(...e){const t=new Map;for(let r=0;r<e.length;r++){const i=e[r].keys();let c;for(;!(c=i.next()).done;)t.set(c.value,e[r].get(c.value))}return t}var n9=t9;const{batchUpdates:r9}=qv,{DEFAULT_VALUE:i9,getNode:mz,nodes:o9}=$o,{useStoreRef:RE}=ol,{AbstractRecoilValue:a9,setRecoilValueLoadable:s9}=vs,{SUSPENSE_TIMEOUT_MS:l9}=Xu,{cloneSnapshot:ev}=Kv,{useCallback:Jv,useEffect:gz,useRef:Pk,useState:c9}=Qe,{isSSR:Lk}=Hv;function e1(e){const t=RE();gz(()=>t.current.subscribeToTransactions(e).release,[e,t])}function Dk(e){const t=e.atomValues.toMap(),r=Q_(Qj(t,(i,c)=>{const y=mz(c).persistence_UNSTABLE;return y!=null&&y.type!=="none"&&i.state==="hasValue"}),i=>i.contents);return n9(e.nonvalidatedAtoms.toMap(),r)}function u9(e){e1(Jv(t=>{let r=t.getState().previousTree;const i=t.getState().currentTree;r||(r=t.getState().currentTree);const c=Dk(i),d=Dk(r),y=Q_(o9,b=>{var S,k,P,O;return{persistence_UNSTABLE:{type:(S=(k=b.persistence_UNSTABLE)===null||k===void 0?void 0:k.type)!==null&&S!==void 0?S:"none",backButton:(P=(O=b.persistence_UNSTABLE)===null||O===void 0?void 0:O.backButton)!==null&&P!==void 0?P:!1}}}),a=e9(i.dirtyAtoms,b=>c.has(b)||d.has(b));e({atomValues:c,previousAtomValues:d,atomInfo:y,modifiedAtoms:a,transactionMetadata:{...i.transactionMetadata}})},[e]))}function d9(e){e1(Jv(t=>{const r=ev(t,"latest"),i=ev(t,"previous");e({snapshot:r,previousSnapshot:i})},[e]))}function h9(){const e=RE(),[t,r]=c9(()=>ev(e.current)),i=cz(t),c=Pk(),d=Pk();if(e1(Jv(a=>r(ev(a)),[])),gz(()=>{const a=t.retain();if(c.current&&!Lk){var b;window.clearTimeout(c.current),c.current=null,(b=d.current)===null||b===void 0||b.call(d),d.current=null}return()=>{window.setTimeout(a,10)}},[t]),i!==t&&!Lk){if(c.current){var y;window.clearTimeout(c.current),c.current=null,(y=d.current)===null||y===void 0||y.call(d),d.current=null}d.current=t.retain(),c.current=window.setTimeout(()=>{var a;c.current=null,(a=d.current)===null||a===void 0||a.call(d),d.current=null},l9)}return t}function yz(e,t){var r;const i=e.getState(),c=(r=i.nextTree)!==null&&r!==void 0?r:i.currentTree,d=t.getStore_INTERNAL().getState().currentTree;r9(()=>{const y=new Set;for(const S of[c.atomValues.keys(),d.atomValues.keys()])for(const k of S){var a,b;((a=c.atomValues.get(k))===null||a===void 0?void 0:a.contents)!==((b=d.atomValues.get(k))===null||b===void 0?void 0:b.contents)&&mz(k).shouldRestoreFromSnapshots&&y.add(k)}y.forEach(S=>{s9(e,new a9(S),d.atomValues.has(S)?oi(d.atomValues.get(S)):i9)}),e.replaceState(S=>({...S,stateID:t.getID()}))})}function f9(){const e=RE();return Jv(t=>yz(e.current,t),[e])}var _z={useRecoilSnapshot:h9,gotoSnapshot:yz,useGotoRecoilSnapshot:f9,useRecoilTransactionObserver:d9,useTransactionObservation_DEPRECATED:u9,useTransactionSubscription_DEPRECATED:e1};const{peekNodeInfo:p9}=bc,{useStoreRef:m9}=ol;function g9(){const e=m9();return({key:t})=>p9(e.current,e.current.getState().currentTree,t)}var y9=g9;const{reactMode:_9}=vg,{RecoilRoot:v9,useStoreRef:x9}=ol,{useMemo:b9}=Qe;function w9(){_9().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const e=x9().current;return b9(()=>{function t({children:r}){return Qe.createElement(v9,{store_INTERNAL:e},r)}return t},[e])}var S9=w9;const{loadableWithValue:E9}=_g,{initializeNode:T9}=bc,{DEFAULT_VALUE:C9,getNode:M9}=$o,{copyTreeState:A9,getRecoilValueAsLoadable:k9,invalidateDownstreams:R9,writeLoadableToTreeState:I9}=vs;function zk(e){return M9(e.key).nodeType==="atom"}class P9{constructor(t,r){Wn(this,"_store",void 0),Wn(this,"_treeState",void 0),Wn(this,"_changes",void 0),Wn(this,"get",i=>{if(this._changes.has(i.key))return this._changes.get(i.key);if(!zk(i))throw Yn("Reading selectors within atomicUpdate is not supported");const c=k9(this._store,i,this._treeState);if(c.state==="hasValue")return c.contents;throw c.state==="hasError"?c.contents:Yn(`Expected Recoil atom ${i.key} to have a value, but it is in a loading state.`)}),Wn(this,"set",(i,c)=>{if(!zk(i))throw Yn("Setting selectors within atomicUpdate is not supported");if(typeof c=="function"){const d=this.get(i);this._changes.set(i.key,c(d))}else T9(this._store,i.key,"set"),this._changes.set(i.key,c)}),Wn(this,"reset",i=>{this.set(i,C9)}),this._store=t,this._treeState=r,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const t=A9(this._treeState);for(const[r,i]of this._changes)I9(t,r,E9(i));return R9(this._store,t),t}}function L9(e){return t=>{e.replaceState(r=>{const i=new P9(e,r);return t(i),i.newTreeState_INTERNAL()})}}var D9={atomicUpdater:L9},z9=D9.atomicUpdater,vz=Object.freeze({__proto__:null,atomicUpdater:z9});function O9(e,t){if(!e)throw new Error(t)}var F9=O9,pm=F9;const{atomicUpdater:B9}=vz,{batchUpdates:N9}=qv,{DEFAULT_VALUE:$9}=$o,{useStoreRef:U9}=ol,{refreshRecoilValue:V9,setRecoilValue:Ok}=vs,{cloneSnapshot:j9}=Kv,{gotoSnapshot:G9}=_z,{useCallback:W9}=Qe;class xz{}const q9=new xz;function bz(e,t,r,i){let c=q9,d;if(N9(()=>{const a="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof t!="function")throw Yn(a);const b=LD({...i??{},set:(k,P)=>Ok(e,k,P),reset:k=>Ok(e,k,$9),refresh:k=>V9(e,k),gotoSnapshot:k=>G9(e,k),transact_UNSTABLE:k=>B9(e)(k)},{snapshot:()=>{const k=j9(e);return d=k.retain(),k}}),S=t(b);if(typeof S!="function")throw Yn(a);c=S(...r)}),c instanceof xz&&pm(!1),Yr(c))c=c.finally(()=>{var a;(a=d)===null||a===void 0||a()});else{var y;(y=d)===null||y===void 0||y()}return c}function H9(e,t){const r=U9();return W9((...i)=>bz(r.current,e,i),t!=null?[...t,r]:void 0)}var wz={recoilCallback:bz,useRecoilCallback:H9};const{useStoreRef:Z9}=ol,{refreshRecoilValue:X9}=vs,{useCallback:K9}=Qe;function Y9(e){const t=Z9();return K9(()=>{const r=t.current;X9(r,e)},[e,t])}var Q9=Y9;const{atomicUpdater:J9}=vz,{useStoreRef:e7}=ol,{useMemo:t7}=Qe;function n7(e,t){const r=e7();return t7(()=>(...i)=>{J9(r.current)(d=>{e(d)(...i)})},t!=null?[...t,r]:void 0)}var r7=n7;class i7{constructor(t){Wn(this,"value",void 0),this.value=t}}var o7={WrappedValue:i7},a7=o7.WrappedValue,Sz=Object.freeze({__proto__:null,WrappedValue:a7});const{isFastRefreshEnabled:s7}=vg;class Fk extends Error{}class l7{constructor(t){var r,i,c;Wn(this,"_name",void 0),Wn(this,"_numLeafs",void 0),Wn(this,"_root",void 0),Wn(this,"_onHit",void 0),Wn(this,"_onSet",void 0),Wn(this,"_mapNodeValue",void 0),this._name=t==null?void 0:t.name,this._numLeafs=0,this._root=null,this._onHit=(r=t==null?void 0:t.onHit)!==null&&r!==void 0?r:()=>{},this._onSet=(i=t==null?void 0:t.onSet)!==null&&i!==void 0?i:()=>{},this._mapNodeValue=(c=t==null?void 0:t.mapNodeValue)!==null&&c!==void 0?c:d=>d}size(){return this._numLeafs}root(){return this._root}get(t,r){var i;return(i=this.getLeafNode(t,r))===null||i===void 0?void 0:i.value}getLeafNode(t,r){if(this._root==null)return;let i=this._root;for(;i;){if(r==null||r.onNodeVisit(i),i.type==="leaf")return this._onHit(i),i;const c=this._mapNodeValue(t(i.nodeKey));i=i.branches.get(c)}}set(t,r,i){const c=()=>{var d,y,a,b;let S,k;for(const[ce,B]of t){var P,O,G;const U=this._root;if((U==null?void 0:U.type)==="leaf")throw this.invalidCacheError();const Z=S;if(S=Z?Z.branches.get(k):U,S=(P=S)!==null&&P!==void 0?P:{type:"branch",nodeKey:ce,parent:Z,branches:new Map,branchKey:k},S.type!=="branch"||S.nodeKey!==ce)throw this.invalidCacheError();Z==null||Z.branches.set(k,S),i==null||(O=i.onNodeVisit)===null||O===void 0||O.call(i,S),k=this._mapNodeValue(B),this._root=(G=this._root)!==null&&G!==void 0?G:S}const F=S?(d=S)===null||d===void 0?void 0:d.branches.get(k):this._root;if(F!=null&&(F.type!=="leaf"||F.branchKey!==k))throw this.invalidCacheError();const q={type:"leaf",value:r,parent:S,branchKey:k};(y=S)===null||y===void 0||y.branches.set(k,q),this._root=(a=this._root)!==null&&a!==void 0?a:q,this._numLeafs++,this._onSet(q),i==null||(b=i.onNodeVisit)===null||b===void 0||b.call(i,q)};try{c()}catch(d){if(d instanceof Fk)this.clear(),c();else throw d}}delete(t){const r=this.root();if(!r)return!1;if(t===r)return this._root=null,this._numLeafs=0,!0;let i=t.parent,c=t.branchKey;for(;i;){var d;if(i.branches.delete(c),i===r)return i.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(i.branches.size>0)break;c=(d=i)===null||d===void 0?void 0:d.branchKey,i=i.parent}for(;i!==r;i=i.parent)if(i==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const t=s7()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw gE(t+(this._name!=null?` - ${this._name}`:"")),new Fk}}var c7={TreeCache:l7},u7=c7.TreeCache,Ez=Object.freeze({__proto__:null,TreeCache:u7});class d7{constructor(t){var r;Wn(this,"_maxSize",void 0),Wn(this,"_size",void 0),Wn(this,"_head",void 0),Wn(this,"_tail",void 0),Wn(this,"_map",void 0),Wn(this,"_keyMapper",void 0),this._maxSize=t.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(r=t.mapKey)!==null&&r!==void 0?r:i=>i}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(t){return this._map.has(this._keyMapper(t))}get(t){const r=this._keyMapper(t),i=this._map.get(r);if(i)return this.set(t,i.value),i.value}set(t,r){const i=this._keyMapper(t);this._map.get(i)&&this.delete(t);const d=this.head(),y={key:t,right:d,left:null,value:r};d?d.left=y:this._tail=y,this._map.set(i,y),this._head=y,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const t=this.tail();t&&this.delete(t.key)}delete(t){const r=this._keyMapper(t);if(!this._size||!this._map.has(r))return;const i=oi(this._map.get(r)),c=i.right,d=i.left;c&&(c.left=i.left),d&&(d.right=i.right),i===this.head()&&(this._head=c),i===this.tail()&&(this._tail=d),this._map.delete(r),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var h7={LRUCache:d7},f7=h7.LRUCache,Tz=Object.freeze({__proto__:null,LRUCache:f7});const{LRUCache:p7}=Tz,{TreeCache:m7}=Ez;function g7({name:e,maxSize:t,mapNodeValue:r=i=>i}){const i=new p7({maxSize:t}),c=new m7({name:e,mapNodeValue:r,onHit:d=>{i.set(d,!0)},onSet:d=>{const y=i.tail();i.set(d,!0),y&&c.size()>t&&c.delete(y.key)}});return c}var Bk=g7;function za(e,t,r){if(typeof e=="string"&&!e.includes('"')&&!e.includes("\\"))return`"${e}"`;switch(typeof e){case"undefined":return"";case"boolean":return e?"true":"false";case"number":case"symbol":return String(e);case"string":return JSON.stringify(e);case"function":if((t==null?void 0:t.allowFunctions)!==!0)throw Yn("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${e.name})__`}if(e===null)return"null";if(typeof e!="object"){var i;return(i=JSON.stringify(e))!==null&&i!==void 0?i:""}if(Yr(e))return"__PROMISE__";if(Array.isArray(e))return`[${e.map((c,d)=>za(c,t,d.toString()))}]`;if(typeof e.toJSON=="function")return za(e.toJSON(r),t,r);if(e instanceof Map){const c={};for(const[d,y]of e)c[typeof d=="string"?d:za(d,t)]=y;return za(c,t,r)}return e instanceof Set?za(Array.from(e).sort((c,d)=>za(c,t).localeCompare(za(d,t))),t,r):Symbol!==void 0&&e[Symbol.iterator]!=null&&typeof e[Symbol.iterator]=="function"?za(Array.from(e),t,r):`{${Object.keys(e).filter(c=>e[c]!==void 0).sort().map(c=>`${za(c,t)}:${za(e[c],t,c)}`).join(",")}}`}function y7(e,t={allowFunctions:!1}){return za(e,t)}var t1=y7;const{TreeCache:_7}=Ez,F0={equality:"reference",eviction:"keep-all",maxSize:1/0};function v7({equality:e=F0.equality,eviction:t=F0.eviction,maxSize:r=F0.maxSize}=F0,i){const c=x7(e);return b7(t,r,c,i)}function x7(e){switch(e){case"reference":return t=>t;case"value":return t=>t1(t)}throw Yn(`Unrecognized equality policy ${e}`)}function b7(e,t,r,i){switch(e){case"keep-all":return new _7({name:i,mapNodeValue:r});case"lru":return Bk({name:i,maxSize:oi(t),mapNodeValue:r});case"most-recent":return Bk({name:i,maxSize:1,mapNodeValue:r})}throw Yn(`Unrecognized eviction policy ${e}`)}var w7=v7;function S7(e){return()=>null}var E7={startPerfBlock:S7};const{isLoadable:T7,loadableWithError:B0,loadableWithPromise:C7,loadableWithValue:Zb}=_g,{WrappedValue:Cz}=Sz,{getNodeLoadable:N0,peekNodeLoadable:M7,setNodeValue:A7}=bc,{saveDepsToStore:k7}=xg,{DEFAULT_VALUE:R7,getConfigDeletionHandler:I7,getNode:P7,registerNode:Nk}=$o,{isRecoilValue:L7}=Wh,{markRecoilValueModified:$k}=vs,{retainedByOptionWithDefault:D7}=Xu,{recoilCallback:z7}=wz,{startPerfBlock:O7}=E7;class Mz{}const Hp=new Mz,Zp=[],$0=new Map,F7=(()=>{let e=0;return()=>e++})();function Az(e){let t=null;const{key:r,get:i,cachePolicy_UNSTABLE:c}=e,d=e.set!=null?e.set:void 0,y=new Set,a=w7(c??{equality:"reference",eviction:"keep-all"},r),b=D7(e.retainedBy_UNSTABLE),S=new Map;let k=0;function P(){return!jr("recoil_memory_managament_2020")||k>0}function O(be){return be.getState().knownSelectors.add(r),k++,()=>{k--}}function G(){return I7(r)!==void 0&&!P()}function F(be,Me,Ge,ut,ht){nt(Me,ut,ht),q(be,Ge)}function q(be,Me){ke(be,Me)&&Ke(be),B(Me,!0)}function ce(be,Me){ke(be,Me)&&(oi($(be)).stateVersions.clear(),B(Me,!1))}function B(be,Me){const Ge=$0.get(be);if(Ge!=null){for(const ut of Ge)$k(ut,oi(t));Me&&$0.delete(be)}}function U(be,Me){let Ge=$0.get(Me);Ge==null&&$0.set(Me,Ge=new Set),Ge.add(be)}function Z(be,Me,Ge,ut,ht,Lt){return Me.then(zt=>{if(!P())throw Ke(be),Hp;const Rt=Zb(zt);return F(be,Ge,ht,Rt,ut),zt}).catch(zt=>{if(!P())throw Ke(be),Hp;if(Yr(zt))return J(be,zt,Ge,ut,ht,Lt);const Rt=B0(zt);throw F(be,Ge,ht,Rt,ut),zt})}function J(be,Me,Ge,ut,ht,Lt){return Me.then(zt=>{if(!P())throw Ke(be),Hp;Lt.loadingDepKey!=null&&Lt.loadingDepPromise===Me?Ge.atomValues.set(Lt.loadingDepKey,Zb(zt)):be.getState().knownSelectors.forEach(Ct=>{Ge.atomValues.delete(Ct)});const Rt=se(be,Ge);if(Rt&&Rt.state!=="loading"){if((ke(be,ht)||$(be)==null)&&q(be,ht),Rt.state==="hasValue")return Rt.contents;throw Rt.contents}if(!ke(be,ht)){const Ct=fe(be,Ge);if(Ct!=null)return Ct.loadingLoadable.contents}const[St,Et]=he(be,Ge,ht);if(St.state!=="loading"&&F(be,Ge,ht,St,Et),St.state==="hasError")throw St.contents;return St.contents}).catch(zt=>{if(zt instanceof Mz)throw Hp;if(!P())throw Ke(be),Hp;const Rt=B0(zt);throw F(be,Ge,ht,Rt,ut),zt})}function Y(be,Me,Ge,ut){var ht,Lt,zt,Rt;if(ke(be,ut)||Me.version===((ht=be.getState())===null||ht===void 0||(Lt=ht.currentTree)===null||Lt===void 0?void 0:Lt.version)||Me.version===((zt=be.getState())===null||zt===void 0||(Rt=zt.nextTree)===null||Rt===void 0?void 0:Rt.version)){var St,Et,Ct;k7(r,Ge,be,(St=(Et=be.getState())===null||Et===void 0||(Ct=Et.nextTree)===null||Ct===void 0?void 0:Ct.version)!==null&&St!==void 0?St:be.getState().currentTree.version)}for(const Kt of Ge)y.add(Kt)}function he(be,Me,Ge){const ut=O7(r);let ht=!0,Lt=!0;const zt=()=>{ut(),Lt=!1};let Rt,St=!1,Et;const Ct={loadingDepKey:null,loadingDepPromise:null},Kt=new Map;function Nt({key:Pn}){const vn=N0(be,Me,Pn);switch(Kt.set(Pn,vn),ht||(Y(be,Me,new Set(Kt.keys()),Ge),ce(be,Ge)),vn.state){case"hasValue":return vn.contents;case"hasError":throw vn.contents;case"loading":throw Ct.loadingDepKey=Pn,Ct.loadingDepPromise=vn.contents,vn.contents}throw Yn("Invalid Loadable state")}const pn=Pn=>(...vn)=>{if(Lt)throw Yn("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return t==null&&pm(!1),z7(be,Pn,vn,{node:t})};try{Rt=i({get:Nt,getCallback:pn}),Rt=L7(Rt)?Nt(Rt):Rt,T7(Rt)&&(Rt.state==="hasError"&&(St=!0),Rt=Rt.contents),Yr(Rt)?Rt=Z(be,Rt,Me,Kt,Ge,Ct).finally(zt):zt(),Rt=Rt instanceof Cz?Rt.value:Rt}catch(Pn){Rt=Pn,Yr(Rt)?Rt=J(be,Rt,Me,Kt,Ge,Ct).finally(zt):(St=!0,zt())}return St?Et=B0(Rt):Yr(Rt)?Et=C7(Rt):Et=Zb(Rt),ht=!1,Je(be,Ge,Kt),Y(be,Me,new Set(Kt.keys()),Ge),[Et,Kt]}function se(be,Me){let Ge=Me.atomValues.get(r);if(Ge!=null)return Ge;const ut=new Set;try{Ge=a.get(Lt=>(typeof Lt!="string"&&pm(!1),N0(be,Me,Lt).contents),{onNodeVisit:Lt=>{Lt.type==="branch"&&Lt.nodeKey!==r&&ut.add(Lt.nodeKey)}})}catch(Lt){throw Yn(`Problem with cache lookup for selector "${r}": ${Lt.message}`)}if(Ge){var ht;Me.atomValues.set(r,Ge),Y(be,Me,ut,(ht=$(be))===null||ht===void 0?void 0:ht.executionID)}return Ge}function De(be,Me){const Ge=se(be,Me);if(Ge!=null)return Ke(be),Ge;const ut=fe(be,Me);if(ut!=null){var ht;return((ht=ut.loadingLoadable)===null||ht===void 0?void 0:ht.state)==="loading"&&U(be,ut.executionID),ut.loadingLoadable}const Lt=F7(),[zt,Rt]=he(be,Me,Lt);return zt.state==="loading"?(ue(be,Lt,zt,Rt,Me),U(be,Lt)):(Ke(be),nt(Me,zt,Rt)),zt}function fe(be,Me){const Ge=KD([S.has(be)?[oi(S.get(be))]:[],Vv(bE(S,([ht])=>ht!==be),([,ht])=>ht)]);function ut(ht){for(const[Lt,zt]of ht)if(!N0(be,Me,Lt).is(zt))return!0;return!1}for(const ht of Ge){if(ht.stateVersions.get(Me.version)||!ut(ht.depValuesDiscoveredSoFarDuringAsyncWork))return ht.stateVersions.set(Me.version,!0),ht;ht.stateVersions.set(Me.version,!1)}}function $(be){return S.get(be)}function ue(be,Me,Ge,ut,ht){S.set(be,{depValuesDiscoveredSoFarDuringAsyncWork:ut,executionID:Me,loadingLoadable:Ge,stateVersions:new Map([[ht.version,!0]])})}function Je(be,Me,Ge){if(ke(be,Me)){const ut=$(be);ut!=null&&(ut.depValuesDiscoveredSoFarDuringAsyncWork=Ge)}}function Ke(be){S.delete(be)}function ke(be,Me){var Ge;return Me===((Ge=$(be))===null||Ge===void 0?void 0:Ge.executionID)}function ze(be){return Array.from(be.entries()).map(([Me,Ge])=>[Me,Ge.contents])}function nt(be,Me,Ge){be.atomValues.set(r,Me);try{a.set(ze(Ge),Me)}catch(ut){throw Yn(`Problem with setting cache for selector "${r}": ${ut.message}`)}}function _t(be){if(Zp.includes(r)){const Me=`Recoil selector has circular dependencies: ${Zp.slice(Zp.indexOf(r)).join("  ")}`;return B0(Yn(Me))}Zp.push(r);try{return be()}finally{Zp.pop()}}function Ue(be,Me){const Ge=Me.atomValues.get(r);return Ge??a.get(ut=>{var ht;return typeof ut!="string"&&pm(!1),(ht=M7(be,Me,ut))===null||ht===void 0?void 0:ht.contents})}function Ee(be,Me){return _t(()=>De(be,Me))}function _e(be){be.atomValues.delete(r)}function $e(be,Me){t==null&&pm(!1);for(const ut of y){var Ge;const ht=P7(ut);(Ge=ht.clearCache)===null||Ge===void 0||Ge.call(ht,be,Me)}y.clear(),_e(Me),a.clear(),$k(be,t)}return d!=null?t=Nk({key:r,nodeType:"selector",peek:Ue,get:Ee,set:(Me,Ge,ut)=>{let ht=!1;const Lt=new Map;function zt({key:Ct}){if(ht)throw Yn("Recoil: Async selector sets are not currently supported.");const Kt=N0(Me,Ge,Ct);if(Kt.state==="hasValue")return Kt.contents;if(Kt.state==="loading"){const Nt=`Getting value of asynchronous atom or selector "${Ct}" in a pending state while setting selector "${r}" is not yet supported.`;throw Yn(Nt)}else throw Kt.contents}function Rt(Ct,Kt){if(ht)throw Yn("Recoil: Async selector sets are not currently supported.");const Nt=typeof Kt=="function"?Kt(zt(Ct)):Kt;A7(Me,Ge,Ct.key,Nt).forEach((Pn,vn)=>Lt.set(vn,Pn))}function St(Ct){Rt(Ct,R7)}const Et=d({set:Rt,get:zt,reset:St},ut);if(Et!==void 0)throw Yr(Et)?Yn("Recoil: Async selector sets are not currently supported."):Yn("Recoil: selector set should be a void function.");return ht=!0,Lt},init:O,invalidate:_e,clearCache:$e,shouldDeleteConfigOnRelease:G,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:b}):t=Nk({key:r,nodeType:"selector",peek:Ue,get:Ee,init:O,invalidate:_e,clearCache:$e,shouldDeleteConfigOnRelease:G,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:b})}Az.value=e=>new Cz(e);var Zh=Az;const{isLoadable:B7,loadableWithError:Xb,loadableWithPromise:Kb,loadableWithValue:eh}=_g,{WrappedValue:kz}=Sz,{peekNodeInfo:N7}=bc,{DEFAULT_VALUE:wu,DefaultValue:Hl,getConfigDeletionHandler:Rz,registerNode:$7,setConfigDeletionHandler:U7}=$o,{isRecoilValue:V7}=Wh,{getRecoilValueAsLoadable:j7,markRecoilValueModified:G7,setRecoilValue:Uk,setRecoilValueLoadable:W7}=vs,{retainedByOptionWithDefault:q7}=Xu,Xp=e=>e instanceof kz?e.value:e;function H7(e){const{key:t,persistence_UNSTABLE:r}=e,i=q7(e.retainedBy_UNSTABLE);let c=0;function d(U){return Kb(U.then(Z=>(y=eh(Z),Z)).catch(Z=>{throw y=Xb(Z),Z}))}let y=Yr(e.default)?d(e.default):B7(e.default)?e.default.state==="loading"?d(e.default.contents):e.default:eh(Xp(e.default));y.contents;let a;const b=new Map;function S(U){return U}function k(U,Z){const J=Z.then(Y=>{var he,se;return((se=((he=U.getState().nextTree)!==null&&he!==void 0?he:U.getState().currentTree).atomValues.get(t))===null||se===void 0?void 0:se.contents)===J&&Uk(U,B,Y),Y}).catch(Y=>{var he,se;throw((se=((he=U.getState().nextTree)!==null&&he!==void 0?he:U.getState().currentTree).atomValues.get(t))===null||se===void 0?void 0:se.contents)===J&&W7(U,B,Xb(Y)),Y});return J}function P(U,Z,J){var Y;c++;const he=()=>{var $;c--,($=b.get(U))===null||$===void 0||$.forEach(ue=>ue()),b.delete(U)};if(U.getState().knownAtoms.add(t),y.state==="loading"){const $=()=>{var ue;((ue=U.getState().nextTree)!==null&&ue!==void 0?ue:U.getState().currentTree).atomValues.has(t)||G7(U,B)};y.contents.finally($)}const se=(Y=e.effects)!==null&&Y!==void 0?Y:e.effects_UNSTABLE;if(se!=null){let ke=function(_e){if(ue&&_e.key===t){const $e=$;return $e instanceof Hl?O(U,Z):Yr($e)?Kb($e.then(be=>be instanceof Hl?y.toPromise():be)):eh($e)}return j7(U,_e)},ze=function(_e){return ke(_e).toPromise()},nt=function(_e){var $e;const be=N7(U,($e=U.getState().nextTree)!==null&&$e!==void 0?$e:U.getState().currentTree,_e.key);return ue&&_e.key===t&&!($ instanceof Hl)?{...be,isSet:!0,loadable:ke(_e)}:be},$=wu,ue=!0,Je=!1,Ke=null;const _t=_e=>$e=>{if(ue){const be=ke(B),Me=be.state==="hasValue"?be.contents:wu;$=typeof $e=="function"?$e(Me):$e,Yr($)&&($=$.then(Ge=>(Ke={effect:_e,value:Ge},Ge)))}else{if(Yr($e))throw Yn("Setting atoms to async values is not implemented.");typeof $e!="function"&&(Ke={effect:_e,value:Xp($e)}),Uk(U,B,typeof $e=="function"?be=>{const Me=Xp($e(be));return Ke={effect:_e,value:Me},Me}:Xp($e))}},Ue=_e=>()=>_t(_e)(wu),Ee=_e=>$e=>{var be;const{release:Me}=U.subscribeToTransactions(Ge=>{var ut;let{currentTree:ht,previousTree:Lt}=Ge.getState();Lt||(Lt=ht);const zt=(ut=ht.atomValues.get(t))!==null&&ut!==void 0?ut:y;if(zt.state==="hasValue"){var Rt,St,Et,Ct;const Kt=zt.contents,Nt=(Rt=Lt.atomValues.get(t))!==null&&Rt!==void 0?Rt:y,pn=Nt.state==="hasValue"?Nt.contents:wu;((St=Ke)===null||St===void 0?void 0:St.effect)!==_e||((Et=Ke)===null||Et===void 0?void 0:Et.value)!==Kt?$e(Kt,pn,!ht.atomValues.has(t)):((Ct=Ke)===null||Ct===void 0?void 0:Ct.effect)===_e&&(Ke=null)}},t);b.set(U,[...(be=b.get(U))!==null&&be!==void 0?be:[],Me])};for(const _e of se)try{const $e=_e({node:B,storeID:U.storeID,parentStoreID_UNSTABLE:U.parentStoreID,trigger:J,setSelf:_t(_e),resetSelf:Ue(_e),onSet:Ee(_e),getPromise:ze,getLoadable:ke,getInfo_UNSTABLE:nt});if($e!=null){var De;b.set(U,[...(De=b.get(U))!==null&&De!==void 0?De:[],$e])}}catch($e){$=$e,Je=!0}if(ue=!1,!($ instanceof Hl)){var fe;const _e=Je?Xb($):Yr($)?Kb(k(U,$)):eh(Xp($));_e.contents,Z.atomValues.set(t,_e),(fe=U.getState().nextTree)===null||fe===void 0||fe.atomValues.set(t,_e)}}return he}function O(U,Z){var J,Y;return(J=(Y=Z.atomValues.get(t))!==null&&Y!==void 0?Y:a)!==null&&J!==void 0?J:y}function G(U,Z){if(Z.atomValues.has(t))return oi(Z.atomValues.get(t));if(Z.nonvalidatedAtoms.has(t)){if(a!=null)return a;if(r==null)return y;const J=Z.nonvalidatedAtoms.get(t),Y=r.validator(J,wu);return a=Y instanceof Hl?y:eh(Y),a}else return y}function F(){a=void 0}function q(U,Z,J){if(Z.atomValues.has(t)){const Y=oi(Z.atomValues.get(t));if(Y.state==="hasValue"&&J===Y.contents)return new Map}else if(!Z.nonvalidatedAtoms.has(t)&&J instanceof Hl)return new Map;return a=void 0,new Map().set(t,eh(J))}function ce(){return Rz(t)!==void 0&&c<=0}const B=$7({key:t,nodeType:"atom",peek:O,get:G,set:q,init:P,invalidate:F,shouldDeleteConfigOnRelease:ce,dangerouslyAllowMutability:e.dangerouslyAllowMutability,persistence_UNSTABLE:e.persistence_UNSTABLE?{type:e.persistence_UNSTABLE.type,backButton:e.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:i});return B}function IE(e){const{...t}=e,r="default"in e?e.default:new Promise(()=>{});return V7(r)?Z7({...t,default:r}):H7({...t,default:r})}function Z7(e){const t=IE({...e,default:wu,persistence_UNSTABLE:e.persistence_UNSTABLE===void 0?void 0:{...e.persistence_UNSTABLE,validator:i=>i instanceof Hl?i:oi(e.persistence_UNSTABLE).validator(i,wu)},effects:e.effects,effects_UNSTABLE:e.effects_UNSTABLE}),r=Zh({key:`${e.key}__withFallback`,get:({get:i})=>{const c=i(t);return c instanceof Hl?e.default:c},set:({set:i},c)=>i(t,c),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:e.dangerouslyAllowMutability});return U7(r.key,Rz(e.key)),r}IE.value=e=>new kz(e);var Iz=IE;class X7{constructor(t){var r;Wn(this,"_map",void 0),Wn(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(r=t==null?void 0:t.mapKey)!==null&&r!==void 0?r:i=>i}size(){return this._map.size}has(t){return this._map.has(this._keyMapper(t))}get(t){return this._map.get(this._keyMapper(t))}set(t,r){this._map.set(this._keyMapper(t),r)}delete(t){this._map.delete(this._keyMapper(t))}clear(){this._map.clear()}}var K7={MapCache:X7},Y7=K7.MapCache,Q7=Object.freeze({__proto__:null,MapCache:Y7});const{LRUCache:Vk}=Tz,{MapCache:J7}=Q7,U0={equality:"reference",eviction:"none",maxSize:1/0};function eG({equality:e=U0.equality,eviction:t=U0.eviction,maxSize:r=U0.maxSize}=U0){const i=tG(e);return nG(t,r,i)}function tG(e){switch(e){case"reference":return t=>t;case"value":return t=>t1(t)}throw Yn(`Unrecognized equality policy ${e}`)}function nG(e,t,r){switch(e){case"keep-all":return new J7({mapKey:r});case"lru":return new Vk({mapKey:r,maxSize:oi(t)});case"most-recent":return new Vk({mapKey:r,maxSize:1})}throw Yn(`Unrecognized eviction policy ${e}`)}var Pz=eG;const{setConfigDeletionHandler:rG}=$o;function iG(e){var t,r;const i=Pz({equality:(t=(r=e.cachePolicyForParams_UNSTABLE)===null||r===void 0?void 0:r.equality)!==null&&t!==void 0?t:"value",eviction:"keep-all"});return c=>{var d,y;const a=i.get(c);if(a!=null)return a;const{cachePolicyForParams_UNSTABLE:b,...S}=e,k="default"in e?e.default:new Promise(()=>{}),P=Iz({...S,key:`${e.key}__${(d=t1(c))!==null&&d!==void 0?d:"void"}`,default:typeof k=="function"?k(c):k,retainedBy_UNSTABLE:typeof e.retainedBy_UNSTABLE=="function"?e.retainedBy_UNSTABLE(c):e.retainedBy_UNSTABLE,effects:typeof e.effects=="function"?e.effects(c):typeof e.effects_UNSTABLE=="function"?e.effects_UNSTABLE(c):(y=e.effects)!==null&&y!==void 0?y:e.effects_UNSTABLE});return i.set(c,P),rG(P.key,()=>{i.delete(c)}),P}}var oG=iG;const{setConfigDeletionHandler:aG}=$o;let sG=0;function lG(e){var t,r;const i=Pz({equality:(t=(r=e.cachePolicyForParams_UNSTABLE)===null||r===void 0?void 0:r.equality)!==null&&t!==void 0?t:"value",eviction:"keep-all"});return c=>{var d;let y;try{y=i.get(c)}catch(O){throw Yn(`Problem with cache lookup for selector ${e.key}: ${O.message}`)}if(y!=null)return y;const a=`${e.key}__selectorFamily/${(d=t1(c,{allowFunctions:!0}))!==null&&d!==void 0?d:"void"}/${sG++}`,b=O=>e.get(c)(O),S=e.cachePolicy_UNSTABLE,k=typeof e.retainedBy_UNSTABLE=="function"?e.retainedBy_UNSTABLE(c):e.retainedBy_UNSTABLE;let P;if(e.set!=null){const O=e.set;P=Zh({key:a,get:b,set:(F,q)=>O(c)(F,q),cachePolicy_UNSTABLE:S,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:k})}else P=Zh({key:a,get:b,cachePolicy_UNSTABLE:S,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:k});return i.set(c,P),aG(P.key,()=>{i.delete(c)}),P}}var wc=lG;const cG=wc({key:"__constant",get:e=>()=>e,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function uG(e){return cG(e)}var dG=uG;const hG=wc({key:"__error",get:e=>()=>{throw Yn(e)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function fG(e){return hG(e)}var pG=fG;function mG(e){return e}var gG=mG;const{loadableWithError:Lz,loadableWithPromise:Dz,loadableWithValue:zz}=_g;function n1(e,t){const r=Array(t.length).fill(void 0),i=Array(t.length).fill(void 0);for(const[c,d]of t.entries())try{r[c]=e(d)}catch(y){i[c]=y}return[r,i]}function yG(e){return e!=null&&!Yr(e)}function r1(e){return Array.isArray(e)?e:Object.getOwnPropertyNames(e).map(t=>e[t])}function B2(e,t){return Array.isArray(e)?t:Object.getOwnPropertyNames(e).reduce((r,i,c)=>({...r,[i]:t[c]}),{})}function Ih(e,t,r){const i=r.map((c,d)=>c==null?zz(t[d]):Yr(c)?Dz(c):Lz(c));return B2(e,i)}function _G(e,t){return t.map((r,i)=>r===void 0?e[i]:r)}const vG=wc({key:"__waitForNone",get:e=>({get:t})=>{const r=r1(e),[i,c]=n1(t,r);return Ih(e,i,c)},dangerouslyAllowMutability:!0}),xG=wc({key:"__waitForAny",get:e=>({get:t})=>{const r=r1(e),[i,c]=n1(t,r);return c.some(d=>!Yr(d))?Ih(e,i,c):new Promise(d=>{for(const[y,a]of c.entries())Yr(a)&&a.then(b=>{i[y]=b,c[y]=void 0,d(Ih(e,i,c))}).catch(b=>{c[y]=b,d(Ih(e,i,c))})})},dangerouslyAllowMutability:!0}),bG=wc({key:"__waitForAll",get:e=>({get:t})=>{const r=r1(e),[i,c]=n1(t,r);if(c.every(y=>y==null))return B2(e,i);const d=c.find(yG);if(d!=null)throw d;return Promise.all(c).then(y=>B2(e,_G(i,y)))},dangerouslyAllowMutability:!0}),wG=wc({key:"__waitForAllSettled",get:e=>({get:t})=>{const r=r1(e),[i,c]=n1(t,r);return c.every(d=>!Yr(d))?Ih(e,i,c):Promise.all(c.map((d,y)=>Yr(d)?d.then(a=>{i[y]=a,c[y]=void 0}).catch(a=>{i[y]=void 0,c[y]=a}):null)).then(()=>Ih(e,i,c))},dangerouslyAllowMutability:!0}),SG=wc({key:"__noWait",get:e=>({get:t})=>{try{return Zh.value(zz(t(e)))}catch(r){return Zh.value(Yr(r)?Dz(r):Lz(r))}},dangerouslyAllowMutability:!0});var EG={waitForNone:vG,waitForAny:xG,waitForAll:bG,waitForAllSettled:wG,noWait:SG};const{RecoilLoadable:TG}=_g,{DefaultValue:CG}=$o,{RecoilRoot:MG,useRecoilStoreID:AG}=ol,{isRecoilValue:kG}=Wh,{retentionZone:RG}=Gv,{freshSnapshot:IG}=Kv,{useRecoilState:PG,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:LG,useRecoilStateLoadable:DG,useRecoilValue:zG,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:OG,useRecoilValueLoadable:FG,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:BG,useResetRecoilState:NG,useSetRecoilState:$G}=Kj,{useGotoRecoilSnapshot:UG,useRecoilSnapshot:VG,useRecoilTransactionObserver:jG}=_z,{useRecoilCallback:GG}=wz,{noWait:WG,waitForAll:qG,waitForAllSettled:HG,waitForAny:ZG,waitForNone:XG}=EG;var i1={DefaultValue:CG,isRecoilValue:kG,RecoilLoadable:TG,RecoilEnv:of,RecoilRoot:MG,useRecoilStoreID:AG,useRecoilBridgeAcrossReactRoots_UNSTABLE:S9,atom:Iz,selector:Zh,atomFamily:oG,selectorFamily:wc,constSelector:dG,errorSelector:pG,readOnlySelector:gG,noWait:WG,waitForNone:XG,waitForAny:ZG,waitForAll:qG,waitForAllSettled:HG,useRecoilValue:zG,useRecoilValueLoadable:FG,useRecoilState:PG,useRecoilStateLoadable:DG,useSetRecoilState:$G,useResetRecoilState:NG,useGetRecoilValueInfo_UNSTABLE:y9,useRecoilRefresher_UNSTABLE:Q9,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:BG,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:OG,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:LG,useRecoilCallback:GG,useRecoilTransaction_UNSTABLE:r7,useGotoRecoilSnapshot:UG,useRecoilSnapshot:VG,useRecoilTransactionObserver_UNSTABLE:jG,snapshot_UNSTABLE:IG,useRetain:CE,retentionZone:RG},KG=i1.RecoilRoot,Oz=i1.atom,sf=i1.useRecoilState,YG=i1.useResetRecoilState,PE={};Object.defineProperty(PE,"__esModule",{value:!0});var Fz=PE.recoilPersist=void 0;const QG=(e={})=>{if(typeof window>"u")return{persistAtom:()=>{}};const{key:t="recoil-persist",storage:r=localStorage}=e,i=({onSet:b,node:S,trigger:k,setSelf:P})=>{if(k==="get"){const O=d();typeof O.then=="function"&&O.then(G=>{G.hasOwnProperty(S.key)&&P(G[S.key])}),O.hasOwnProperty(S.key)&&P(O[S.key])}b(async(O,G,F)=>{const q=d();typeof q.then=="function"?q.then(ce=>c(O,ce,S.key,F)):c(O,q,S.key,F)})},c=(b,S,k,P)=>{P?delete S[k]:S[k]=b,a(S)},d=()=>{const b=r.getItem(t);return b==null?{}:typeof b=="string"?y(b):typeof b.then=="function"?b.then(y):{}},y=b=>{if(b===void 0)return{};try{return JSON.parse(b)}catch(S){return console.error(S),{}}},a=b=>{try{typeof r.mergeItem=="function"?r.mergeItem(t,JSON.stringify(b)):r.setItem(t,JSON.stringify(b))}catch(S){console.error(S)}};return{persistAtom:i}};Fz=PE.recoilPersist=QG;const{persistAtom:Bz}=Fz(),Eg=Oz({key:"userState",default:{role:"GUEST",id:0,name:"",first:!1},effects_UNSTABLE:[Bz]}),Nz=Oz({key:"envState",default:{theme:"system"},effects_UNSTABLE:[Bz]}),JG={black:"#000",white:"#fff"},tg=JG,eW={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},th=eW,tW={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},nh=tW,nW={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},rh=nW,rW={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},ih=rW,iW={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},oh=iW,oW={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Kp=oW,aW={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Qs=aW;function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ee.apply(this,arguments)}function Su(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function $z(e){if(!Su(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=$z(e[r])}),t}function Fo(e,t,r={clone:!0}){const i=r.clone?ee({},e):e;return Su(e)&&Su(t)&&Object.keys(t).forEach(c=>{c!=="__proto__"&&(Su(t[c])&&c in e&&Su(e[c])?i[c]=Fo(e[c],t[c],r):r.clone?i[c]=Su(t[c])?$z(t[c]):t[c]:i[c]=t[c])}),i}var Uz={exports:{}},sW="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",lW=sW,cW=lW;function Vz(){}function jz(){}jz.resetWarningCache=Vz;var uW=function(){function e(i,c,d,y,a,b){if(b!==cW){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:jz,resetWarningCache:Vz};return r.PropTypes=r,r};Uz.exports=uW();var dW=Uz.exports;function pc(e){let t="https://mui.com/production-error/?code="+e;for(let r=1;r<arguments.length;r+=1)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}var Ur={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LE=Symbol.for("react.element"),DE=Symbol.for("react.portal"),o1=Symbol.for("react.fragment"),a1=Symbol.for("react.strict_mode"),s1=Symbol.for("react.profiler"),l1=Symbol.for("react.provider"),c1=Symbol.for("react.context"),hW=Symbol.for("react.server_context"),u1=Symbol.for("react.forward_ref"),d1=Symbol.for("react.suspense"),h1=Symbol.for("react.suspense_list"),f1=Symbol.for("react.memo"),p1=Symbol.for("react.lazy"),fW=Symbol.for("react.offscreen"),Gz;Gz=Symbol.for("react.module.reference");function _a(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case LE:switch(e=e.type,e){case o1:case s1:case a1:case d1:case h1:return e;default:switch(e=e&&e.$$typeof,e){case hW:case c1:case u1:case p1:case f1:case l1:return e;default:return t}}case DE:return t}}}Ur.ContextConsumer=c1;Ur.ContextProvider=l1;Ur.Element=LE;Ur.ForwardRef=u1;Ur.Fragment=o1;Ur.Lazy=p1;Ur.Memo=f1;Ur.Portal=DE;Ur.Profiler=s1;Ur.StrictMode=a1;Ur.Suspense=d1;Ur.SuspenseList=h1;Ur.isAsyncMode=function(){return!1};Ur.isConcurrentMode=function(){return!1};Ur.isContextConsumer=function(e){return _a(e)===c1};Ur.isContextProvider=function(e){return _a(e)===l1};Ur.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===LE};Ur.isForwardRef=function(e){return _a(e)===u1};Ur.isFragment=function(e){return _a(e)===o1};Ur.isLazy=function(e){return _a(e)===p1};Ur.isMemo=function(e){return _a(e)===f1};Ur.isPortal=function(e){return _a(e)===DE};Ur.isProfiler=function(e){return _a(e)===s1};Ur.isStrictMode=function(e){return _a(e)===a1};Ur.isSuspense=function(e){return _a(e)===d1};Ur.isSuspenseList=function(e){return _a(e)===h1};Ur.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===o1||e===s1||e===a1||e===d1||e===h1||e===fW||typeof e=="object"&&e!==null&&(e.$$typeof===p1||e.$$typeof===f1||e.$$typeof===l1||e.$$typeof===c1||e.$$typeof===u1||e.$$typeof===Gz||e.getModuleId!==void 0)};Ur.typeOf=_a;function Bt(e){if(typeof e!="string")throw new Error(pc(7));return e.charAt(0).toUpperCase()+e.slice(1)}function N2(...e){return e.reduce((t,r)=>r==null?t:function(...c){t.apply(this,c),r.apply(this,c)},()=>{})}function zE(e,t=166){let r;function i(...c){const d=()=>{e.apply(this,c)};clearTimeout(r),r=setTimeout(d,t)}return i.clear=()=>{clearTimeout(r)},i}function __(e,t){return H.isValidElement(e)&&t.indexOf(e.type.muiName)!==-1}function wi(e){return e&&e.ownerDocument||document}function Xo(e){return wi(e).defaultView||window}function $2(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const pW=typeof window<"u"?H.useLayoutEffect:H.useEffect,Js=pW;let jk=0;function mW(e){const[t,r]=H.useState(e),i=e||t;return H.useEffect(()=>{t==null&&(jk+=1,r(`mui-${jk}`))},[t]),i}const Gk=Lw["useId"];function Wz(e){if(Gk!==void 0){const t=Gk();return e??t}return mW(e)}function ng({controlled:e,default:t,name:r,state:i="value"}){const{current:c}=H.useRef(e!==void 0),[d,y]=H.useState(t),a=c?e:d,b=H.useCallback(S=>{c||y(S)},[]);return[a,b]}function pa(e){const t=H.useRef(e);return Js(()=>{t.current=e}),H.useCallback((...r)=>(0,t.current)(...r),[])}function Si(...e){return H.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{$2(r,t)})},e)}let m1=!0,U2=!1,Wk;const gW={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function yW(e){const{type:t,tagName:r}=e;return!!(r==="INPUT"&&gW[t]&&!e.readOnly||r==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function _W(e){e.metaKey||e.altKey||e.ctrlKey||(m1=!0)}function Yb(){m1=!1}function vW(){this.visibilityState==="hidden"&&U2&&(m1=!0)}function xW(e){e.addEventListener("keydown",_W,!0),e.addEventListener("mousedown",Yb,!0),e.addEventListener("pointerdown",Yb,!0),e.addEventListener("touchstart",Yb,!0),e.addEventListener("visibilitychange",vW,!0)}function bW(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return m1||yW(t)}function qz(){const e=H.useCallback(c=>{c!=null&&xW(c.ownerDocument)},[]),t=H.useRef(!1);function r(){return t.current?(U2=!0,window.clearTimeout(Wk),Wk=window.setTimeout(()=>{U2=!1},100),t.current=!1,!0):!1}function i(c){return bW(c)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:i,onBlur:r,ref:e}}function Hz(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const wW={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},SW=wW;function OE(e,t){const r=ee({},t);return Object.keys(e).forEach(i=>{if(i.toString().match(/^(components|slots)$/))r[i]=ee({},e[i],r[i]);else if(i.toString().match(/^(componentsProps|slotProps)$/)){const c=e[i]||{},d=t[i];r[i]={},!d||!Object.keys(d)?r[i]=c:!c||!Object.keys(c)?r[i]=d:(r[i]=ee({},d),Object.keys(c).forEach(y=>{r[i][y]=OE(c[y],d[y])}))}else r[i]===void 0&&(r[i]=e[i])}),r}function Qn(e,t,r=void 0){const i={};return Object.keys(e).forEach(c=>{i[c]=e[c].reduce((d,y)=>{if(y){const a=t(y);a!==""&&d.push(a),r&&r[y]&&d.push(r[y])}return d},[]).join(" ")}),i}const qk=e=>e,EW=()=>{let e=qk;return{configure(t){e=t},generate(t){return e(t)},reset(){e=qk}}},TW=EW(),Zz=TW,CW={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function Zn(e,t,r="Mui"){const i=CW[t];return i?`${r}-${i}`:`${Zz.generate(e)}-${t}`}function rr(e,t,r="Mui"){const i={};return t.forEach(c=>{i[c]=Zn(e,c,r)}),i}const Vu="$$material";function fn(e,t){if(e==null)return{};var r={},i=Object.keys(e),c,d;for(d=0;d<i.length;d++)c=i[d],!(t.indexOf(c)>=0)&&(r[c]=e[c]);return r}function Xz(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var MW=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,AW=Xz(function(e){return MW.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function kW(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function RW(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var IW=function(){function e(r){var i=this;this._insertTag=function(c){var d;i.tags.length===0?i.insertionPoint?d=i.insertionPoint.nextSibling:i.prepend?d=i.container.firstChild:d=i.before:d=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(c,d),i.tags.push(c)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(i){i.forEach(this._insertTag)},t.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(RW(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var d=kW(c);try{d.insertRule(i,d.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(i));this.ctr++},t.flush=function(){this.tags.forEach(function(i){return i.parentNode&&i.parentNode.removeChild(i)}),this.tags=[],this.ctr=0},e}(),fo="-ms-",tv="-moz-",Rr="-webkit-",Kz="comm",FE="rule",BE="decl",PW="@import",Yz="@keyframes",LW="@layer",DW=Math.abs,g1=String.fromCharCode,zW=Object.assign;function OW(e,t){return Ji(e,0)^45?(((t<<2^Ji(e,0))<<2^Ji(e,1))<<2^Ji(e,2))<<2^Ji(e,3):0}function Qz(e){return e.trim()}function FW(e,t){return(e=t.exec(e))?e[0]:e}function Ir(e,t,r){return e.replace(t,r)}function V2(e,t){return e.indexOf(t)}function Ji(e,t){return e.charCodeAt(t)|0}function rg(e,t,r){return e.slice(t,r)}function ds(e){return e.length}function NE(e){return e.length}function V0(e,t){return t.push(e),e}function BW(e,t){return e.map(t).join("")}var y1=1,Xh=1,Jz=0,Bo=0,Ci=0,lf="";function _1(e,t,r,i,c,d,y){return{value:e,root:t,parent:r,type:i,props:c,children:d,line:y1,column:Xh,length:y,return:""}}function Yp(e,t){return zW(_1("",null,null,"",null,null,0),e,{length:-e.length},t)}function NW(){return Ci}function $W(){return Ci=Bo>0?Ji(lf,--Bo):0,Xh--,Ci===10&&(Xh=1,y1--),Ci}function Ko(){return Ci=Bo<Jz?Ji(lf,Bo++):0,Xh++,Ci===10&&(Xh=1,y1++),Ci}function _s(){return Ji(lf,Bo)}function v_(){return Bo}function Tg(e,t){return rg(lf,e,t)}function ig(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function eO(e){return y1=Xh=1,Jz=ds(lf=e),Bo=0,[]}function tO(e){return lf="",e}function x_(e){return Qz(Tg(Bo-1,j2(e===91?e+2:e===40?e+1:e)))}function UW(e){for(;(Ci=_s())&&Ci<33;)Ko();return ig(e)>2||ig(Ci)>3?"":" "}function VW(e,t){for(;--t&&Ko()&&!(Ci<48||Ci>102||Ci>57&&Ci<65||Ci>70&&Ci<97););return Tg(e,v_()+(t<6&&_s()==32&&Ko()==32))}function j2(e){for(;Ko();)switch(Ci){case e:return Bo;case 34:case 39:e!==34&&e!==39&&j2(Ci);break;case 40:e===41&&j2(e);break;case 92:Ko();break}return Bo}function jW(e,t){for(;Ko()&&e+Ci!==47+10;)if(e+Ci===42+42&&_s()===47)break;return"/*"+Tg(t,Bo-1)+"*"+g1(e===47?e:Ko())}function GW(e){for(;!ig(_s());)Ko();return Tg(e,Bo)}function WW(e){return tO(b_("",null,null,null,[""],e=eO(e),0,[0],e))}function b_(e,t,r,i,c,d,y,a,b){for(var S=0,k=0,P=y,O=0,G=0,F=0,q=1,ce=1,B=1,U=0,Z="",J=c,Y=d,he=i,se=Z;ce;)switch(F=U,U=Ko()){case 40:if(F!=108&&Ji(se,P-1)==58){V2(se+=Ir(x_(U),"&","&\f"),"&\f")!=-1&&(B=-1);break}case 34:case 39:case 91:se+=x_(U);break;case 9:case 10:case 13:case 32:se+=UW(F);break;case 92:se+=VW(v_()-1,7);continue;case 47:switch(_s()){case 42:case 47:V0(qW(jW(Ko(),v_()),t,r),b);break;default:se+="/"}break;case 123*q:a[S++]=ds(se)*B;case 125*q:case 59:case 0:switch(U){case 0:case 125:ce=0;case 59+k:B==-1&&(se=Ir(se,/\f/g,"")),G>0&&ds(se)-P&&V0(G>32?Zk(se+";",i,r,P-1):Zk(Ir(se," ","")+";",i,r,P-2),b);break;case 59:se+=";";default:if(V0(he=Hk(se,t,r,S,k,c,a,Z,J=[],Y=[],P),d),U===123)if(k===0)b_(se,t,he,he,J,d,P,a,Y);else switch(O===99&&Ji(se,3)===110?100:O){case 100:case 108:case 109:case 115:b_(e,he,he,i&&V0(Hk(e,he,he,0,0,c,a,Z,c,J=[],P),Y),c,Y,P,a,i?J:Y);break;default:b_(se,he,he,he,[""],Y,0,a,Y)}}S=k=G=0,q=B=1,Z=se="",P=y;break;case 58:P=1+ds(se),G=F;default:if(q<1){if(U==123)--q;else if(U==125&&q++==0&&$W()==125)continue}switch(se+=g1(U),U*q){case 38:B=k>0?1:(se+="\f",-1);break;case 44:a[S++]=(ds(se)-1)*B,B=1;break;case 64:_s()===45&&(se+=x_(Ko())),O=_s(),k=P=ds(Z=se+=GW(v_())),U++;break;case 45:F===45&&ds(se)==2&&(q=0)}}return d}function Hk(e,t,r,i,c,d,y,a,b,S,k){for(var P=c-1,O=c===0?d:[""],G=NE(O),F=0,q=0,ce=0;F<i;++F)for(var B=0,U=rg(e,P+1,P=DW(q=y[F])),Z=e;B<G;++B)(Z=Qz(q>0?O[B]+" "+U:Ir(U,/&\f/g,O[B])))&&(b[ce++]=Z);return _1(e,t,r,c===0?FE:a,b,S,k)}function qW(e,t,r){return _1(e,t,r,Kz,g1(NW()),rg(e,2,-2),0)}function Zk(e,t,r,i){return _1(e,t,r,BE,rg(e,0,i),rg(e,i+1,-1),i)}function Ph(e,t){for(var r="",i=NE(e),c=0;c<i;c++)r+=t(e[c],c,e,t)||"";return r}function HW(e,t,r,i){switch(e.type){case LW:if(e.children.length)break;case PW:case BE:return e.return=e.return||e.value;case Kz:return"";case Yz:return e.return=e.value+"{"+Ph(e.children,i)+"}";case FE:e.value=e.props.join(",")}return ds(r=Ph(e.children,i))?e.return=e.value+"{"+r+"}":""}function ZW(e){var t=NE(e);return function(r,i,c,d){for(var y="",a=0;a<t;a++)y+=e[a](r,i,c,d)||"";return y}}function XW(e){return function(t){t.root||(t=t.return)&&e(t)}}var KW=function(t,r,i){for(var c=0,d=0;c=d,d=_s(),c===38&&d===12&&(r[i]=1),!ig(d);)Ko();return Tg(t,Bo)},YW=function(t,r){var i=-1,c=44;do switch(ig(c)){case 0:c===38&&_s()===12&&(r[i]=1),t[i]+=KW(Bo-1,r,i);break;case 2:t[i]+=x_(c);break;case 4:if(c===44){t[++i]=_s()===58?"&\f":"",r[i]=t[i].length;break}default:t[i]+=g1(c)}while(c=Ko());return t},QW=function(t,r){return tO(YW(eO(t),r))},Xk=new WeakMap,JW=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,i=t.parent,c=t.column===i.column&&t.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!Xk.get(i))&&!c){Xk.set(t,!0);for(var d=[],y=QW(r,d),a=i.props,b=0,S=0;b<y.length;b++)for(var k=0;k<a.length;k++,S++)t.props[S]=d[b]?y[b].replace(/&\f/g,a[k]):a[k]+" "+y[b]}}},eq=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function nO(e,t){switch(OW(e,t)){case 5103:return Rr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Rr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Rr+e+tv+e+fo+e+e;case 6828:case 4268:return Rr+e+fo+e+e;case 6165:return Rr+e+fo+"flex-"+e+e;case 5187:return Rr+e+Ir(e,/(\w+).+(:[^]+)/,Rr+"box-$1$2"+fo+"flex-$1$2")+e;case 5443:return Rr+e+fo+"flex-item-"+Ir(e,/flex-|-self/,"")+e;case 4675:return Rr+e+fo+"flex-line-pack"+Ir(e,/align-content|flex-|-self/,"")+e;case 5548:return Rr+e+fo+Ir(e,"shrink","negative")+e;case 5292:return Rr+e+fo+Ir(e,"basis","preferred-size")+e;case 6060:return Rr+"box-"+Ir(e,"-grow","")+Rr+e+fo+Ir(e,"grow","positive")+e;case 4554:return Rr+Ir(e,/([^-])(transform)/g,"$1"+Rr+"$2")+e;case 6187:return Ir(Ir(Ir(e,/(zoom-|grab)/,Rr+"$1"),/(image-set)/,Rr+"$1"),e,"")+e;case 5495:case 3959:return Ir(e,/(image-set\([^]*)/,Rr+"$1$`$1");case 4968:return Ir(Ir(e,/(.+:)(flex-)?(.*)/,Rr+"box-pack:$3"+fo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Rr+e+e;case 4095:case 3583:case 4068:case 2532:return Ir(e,/(.+)-inline(.+)/,Rr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ds(e)-1-t>6)switch(Ji(e,t+1)){case 109:if(Ji(e,t+4)!==45)break;case 102:return Ir(e,/(.+:)(.+)-([^]+)/,"$1"+Rr+"$2-$3$1"+tv+(Ji(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~V2(e,"stretch")?nO(Ir(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ji(e,t+1)!==115)break;case 6444:switch(Ji(e,ds(e)-3-(~V2(e,"!important")&&10))){case 107:return Ir(e,":",":"+Rr)+e;case 101:return Ir(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Rr+(Ji(e,14)===45?"inline-":"")+"box$3$1"+Rr+"$2$3$1"+fo+"$2box$3")+e}break;case 5936:switch(Ji(e,t+11)){case 114:return Rr+e+fo+Ir(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Rr+e+fo+Ir(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Rr+e+fo+Ir(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Rr+e+fo+e+e}return e}var tq=function(t,r,i,c){if(t.length>-1&&!t.return)switch(t.type){case BE:t.return=nO(t.value,t.length);break;case Yz:return Ph([Yp(t,{value:Ir(t.value,"@","@"+Rr)})],c);case FE:if(t.length)return BW(t.props,function(d){switch(FW(d,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ph([Yp(t,{props:[Ir(d,/:(read-\w+)/,":"+tv+"$1")]})],c);case"::placeholder":return Ph([Yp(t,{props:[Ir(d,/:(plac\w+)/,":"+Rr+"input-$1")]}),Yp(t,{props:[Ir(d,/:(plac\w+)/,":"+tv+"$1")]}),Yp(t,{props:[Ir(d,/:(plac\w+)/,fo+"input-$1")]})],c)}return""})}},nq=[tq],rO=function(t){var r=t.key;if(r==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(q){var ce=q.getAttribute("data-emotion");ce.indexOf(" ")!==-1&&(document.head.appendChild(q),q.setAttribute("data-s",""))})}var c=t.stylisPlugins||nq,d={},y,a=[];y=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(q){for(var ce=q.getAttribute("data-emotion").split(" "),B=1;B<ce.length;B++)d[ce[B]]=!0;a.push(q)});var b,S=[JW,eq];{var k,P=[HW,XW(function(q){k.insert(q)})],O=ZW(S.concat(c,P)),G=function(ce){return Ph(WW(ce),O)};b=function(ce,B,U,Z){k=U,G(ce?ce+"{"+B.styles+"}":B.styles),Z&&(F.inserted[B.name]=!0)}}var F={key:r,sheet:new IW({key:r,container:y,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:d,registered:{},insert:b};return F.sheet.hydrate(a),F},iO={exports:{}},$r={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qi=typeof Symbol=="function"&&Symbol.for,$E=qi?Symbol.for("react.element"):60103,UE=qi?Symbol.for("react.portal"):60106,v1=qi?Symbol.for("react.fragment"):60107,x1=qi?Symbol.for("react.strict_mode"):60108,b1=qi?Symbol.for("react.profiler"):60114,w1=qi?Symbol.for("react.provider"):60109,S1=qi?Symbol.for("react.context"):60110,VE=qi?Symbol.for("react.async_mode"):60111,E1=qi?Symbol.for("react.concurrent_mode"):60111,T1=qi?Symbol.for("react.forward_ref"):60112,C1=qi?Symbol.for("react.suspense"):60113,rq=qi?Symbol.for("react.suspense_list"):60120,M1=qi?Symbol.for("react.memo"):60115,A1=qi?Symbol.for("react.lazy"):60116,iq=qi?Symbol.for("react.block"):60121,oq=qi?Symbol.for("react.fundamental"):60117,aq=qi?Symbol.for("react.responder"):60118,sq=qi?Symbol.for("react.scope"):60119;function ta(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case $E:switch(e=e.type,e){case VE:case E1:case v1:case b1:case x1:case C1:return e;default:switch(e=e&&e.$$typeof,e){case S1:case T1:case A1:case M1:case w1:return e;default:return t}}case UE:return t}}}function oO(e){return ta(e)===E1}$r.AsyncMode=VE;$r.ConcurrentMode=E1;$r.ContextConsumer=S1;$r.ContextProvider=w1;$r.Element=$E;$r.ForwardRef=T1;$r.Fragment=v1;$r.Lazy=A1;$r.Memo=M1;$r.Portal=UE;$r.Profiler=b1;$r.StrictMode=x1;$r.Suspense=C1;$r.isAsyncMode=function(e){return oO(e)||ta(e)===VE};$r.isConcurrentMode=oO;$r.isContextConsumer=function(e){return ta(e)===S1};$r.isContextProvider=function(e){return ta(e)===w1};$r.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===$E};$r.isForwardRef=function(e){return ta(e)===T1};$r.isFragment=function(e){return ta(e)===v1};$r.isLazy=function(e){return ta(e)===A1};$r.isMemo=function(e){return ta(e)===M1};$r.isPortal=function(e){return ta(e)===UE};$r.isProfiler=function(e){return ta(e)===b1};$r.isStrictMode=function(e){return ta(e)===x1};$r.isSuspense=function(e){return ta(e)===C1};$r.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===v1||e===E1||e===b1||e===x1||e===C1||e===rq||typeof e=="object"&&e!==null&&(e.$$typeof===A1||e.$$typeof===M1||e.$$typeof===w1||e.$$typeof===S1||e.$$typeof===T1||e.$$typeof===oq||e.$$typeof===aq||e.$$typeof===sq||e.$$typeof===iq)};$r.typeOf=ta;iO.exports=$r;var lq=iO.exports,aO=lq,cq={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},uq={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},sO={};sO[aO.ForwardRef]=cq;sO[aO.Memo]=uq;var dq=!0;function hq(e,t,r){var i="";return r.split(" ").forEach(function(c){e[c]!==void 0?t.push(e[c]+";"):i+=c+" "}),i}var lO=function(t,r,i){var c=t.key+"-"+r.name;(i===!1||dq===!1)&&t.registered[c]===void 0&&(t.registered[c]=r.styles)},cO=function(t,r,i){lO(t,r,i);var c=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var d=r;do t.insert(r===d?"."+c:"",d,t.sheet,!0),d=d.next;while(d!==void 0)}};function fq(e){for(var t=0,r,i=0,c=e.length;c>=4;++i,c-=4)r=e.charCodeAt(i)&255|(e.charCodeAt(++i)&255)<<8|(e.charCodeAt(++i)&255)<<16|(e.charCodeAt(++i)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(i+2)&255)<<16;case 2:t^=(e.charCodeAt(i+1)&255)<<8;case 1:t^=e.charCodeAt(i)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var pq={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},mq=/[A-Z]|^ms/g,gq=/_EMO_([^_]+?)_([^]*?)_EMO_/g,uO=function(t){return t.charCodeAt(1)===45},Kk=function(t){return t!=null&&typeof t!="boolean"},Qb=Xz(function(e){return uO(e)?e:e.replace(mq,"-$&").toLowerCase()}),Yk=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(gq,function(i,c,d){return hs={name:c,styles:d,next:hs},c})}return pq[t]!==1&&!uO(t)&&typeof r=="number"&&r!==0?r+"px":r};function og(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":{if(r.anim===1)return hs={name:r.name,styles:r.styles,next:hs},r.name;if(r.styles!==void 0){var i=r.next;if(i!==void 0)for(;i!==void 0;)hs={name:i.name,styles:i.styles,next:hs},i=i.next;var c=r.styles+";";return c}return yq(e,t,r)}case"function":{if(e!==void 0){var d=hs,y=r(e);return hs=d,og(e,t,y)}break}}if(t==null)return r;var a=t[r];return a!==void 0?a:r}function yq(e,t,r){var i="";if(Array.isArray(r))for(var c=0;c<r.length;c++)i+=og(e,t,r[c])+";";else for(var d in r){var y=r[d];if(typeof y!="object")t!=null&&t[y]!==void 0?i+=d+"{"+t[y]+"}":Kk(y)&&(i+=Qb(d)+":"+Yk(d,y)+";");else if(Array.isArray(y)&&typeof y[0]=="string"&&(t==null||t[y[0]]===void 0))for(var a=0;a<y.length;a++)Kk(y[a])&&(i+=Qb(d)+":"+Yk(d,y[a])+";");else{var b=og(e,t,y);switch(d){case"animation":case"animationName":{i+=Qb(d)+":"+b+";";break}default:i+=d+"{"+b+"}"}}}return i}var Qk=/label:\s*([^\s;\n{]+)\s*(;|$)/g,hs,jE=function(t,r,i){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var c=!0,d="";hs=void 0;var y=t[0];y==null||y.raw===void 0?(c=!1,d+=og(i,r,y)):d+=y[0];for(var a=1;a<t.length;a++)d+=og(i,r,t[a]),c&&(d+=y[a]);Qk.lastIndex=0;for(var b="",S;(S=Qk.exec(d))!==null;)b+="-"+S[1];var k=fq(d)+b;return{name:k,styles:d,next:hs}},_q=function(t){return t()},dO=Lw["useInsertionEffect"]?Lw["useInsertionEffect"]:!1,vq=dO||_q,Jk=dO||H.useLayoutEffect,hO=H.createContext(typeof HTMLElement<"u"?rO({key:"css"}):null),xq=hO.Provider,fO=function(t){return H.forwardRef(function(r,i){var c=H.useContext(hO);return t(r,c,i)})},k1=H.createContext({}),Cg=fO(function(e,t){var r=e.styles,i=jE([r],void 0,H.useContext(k1)),c=H.useRef();return Jk(function(){var d=t.key+"-global",y=new t.sheet.constructor({key:d,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,b=document.querySelector('style[data-emotion="'+d+" "+i.name+'"]');return t.sheet.tags.length&&(y.before=t.sheet.tags[0]),b!==null&&(a=!0,b.setAttribute("data-emotion",d),y.hydrate([b])),c.current=[y,a],function(){y.flush()}},[t]),Jk(function(){var d=c.current,y=d[0],a=d[1];if(a){d[1]=!1;return}if(i.next!==void 0&&cO(t,i.next,!0),y.tags.length){var b=y.tags[y.tags.length-1].nextElementSibling;y.before=b,y.flush()}t.insert("",i,y,!1)},[t,i.name]),null});function Kh(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return jE(t)}var Sc=function(){var t=Kh.apply(void 0,arguments),r="animation-"+t.name;return{name:r,styles:"@keyframes "+r+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},bq=AW,wq=function(t){return t!=="theme"},eR=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?bq:wq},tR=function(t,r,i){var c;if(r){var d=r.shouldForwardProp;c=t.__emotion_forwardProp&&d?function(y){return t.__emotion_forwardProp(y)&&d(y)}:d}return typeof c!="function"&&i&&(c=t.__emotion_forwardProp),c},Sq=function(t){var r=t.cache,i=t.serialized,c=t.isStringTag;return lO(r,i,c),vq(function(){return cO(r,i,c)}),null},Eq=function e(t,r){var i=t.__emotion_real===t,c=i&&t.__emotion_base||t,d,y;r!==void 0&&(d=r.label,y=r.target);var a=tR(t,r,i),b=a||eR(c),S=!b("as");return function(){var k=arguments,P=i&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(d!==void 0&&P.push("label:"+d+";"),k[0]==null||k[0].raw===void 0)P.push.apply(P,k);else{P.push(k[0][0]);for(var O=k.length,G=1;G<O;G++)P.push(k[G],k[0][G])}var F=fO(function(q,ce,B){var U=S&&q.as||c,Z="",J=[],Y=q;if(q.theme==null){Y={};for(var he in q)Y[he]=q[he];Y.theme=H.useContext(k1)}typeof q.className=="string"?Z=hq(ce.registered,J,q.className):q.className!=null&&(Z=q.className+" ");var se=jE(P.concat(J),ce.registered,Y);Z+=ce.key+"-"+se.name,y!==void 0&&(Z+=" "+y);var De=S&&a===void 0?eR(U):b,fe={};for(var $ in q)S&&$==="as"||De($)&&(fe[$]=q[$]);return fe.className=Z,fe.ref=B,H.createElement(H.Fragment,null,H.createElement(Sq,{cache:ce,serialized:se,isStringTag:typeof U=="string"}),H.createElement(U,fe))});return F.displayName=d!==void 0?d:"Styled("+(typeof c=="string"?c:c.displayName||c.name||"Component")+")",F.defaultProps=t.defaultProps,F.__emotion_real=F,F.__emotion_base=c,F.__emotion_styles=P,F.__emotion_forwardProp=a,Object.defineProperty(F,"toString",{value:function(){return"."+y}}),F.withComponent=function(q,ce){return e(q,ee({},r,ce,{shouldForwardProp:tR(F,ce,!0)})).apply(void 0,P)},F}},Tq=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],go=Eq.bind();Tq.forEach(function(e){go[e]=go(e)});let G2;typeof document=="object"&&(G2=rO({key:"css",prepend:!0}));function Cq(e){const{injectFirst:t,children:r}=e;return t&&G2?ne(xq,{value:G2,children:r}):r}function Mq(e){return e==null||Object.keys(e).length===0}function Aq(e){const{styles:t,defaultTheme:r={}}=e;return ne(Cg,{styles:typeof t=="function"?c=>t(Mq(c)?r:c):t})}/**
 * @mui/styled-engine v5.12.3
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function pO(e,t){return go(e,t)}const kq=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},Rq=["values","unit","step"],Iq=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,i)=>r.val-i.val),t.reduce((r,i)=>ee({},r,{[i.key]:i.val}),{})};function Pq(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:i=5}=e,c=fn(e,Rq),d=Iq(t),y=Object.keys(d);function a(O){return`@media (min-width:${typeof t[O]=="number"?t[O]:O}${r})`}function b(O){return`@media (max-width:${(typeof t[O]=="number"?t[O]:O)-i/100}${r})`}function S(O,G){const F=y.indexOf(G);return`@media (min-width:${typeof t[O]=="number"?t[O]:O}${r}) and (max-width:${(F!==-1&&typeof t[y[F]]=="number"?t[y[F]]:G)-i/100}${r})`}function k(O){return y.indexOf(O)+1<y.length?S(O,y[y.indexOf(O)+1]):a(O)}function P(O){const G=y.indexOf(O);return G===0?a(y[1]):G===y.length-1?b(y[G]):S(O,y[y.indexOf(O)+1]).replace("@media","@media not all and")}return ee({keys:y,values:d,up:a,down:b,between:S,only:k,not:P,unit:r},c)}const Lq={borderRadius:4},Dq=Lq;function Im(e,t){return t?Fo(e,t,{clone:!1}):e}const GE={xs:0,sm:600,md:900,lg:1200,xl:1536},nR={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${GE[e]}px)`};function No(e,t,r){const i=e.theme||{};if(Array.isArray(t)){const d=i.breakpoints||nR;return t.reduce((y,a,b)=>(y[d.up(d.keys[b])]=r(t[b]),y),{})}if(typeof t=="object"){const d=i.breakpoints||nR;return Object.keys(t).reduce((y,a)=>{if(Object.keys(d.values||GE).indexOf(a)!==-1){const b=d.up(a);y[b]=r(t[a],a)}else{const b=a;y[b]=t[b]}return y},{})}return r(t)}function mO(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((i,c)=>{const d=e.up(c);return i[d]={},i},{}))||{}}function gO(e,t){return e.reduce((r,i)=>{const c=r[i];return(!c||Object.keys(c).length===0)&&delete r[i],r},t)}function zq(e,...t){const r=mO(e),i=[r,...t].reduce((c,d)=>Fo(c,d),{});return gO(Object.keys(r),i)}function Oq(e,t){if(typeof e!="object")return{};const r={},i=Object.keys(t);return Array.isArray(e)?i.forEach((c,d)=>{d<e.length&&(r[c]=!0)}):i.forEach(c=>{e[c]!=null&&(r[c]=!0)}),r}function Lu({values:e,breakpoints:t,base:r}){const i=r||Oq(e,t),c=Object.keys(i);if(c.length===0)return e;let d;return c.reduce((y,a,b)=>(Array.isArray(e)?(y[a]=e[b]!=null?e[b]:e[d],d=b):typeof e=="object"?(y[a]=e[a]!=null?e[a]:e[d],d=a):y[a]=e,y),{})}function R1(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const i=`vars.${t}`.split(".").reduce((c,d)=>c&&c[d]?c[d]:null,e);if(i!=null)return i}return t.split(".").reduce((i,c)=>i&&i[c]!=null?i[c]:null,e)}function nv(e,t,r,i=r){let c;return typeof e=="function"?c=e(r):Array.isArray(e)?c=e[r]||i:c=R1(e,r)||i,t&&(c=t(c,i,e)),c}function zr(e){const{prop:t,cssProperty:r=e.prop,themeKey:i,transform:c}=e,d=y=>{if(y[t]==null)return null;const a=y[t],b=y.theme,S=R1(b,i)||{};return No(y,a,P=>{let O=nv(S,c,P);return P===O&&typeof P=="string"&&(O=nv(S,c,`${t}${P==="default"?"":Bt(P)}`,P)),r===!1?O:{[r]:O}})};return d.propTypes={},d.filterProps=[t],d}function Fq(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const Bq={m:"margin",p:"padding"},Nq={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},rR={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},$q=Fq(e=>{if(e.length>2)if(rR[e])e=rR[e];else return[e];const[t,r]=e.split(""),i=Bq[t],c=Nq[r]||"";return Array.isArray(c)?c.map(d=>i+d):[i+c]}),WE=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],qE=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...WE,...qE];function Mg(e,t,r,i){var c;const d=(c=R1(e,t,!1))!=null?c:r;return typeof d=="number"?y=>typeof y=="string"?y:d*y:Array.isArray(d)?y=>typeof y=="string"?y:d[y]:typeof d=="function"?d:()=>{}}function HE(e){return Mg(e,"spacing",8)}function ju(e,t){if(typeof t=="string"||t==null)return t;const r=Math.abs(t),i=e(r);return t>=0?i:typeof i=="number"?-i:`-${i}`}function Uq(e,t){return r=>e.reduce((i,c)=>(i[c]=ju(t,r),i),{})}function Vq(e,t,r,i){if(t.indexOf(r)===-1)return null;const c=$q(r),d=Uq(c,i),y=e[r];return No(e,y,d)}function yO(e,t){const r=HE(e.theme);return Object.keys(e).map(i=>Vq(e,t,i,r)).reduce(Im,{})}function yi(e){return yO(e,WE)}yi.propTypes={};yi.filterProps=WE;function _i(e){return yO(e,qE)}_i.propTypes={};_i.filterProps=qE;function jq(e=8){if(e.mui)return e;const t=HE({spacing:e}),r=(...i)=>(i.length===0?[1]:i).map(d=>{const y=t(d);return typeof y=="number"?`${y}px`:y}).join(" ");return r.mui=!0,r}function I1(...e){const t=e.reduce((i,c)=>(c.filterProps.forEach(d=>{i[d]=c}),i),{}),r=i=>Object.keys(i).reduce((c,d)=>t[d]?Im(c,t[d](i)):c,{});return r.propTypes={},r.filterProps=e.reduce((i,c)=>i.concat(c.filterProps),[]),r}function ps(e){return typeof e!="number"?e:`${e}px solid`}const Gq=zr({prop:"border",themeKey:"borders",transform:ps}),Wq=zr({prop:"borderTop",themeKey:"borders",transform:ps}),qq=zr({prop:"borderRight",themeKey:"borders",transform:ps}),Hq=zr({prop:"borderBottom",themeKey:"borders",transform:ps}),Zq=zr({prop:"borderLeft",themeKey:"borders",transform:ps}),Xq=zr({prop:"borderColor",themeKey:"palette"}),Kq=zr({prop:"borderTopColor",themeKey:"palette"}),Yq=zr({prop:"borderRightColor",themeKey:"palette"}),Qq=zr({prop:"borderBottomColor",themeKey:"palette"}),Jq=zr({prop:"borderLeftColor",themeKey:"palette"}),P1=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Mg(e.theme,"shape.borderRadius",4),r=i=>({borderRadius:ju(t,i)});return No(e,e.borderRadius,r)}return null};P1.propTypes={};P1.filterProps=["borderRadius"];I1(Gq,Wq,qq,Hq,Zq,Xq,Kq,Yq,Qq,Jq,P1);const L1=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Mg(e.theme,"spacing",8),r=i=>({gap:ju(t,i)});return No(e,e.gap,r)}return null};L1.propTypes={};L1.filterProps=["gap"];const D1=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Mg(e.theme,"spacing",8),r=i=>({columnGap:ju(t,i)});return No(e,e.columnGap,r)}return null};D1.propTypes={};D1.filterProps=["columnGap"];const z1=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Mg(e.theme,"spacing",8),r=i=>({rowGap:ju(t,i)});return No(e,e.rowGap,r)}return null};z1.propTypes={};z1.filterProps=["rowGap"];const eH=zr({prop:"gridColumn"}),tH=zr({prop:"gridRow"}),nH=zr({prop:"gridAutoFlow"}),rH=zr({prop:"gridAutoColumns"}),iH=zr({prop:"gridAutoRows"}),oH=zr({prop:"gridTemplateColumns"}),aH=zr({prop:"gridTemplateRows"}),sH=zr({prop:"gridTemplateAreas"}),lH=zr({prop:"gridArea"});I1(L1,D1,z1,eH,tH,nH,rH,iH,oH,aH,sH,lH);function Lh(e,t){return t==="grey"?t:e}const cH=zr({prop:"color",themeKey:"palette",transform:Lh}),uH=zr({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Lh}),dH=zr({prop:"backgroundColor",themeKey:"palette",transform:Lh});I1(cH,uH,dH);function qo(e){return e<=1&&e!==0?`${e*100}%`:e}const hH=zr({prop:"width",transform:qo}),ZE=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var i,c,d;return{maxWidth:((i=e.theme)==null||(c=i.breakpoints)==null||(d=c.values)==null?void 0:d[r])||GE[r]||qo(r)}};return No(e,e.maxWidth,t)}return null};ZE.filterProps=["maxWidth"];const fH=zr({prop:"minWidth",transform:qo}),pH=zr({prop:"height",transform:qo}),mH=zr({prop:"maxHeight",transform:qo}),gH=zr({prop:"minHeight",transform:qo});zr({prop:"size",cssProperty:"width",transform:qo});zr({prop:"size",cssProperty:"height",transform:qo});const yH=zr({prop:"boxSizing"});I1(hH,ZE,fH,pH,mH,gH,yH);const _H={border:{themeKey:"borders",transform:ps},borderTop:{themeKey:"borders",transform:ps},borderRight:{themeKey:"borders",transform:ps},borderBottom:{themeKey:"borders",transform:ps},borderLeft:{themeKey:"borders",transform:ps},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:P1},color:{themeKey:"palette",transform:Lh},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Lh},backgroundColor:{themeKey:"palette",transform:Lh},p:{style:_i},pt:{style:_i},pr:{style:_i},pb:{style:_i},pl:{style:_i},px:{style:_i},py:{style:_i},padding:{style:_i},paddingTop:{style:_i},paddingRight:{style:_i},paddingBottom:{style:_i},paddingLeft:{style:_i},paddingX:{style:_i},paddingY:{style:_i},paddingInline:{style:_i},paddingInlineStart:{style:_i},paddingInlineEnd:{style:_i},paddingBlock:{style:_i},paddingBlockStart:{style:_i},paddingBlockEnd:{style:_i},m:{style:yi},mt:{style:yi},mr:{style:yi},mb:{style:yi},ml:{style:yi},mx:{style:yi},my:{style:yi},margin:{style:yi},marginTop:{style:yi},marginRight:{style:yi},marginBottom:{style:yi},marginLeft:{style:yi},marginX:{style:yi},marginY:{style:yi},marginInline:{style:yi},marginInlineStart:{style:yi},marginInlineEnd:{style:yi},marginBlock:{style:yi},marginBlockStart:{style:yi},marginBlockEnd:{style:yi},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:L1},rowGap:{style:z1},columnGap:{style:D1},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:qo},maxWidth:{style:ZE},minWidth:{transform:qo},height:{transform:qo},maxHeight:{transform:qo},minHeight:{transform:qo},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},O1=_H;function vH(...e){const t=e.reduce((i,c)=>i.concat(Object.keys(c)),[]),r=new Set(t);return e.every(i=>r.size===Object.keys(i).length)}function xH(e,t){return typeof e=="function"?e(t):e}function bH(){function e(r,i,c,d){const y={[r]:i,theme:c},a=d[r];if(!a)return{[r]:i};const{cssProperty:b=r,themeKey:S,transform:k,style:P}=a;if(i==null)return null;if(S==="typography"&&i==="inherit")return{[r]:i};const O=R1(c,S)||{};return P?P(y):No(y,i,F=>{let q=nv(O,k,F);return F===q&&typeof F=="string"&&(q=nv(O,k,`${r}${F==="default"?"":Bt(F)}`,F)),b===!1?q:{[b]:q}})}function t(r){var i;const{sx:c,theme:d={}}=r||{};if(!c)return null;const y=(i=d.unstable_sxConfig)!=null?i:O1;function a(b){let S=b;if(typeof b=="function")S=b(d);else if(typeof b!="object")return b;if(!S)return null;const k=mO(d.breakpoints),P=Object.keys(k);let O=k;return Object.keys(S).forEach(G=>{const F=xH(S[G],d);if(F!=null)if(typeof F=="object")if(y[G])O=Im(O,e(G,F,d,y));else{const q=No({theme:d},F,ce=>({[G]:ce}));vH(q,F)?O[G]=t({sx:F,theme:d}):O=Im(O,q)}else O=Im(O,e(G,F,d,y))}),gO(P,O)}return Array.isArray(c)?c.map(a):a(c)}return t}const _O=bH();_O.filterProps=["sx"];const F1=_O,wH=["breakpoints","palette","spacing","shape"];function cf(e={},...t){const{breakpoints:r={},palette:i={},spacing:c,shape:d={}}=e,y=fn(e,wH),a=Pq(r),b=jq(c);let S=Fo({breakpoints:a,direction:"ltr",components:{},palette:ee({mode:"light"},i),spacing:b,shape:ee({},Dq,d)},y);return S=t.reduce((k,P)=>Fo(k,P),S),S.unstable_sxConfig=ee({},O1,y==null?void 0:y.unstable_sxConfig),S.unstable_sx=function(P){return F1({sx:P,theme:this})},S}function SH(e){return Object.keys(e).length===0}function vO(e=null){const t=H.useContext(k1);return!t||SH(t)?e:t}const EH=cf();function Ag(e=EH){return vO(e)}function TH({styles:e,themeId:t,defaultTheme:r={}}){const i=Ag(r),c=typeof e=="function"?e(t&&i[t]||i):e;return ne(Aq,{styles:c})}const CH=["sx"],MH=e=>{var t,r;const i={systemProps:{},otherProps:{}},c=(t=e==null||(r=e.theme)==null?void 0:r.unstable_sxConfig)!=null?t:O1;return Object.keys(e).forEach(d=>{c[d]?i.systemProps[d]=e[d]:i.otherProps[d]=e[d]}),i};function kg(e){const{sx:t}=e,r=fn(e,CH),{systemProps:i,otherProps:c}=MH(r);let d;return Array.isArray(t)?d=[i,...t]:typeof t=="function"?d=(...y)=>{const a=t(...y);return Su(a)?ee({},i,a):i}:d=ee({},i,t),ee({},c,{sx:d})}function xO(e){var t,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=xO(e[t]))&&(i&&(i+=" "),i+=r);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function hn(){for(var e,t,r=0,i="";r<arguments.length;)(e=arguments[r++])&&(t=xO(e))&&(i&&(i+=" "),i+=t);return i}const AH=["className","component"];function kH(e={}){const{themeId:t,defaultTheme:r,defaultClassName:i="MuiBox-root",generateClassName:c}=e,d=pO("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(F1);return H.forwardRef(function(b,S){const k=Ag(r),P=kg(b),{className:O,component:G="div"}=P,F=fn(P,AH);return ne(d,ee({as:G,ref:S,className:hn(O,c?c(i):i),theme:t&&k[t]||k},F))})}const RH=["variant"];function iR(e){return e.length===0}function bO(e){const{variant:t}=e,r=fn(e,RH);let i=t||"";return Object.keys(r).sort().forEach(c=>{c==="color"?i+=iR(i)?e[c]:Bt(e[c]):i+=`${iR(i)?c:Bt(c)}${Bt(e[c].toString())}`}),i}const IH=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function PH(e){return Object.keys(e).length===0}function LH(e){return typeof e=="string"&&e.charCodeAt(0)>96}const DH=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,zH=(e,t)=>{let r=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(r=t.components[e].variants);const i={};return r.forEach(c=>{const d=bO(c.props);i[d]=c.style}),i},OH=(e,t,r,i)=>{var c,d;const{ownerState:y={}}=e,a=[],b=r==null||(c=r.components)==null||(d=c[i])==null?void 0:d.variants;return b&&b.forEach(S=>{let k=!0;Object.keys(S.props).forEach(P=>{y[P]!==S.props[P]&&e[P]!==S.props[P]&&(k=!1)}),k&&a.push(t[bO(S.props)])}),a};function Pm(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const FH=cf();function Qp({defaultTheme:e,theme:t,themeId:r}){return PH(t)?e:t[r]||t}function wO(e={}){const{themeId:t,defaultTheme:r=FH,rootShouldForwardProp:i=Pm,slotShouldForwardProp:c=Pm}=e,d=y=>F1(ee({},y,{theme:Qp(ee({},y,{defaultTheme:r,themeId:t}))}));return d.__mui_systemSx=!0,(y,a={})=>{kq(y,J=>J.filter(Y=>!(Y!=null&&Y.__mui_systemSx)));const{name:b,slot:S,skipVariantsResolver:k,skipSx:P,overridesResolver:O}=a,G=fn(a,IH),F=k!==void 0?k:S&&S!=="Root"||!1,q=P||!1;let ce,B=Pm;S==="Root"?B=i:S?B=c:LH(y)&&(B=void 0);const U=pO(y,ee({shouldForwardProp:B,label:ce},G)),Z=(J,...Y)=>{const he=Y?Y.map($=>typeof $=="function"&&$.__emotion_real!==$?ue=>$(ee({},ue,{theme:Qp(ee({},ue,{defaultTheme:r,themeId:t}))})):$):[];let se=J;b&&O&&he.push($=>{const ue=Qp(ee({},$,{defaultTheme:r,themeId:t})),Je=DH(b,ue);if(Je){const Ke={};return Object.entries(Je).forEach(([ke,ze])=>{Ke[ke]=typeof ze=="function"?ze(ee({},$,{theme:ue})):ze}),O($,Ke)}return null}),b&&!F&&he.push($=>{const ue=Qp(ee({},$,{defaultTheme:r,themeId:t}));return OH($,zH(b,ue),ue,b)}),q||he.push(d);const De=he.length-Y.length;if(Array.isArray(J)&&De>0){const $=new Array(De).fill("");se=[...J,...$],se.raw=[...J.raw,...$]}else typeof J=="function"&&J.__emotion_real!==J&&(se=$=>J(ee({},$,{theme:Qp(ee({},$,{defaultTheme:r,themeId:t}))})));const fe=U(se,...he);return y.muiName&&(fe.muiName=y.muiName),fe};return U.withConfig&&(Z.withConfig=U.withConfig),Z}}const BH=wO(),XE=BH;function NH(e){const{theme:t,name:r,props:i}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?i:OE(t.components[r].defaultProps,i)}function Rg({props:e,name:t,defaultTheme:r,themeId:i}){let c=Ag(r);return i&&(c=c[i]||c),NH({theme:c,name:t,props:e})}function KE(e,t=0,r=1){return Math.min(Math.max(t,e),r)}function $H(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(i=>i+i)),r?`rgb${r.length===4?"a":""}(${r.map((i,c)=>c<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function Gu(e){if(e.type)return e;if(e.charAt(0)==="#")return Gu($H(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error(pc(9,e));let i=e.substring(t+1,e.length-1),c;if(r==="color"){if(i=i.split(" "),c=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(c)===-1)throw new Error(pc(10,c))}else i=i.split(",");return i=i.map(d=>parseFloat(d)),{type:r,values:i,colorSpace:c}}function B1(e){const{type:t,colorSpace:r}=e;let{values:i}=e;return t.indexOf("rgb")!==-1?i=i.map((c,d)=>d<3?parseInt(c,10):c):t.indexOf("hsl")!==-1&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),t.indexOf("color")!==-1?i=`${r} ${i.join(" ")}`:i=`${i.join(", ")}`,`${t}(${i})`}function UH(e){e=Gu(e);const{values:t}=e,r=t[0],i=t[1]/100,c=t[2]/100,d=i*Math.min(c,1-c),y=(S,k=(S+r/30)%12)=>c-d*Math.max(Math.min(k-3,9-k,1),-1);let a="rgb";const b=[Math.round(y(0)*255),Math.round(y(8)*255),Math.round(y(4)*255)];return e.type==="hsla"&&(a+="a",b.push(t[3])),B1({type:a,values:b})}function oR(e){e=Gu(e);let t=e.type==="hsl"||e.type==="hsla"?Gu(UH(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function VH(e,t){const r=oR(e),i=oR(t);return(Math.max(r,i)+.05)/(Math.min(r,i)+.05)}function Kr(e,t){return e=Gu(e),t=KE(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,B1(e)}function YE(e,t){if(e=Gu(e),t=KE(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]*=1-t;return B1(e)}function QE(e,t){if(e=Gu(e),t=KE(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return B1(e)}const jH=H.createContext(null),SO=jH;function EO(){return H.useContext(SO)}const GH=typeof Symbol=="function"&&Symbol.for,WH=GH?Symbol.for("mui.nested"):"__THEME_NESTED__";function qH(e,t){return typeof t=="function"?t(e):ee({},e,t)}function HH(e){const{children:t,theme:r}=e,i=EO(),c=H.useMemo(()=>{const d=i===null?r:qH(i,r);return d!=null&&(d[WH]=i!==null),d},[r,i]);return ne(SO.Provider,{value:c,children:t})}const aR={};function sR(e,t,r,i=!1){return H.useMemo(()=>{const c=e&&t[e]||t;if(typeof r=="function"){const d=r(c),y=e?ee({},t,{[e]:d}):d;return i?()=>y:y}return e?ee({},t,{[e]:r}):ee({},t,r)},[e,t,r,i])}function ZH(e){const{children:t,theme:r,themeId:i}=e,c=vO(aR),d=EO()||aR,y=sR(i,c,r),a=sR(i,d,r,!0);return ne(HH,{theme:a,children:ne(k1.Provider,{value:y,children:t})})}const XH=["className","component","disableGutters","fixed","maxWidth","classes"],KH=cf(),YH=XE("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`maxWidth${Bt(String(r.maxWidth))}`],r.fixed&&t.fixed,r.disableGutters&&t.disableGutters]}}),QH=e=>Rg({props:e,name:"MuiContainer",defaultTheme:KH}),JH=(e,t)=>{const r=b=>Zn(t,b),{classes:i,fixed:c,disableGutters:d,maxWidth:y}=e,a={root:["root",y&&`maxWidth${Bt(String(y))}`,c&&"fixed",d&&"disableGutters"]};return Qn(a,r,i)};function eZ(e={}){const{createStyledComponent:t=YH,useThemeProps:r=QH,componentName:i="MuiContainer"}=e,c=t(({theme:y,ownerState:a})=>ee({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!a.disableGutters&&{paddingLeft:y.spacing(2),paddingRight:y.spacing(2),[y.breakpoints.up("sm")]:{paddingLeft:y.spacing(3),paddingRight:y.spacing(3)}}),({theme:y,ownerState:a})=>a.fixed&&Object.keys(y.breakpoints.values).reduce((b,S)=>{const k=S,P=y.breakpoints.values[k];return P!==0&&(b[y.breakpoints.up(k)]={maxWidth:`${P}${y.breakpoints.unit}`}),b},{}),({theme:y,ownerState:a})=>ee({},a.maxWidth==="xs"&&{[y.breakpoints.up("xs")]:{maxWidth:Math.max(y.breakpoints.values.xs,444)}},a.maxWidth&&a.maxWidth!=="xs"&&{[y.breakpoints.up(a.maxWidth)]:{maxWidth:`${y.breakpoints.values[a.maxWidth]}${y.breakpoints.unit}`}}));return H.forwardRef(function(a,b){const S=r(a),{className:k,component:P="div",disableGutters:O=!1,fixed:G=!1,maxWidth:F="lg"}=S,q=fn(S,XH),ce=ee({},S,{component:P,disableGutters:O,fixed:G,maxWidth:F}),B=JH(ce,i);return ne(c,ee({as:P,ownerState:ce,className:hn(B.root,k),ref:b},q))})}function el(e){return e?`Level${e}`:""}function Ig(e){return e.unstable_level>0&&e.container}function TO(e){return function(r){return`var(--Grid-${r}Spacing${el(e.unstable_level)})`}}function JE(e){return function(r){return e.unstable_level===0?`var(--Grid-${r}Spacing)`:`var(--Grid-${r}Spacing${el(e.unstable_level-1)})`}}function eT(e){return e.unstable_level===0?"var(--Grid-columns)":`var(--Grid-columns${el(e.unstable_level-1)})`}const tZ=(e,t)=>e.filter(r=>t.includes(r)),uf=(e,t,r)=>{const i=e.keys[0];Array.isArray(t)?t.forEach((c,d)=>{r((y,a)=>{d<=e.keys.length-1&&(d===0?Object.assign(y,a):y[e.up(e.keys[d])]=a)},c)}):t&&typeof t=="object"?(Object.keys(t).length>e.keys.length?e.keys:tZ(e.keys,Object.keys(t))).forEach(d=>{if(e.keys.indexOf(d)!==-1){const y=t[d];y!==void 0&&r((a,b)=>{i===d?Object.assign(a,b):a[e.up(d)]=b},y)}}):(typeof t=="number"||typeof t=="string")&&r((c,d)=>{Object.assign(c,d)},t)},nZ=({theme:e,ownerState:t})=>{const r=TO(t),i={};return uf(e.breakpoints,t.gridSize,(c,d)=>{let y={};d===!0&&(y={flexBasis:0,flexGrow:1,maxWidth:"100%"}),d==="auto"&&(y={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof d=="number"&&(y={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${d} / ${eT(t)}${Ig(t)?` + ${r("column")}`:""})`}),c(i,y)}),i},rZ=({theme:e,ownerState:t})=>{const r={};return uf(e.breakpoints,t.gridOffset,(i,c)=>{let d={};c==="auto"&&(d={marginLeft:"auto"}),typeof c=="number"&&(d={marginLeft:c===0?"0px":`calc(100% * ${c} / ${eT(t)})`}),i(r,d)}),r},iZ=({theme:e,ownerState:t})=>{if(!t.container)return{};const r=Ig(t)?{[`--Grid-columns${el(t.unstable_level)}`]:eT(t)}:{"--Grid-columns":12};return uf(e.breakpoints,t.columns,(i,c)=>{i(r,{[`--Grid-columns${el(t.unstable_level)}`]:c})}),r},oZ=({theme:e,ownerState:t})=>{if(!t.container)return{};const r=JE(t),i=Ig(t)?{[`--Grid-rowSpacing${el(t.unstable_level)}`]:r("row")}:{};return uf(e.breakpoints,t.rowSpacing,(c,d)=>{var y;c(i,{[`--Grid-rowSpacing${el(t.unstable_level)}`]:typeof d=="string"?d:(y=e.spacing)==null?void 0:y.call(e,d)})}),i},aZ=({theme:e,ownerState:t})=>{if(!t.container)return{};const r=JE(t),i=Ig(t)?{[`--Grid-columnSpacing${el(t.unstable_level)}`]:r("column")}:{};return uf(e.breakpoints,t.columnSpacing,(c,d)=>{var y;c(i,{[`--Grid-columnSpacing${el(t.unstable_level)}`]:typeof d=="string"?d:(y=e.spacing)==null?void 0:y.call(e,d)})}),i},sZ=({theme:e,ownerState:t})=>{if(!t.container)return{};const r={};return uf(e.breakpoints,t.direction,(i,c)=>{i(r,{flexDirection:c})}),r},lZ=({ownerState:e})=>{const t=TO(e),r=JE(e);return ee({minWidth:0,boxSizing:"border-box"},e.container&&ee({display:"flex",flexWrap:"wrap"},e.wrap&&e.wrap!=="wrap"&&{flexWrap:e.wrap},{margin:`calc(${t("row")} / -2) calc(${t("column")} / -2)`},e.disableEqualOverflow&&{margin:`calc(${t("row")} * -1) 0px 0px calc(${t("column")} * -1)`}),(!e.container||Ig(e))&&ee({padding:`calc(${r("row")} / 2) calc(${r("column")} / 2)`},(e.disableEqualOverflow||e.parentDisableEqualOverflow)&&{padding:`${r("row")} 0px 0px ${r("column")}`}))},cZ=e=>{const t=[];return Object.entries(e).forEach(([r,i])=>{i!==!1&&i!==void 0&&t.push(`grid-${r}-${String(i)}`)}),t},uZ=(e,t="xs")=>{function r(i){return i===void 0?!1:typeof i=="string"&&!Number.isNaN(Number(i))||typeof i=="number"&&i>0}if(r(e))return[`spacing-${t}-${String(e)}`];if(typeof e=="object"&&!Array.isArray(e)){const i=[];return Object.entries(e).forEach(([c,d])=>{r(d)&&i.push(`spacing-${c}-${String(d)}`)}),i}return[]},dZ=e=>e===void 0?[]:typeof e=="object"?Object.entries(e).map(([t,r])=>`direction-${t}-${r}`):[`direction-xs-${String(e)}`],hZ=["className","children","columns","container","component","direction","wrap","spacing","rowSpacing","columnSpacing","disableEqualOverflow","unstable_level"],fZ=cf(),pZ=XE("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>t.root});function mZ(e){return Rg({props:e,name:"MuiGrid",defaultTheme:fZ})}function gZ(e={}){const{createStyledComponent:t=pZ,useThemeProps:r=mZ,componentName:i="MuiGrid"}=e,c=H.createContext(void 0),d=(b,S)=>{const{container:k,direction:P,spacing:O,wrap:G,gridSize:F}=b,q={root:["root",k&&"container",G!=="wrap"&&`wrap-xs-${String(G)}`,...dZ(P),...cZ(F),...k?uZ(O,S.breakpoints.keys[0]):[]]};return Qn(q,ce=>Zn(i,ce),{})},y=t(iZ,aZ,oZ,nZ,sZ,lZ,rZ),a=H.forwardRef(function(S,k){var P,O,G,F,q,ce,B,U;const Z=Ag(),J=r(S),Y=kg(J),he=H.useContext(c),{className:se,children:De,columns:fe=12,container:$=!1,component:ue="div",direction:Je="row",wrap:Ke="wrap",spacing:ke=0,rowSpacing:ze=ke,columnSpacing:nt=ke,disableEqualOverflow:_t,unstable_level:Ue=0}=Y,Ee=fn(Y,hZ);let _e=_t;Ue&&_t!==void 0&&(_e=S.disableEqualOverflow);const $e={},be={},Me={};Object.entries(Ee).forEach(([Et,Ct])=>{Z.breakpoints.values[Et]!==void 0?$e[Et]=Ct:Z.breakpoints.values[Et.replace("Offset","")]!==void 0?be[Et.replace("Offset","")]=Ct:Me[Et]=Ct});const Ge=(P=S.columns)!=null?P:Ue?void 0:fe,ut=(O=S.spacing)!=null?O:Ue?void 0:ke,ht=(G=(F=S.rowSpacing)!=null?F:S.spacing)!=null?G:Ue?void 0:ze,Lt=(q=(ce=S.columnSpacing)!=null?ce:S.spacing)!=null?q:Ue?void 0:nt,zt=ee({},Y,{level:Ue,columns:Ge,container:$,direction:Je,wrap:Ke,spacing:ut,rowSpacing:ht,columnSpacing:Lt,gridSize:$e,gridOffset:be,disableEqualOverflow:(B=(U=_e)!=null?U:he)!=null?B:!1,parentDisableEqualOverflow:he}),Rt=d(zt,Z);let St=ne(y,ee({ref:k,as:ue,ownerState:zt,className:hn(Rt.root,se)},Me,{children:H.Children.map(De,Et=>{if(H.isValidElement(Et)&&__(Et,["Grid"])){var Ct;return H.cloneElement(Et,{unstable_level:(Ct=Et.props.unstable_level)!=null?Ct:Ue+1})}return Et})}));return _e!==void 0&&_e!==(he??!1)&&(St=ne(c.Provider,{value:_e,children:St})),St});return a.muiName="Grid",a}const yZ=["component","direction","spacing","divider","children","className","useFlexGap"],_Z=cf(),vZ=XE("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function xZ(e){return Rg({props:e,name:"MuiStack",defaultTheme:_Z})}function bZ(e,t){const r=H.Children.toArray(e).filter(Boolean);return r.reduce((i,c,d)=>(i.push(c),d<r.length-1&&i.push(H.cloneElement(t,{key:`separator-${d}`})),i),[])}const wZ=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],SZ=({ownerState:e,theme:t})=>{let r=ee({display:"flex",flexDirection:"column"},No({theme:t},Lu({values:e.direction,breakpoints:t.breakpoints.values}),i=>({flexDirection:i})));if(e.spacing){const i=HE(t),c=Object.keys(t.breakpoints.values).reduce((b,S)=>((typeof e.spacing=="object"&&e.spacing[S]!=null||typeof e.direction=="object"&&e.direction[S]!=null)&&(b[S]=!0),b),{}),d=Lu({values:e.direction,base:c}),y=Lu({values:e.spacing,base:c});typeof d=="object"&&Object.keys(d).forEach((b,S,k)=>{if(!d[b]){const O=S>0?d[k[S-1]]:"column";d[b]=O}}),r=Fo(r,No({theme:t},y,(b,S)=>e.useFlexGap?{gap:ju(i,b)}:{"& > :not(style) + :not(style)":{margin:0,[`margin${wZ(S?d[S]:e.direction)}`]:ju(i,b)}}))}return r=zq(t.breakpoints,r),r};function EZ(e={}){const{createStyledComponent:t=vZ,useThemeProps:r=xZ,componentName:i="MuiStack"}=e,c=()=>Qn({root:["root"]},b=>Zn(i,b),{}),d=t(SZ);return H.forwardRef(function(b,S){const k=r(b),P=kg(k),{component:O="div",direction:G="column",spacing:F=0,divider:q,children:ce,className:B,useFlexGap:U=!1}=P,Z=fn(P,yZ),J={direction:G,spacing:F,useFlexGap:U},Y=c();return ne(d,ee({as:O,ownerState:J,ref:S,className:hn(Y.root,B)},Z,{children:q?bZ(ce,q):ce}))})}function TZ(e,t){return ee({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const CZ=["mode","contrastThreshold","tonalOffset"],lR={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:tg.white,default:tg.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Jb={text:{primary:tg.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:tg.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function cR(e,t,r,i){const c=i.light||i,d=i.dark||i*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=QE(e.main,c):t==="dark"&&(e.dark=YE(e.main,d)))}function MZ(e="light"){return e==="dark"?{main:rh[200],light:rh[50],dark:rh[400]}:{main:rh[700],light:rh[400],dark:rh[800]}}function AZ(e="light"){return e==="dark"?{main:nh[200],light:nh[50],dark:nh[400]}:{main:nh[500],light:nh[300],dark:nh[700]}}function kZ(e="light"){return e==="dark"?{main:th[500],light:th[300],dark:th[700]}:{main:th[700],light:th[400],dark:th[800]}}function RZ(e="light"){return e==="dark"?{main:ih[400],light:ih[300],dark:ih[700]}:{main:ih[700],light:ih[500],dark:ih[900]}}function IZ(e="light"){return e==="dark"?{main:oh[400],light:oh[300],dark:oh[700]}:{main:oh[800],light:oh[500],dark:oh[900]}}function PZ(e="light"){return e==="dark"?{main:Kp[400],light:Kp[300],dark:Kp[700]}:{main:"#ed6c02",light:Kp[500],dark:Kp[900]}}function LZ(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:i=.2}=e,c=fn(e,CZ),d=e.primary||MZ(t),y=e.secondary||AZ(t),a=e.error||kZ(t),b=e.info||RZ(t),S=e.success||IZ(t),k=e.warning||PZ(t);function P(q){return VH(q,Jb.text.primary)>=r?Jb.text.primary:lR.text.primary}const O=({color:q,name:ce,mainShade:B=500,lightShade:U=300,darkShade:Z=700})=>{if(q=ee({},q),!q.main&&q[B]&&(q.main=q[B]),!q.hasOwnProperty("main"))throw new Error(pc(11,ce?` (${ce})`:"",B));if(typeof q.main!="string")throw new Error(pc(12,ce?` (${ce})`:"",JSON.stringify(q.main)));return cR(q,"light",U,i),cR(q,"dark",Z,i),q.contrastText||(q.contrastText=P(q.main)),q},G={dark:Jb,light:lR};return Fo(ee({common:ee({},tg),mode:t,primary:O({color:d,name:"primary"}),secondary:O({color:y,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:O({color:a,name:"error"}),warning:O({color:k,name:"warning"}),info:O({color:b,name:"info"}),success:O({color:S,name:"success"}),grey:Qs,contrastThreshold:r,getContrastText:P,augmentColor:O,tonalOffset:i},G[t]),c)}const DZ=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function zZ(e){return Math.round(e*1e5)/1e5}const uR={textTransform:"uppercase"},dR='"Roboto", "Helvetica", "Arial", sans-serif';function OZ(e,t){const r=typeof t=="function"?t(e):t,{fontFamily:i=dR,fontSize:c=14,fontWeightLight:d=300,fontWeightRegular:y=400,fontWeightMedium:a=500,fontWeightBold:b=700,htmlFontSize:S=16,allVariants:k,pxToRem:P}=r,O=fn(r,DZ),G=c/14,F=P||(B=>`${B/S*G}rem`),q=(B,U,Z,J,Y)=>ee({fontFamily:i,fontWeight:B,fontSize:F(U),lineHeight:Z},i===dR?{letterSpacing:`${zZ(J/U)}em`}:{},Y,k),ce={h1:q(d,96,1.167,-1.5),h2:q(d,60,1.2,-.5),h3:q(y,48,1.167,0),h4:q(y,34,1.235,.25),h5:q(y,24,1.334,0),h6:q(a,20,1.6,.15),subtitle1:q(y,16,1.75,.15),subtitle2:q(a,14,1.57,.1),body1:q(y,16,1.5,.15),body2:q(y,14,1.43,.15),button:q(a,14,1.75,.4,uR),caption:q(y,12,1.66,.4),overline:q(y,12,2.66,1,uR),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Fo(ee({htmlFontSize:S,pxToRem:F,fontFamily:i,fontSize:c,fontWeightLight:d,fontWeightRegular:y,fontWeightMedium:a,fontWeightBold:b},ce),O,{clone:!1})}const FZ=.2,BZ=.14,NZ=.12;function ni(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${FZ})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${BZ})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${NZ})`].join(",")}const $Z=["none",ni(0,2,1,-1,0,1,1,0,0,1,3,0),ni(0,3,1,-2,0,2,2,0,0,1,5,0),ni(0,3,3,-2,0,3,4,0,0,1,8,0),ni(0,2,4,-1,0,4,5,0,0,1,10,0),ni(0,3,5,-1,0,5,8,0,0,1,14,0),ni(0,3,5,-1,0,6,10,0,0,1,18,0),ni(0,4,5,-2,0,7,10,1,0,2,16,1),ni(0,5,5,-3,0,8,10,1,0,3,14,2),ni(0,5,6,-3,0,9,12,1,0,3,16,2),ni(0,6,6,-3,0,10,14,1,0,4,18,3),ni(0,6,7,-4,0,11,15,1,0,4,20,3),ni(0,7,8,-4,0,12,17,2,0,5,22,4),ni(0,7,8,-4,0,13,19,2,0,5,24,4),ni(0,7,9,-4,0,14,21,2,0,5,26,4),ni(0,8,9,-5,0,15,22,2,0,6,28,5),ni(0,8,10,-5,0,16,24,2,0,6,30,5),ni(0,8,11,-5,0,17,26,2,0,6,32,5),ni(0,9,11,-5,0,18,28,2,0,7,34,6),ni(0,9,12,-6,0,19,29,2,0,7,36,6),ni(0,10,13,-6,0,20,31,3,0,8,38,7),ni(0,10,13,-6,0,21,33,3,0,8,40,7),ni(0,10,14,-6,0,22,35,3,0,8,42,7),ni(0,11,14,-7,0,23,36,3,0,9,44,8),ni(0,11,15,-7,0,24,38,3,0,9,46,8)],UZ=$Z,VZ=["duration","easing","delay"],jZ={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},GZ={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function hR(e){return`${Math.round(e)}ms`}function WZ(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function qZ(e){const t=ee({},jZ,e.easing),r=ee({},GZ,e.duration);return ee({getAutoHeightDuration:WZ,create:(c=["all"],d={})=>{const{duration:y=r.standard,easing:a=t.easeInOut,delay:b=0}=d;return fn(d,VZ),(Array.isArray(c)?c:[c]).map(S=>`${S} ${typeof y=="string"?y:hR(y)} ${a} ${typeof b=="string"?b:hR(b)}`).join(",")}},e,{easing:t,duration:r})}const HZ={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},ZZ=HZ,XZ=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function al(e={},...t){const{mixins:r={},palette:i={},transitions:c={},typography:d={}}=e,y=fn(e,XZ);if(e.vars)throw new Error(pc(18));const a=LZ(i),b=cf(e);let S=Fo(b,{mixins:TZ(b.breakpoints,r),palette:a,shadows:UZ.slice(),typography:OZ(a,d),transitions:qZ(c),zIndex:ee({},ZZ)});return S=Fo(S,y),S=t.reduce((k,P)=>Fo(k,P),S),S.unstable_sxConfig=ee({},O1,y==null?void 0:y.unstable_sxConfig),S.unstable_sx=function(P){return F1({sx:P,theme:this})},S}function KZ(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function YZ(e){return parseFloat(e)}const QZ=al(),N1=QZ;function Hi(){const e=Ag(N1);return e[Vu]||e}function Jn({props:e,name:t}){return Rg({props:e,name:t,defaultTheme:N1,themeId:Vu})}const va=e=>Pm(e)&&e!=="classes",$1=Pm,JZ=wO({themeId:Vu,defaultTheme:N1,rootShouldForwardProp:va}),Yt=JZ,eX=["theme"];function Pg(e){let{theme:t}=e,r=fn(e,eX);const i=t[Vu];return ne(ZH,ee({},r,{themeId:i?Vu:void 0,theme:i||t}))}const tX=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)},fR=tX;function uc(e){return typeof e=="string"}function nX(e,t,r){return e===void 0||uc(e)?t:ee({},t,{ownerState:ee({},t.ownerState,r)})}function rX(e,t,r=(i,c)=>i===c){return e.length===t.length&&e.every((i,c)=>r(i,t[c]))}const iX={disableDefaultClasses:!1},oX=H.createContext(iX);function aX(e){const{disableDefaultClasses:t}=H.useContext(oX);return r=>t?"":e(r)}function sX(e,t=[]){if(e===void 0)return{};const r={};return Object.keys(e).filter(i=>i.match(/^on[A-Z]/)&&typeof e[i]=="function"&&!t.includes(i)).forEach(i=>{r[i]=e[i]}),r}function W2(e,t){return typeof e=="function"?e(t):e}function pR(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(r=>!(r.match(/^on[A-Z]/)&&typeof e[r]=="function")).forEach(r=>{t[r]=e[r]}),t}function lX(e){const{getSlotProps:t,additionalProps:r,externalSlotProps:i,externalForwardedProps:c,className:d}=e;if(!t){const G=hn(c==null?void 0:c.className,i==null?void 0:i.className,d,r==null?void 0:r.className),F=ee({},r==null?void 0:r.style,c==null?void 0:c.style,i==null?void 0:i.style),q=ee({},r,c,i);return G.length>0&&(q.className=G),Object.keys(F).length>0&&(q.style=F),{props:q,internalRef:void 0}}const y=sX(ee({},c,i)),a=pR(i),b=pR(c),S=t(y),k=hn(S==null?void 0:S.className,r==null?void 0:r.className,d,c==null?void 0:c.className,i==null?void 0:i.className),P=ee({},S==null?void 0:S.style,r==null?void 0:r.style,c==null?void 0:c.style,i==null?void 0:i.style),O=ee({},S,r,b,a);return k.length>0&&(O.className=k),Object.keys(P).length>0&&(O.style=P),{props:O,internalRef:S.ref}}const cX=["elementType","externalSlotProps","ownerState"];function us(e){var t;const{elementType:r,externalSlotProps:i,ownerState:c}=e,d=fn(e,cX),y=W2(i,c),{props:a,internalRef:b}=lX(ee({},d,{externalSlotProps:y})),S=Si(b,y==null?void 0:y.ref,(t=e.additionalProps)==null?void 0:t.ref);return nX(r,ee({},a,{ref:S}),c)}const uX=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function dX(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function hX(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=i=>e.ownerDocument.querySelector(`input[type="radio"]${i}`);let r=t(`[name="${e.name}"]:checked`);return r||(r=t(`[name="${e.name}"]`)),r!==e}function fX(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||hX(e))}function pX(e){const t=[],r=[];return Array.from(e.querySelectorAll(uX)).forEach((i,c)=>{const d=dX(i);d===-1||!fX(i)||(d===0?t.push(i):r.push({documentOrder:c,tabIndex:d,node:i}))}),r.sort((i,c)=>i.tabIndex===c.tabIndex?i.documentOrder-c.documentOrder:i.tabIndex-c.tabIndex).map(i=>i.node).concat(t)}function mX(){return!0}function gX(e){const{children:t,disableAutoFocus:r=!1,disableEnforceFocus:i=!1,disableRestoreFocus:c=!1,getTabbable:d=pX,isEnabled:y=mX,open:a}=e,b=H.useRef(!1),S=H.useRef(null),k=H.useRef(null),P=H.useRef(null),O=H.useRef(null),G=H.useRef(!1),F=H.useRef(null),q=Si(t.ref,F),ce=H.useRef(null);H.useEffect(()=>{!a||!F.current||(G.current=!r)},[r,a]),H.useEffect(()=>{if(!a||!F.current)return;const Z=wi(F.current);return F.current.contains(Z.activeElement)||(F.current.hasAttribute("tabIndex")||F.current.setAttribute("tabIndex","-1"),G.current&&F.current.focus()),()=>{c||(P.current&&P.current.focus&&(b.current=!0,P.current.focus()),P.current=null)}},[a]),H.useEffect(()=>{if(!a||!F.current)return;const Z=wi(F.current),J=se=>{const{current:De}=F;if(De!==null){if(!Z.hasFocus()||i||!y()||b.current){b.current=!1;return}if(!De.contains(Z.activeElement)){if(se&&O.current!==se.target||Z.activeElement!==O.current)O.current=null;else if(O.current!==null)return;if(!G.current)return;let ue=[];if((Z.activeElement===S.current||Z.activeElement===k.current)&&(ue=d(F.current)),ue.length>0){var fe,$;const Je=!!((fe=ce.current)!=null&&fe.shiftKey&&(($=ce.current)==null?void 0:$.key)==="Tab"),Ke=ue[0],ke=ue[ue.length-1];typeof Ke!="string"&&typeof ke!="string"&&(Je?ke.focus():Ke.focus())}else De.focus()}}},Y=se=>{ce.current=se,!(i||!y()||se.key!=="Tab")&&Z.activeElement===F.current&&se.shiftKey&&(b.current=!0,k.current&&k.current.focus())};Z.addEventListener("focusin",J),Z.addEventListener("keydown",Y,!0);const he=setInterval(()=>{Z.activeElement&&Z.activeElement.tagName==="BODY"&&J(null)},50);return()=>{clearInterval(he),Z.removeEventListener("focusin",J),Z.removeEventListener("keydown",Y,!0)}},[r,i,c,y,a,d]);const B=Z=>{P.current===null&&(P.current=Z.relatedTarget),G.current=!0,O.current=Z.target;const J=t.props.onFocus;J&&J(Z)},U=Z=>{P.current===null&&(P.current=Z.relatedTarget),G.current=!0};return en(H.Fragment,{children:[ne("div",{tabIndex:a?0:-1,onFocus:U,ref:S,"data-testid":"sentinelStart"}),H.cloneElement(t,{ref:q,onFocus:B}),ne("div",{tabIndex:a?0:-1,onFocus:U,ref:k,"data-testid":"sentinelEnd"})]})}function yX(e){return typeof e=="function"?e():e}const _X=H.forwardRef(function(t,r){const{children:i,container:c,disablePortal:d=!1}=t,[y,a]=H.useState(null),b=Si(H.isValidElement(i)?i.ref:null,r);if(Js(()=>{d||a(yX(c)||document.body)},[c,d]),Js(()=>{if(y&&!d)return $2(r,y),()=>{$2(r,null)}},[r,y,d]),d){if(H.isValidElement(i)){const S={ref:b};return H.cloneElement(i,S)}return ne(H.Fragment,{children:i})}return ne(H.Fragment,{children:y&&fc.createPortal(i,y)})}),vX=_X;function xX(e){const t=wi(e);return t.body===e?Xo(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function Lm(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function mR(e){return parseInt(Xo(e).getComputedStyle(e).paddingRight,10)||0}function bX(e){const r=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,i=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return r||i}function gR(e,t,r,i,c){const d=[t,r,...i];[].forEach.call(e.children,y=>{const a=d.indexOf(y)===-1,b=!bX(y);a&&b&&Lm(y,c)})}function ew(e,t){let r=-1;return e.some((i,c)=>t(i)?(r=c,!0):!1),r}function wX(e,t){const r=[],i=e.container;if(!t.disableScrollLock){if(xX(i)){const y=Hz(wi(i));r.push({value:i.style.paddingRight,property:"padding-right",el:i}),i.style.paddingRight=`${mR(i)+y}px`;const a=wi(i).querySelectorAll(".mui-fixed");[].forEach.call(a,b=>{r.push({value:b.style.paddingRight,property:"padding-right",el:b}),b.style.paddingRight=`${mR(b)+y}px`})}let d;if(i.parentNode instanceof DocumentFragment)d=wi(i).body;else{const y=i.parentElement,a=Xo(i);d=(y==null?void 0:y.nodeName)==="HTML"&&a.getComputedStyle(y).overflowY==="scroll"?y:i}r.push({value:d.style.overflow,property:"overflow",el:d},{value:d.style.overflowX,property:"overflow-x",el:d},{value:d.style.overflowY,property:"overflow-y",el:d}),d.style.overflow="hidden"}return()=>{r.forEach(({value:d,el:y,property:a})=>{d?y.style.setProperty(a,d):y.style.removeProperty(a)})}}function SX(e){const t=[];return[].forEach.call(e.children,r=>{r.getAttribute("aria-hidden")==="true"&&t.push(r)}),t}class EX{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,r){let i=this.modals.indexOf(t);if(i!==-1)return i;i=this.modals.length,this.modals.push(t),t.modalRef&&Lm(t.modalRef,!1);const c=SX(r);gR(r,t.mount,t.modalRef,c,!0);const d=ew(this.containers,y=>y.container===r);return d!==-1?(this.containers[d].modals.push(t),i):(this.containers.push({modals:[t],container:r,restore:null,hiddenSiblings:c}),i)}mount(t,r){const i=ew(this.containers,d=>d.modals.indexOf(t)!==-1),c=this.containers[i];c.restore||(c.restore=wX(c,r))}remove(t,r=!0){const i=this.modals.indexOf(t);if(i===-1)return i;const c=ew(this.containers,y=>y.modals.indexOf(t)!==-1),d=this.containers[c];if(d.modals.splice(d.modals.indexOf(t),1),this.modals.splice(i,1),d.modals.length===0)d.restore&&d.restore(),t.modalRef&&Lm(t.modalRef,r),gR(d.container,t.mount,t.modalRef,d.hiddenSiblings,!1),this.containers.splice(c,1);else{const y=d.modals[d.modals.length-1];y.modalRef&&Lm(y.modalRef,!1)}return i}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function TX(e){return Zn("MuiModal",e)}rr("MuiModal",["root","hidden","backdrop"]);const CX=["children","closeAfterTransition","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"],MX=e=>{const{open:t,exited:r}=e;return Qn({root:["root",!t&&r&&"hidden"],backdrop:["backdrop"]},aX(TX))};function AX(e){return typeof e=="function"?e():e}function kX(e){return e?e.props.hasOwnProperty("in"):!1}const RX=new EX,IX=H.forwardRef(function(t,r){var i,c;const{children:d,closeAfterTransition:y=!1,container:a,disableAutoFocus:b=!1,disableEnforceFocus:S=!1,disableEscapeKeyDown:k=!1,disablePortal:P=!1,disableRestoreFocus:O=!1,disableScrollLock:G=!1,hideBackdrop:F=!1,keepMounted:q=!1,manager:ce=RX,onBackdropClick:B,onClose:U,onKeyDown:Z,open:J,onTransitionEnter:Y,onTransitionExited:he,slotProps:se={},slots:De={}}=t,fe=fn(t,CX),$=ce,[ue,Je]=H.useState(!J),Ke=H.useRef({}),ke=H.useRef(null),ze=H.useRef(null),nt=Si(ze,r),_t=kX(d),Ue=(i=t["aria-hidden"])!=null?i:!0,Ee=()=>wi(ke.current),_e=()=>(Ke.current.modalRef=ze.current,Ke.current.mountNode=ke.current,Ke.current),$e=()=>{$.mount(_e(),{disableScrollLock:G}),ze.current&&(ze.current.scrollTop=0)},be=pa(()=>{const vn=AX(a)||Ee().body;$.add(_e(),vn),ze.current&&$e()}),Me=H.useCallback(()=>$.isTopModal(_e()),[$]),Ge=pa(vn=>{ke.current=vn,!(!vn||!ze.current)&&(J&&Me()?$e():Lm(ze.current,Ue))}),ut=H.useCallback(()=>{$.remove(_e(),Ue)},[$,Ue]);H.useEffect(()=>()=>{ut()},[ut]),H.useEffect(()=>{J?be():(!_t||!y)&&ut()},[J,ut,_t,y,be]);const ht=ee({},t,{closeAfterTransition:y,disableAutoFocus:b,disableEnforceFocus:S,disableEscapeKeyDown:k,disablePortal:P,disableRestoreFocus:O,disableScrollLock:G,exited:ue,hideBackdrop:F,keepMounted:q}),Lt=MX(ht),zt=()=>{Je(!1),Y&&Y()},Rt=()=>{Je(!0),he&&he(),y&&ut()},St=vn=>{vn.target===vn.currentTarget&&(B&&B(vn),U&&U(vn,"backdropClick"))},Et=vn=>{Z&&Z(vn),!(vn.key!=="Escape"||!Me())&&(k||(vn.stopPropagation(),U&&U(vn,"escapeKeyDown")))},Ct={};d.props.tabIndex===void 0&&(Ct.tabIndex="-1"),_t&&(Ct.onEnter=N2(zt,d.props.onEnter),Ct.onExited=N2(Rt,d.props.onExited));const Kt=(c=De.root)!=null?c:"div",Nt=us({elementType:Kt,externalSlotProps:se.root,externalForwardedProps:fe,additionalProps:{ref:nt,role:"presentation",onKeyDown:Et},className:Lt.root,ownerState:ht}),pn=De.backdrop,Pn=us({elementType:pn,externalSlotProps:se.backdrop,additionalProps:{"aria-hidden":!0,onClick:St,open:J},className:Lt.backdrop,ownerState:ht});return!q&&!J&&(!_t||ue)?null:ne(vX,{ref:Ge,container:a,disablePortal:P,children:en(Kt,ee({},Nt,{children:[!F&&pn?ne(pn,ee({},Pn)):null,ne(gX,{disableEnforceFocus:S,disableAutoFocus:b,disableRestoreFocus:O,isEnabled:Me,open:J,children:H.cloneElement(d,Ct)})]}))})}),PX=IX;function LX(e){const{children:t,defer:r=!1,fallback:i=null}=e,[c,d]=H.useState(!1);return Js(()=>{r||d(!0)},[r]),H.useEffect(()=>{r&&d(!0)},[r]),ne(H.Fragment,{children:c?t:i})}const DX=2;function CO(e,t){return e-t}function Jp(e,t,r){return e==null?t:Math.min(Math.max(t,e),r)}function yR(e,t){var r;const{index:i}=(r=e.reduce((c,d,y)=>{const a=Math.abs(t-d);return c===null||a<c.distance||a===c.distance?{distance:a,index:y}:c},null))!=null?r:{};return i}function j0(e,t){if(t.current!==void 0&&e.changedTouches){const r=e;for(let i=0;i<r.changedTouches.length;i+=1){const c=r.changedTouches[i];if(c.identifier===t.current)return{x:c.clientX,y:c.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function rv(e,t,r){return(e-t)*100/(r-t)}function zX(e,t,r){return(r-t)*e+t}function OX(e){if(Math.abs(e)<1){const r=e.toExponential().split("e-"),i=r[0].split(".")[1];return(i?i.length:0)+parseInt(r[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}function FX(e,t,r){const i=Math.round((e-r)/t)*t+r;return Number(i.toFixed(OX(t)))}function _R({values:e,newValue:t,index:r}){const i=e.slice();return i[r]=t,i.sort(CO)}function G0({sliderRef:e,activeIndex:t,setActive:r}){var i,c;const d=wi(e.current);if(!((i=e.current)!=null&&i.contains(d.activeElement))||Number(d==null||(c=d.activeElement)==null?void 0:c.getAttribute("data-index"))!==t){var y;(y=e.current)==null||y.querySelector(`[type="range"][data-index="${t}"]`).focus()}r&&r(t)}function W0(e,t){return typeof e=="number"&&typeof t=="number"?e===t:typeof e=="object"&&typeof t=="object"?rX(e,t):!1}const BX={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},NX=e=>e;let q0;function tw(){return q0===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?q0=CSS.supports("touch-action","none"):q0=!0),q0}function $X(e){const{"aria-labelledby":t,defaultValue:r,disabled:i=!1,disableSwap:c=!1,isRtl:d=!1,marks:y=!1,max:a=100,min:b=0,name:S,onChange:k,onChangeCommitted:P,orientation:O="horizontal",rootRef:G,scale:F=NX,step:q=1,tabIndex:ce,value:B}=e,U=H.useRef(),[Z,J]=H.useState(-1),[Y,he]=H.useState(-1),[se,De]=H.useState(!1),fe=H.useRef(0),[$,ue]=ng({controlled:B,default:r??b,name:"Slider"}),Je=k&&((Ut,rn,En)=>{const Tn=Ut.nativeEvent||Ut,Cn=new Tn.constructor(Tn.type,Tn);Object.defineProperty(Cn,"target",{writable:!0,value:{value:rn,name:S}}),k(Cn,rn,En)}),Ke=Array.isArray($);let ke=Ke?$.slice().sort(CO):[$];ke=ke.map(Ut=>Jp(Ut,b,a));const ze=y===!0&&q!==null?[...Array(Math.floor((a-b)/q)+1)].map((Ut,rn)=>({value:b+q*rn})):y||[],nt=ze.map(Ut=>Ut.value),{isFocusVisibleRef:_t,onBlur:Ue,onFocus:Ee,ref:_e}=qz(),[$e,be]=H.useState(-1),Me=H.useRef(),Ge=Si(_e,Me),ut=Si(G,Ge),ht=Ut=>rn=>{var En;const Tn=Number(rn.currentTarget.getAttribute("data-index"));Ee(rn),_t.current===!0&&be(Tn),he(Tn),Ut==null||(En=Ut.onFocus)==null||En.call(Ut,rn)},Lt=Ut=>rn=>{var En;Ue(rn),_t.current===!1&&be(-1),he(-1),Ut==null||(En=Ut.onBlur)==null||En.call(Ut,rn)};Js(()=>{if(i&&Me.current.contains(document.activeElement)){var Ut;(Ut=document.activeElement)==null||Ut.blur()}},[i]),i&&Z!==-1&&J(-1),i&&$e!==-1&&be(-1);const zt=Ut=>rn=>{var En;(En=Ut.onChange)==null||En.call(Ut,rn);const Tn=Number(rn.currentTarget.getAttribute("data-index")),Cn=ke[Tn],ln=nt.indexOf(Cn);let Ne=rn.target.valueAsNumber;if(ze&&q==null&&(Ne=Ne<Cn?nt[ln-1]:nt[ln+1]),Ne=Jp(Ne,b,a),ze&&q==null){const Ze=nt.indexOf(ke[Tn]);Ne=Ne<ke[Tn]?nt[Ze-1]:nt[Ze+1]}if(Ke){c&&(Ne=Jp(Ne,ke[Tn-1]||-1/0,ke[Tn+1]||1/0));const Ze=Ne;Ne=_R({values:ke,newValue:Ne,index:Tn});let lt=Tn;c||(lt=Ne.indexOf(Ze)),G0({sliderRef:Me,activeIndex:lt})}ue(Ne),be(Tn),Je&&!W0(Ne,$)&&Je(rn,Ne,Tn),P&&P(rn,Ne)},Rt=H.useRef();let St=O;d&&O==="horizontal"&&(St+="-reverse");const Et=({finger:Ut,move:rn=!1})=>{const{current:En}=Me,{width:Tn,height:Cn,bottom:ln,left:Ne}=En.getBoundingClientRect();let Ze;St.indexOf("vertical")===0?Ze=(ln-Ut.y)/Cn:Ze=(Ut.x-Ne)/Tn,St.indexOf("-reverse")!==-1&&(Ze=1-Ze);let lt;if(lt=zX(Ze,b,a),q)lt=FX(lt,q,b);else{const tn=yR(nt,lt);lt=nt[tn]}lt=Jp(lt,b,a);let Gt=0;if(Ke){rn?Gt=Rt.current:Gt=yR(ke,lt),c&&(lt=Jp(lt,ke[Gt-1]||-1/0,ke[Gt+1]||1/0));const tn=lt;lt=_R({values:ke,newValue:lt,index:Gt}),c&&rn||(Gt=lt.indexOf(tn),Rt.current=Gt)}return{newValue:lt,activeIndex:Gt}},Ct=pa(Ut=>{const rn=j0(Ut,U);if(!rn)return;if(fe.current+=1,Ut.type==="mousemove"&&Ut.buttons===0){Kt(Ut);return}const{newValue:En,activeIndex:Tn}=Et({finger:rn,move:!0});G0({sliderRef:Me,activeIndex:Tn,setActive:J}),ue(En),!se&&fe.current>DX&&De(!0),Je&&!W0(En,$)&&Je(Ut,En,Tn)}),Kt=pa(Ut=>{const rn=j0(Ut,U);if(De(!1),!rn)return;const{newValue:En}=Et({finger:rn,move:!0});J(-1),Ut.type==="touchend"&&he(-1),P&&P(Ut,En),U.current=void 0,pn()}),Nt=pa(Ut=>{if(i)return;tw()||Ut.preventDefault();const rn=Ut.changedTouches[0];rn!=null&&(U.current=rn.identifier);const En=j0(Ut,U);if(En!==!1){const{newValue:Cn,activeIndex:ln}=Et({finger:En});G0({sliderRef:Me,activeIndex:ln,setActive:J}),ue(Cn),Je&&!W0(Cn,$)&&Je(Ut,Cn,ln)}fe.current=0;const Tn=wi(Me.current);Tn.addEventListener("touchmove",Ct),Tn.addEventListener("touchend",Kt)}),pn=H.useCallback(()=>{const Ut=wi(Me.current);Ut.removeEventListener("mousemove",Ct),Ut.removeEventListener("mouseup",Kt),Ut.removeEventListener("touchmove",Ct),Ut.removeEventListener("touchend",Kt)},[Kt,Ct]);H.useEffect(()=>{const{current:Ut}=Me;return Ut.addEventListener("touchstart",Nt,{passive:tw()}),()=>{Ut.removeEventListener("touchstart",Nt,{passive:tw()}),pn()}},[pn,Nt]),H.useEffect(()=>{i&&pn()},[i,pn]);const Pn=Ut=>rn=>{var En;if((En=Ut.onMouseDown)==null||En.call(Ut,rn),i||rn.defaultPrevented||rn.button!==0)return;rn.preventDefault();const Tn=j0(rn,U);if(Tn!==!1){const{newValue:ln,activeIndex:Ne}=Et({finger:Tn});G0({sliderRef:Me,activeIndex:Ne,setActive:J}),ue(ln),Je&&!W0(ln,$)&&Je(rn,ln,Ne)}fe.current=0;const Cn=wi(Me.current);Cn.addEventListener("mousemove",Ct),Cn.addEventListener("mouseup",Kt)},vn=rv(Ke?ke[0]:b,b,a),or=rv(ke[ke.length-1],b,a)-vn,Wr=(Ut={})=>{const rn={onMouseDown:Pn(Ut||{})},En=ee({},Ut,rn);return ee({ref:ut},En)},Ln=Ut=>rn=>{var En;(En=Ut.onMouseOver)==null||En.call(Ut,rn);const Tn=Number(rn.currentTarget.getAttribute("data-index"));he(Tn)},Xn=Ut=>rn=>{var En;(En=Ut.onMouseLeave)==null||En.call(Ut,rn),he(-1)};return{active:Z,axis:St,axisProps:BX,dragging:se,focusedThumbIndex:$e,getHiddenInputProps:(Ut={})=>{var rn;const En={onChange:zt(Ut||{}),onFocus:ht(Ut||{}),onBlur:Lt(Ut||{})},Tn=ee({},Ut,En);return ee({tabIndex:ce,"aria-labelledby":t,"aria-orientation":O,"aria-valuemax":F(a),"aria-valuemin":F(b),name:S,type:"range",min:e.min,max:e.max,step:(rn=e.step)!=null?rn:void 0,disabled:i},Tn,{style:ee({},SW,{direction:d?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:Wr,getThumbProps:(Ut={})=>{const rn={onMouseOver:Ln(Ut||{}),onMouseLeave:Xn(Ut||{})};return ee({},Ut,rn)},marks:ze,open:Y,range:Ke,rootRef:ut,trackLeap:or,trackOffset:vn,values:ke}}const UX=["onChange","maxRows","minRows","style","value"];function H0(e){return parseInt(e,10)||0}const VX={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function vR(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflow}const jX=H.forwardRef(function(t,r){const{onChange:i,maxRows:c,minRows:d=1,style:y,value:a}=t,b=fn(t,UX),{current:S}=H.useRef(a!=null),k=H.useRef(null),P=Si(r,k),O=H.useRef(null),G=H.useRef(0),[F,q]=H.useState({outerHeightStyle:0}),ce=H.useCallback(()=>{const Y=k.current,se=Xo(Y).getComputedStyle(Y);if(se.width==="0px")return{outerHeightStyle:0};const De=O.current;De.style.width=se.width,De.value=Y.value||t.placeholder||"x",De.value.slice(-1)===`
`&&(De.value+=" ");const fe=se.boxSizing,$=H0(se.paddingBottom)+H0(se.paddingTop),ue=H0(se.borderBottomWidth)+H0(se.borderTopWidth),Je=De.scrollHeight;De.value="x";const Ke=De.scrollHeight;let ke=Je;d&&(ke=Math.max(Number(d)*Ke,ke)),c&&(ke=Math.min(Number(c)*Ke,ke)),ke=Math.max(ke,Ke);const ze=ke+(fe==="border-box"?$+ue:0),nt=Math.abs(ke-Je)<=1;return{outerHeightStyle:ze,overflow:nt}},[c,d,t.placeholder]),B=(Y,he)=>{const{outerHeightStyle:se,overflow:De}=he;return G.current<20&&(se>0&&Math.abs((Y.outerHeightStyle||0)-se)>1||Y.overflow!==De)?(G.current+=1,{overflow:De,outerHeightStyle:se}):Y},U=H.useCallback(()=>{const Y=ce();vR(Y)||q(he=>B(he,Y))},[ce]),Z=()=>{const Y=ce();vR(Y)||fc.flushSync(()=>{q(he=>B(he,Y))})};H.useEffect(()=>{const Y=zE(()=>{G.current=0,k.current&&Z()});let he;const se=k.current,De=Xo(se);return De.addEventListener("resize",Y),typeof ResizeObserver<"u"&&(he=new ResizeObserver(Y),he.observe(se)),()=>{Y.clear(),De.removeEventListener("resize",Y),he&&he.disconnect()}}),Js(()=>{U()}),H.useEffect(()=>{G.current=0},[a]);const J=Y=>{G.current=0,S||U(),i&&i(Y)};return en(H.Fragment,{children:[ne("textarea",ee({value:a,onChange:J,ref:P,rows:d,style:ee({height:F.outerHeightStyle,overflow:F.overflow?"hidden":void 0},y)},b)),ne("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:O,tabIndex:-1,style:ee({},VX.shadow,y,{padding:0})})]})}),GX=jX;function WX(e){return Zn("MuiSvgIcon",e)}rr("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const qX=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],HX=e=>{const{color:t,fontSize:r,classes:i}=e,c={root:["root",t!=="inherit"&&`color${Bt(t)}`,`fontSize${Bt(r)}`]};return Qn(c,WX,i)},ZX=Yt("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${Bt(r.color)}`],t[`fontSize${Bt(r.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var r,i,c,d,y,a,b,S,k,P,O,G,F,q,ce,B,U;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:(r=e.transitions)==null||(i=r.create)==null?void 0:i.call(r,"fill",{duration:(c=e.transitions)==null||(d=c.duration)==null?void 0:d.shorter}),fontSize:{inherit:"inherit",small:((y=e.typography)==null||(a=y.pxToRem)==null?void 0:a.call(y,20))||"1.25rem",medium:((b=e.typography)==null||(S=b.pxToRem)==null?void 0:S.call(b,24))||"1.5rem",large:((k=e.typography)==null||(P=k.pxToRem)==null?void 0:P.call(k,35))||"2.1875rem"}[t.fontSize],color:(O=(G=(e.vars||e).palette)==null||(F=G[t.color])==null?void 0:F.main)!=null?O:{action:(q=(e.vars||e).palette)==null||(ce=q.action)==null?void 0:ce.active,disabled:(B=(e.vars||e).palette)==null||(U=B.action)==null?void 0:U.disabled,inherit:void 0}[t.color]}}),MO=H.forwardRef(function(t,r){const i=Jn({props:t,name:"MuiSvgIcon"}),{children:c,className:d,color:y="inherit",component:a="svg",fontSize:b="medium",htmlColor:S,inheritViewBox:k=!1,titleAccess:P,viewBox:O="0 0 24 24"}=i,G=fn(i,qX),F=ee({},i,{color:y,component:a,fontSize:b,instanceFontSize:t.fontSize,inheritViewBox:k,viewBox:O}),q={};k||(q.viewBox=O);const ce=HX(F);return en(ZX,ee({as:a,className:hn(ce.root,d),focusable:"false",color:S,"aria-hidden":P?void 0:!0,role:P?"img":void 0,ref:r},q,G,{ownerState:F,children:[c,P?ne("title",{children:P}):null]}))});MO.muiName="SvgIcon";const xR=MO;function Lg(e,t){function r(i,c){return ne(xR,ee({"data-testid":`${t}Icon`,ref:c},i,{children:e}))}return r.muiName=xR.muiName,H.memo(H.forwardRef(r))}function q2(e,t){return q2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,c){return i.__proto__=c,i},q2(e,t)}function Ec(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,q2(e,t)}const bR={disabled:!1},iv=Qe.createContext(null);var XX=function(t){return t.scrollTop},mm="unmounted",vu="exited",xu="entering",sh="entered",H2="exiting",sl=function(e){Ec(t,e);function t(i,c){var d;d=e.call(this,i,c)||this;var y=c,a=y&&!y.isMounting?i.enter:i.appear,b;return d.appearStatus=null,i.in?a?(b=vu,d.appearStatus=xu):b=sh:i.unmountOnExit||i.mountOnEnter?b=mm:b=vu,d.state={status:b},d.nextCallback=null,d}t.getDerivedStateFromProps=function(c,d){var y=c.in;return y&&d.status===mm?{status:vu}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(c){var d=null;if(c!==this.props){var y=this.state.status;this.props.in?y!==xu&&y!==sh&&(d=xu):(y===xu||y===sh)&&(d=H2)}this.updateStatus(!1,d)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var c=this.props.timeout,d,y,a;return d=y=a=c,c!=null&&typeof c!="number"&&(d=c.exit,y=c.enter,a=c.appear!==void 0?c.appear:y),{exit:d,enter:y,appear:a}},r.updateStatus=function(c,d){if(c===void 0&&(c=!1),d!==null)if(this.cancelNextCallback(),d===xu){if(this.props.unmountOnExit||this.props.mountOnEnter){var y=this.props.nodeRef?this.props.nodeRef.current:xh.findDOMNode(this);y&&XX(y)}this.performEnter(c)}else this.performExit();else this.props.unmountOnExit&&this.state.status===vu&&this.setState({status:mm})},r.performEnter=function(c){var d=this,y=this.props.enter,a=this.context?this.context.isMounting:c,b=this.props.nodeRef?[a]:[xh.findDOMNode(this),a],S=b[0],k=b[1],P=this.getTimeouts(),O=a?P.appear:P.enter;if(!c&&!y||bR.disabled){this.safeSetState({status:sh},function(){d.props.onEntered(S)});return}this.props.onEnter(S,k),this.safeSetState({status:xu},function(){d.props.onEntering(S,k),d.onTransitionEnd(O,function(){d.safeSetState({status:sh},function(){d.props.onEntered(S,k)})})})},r.performExit=function(){var c=this,d=this.props.exit,y=this.getTimeouts(),a=this.props.nodeRef?void 0:xh.findDOMNode(this);if(!d||bR.disabled){this.safeSetState({status:vu},function(){c.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:H2},function(){c.props.onExiting(a),c.onTransitionEnd(y.exit,function(){c.safeSetState({status:vu},function(){c.props.onExited(a)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(c,d){d=this.setNextCallback(d),this.setState(c,d)},r.setNextCallback=function(c){var d=this,y=!0;return this.nextCallback=function(a){y&&(y=!1,d.nextCallback=null,c(a))},this.nextCallback.cancel=function(){y=!1},this.nextCallback},r.onTransitionEnd=function(c,d){this.setNextCallback(d);var y=this.props.nodeRef?this.props.nodeRef.current:xh.findDOMNode(this),a=c==null&&!this.props.addEndListener;if(!y||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var b=this.props.nodeRef?[this.nextCallback]:[y,this.nextCallback],S=b[0],k=b[1];this.props.addEndListener(S,k)}c!=null&&setTimeout(this.nextCallback,c)},r.render=function(){var c=this.state.status;if(c===mm)return null;var d=this.props,y=d.children;d.in,d.mountOnEnter,d.unmountOnExit,d.appear,d.enter,d.exit,d.timeout,d.addEndListener,d.onEnter,d.onEntering,d.onEntered,d.onExit,d.onExiting,d.onExited,d.nodeRef;var a=fn(d,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Qe.createElement(iv.Provider,{value:null},typeof y=="function"?y(c,a):Qe.cloneElement(Qe.Children.only(y),a))},t}(Qe.Component);sl.contextType=iv;sl.propTypes={};function ah(){}sl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ah,onEntering:ah,onEntered:ah,onExit:ah,onExiting:ah,onExited:ah};sl.UNMOUNTED=mm;sl.EXITED=vu;sl.ENTERING=xu;sl.ENTERED=sh;sl.EXITING=H2;const U1=sl;function KX(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tT(e,t){var r=function(d){return t&&H.isValidElement(d)?t(d):d},i=Object.create(null);return e&&H.Children.map(e,function(c){return c}).forEach(function(c){i[c.key]=r(c)}),i}function YX(e,t){e=e||{},t=t||{};function r(k){return k in t?t[k]:e[k]}var i=Object.create(null),c=[];for(var d in e)d in t?c.length&&(i[d]=c,c=[]):c.push(d);var y,a={};for(var b in t){if(i[b])for(y=0;y<i[b].length;y++){var S=i[b][y];a[i[b][y]]=r(S)}a[b]=r(b)}for(y=0;y<c.length;y++)a[c[y]]=r(c[y]);return a}function ku(e,t,r){return r[t]!=null?r[t]:e.props[t]}function QX(e,t){return tT(e.children,function(r){return H.cloneElement(r,{onExited:t.bind(null,r),in:!0,appear:ku(r,"appear",e),enter:ku(r,"enter",e),exit:ku(r,"exit",e)})})}function JX(e,t,r){var i=tT(e.children),c=YX(t,i);return Object.keys(c).forEach(function(d){var y=c[d];if(H.isValidElement(y)){var a=d in t,b=d in i,S=t[d],k=H.isValidElement(S)&&!S.props.in;b&&(!a||k)?c[d]=H.cloneElement(y,{onExited:r.bind(null,y),in:!0,exit:ku(y,"exit",e),enter:ku(y,"enter",e)}):!b&&a&&!k?c[d]=H.cloneElement(y,{in:!1}):b&&a&&H.isValidElement(S)&&(c[d]=H.cloneElement(y,{onExited:r.bind(null,y),in:S.props.in,exit:ku(y,"exit",e),enter:ku(y,"enter",e)}))}}),c}var eK=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},tK={component:"div",childFactory:function(t){return t}},nT=function(e){Ec(t,e);function t(i,c){var d;d=e.call(this,i,c)||this;var y=d.handleExited.bind(KX(d));return d.state={contextValue:{isMounting:!0},handleExited:y,firstRender:!0},d}var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(c,d){var y=d.children,a=d.handleExited,b=d.firstRender;return{children:b?QX(c,a):JX(c,y,a),firstRender:!1}},r.handleExited=function(c,d){var y=tT(this.props.children);c.key in y||(c.props.onExited&&c.props.onExited(d),this.mounted&&this.setState(function(a){var b=ee({},a.children);return delete b[c.key],{children:b}}))},r.render=function(){var c=this.props,d=c.component,y=c.childFactory,a=fn(c,["component","childFactory"]),b=this.state.contextValue,S=eK(this.state.children).map(y);return delete a.appear,delete a.enter,delete a.exit,d===null?Qe.createElement(iv.Provider,{value:b},S):Qe.createElement(iv.Provider,{value:b},Qe.createElement(d,a,S))},t}(Qe.Component);nT.propTypes={};nT.defaultProps=tK;const nK=nT,V1=e=>e.scrollTop;function tl(e,t){var r,i;const{timeout:c,easing:d,style:y={}}=e;return{duration:(r=y.transitionDuration)!=null?r:typeof c=="number"?c:c[t.mode]||0,easing:(i=y.transitionTimingFunction)!=null?i:typeof d=="object"?d[t.mode]:d,delay:y.transitionDelay}}function rK(e){return Zn("MuiPaper",e)}rr("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const iK=["className","component","elevation","square","variant"],oK=e=>{const{square:t,elevation:r,variant:i,classes:c}=e,d={root:["root",i,!t&&"rounded",i==="elevation"&&`elevation${r}`]};return Qn(d,rK,c)},aK=Yt("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],!r.square&&t.rounded,r.variant==="elevation"&&t[`elevation${r.elevation}`]]}})(({theme:e,ownerState:t})=>{var r;return ee({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&ee({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${Kr("#fff",fR(t.elevation))}, ${Kr("#fff",fR(t.elevation))})`},e.vars&&{backgroundImage:(r=e.vars.overlays)==null?void 0:r[t.elevation]}))}),sK=H.forwardRef(function(t,r){const i=Jn({props:t,name:"MuiPaper"}),{className:c,component:d="div",elevation:y=1,square:a=!1,variant:b="elevation"}=i,S=fn(i,iK),k=ee({},i,{component:d,elevation:y,square:a,variant:b}),P=oK(k);return ne(aK,ee({as:d,ownerState:k,className:hn(P.root,c),ref:r},S))}),Dg=sK;function lK(e){const{className:t,classes:r,pulsate:i=!1,rippleX:c,rippleY:d,rippleSize:y,in:a,onExited:b,timeout:S}=e,[k,P]=H.useState(!1),O=hn(t,r.ripple,r.rippleVisible,i&&r.ripplePulsate),G={width:y,height:y,top:-(y/2)+d,left:-(y/2)+c},F=hn(r.child,k&&r.childLeaving,i&&r.childPulsate);return!a&&!k&&P(!0),H.useEffect(()=>{if(!a&&b!=null){const q=setTimeout(b,S);return()=>{clearTimeout(q)}}},[b,a,S]),ne("span",{className:O,style:G,children:ne("span",{className:F})})}const cK=rr("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),ua=cK,uK=["center","classes","className"];let j1=e=>e,wR,SR,ER,TR;const Z2=550,dK=80,hK=Sc(wR||(wR=j1`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),fK=Sc(SR||(SR=j1`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),pK=Sc(ER||(ER=j1`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),mK=Yt("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),gK=Yt(lK,{name:"MuiTouchRipple",slot:"Ripple"})(TR||(TR=j1`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),ua.rippleVisible,hK,Z2,({theme:e})=>e.transitions.easing.easeInOut,ua.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,ua.child,ua.childLeaving,fK,Z2,({theme:e})=>e.transitions.easing.easeInOut,ua.childPulsate,pK,({theme:e})=>e.transitions.easing.easeInOut),yK=H.forwardRef(function(t,r){const i=Jn({props:t,name:"MuiTouchRipple"}),{center:c=!1,classes:d={},className:y}=i,a=fn(i,uK),[b,S]=H.useState([]),k=H.useRef(0),P=H.useRef(null);H.useEffect(()=>{P.current&&(P.current(),P.current=null)},[b]);const O=H.useRef(!1),G=H.useRef(null),F=H.useRef(null),q=H.useRef(null);H.useEffect(()=>()=>{clearTimeout(G.current)},[]);const ce=H.useCallback(J=>{const{pulsate:Y,rippleX:he,rippleY:se,rippleSize:De,cb:fe}=J;S($=>[...$,ne(gK,{classes:{ripple:hn(d.ripple,ua.ripple),rippleVisible:hn(d.rippleVisible,ua.rippleVisible),ripplePulsate:hn(d.ripplePulsate,ua.ripplePulsate),child:hn(d.child,ua.child),childLeaving:hn(d.childLeaving,ua.childLeaving),childPulsate:hn(d.childPulsate,ua.childPulsate)},timeout:Z2,pulsate:Y,rippleX:he,rippleY:se,rippleSize:De},k.current)]),k.current+=1,P.current=fe},[d]),B=H.useCallback((J={},Y={},he=()=>{})=>{const{pulsate:se=!1,center:De=c||Y.pulsate,fakeElement:fe=!1}=Y;if((J==null?void 0:J.type)==="mousedown"&&O.current){O.current=!1;return}(J==null?void 0:J.type)==="touchstart"&&(O.current=!0);const $=fe?null:q.current,ue=$?$.getBoundingClientRect():{width:0,height:0,left:0,top:0};let Je,Ke,ke;if(De||J===void 0||J.clientX===0&&J.clientY===0||!J.clientX&&!J.touches)Je=Math.round(ue.width/2),Ke=Math.round(ue.height/2);else{const{clientX:ze,clientY:nt}=J.touches&&J.touches.length>0?J.touches[0]:J;Je=Math.round(ze-ue.left),Ke=Math.round(nt-ue.top)}if(De)ke=Math.sqrt((2*ue.width**2+ue.height**2)/3),ke%2===0&&(ke+=1);else{const ze=Math.max(Math.abs(($?$.clientWidth:0)-Je),Je)*2+2,nt=Math.max(Math.abs(($?$.clientHeight:0)-Ke),Ke)*2+2;ke=Math.sqrt(ze**2+nt**2)}J!=null&&J.touches?F.current===null&&(F.current=()=>{ce({pulsate:se,rippleX:Je,rippleY:Ke,rippleSize:ke,cb:he})},G.current=setTimeout(()=>{F.current&&(F.current(),F.current=null)},dK)):ce({pulsate:se,rippleX:Je,rippleY:Ke,rippleSize:ke,cb:he})},[c,ce]),U=H.useCallback(()=>{B({},{pulsate:!0})},[B]),Z=H.useCallback((J,Y)=>{if(clearTimeout(G.current),(J==null?void 0:J.type)==="touchend"&&F.current){F.current(),F.current=null,G.current=setTimeout(()=>{Z(J,Y)});return}F.current=null,S(he=>he.length>0?he.slice(1):he),P.current=Y},[]);return H.useImperativeHandle(r,()=>({pulsate:U,start:B,stop:Z}),[U,B,Z]),ne(mK,ee({className:hn(ua.root,d.root,y),ref:q},a,{children:ne(nK,{component:null,exit:!0,children:b})}))}),_K=yK;function vK(e){return Zn("MuiButtonBase",e)}const xK=rr("MuiButtonBase",["root","disabled","focusVisible"]),bK=xK,wK=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],SK=e=>{const{disabled:t,focusVisible:r,focusVisibleClassName:i,classes:c}=e,y=Qn({root:["root",t&&"disabled",r&&"focusVisible"]},vK,c);return r&&i&&(y.root+=` ${i}`),y},EK=Yt("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${bK.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),TK=H.forwardRef(function(t,r){const i=Jn({props:t,name:"MuiButtonBase"}),{action:c,centerRipple:d=!1,children:y,className:a,component:b="button",disabled:S=!1,disableRipple:k=!1,disableTouchRipple:P=!1,focusRipple:O=!1,LinkComponent:G="a",onBlur:F,onClick:q,onContextMenu:ce,onDragLeave:B,onFocus:U,onFocusVisible:Z,onKeyDown:J,onKeyUp:Y,onMouseDown:he,onMouseLeave:se,onMouseUp:De,onTouchEnd:fe,onTouchMove:$,onTouchStart:ue,tabIndex:Je=0,TouchRippleProps:Ke,touchRippleRef:ke,type:ze}=i,nt=fn(i,wK),_t=H.useRef(null),Ue=H.useRef(null),Ee=Si(Ue,ke),{isFocusVisibleRef:_e,onFocus:$e,onBlur:be,ref:Me}=qz(),[Ge,ut]=H.useState(!1);S&&Ge&&ut(!1),H.useImperativeHandle(c,()=>({focusVisible:()=>{ut(!0),_t.current.focus()}}),[]);const[ht,Lt]=H.useState(!1);H.useEffect(()=>{Lt(!0)},[]);const zt=ht&&!k&&!S;H.useEffect(()=>{Ge&&O&&!k&&ht&&Ue.current.pulsate()},[k,O,Ge,ht]);function Rt(ln,Ne,Ze=P){return pa(lt=>(Ne&&Ne(lt),!Ze&&Ue.current&&Ue.current[ln](lt),!0))}const St=Rt("start",he),Et=Rt("stop",ce),Ct=Rt("stop",B),Kt=Rt("stop",De),Nt=Rt("stop",ln=>{Ge&&ln.preventDefault(),se&&se(ln)}),pn=Rt("start",ue),Pn=Rt("stop",fe),vn=Rt("stop",$),or=Rt("stop",ln=>{be(ln),_e.current===!1&&ut(!1),F&&F(ln)},!1),Wr=pa(ln=>{_t.current||(_t.current=ln.currentTarget),$e(ln),_e.current===!0&&(ut(!0),Z&&Z(ln)),U&&U(ln)}),Ln=()=>{const ln=_t.current;return b&&b!=="button"&&!(ln.tagName==="A"&&ln.href)},Xn=H.useRef(!1),hr=pa(ln=>{O&&!Xn.current&&Ge&&Ue.current&&ln.key===" "&&(Xn.current=!0,Ue.current.stop(ln,()=>{Ue.current.start(ln)})),ln.target===ln.currentTarget&&Ln()&&ln.key===" "&&ln.preventDefault(),J&&J(ln),ln.target===ln.currentTarget&&Ln()&&ln.key==="Enter"&&!S&&(ln.preventDefault(),q&&q(ln))}),fr=pa(ln=>{O&&ln.key===" "&&Ue.current&&Ge&&!ln.defaultPrevented&&(Xn.current=!1,Ue.current.stop(ln,()=>{Ue.current.pulsate(ln)})),Y&&Y(ln),q&&ln.target===ln.currentTarget&&Ln()&&ln.key===" "&&!ln.defaultPrevented&&q(ln)});let Ut=b;Ut==="button"&&(nt.href||nt.to)&&(Ut=G);const rn={};Ut==="button"?(rn.type=ze===void 0?"button":ze,rn.disabled=S):(!nt.href&&!nt.to&&(rn.role="button"),S&&(rn["aria-disabled"]=S));const En=Si(r,Me,_t),Tn=ee({},i,{centerRipple:d,component:b,disabled:S,disableRipple:k,disableTouchRipple:P,focusRipple:O,tabIndex:Je,focusVisible:Ge}),Cn=SK(Tn);return en(EK,ee({as:Ut,className:hn(Cn.root,a),ownerState:Tn,onBlur:or,onClick:q,onContextMenu:Et,onFocus:Wr,onKeyDown:hr,onKeyUp:fr,onMouseDown:St,onMouseLeave:Nt,onMouseUp:Kt,onDragLeave:Ct,onTouchEnd:Pn,onTouchMove:vn,onTouchStart:pn,ref:En,tabIndex:S?-1:Je,type:ze},rn,nt,{children:[y,zt?ne(_K,ee({ref:Ee,center:d},Ke)):null]}))}),Yh=TK;function CK(e){return Zn("MuiIconButton",e)}const MK=rr("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),AK=MK,kK=["edge","children","className","color","disabled","disableFocusRipple","size"],RK=e=>{const{classes:t,disabled:r,color:i,edge:c,size:d}=e,y={root:["root",r&&"disabled",i!=="default"&&`color${Bt(i)}`,c&&`edge${Bt(c)}`,`size${Bt(d)}`]};return Qn(y,CK,t)},IK=Yt(Yh,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="default"&&t[`color${Bt(r.color)}`],r.edge&&t[`edge${Bt(r.edge)}`],t[`size${Bt(r.size)}`]]}})(({theme:e,ownerState:t})=>ee({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Kr(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12}),({theme:e,ownerState:t})=>{var r;const i=(r=(e.vars||e).palette)==null?void 0:r[t.color];return ee({},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&t.color!=="default"&&ee({color:i==null?void 0:i.main},!t.disableRipple&&{"&:hover":ee({},i&&{backgroundColor:e.vars?`rgba(${i.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Kr(i.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),t.size==="small"&&{padding:5,fontSize:e.typography.pxToRem(18)},t.size==="large"&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${AK.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),PK=H.forwardRef(function(t,r){const i=Jn({props:t,name:"MuiIconButton"}),{edge:c=!1,children:d,className:y,color:a="default",disabled:b=!1,disableFocusRipple:S=!1,size:k="medium"}=i,P=fn(i,kK),O=ee({},i,{edge:c,color:a,disabled:b,disableFocusRipple:S,size:k}),G=RK(O);return ne(IK,ee({className:hn(G.root,y),centerRipple:!0,focusRipple:!S,disabled:b,ref:r,ownerState:O},P,{children:d}))}),ag=PK;function LK(e){return Zn("MuiTypography",e)}rr("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const DK=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],zK=e=>{const{align:t,gutterBottom:r,noWrap:i,paragraph:c,variant:d,classes:y}=e,a={root:["root",d,e.align!=="inherit"&&`align${Bt(t)}`,r&&"gutterBottom",i&&"noWrap",c&&"paragraph"]};return Qn(a,LK,y)},OK=Yt("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.variant&&t[r.variant],r.align!=="inherit"&&t[`align${Bt(r.align)}`],r.noWrap&&t.noWrap,r.gutterBottom&&t.gutterBottom,r.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>ee({margin:0},t.variant&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),CR={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},FK={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},BK=e=>FK[e]||e,NK=H.forwardRef(function(t,r){const i=Jn({props:t,name:"MuiTypography"}),c=BK(i.color),d=kg(ee({},i,{color:c})),{align:y="inherit",className:a,component:b,gutterBottom:S=!1,noWrap:k=!1,paragraph:P=!1,variant:O="body1",variantMapping:G=CR}=d,F=fn(d,DK),q=ee({},d,{align:y,color:c,className:a,component:b,gutterBottom:S,noWrap:k,paragraph:P,variant:O,variantMapping:G}),ce=b||(P?"p":G[O]||CR[O])||"span",B=zK(q);return ne(OK,ee({as:ce,ref:r,ownerState:q,className:hn(B.root,a)},F))}),Nr=NK;function $K(e){return Zn("MuiAppBar",e)}rr("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent"]);const UK=["className","color","enableColorOnDark","position"],VK=e=>{const{color:t,position:r,classes:i}=e,c={root:["root",`color${Bt(t)}`,`position${Bt(r)}`]};return Qn(c,$K,i)},Z0=(e,t)=>e?`${e==null?void 0:e.replace(")","")}, ${t})`:t,jK=Yt(Dg,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`position${Bt(r.position)}`],t[`color${Bt(r.color)}`]]}})(({theme:e,ownerState:t})=>{const r=e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[900];return ee({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},t.position==="fixed"&&{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},t.position==="absolute"&&{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},t.position==="sticky"&&{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},t.position==="static"&&{position:"static"},t.position==="relative"&&{position:"relative"},!e.vars&&ee({},t.color==="default"&&{backgroundColor:r,color:e.palette.getContrastText(r)},t.color&&t.color!=="default"&&t.color!=="inherit"&&t.color!=="transparent"&&{backgroundColor:e.palette[t.color].main,color:e.palette[t.color].contrastText},t.color==="inherit"&&{color:"inherit"},e.palette.mode==="dark"&&!t.enableColorOnDark&&{backgroundColor:null,color:null},t.color==="transparent"&&ee({backgroundColor:"transparent",color:"inherit"},e.palette.mode==="dark"&&{backgroundImage:"none"})),e.vars&&ee({},t.color==="default"&&{"--AppBar-background":t.enableColorOnDark?e.vars.palette.AppBar.defaultBg:Z0(e.vars.palette.AppBar.darkBg,e.vars.palette.AppBar.defaultBg),"--AppBar-color":t.enableColorOnDark?e.vars.palette.text.primary:Z0(e.vars.palette.AppBar.darkColor,e.vars.palette.text.primary)},t.color&&!t.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":t.enableColorOnDark?e.vars.palette[t.color].main:Z0(e.vars.palette.AppBar.darkBg,e.vars.palette[t.color].main),"--AppBar-color":t.enableColorOnDark?e.vars.palette[t.color].contrastText:Z0(e.vars.palette.AppBar.darkColor,e.vars.palette[t.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:t.color==="inherit"?"inherit":"var(--AppBar-color)"},t.color==="transparent"&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),GK=H.forwardRef(function(t,r){const i=Jn({props:t,name:"MuiAppBar"}),{className:c,color:d="primary",enableColorOnDark:y=!1,position:a="fixed"}=i,b=fn(i,UK),S=ee({},i,{color:d,position:a,enableColorOnDark:y}),k=VK(S);return ne(jK,ee({square:!0,component:"header",ownerState:S,elevation:4,className:hn(k.root,c,a==="fixed"&&"mui-fixed"),ref:r},b))}),rT=GK,WK=Lg(ne("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function qK(e){return Zn("MuiChip",e)}const HK=rr("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),Er=HK,ZK=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],XK=e=>{const{classes:t,disabled:r,size:i,color:c,iconColor:d,onDelete:y,clickable:a,variant:b}=e,S={root:["root",b,r&&"disabled",`size${Bt(i)}`,`color${Bt(c)}`,a&&"clickable",a&&`clickableColor${Bt(c)}`,y&&"deletable",y&&`deletableColor${Bt(c)}`,`${b}${Bt(c)}`],label:["label",`label${Bt(i)}`],avatar:["avatar",`avatar${Bt(i)}`,`avatarColor${Bt(c)}`],icon:["icon",`icon${Bt(i)}`,`iconColor${Bt(d)}`],deleteIcon:["deleteIcon",`deleteIcon${Bt(i)}`,`deleteIconColor${Bt(c)}`,`deleteIcon${Bt(b)}Color${Bt(c)}`]};return Qn(S,qK,t)},KK=Yt("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e,{color:i,iconColor:c,clickable:d,onDelete:y,size:a,variant:b}=r;return[{[`& .${Er.avatar}`]:t.avatar},{[`& .${Er.avatar}`]:t[`avatar${Bt(a)}`]},{[`& .${Er.avatar}`]:t[`avatarColor${Bt(i)}`]},{[`& .${Er.icon}`]:t.icon},{[`& .${Er.icon}`]:t[`icon${Bt(a)}`]},{[`& .${Er.icon}`]:t[`iconColor${Bt(c)}`]},{[`& .${Er.deleteIcon}`]:t.deleteIcon},{[`& .${Er.deleteIcon}`]:t[`deleteIcon${Bt(a)}`]},{[`& .${Er.deleteIcon}`]:t[`deleteIconColor${Bt(i)}`]},{[`& .${Er.deleteIcon}`]:t[`deleteIcon${Bt(b)}Color${Bt(i)}`]},t.root,t[`size${Bt(a)}`],t[`color${Bt(i)}`],d&&t.clickable,d&&i!=="default"&&t[`clickableColor${Bt(i)})`],y&&t.deletable,y&&i!=="default"&&t[`deletableColor${Bt(i)}`],t[b],t[`${b}${Bt(i)}`]]}})(({theme:e,ownerState:t})=>{const r=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return ee({maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${Er.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${Er.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:r,fontSize:e.typography.pxToRem(12)},[`& .${Er.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${Er.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${Er.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${Er.icon}`]:ee({marginLeft:5,marginRight:-6},t.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},t.iconColor===t.color&&ee({color:e.vars?e.vars.palette.Chip.defaultIconColor:r},t.color!=="default"&&{color:"inherit"})),[`& .${Er.deleteIcon}`]:ee({WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:Kr(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:Kr(e.palette.text.primary,.4)}},t.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},t.color!=="default"&&{color:e.vars?`rgba(${e.vars.palette[t.color].contrastTextChannel} / 0.7)`:Kr(e.palette[t.color].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].contrastText}})},t.size==="small"&&{height:24},t.color!=="default"&&{backgroundColor:(e.vars||e).palette[t.color].main,color:(e.vars||e).palette[t.color].contrastText},t.onDelete&&{[`&.${Er.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Kr(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},t.onDelete&&t.color!=="default"&&{[`&.${Er.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}})},({theme:e,ownerState:t})=>ee({},t.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Kr(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${Er.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Kr(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}},t.clickable&&t.color!=="default"&&{[`&:hover, &.${Er.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}}),({theme:e,ownerState:t})=>ee({},t.variant==="outlined"&&{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${Er.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${Er.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${Er.avatar}`]:{marginLeft:4},[`& .${Er.avatarSmall}`]:{marginLeft:2},[`& .${Er.icon}`]:{marginLeft:4},[`& .${Er.iconSmall}`]:{marginLeft:2},[`& .${Er.deleteIcon}`]:{marginRight:5},[`& .${Er.deleteIconSmall}`]:{marginRight:3}},t.variant==="outlined"&&t.color!=="default"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:Kr(e.palette[t.color].main,.7)}`,[`&.${Er.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Kr(e.palette[t.color].main,e.palette.action.hoverOpacity)},[`&.${Er.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.focusOpacity})`:Kr(e.palette[t.color].main,e.palette.action.focusOpacity)},[`& .${Er.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:Kr(e.palette[t.color].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].main}}})),YK=Yt("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:r}=e,{size:i}=r;return[t.label,t[`label${Bt(i)}`]]}})(({ownerState:e})=>ee({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},e.size==="small"&&{paddingLeft:8,paddingRight:8}));function MR(e){return e.key==="Backspace"||e.key==="Delete"}const QK=H.forwardRef(function(t,r){const i=Jn({props:t,name:"MuiChip"}),{avatar:c,className:d,clickable:y,color:a="default",component:b,deleteIcon:S,disabled:k=!1,icon:P,label:O,onClick:G,onDelete:F,onKeyDown:q,onKeyUp:ce,size:B="medium",variant:U="filled",tabIndex:Z,skipFocusWhenDisabled:J=!1}=i,Y=fn(i,ZK),he=H.useRef(null),se=Si(he,r),De=Ee=>{Ee.stopPropagation(),F&&F(Ee)},fe=Ee=>{Ee.currentTarget===Ee.target&&MR(Ee)&&Ee.preventDefault(),q&&q(Ee)},$=Ee=>{Ee.currentTarget===Ee.target&&(F&&MR(Ee)?F(Ee):Ee.key==="Escape"&&he.current&&he.current.blur()),ce&&ce(Ee)},ue=y!==!1&&G?!0:y,Je=ue||F?Yh:b||"div",Ke=ee({},i,{component:Je,disabled:k,size:B,color:a,iconColor:H.isValidElement(P)&&P.props.color||a,onDelete:!!F,clickable:ue,variant:U}),ke=XK(Ke),ze=Je===Yh?ee({component:b||"div",focusVisibleClassName:ke.focusVisible},F&&{disableRipple:!0}):{};let nt=null;F&&(nt=S&&H.isValidElement(S)?H.cloneElement(S,{className:hn(S.props.className,ke.deleteIcon),onClick:De}):ne(WK,{className:hn(ke.deleteIcon),onClick:De}));let _t=null;c&&H.isValidElement(c)&&(_t=H.cloneElement(c,{className:hn(ke.avatar,c.props.className)}));let Ue=null;return P&&H.isValidElement(P)&&(Ue=H.cloneElement(P,{className:hn(ke.icon,P.props.className)})),en(KK,ee({as:Je,className:hn(ke.root,d),disabled:ue&&k?!0:void 0,onClick:G,onKeyDown:fe,onKeyUp:$,ref:se,tabIndex:J&&k?-1:Z,ownerState:Ke},ze,Y,{children:[_t||Ue,ne(YK,{className:hn(ke.label),ownerState:Ke,children:O}),nt]}))}),JK=QK;function Tc({props:e,states:t,muiFormControl:r}){return t.reduce((i,c)=>(i[c]=e[c],r&&typeof e[c]>"u"&&(i[c]=r[c]),i),{})}const eY=H.createContext(void 0),iT=eY;function ll(){return H.useContext(iT)}function oT(e){return ne(TH,ee({},e,{defaultTheme:N1,themeId:Vu}))}function AR(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function ov(e,t=!1){return e&&(AR(e.value)&&e.value!==""||t&&AR(e.defaultValue)&&e.defaultValue!=="")}function tY(e){return e.startAdornment}function nY(e){return Zn("MuiInputBase",e)}const rY=rr("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Qh=rY,iY=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],G1=(e,t)=>{const{ownerState:r}=e;return[t.root,r.formControl&&t.formControl,r.startAdornment&&t.adornedStart,r.endAdornment&&t.adornedEnd,r.error&&t.error,r.size==="small"&&t.sizeSmall,r.multiline&&t.multiline,r.color&&t[`color${Bt(r.color)}`],r.fullWidth&&t.fullWidth,r.hiddenLabel&&t.hiddenLabel]},W1=(e,t)=>{const{ownerState:r}=e;return[t.input,r.size==="small"&&t.inputSizeSmall,r.multiline&&t.inputMultiline,r.type==="search"&&t.inputTypeSearch,r.startAdornment&&t.inputAdornedStart,r.endAdornment&&t.inputAdornedEnd,r.hiddenLabel&&t.inputHiddenLabel]},oY=e=>{const{classes:t,color:r,disabled:i,error:c,endAdornment:d,focused:y,formControl:a,fullWidth:b,hiddenLabel:S,multiline:k,readOnly:P,size:O,startAdornment:G,type:F}=e,q={root:["root",`color${Bt(r)}`,i&&"disabled",c&&"error",b&&"fullWidth",y&&"focused",a&&"formControl",O==="small"&&"sizeSmall",k&&"multiline",G&&"adornedStart",d&&"adornedEnd",S&&"hiddenLabel",P&&"readOnly"],input:["input",i&&"disabled",F==="search"&&"inputTypeSearch",k&&"inputMultiline",O==="small"&&"inputSizeSmall",S&&"inputHiddenLabel",G&&"inputAdornedStart",d&&"inputAdornedEnd",P&&"readOnly"]};return Qn(q,nY,t)},q1=Yt("div",{name:"MuiInputBase",slot:"Root",overridesResolver:G1})(({theme:e,ownerState:t})=>ee({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Qh.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},t.multiline&&ee({padding:"4px 0 5px"},t.size==="small"&&{paddingTop:1}),t.fullWidth&&{width:"100%"})),H1=Yt("input",{name:"MuiInputBase",slot:"Input",overridesResolver:W1})(({theme:e,ownerState:t})=>{const r=e.palette.mode==="light",i=ee({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),c={opacity:"0 !important"},d=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5};return ee({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Qh.formControl} &`]:{"&::-webkit-input-placeholder":c,"&::-moz-placeholder":c,"&:-ms-input-placeholder":c,"&::-ms-input-placeholder":c,"&:focus::-webkit-input-placeholder":d,"&:focus::-moz-placeholder":d,"&:focus:-ms-input-placeholder":d,"&:focus::-ms-input-placeholder":d},[`&.${Qh.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},t.size==="small"&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},t.type==="search"&&{MozAppearance:"textfield"})}),aY=ne(oT,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),sY=H.forwardRef(function(t,r){var i;const c=Jn({props:t,name:"MuiInputBase"}),{"aria-describedby":d,autoComplete:y,autoFocus:a,className:b,components:S={},componentsProps:k={},defaultValue:P,disabled:O,disableInjectingGlobalStyles:G,endAdornment:F,fullWidth:q=!1,id:ce,inputComponent:B="input",inputProps:U={},inputRef:Z,maxRows:J,minRows:Y,multiline:he=!1,name:se,onBlur:De,onChange:fe,onClick:$,onFocus:ue,onKeyDown:Je,onKeyUp:Ke,placeholder:ke,readOnly:ze,renderSuffix:nt,rows:_t,slotProps:Ue={},slots:Ee={},startAdornment:_e,type:$e="text",value:be}=c,Me=fn(c,iY),Ge=U.value!=null?U.value:be,{current:ut}=H.useRef(Ge!=null),ht=H.useRef(),Lt=H.useCallback(Cn=>{},[]),zt=Si(ht,Z,U.ref,Lt),[Rt,St]=H.useState(!1),Et=ll(),Ct=Tc({props:c,muiFormControl:Et,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Ct.focused=Et?Et.focused:Rt,H.useEffect(()=>{!Et&&O&&Rt&&(St(!1),De&&De())},[Et,O,Rt,De]);const Kt=Et&&Et.onFilled,Nt=Et&&Et.onEmpty,pn=H.useCallback(Cn=>{ov(Cn)?Kt&&Kt():Nt&&Nt()},[Kt,Nt]);Js(()=>{ut&&pn({value:Ge})},[Ge,pn,ut]);const Pn=Cn=>{if(Ct.disabled){Cn.stopPropagation();return}ue&&ue(Cn),U.onFocus&&U.onFocus(Cn),Et&&Et.onFocus?Et.onFocus(Cn):St(!0)},vn=Cn=>{De&&De(Cn),U.onBlur&&U.onBlur(Cn),Et&&Et.onBlur?Et.onBlur(Cn):St(!1)},or=(Cn,...ln)=>{if(!ut){const Ne=Cn.target||ht.current;if(Ne==null)throw new Error(pc(1));pn({value:Ne.value})}U.onChange&&U.onChange(Cn,...ln),fe&&fe(Cn,...ln)};H.useEffect(()=>{pn(ht.current)},[]);const Wr=Cn=>{ht.current&&Cn.currentTarget===Cn.target&&ht.current.focus(),$&&!Ct.disabled&&$(Cn)};let Ln=B,Xn=U;he&&Ln==="input"&&(_t?Xn=ee({type:void 0,minRows:_t,maxRows:_t},Xn):Xn=ee({type:void 0,maxRows:J,minRows:Y},Xn),Ln=GX);const hr=Cn=>{pn(Cn.animationName==="mui-auto-fill-cancel"?ht.current:{value:"x"})};H.useEffect(()=>{Et&&Et.setAdornedStart(!!_e)},[Et,_e]);const fr=ee({},c,{color:Ct.color||"primary",disabled:Ct.disabled,endAdornment:F,error:Ct.error,focused:Ct.focused,formControl:Et,fullWidth:q,hiddenLabel:Ct.hiddenLabel,multiline:he,size:Ct.size,startAdornment:_e,type:$e}),Ut=oY(fr),rn=Ee.root||S.Root||q1,En=Ue.root||k.root||{},Tn=Ee.input||S.Input||H1;return Xn=ee({},Xn,(i=Ue.input)!=null?i:k.input),en(H.Fragment,{children:[!G&&aY,en(rn,ee({},En,!uc(rn)&&{ownerState:ee({},fr,En.ownerState)},{ref:r,onClick:Wr},Me,{className:hn(Ut.root,En.className,b,ze&&"MuiInputBase-readOnly"),children:[_e,ne(iT.Provider,{value:null,children:ne(Tn,ee({ownerState:fr,"aria-invalid":Ct.error,"aria-describedby":d,autoComplete:y,autoFocus:a,defaultValue:P,disabled:Ct.disabled,id:ce,onAnimationStart:hr,name:se,placeholder:ke,readOnly:ze,required:Ct.required,rows:_t,value:Ge,onKeyDown:Je,onKeyUp:Ke,type:$e},Xn,!uc(Tn)&&{as:Ln,ownerState:ee({},fr,Xn.ownerState)},{ref:zt,className:hn(Ut.input,Xn.className,ze&&"MuiInputBase-readOnly"),onBlur:vn,onChange:or,onFocus:Pn}))}),F,nt?nt(ee({},Ct,{startAdornment:_e})):null]}))]})}),aT=sY;function lY(e){return Zn("MuiInput",e)}const cY=ee({},Qh,rr("MuiInput",["root","underline","input"])),em=cY;function uY(e){return Zn("MuiOutlinedInput",e)}const dY=ee({},Qh,rr("MuiOutlinedInput",["root","notchedOutline","input"])),jl=dY;function hY(e){return Zn("MuiFilledInput",e)}const fY=ee({},Qh,rr("MuiFilledInput",["root","underline","input"])),gu=fY,pY=Lg(ne("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),mY=Lg(ne("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function gY(e){return Zn("MuiAvatar",e)}rr("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const yY=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],_Y=e=>{const{classes:t,variant:r,colorDefault:i}=e;return Qn({root:["root",r,i&&"colorDefault"],img:["img"],fallback:["fallback"]},gY,t)},vY=Yt("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],r.colorDefault&&t.colorDefault]}})(({theme:e,ownerState:t})=>ee({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},t.variant==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius},t.variant==="square"&&{borderRadius:0},t.colorDefault&&ee({color:(e.vars||e).palette.background.default},e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[600]}))),xY=Yt("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),bY=Yt(mY,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function wY({crossOrigin:e,referrerPolicy:t,src:r,srcSet:i}){const[c,d]=H.useState(!1);return H.useEffect(()=>{if(!r&&!i)return;d(!1);let y=!0;const a=new Image;return a.onload=()=>{y&&d("loaded")},a.onerror=()=>{y&&d("error")},a.crossOrigin=e,a.referrerPolicy=t,a.src=r,i&&(a.srcset=i),()=>{y=!1}},[e,t,r,i]),c}const SY=H.forwardRef(function(t,r){const i=Jn({props:t,name:"MuiAvatar"}),{alt:c,children:d,className:y,component:a="div",imgProps:b,sizes:S,src:k,srcSet:P,variant:O="circular"}=i,G=fn(i,yY);let F=null;const q=wY(ee({},b,{src:k,srcSet:P})),ce=k||P,B=ce&&q!=="error",U=ee({},i,{colorDefault:!B,component:a,variant:O}),Z=_Y(U);return B?F=ne(xY,ee({alt:c,src:k,srcSet:P,sizes:S,ownerState:U,className:Z.img},b)):d!=null?F=d:ce&&c?F=c[0]:F=ne(bY,{ownerState:U,className:Z.fallback}),ne(vY,ee({as:a,ownerState:U,className:hn(Z.root,y),ref:r},G,{children:F}))}),EY=SY,TY=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],CY={entering:{opacity:1},entered:{opacity:1}},MY=H.forwardRef(function(t,r){const i=Hi(),c={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:d,appear:y=!0,children:a,easing:b,in:S,onEnter:k,onEntered:P,onEntering:O,onExit:G,onExited:F,onExiting:q,style:ce,timeout:B=c,TransitionComponent:U=U1}=t,Z=fn(t,TY),J=H.useRef(null),Y=Si(J,a.ref,r),he=ke=>ze=>{if(ke){const nt=J.current;ze===void 0?ke(nt):ke(nt,ze)}},se=he(O),De=he((ke,ze)=>{V1(ke);const nt=tl({style:ce,timeout:B,easing:b},{mode:"enter"});ke.style.webkitTransition=i.transitions.create("opacity",nt),ke.style.transition=i.transitions.create("opacity",nt),k&&k(ke,ze)}),fe=he(P),$=he(q),ue=he(ke=>{const ze=tl({style:ce,timeout:B,easing:b},{mode:"exit"});ke.style.webkitTransition=i.transitions.create("opacity",ze),ke.style.transition=i.transitions.create("opacity",ze),G&&G(ke)}),Je=he(F);return ne(U,ee({appear:y,in:S,nodeRef:J,onEnter:De,onEntered:fe,onEntering:se,onExit:ue,onExited:Je,onExiting:$,addEndListener:ke=>{d&&d(J.current,ke)},timeout:B},Z,{children:(ke,ze)=>H.cloneElement(a,ee({style:ee({opacity:0,visibility:ke==="exited"&&!S?"hidden":void 0},CY[ke],ce,a.props.style),ref:Y},ze))}))}),AY=MY;function kY(e){return Zn("MuiBackdrop",e)}rr("MuiBackdrop",["root","invisible"]);const RY=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],IY=e=>{const{classes:t,invisible:r}=e;return Qn({root:["root",r&&"invisible"]},kY,t)},PY=Yt("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.invisible&&t.invisible]}})(({ownerState:e})=>ee({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})),LY=H.forwardRef(function(t,r){var i,c,d;const y=Jn({props:t,name:"MuiBackdrop"}),{children:a,className:b,component:S="div",components:k={},componentsProps:P={},invisible:O=!1,open:G,slotProps:F={},slots:q={},TransitionComponent:ce=AY,transitionDuration:B}=y,U=fn(y,RY),Z=ee({},y,{component:S,invisible:O}),J=IY(Z),Y=(i=F.root)!=null?i:P.root;return ne(ce,ee({in:G,timeout:B},U,{children:ne(PY,ee({"aria-hidden":!0},Y,{as:(c=(d=q.root)!=null?d:k.Root)!=null?c:S,className:hn(J.root,b,Y==null?void 0:Y.className),ownerState:ee({},Z,Y==null?void 0:Y.ownerState),classes:J,ref:r,children:a}))}))}),DY=LY,zY=al(),OY=kH({themeId:Vu,defaultTheme:zY,defaultClassName:"MuiBox-root",generateClassName:Zz.generate}),Rn=OY;function FY(e){return Zn("MuiButton",e)}const BY=rr("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),X0=BY,NY=H.createContext({}),$Y=NY,UY=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],VY=e=>{const{color:t,disableElevation:r,fullWidth:i,size:c,variant:d,classes:y}=e,a={root:["root",d,`${d}${Bt(t)}`,`size${Bt(c)}`,`${d}Size${Bt(c)}`,t==="inherit"&&"colorInherit",r&&"disableElevation",i&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${Bt(c)}`],endIcon:["endIcon",`iconSize${Bt(c)}`]},b=Qn(a,FY,y);return ee({},y,b)},AO=e=>ee({},e.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},e.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},e.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),jY=Yt(Yh,{shouldForwardProp:e=>va(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`${r.variant}${Bt(r.color)}`],t[`size${Bt(r.size)}`],t[`${r.variant}Size${Bt(r.size)}`],r.color==="inherit"&&t.colorInherit,r.disableElevation&&t.disableElevation,r.fullWidth&&t.fullWidth]}})(({theme:e,ownerState:t})=>{var r,i;const c=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],d=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return ee({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":ee({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:Kr(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="text"&&t.color!=="inherit"&&{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Kr(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="outlined"&&t.color!=="inherit"&&{border:`1px solid ${(e.vars||e).palette[t.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Kr(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="contained"&&{backgroundColor:e.vars?e.vars.palette.Button.inheritContainedHoverBg:d,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},t.variant==="contained"&&t.color!=="inherit"&&{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}),"&:active":ee({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${X0.focusVisible}`]:ee({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${X0.disabled}`]:ee({color:(e.vars||e).palette.action.disabled},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},t.variant==="contained"&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},t.variant==="text"&&{padding:"6px 8px"},t.variant==="text"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main},t.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},t.variant==="outlined"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${Kr(e.palette[t.color].main,.5)}`},t.variant==="contained"&&{color:e.vars?e.vars.palette.text.primary:(r=(i=e.palette).getContrastText)==null?void 0:r.call(i,e.palette.grey[300]),backgroundColor:e.vars?e.vars.palette.Button.inheritContainedBg:c,boxShadow:(e.vars||e).shadows[2]},t.variant==="contained"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main},t.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},t.size==="small"&&t.variant==="text"&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="text"&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="outlined"&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="outlined"&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="contained"&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="contained"&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})},({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${X0.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${X0.disabled}`]:{boxShadow:"none"}}),GY=Yt("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.startIcon,t[`iconSize${Bt(r.size)}`]]}})(({ownerState:e})=>ee({display:"inherit",marginRight:8,marginLeft:-4},e.size==="small"&&{marginLeft:-2},AO(e))),WY=Yt("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.endIcon,t[`iconSize${Bt(r.size)}`]]}})(({ownerState:e})=>ee({display:"inherit",marginRight:-4,marginLeft:8},e.size==="small"&&{marginRight:-2},AO(e))),qY=H.forwardRef(function(t,r){const i=H.useContext($Y),c=OE(i,t),d=Jn({props:c,name:"MuiButton"}),{children:y,color:a="primary",component:b="button",className:S,disabled:k=!1,disableElevation:P=!1,disableFocusRipple:O=!1,endIcon:G,focusVisibleClassName:F,fullWidth:q=!1,size:ce="medium",startIcon:B,type:U,variant:Z="text"}=d,J=fn(d,UY),Y=ee({},d,{color:a,component:b,disabled:k,disableElevation:P,disableFocusRipple:O,fullWidth:q,size:ce,type:U,variant:Z}),he=VY(Y),se=B&&ne(GY,{className:he.startIcon,ownerState:Y,children:B}),De=G&&ne(WY,{className:he.endIcon,ownerState:Y,children:G});return en(jY,ee({ownerState:Y,className:hn(i.className,he.root,S),component:b,disabled:k,focusRipple:!O,focusVisibleClassName:hn(he.focusVisible,F),ref:r,type:U},J,{classes:he,children:[se,y,De]}))}),nl=qY;function HY(e){return Zn("PrivateSwitchBase",e)}rr("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const ZY=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],XY=e=>{const{classes:t,checked:r,disabled:i,edge:c}=e,d={root:["root",r&&"checked",i&&"disabled",c&&`edge${Bt(c)}`],input:["input"]};return Qn(d,HY,t)},KY=Yt(Yh)(({ownerState:e})=>ee({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),YY=Yt("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),QY=H.forwardRef(function(t,r){const{autoFocus:i,checked:c,checkedIcon:d,className:y,defaultChecked:a,disabled:b,disableFocusRipple:S=!1,edge:k=!1,icon:P,id:O,inputProps:G,inputRef:F,name:q,onBlur:ce,onChange:B,onFocus:U,readOnly:Z,required:J=!1,tabIndex:Y,type:he,value:se}=t,De=fn(t,ZY),[fe,$]=ng({controlled:c,default:!!a,name:"SwitchBase",state:"checked"}),ue=ll(),Je=Ee=>{U&&U(Ee),ue&&ue.onFocus&&ue.onFocus(Ee)},Ke=Ee=>{ce&&ce(Ee),ue&&ue.onBlur&&ue.onBlur(Ee)},ke=Ee=>{if(Ee.nativeEvent.defaultPrevented)return;const _e=Ee.target.checked;$(_e),B&&B(Ee,_e)};let ze=b;ue&&typeof ze>"u"&&(ze=ue.disabled);const nt=he==="checkbox"||he==="radio",_t=ee({},t,{checked:fe,disabled:ze,disableFocusRipple:S,edge:k}),Ue=XY(_t);return en(KY,ee({component:"span",className:hn(Ue.root,y),centerRipple:!0,focusRipple:!S,disabled:ze,tabIndex:null,role:void 0,onFocus:Je,onBlur:Ke,ownerState:_t,ref:r},De,{children:[ne(YY,ee({autoFocus:i,checked:c,defaultChecked:a,className:Ue.input,disabled:ze,id:nt?O:void 0,name:q,onChange:ke,readOnly:Z,ref:F,required:J,ownerState:_t,tabIndex:Y,type:he},he==="checkbox"&&se===void 0?{}:{value:se},G)),fe?d:P]}))}),JY=QY,eQ=eZ({createStyledComponent:Yt("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`maxWidth${Bt(String(r.maxWidth))}`],r.fixed&&t.fixed,r.disableGutters&&t.disableGutters]}}),useThemeProps:e=>Jn({props:e,name:"MuiContainer"})}),tQ=eQ,nQ=(e,t)=>ee({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},t&&!e.vars&&{colorScheme:e.palette.mode}),rQ=e=>ee({color:(e.vars||e).palette.text.primary},e.typography.body1,{backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),iQ=(e,t=!1)=>{var r,i;const c={};t&&e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([a,b])=>{var S;c[e.getColorSchemeSelector(a).replace(/\s*&/,"")]={colorScheme:(S=b.palette)==null?void 0:S.mode}});let d=ee({html:nQ(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:ee({margin:0},rQ(e),{"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}})},c);const y=(r=e.components)==null||(i=r.MuiCssBaseline)==null?void 0:i.styleOverrides;return y&&(d=[d,y]),d};function kO(e){const t=Jn({props:e,name:"MuiCssBaseline"}),{children:r,enableColorScheme:i=!1}=t;return en(H.Fragment,{children:[ne(oT,{styles:c=>iQ(c,i)}),r]})}const oQ=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","open","slotProps","slots","theme"],aQ=Yt("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.open&&r.exited&&t.hidden]}})(({theme:e,ownerState:t})=>ee({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"})),sQ=Yt(DY,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),lQ=H.forwardRef(function(t,r){var i,c,d,y,a,b;const S=Jn({name:"MuiModal",props:t}),{BackdropComponent:k=sQ,BackdropProps:P,classes:O,className:G,closeAfterTransition:F=!1,children:q,container:ce,component:B,components:U={},componentsProps:Z={},disableAutoFocus:J=!1,disableEnforceFocus:Y=!1,disableEscapeKeyDown:he=!1,disablePortal:se=!1,disableRestoreFocus:De=!1,disableScrollLock:fe=!1,hideBackdrop:$=!1,keepMounted:ue=!1,onBackdropClick:Je,onClose:Ke,open:ke,slotProps:ze,slots:nt,theme:_t}=S,Ue=fn(S,oQ),[Ee,_e]=H.useState(!0),$e={container:ce,closeAfterTransition:F,disableAutoFocus:J,disableEnforceFocus:Y,disableEscapeKeyDown:he,disablePortal:se,disableRestoreFocus:De,disableScrollLock:fe,hideBackdrop:$,keepMounted:ue,onBackdropClick:Je,onClose:Ke,open:ke},be=ee({},S,$e,{exited:Ee}),Me=(i=(c=nt==null?void 0:nt.root)!=null?c:U.Root)!=null?i:aQ,Ge=(d=(y=nt==null?void 0:nt.backdrop)!=null?y:U.Backdrop)!=null?d:k,ut=(a=ze==null?void 0:ze.root)!=null?a:Z.root,ht=(b=ze==null?void 0:ze.backdrop)!=null?b:Z.backdrop;return ne(PX,ee({slots:{root:Me,backdrop:Ge},slotProps:{root:()=>ee({},W2(ut,be),!uc(Me)&&{as:B,theme:_t},{className:hn(G,ut==null?void 0:ut.className,O==null?void 0:O.root,!be.open&&be.exited&&(O==null?void 0:O.hidden))}),backdrop:()=>ee({},P,W2(ht,be),{className:hn(ht==null?void 0:ht.className,O==null?void 0:O.backdrop)})},onTransitionEnter:()=>_e(!1),onTransitionExited:()=>_e(!0),ref:r},Ue,$e,{children:q}))}),RO=lQ,cQ=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function uQ(e,t,r){const i=t.getBoundingClientRect(),c=r&&r.getBoundingClientRect(),d=Xo(t);let y;if(t.fakeTransform)y=t.fakeTransform;else{const S=d.getComputedStyle(t);y=S.getPropertyValue("-webkit-transform")||S.getPropertyValue("transform")}let a=0,b=0;if(y&&y!=="none"&&typeof y=="string"){const S=y.split("(")[1].split(")")[0].split(",");a=parseInt(S[4],10),b=parseInt(S[5],10)}return e==="left"?c?`translateX(${c.right+a-i.left}px)`:`translateX(${d.innerWidth+a-i.left}px)`:e==="right"?c?`translateX(-${i.right-c.left-a}px)`:`translateX(-${i.left+i.width-a}px)`:e==="up"?c?`translateY(${c.bottom+b-i.top}px)`:`translateY(${d.innerHeight+b-i.top}px)`:c?`translateY(-${i.top-c.top+i.height-b}px)`:`translateY(-${i.top+i.height-b}px)`}function dQ(e){return typeof e=="function"?e():e}function K0(e,t,r){const i=dQ(r),c=uQ(e,t,i);c&&(t.style.webkitTransform=c,t.style.transform=c)}const hQ=H.forwardRef(function(t,r){const i=Hi(),c={enter:i.transitions.easing.easeOut,exit:i.transitions.easing.sharp},d={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:y,appear:a=!0,children:b,container:S,direction:k="down",easing:P=c,in:O,onEnter:G,onEntered:F,onEntering:q,onExit:ce,onExited:B,onExiting:U,style:Z,timeout:J=d,TransitionComponent:Y=U1}=t,he=fn(t,cQ),se=H.useRef(null),De=Si(b.ref,se,r),fe=Ue=>Ee=>{Ue&&(Ee===void 0?Ue(se.current):Ue(se.current,Ee))},$=fe((Ue,Ee)=>{K0(k,Ue,S),V1(Ue),G&&G(Ue,Ee)}),ue=fe((Ue,Ee)=>{const _e=tl({timeout:J,style:Z,easing:P},{mode:"enter"});Ue.style.webkitTransition=i.transitions.create("-webkit-transform",ee({},_e)),Ue.style.transition=i.transitions.create("transform",ee({},_e)),Ue.style.webkitTransform="none",Ue.style.transform="none",q&&q(Ue,Ee)}),Je=fe(F),Ke=fe(U),ke=fe(Ue=>{const Ee=tl({timeout:J,style:Z,easing:P},{mode:"exit"});Ue.style.webkitTransition=i.transitions.create("-webkit-transform",Ee),Ue.style.transition=i.transitions.create("transform",Ee),K0(k,Ue,S),ce&&ce(Ue)}),ze=fe(Ue=>{Ue.style.webkitTransition="",Ue.style.transition="",B&&B(Ue)}),nt=Ue=>{y&&y(se.current,Ue)},_t=H.useCallback(()=>{se.current&&K0(k,se.current,S)},[k,S]);return H.useEffect(()=>{if(O||k==="down"||k==="right")return;const Ue=zE(()=>{se.current&&K0(k,se.current,S)}),Ee=Xo(se.current);return Ee.addEventListener("resize",Ue),()=>{Ue.clear(),Ee.removeEventListener("resize",Ue)}},[k,O,S]),H.useEffect(()=>{O||_t()},[O,_t]),ne(Y,ee({nodeRef:se,onEnter:$,onEntered:Je,onEntering:ue,onExit:ke,onExited:ze,onExiting:Ke,addEndListener:nt,appear:a,in:O,timeout:J},he,{children:(Ue,Ee)=>H.cloneElement(b,ee({ref:De,style:ee({visibility:Ue==="exited"&&!O?"hidden":void 0},Z,b.props.style)},Ee))}))}),fQ=hQ;function pQ(e){return Zn("MuiDrawer",e)}rr("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const mQ=["BackdropProps"],gQ=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],IO=(e,t)=>{const{ownerState:r}=e;return[t.root,(r.variant==="permanent"||r.variant==="persistent")&&t.docked,t.modal]},yQ=e=>{const{classes:t,anchor:r,variant:i}=e,c={root:["root"],docked:[(i==="permanent"||i==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${Bt(r)}`,i!=="temporary"&&`paperAnchorDocked${Bt(r)}`]};return Qn(c,pQ,t)},_Q=Yt(RO,{name:"MuiDrawer",slot:"Root",overridesResolver:IO})(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer})),kR=Yt("div",{shouldForwardProp:va,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:IO})({flex:"0 0 auto"}),vQ=Yt(Dg,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.paper,t[`paperAnchor${Bt(r.anchor)}`],r.variant!=="temporary"&&t[`paperAnchorDocked${Bt(r.anchor)}`]]}})(({theme:e,ownerState:t})=>ee({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},t.anchor==="left"&&{left:0},t.anchor==="top"&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},t.anchor==="right"&&{right:0},t.anchor==="bottom"&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},t.anchor==="left"&&t.variant!=="temporary"&&{borderRight:`1px solid ${(e.vars||e).palette.divider}`},t.anchor==="top"&&t.variant!=="temporary"&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`},t.anchor==="right"&&t.variant!=="temporary"&&{borderLeft:`1px solid ${(e.vars||e).palette.divider}`},t.anchor==="bottom"&&t.variant!=="temporary"&&{borderTop:`1px solid ${(e.vars||e).palette.divider}`})),PO={left:"right",right:"left",top:"down",bottom:"up"};function Eu(e){return["left","right"].indexOf(e)!==-1}function gm(e,t){return e.direction==="rtl"&&Eu(t)?PO[t]:t}const xQ=H.forwardRef(function(t,r){const i=Jn({props:t,name:"MuiDrawer"}),c=Hi(),d={enter:c.transitions.duration.enteringScreen,exit:c.transitions.duration.leavingScreen},{anchor:y="left",BackdropProps:a,children:b,className:S,elevation:k=16,hideBackdrop:P=!1,ModalProps:{BackdropProps:O}={},onClose:G,open:F=!1,PaperProps:q={},SlideProps:ce,TransitionComponent:B=fQ,transitionDuration:U=d,variant:Z="temporary"}=i,J=fn(i.ModalProps,mQ),Y=fn(i,gQ),he=H.useRef(!1);H.useEffect(()=>{he.current=!0},[]);const se=gm(c,y),fe=ee({},i,{anchor:y,elevation:k,open:F,variant:Z},Y),$=yQ(fe),ue=ne(vQ,ee({elevation:Z==="temporary"?k:0,square:!0},q,{className:hn($.paper,q.className),ownerState:fe,children:b}));if(Z==="permanent")return ne(kR,ee({className:hn($.root,$.docked,S),ownerState:fe,ref:r},Y,{children:ue}));const Je=ne(B,ee({in:F,direction:PO[se],timeout:U,appear:he.current},ce,{children:ue}));return Z==="persistent"?ne(kR,ee({className:hn($.root,$.docked,S),ownerState:fe,ref:r},Y,{children:Je})):ne(_Q,ee({BackdropProps:ee({},a,O,{transitionDuration:U}),className:hn($.root,$.modal,S),open:F,ownerState:fe,onClose:G,hideBackdrop:P,ref:r},Y,J,{children:Je}))}),bQ=xQ;function wQ(e){return Zn("MuiFab",e)}const SQ=rr("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),RR=SQ,EQ=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],TQ=e=>{const{color:t,variant:r,classes:i,size:c}=e,d={root:["root",r,`size${Bt(c)}`,t==="inherit"?"colorInherit":t]},y=Qn(d,wQ,i);return ee({},i,y)},CQ=Yt(Yh,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>va(e)||e==="classes",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`size${Bt(r.size)}`],r.color==="inherit"&&t.colorInherit,t[Bt(r.size)],t[r.color]]}})(({theme:e,ownerState:t})=>{var r,i;return ee({},e.typography.button,{minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.text.primary:(r=(i=e.palette).getContrastText)==null?void 0:r.call(i,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${RR.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]}},t.size==="small"&&{width:40,height:40},t.size==="medium"&&{width:48,height:48},t.variant==="extended"&&{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},t.variant==="extended"&&t.size==="small"&&{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34},t.variant==="extended"&&t.size==="medium"&&{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40},t.color==="inherit"&&{color:"inherit"})},({theme:e,ownerState:t})=>ee({},t.color!=="inherit"&&t.color!=="default"&&(e.vars||e).palette[t.color]!=null&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}}),({theme:e})=>({[`&.${RR.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}})),MQ=H.forwardRef(function(t,r){const i=Jn({props:t,name:"MuiFab"}),{children:c,className:d,color:y="default",component:a="button",disabled:b=!1,disableFocusRipple:S=!1,focusVisibleClassName:k,size:P="large",variant:O="circular"}=i,G=fn(i,EQ),F=ee({},i,{color:y,component:a,disabled:b,disableFocusRipple:S,size:P,variant:O}),q=TQ(F);return ne(CQ,ee({className:hn(q.root,d),component:a,disabled:b,focusRipple:!S,focusVisibleClassName:hn(q.focusVisible,k),ownerState:F,ref:r},G,{classes:q,children:c}))}),AQ=MQ,kQ=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],RQ=e=>{const{classes:t,disableUnderline:r}=e,c=Qn({root:["root",!r&&"underline"],input:["input"]},hY,t);return ee({},t,c)},IQ=Yt(q1,{shouldForwardProp:e=>va(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[...G1(e,t),!r.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{var r;const i=e.palette.mode==="light",c=i?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",d=i?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",y=i?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=i?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return ee({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:d,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:y,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:d}},[`&.${gu.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:d},[`&.${gu.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:a}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(r=(e.vars||e).palette[t.color||"primary"])==null?void 0:r.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${gu.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${gu.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:c}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${gu.disabled}, .${gu.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${gu.disabled}:before`]:{borderBottomStyle:"dotted"}},t.startAdornment&&{paddingLeft:12},t.endAdornment&&{paddingRight:12},t.multiline&&ee({padding:"25px 12px 8px"},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17}))}),PQ=Yt(H1,{name:"MuiFilledInput",slot:"Input",overridesResolver:W1})(({theme:e,ownerState:t})=>ee({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9})),LO=H.forwardRef(function(t,r){var i,c,d,y;const a=Jn({props:t,name:"MuiFilledInput"}),{components:b={},componentsProps:S,fullWidth:k=!1,inputComponent:P="input",multiline:O=!1,slotProps:G,slots:F={},type:q="text"}=a,ce=fn(a,kQ),B=ee({},a,{fullWidth:k,inputComponent:P,multiline:O,type:q}),U=RQ(a),Z={root:{ownerState:B},input:{ownerState:B}},J=G??S?Fo(G??S,Z):Z,Y=(i=(c=F.root)!=null?c:b.Root)!=null?i:IQ,he=(d=(y=F.input)!=null?y:b.Input)!=null?d:PQ;return ne(aT,ee({slots:{root:Y,input:he},componentsProps:J,fullWidth:k,inputComponent:P,multiline:O,ref:r,type:q},ce,{classes:U}))});LO.muiName="Input";const DO=LO;function LQ(e){return Zn("MuiFormControl",e)}rr("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const DQ=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],zQ=e=>{const{classes:t,margin:r,fullWidth:i}=e,c={root:["root",r!=="none"&&`margin${Bt(r)}`,i&&"fullWidth"]};return Qn(c,LQ,t)},OQ=Yt("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>ee({},t.root,t[`margin${Bt(e.margin)}`],e.fullWidth&&t.fullWidth)})(({ownerState:e})=>ee({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},e.margin==="normal"&&{marginTop:16,marginBottom:8},e.margin==="dense"&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})),FQ=H.forwardRef(function(t,r){const i=Jn({props:t,name:"MuiFormControl"}),{children:c,className:d,color:y="primary",component:a="div",disabled:b=!1,error:S=!1,focused:k,fullWidth:P=!1,hiddenLabel:O=!1,margin:G="none",required:F=!1,size:q="medium",variant:ce="outlined"}=i,B=fn(i,DQ),U=ee({},i,{color:y,component:a,disabled:b,error:S,fullWidth:P,hiddenLabel:O,margin:G,required:F,size:q,variant:ce}),Z=zQ(U),[J,Y]=H.useState(()=>{let Ke=!1;return c&&H.Children.forEach(c,ke=>{if(!__(ke,["Input","Select"]))return;const ze=__(ke,["Select"])?ke.props.input:ke;ze&&tY(ze.props)&&(Ke=!0)}),Ke}),[he,se]=H.useState(()=>{let Ke=!1;return c&&H.Children.forEach(c,ke=>{__(ke,["Input","Select"])&&(ov(ke.props,!0)||ov(ke.props.inputProps,!0))&&(Ke=!0)}),Ke}),[De,fe]=H.useState(!1);b&&De&&fe(!1);const $=k!==void 0&&!b?k:De;let ue;const Je=H.useMemo(()=>({adornedStart:J,setAdornedStart:Y,color:y,disabled:b,error:S,filled:he,focused:$,fullWidth:P,hiddenLabel:O,size:q,onBlur:()=>{fe(!1)},onEmpty:()=>{se(!1)},onFilled:()=>{se(!0)},onFocus:()=>{fe(!0)},registerEffect:ue,required:F,variant:ce}),[J,y,b,S,he,$,P,O,ue,F,q,ce]);return ne(iT.Provider,{value:Je,children:ne(OQ,ee({as:a,ownerState:U,className:hn(Z.root,d),ref:r},B,{children:c}))})}),BQ=FQ;function NQ(e){return Zn("MuiFormControlLabel",e)}const $Q=rr("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),ym=$Q,UQ=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],VQ=e=>{const{classes:t,disabled:r,labelPlacement:i,error:c,required:d}=e,y={root:["root",r&&"disabled",`labelPlacement${Bt(i)}`,c&&"error",d&&"required"],label:["label",r&&"disabled"],asterisk:["asterisk",c&&"error"]};return Qn(y,NQ,t)},jQ=Yt("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${ym.label}`]:t.label},t.root,t[`labelPlacement${Bt(r.labelPlacement)}`]]}})(({theme:e,ownerState:t})=>ee({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${ym.disabled}`]:{cursor:"default"}},t.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},t.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},t.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${ym.label}`]:{[`&.${ym.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),GQ=Yt("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${ym.error}`]:{color:(e.vars||e).palette.error.main}})),WQ=H.forwardRef(function(t,r){var i,c;const d=Jn({props:t,name:"MuiFormControlLabel"}),{className:y,componentsProps:a={},control:b,disabled:S,disableTypography:k,label:P,labelPlacement:O="end",required:G,slotProps:F={}}=d,q=fn(d,UQ),ce=ll(),B=(i=S??b.props.disabled)!=null?i:ce==null?void 0:ce.disabled,U=G??b.props.required,Z={disabled:B,required:U};["checked","name","onChange","value","inputRef"].forEach(fe=>{typeof b.props[fe]>"u"&&typeof d[fe]<"u"&&(Z[fe]=d[fe])});const J=Tc({props:d,muiFormControl:ce,states:["error"]}),Y=ee({},d,{disabled:B,labelPlacement:O,required:U,error:J.error}),he=VQ(Y),se=(c=F.typography)!=null?c:a.typography;let De=P;return De!=null&&De.type!==Nr&&!k&&(De=ne(Nr,ee({component:"span"},se,{className:hn(he.label,se==null?void 0:se.className),children:De}))),en(jQ,ee({className:hn(he.root,y),ownerState:Y,ref:r},q,{children:[H.cloneElement(b,Z),De,U&&en(GQ,{ownerState:Y,"aria-hidden":!0,className:he.asterisk,children:["","*"]})]}))}),nw=WQ;function qQ(e){return Zn("MuiFormGroup",e)}rr("MuiFormGroup",["root","row","error"]);const HQ=["className","row"],ZQ=e=>{const{classes:t,row:r,error:i}=e;return Qn({root:["root",r&&"row",i&&"error"]},qQ,t)},XQ=Yt("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.row&&t.row]}})(({ownerState:e})=>ee({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),KQ=H.forwardRef(function(t,r){const i=Jn({props:t,name:"MuiFormGroup"}),{className:c,row:d=!1}=i,y=fn(i,HQ),a=ll(),b=Tc({props:i,muiFormControl:a,states:["error"]}),S=ee({},i,{row:d,error:b.error}),k=ZQ(S);return ne(XQ,ee({className:hn(k.root,c),ownerState:S,ref:r},y))}),YQ=KQ;function QQ(e){return Zn("MuiFormHelperText",e)}const JQ=rr("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),IR=JQ;var PR;const eJ=["children","className","component","disabled","error","filled","focused","margin","required","variant"],tJ=e=>{const{classes:t,contained:r,size:i,disabled:c,error:d,filled:y,focused:a,required:b}=e,S={root:["root",c&&"disabled",d&&"error",i&&`size${Bt(i)}`,r&&"contained",a&&"focused",y&&"filled",b&&"required"]};return Qn(S,QQ,t)},nJ=Yt("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.size&&t[`size${Bt(r.size)}`],r.contained&&t.contained,r.filled&&t.filled]}})(({theme:e,ownerState:t})=>ee({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${IR.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${IR.error}`]:{color:(e.vars||e).palette.error.main}},t.size==="small"&&{marginTop:4},t.contained&&{marginLeft:14,marginRight:14})),rJ=H.forwardRef(function(t,r){const i=Jn({props:t,name:"MuiFormHelperText"}),{children:c,className:d,component:y="p"}=i,a=fn(i,eJ),b=ll(),S=Tc({props:i,muiFormControl:b,states:["variant","size","disabled","error","filled","focused","required"]}),k=ee({},i,{component:y,contained:S.variant==="filled"||S.variant==="outlined",variant:S.variant,size:S.size,disabled:S.disabled,error:S.error,filled:S.filled,focused:S.focused,required:S.required}),P=tJ(k);return ne(nJ,ee({as:y,ownerState:k,className:hn(P.root,d),ref:r},a,{children:c===" "?PR||(PR=ne("span",{className:"notranslate",children:""})):c}))}),iJ=rJ;function oJ(e){return Zn("MuiFormLabel",e)}const aJ=rr("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Dm=aJ,sJ=["children","className","color","component","disabled","error","filled","focused","required"],lJ=e=>{const{classes:t,color:r,focused:i,disabled:c,error:d,filled:y,required:a}=e,b={root:["root",`color${Bt(r)}`,c&&"disabled",d&&"error",y&&"filled",i&&"focused",a&&"required"],asterisk:["asterisk",d&&"error"]};return Qn(b,oJ,t)},cJ=Yt("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>ee({},t.root,e.color==="secondary"&&t.colorSecondary,e.filled&&t.filled)})(({theme:e,ownerState:t})=>ee({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${Dm.focused}`]:{color:(e.vars||e).palette[t.color].main},[`&.${Dm.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${Dm.error}`]:{color:(e.vars||e).palette.error.main}})),uJ=Yt("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${Dm.error}`]:{color:(e.vars||e).palette.error.main}})),dJ=H.forwardRef(function(t,r){const i=Jn({props:t,name:"MuiFormLabel"}),{children:c,className:d,component:y="label"}=i,a=fn(i,sJ),b=ll(),S=Tc({props:i,muiFormControl:b,states:["color","required","focused","disabled","error","filled"]}),k=ee({},i,{color:S.color||"primary",component:y,disabled:S.disabled,error:S.error,filled:S.filled,focused:S.focused,required:S.required}),P=lJ(k);return en(cJ,ee({as:y,ownerState:k,className:hn(P.root,d),ref:r},a,{children:[c,S.required&&en(uJ,{ownerState:k,"aria-hidden":!0,className:P.asterisk,children:["","*"]})]}))}),hJ=dJ,fJ=H.createContext(),LR=fJ;function pJ(e){return Zn("MuiGrid",e)}const mJ=[0,1,2,3,4,5,6,7,8,9,10],gJ=["column-reverse","column","row-reverse","row"],yJ=["nowrap","wrap-reverse","wrap"],tm=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],_J=rr("MuiGrid",["root","container","item","zeroMinWidth",...mJ.map(e=>`spacing-xs-${e}`),...gJ.map(e=>`direction-xs-${e}`),...yJ.map(e=>`wrap-xs-${e}`),...tm.map(e=>`grid-xs-${e}`),...tm.map(e=>`grid-sm-${e}`),...tm.map(e=>`grid-md-${e}`),...tm.map(e=>`grid-lg-${e}`),...tm.map(e=>`grid-xl-${e}`)]),sg=_J,vJ=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function Dh(e){const t=parseFloat(e);return`${t}${String(e).replace(String(t),"")||"px"}`}function xJ({theme:e,ownerState:t}){let r;return e.breakpoints.keys.reduce((i,c)=>{let d={};if(t[c]&&(r=t[c]),!r)return i;if(r===!0)d={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(r==="auto")d={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const y=Lu({values:t.columns,breakpoints:e.breakpoints.values}),a=typeof y=="object"?y[c]:y;if(a==null)return i;const b=`${Math.round(r/a*1e8)/1e6}%`;let S={};if(t.container&&t.item&&t.columnSpacing!==0){const k=e.spacing(t.columnSpacing);if(k!=="0px"){const P=`calc(${b} + ${Dh(k)})`;S={flexBasis:P,maxWidth:P}}}d=ee({flexBasis:b,flexGrow:0,maxWidth:b},S)}return e.breakpoints.values[c]===0?Object.assign(i,d):i[e.breakpoints.up(c)]=d,i},{})}function bJ({theme:e,ownerState:t}){const r=Lu({values:t.direction,breakpoints:e.breakpoints.values});return No({theme:e},r,i=>{const c={flexDirection:i};return i.indexOf("column")===0&&(c[`& > .${sg.item}`]={maxWidth:"none"}),c})}function zO({breakpoints:e,values:t}){let r="";Object.keys(t).forEach(c=>{r===""&&t[c]!==0&&(r=c)});const i=Object.keys(e).sort((c,d)=>e[c]-e[d]);return i.slice(0,i.indexOf(r))}function wJ({theme:e,ownerState:t}){const{container:r,rowSpacing:i}=t;let c={};if(r&&i!==0){const d=Lu({values:i,breakpoints:e.breakpoints.values});let y;typeof d=="object"&&(y=zO({breakpoints:e.breakpoints.values,values:d})),c=No({theme:e},d,(a,b)=>{var S;const k=e.spacing(a);return k!=="0px"?{marginTop:`-${Dh(k)}`,[`& > .${sg.item}`]:{paddingTop:Dh(k)}}:(S=y)!=null&&S.includes(b)?{}:{marginTop:0,[`& > .${sg.item}`]:{paddingTop:0}}})}return c}function SJ({theme:e,ownerState:t}){const{container:r,columnSpacing:i}=t;let c={};if(r&&i!==0){const d=Lu({values:i,breakpoints:e.breakpoints.values});let y;typeof d=="object"&&(y=zO({breakpoints:e.breakpoints.values,values:d})),c=No({theme:e},d,(a,b)=>{var S;const k=e.spacing(a);return k!=="0px"?{width:`calc(100% + ${Dh(k)})`,marginLeft:`-${Dh(k)}`,[`& > .${sg.item}`]:{paddingLeft:Dh(k)}}:(S=y)!=null&&S.includes(b)?{}:{width:"100%",marginLeft:0,[`& > .${sg.item}`]:{paddingLeft:0}}})}return c}function EJ(e,t,r={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[r[`spacing-xs-${String(e)}`]];const i=[];return t.forEach(c=>{const d=e[c];Number(d)>0&&i.push(r[`spacing-${c}-${String(d)}`])}),i}const TJ=Yt("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e,{container:i,direction:c,item:d,spacing:y,wrap:a,zeroMinWidth:b,breakpoints:S}=r;let k=[];i&&(k=EJ(y,S,t));const P=[];return S.forEach(O=>{const G=r[O];G&&P.push(t[`grid-${O}-${String(G)}`])}),[t.root,i&&t.container,d&&t.item,b&&t.zeroMinWidth,...k,c!=="row"&&t[`direction-xs-${String(c)}`],a!=="wrap"&&t[`wrap-xs-${String(a)}`],...P]}})(({ownerState:e})=>ee({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},e.wrap!=="wrap"&&{flexWrap:e.wrap}),bJ,wJ,SJ,xJ);function CJ(e,t){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const r=[];return t.forEach(i=>{const c=e[i];if(Number(c)>0){const d=`spacing-${i}-${String(c)}`;r.push(d)}}),r}const MJ=e=>{const{classes:t,container:r,direction:i,item:c,spacing:d,wrap:y,zeroMinWidth:a,breakpoints:b}=e;let S=[];r&&(S=CJ(d,b));const k=[];b.forEach(O=>{const G=e[O];G&&k.push(`grid-${O}-${String(G)}`)});const P={root:["root",r&&"container",c&&"item",a&&"zeroMinWidth",...S,i!=="row"&&`direction-xs-${String(i)}`,y!=="wrap"&&`wrap-xs-${String(y)}`,...k]};return Qn(P,pJ,t)},AJ=H.forwardRef(function(t,r){const i=Jn({props:t,name:"MuiGrid"}),{breakpoints:c}=Hi(),d=kg(i),{className:y,columns:a,columnSpacing:b,component:S="div",container:k=!1,direction:P="row",item:O=!1,rowSpacing:G,spacing:F=0,wrap:q="wrap",zeroMinWidth:ce=!1}=d,B=fn(d,vJ),U=G||F,Z=b||F,J=H.useContext(LR),Y=k?a||12:J,he={},se=ee({},B);c.keys.forEach($=>{B[$]!=null&&(he[$]=B[$],delete se[$])});const De=ee({},d,{columns:Y,container:k,direction:P,item:O,rowSpacing:U,columnSpacing:Z,wrap:q,zeroMinWidth:ce,spacing:F},he,{breakpoints:c.keys}),fe=MJ(De);return ne(LR.Provider,{value:Y,children:ne(TJ,ee({ownerState:De,className:hn(fe.root,y),as:S,ref:r},se))})}),js=AJ,kJ=gZ({createStyledComponent:Yt("div",{name:"MuiGrid2",slot:"Root",overridesResolver:(e,t)=>t.root}),componentName:"MuiGrid2",useThemeProps:e=>Jn({props:e,name:"MuiGrid2"})}),Zl=kJ,RJ=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function X2(e){return`scale(${e}, ${e**2})`}const IJ={entering:{opacity:1,transform:X2(1)},entered:{opacity:1,transform:"none"}},rw=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),OO=H.forwardRef(function(t,r){const{addEndListener:i,appear:c=!0,children:d,easing:y,in:a,onEnter:b,onEntered:S,onEntering:k,onExit:P,onExited:O,onExiting:G,style:F,timeout:q="auto",TransitionComponent:ce=U1}=t,B=fn(t,RJ),U=H.useRef(),Z=H.useRef(),J=Hi(),Y=H.useRef(null),he=Si(Y,d.ref,r),se=ze=>nt=>{if(ze){const _t=Y.current;nt===void 0?ze(_t):ze(_t,nt)}},De=se(k),fe=se((ze,nt)=>{V1(ze);const{duration:_t,delay:Ue,easing:Ee}=tl({style:F,timeout:q,easing:y},{mode:"enter"});let _e;q==="auto"?(_e=J.transitions.getAutoHeightDuration(ze.clientHeight),Z.current=_e):_e=_t,ze.style.transition=[J.transitions.create("opacity",{duration:_e,delay:Ue}),J.transitions.create("transform",{duration:rw?_e:_e*.666,delay:Ue,easing:Ee})].join(","),b&&b(ze,nt)}),$=se(S),ue=se(G),Je=se(ze=>{const{duration:nt,delay:_t,easing:Ue}=tl({style:F,timeout:q,easing:y},{mode:"exit"});let Ee;q==="auto"?(Ee=J.transitions.getAutoHeightDuration(ze.clientHeight),Z.current=Ee):Ee=nt,ze.style.transition=[J.transitions.create("opacity",{duration:Ee,delay:_t}),J.transitions.create("transform",{duration:rw?Ee:Ee*.666,delay:rw?_t:_t||Ee*.333,easing:Ue})].join(","),ze.style.opacity=0,ze.style.transform=X2(.75),P&&P(ze)}),Ke=se(O),ke=ze=>{q==="auto"&&(U.current=setTimeout(ze,Z.current||0)),i&&i(Y.current,ze)};return H.useEffect(()=>()=>{clearTimeout(U.current)},[]),ne(ce,ee({appear:c,in:a,nodeRef:Y,onEnter:fe,onEntered:$,onEntering:De,onExit:Je,onExited:Ke,onExiting:ue,addEndListener:ke,timeout:q==="auto"?null:q},B,{children:(ze,nt)=>H.cloneElement(d,ee({style:ee({opacity:0,transform:X2(.75),visibility:ze==="exited"&&!a?"hidden":void 0},IJ[ze],F,d.props.style),ref:he},nt))}))});OO.muiSupportAuto=!0;const PJ=OO,LJ=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],DJ=e=>{const{classes:t,disableUnderline:r}=e,c=Qn({root:["root",!r&&"underline"],input:["input"]},lY,t);return ee({},t,c)},zJ=Yt(q1,{shouldForwardProp:e=>va(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[...G1(e,t),!r.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{let i=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(i=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),ee({position:"relative"},t.formControl&&{"label + &":{marginTop:16}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(e.vars||e).palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${em.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${em.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${em.disabled}, .${em.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${i}`}},[`&.${em.disabled}:before`]:{borderBottomStyle:"dotted"}})}),OJ=Yt(H1,{name:"MuiInput",slot:"Input",overridesResolver:W1})({}),FO=H.forwardRef(function(t,r){var i,c,d,y;const a=Jn({props:t,name:"MuiInput"}),{disableUnderline:b,components:S={},componentsProps:k,fullWidth:P=!1,inputComponent:O="input",multiline:G=!1,slotProps:F,slots:q={},type:ce="text"}=a,B=fn(a,LJ),U=DJ(a),J={root:{ownerState:{disableUnderline:b}}},Y=F??k?Fo(F??k,J):J,he=(i=(c=q.root)!=null?c:S.Root)!=null?i:zJ,se=(d=(y=q.input)!=null?y:S.Input)!=null?d:OJ;return ne(aT,ee({slots:{root:he,input:se},slotProps:Y,fullWidth:P,inputComponent:O,multiline:G,ref:r,type:ce},B,{classes:U}))});FO.muiName="Input";const BO=FO;function FJ(e){return Zn("MuiInputLabel",e)}rr("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const BJ=["disableAnimation","margin","shrink","variant","className"],NJ=e=>{const{classes:t,formControl:r,size:i,shrink:c,disableAnimation:d,variant:y,required:a}=e,S=Qn({root:["root",r&&"formControl",!d&&"animated",c&&"shrink",i==="small"&&"sizeSmall",y],asterisk:[a&&"asterisk"]},FJ,t);return ee({},t,S)},$J=Yt(hJ,{shouldForwardProp:e=>va(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${Dm.asterisk}`]:t.asterisk},t.root,r.formControl&&t.formControl,r.size==="small"&&t.sizeSmall,r.shrink&&t.shrink,!r.disableAnimation&&t.animated,t[r.variant]]}})(({theme:e,ownerState:t})=>ee({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},t.size==="small"&&{transform:"translate(0, 17px) scale(1)"},t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!t.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},t.variant==="filled"&&ee({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},t.shrink&&ee({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},t.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),t.variant==="outlined"&&ee({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},t.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),UJ=H.forwardRef(function(t,r){const i=Jn({name:"MuiInputLabel",props:t}),{disableAnimation:c=!1,shrink:d,className:y}=i,a=fn(i,BJ),b=ll();let S=d;typeof S>"u"&&b&&(S=b.filled||b.focused||b.adornedStart);const k=Tc({props:i,muiFormControl:b,states:["size","variant","required"]}),P=ee({},i,{disableAnimation:c,formControl:b,shrink:S,size:k.size,variant:k.variant,required:k.required}),O=NJ(P);return ne($J,ee({"data-shrink":S,ownerState:P,ref:r,className:hn(O.root,y)},a,{classes:O}))}),VJ=UJ;function jJ(e){return Zn("MuiLinearProgress",e)}rr("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const GJ=["className","color","value","valueBuffer","variant"];let df=e=>e,DR,zR,OR,FR,BR,NR;const K2=4,WJ=Sc(DR||(DR=df`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),qJ=Sc(zR||(zR=df`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),HJ=Sc(OR||(OR=df`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),ZJ=e=>{const{classes:t,variant:r,color:i}=e,c={root:["root",`color${Bt(i)}`,r],dashed:["dashed",`dashedColor${Bt(i)}`],bar1:["bar",`barColor${Bt(i)}`,(r==="indeterminate"||r==="query")&&"bar1Indeterminate",r==="determinate"&&"bar1Determinate",r==="buffer"&&"bar1Buffer"],bar2:["bar",r!=="buffer"&&`barColor${Bt(i)}`,r==="buffer"&&`color${Bt(i)}`,(r==="indeterminate"||r==="query")&&"bar2Indeterminate",r==="buffer"&&"bar2Buffer"]};return Qn(c,jJ,t)},sT=(e,t)=>t==="inherit"?"currentColor":e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:e.palette.mode==="light"?QE(e.palette[t].main,.62):YE(e.palette[t].main,.5),XJ=Yt("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`color${Bt(r.color)}`],t[r.variant]]}})(({ownerState:e,theme:t})=>ee({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:sT(t,e.color)},e.color==="inherit"&&e.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},e.variant==="buffer"&&{backgroundColor:"transparent"},e.variant==="query"&&{transform:"rotate(180deg)"})),KJ=Yt("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.dashed,t[`dashedColor${Bt(r.color)}`]]}})(({ownerState:e,theme:t})=>{const r=sT(t,e.color);return ee({position:"absolute",marginTop:0,height:"100%",width:"100%"},e.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${r} 0%, ${r} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},Kh(FR||(FR=df`
    animation: ${0} 3s infinite linear;
  `),HJ)),YJ=Yt("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.bar,t[`barColor${Bt(r.color)}`],(r.variant==="indeterminate"||r.variant==="query")&&t.bar1Indeterminate,r.variant==="determinate"&&t.bar1Determinate,r.variant==="buffer"&&t.bar1Buffer]}})(({ownerState:e,theme:t})=>ee({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.variant==="determinate"&&{transition:`transform .${K2}s linear`},e.variant==="buffer"&&{zIndex:1,transition:`transform .${K2}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&Kh(BR||(BR=df`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),WJ)),QJ=Yt("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.bar,t[`barColor${Bt(r.color)}`],(r.variant==="indeterminate"||r.variant==="query")&&t.bar2Indeterminate,r.variant==="buffer"&&t.bar2Buffer]}})(({ownerState:e,theme:t})=>ee({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},e.variant!=="buffer"&&{backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.color==="inherit"&&{opacity:.3},e.variant==="buffer"&&{backgroundColor:sT(t,e.color),transition:`transform .${K2}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&Kh(NR||(NR=df`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),qJ)),JJ=H.forwardRef(function(t,r){const i=Jn({props:t,name:"MuiLinearProgress"}),{className:c,color:d="primary",value:y,valueBuffer:a,variant:b="indeterminate"}=i,S=fn(i,GJ),k=ee({},i,{color:d,variant:b}),P=ZJ(k),O=Hi(),G={},F={bar1:{},bar2:{}};if((b==="determinate"||b==="buffer")&&y!==void 0){G["aria-valuenow"]=Math.round(y),G["aria-valuemin"]=0,G["aria-valuemax"]=100;let q=y-100;O.direction==="rtl"&&(q=-q),F.bar1.transform=`translateX(${q}%)`}if(b==="buffer"&&a!==void 0){let q=(a||0)-100;O.direction==="rtl"&&(q=-q),F.bar2.transform=`translateX(${q}%)`}return en(XJ,ee({className:hn(P.root,c),ownerState:k,role:"progressbar"},G,{ref:r},S,{children:[b==="buffer"?ne(KJ,{className:P.dashed,ownerState:k}):null,ne(YJ,{className:P.bar1,ownerState:k,style:F.bar1}),b==="determinate"?null:ne(QJ,{className:P.bar2,ownerState:k,style:F.bar2})]}))}),eee=JJ,tee=H.createContext({}),nee=tee;function ree(e){return Zn("MuiList",e)}rr("MuiList",["root","padding","dense","subheader"]);const iee=["children","className","component","dense","disablePadding","subheader"],oee=e=>{const{classes:t,disablePadding:r,dense:i,subheader:c}=e;return Qn({root:["root",!r&&"padding",i&&"dense",c&&"subheader"]},ree,t)},aee=Yt("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disablePadding&&t.padding,r.dense&&t.dense,r.subheader&&t.subheader]}})(({ownerState:e})=>ee({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})),see=H.forwardRef(function(t,r){const i=Jn({props:t,name:"MuiList"}),{children:c,className:d,component:y="ul",dense:a=!1,disablePadding:b=!1,subheader:S}=i,k=fn(i,iee),P=H.useMemo(()=>({dense:a}),[a]),O=ee({},i,{component:y,dense:a,disablePadding:b}),G=oee(O);return ne(nee.Provider,{value:P,children:en(aee,ee({as:y,className:hn(G.root,d),ref:r,ownerState:O},k,{children:[S,c]}))})}),lee=see,cee=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function iw(e,t,r){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:r?null:e.firstChild}function $R(e,t,r){return e===t?r?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:r?null:e.lastChild}function NO(e,t){if(t===void 0)return!0;let r=e.innerText;return r===void 0&&(r=e.textContent),r=r.trim().toLowerCase(),r.length===0?!1:t.repeating?r[0]===t.keys[0]:r.indexOf(t.keys.join(""))===0}function nm(e,t,r,i,c,d){let y=!1,a=c(e,t,t?r:!1);for(;a;){if(a===e.firstChild){if(y)return!1;y=!0}const b=i?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!NO(a,d)||b)a=c(e,a,r);else return a.focus(),!0}return!1}const uee=H.forwardRef(function(t,r){const{actions:i,autoFocus:c=!1,autoFocusItem:d=!1,children:y,className:a,disabledItemsFocusable:b=!1,disableListWrap:S=!1,onKeyDown:k,variant:P="selectedMenu"}=t,O=fn(t,cee),G=H.useRef(null),F=H.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Js(()=>{c&&G.current.focus()},[c]),H.useImperativeHandle(i,()=>({adjustStyleForScrollbar:(Z,J)=>{const Y=!G.current.style.width;if(Z.clientHeight<G.current.clientHeight&&Y){const he=`${Hz(wi(Z))}px`;G.current.style[J.direction==="rtl"?"paddingLeft":"paddingRight"]=he,G.current.style.width=`calc(100% + ${he})`}return G.current}}),[]);const q=Z=>{const J=G.current,Y=Z.key,he=wi(J).activeElement;if(Y==="ArrowDown")Z.preventDefault(),nm(J,he,S,b,iw);else if(Y==="ArrowUp")Z.preventDefault(),nm(J,he,S,b,$R);else if(Y==="Home")Z.preventDefault(),nm(J,null,S,b,iw);else if(Y==="End")Z.preventDefault(),nm(J,null,S,b,$R);else if(Y.length===1){const se=F.current,De=Y.toLowerCase(),fe=performance.now();se.keys.length>0&&(fe-se.lastTime>500?(se.keys=[],se.repeating=!0,se.previousKeyMatched=!0):se.repeating&&De!==se.keys[0]&&(se.repeating=!1)),se.lastTime=fe,se.keys.push(De);const $=he&&!se.repeating&&NO(he,se);se.previousKeyMatched&&($||nm(J,he,!1,b,iw,se))?Z.preventDefault():se.previousKeyMatched=!1}k&&k(Z)},ce=Si(G,r);let B=-1;H.Children.forEach(y,(Z,J)=>{H.isValidElement(Z)&&(Z.props.disabled||(P==="selectedMenu"&&Z.props.selected||B===-1)&&(B=J),B===J&&(Z.props.disabled||Z.props.muiSkipListHighlight||Z.type.muiSkipListHighlight)&&(B+=1,B>=y.length&&(B=-1)))});const U=H.Children.map(y,(Z,J)=>{if(J===B){const Y={};return d&&(Y.autoFocus=!0),Z.props.tabIndex===void 0&&P==="selectedMenu"&&(Y.tabIndex=0),H.cloneElement(Z,Y)}return Z});return ne(lee,ee({role:"menu",ref:ce,className:a,onKeyDown:q,tabIndex:c?0:-1},O,{children:U}))}),dee=uee;function hee(e){return Zn("MuiPopover",e)}rr("MuiPopover",["root","paper"]);const fee=["onEntering"],pee=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function UR(e,t){let r=0;return typeof t=="number"?r=t:t==="center"?r=e.height/2:t==="bottom"&&(r=e.height),r}function VR(e,t){let r=0;return typeof t=="number"?r=t:t==="center"?r=e.width/2:t==="right"&&(r=e.width),r}function jR(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function ow(e){return typeof e=="function"?e():e}const mee=e=>{const{classes:t}=e;return Qn({root:["root"],paper:["paper"]},hee,t)},gee=Yt(RO,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),yee=Yt(Dg,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),_ee=H.forwardRef(function(t,r){const i=Jn({props:t,name:"MuiPopover"}),{action:c,anchorEl:d,anchorOrigin:y={vertical:"top",horizontal:"left"},anchorPosition:a,anchorReference:b="anchorEl",children:S,className:k,container:P,elevation:O=8,marginThreshold:G=16,open:F,PaperProps:q={},transformOrigin:ce={vertical:"top",horizontal:"left"},TransitionComponent:B=PJ,transitionDuration:U="auto",TransitionProps:{onEntering:Z}={}}=i,J=fn(i.TransitionProps,fee),Y=fn(i,pee),he=H.useRef(),se=Si(he,q.ref),De=ee({},i,{anchorOrigin:y,anchorReference:b,elevation:O,marginThreshold:G,PaperProps:q,transformOrigin:ce,TransitionComponent:B,transitionDuration:U,TransitionProps:J}),fe=mee(De),$=H.useCallback(()=>{if(b==="anchorPosition")return a;const _e=ow(d),be=(_e&&_e.nodeType===1?_e:wi(he.current).body).getBoundingClientRect();return{top:be.top+UR(be,y.vertical),left:be.left+VR(be,y.horizontal)}},[d,y.horizontal,y.vertical,a,b]),ue=H.useCallback(_e=>({vertical:UR(_e,ce.vertical),horizontal:VR(_e,ce.horizontal)}),[ce.horizontal,ce.vertical]),Je=H.useCallback(_e=>{const $e={width:_e.offsetWidth,height:_e.offsetHeight},be=ue($e);if(b==="none")return{top:null,left:null,transformOrigin:jR(be)};const Me=$();let Ge=Me.top-be.vertical,ut=Me.left-be.horizontal;const ht=Ge+$e.height,Lt=ut+$e.width,zt=Xo(ow(d)),Rt=zt.innerHeight-G,St=zt.innerWidth-G;if(Ge<G){const Et=Ge-G;Ge-=Et,be.vertical+=Et}else if(ht>Rt){const Et=ht-Rt;Ge-=Et,be.vertical+=Et}if(ut<G){const Et=ut-G;ut-=Et,be.horizontal+=Et}else if(Lt>St){const Et=Lt-St;ut-=Et,be.horizontal+=Et}return{top:`${Math.round(Ge)}px`,left:`${Math.round(ut)}px`,transformOrigin:jR(be)}},[d,b,$,ue,G]),[Ke,ke]=H.useState(F),ze=H.useCallback(()=>{const _e=he.current;if(!_e)return;const $e=Je(_e);$e.top!==null&&(_e.style.top=$e.top),$e.left!==null&&(_e.style.left=$e.left),_e.style.transformOrigin=$e.transformOrigin,ke(!0)},[Je]),nt=(_e,$e)=>{Z&&Z(_e,$e),ze()},_t=()=>{ke(!1)};H.useEffect(()=>{F&&ze()}),H.useImperativeHandle(c,()=>F?{updatePosition:()=>{ze()}}:null,[F,ze]),H.useEffect(()=>{if(!F)return;const _e=zE(()=>{ze()}),$e=Xo(d);return $e.addEventListener("resize",_e),()=>{_e.clear(),$e.removeEventListener("resize",_e)}},[d,F,ze]);let Ue=U;U==="auto"&&!B.muiSupportAuto&&(Ue=void 0);const Ee=P||(d?wi(ow(d)).body:void 0);return ne(gee,ee({BackdropProps:{invisible:!0},className:hn(fe.root,k),container:Ee,open:F,ref:r,ownerState:De},Y,{children:ne(B,ee({appear:!0,in:F,onEntering:nt,onExited:_t,timeout:Ue},J,{children:ne(yee,ee({elevation:O},q,{ref:se,className:hn(fe.paper,q.className)},Ke?void 0:{style:ee({},q.style,{opacity:0})},{ownerState:De,children:S}))}))}))}),vee=_ee;function xee(e){return Zn("MuiMenu",e)}rr("MuiMenu",["root","paper","list"]);const bee=["onEntering"],wee=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],See={vertical:"top",horizontal:"right"},Eee={vertical:"top",horizontal:"left"},Tee=e=>{const{classes:t}=e;return Qn({root:["root"],paper:["paper"],list:["list"]},xee,t)},Cee=Yt(vee,{shouldForwardProp:e=>va(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Mee=Yt(Dg,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Aee=Yt(dee,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),kee=H.forwardRef(function(t,r){const i=Jn({props:t,name:"MuiMenu"}),{autoFocus:c=!0,children:d,disableAutoFocusItem:y=!1,MenuListProps:a={},onClose:b,open:S,PaperProps:k={},PopoverClasses:P,transitionDuration:O="auto",TransitionProps:{onEntering:G}={},variant:F="selectedMenu"}=i,q=fn(i.TransitionProps,bee),ce=fn(i,wee),B=Hi(),U=B.direction==="rtl",Z=ee({},i,{autoFocus:c,disableAutoFocusItem:y,MenuListProps:a,onEntering:G,PaperProps:k,transitionDuration:O,TransitionProps:q,variant:F}),J=Tee(Z),Y=c&&!y&&S,he=H.useRef(null),se=($,ue)=>{he.current&&he.current.adjustStyleForScrollbar($,B),G&&G($,ue)},De=$=>{$.key==="Tab"&&($.preventDefault(),b&&b($,"tabKeyDown"))};let fe=-1;return H.Children.map(d,($,ue)=>{H.isValidElement($)&&($.props.disabled||(F==="selectedMenu"&&$.props.selected||fe===-1)&&(fe=ue))}),ne(Cee,ee({onClose:b,anchorOrigin:{vertical:"bottom",horizontal:U?"right":"left"},transformOrigin:U?See:Eee,PaperProps:ee({as:Mee},k,{classes:ee({},k.classes,{root:J.paper})}),className:J.root,open:S,ref:r,transitionDuration:O,TransitionProps:ee({onEntering:se},q),ownerState:Z},ce,{classes:P,children:ne(Aee,ee({onKeyDown:De,actions:he,autoFocus:c&&(fe===-1||y),autoFocusItem:Y,variant:F},a,{className:hn(J.list,a.className),children:d}))}))}),Ree=kee;function Iee(e){return Zn("MuiMobileStepper",e)}rr("MuiMobileStepper",["root","positionBottom","positionTop","positionStatic","dots","dot","dotActive","progress"]);const Pee=["activeStep","backButton","className","LinearProgressProps","nextButton","position","steps","variant"],Lee=e=>{const{classes:t,position:r}=e,i={root:["root",`position${Bt(r)}`],dots:["dots"],dot:["dot"],dotActive:["dotActive"],progress:["progress"]};return Qn(i,Iee,t)},Dee=Yt(Dg,{name:"MuiMobileStepper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`position${Bt(r.position)}`]]}})(({theme:e,ownerState:t})=>ee({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",background:(e.vars||e).palette.background.default,padding:8},t.position==="bottom"&&{position:"fixed",bottom:0,left:0,right:0,zIndex:(e.vars||e).zIndex.mobileStepper},t.position==="top"&&{position:"fixed",top:0,left:0,right:0,zIndex:(e.vars||e).zIndex.mobileStepper})),zee=Yt("div",{name:"MuiMobileStepper",slot:"Dots",overridesResolver:(e,t)=>t.dots})(({ownerState:e})=>ee({},e.variant==="dots"&&{display:"flex",flexDirection:"row"})),Oee=Yt("div",{name:"MuiMobileStepper",slot:"Dot",shouldForwardProp:e=>$1(e)&&e!=="dotActive",overridesResolver:(e,t)=>{const{dotActive:r}=e;return[t.dot,r&&t.dotActive]}})(({theme:e,ownerState:t,dotActive:r})=>ee({},t.variant==="dots"&&ee({transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),backgroundColor:(e.vars||e).palette.action.disabled,borderRadius:"50%",width:8,height:8,margin:"0 2px"},r&&{backgroundColor:(e.vars||e).palette.primary.main}))),Fee=Yt(eee,{name:"MuiMobileStepper",slot:"Progress",overridesResolver:(e,t)=>t.progress})(({ownerState:e})=>ee({},e.variant==="progress"&&{width:"50%"})),Bee=H.forwardRef(function(t,r){const i=Jn({props:t,name:"MuiMobileStepper"}),{activeStep:c=0,backButton:d,className:y,LinearProgressProps:a,nextButton:b,position:S="bottom",steps:k,variant:P="dots"}=i,O=fn(i,Pee),G=ee({},i,{activeStep:c,position:S,variant:P}),F=Lee(G);return en(Dee,ee({square:!0,elevation:0,className:hn(F.root,y),ref:r,ownerState:G},O,{children:[d,P==="text"&&en(H.Fragment,{children:[c+1," / ",k]}),P==="dots"&&ne(zee,{ownerState:G,className:F.dots,children:[...new Array(k)].map((q,ce)=>ne(Oee,{className:hn(F.dot,ce===c&&F.dotActive),ownerState:G,dotActive:ce===c},ce))}),P==="progress"&&ne(Fee,ee({ownerState:G,className:F.progress,variant:"determinate",value:Math.ceil(c/(k-1)*100)},a)),b]}))}),Nee=Bee;function $ee(e){return Zn("MuiNativeSelect",e)}const Uee=rr("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),lT=Uee,Vee=["className","disabled","error","IconComponent","inputRef","variant"],jee=e=>{const{classes:t,variant:r,disabled:i,multiple:c,open:d,error:y}=e,a={select:["select",r,i&&"disabled",c&&"multiple",y&&"error"],icon:["icon",`icon${Bt(r)}`,d&&"iconOpen",i&&"disabled"]};return Qn(a,$ee,t)},$O=({ownerState:e,theme:t})=>ee({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":ee({},t.vars?{backgroundColor:`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:t.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${lT.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},e.variant==="filled"&&{"&&&":{paddingRight:32}},e.variant==="outlined"&&{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}),Gee=Yt("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:va,overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.select,t[r.variant],r.error&&t.error,{[`&.${lT.multiple}`]:t.multiple}]}})($O),UO=({ownerState:e,theme:t})=>ee({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${lT.disabled}`]:{color:(t.vars||t).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},e.variant==="filled"&&{right:7},e.variant==="outlined"&&{right:7}),Wee=Yt("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,r.variant&&t[`icon${Bt(r.variant)}`],r.open&&t.iconOpen]}})(UO),qee=H.forwardRef(function(t,r){const{className:i,disabled:c,error:d,IconComponent:y,inputRef:a,variant:b="standard"}=t,S=fn(t,Vee),k=ee({},t,{disabled:c,variant:b,error:d}),P=jee(k);return en(H.Fragment,{children:[ne(Gee,ee({ownerState:k,className:hn(P.select,i),disabled:c,ref:a||r},S)),t.multiple?null:ne(Wee,{as:y,ownerState:k,className:P.icon})]})}),Hee=qee;var GR;const Zee=["children","classes","className","label","notched"],Xee=Yt("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Kee=Yt("legend")(({ownerState:e,theme:t})=>ee({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},e.withLabel&&ee({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})})));function Yee(e){const{className:t,label:r,notched:i}=e,c=fn(e,Zee),d=r!=null&&r!=="",y=ee({},e,{notched:i,withLabel:d});return ne(Xee,ee({"aria-hidden":!0,className:t,ownerState:y},c,{children:ne(Kee,{ownerState:y,children:d?ne("span",{children:r}):GR||(GR=ne("span",{className:"notranslate",children:""}))})}))}const Qee=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],Jee=e=>{const{classes:t}=e,i=Qn({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},uY,t);return ee({},t,i)},ete=Yt(q1,{shouldForwardProp:e=>va(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:G1})(({theme:e,ownerState:t})=>{const r=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return ee({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${jl.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${jl.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:r}},[`&.${jl.focused} .${jl.notchedOutline}`]:{borderColor:(e.vars||e).palette[t.color].main,borderWidth:2},[`&.${jl.error} .${jl.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${jl.disabled} .${jl.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}},t.startAdornment&&{paddingLeft:14},t.endAdornment&&{paddingRight:14},t.multiline&&ee({padding:"16.5px 14px"},t.size==="small"&&{padding:"8.5px 14px"}))}),tte=Yt(Yee,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}}),nte=Yt(H1,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:W1})(({theme:e,ownerState:t})=>ee({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{padding:"8.5px 14px"},t.multiline&&{padding:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0})),VO=H.forwardRef(function(t,r){var i,c,d,y,a;const b=Jn({props:t,name:"MuiOutlinedInput"}),{components:S={},fullWidth:k=!1,inputComponent:P="input",label:O,multiline:G=!1,notched:F,slots:q={},type:ce="text"}=b,B=fn(b,Qee),U=Jee(b),Z=ll(),J=Tc({props:b,muiFormControl:Z,states:["required"]}),Y=ee({},b,{color:J.color||"primary",disabled:J.disabled,error:J.error,focused:J.focused,formControl:Z,fullWidth:k,hiddenLabel:J.hiddenLabel,multiline:G,size:J.size,type:ce}),he=(i=(c=q.root)!=null?c:S.Root)!=null?i:ete,se=(d=(y=q.input)!=null?y:S.Input)!=null?d:nte;return ne(aT,ee({slots:{root:he,input:se},renderSuffix:De=>ne(tte,{ownerState:Y,className:U.notchedOutline,label:O!=null&&O!==""&&J.required?a||(a=en(H.Fragment,{children:[O,"","*"]})):O,notched:typeof F<"u"?F:!!(De.startAdornment||De.filled||De.focused)}),fullWidth:k,inputComponent:P,multiline:G,ref:r,type:ce},B,{classes:ee({},U,{notchedOutline:null})}))});VO.muiName="Input";const jO=VO,rte=Lg(ne("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),ite=Lg(ne("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),ote=Yt("span")({position:"relative",display:"flex"}),ate=Yt(rte)({transform:"scale(1)"}),ste=Yt(ite)(({theme:e,ownerState:t})=>ee({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest})},t.checked&&{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}));function GO(e){const{checked:t=!1,classes:r={},fontSize:i}=e,c=ee({},e,{checked:t});return en(ote,{className:r.root,ownerState:c,children:[ne(ate,{fontSize:i,className:r.background,ownerState:c}),ne(ste,{fontSize:i,className:r.dot,ownerState:c})]})}const lte=H.createContext(void 0),WO=lte;function cte(){return H.useContext(WO)}function ute(e){return Zn("MuiRadio",e)}const dte=rr("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary"]),WR=dte,hte=["checked","checkedIcon","color","icon","name","onChange","size","className"],fte=e=>{const{classes:t,color:r}=e,i={root:["root",`color${Bt(r)}`]};return ee({},t,Qn(i,ute,t))},pte=Yt(JY,{shouldForwardProp:e=>va(e)||e==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`color${Bt(r.color)}`]]}})(({theme:e,ownerState:t})=>ee({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${t.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Kr(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${WR.checked}`]:{color:(e.vars||e).palette[t.color].main}},{[`&.${WR.disabled}`]:{color:(e.vars||e).palette.action.disabled}}));function mte(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}const qR=ne(GO,{checked:!0}),HR=ne(GO,{}),gte=H.forwardRef(function(t,r){var i,c;const d=Jn({props:t,name:"MuiRadio"}),{checked:y,checkedIcon:a=qR,color:b="primary",icon:S=HR,name:k,onChange:P,size:O="medium",className:G}=d,F=fn(d,hte),q=ee({},d,{color:b,size:O}),ce=fte(q),B=cte();let U=y;const Z=N2(P,B&&B.onChange);let J=k;return B&&(typeof U>"u"&&(U=mte(B.value,d.value)),typeof J>"u"&&(J=B.name)),ne(pte,ee({type:"radio",icon:H.cloneElement(S,{fontSize:(i=HR.props.fontSize)!=null?i:O}),checkedIcon:H.cloneElement(a,{fontSize:(c=qR.props.fontSize)!=null?c:O}),ownerState:q,classes:ce,name:J,checked:U,onChange:Z,ref:r,className:hn(ce.root,G)},F))}),aw=gte,yte=["actions","children","defaultValue","name","onChange","value"],_te=H.forwardRef(function(t,r){const{actions:i,children:c,defaultValue:d,name:y,onChange:a,value:b}=t,S=fn(t,yte),k=H.useRef(null),[P,O]=ng({controlled:b,default:d,name:"RadioGroup"});H.useImperativeHandle(i,()=>({focus:()=>{let ce=k.current.querySelector("input:not(:disabled):checked");ce||(ce=k.current.querySelector("input:not(:disabled)")),ce&&ce.focus()}}),[]);const G=Si(r,k),F=Wz(y),q=H.useMemo(()=>({name:F,onChange(ce){O(ce.target.value),a&&a(ce,ce.target.value)},value:P}),[F,a,O,P]);return ne(WO.Provider,{value:q,children:ne(YQ,ee({role:"radiogroup",ref:G},S,{children:c}))})}),vte=_te;function xte(e){return Zn("MuiSelect",e)}const bte=rr("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),rm=bte;var ZR;const wte=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],Ste=Yt("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`&.${rm.select}`]:t.select},{[`&.${rm.select}`]:t[r.variant]},{[`&.${rm.error}`]:t.error},{[`&.${rm.multiple}`]:t.multiple}]}})($O,{[`&.${rm.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Ete=Yt("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,r.variant&&t[`icon${Bt(r.variant)}`],r.open&&t.iconOpen]}})(UO),Tte=Yt("input",{shouldForwardProp:e=>$1(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function XR(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function Cte(e){return e==null||typeof e=="string"&&!e.trim()}const Mte=e=>{const{classes:t,variant:r,disabled:i,multiple:c,open:d,error:y}=e,a={select:["select",r,i&&"disabled",c&&"multiple",y&&"error"],icon:["icon",`icon${Bt(r)}`,d&&"iconOpen",i&&"disabled"],nativeInput:["nativeInput"]};return Qn(a,xte,t)},Ate=H.forwardRef(function(t,r){const{"aria-describedby":i,"aria-label":c,autoFocus:d,autoWidth:y,children:a,className:b,defaultOpen:S,defaultValue:k,disabled:P,displayEmpty:O,error:G=!1,IconComponent:F,inputRef:q,labelId:ce,MenuProps:B={},multiple:U,name:Z,onBlur:J,onChange:Y,onClose:he,onFocus:se,onOpen:De,open:fe,readOnly:$,renderValue:ue,SelectDisplayProps:Je={},tabIndex:Ke,value:ke,variant:ze="standard"}=t,nt=fn(t,wte),[_t,Ue]=ng({controlled:ke,default:k,name:"Select"}),[Ee,_e]=ng({controlled:fe,default:S,name:"Select"}),$e=H.useRef(null),be=H.useRef(null),[Me,Ge]=H.useState(null),{current:ut}=H.useRef(fe!=null),[ht,Lt]=H.useState(),zt=Si(r,q),Rt=H.useCallback(Ne=>{be.current=Ne,Ne&&Ge(Ne)},[]),St=Me==null?void 0:Me.parentNode;H.useImperativeHandle(zt,()=>({focus:()=>{be.current.focus()},node:$e.current,value:_t}),[_t]),H.useEffect(()=>{S&&Ee&&Me&&!ut&&(Lt(y?null:St.clientWidth),be.current.focus())},[Me,y]),H.useEffect(()=>{d&&be.current.focus()},[d]),H.useEffect(()=>{if(!ce)return;const Ne=wi(be.current).getElementById(ce);if(Ne){const Ze=()=>{getSelection().isCollapsed&&be.current.focus()};return Ne.addEventListener("click",Ze),()=>{Ne.removeEventListener("click",Ze)}}},[ce]);const Et=(Ne,Ze)=>{Ne?De&&De(Ze):he&&he(Ze),ut||(Lt(y?null:St.clientWidth),_e(Ne))},Ct=Ne=>{Ne.button===0&&(Ne.preventDefault(),be.current.focus(),Et(!0,Ne))},Kt=Ne=>{Et(!1,Ne)},Nt=H.Children.toArray(a),pn=Ne=>{const Ze=Nt.find(lt=>lt.props.value===Ne.target.value);Ze!==void 0&&(Ue(Ze.props.value),Y&&Y(Ne,Ze))},Pn=Ne=>Ze=>{let lt;if(Ze.currentTarget.hasAttribute("tabindex")){if(U){lt=Array.isArray(_t)?_t.slice():[];const Gt=_t.indexOf(Ne.props.value);Gt===-1?lt.push(Ne.props.value):lt.splice(Gt,1)}else lt=Ne.props.value;if(Ne.props.onClick&&Ne.props.onClick(Ze),_t!==lt&&(Ue(lt),Y)){const Gt=Ze.nativeEvent||Ze,tn=new Gt.constructor(Gt.type,Gt);Object.defineProperty(tn,"target",{writable:!0,value:{value:lt,name:Z}}),Y(tn,Ne)}U||Et(!1,Ze)}},vn=Ne=>{$||[" ","ArrowUp","ArrowDown","Enter"].indexOf(Ne.key)!==-1&&(Ne.preventDefault(),Et(!0,Ne))},or=Me!==null&&Ee,Wr=Ne=>{!or&&J&&(Object.defineProperty(Ne,"target",{writable:!0,value:{value:_t,name:Z}}),J(Ne))};delete nt["aria-invalid"];let Ln,Xn;const hr=[];let fr=!1;(ov({value:_t})||O)&&(ue?Ln=ue(_t):fr=!0);const Ut=Nt.map(Ne=>{if(!H.isValidElement(Ne))return null;let Ze;if(U){if(!Array.isArray(_t))throw new Error(pc(2));Ze=_t.some(lt=>XR(lt,Ne.props.value)),Ze&&fr&&hr.push(Ne.props.children)}else Ze=XR(_t,Ne.props.value),Ze&&fr&&(Xn=Ne.props.children);return H.cloneElement(Ne,{"aria-selected":Ze?"true":"false",onClick:Pn(Ne),onKeyUp:lt=>{lt.key===" "&&lt.preventDefault(),Ne.props.onKeyUp&&Ne.props.onKeyUp(lt)},role:"option",selected:Ze,value:void 0,"data-value":Ne.props.value})});fr&&(U?hr.length===0?Ln=null:Ln=hr.reduce((Ne,Ze,lt)=>(Ne.push(Ze),lt<hr.length-1&&Ne.push(", "),Ne),[]):Ln=Xn);let rn=ht;!y&&ut&&Me&&(rn=St.clientWidth);let En;typeof Ke<"u"?En=Ke:En=P?null:0;const Tn=Je.id||(Z?`mui-component-select-${Z}`:void 0),Cn=ee({},t,{variant:ze,value:_t,open:or,error:G}),ln=Mte(Cn);return en(H.Fragment,{children:[ne(Ste,ee({ref:Rt,tabIndex:En,role:"button","aria-disabled":P?"true":void 0,"aria-expanded":or?"true":"false","aria-haspopup":"listbox","aria-label":c,"aria-labelledby":[ce,Tn].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:vn,onMouseDown:P||$?null:Ct,onBlur:Wr,onFocus:se},Je,{ownerState:Cn,className:hn(Je.className,ln.select,b),id:Tn,children:Cte(Ln)?ZR||(ZR=ne("span",{className:"notranslate",children:""})):Ln})),ne(Tte,ee({"aria-invalid":G,value:Array.isArray(_t)?_t.join(","):_t,name:Z,ref:$e,"aria-hidden":!0,onChange:pn,tabIndex:-1,disabled:P,className:ln.nativeInput,autoFocus:d,ownerState:Cn},nt)),ne(Ete,{as:F,className:ln.icon,ownerState:Cn}),ne(Ree,ee({id:`menu-${Z||""}`,anchorEl:St,open:or,onClose:Kt,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},B,{MenuListProps:ee({"aria-labelledby":ce,role:"listbox",disableListWrap:!0},B.MenuListProps),PaperProps:ee({},B.PaperProps,{style:ee({minWidth:rn},B.PaperProps!=null?B.PaperProps.style:null)}),children:Ut}))]})}),kte=Ate,Rte=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Ite=e=>{const{classes:t}=e;return t},cT={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>va(e)&&e!=="variant",slot:"Root"},Pte=Yt(BO,cT)(""),Lte=Yt(jO,cT)(""),Dte=Yt(DO,cT)(""),qO=H.forwardRef(function(t,r){const i=Jn({name:"MuiSelect",props:t}),{autoWidth:c=!1,children:d,classes:y={},className:a,defaultOpen:b=!1,displayEmpty:S=!1,IconComponent:k=pY,id:P,input:O,inputProps:G,label:F,labelId:q,MenuProps:ce,multiple:B=!1,native:U=!1,onClose:Z,onOpen:J,open:Y,renderValue:he,SelectDisplayProps:se,variant:De="outlined"}=i,fe=fn(i,Rte),$=U?Hee:kte,ue=ll(),Je=Tc({props:i,muiFormControl:ue,states:["variant","error"]}),Ke=Je.variant||De,ke=ee({},i,{variant:Ke,classes:y}),ze=Ite(ke),nt=O||{standard:ne(Pte,{ownerState:ke}),outlined:ne(Lte,{label:F,ownerState:ke}),filled:ne(Dte,{ownerState:ke})}[Ke],_t=Si(r,nt.ref);return ne(H.Fragment,{children:H.cloneElement(nt,ee({inputComponent:$,inputProps:ee({children:d,error:Je.error,IconComponent:k,variant:Ke,type:void 0,multiple:B},U?{id:P}:{autoWidth:c,defaultOpen:b,displayEmpty:S,labelId:q,MenuProps:ce,onClose:Z,onOpen:J,open:Y,renderValue:he,SelectDisplayProps:ee({id:P},se)},G,{classes:G?Fo(ze,G.classes):ze},O?O.props.inputProps:{})},B&&U&&Ke==="outlined"?{notched:!0}:{},{ref:_t,className:hn(nt.props.className,a)},!O&&{variant:Ke},fe))})});qO.muiName="Select";const zte=qO;function Ote(e){return Zn("MuiSkeleton",e)}rr("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const Fte=["animation","className","component","height","style","variant","width"];let av=e=>e,KR,YR,QR,JR;const Bte=e=>{const{classes:t,variant:r,animation:i,hasChildren:c,width:d,height:y}=e;return Qn({root:["root",r,i,c&&"withChildren",c&&!d&&"fitContent",c&&!y&&"heightAuto"]},Ote,t)},Nte=Sc(KR||(KR=av`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`)),$te=Sc(YR||(YR=av`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`)),Ute=Yt("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],r.animation!==!1&&t[r.animation],r.hasChildren&&t.withChildren,r.hasChildren&&!r.width&&t.fitContent,r.hasChildren&&!r.height&&t.heightAuto]}})(({theme:e,ownerState:t})=>{const r=KZ(e.shape.borderRadius)||"px",i=YZ(e.shape.borderRadius);return ee({display:"block",backgroundColor:e.vars?e.vars.palette.Skeleton.bg:Kr(e.palette.text.primary,e.palette.mode==="light"?.11:.13),height:"1.2em"},t.variant==="text"&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${i}${r}/${Math.round(i/.6*10)/10}${r}`,"&:empty:before":{content:'"\\00a0"'}},t.variant==="circular"&&{borderRadius:"50%"},t.variant==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius},t.hasChildren&&{"& > *":{visibility:"hidden"}},t.hasChildren&&!t.width&&{maxWidth:"fit-content"},t.hasChildren&&!t.height&&{height:"auto"})},({ownerState:e})=>e.animation==="pulse"&&Kh(QR||(QR=av`
      animation: ${0} 1.5s ease-in-out 0.5s infinite;
    `),Nte),({ownerState:e,theme:t})=>e.animation==="wave"&&Kh(JR||(JR=av`
      position: relative;
      overflow: hidden;

      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */
      -webkit-mask-image: -webkit-radial-gradient(white, black);

      &::after {
        animation: ${0} 1.6s linear 0.5s infinite;
        background: linear-gradient(
          90deg,
          transparent,
          ${0},
          transparent
        );
        content: '';
        position: absolute;
        transform: translateX(-100%); /* Avoid flash during server-side hydration */
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
      }
    `),$te,(t.vars||t).palette.action.hover)),Vte=H.forwardRef(function(t,r){const i=Jn({props:t,name:"MuiSkeleton"}),{animation:c="pulse",className:d,component:y="span",height:a,style:b,variant:S="text",width:k}=i,P=fn(i,Fte),O=ee({},i,{animation:c,component:y,variant:S,hasChildren:!!P.children}),G=Bte(O);return ne(Ute,ee({as:y,ref:r,className:hn(G.root,d),ownerState:O},P,{style:ee({width:k,height:a},b)}))}),Y2=Vte,jte=e=>!e||!uc(e),Gte=jte;function Wte(e){return Zn("MuiSlider",e)}const qte=rr("MuiSlider",["root","active","colorPrimary","colorSecondary","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),$a=qte,Hte=e=>{const{open:t}=e;return{offset:hn(t&&$a.valueLabelOpen),circle:$a.valueLabelCircle,label:$a.valueLabelLabel}};function Zte(e){const{children:t,className:r,value:i}=e,c=Hte(e);return t?H.cloneElement(t,{className:hn(t.props.className)},en(H.Fragment,{children:[t.props.children,ne("span",{className:hn(c.offset,r),"aria-hidden":!0,children:ne("span",{className:c.circle,children:ne("span",{className:c.label,children:i})})})]})):null}const Xte=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"];function eI(e){return e}const Kte=Yt("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`color${Bt(r.color)}`],r.size!=="medium"&&t[`size${Bt(r.size)}`],r.marked&&t.marked,r.orientation==="vertical"&&t.vertical,r.track==="inverted"&&t.trackInverted,r.track===!1&&t.trackFalse]}})(({theme:e,ownerState:t})=>ee({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:(e.vars||e).palette[t.color].main,WebkitTapHighlightColor:"transparent"},t.orientation==="horizontal"&&ee({height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}},t.size==="small"&&{height:2},t.marked&&{marginBottom:20}),t.orientation==="vertical"&&ee({height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}},t.size==="small"&&{width:2},t.marked&&{marginRight:44}),{"@media print":{colorAdjust:"exact"},[`&.${$a.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${$a.dragging}`]:{[`& .${$a.thumb}, & .${$a.track}`]:{transition:"none"}}})),Yte=Yt("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(e,t)=>t.rail})(({ownerState:e})=>ee({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38},e.orientation==="horizontal"&&{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"},e.orientation==="vertical"&&{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"},e.track==="inverted"&&{opacity:1})),Qte=Yt("span",{name:"MuiSlider",slot:"Track",overridesResolver:(e,t)=>t.track})(({theme:e,ownerState:t})=>{const r=e.palette.mode==="light"?QE(e.palette[t.color].main,.62):YE(e.palette[t.color].main,.5);return ee({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest})},t.size==="small"&&{border:"none"},t.orientation==="horizontal"&&{height:"inherit",top:"50%",transform:"translateY(-50%)"},t.orientation==="vertical"&&{width:"inherit",left:"50%",transform:"translateX(-50%)"},t.track===!1&&{display:"none"},t.track==="inverted"&&{backgroundColor:e.vars?e.vars.palette.Slider[`${t.color}Track`]:r,borderColor:e.vars?e.vars.palette.Slider[`${t.color}Track`]:r})}),Jte=Yt("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.thumb,t[`thumbColor${Bt(r.color)}`],r.size!=="medium"&&t[`thumbSize${Bt(r.size)}`]]}})(({theme:e,ownerState:t})=>ee({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest})},t.size==="small"&&{width:12,height:12},t.orientation==="horizontal"&&{top:"50%",transform:"translate(-50%, -50%)"},t.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 50%)"},{"&:before":ee({position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},t.size==="small"&&{boxShadow:"none"}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&:hover, &.${$a.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.16)`:Kr(e.palette[t.color].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${$a.active}`]:{boxShadow:`0px 0px 0px 14px ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.16)`:Kr(e.palette[t.color].main,.16)}`},[`&.${$a.disabled}`]:{"&:hover":{boxShadow:"none"}}})),ene=Yt(Zte,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(e,t)=>t.valueLabel})(({theme:e,ownerState:t})=>ee({[`&.${$a.valueLabelOpen}`]:{transform:`${t.orientation==="vertical"?"translateY(-50%)":"translateY(-100%)"} scale(1)`},zIndex:1,whiteSpace:"nowrap"},e.typography.body2,{fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),transform:`${t.orientation==="vertical"?"translateY(-50%)":"translateY(-100%)"} scale(0)`,position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem"},t.orientation==="horizontal"&&{top:"-10px",transformOrigin:"bottom center","&:before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"}},t.orientation==="vertical"&&{right:t.size==="small"?"20px":"30px",top:"50%",transformOrigin:"right center","&:before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:"-20%",top:"50%"}},t.size==="small"&&{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"})),tne=Yt("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>$1(e)&&e!=="markActive",overridesResolver:(e,t)=>{const{markActive:r}=e;return[t.mark,r&&t.markActive]}})(({theme:e,ownerState:t,markActive:r})=>ee({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},t.orientation==="horizontal"&&{top:"50%",transform:"translate(-1px, -50%)"},t.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 1px)"},r&&{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8})),nne=Yt("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>$1(e)&&e!=="markLabelActive",overridesResolver:(e,t)=>t.markLabel})(({theme:e,ownerState:t,markLabelActive:r})=>ee({},e.typography.body2,{color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap"},t.orientation==="horizontal"&&{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}},t.orientation==="vertical"&&{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}},r&&{color:(e.vars||e).palette.text.primary})),rne=e=>{const{disabled:t,dragging:r,marked:i,orientation:c,track:d,classes:y,color:a,size:b}=e,S={root:["root",t&&"disabled",r&&"dragging",i&&"marked",c==="vertical"&&"vertical",d==="inverted"&&"trackInverted",d===!1&&"trackFalse",a&&`color${Bt(a)}`,b&&`size${Bt(b)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled",b&&`thumbSize${Bt(b)}`,a&&`thumbColor${Bt(a)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return Qn(S,Wte,y)},ine=({children:e})=>e,one=H.forwardRef(function(t,r){var i,c,d,y,a,b,S,k,P,O,G,F,q,ce,B,U,Z,J,Y,he,se,De,fe,$;const ue=Jn({props:t,name:"MuiSlider"}),Ke=Hi().direction==="rtl",{"aria-label":ke,"aria-valuetext":ze,"aria-labelledby":nt,component:_t="span",components:Ue={},componentsProps:Ee={},color:_e="primary",classes:$e,className:be,disableSwap:Me=!1,disabled:Ge=!1,getAriaLabel:ut,getAriaValueText:ht,marks:Lt=!1,max:zt=100,min:Rt=0,orientation:St="horizontal",size:Et="medium",step:Ct=1,scale:Kt=eI,slotProps:Nt,slots:pn,track:Pn="normal",valueLabelDisplay:vn="off",valueLabelFormat:or=eI}=ue,Wr=fn(ue,Xte),Ln=ee({},ue,{isRtl:Ke,max:zt,min:Rt,classes:$e,disabled:Ge,disableSwap:Me,orientation:St,marks:Lt,color:_e,size:Et,step:Ct,scale:Kt,track:Pn,valueLabelDisplay:vn,valueLabelFormat:or}),{axisProps:Xn,getRootProps:hr,getHiddenInputProps:fr,getThumbProps:Ut,open:rn,active:En,axis:Tn,focusedThumbIndex:Cn,range:ln,dragging:Ne,marks:Ze,values:lt,trackOffset:Gt,trackLeap:tn}=$X(ee({},Ln,{rootRef:r}));Ln.marked=Ze.length>0&&Ze.some(je=>je.label),Ln.dragging=Ne,Ln.focusedThumbIndex=Cn;const Be=rne(Ln),Le=(i=(c=pn==null?void 0:pn.root)!=null?c:Ue.Root)!=null?i:Kte,ft=(d=(y=pn==null?void 0:pn.rail)!=null?y:Ue.Rail)!=null?d:Yte,yt=(a=(b=pn==null?void 0:pn.track)!=null?b:Ue.Track)!=null?a:Qte,It=(S=(k=pn==null?void 0:pn.thumb)!=null?k:Ue.Thumb)!=null?S:Jte,Ft=(P=(O=pn==null?void 0:pn.valueLabel)!=null?O:Ue.ValueLabel)!=null?P:ene,Qt=(G=(F=pn==null?void 0:pn.mark)!=null?F:Ue.Mark)!=null?G:tne,Jt=(q=(ce=pn==null?void 0:pn.markLabel)!=null?ce:Ue.MarkLabel)!=null?q:nne,an=(B=(U=pn==null?void 0:pn.input)!=null?U:Ue.Input)!=null?B:"input",bn=(Z=Nt==null?void 0:Nt.root)!=null?Z:Ee.root,qn=(J=Nt==null?void 0:Nt.rail)!=null?J:Ee.rail,br=(Y=Nt==null?void 0:Nt.track)!=null?Y:Ee.track,jn=(he=Nt==null?void 0:Nt.thumb)!=null?he:Ee.thumb,ar=(se=Nt==null?void 0:Nt.valueLabel)!=null?se:Ee.valueLabel,qr=(De=Nt==null?void 0:Nt.mark)!=null?De:Ee.mark,pi=(fe=Nt==null?void 0:Nt.markLabel)!=null?fe:Ee.markLabel,pe=($=Nt==null?void 0:Nt.input)!=null?$:Ee.input,j=us({elementType:Le,getSlotProps:hr,externalSlotProps:bn,externalForwardedProps:Wr,additionalProps:ee({},Gte(Le)&&{as:_t}),ownerState:ee({},Ln,bn==null?void 0:bn.ownerState),className:[Be.root,be]}),K=us({elementType:ft,externalSlotProps:qn,ownerState:Ln,className:Be.rail}),oe=us({elementType:yt,externalSlotProps:br,additionalProps:{style:ee({},Xn[Tn].offset(Gt),Xn[Tn].leap(tn))},ownerState:ee({},Ln,br==null?void 0:br.ownerState),className:Be.track}),ve=us({elementType:It,getSlotProps:Ut,externalSlotProps:jn,ownerState:ee({},Ln,jn==null?void 0:jn.ownerState),className:Be.thumb}),Pe=us({elementType:Ft,externalSlotProps:ar,ownerState:ee({},Ln,ar==null?void 0:ar.ownerState),className:Be.valueLabel}),We=us({elementType:Qt,externalSlotProps:qr,ownerState:Ln,className:Be.mark}),Ve=us({elementType:Jt,externalSlotProps:pi,ownerState:Ln,className:Be.markLabel}),Oe=us({elementType:an,getSlotProps:fr,externalSlotProps:pe,ownerState:Ln});return en(Le,ee({},j,{children:[ne(ft,ee({},K)),ne(yt,ee({},oe)),Ze.filter(je=>je.value>=Rt&&je.value<=zt).map((je,mt)=>{const qt=rv(je.value,Rt,zt),At=Xn[Tn].offset(qt);let cn;return Pn===!1?cn=lt.indexOf(je.value)!==-1:cn=Pn==="normal"&&(ln?je.value>=lt[0]&&je.value<=lt[lt.length-1]:je.value<=lt[0])||Pn==="inverted"&&(ln?je.value<=lt[0]||je.value>=lt[lt.length-1]:je.value>=lt[0]),en(H.Fragment,{children:[ne(Qt,ee({"data-index":mt},We,!uc(Qt)&&{markActive:cn},{style:ee({},At,We.style),className:hn(We.className,cn&&Be.markActive)})),je.label!=null?ne(Jt,ee({"aria-hidden":!0,"data-index":mt},Ve,!uc(Jt)&&{markLabelActive:cn},{style:ee({},At,Ve.style),className:hn(Be.markLabel,Ve.className,cn&&Be.markLabelActive),children:je.label})):null]},mt)}),lt.map((je,mt)=>{const qt=rv(je,Rt,zt),At=Xn[Tn].offset(qt),cn=vn==="off"?ine:Ft;return ne(cn,ee({},!uc(cn)&&{valueLabelFormat:or,valueLabelDisplay:vn,value:typeof or=="function"?or(Kt(je),mt):or,index:mt,open:rn===mt||En===mt||vn==="on",disabled:Ge},Pe,{children:ne(It,ee({"data-index":mt},ve,{className:hn(Be.thumb,ve.className,En===mt&&Be.active,Cn===mt&&Be.focusVisible),style:ee({},At,{pointerEvents:Me&&En!==mt?"none":void 0},ve.style),children:ne(an,ee({"data-index":mt,"aria-label":ut?ut(mt):ke,"aria-valuenow":Kt(je),"aria-labelledby":nt,"aria-valuetext":ht?ht(Kt(je),mt):ze,value:lt[mt]},Oe))}))}),mt)})]}))}),ane=one,sne=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],lne={entering:{transform:"none"},entered:{transform:"none"}},cne=H.forwardRef(function(t,r){const i=Hi(),c={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:d,appear:y=!0,children:a,easing:b,in:S,onEnter:k,onEntered:P,onEntering:O,onExit:G,onExited:F,onExiting:q,style:ce,timeout:B=c,TransitionComponent:U=U1}=t,Z=fn(t,sne),J=H.useRef(null),Y=Si(J,a.ref,r),he=ke=>ze=>{if(ke){const nt=J.current;ze===void 0?ke(nt):ke(nt,ze)}},se=he(O),De=he((ke,ze)=>{V1(ke);const nt=tl({style:ce,timeout:B,easing:b},{mode:"enter"});ke.style.webkitTransition=i.transitions.create("transform",nt),ke.style.transition=i.transitions.create("transform",nt),k&&k(ke,ze)}),fe=he(P),$=he(q),ue=he(ke=>{const ze=tl({style:ce,timeout:B,easing:b},{mode:"exit"});ke.style.webkitTransition=i.transitions.create("transform",ze),ke.style.transition=i.transitions.create("transform",ze),G&&G(ke)}),Je=he(F);return ne(U,ee({appear:y,in:S,nodeRef:J,onEnter:De,onEntered:fe,onEntering:se,onExit:ue,onExited:Je,onExiting:$,addEndListener:ke=>{d&&d(J.current,ke)},timeout:B},Z,{children:(ke,ze)=>H.cloneElement(a,ee({style:ee({transform:"scale(0)",visibility:ke==="exited"&&!S?"hidden":void 0},lne[ke],ce,a.props.style),ref:Y},ze))}))}),une=cne,dne=EZ({createStyledComponent:Yt("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>Jn({props:e,name:"MuiStack"})}),hf=dne,hne=["anchor","classes","className","width","style"],fne=Yt("div")(({theme:e,ownerState:t})=>ee({position:"fixed",top:0,left:0,bottom:0,zIndex:e.zIndex.drawer-1},t.anchor==="left"&&{right:"auto"},t.anchor==="right"&&{left:"auto",right:0},t.anchor==="top"&&{bottom:"auto",right:0},t.anchor==="bottom"&&{top:"auto",bottom:0,right:0})),pne=H.forwardRef(function(t,r){const{anchor:i,classes:c={},className:d,width:y,style:a}=t,b=fn(t,hne),S=t;return ne(fne,ee({className:hn("PrivateSwipeArea-root",c.root,c[`anchor${Bt(i)}`],d),ref:r,style:ee({[Eu(i)?"width":"height"]:y},a),ownerState:S},b))}),mne=pne,gne=["BackdropProps"],yne=["anchor","disableBackdropTransition","disableDiscovery","disableSwipeToOpen","hideBackdrop","hysteresis","allowSwipeInChildren","minFlingVelocity","ModalProps","onClose","onOpen","open","PaperProps","SwipeAreaProps","swipeAreaWidth","transitionDuration","variant"],Y0=3,sw=20;let Fs=null;function lw(e,t,r){return e==="right"?r.body.offsetWidth-t[0].pageX:t[0].pageX}function cw(e,t,r){return e==="bottom"?r.innerHeight-t[0].clientY:t[0].clientY}function im(e,t){return e?t.clientWidth:t.clientHeight}function tI(e,t,r,i){return Math.min(Math.max(r?t-e:i+t-e,0),i)}function _ne(e,t){const r=[];for(;e&&e!==t.parentElement;){const i=Xo(t).getComputedStyle(e);i.getPropertyValue("position")==="absolute"||i.getPropertyValue("overflow-x")==="hidden"||(e.clientWidth>0&&e.scrollWidth>e.clientWidth||e.clientHeight>0&&e.scrollHeight>e.clientHeight)&&r.push(e),e=e.parentElement}return r}function vne({domTreeShapes:e,start:t,current:r,anchor:i}){const c={scrollPosition:{x:"scrollLeft",y:"scrollTop"},scrollLength:{x:"scrollWidth",y:"scrollHeight"},clientLength:{x:"clientWidth",y:"clientHeight"}};return e.some(d=>{let y=r>=t;(i==="top"||i==="left")&&(y=!y);const a=i==="left"||i==="right"?"x":"y",b=Math.round(d[c.scrollPosition[a]]),S=b>0,k=b+d[c.clientLength[a]]<d[c.scrollLength[a]];return!!(y&&k||!y&&S)})}const xne=typeof navigator<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent),bne=H.forwardRef(function(t,r){const i=Rg({name:"MuiSwipeableDrawer",props:t}),c=Hi(),d={enter:c.transitions.duration.enteringScreen,exit:c.transitions.duration.leavingScreen},{anchor:y="left",disableBackdropTransition:a=!1,disableDiscovery:b=!1,disableSwipeToOpen:S=xne,hideBackdrop:k,hysteresis:P=.52,allowSwipeInChildren:O=!1,minFlingVelocity:G=450,ModalProps:{BackdropProps:F}={},onClose:q,onOpen:ce,open:B=!1,PaperProps:U={},SwipeAreaProps:Z,swipeAreaWidth:J=20,transitionDuration:Y=d,variant:he="temporary"}=i,se=fn(i.ModalProps,gne),De=fn(i,yne),[fe,$]=H.useState(!1),ue=H.useRef({isSwiping:null}),Je=H.useRef(),Ke=H.useRef(),ke=H.useRef(),ze=Si(U.ref,ke),nt=H.useRef(!1),_t=H.useRef();Js(()=>{_t.current=null},[B]);const Ue=H.useCallback((Me,Ge={})=>{const{mode:ut=null,changeTransition:ht=!0}=Ge,Lt=gm(c,y),zt=["right","bottom"].indexOf(Lt)!==-1?1:-1,Rt=Eu(y),St=Rt?`translate(${zt*Me}px, 0)`:`translate(0, ${zt*Me}px)`,Et=ke.current.style;Et.webkitTransform=St,Et.transform=St;let Ct="";if(ut&&(Ct=c.transitions.create("all",tl({easing:void 0,style:void 0,timeout:Y},{mode:ut}))),ht&&(Et.webkitTransition=Ct,Et.transition=Ct),!a&&!k){const Kt=Ke.current.style;Kt.opacity=1-Me/im(Rt,ke.current),ht&&(Kt.webkitTransition=Ct,Kt.transition=Ct)}},[y,a,k,c,Y]),Ee=pa(Me=>{if(!nt.current)return;if(Fs=null,nt.current=!1,fc.flushSync(()=>{$(!1)}),!ue.current.isSwiping){ue.current.isSwiping=null;return}ue.current.isSwiping=null;const Ge=gm(c,y),ut=Eu(y);let ht;ut?ht=lw(Ge,Me.changedTouches,wi(Me.currentTarget)):ht=cw(Ge,Me.changedTouches,Xo(Me.currentTarget));const Lt=ut?ue.current.startX:ue.current.startY,zt=im(ut,ke.current),Rt=tI(ht,Lt,B,zt),St=Rt/zt;if(Math.abs(ue.current.velocity)>G&&(_t.current=Math.abs((zt-Rt)/ue.current.velocity)*1e3),B){ue.current.velocity>G||St>P?q():Ue(0,{mode:"exit"});return}ue.current.velocity<-G||1-St>P?ce():Ue(im(ut,ke.current),{mode:"enter"})}),_e=(Me=!1)=>{if(!fe){(Me||!(b&&O))&&fc.flushSync(()=>{$(!0)});const Ge=Eu(y);!B&&ke.current&&Ue(im(Ge,ke.current)+(b?15:-sw),{changeTransition:!1}),ue.current.velocity=0,ue.current.lastTime=null,ue.current.lastTranslate=null,ue.current.paperHit=!1,nt.current=!0}},$e=pa(Me=>{if(!ke.current||!nt.current||Fs!==null&&Fs!==ue.current)return;_e(!0);const Ge=gm(c,y),ut=Eu(y),ht=lw(Ge,Me.touches,wi(Me.currentTarget)),Lt=cw(Ge,Me.touches,Xo(Me.currentTarget));if(B&&ke.current.contains(Me.target)&&Fs===null){const Ct=_ne(Me.target,ke.current);if(vne({domTreeShapes:Ct,start:ut?ue.current.startX:ue.current.startY,current:ut?ht:Lt,anchor:y})){Fs=!0;return}Fs=ue.current}if(ue.current.isSwiping==null){const Ct=Math.abs(ht-ue.current.startX),Kt=Math.abs(Lt-ue.current.startY),Nt=ut?Ct>Kt&&Ct>Y0:Kt>Ct&&Kt>Y0;if(Nt&&Me.cancelable&&Me.preventDefault(),Nt===!0||(ut?Kt>Y0:Ct>Y0)){if(ue.current.isSwiping=Nt,!Nt){Ee(Me);return}ue.current.startX=ht,ue.current.startY=Lt,!b&&!B&&(ut?ue.current.startX-=sw:ue.current.startY-=sw)}}if(!ue.current.isSwiping)return;const zt=im(ut,ke.current);let Rt=ut?ue.current.startX:ue.current.startY;B&&!ue.current.paperHit&&(Rt=Math.min(Rt,zt));const St=tI(ut?ht:Lt,Rt,B,zt);if(B)if(ue.current.paperHit)St===0&&(ue.current.startX=ht,ue.current.startY=Lt);else if(ut?ht<zt:Lt<zt)ue.current.paperHit=!0,ue.current.startX=ht,ue.current.startY=Lt;else return;ue.current.lastTranslate===null&&(ue.current.lastTranslate=St,ue.current.lastTime=performance.now()+1);const Et=(St-ue.current.lastTranslate)/(performance.now()-ue.current.lastTime)*1e3;ue.current.velocity=ue.current.velocity*.4+Et*.6,ue.current.lastTranslate=St,ue.current.lastTime=performance.now(),Me.cancelable&&Me.preventDefault(),Ue(St)}),be=pa(Me=>{if(Me.defaultPrevented||Me.defaultMuiPrevented||B&&(k||!Ke.current.contains(Me.target))&&!ke.current.contains(Me.target))return;const Ge=gm(c,y),ut=Eu(y),ht=lw(Ge,Me.touches,wi(Me.currentTarget)),Lt=cw(Ge,Me.touches,Xo(Me.currentTarget));if(!B){var zt;if(S||!(Me.target===Je.current||(zt=ke.current)!=null&&zt.contains(Me.target)&&(typeof O=="function"?O(Me,Je.current,ke.current):O)))return;if(ut){if(ht>J)return}else if(Lt>J)return}Me.defaultMuiPrevented=!0,Fs=null,ue.current.startX=ht,ue.current.startY=Lt,_e()});return H.useEffect(()=>{if(he==="temporary"){const Me=wi(ke.current);return Me.addEventListener("touchstart",be),Me.addEventListener("touchmove",$e,{passive:!B}),Me.addEventListener("touchend",Ee),()=>{Me.removeEventListener("touchstart",be),Me.removeEventListener("touchmove",$e,{passive:!B}),Me.removeEventListener("touchend",Ee)}}},[he,B,be,$e,Ee]),H.useEffect(()=>()=>{Fs===ue.current&&(Fs=null)},[]),H.useEffect(()=>{B||$(!1)},[B]),en(H.Fragment,{children:[ne(bQ,ee({open:he==="temporary"&&fe?!0:B,variant:he,ModalProps:ee({BackdropProps:ee({},F,{ref:Ke})},he==="temporary"&&{keepMounted:!0},se),hideBackdrop:k,PaperProps:ee({},U,{style:ee({pointerEvents:he==="temporary"&&!B&&!O?"none":""},U.style),ref:ze}),anchor:y,transitionDuration:_t.current||Y,onClose:q,ref:r},De)),!S&&he==="temporary"&&ne(LX,{children:ne(mne,ee({anchor:y,ref:Je,width:J},Z))})]})}),wne=bne;function Sne(e){return Zn("MuiToolbar",e)}rr("MuiToolbar",["root","gutters","regular","dense"]);const Ene=["className","component","disableGutters","variant"],Tne=e=>{const{classes:t,disableGutters:r,variant:i}=e;return Qn({root:["root",!r&&"gutters",i]},Sne,t)},Cne=Yt("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableGutters&&t.gutters,t[r.variant]]}})(({theme:e,ownerState:t})=>ee({position:"relative",display:"flex",alignItems:"center"},!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}},t.variant==="dense"&&{minHeight:48}),({theme:e,ownerState:t})=>t.variant==="regular"&&e.mixins.toolbar),Mne=H.forwardRef(function(t,r){const i=Jn({props:t,name:"MuiToolbar"}),{className:c,component:d="div",disableGutters:y=!1,variant:a="regular"}=i,b=fn(i,Ene),S=ee({},i,{component:d,disableGutters:y,variant:a}),k=Tne(S);return ne(Cne,ee({as:d,className:hn(k.root,c),ref:r,ownerState:S},b))}),uT=Mne;function Ane(e){return Zn("MuiTextField",e)}rr("MuiTextField",["root"]);const kne=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],Rne={standard:BO,filled:DO,outlined:jO},Ine=e=>{const{classes:t}=e;return Qn({root:["root"]},Ane,t)},Pne=Yt(BQ,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Lne=H.forwardRef(function(t,r){const i=Jn({props:t,name:"MuiTextField"}),{autoComplete:c,autoFocus:d=!1,children:y,className:a,color:b="primary",defaultValue:S,disabled:k=!1,error:P=!1,FormHelperTextProps:O,fullWidth:G=!1,helperText:F,id:q,InputLabelProps:ce,inputProps:B,InputProps:U,inputRef:Z,label:J,maxRows:Y,minRows:he,multiline:se=!1,name:De,onBlur:fe,onChange:$,onClick:ue,onFocus:Je,placeholder:Ke,required:ke=!1,rows:ze,select:nt=!1,SelectProps:_t,type:Ue,value:Ee,variant:_e="outlined"}=i,$e=fn(i,kne),be=ee({},i,{autoFocus:d,color:b,disabled:k,error:P,fullWidth:G,multiline:se,required:ke,select:nt,variant:_e}),Me=Ine(be),Ge={};_e==="outlined"&&(ce&&typeof ce.shrink<"u"&&(Ge.notched=ce.shrink),Ge.label=J),nt&&((!_t||!_t.native)&&(Ge.id=void 0),Ge["aria-describedby"]=void 0);const ut=Wz(q),ht=F&&ut?`${ut}-helper-text`:void 0,Lt=J&&ut?`${ut}-label`:void 0,zt=Rne[_e],Rt=ne(zt,ee({"aria-describedby":ht,autoComplete:c,autoFocus:d,defaultValue:S,fullWidth:G,multiline:se,name:De,rows:ze,maxRows:Y,minRows:he,type:Ue,value:Ee,id:ut,inputRef:Z,onBlur:fe,onChange:$,onFocus:Je,onClick:ue,placeholder:Ke,inputProps:B},Ge,U));return en(Pne,ee({className:hn(Me.root,a),disabled:k,error:P,fullWidth:G,ref:r,required:ke,color:b,variant:_e,ownerState:be},$e,{children:[J!=null&&J!==""&&ne(VJ,ee({htmlFor:ut,id:Lt},ce,{children:J})),nt?ne(zte,ee({"aria-describedby":ht,id:ut,labelId:Lt,value:Ee,input:Rt},_t,{children:y})):Rt,F&&ne(iJ,ee({id:ht},O,{children:F}))]}))}),uw=Lne,dT=go("div")(({theme:e})=>({width:"calc(100% - 2rem)",maxWidth:"444px",margin:"0 auto",position:"fixed",top:0,left:"50%",transform:"translate(-50%)",zIndex:10,color:e.palette.text.primary,"@media (max-width: 475px)":{width:"100%"},"& .MuiButton-text *":{color:`${Qs[500]}`},"& .MuiButton-text.active *":{color:e.palette.primary.main},"& > header":{boxShadow:"none",backgroundImage:"none"},"& .MuiToolbar-root":{justifyContent:"space-between",alignItems:"flex-end",backgroundColor:e.palette.background.default,color:e.palette.text.primary},"& .MuiToolbar-root.centerToolbar":{alignItems:"center"},"& .MuiToolbar-root .header_nav_btn":{borderRadius:0},"& .MuiToolbar-root .right_section":{display:"flex",gap:1},"& .MuiToolbar-root .right_section .mainFn svg, & .MuiToolbar-root .mainFn svg":{aspectRatio:"1"}})),cl="#00A651",HO="#ED6729",Dne=["#E58859","#5DA457","#9EBE62","#80BE91","#EAFDE6"];go("div")(({theme:e})=>({height:"100%",backgroundColor:(e==null?void 0:e.palette.mode)==="light"?Qs[100]:e==null?void 0:e.palette.background.default}));const zne=go(Rn)(()=>({backgroundColor:cl,width:50,height:5,opacity:.3,borderRadius:3,position:"absolute",left:"calc(50% - 25px)",top:10})),One=go(Rn)`
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
`,dw=al({palette:{mode:"light",primary:{main:cl},secondary:{main:HO},background:{default:"#fff",paper:"#f5f5f5"}}}),hw=al({palette:{mode:"dark",primary:{main:cl},secondary:{main:HO},background:{default:Qs[900],paper:Qs[800]}}}),Fne=go(Rn)(({theme:e})=>({backgroundColor:e.palette.background.default})),ZO="https://api.wooyeons.site";function Bne({headProp:e}){return ne(dT,{style:{backgroundColor:e.bgColor},children:ne(rT,{position:"fixed",sx:{backgroundColor:"inherit !important"},children:en(uT,{className:"centerToolbar",sx:{backgroundColor:"inherit !important","& *":{color:e.contentColor?e.contentColor+" !important":"inherit"}},children:[e.fn_L?ne(ag,{onClick:e.fn_L,className:"mainFn",children:e.icon_L&&ne(e.icon_L,{})}):ne(Rn,{width:34}),ne(Nr,{variant:"subtitle2",children:e.menus[0].key}),e.fn_R?ne(ag,{onClick:e.fn_R,className:"mainFn",children:e.icon_R&&ne(e.icon_R,{})}):ne(Rn,{width:34})]})})})}function Nne({headProp:e}){return ne(dT,{children:ne(rT,{position:"fixed",sx:{backgroundColor:e.bgColor},children:en(uT,{className:"centerToolbar",sx:{backgroundColor:e.bgColor,"& *":{color:e.contentColor?e.contentColor+" !important":"inherit"}},children:[ne(Nr,{variant:"subtitle2",children:e.menus[0].key}),ne(Rn,{className:"right_section",children:ne(ag,{onClick:e.fn_R,className:"mainFn",children:e.icon_R&&ne(e.icon_R,{})})})]})})})}function $ne({headProp:e,navigate:t,setBtnText:r}){const[i,c]=H.useState(0),d=Fv();e.headerType===void 0&&(e.headerType="V1");const y=b=>{const S=e.menus.findIndex(k=>k.value===b.value);e.isForward===!1&&i<S||(d.pathname!=b.value&&t(b.value),a())},a=()=>{d.pathname==="/add-post"||d.pathname,r("")};return H.useLayoutEffect(()=>{c(e.menus.findIndex(b=>b.value===d.pathname))},[d,e]),e.headerType==="V2"?ne(Nne,{headProp:e,navigate:t}):e.headerType==="V3"?ne(Bne,{headProp:e,navigate:t}):ne(dT,{children:ne(rT,{sx:{background:"none"},children:en(uT,{children:[ne(Rn,{children:e.menus.map(b=>ne(nl,{onClick:()=>y(b),className:`header_nav_btn ${b.value===d.pathname?"active":""}`,sx:{borderBottom:b.value===d.pathname?`2px solid ${cl}`:"2px solid #0000"},children:ne(Nr,{variant:"subtitle2",color:b.value===d.pathname?"secondary":"primary",children:b.key})},b.key))}),en(Rn,{className:"right_section",children:[e.icon_L&&ne(ag,{onClick:e.fn_L,className:"mainFn",children:ne(e.icon_L,{})}),ne(ag,{onClick:e.fn_R,className:"mainFn",children:e.icon_R&&ne(e.icon_R,{})})]})]})})})}const Une=go(tQ)(({theme:e})=>({backgroundColor:e.palette.background.default}));al({palette:{primary:{main:"#00A651"},secondary:{main:"#EEF1EE"}}});const XO=e=>{const[t]=H.useState("primary");return ne(nl,{variant:"contained",color:t,onClick:e.onClick,sx:{width:"100%",height:"3rem",borderRadius:4,fontWeight:600,boxShadow:"0 1px 3px rgba(0,0,0,0.12)",fontSize:20,zIndex:10},children:e.text})};function nI({isHeader:e}){const[t,r]=H.useState({menus:[{key:"",value:""}],isForward:!0}),i=Fv(),c=mD(),[d,y]=H.useState({isFullWidth:!1,isNoneHeadPadding:!1,noneFullHeight:!1,scrollable:!1,isBtn:!1}),[a,b]=H.useState(""),S=()=>{i.pathname==="/add-post"?(b(""),c("/add-post/category")):i.pathname==="/add-post/category"?(b(" "),c("/add-post/content")):(b(""),c("/add-post/category"))};return en(gc,{children:[e&&ne($ne,{headProp:t,navigate:c,setBtnText:b}),ne(Une,{className:"globalContainer",maxWidth:"xs",sx:{pl:d.isFullWidth?0:2,pr:d.isFullWidth?0:2,"@media (min-width: 600px)":{pl:d.isFullWidth?0:2,pr:d.isFullWidth?0:2}},children:en(Rn,{sx:{maxHeight:"100vh",touchAction:"none",overflowX:d.scrollable?"scroll":"hidden",height:d.noneFullHeight?"auto":"100vh",pt:d.isNoneHeadPadding?0:7,"@media (min-width: 600px)":{pt:d.isNoneHeadPadding?0:8},pb:d.isBtn?8:0},children:[ne(mE,{context:{headOpt:t,setHeadOpt:r,navigate:c,setWrapperOpt:y}}),d.isBtn&&ne(Rn,{sx:{width:"100%",maxWidth:"444px",margin:"auto",position:"fixed",bottom:0,px:3,pb:4},children:ne(XO,{text:a,onClick:S})})]})})]})}var KO={};function Vne(e){if(e&&e.__esModule)return e;var t={};if(e!=null){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}}return t.default=e,t}var YO=Vne,Bs={},fw,rI;function jne(){if(rI)return fw;rI=1;function e(t){return t&&t.__esModule?t:{default:t}}return fw=e,fw}var Q0,iI;function Gne(){if(iI)return Q0;iI=1;function e(){return Q0=e=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(t[c]=i[c])}return t},e.apply(this,arguments)}return Q0=e,Q0}var pw,oI;function Wne(){if(oI)return pw;oI=1;function e(t,r){if(t==null)return{};var i={},c=Object.keys(t),d,y;for(y=0;y<c.length;y++)d=c[y],!(r.indexOf(d)>=0)&&(i[d]=t[d]);return i}return pw=e,pw}var mw,aI;function qne(){if(aI)return mw;aI=1;var e=Wne();function t(r,i){if(r==null)return{};var c=e(r,i),d,y;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(y=0;y<a.length;y++)d=a[y],!(i.indexOf(d)>=0)&&Object.prototype.propertyIsEnumerable.call(r,d)&&(c[d]=r[d])}return c}return mw=t,mw}var gw,sI;function Hne(){if(sI)return gw;sI=1;function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}return gw=e,gw}var yw,lI;function Zne(){if(lI)return yw;lI=1;function e(r,i){for(var c=0;c<i.length;c++){var d=i[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(r,d.key,d)}}function t(r,i,c){return i&&e(r.prototype,i),c&&e(r,c),r}return yw=t,yw}var om,cI;function Xne(){if(cI)return om;cI=1;function e(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(c){return typeof c}:e=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},e(r)}function t(r){return typeof Symbol=="function"&&e(Symbol.iterator)==="symbol"?om=t=function(c){return e(c)}:om=t=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":e(c)},t(r)}return om=t,om}var _w,uI;function Kne(){if(uI)return _w;uI=1;function e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}return _w=e,_w}var vw,dI;function Yne(){if(dI)return vw;dI=1;var e=Xne(),t=Kne();function r(i,c){return c&&(e(c)==="object"||typeof c=="function")?c:t(i)}return vw=r,vw}var J0,hI;function Qne(){if(hI)return J0;hI=1;function e(t){return J0=e=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},e(t)}return J0=e,J0}var e_,fI;function Jne(){if(fI)return e_;fI=1;function e(t,r){return e_=e=Object.setPrototypeOf||function(c,d){return c.__proto__=d,c},e(t,r)}return e_=e,e_}var xw,pI;function ere(){if(pI)return xw;pI=1;var e=Jne();function t(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),i&&e(r,i)}return xw=t,xw}var bw,mI;function QO(){if(mI)return bw;mI=1;var e=function(){};return bw=e,bw}var ww={},Sw,gI;function Z1(){if(gI)return Sw;gI=1;function e(t){return t&&t.__esModule?t:{default:t}}return Sw=e,Sw}var am={},yI;function tre(){if(yI)return am;yI=1;var e=Z1();Object.defineProperty(am,"__esModule",{value:!0}),am.default=void 0;var t=e(H);e(QO());var r=function(d){d.index;var y=d.children;t.default.Children.count(y)},i=r;return am.default=i,am}var t_={},sm={},_I;function JO(){if(_I)return sm;_I=1,Object.defineProperty(sm,"__esModule",{value:!0}),sm.default=void 0;var e={RESISTANCE_COEF:.6,UNCERTAINTY_THRESHOLD:3};return sm.default=e,sm}var vI;function nre(){if(vI)return t_;vI=1;var e=Z1();Object.defineProperty(t_,"__esModule",{value:!0}),t_.default=i;var t=e(H),r=e(JO());function i(c){var d=c.children,y=c.startIndex,a=c.startX,b=c.pageX,S=c.viewLength,k=c.resistance,P=t.default.Children.count(d)-1,O=y+(a-b)/S,G;return k?O<0?O=Math.exp(O*r.default.RESISTANCE_COEF)-1:O>P&&(O=P+1-Math.exp((P-O)*r.default.RESISTANCE_COEF)):O<0?(O=0,G=(O-y)*S+b):O>P&&(O=P,G=(O-y)*S+b),{index:O,startX:G}}return t_}var lm={},xI;function rre(){if(xI)return lm;xI=1;var e=Z1();Object.defineProperty(lm,"__esModule",{value:!0}),lm.default=void 0;var t=e(H),r=function(d,y){var a=!1,b=function(F){return F?F.key:"empty"};if(d.children.length&&y.children.length){var S=t.default.Children.map(d.children,b),k=S[d.index];if(k!=null){var P=t.default.Children.map(y.children,b),O=P[y.index];k===O&&(a=!0)}}return a},i=r;return lm.default=i,lm}var cm={},bI;function ire(){if(bI)return cm;bI=1,Object.defineProperty(cm,"__esModule",{value:!0}),cm.default=void 0;function e(r,i){var c=r%i;return c<0?c+i:c}var t=e;return cm.default=t,cm}var wI;function ore(){return wI||(wI=1,function(e){var t=Z1();Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"checkIndexBounds",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"computeIndex",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"constant",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"getDisplaySameSlide",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"mod",{enumerable:!0,get:function(){return y.default}});var r=t(tre()),i=t(nre()),c=t(JO()),d=t(rre()),y=t(ire())}(ww)),ww}var SI;function are(){if(SI)return Bs;SI=1;var e=YO,t=jne();Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.getDomTreeShapes=B,Bs.findNativeHandler=Z,Bs.default=Bs.SwipeableViewsContext=void 0;var r=t(Gne()),i=t(qne()),c=t(Hne()),d=t(Zne()),y=t(Yne()),a=t(Qne()),b=t(ere()),S=e(H);t(dW),t(QO());var k=ore();function P(se,De,fe,$){return se.addEventListener(De,fe,$),{remove:function(){se.removeEventListener(De,fe,$)}}}var O={container:{direction:"ltr",display:"flex",willChange:"transform"},slide:{width:"100%",WebkitFlexShrink:0,flexShrink:0,overflow:"auto"}},G={root:{x:{overflowX:"hidden"},"x-reverse":{overflowX:"hidden"},y:{overflowY:"hidden"},"y-reverse":{overflowY:"hidden"}},flexDirection:{x:"row","x-reverse":"row-reverse",y:"column","y-reverse":"column-reverse"},transform:{x:function(De){return"translate(".concat(-De,"%, 0)")},"x-reverse":function(De){return"translate(".concat(De,"%, 0)")},y:function(De){return"translate(0, ".concat(-De,"%)")},"y-reverse":function(De){return"translate(0, ".concat(De,"%)")}},length:{x:"width","x-reverse":"width",y:"height","y-reverse":"height"},rotationMatrix:{x:{x:[1,0],y:[0,1]},"x-reverse":{x:[-1,0],y:[0,1]},y:{x:[0,1],y:[1,0]},"y-reverse":{x:[0,-1],y:[1,0]}},scrollPosition:{x:"scrollLeft","x-reverse":"scrollLeft",y:"scrollTop","y-reverse":"scrollTop"},scrollLength:{x:"scrollWidth","x-reverse":"scrollWidth",y:"scrollHeight","y-reverse":"scrollHeight"},clientLength:{x:"clientWidth","x-reverse":"clientWidth",y:"clientHeight","y-reverse":"clientHeight"}};function F(se,De){var fe=De.duration,$=De.easeFunction,ue=De.delay;return"".concat(se," ").concat(fe," ").concat($," ").concat(ue)}function q(se,De){var fe=G.rotationMatrix[De];return{pageX:fe.x[0]*se.pageX+fe.x[1]*se.pageY,pageY:fe.y[0]*se.pageX+fe.y[1]*se.pageY}}function ce(se){return se.touches=[{pageX:se.pageX,pageY:se.pageY}],se}function B(se,De){for(var fe=[];se&&se!==De&&se!==document.body&&!se.hasAttribute("data-swipeable");){var $=window.getComputedStyle(se);$.getPropertyValue("position")==="absolute"||$.getPropertyValue("overflow-x")==="hidden"?fe=[]:(se.clientWidth>0&&se.scrollWidth>se.clientWidth||se.clientHeight>0&&se.scrollHeight>se.clientHeight)&&fe.push({element:se,scrollWidth:se.scrollWidth,scrollHeight:se.scrollHeight,clientWidth:se.clientWidth,clientHeight:se.clientHeight,scrollLeft:se.scrollLeft,scrollTop:se.scrollTop}),se=se.parentNode}return fe}var U=null;function Z(se){var De=se.domTreeShapes,fe=se.pageX,$=se.startX,ue=se.axis;return De.some(function(Je){var Ke=fe>=$;(ue==="x"||ue==="y")&&(Ke=!Ke);var ke=Math.round(Je[G.scrollPosition[ue]]),ze=ke>0,nt=ke+Je[G.clientLength[ue]]<Je[G.scrollLength[ue]];return Ke&&nt||!Ke&&ze?(U=Je.element,!0):!1})}var J=S.createContext();Bs.SwipeableViewsContext=J;var Y=function(se){(0,b.default)(De,se);function De(fe){var $;return(0,c.default)(this,De),$=(0,y.default)(this,(0,a.default)(De).call(this,fe)),$.rootNode=null,$.containerNode=null,$.ignoreNextScrollEvents=!1,$.viewLength=0,$.startX=0,$.lastX=0,$.vx=0,$.startY=0,$.isSwiping=void 0,$.started=!1,$.startIndex=0,$.transitionListener=null,$.touchMoveListener=null,$.activeSlide=null,$.indexCurrent=null,$.firstRenderTimeout=null,$.setRootNode=function(ue){$.rootNode=ue},$.setContainerNode=function(ue){$.containerNode=ue},$.setActiveSlide=function(ue){$.activeSlide=ue,$.updateHeight()},$.handleSwipeStart=function(ue){var Je=$.props.axis,Ke=q(ue.touches[0],Je);$.viewLength=$.rootNode.getBoundingClientRect()[G.length[Je]],$.startX=Ke.pageX,$.lastX=Ke.pageX,$.vx=0,$.startY=Ke.pageY,$.isSwiping=void 0,$.started=!0;var ke=window.getComputedStyle($.containerNode),ze=ke.getPropertyValue("-webkit-transform")||ke.getPropertyValue("transform");if(ze&&ze!=="none"){var nt=ze.split("(")[1].split(")")[0].split(","),_t=window.getComputedStyle($.rootNode),Ue=q({pageX:parseInt(nt[4],10),pageY:parseInt(nt[5],10)},Je);$.startIndex=-Ue.pageX/($.viewLength-parseInt(_t.paddingLeft,10)-parseInt(_t.paddingRight,10))||0}},$.handleSwipeMove=function(ue){if(!$.started){$.handleTouchStart(ue);return}if(!(U!==null&&U!==$.rootNode)){var Je=$.props,Ke=Je.axis,ke=Je.children,ze=Je.ignoreNativeScroll,nt=Je.onSwitching,_t=Je.resistance,Ue=q(ue.touches[0],Ke);if($.isSwiping===void 0){var Ee=Math.abs(Ue.pageX-$.startX),_e=Math.abs(Ue.pageY-$.startY),$e=Ee>_e&&Ee>k.constant.UNCERTAINTY_THRESHOLD;if(!_t&&(Ke==="y"||Ke==="y-reverse")&&($.indexCurrent===0&&$.startX<Ue.pageX||$.indexCurrent===S.Children.count($.props.children)-1&&$.startX>Ue.pageX)){$.isSwiping=!1;return}if(Ee>_e&&ue.preventDefault(),$e===!0||_e>k.constant.UNCERTAINTY_THRESHOLD){$.isSwiping=$e,$.startX=Ue.pageX;return}}if($.isSwiping===!0){ue.preventDefault(),$.vx=$.vx*.5+(Ue.pageX-$.lastX)*.5,$.lastX=Ue.pageX;var be=(0,k.computeIndex)({children:ke,resistance:_t,pageX:Ue.pageX,startIndex:$.startIndex,startX:$.startX,viewLength:$.viewLength}),Me=be.index,Ge=be.startX;if(U===null&&!ze){var ut=B(ue.target,$.rootNode),ht=Z({domTreeShapes:ut,startX:$.startX,pageX:Ue.pageX,axis:Ke});if(ht)return}Ge?$.startX=Ge:U===null&&(U=$.rootNode),$.setIndexCurrent(Me);var Lt=function(){nt&&nt(Me,"move")};($.state.displaySameSlide||!$.state.isDragging)&&$.setState({displaySameSlide:!1,isDragging:!0},Lt),Lt()}}},$.handleSwipeEnd=function(){if(U=null,!!$.started&&($.started=!1,$.isSwiping===!0)){var ue=$.state.indexLatest,Je=$.indexCurrent,Ke=ue-Je,ke;Math.abs($.vx)>$.props.threshold?$.vx>0?ke=Math.floor(Je):ke=Math.ceil(Je):Math.abs(Ke)>$.props.hysteresis?ke=Ke>0?Math.floor(Je):Math.ceil(Je):ke=ue;var ze=S.Children.count($.props.children)-1;ke<0?ke=0:ke>ze&&(ke=ze),$.setIndexCurrent(ke),$.setState({indexLatest:ke,isDragging:!1},function(){$.props.onSwitching&&$.props.onSwitching(ke,"end"),$.props.onChangeIndex&&ke!==ue&&$.props.onChangeIndex(ke,ue,{reason:"swipe"}),Je===ue&&$.handleTransitionEnd()})}},$.handleTouchStart=function(ue){$.props.onTouchStart&&$.props.onTouchStart(ue),$.handleSwipeStart(ue)},$.handleTouchEnd=function(ue){$.props.onTouchEnd&&$.props.onTouchEnd(ue),$.handleSwipeEnd(ue)},$.handleMouseDown=function(ue){$.props.onMouseDown&&$.props.onMouseDown(ue),ue.persist(),$.handleSwipeStart(ce(ue))},$.handleMouseUp=function(ue){$.props.onMouseUp&&$.props.onMouseUp(ue),$.handleSwipeEnd(ce(ue))},$.handleMouseLeave=function(ue){$.props.onMouseLeave&&$.props.onMouseLeave(ue),$.started&&$.handleSwipeEnd(ce(ue))},$.handleMouseMove=function(ue){$.props.onMouseMove&&$.props.onMouseMove(ue),$.started&&$.handleSwipeMove(ce(ue))},$.handleScroll=function(ue){if($.props.onScroll&&$.props.onScroll(ue),ue.target===$.rootNode){if($.ignoreNextScrollEvents){$.ignoreNextScrollEvents=!1;return}var Je=$.state.indexLatest,Ke=Math.ceil(ue.target.scrollLeft/ue.target.clientWidth)+Je;$.ignoreNextScrollEvents=!0,ue.target.scrollLeft=0,$.props.onChangeIndex&&Ke!==Je&&$.props.onChangeIndex(Ke,Je,{reason:"focus"})}},$.updateHeight=function(){if($.activeSlide!==null){var ue=$.activeSlide.children[0];ue!==void 0&&ue.offsetHeight!==void 0&&$.state.heightLatest!==ue.offsetHeight&&$.setState({heightLatest:ue.offsetHeight})}},$.state={indexLatest:fe.index,isDragging:!1,renderOnlyActive:!fe.disableLazyLoading,heightLatest:0,displaySameSlide:!0},$.setIndexCurrent(fe.index),$}return(0,d.default)(De,[{key:"componentDidMount",value:function(){var $=this;this.transitionListener=P(this.containerNode,"transitionend",function(ue){ue.target===$.containerNode&&$.handleTransitionEnd()}),this.touchMoveListener=P(this.rootNode,"touchmove",function(ue){$.props.disabled||$.handleSwipeMove(ue)},{passive:!1}),this.props.disableLazyLoading||(this.firstRenderTimeout=setTimeout(function(){$.setState({renderOnlyActive:!1})},0)),this.props.action&&this.props.action({updateHeight:this.updateHeight})}},{key:"UNSAFE_componentWillReceiveProps",value:function($){var ue=$.index;typeof ue=="number"&&ue!==this.props.index&&(this.setIndexCurrent(ue),this.setState({displaySameSlide:(0,k.getDisplaySameSlide)(this.props,$),indexLatest:ue}))}},{key:"componentWillUnmount",value:function(){this.transitionListener.remove(),this.touchMoveListener.remove(),clearTimeout(this.firstRenderTimeout)}},{key:"getSwipeableViewsContext",value:function(){var $=this;return{slideUpdateHeight:function(){$.updateHeight()}}}},{key:"setIndexCurrent",value:function($){if(!this.props.animateTransitions&&this.indexCurrent!==$&&this.handleTransitionEnd(),this.indexCurrent=$,this.containerNode){var ue=this.props.axis,Je=G.transform[ue]($*100);this.containerNode.style.WebkitTransform=Je,this.containerNode.style.transform=Je}}},{key:"handleTransitionEnd",value:function(){this.props.onTransitionEnd&&(this.state.displaySameSlide||this.state.isDragging||this.props.onTransitionEnd())}},{key:"render",value:function(){var $=this,ue=this.props;ue.action;var Je=ue.animateHeight,Ke=ue.animateTransitions,ke=ue.axis,ze=ue.children,nt=ue.containerStyle,_t=ue.disabled;ue.disableLazyLoading;var Ue=ue.enableMouseEvents;ue.hysteresis,ue.ignoreNativeScroll,ue.index,ue.onChangeIndex,ue.onSwitching,ue.onTransitionEnd,ue.resistance;var Ee=ue.slideStyle,_e=ue.slideClassName,$e=ue.springConfig,be=ue.style;ue.threshold;var Me=(0,i.default)(ue,["action","animateHeight","animateTransitions","axis","children","containerStyle","disabled","disableLazyLoading","enableMouseEvents","hysteresis","ignoreNativeScroll","index","onChangeIndex","onSwitching","onTransitionEnd","resistance","slideStyle","slideClassName","springConfig","style","threshold"]),Ge=this.state,ut=Ge.displaySameSlide,ht=Ge.heightLatest,Lt=Ge.indexLatest,zt=Ge.isDragging,Rt=Ge.renderOnlyActive,St=_t?{}:{onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd},Et=!_t&&Ue?{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave,onMouseMove:this.handleMouseMove}:{},Ct=(0,r.default)({},O.slide,Ee),Kt,Nt;if(zt||!Ke||ut)Kt="all 0s ease 0s",Nt="all 0s ease 0s";else if(Kt=F("transform",$e),Nt=F("-webkit-transform",$e),ht!==0){var pn=", ".concat(F("height",$e));Kt+=pn,Nt+=pn}var Pn={height:null,WebkitFlexDirection:G.flexDirection[ke],flexDirection:G.flexDirection[ke],WebkitTransition:Nt,transition:Kt};if(!Rt){var vn=G.transform[ke](this.indexCurrent*100);Pn.WebkitTransform=vn,Pn.transform=vn}return Je&&(Pn.height=ht),S.createElement(J.Provider,{value:this.getSwipeableViewsContext()},S.createElement("div",(0,r.default)({ref:this.setRootNode,style:(0,r.default)({},G.root[ke],be)},Me,St,Et,{onScroll:this.handleScroll}),S.createElement("div",{ref:this.setContainerNode,style:(0,r.default)({},Pn,O.container,nt),className:"react-swipeable-view-container"},S.Children.map(ze,function(or,Wr){if(Rt&&Wr!==Lt)return null;var Ln,Xn=!0;return Wr===Lt&&(Xn=!1,Je&&(Ln=$.setActiveSlide,Ct.overflowY="hidden")),S.createElement("div",{ref:Ln,style:Ct,className:_e,"aria-hidden":Xn,"data-swipeable":"true"},or)}))))}}]),De}(S.Component);Y.displayName="ReactSwipableView",Y.propTypes={},Y.defaultProps={animateHeight:!1,animateTransitions:!0,axis:"x",disabled:!1,disableLazyLoading:!1,enableMouseEvents:!1,hysteresis:.6,ignoreNativeScroll:!1,index:0,threshold:5,springConfig:{duration:"0.35s",easeFunction:"cubic-bezier(0.15, 0.3, 0.25, 1)",delay:"0s"},resistance:!1};var he=Y;return Bs.default=he,Bs}(function(e){var t=YO;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"SwipeableViewsContext",{enumerable:!0,get:function(){return r.SwipeableViewsContext}});var r=t(are())})(KO);const e4=ef(KO),sre="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAOkSURBVHgBvVZvbFNVFP+d+17/rYUV0aEmSP/MDmVEZRAcOFn9YIaZ+sVJZhx+UzRBGcRh0GhiiCHGGD+phPjRGIJRiKhJA0ktjCX6waHRbGGVNxYVjaNjlr3S9b3j6aslbVmAhcIvae4759x7fvecc++5BW4S6ErGjc3NC2e02Taw1i0z7xbVyrKNmWZI8R8y/iJCQt15VyKZTBbmRdQZCgVtt3oFRNtEDOLa8I/QH1Jk706OGEatUatVdMSa+6HTl0LSJaIX144G2fcqhupbdusiGp/MDFYaL0X06JIl/tyiwIdgbEZ9sD81mu6VkYuCKmvNRv++OpIUsWlDS2R/WXBS93As8hYRbUXdQSuWLb4lK2kcos7loZDN2mncOEzZ5mxEZ1vbXq5U32Y/Vq/xON8eD8G2gb0fTSPW4kb7eg/efH0K2ayNhzo86Hnajx39GRQKjNvv0LCtfyF2v30elsV4fssCHP7KRHpstugqqHyu7YoV1pSp3eLcNFkc6wgECOfOWcjlGE/1NKCtzY3Hn/A586JRF+5/wA2/v7TD1lYX2td5EA5reGdPEF1dXuQv2hVBcbeSA7C2LH6yL4vXBjKYPs84eiSHN3ZNoalJc3Z8PJXDg+2laPN5rspNNluSd+5qRMtyF17emsHEhFUxg+4pnrordofHun0Y/jGPAwdmnChaV7rgdlcv0f6/jUuX6hg3LIydmq114ykS/X2Z1kdwuciJZN16LyJRHQM7Gx1b/BEvlKqeHwiUFJ99egH3rnDhxZcWVE8g/KnLMCS/J6sWSu79UqN4vNQYvvh8xhlXSZ26Nvrw9WHTkXe82igNBDh7ttTiEgkTunjc1OvHyeE8BgcvlhwyftBCty2+IJ+9lUThiAtDJ3Lw+hQmxgvY+3HWSZ9hFJz0fPuNCa+X4Gsg55QdP5Z3DsaRRA4nxHk4pCP9WwFnzpTqxDb2OMne0BJNSTk7cGNgSCsKO8nVLdoiwxTqj7wiK178cIiOjo39KhV7AXWEZGiaiZ8pPxlV5zQei91nU+Egg0K4PhhC9Oyx0fSlp6LqPTImJ/+KNgUPWkxSaqzGvMEmlPauyhWeS6VPn6q0zP3CzrPREniYSR0Sgg+ShjFnrfW5l2qdNYp/5cK8L/3KsGxbl7vDipTFjHGTcj99P/L7JK6COYls5p5ysMR8UhpvX2ok/TOuA5elbq3883FrnBFD8dK/991oegB1gKpVNCgVVoQUE8XrRXJT8R/r3EAl3h0uxAAAAABJRU5ErkJggg==",lre="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAM+SURBVHgBrZZLaBNRFIb/cydpagl9+UgFQauglYoVKlarSPBBjdha3IgLN4JuxCLVlSD1gagoaEXBhRtXihsfNcaq0YhYbcVFQKGKr4Vipa2laaHtJDPHk2hq0mbSNOSDCfeeP+f+9zX3DmEKhtyr3YZmbiVgDcAVAM36Jw0QOGiCOk3AW+rvepGuHUpnwJrRwiA3MkAa6mDwySL/m4cWejJcXV0QKlanRWpCFijCRaedWsjXGUqM2xIrwxtrXIPgdnGvQpYY4CKMFOgT4+MjYk9NYUjnDilWIktkvVpK/J0nUmnjIxoe4+Nim8aEfcx0jwk9sgmGpYeVJOvHQKOIvxlqZ4n/9ROr7NiIBjes9IDUA4u/+Fjj/cWPur6mUgfcqxfoKqy5nr79jDTEjPSbM16O3Vpcaw46kkSZihMyFS3IATTSjvU2hefQNegPyhHpLo33oK3Q39WAHKFsGrbGSnkG8ho/wb7uR6xqGCqr7W2FDYyaxEDMaObo3YKm/m9WSY3nR3YrUvOQIayZfTaZoyoxS3Zf2h9Il0iK9sgp4EammNSrxKRkUkMG3iG3zFapomSDEzkmatQ3yYhQhhzCjIHoyfBBnlmJQp+RJ9tav2qZCDNIUFbyCnmKEwPS8SDpj3FO3pnD8eBrcyaaI8sxyGrRx23+L5gGjadHFpCDUpwg5lk51eGNV6+b87E3XI0htksvtMuYJsqhLqUU2Lyh7JsRkGLgjFGB8+El4xoxPBXeLceQITsujB2TLV8/MU7MHbcPOYOxs25Z2yZ3hNQzizbuQ9MPdHsC31KJq26dLC/r2XdFixR5UqdHPLebnQ/H76MK7+ZWsPWtKjvHpzRuN0zzPZTmJIPLZJF3Sp/d9vAczP9+CvawKzkHaL3TnH8wNrJ4cG5bfUEhjb2kv7tm2kTN5v08gvzRhXGXd6N2x1pfE4WSjKKU321wObTR6OW1DFmh4Ordg9KBhmC+ctTdOEi//isJfN1+71dEaWtlAVuRFSZ65ly7FAk5ahNNolh+bi3x1m0Rw6NSrEVGcEAW8nh3/ZNAKpWmSq9sq6sy2dzFSq4TpirJiB3C8u3QKz8fFPMrKd/p3vaoI107fwAffx5XsvhKSgAAAABJRU5ErkJggg==",cre=al({palette:{primary:{main:"#EEF1EE"}}}),EI=({sns:e,text:t,imgSrc:r})=>{const[,i]=sf(Eg);return ne(gc,{children:ne(Pg,{theme:cre,children:en(nl,{variant:"contained",disableElevation:!0,sx:{boxShadow:"0 1px 3px rgba(0,0,0,0.12)",backgroundColor:e?"#F7E600":"#FFFFFF",color:e?"#3A1D1D":"black",width:"21rem",borderRadius:"10px",p:"0.6rem",display:"flex",justifyContent:"space-around",fontSize:"1rem",fontWeight:500,margin:"0.6rem"},onClick:()=>i(c=>({...c,first:!0})),children:[ne("img",{src:r}),t]})})})},ure=({introduction:e,activeStep:t,handleStepChange:r})=>{const i=Hi();return ne(gc,{children:en(js,{container:!0,alignItems:"center",justifyContent:"center",children:[ne(js,{item:!0,children:ne(e4,{axis:i.direction==="rtl"?"x-reverse":"x",index:t,onChangeIndex:r,enableMouseEvents:!0,children:e.map((c,d)=>en(js,{item:!0,sx:{pt:"2rem",pb:"2rem"},children:[en(Nr,{variant:"h4",align:"center",sx:{fontWeight:600},children:[ne("span",{dangerouslySetInnerHTML:{__html:c.mainTextLine1}}),ne("br",{}),ne("span",{dangerouslySetInnerHTML:{__html:c.mainTextLine2}})]}),ne(Nr,{variant:"subtitle1",align:"center",sx:{color:"#A2A2A2",pt:"0.7rem"},children:c.subText})]},d))})}),en(js,{item:!0,children:[ne(EI,{sns:!1,text:"Google  ",imgSrc:lre}),ne(EI,{sns:!0,text:"Kakao  ",imgSrc:sre})]})]})})},dre="/assets/loginImg1-bcb7d760.png",hre="/assets/loginImg2-3b7d0d5f.png",fre="/assets/loginImg3-1a7f5184.png",t4=[{src:dre,alt:"loginImg1",css:"6rem"},{src:hre,alt:"loginImg2"},{src:fre,alt:"loginImg3"}],pre=({activeStep:e,handleStepChange:t})=>{const r=Hi();return ne(gc,{children:ne(e4,{axis:r.direction==="rtl"?"x-reverse":"x",index:e,onChangeIndex:t,enableMouseEvents:!0,style:{width:"100%"},children:t4.map((i,c)=>ne("div",{style:{overflow:"hidden",display:"flex",justifyContent:"center"},children:Math.abs(e-c)<=2?ne(Rn,{component:"img",src:i.src,height:"calc( 100% )",overflow:"hidden",sx:{position:"relative",top:i.css}}):null},c))})})},TI=[{mainTextLine1:"<span class='pointText'></span> ",mainTextLine2:"   ",subText:"   !"},{mainTextLine1:" ",mainTextLine2:" <span class='pointText'> </span>",subText:"  !"},{mainTextLine1:"<span class='pointText'></span>  ",mainTextLine2:"  ",subText:"   !"}];function mre(){const[e,t]=H.useState(0),r=t4.length,i=c=>{t(c)};return en(js,{container:!0,alignItems:"center",justifyContent:"center",maxWidth:"414px",margin:"0 auto",height:"100vh",padding:"0rem 2rem 1rem 2rem",children:[ne(kO,{}),ne(Cg,{styles:{body:{backgroundColor:"#EFF0F2"},".globalContainer .MuiBox-root":{padding:0}}}),ne(js,{item:!0,width:"100%",sx:{margin:"0 auto"},children:ne(pre,{introduction:TI,activeStep:e,handleStepChange:i})}),en(js,{item:!0,sx:{pt:"1rem",margin:0},children:[ne(js,{item:!0,children:ne(Nee,{steps:r,position:"static",activeStep:e,backButton:null,nextButton:null,sx:{alignItems:"center",justifyContent:"center",dotActiveStyle:{backgroundColor:"#1976d2"},dotStyle:{mx:1}}})}),ne(js,{item:!0,children:ne(ure,{introduction:TI,activeStep:e,handleStepChange:i})})]})]})}var bu=(e=>(e.Daily="",e.Metting="",e.Commercial="",e.Information="",e.Event="",e.Gift="",e))(bu||{});const sv=[{id:bu.Daily,selected:!1,fn_print:function(){console.log(this.id)}},{id:bu.Metting,selected:!1,fn_print:function(){console.log(this.id)}},{id:bu.Commercial,selected:!1,fn_print:function(){console.log(this.id)}},{id:bu.Information,selected:!1,fn_print:function(){console.log(this.id)}},{id:bu.Event,selected:!1,fn_print:function(){console.log(this.id)}},{id:bu.Gift,selected:!1,fn_print:function(){console.log(this.id)}}],n4=({activeColor:e,handleButtonClick:t,category:r})=>ne(nl,{variant:"contained",color:e,href:"#contained-buttons",sx:{width:"100%",height:"100%",borderRadius:4,fontWeight:600},onClick:t,style:{boxShadow:"0 1px 3px rgba(0,0,0,0.12)",fontSize:20},children:r.id}),gre=al({palette:{primary:{main:"#EEF1EE"},secondary:{main:"#00A651"}}}),yre=({category:e})=>{const[t,r]=H.useState("primary");return ne(Pg,{theme:gre,children:ne(n4,{activeColor:t,handleButtonClick:()=>{r(t==="primary"?"secondary":"primary")},category:e})})},_re=()=>{const[,e]=sf(Eg);return ne(gc,{children:en(Zl,{container:!0,direction:"column",justifyContent:"space-around",alignItems:"center",maxWidth:"414px",minHeight:"667px",margin:"0 auto",padding:"0rem 2rem 0rem 2rem",spacing:0,height:"100vh",children:[ne(Cg,{styles:{".globalContainer .MuiBox-root":{padding:0}}}),en(Zl,{sx:{pt:"6rem",pb:"3rem",width:"100%","@media (max-width: 375px)":{pt:"4.5rem",pb:"2rem"}},children:[en(Nr,{variant:"h5",sx:{fontWeight:600,margin:0},children:["  ",ne("br",{}),"  ",ne("br",{}),"   ?"]}),ne(Nr,{variant:"subtitle1",sx:{color:"#A2A2A2",pt:"0.7rem"},children:"   1   ."})]}),ne(Rn,{children:ne(Zl,{margin:"0 auto",children:ne(Zl,{container:!0,rowSpacing:3,columnSpacing:2,margin:"0 auto",children:sv.map(t=>ne(Zl,{xs:6,sx:{height:"7rem","@media (max-width: 375px)":{height:"5rem"}},children:ne(yre,{category:t})},sv.indexOf(t)))})})}),ne(Zl,{sx:{width:"100%",padding:"1.5rem 0rem 1.5rem 0rem"},children:ne(XO,{text:" ",onClick:()=>e(t=>({...t,role:"USER"}))})})]})})},vre=H.createContext({color:"currentColor",size:"1em",weight:"regular",mirrored:!1});var xre=Object.defineProperty,lv=Object.getOwnPropertySymbols,r4=Object.prototype.hasOwnProperty,i4=Object.prototype.propertyIsEnumerable,CI=(e,t,r)=>t in e?xre(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,MI=(e,t)=>{for(var r in t||(t={}))r4.call(t,r)&&CI(e,r,t[r]);if(lv)for(var r of lv(t))i4.call(t,r)&&CI(e,r,t[r]);return e},AI=(e,t)=>{var r={};for(var i in e)r4.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&lv)for(var i of lv(e))t.indexOf(i)<0&&i4.call(e,i)&&(r[i]=e[i]);return r};const Ku=H.forwardRef((e,t)=>{const r=e,{alt:i,color:c,size:d,weight:y,mirrored:a,children:b,weights:S}=r,k=AI(r,["alt","color","size","weight","mirrored","children","weights"]),P=H.useContext(vre),{color:O="currentColor",size:G,weight:F="regular",mirrored:q=!1}=P,ce=AI(P,["color","size","weight","mirrored"]);return Qe.createElement("svg",MI(MI({ref:t,xmlns:"http://www.w3.org/2000/svg",width:d??G,height:d??G,fill:c??O,viewBox:"0 0 256 256",transform:a||q?"scale(-1, 1)":void 0},ce),k),!!i&&Qe.createElement("title",null,i),b,S.get(y??F))});Ku.displayName="IconBase";var bre=Object.defineProperty,wre=Object.defineProperties,Sre=Object.getOwnPropertyDescriptors,kI=Object.getOwnPropertySymbols,Ere=Object.prototype.hasOwnProperty,Tre=Object.prototype.propertyIsEnumerable,RI=(e,t,r)=>t in e?bre(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Cre=(e,t)=>{for(var r in t||(t={}))Ere.call(t,r)&&RI(e,r,t[r]);if(kI)for(var r of kI(t))Tre.call(t,r)&&RI(e,r,t[r]);return e},Mre=(e,t)=>wre(e,Sre(t));const Are=new Map([["bold",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M225.29,165.93C216.61,151,212,129.57,212,104a84,84,0,0,0-168,0c0,25.58-4.59,47-13.27,61.93A20.08,20.08,0,0,0,30.66,186,19.77,19.77,0,0,0,48,196H208a19.77,19.77,0,0,0,17.31-10A20.08,20.08,0,0,0,225.29,165.93ZM54.66,172C63.51,154,68,131.14,68,104a60,60,0,0,1,120,0c0,27.13,4.48,50,13.33,68ZM172,224a12,12,0,0,1-12,12H96a12,12,0,0,1,0-24h64A12,12,0,0,1,172,224Z"}))],["duotone",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M208,192H48a8,8,0,0,1-6.88-12C47.71,168.6,56,139.81,56,104a72,72,0,0,1,144,0c0,35.82,8.3,64.6,14.9,76A8,8,0,0,1,208,192Z",opacity:"0.2"}),Qe.createElement("path",{d:"M168,224a8,8,0,0,1-8,8H96a8,8,0,1,1,0-16h64A8,8,0,0,1,168,224Zm53.85-32A15.8,15.8,0,0,1,208,200H48a16,16,0,0,1-13.8-24.06C39.75,166.38,48,139.34,48,104a80,80,0,1,1,160,0c0,35.33,8.26,62.38,13.81,71.94A15.89,15.89,0,0,1,221.84,192ZM208,184c-7.73-13.27-16-43.95-16-80a64,64,0,1,0-128,0c0,36.06-8.28,66.74-16,80Z"}))],["fill",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M168,224a8,8,0,0,1-8,8H96a8,8,0,1,1,0-16h64A8,8,0,0,1,168,224Zm53.81-48.06C216.25,166.38,208,139.33,208,104a80,80,0,1,0-160,0c0,35.34-8.26,62.38-13.81,71.94A16,16,0,0,0,48,200H208a16,16,0,0,0,13.8-24.06Z"}))],["light",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M166,224a6,6,0,0,1-6,6H96a6,6,0,0,1,0-12h64A6,6,0,0,1,166,224Zm54.11-33a13.83,13.83,0,0,1-12.1,7H48a14,14,0,0,1-12.06-21.06C41.59,167.2,50,139.74,50,104a78,78,0,1,1,156,0c0,35.73,8.42,63.2,14.08,72.94A13.9,13.9,0,0,1,220.11,191Zm-10.41-8C202.13,170,194,139.68,194,104a66,66,0,1,0-132,0c0,35.69-8.14,66-15.71,79a2,2,0,0,0,0,2,1.9,1.9,0,0,0,1.7,1H208a1.9,1.9,0,0,0,1.7-1A2,2,0,0,0,209.7,183Z"}))],["regular",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M168,224a8,8,0,0,1-8,8H96a8,8,0,1,1,0-16h64A8,8,0,0,1,168,224Zm53.85-32A15.8,15.8,0,0,1,208,200H48a16,16,0,0,1-13.8-24.06C39.75,166.38,48,139.34,48,104a80,80,0,1,1,160,0c0,35.33,8.26,62.38,13.81,71.94A15.89,15.89,0,0,1,221.84,192ZM208,184c-7.73-13.27-16-43.95-16-80a64,64,0,1,0-128,0c0,36.06-8.28,66.74-16,80Z"}))],["thin",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M164,224a4,4,0,0,1-4,4H96a4,4,0,0,1,0-8h64A4,4,0,0,1,164,224Zm54.38-34A11.84,11.84,0,0,1,208,196H48A12,12,0,0,1,37.65,178C43.42,168,52,140.13,52,104a76,76,0,1,1,152,0c0,36.13,8.59,64,14.36,73.95A11.92,11.92,0,0,1,218.38,190Zm-6.95-8C204,169.17,196,139.31,196,104a68,68,0,1,0-136,0c0,35.32-8,65.17-15.44,78a4,4,0,0,0,0,4A3.91,3.91,0,0,0,48,188H208a3.91,3.91,0,0,0,3.44-2A4,4,0,0,0,211.43,182Z"}))]]),o4=H.forwardRef((e,t)=>Qe.createElement(Ku,Mre(Cre({ref:t},e),{weights:Are})));o4.displayName="BellSimple";var kre=Object.defineProperty,Rre=Object.defineProperties,Ire=Object.getOwnPropertyDescriptors,II=Object.getOwnPropertySymbols,Pre=Object.prototype.hasOwnProperty,Lre=Object.prototype.propertyIsEnumerable,PI=(e,t,r)=>t in e?kre(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Dre=(e,t)=>{for(var r in t||(t={}))Pre.call(t,r)&&PI(e,r,t[r]);if(II)for(var r of II(t))Lre.call(t,r)&&PI(e,r,t[r]);return e},zre=(e,t)=>Rre(e,Ire(t));const Ore=new Map([["bold",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M168.49,199.51a12,12,0,0,1-17,17l-80-80a12,12,0,0,1,0-17l80-80a12,12,0,0,1,17,17L97,128Z"}))],["duotone",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M160,48V208L80,128Z",opacity:"0.2"}),Qe.createElement("path",{d:"M163.06,40.61a8,8,0,0,0-8.72,1.73l-80,80a8,8,0,0,0,0,11.32l80,80A8,8,0,0,0,168,208V48A8,8,0,0,0,163.06,40.61ZM152,188.69,91.31,128,152,67.31Z"}))],["fill",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M168,48V208a8,8,0,0,1-13.66,5.66l-80-80a8,8,0,0,1,0-11.32l80-80A8,8,0,0,1,168,48Z"}))],["light",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M164.24,203.76a6,6,0,1,1-8.48,8.48l-80-80a6,6,0,0,1,0-8.48l80-80a6,6,0,0,1,8.48,8.48L88.49,128Z"}))],["regular",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M165.66,202.34a8,8,0,0,1-11.32,11.32l-80-80a8,8,0,0,1,0-11.32l80-80a8,8,0,0,1,11.32,11.32L91.31,128Z"}))],["thin",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M162.83,205.17a4,4,0,0,1-5.66,5.66l-80-80a4,4,0,0,1,0-5.66l80-80a4,4,0,1,1,5.66,5.66L85.66,128Z"}))]]),hT=H.forwardRef((e,t)=>Qe.createElement(Ku,zre(Dre({ref:t},e),{weights:Ore})));hT.displayName="CaretLeft";var Fre=Object.defineProperty,Bre=Object.defineProperties,Nre=Object.getOwnPropertyDescriptors,LI=Object.getOwnPropertySymbols,$re=Object.prototype.hasOwnProperty,Ure=Object.prototype.propertyIsEnumerable,DI=(e,t,r)=>t in e?Fre(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Vre=(e,t)=>{for(var r in t||(t={}))$re.call(t,r)&&DI(e,r,t[r]);if(LI)for(var r of LI(t))Ure.call(t,r)&&DI(e,r,t[r]);return e},jre=(e,t)=>Bre(e,Nre(t));const Gre=new Map([["bold",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M128,76a52,52,0,1,0,52,52A52.06,52.06,0,0,0,128,76Zm0,80a28,28,0,1,1,28-28A28,28,0,0,1,128,156Zm113.86-49.57A12,12,0,0,0,236,98.34L208.21,82.49l-.11-31.31a12,12,0,0,0-4.25-9.12,116,116,0,0,0-38-21.41,12,12,0,0,0-9.68.89L128,37.27,99.83,21.53a12,12,0,0,0-9.7-.9,116.06,116.06,0,0,0-38,21.47,12,12,0,0,0-4.24,9.1l-.14,31.34L20,98.35a12,12,0,0,0-5.85,8.11,110.7,110.7,0,0,0,0,43.11A12,12,0,0,0,20,157.66l27.82,15.85.11,31.31a12,12,0,0,0,4.25,9.12,116,116,0,0,0,38,21.41,12,12,0,0,0,9.68-.89L128,218.73l28.14,15.74a12,12,0,0,0,9.7.9,116.06,116.06,0,0,0,38-21.47,12,12,0,0,0,4.24-9.1l.14-31.34,27.81-15.81a12,12,0,0,0,5.85-8.11A110.7,110.7,0,0,0,241.86,106.43Zm-22.63,33.18-26.88,15.28a11.94,11.94,0,0,0-4.55,4.59c-.54,1-1.11,1.93-1.7,2.88a12,12,0,0,0-1.83,6.31L184.13,199a91.83,91.83,0,0,1-21.07,11.87l-27.15-15.19a12,12,0,0,0-5.86-1.53h-.29c-1.14,0-2.3,0-3.44,0a12.08,12.08,0,0,0-6.14,1.51L93,210.82A92.27,92.27,0,0,1,71.88,199l-.11-30.24a12,12,0,0,0-1.83-6.32c-.58-.94-1.16-1.91-1.7-2.88A11.92,11.92,0,0,0,63.7,155L36.8,139.63a86.53,86.53,0,0,1,0-23.24l26.88-15.28a12,12,0,0,0,4.55-4.58c.54-1,1.11-1.94,1.7-2.89a12,12,0,0,0,1.83-6.31L71.87,57A91.83,91.83,0,0,1,92.94,45.17l27.15,15.19a11.92,11.92,0,0,0,6.15,1.52c1.14,0,2.3,0,3.44,0a12.08,12.08,0,0,0,6.14-1.51L163,45.18A92.27,92.27,0,0,1,184.12,57l.11,30.24a12,12,0,0,0,1.83,6.32c.58.94,1.16,1.91,1.7,2.88A11.92,11.92,0,0,0,192.3,101l26.9,15.33A86.53,86.53,0,0,1,219.23,139.61Z"}))],["duotone",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M230.1,108.76,198.25,90.62c-.64-1.16-1.31-2.29-2-3.41l-.12-36A104.61,104.61,0,0,0,162,32L130,49.89c-1.34,0-2.69,0-4,0L94,32A104.58,104.58,0,0,0,59.89,51.25l-.16,36c-.7,1.12-1.37,2.26-2,3.41l-31.84,18.1a99.15,99.15,0,0,0,0,38.46l31.85,18.14c.64,1.16,1.31,2.29,2,3.41l.12,36A104.61,104.61,0,0,0,94,224l32-17.87c1.34,0,2.69,0,4,0L162,224a104.58,104.58,0,0,0,34.08-19.25l.16-36c.7-1.12,1.37-2.26,2-3.41l31.84-18.1A99.15,99.15,0,0,0,230.1,108.76ZM128,168a40,40,0,1,1,40-40A40,40,0,0,1,128,168Z",opacity:"0.2"}),Qe.createElement("path",{d:"M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Zm109.94-52.79a8,8,0,0,0-3.89-5.4l-29.83-17-.12-33.62a8,8,0,0,0-2.83-6.08,111.91,111.91,0,0,0-36.72-20.67,8,8,0,0,0-6.46.59L128,41.85,97.88,25a8,8,0,0,0-6.47-.6A111.92,111.92,0,0,0,54.73,45.15a8,8,0,0,0-2.83,6.07l-.15,33.65-29.83,17a8,8,0,0,0-3.89,5.4,106.47,106.47,0,0,0,0,41.56,8,8,0,0,0,3.89,5.4l29.83,17,.12,33.63a8,8,0,0,0,2.83,6.08,111.91,111.91,0,0,0,36.72,20.67,8,8,0,0,0,6.46-.59L128,214.15,158.12,231a7.91,7.91,0,0,0,3.9,1,8.09,8.09,0,0,0,2.57-.42,112.1,112.1,0,0,0,36.68-20.73,8,8,0,0,0,2.83-6.07l.15-33.65,29.83-17a8,8,0,0,0,3.89-5.4A106.47,106.47,0,0,0,237.94,107.21Zm-15,34.91-28.57,16.25a8,8,0,0,0-3,3c-.58,1-1.19,2.06-1.81,3.06a7.94,7.94,0,0,0-1.22,4.21l-.15,32.25a95.89,95.89,0,0,1-25.37,14.3L134,199.13a8,8,0,0,0-3.91-1h-.19c-1.21,0-2.43,0-3.64,0a8.1,8.1,0,0,0-4.1,1l-28.84,16.1A96,96,0,0,1,67.88,201l-.11-32.2a8,8,0,0,0-1.22-4.22c-.62-1-1.23-2-1.8-3.06a8.09,8.09,0,0,0-3-3.06l-28.6-16.29a90.49,90.49,0,0,1,0-28.26L61.67,97.63a8,8,0,0,0,3-3c.58-1,1.19-2.06,1.81-3.06a7.94,7.94,0,0,0,1.22-4.21l.15-32.25a95.89,95.89,0,0,1,25.37-14.3L122,56.87a8,8,0,0,0,4.1,1c1.21,0,2.43,0,3.64,0a8,8,0,0,0,4.1-1l28.84-16.1A96,96,0,0,1,188.12,55l.11,32.2a8,8,0,0,0,1.22,4.22c.62,1,1.23,2,1.8,3.06a8.09,8.09,0,0,0,3,3.06l28.6,16.29A90.49,90.49,0,0,1,222.9,142.12Z"}))],["fill",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M237.94,107.21a8,8,0,0,0-3.89-5.4l-29.83-17-.12-33.62a8,8,0,0,0-2.83-6.08,111.91,111.91,0,0,0-36.72-20.67,8,8,0,0,0-6.46.59L128,41.85,97.88,25a8,8,0,0,0-6.47-.6A111.92,111.92,0,0,0,54.73,45.15a8,8,0,0,0-2.83,6.07l-.15,33.65-29.83,17a8,8,0,0,0-3.89,5.4,106.47,106.47,0,0,0,0,41.56,8,8,0,0,0,3.89,5.4l29.83,17,.12,33.63a8,8,0,0,0,2.83,6.08,111.91,111.91,0,0,0,36.72,20.67,8,8,0,0,0,6.46-.59L128,214.15,158.12,231a7.91,7.91,0,0,0,3.9,1,8.09,8.09,0,0,0,2.57-.42,112.1,112.1,0,0,0,36.68-20.73,8,8,0,0,0,2.83-6.07l.15-33.65,29.83-17a8,8,0,0,0,3.89-5.4A106.47,106.47,0,0,0,237.94,107.21ZM128,168a40,40,0,1,1,40-40A40,40,0,0,1,128,168Z"}))],["light",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M128,82a46,46,0,1,0,46,46A46.06,46.06,0,0,0,128,82Zm0,80a34,34,0,1,1,34-34A34,34,0,0,1,128,162Zm108-54.4a6,6,0,0,0-2.92-4L202.64,86.22l-.42-.71L202.1,51.2A6,6,0,0,0,200,46.64a110.12,110.12,0,0,0-36.07-20.31,6,6,0,0,0-4.84.45L128.46,43.86h-1L96.91,26.76a6,6,0,0,0-4.86-.44A109.92,109.92,0,0,0,56,46.68a6,6,0,0,0-2.12,4.55l-.16,34.34c-.14.23-.28.47-.41.71L22.91,103.57A6,6,0,0,0,20,107.62a104.81,104.81,0,0,0,0,40.78,6,6,0,0,0,2.92,4l30.42,17.33.42.71.12,34.31A6,6,0,0,0,56,209.36a110.12,110.12,0,0,0,36.07,20.31,6,6,0,0,0,4.84-.45l30.61-17.08h1l30.56,17.1A6.09,6.09,0,0,0,162,230a5.83,5.83,0,0,0,1.93-.32,109.92,109.92,0,0,0,36-20.36,6,6,0,0,0,2.12-4.55l.16-34.34c.14-.23.28-.47.41-.71l30.42-17.29a6,6,0,0,0,2.92-4.05A104.81,104.81,0,0,0,236,107.6Zm-11.25,35.79L195.32,160.1a6.07,6.07,0,0,0-2.28,2.3c-.59,1-1.21,2.11-1.86,3.14a6,6,0,0,0-.91,3.16l-.16,33.21a98.15,98.15,0,0,1-27.52,15.53L133,200.88a6,6,0,0,0-2.93-.77h-.14c-1.24,0-2.5,0-3.74,0a6,6,0,0,0-3.07.76L93.45,217.43a98,98,0,0,1-27.56-15.49l-.12-33.17a6,6,0,0,0-.91-3.16c-.64-1-1.27-2.08-1.86-3.14a6,6,0,0,0-2.27-2.3L31.3,143.4a93,93,0,0,1,0-30.79L60.68,95.9A6.07,6.07,0,0,0,63,93.6c.59-1,1.21-2.11,1.86-3.14a6,6,0,0,0,.91-3.16l.16-33.21A98.15,98.15,0,0,1,93.41,38.56L123,55.12a5.81,5.81,0,0,0,3.07.76c1.24,0,2.5,0,3.74,0a6,6,0,0,0,3.07-.76l29.65-16.56a98,98,0,0,1,27.56,15.49l.12,33.17a6,6,0,0,0,.91,3.16c.64,1,1.27,2.08,1.86,3.14a6,6,0,0,0,2.27,2.3L224.7,112.6A93,93,0,0,1,224.73,143.39Z"}))],["regular",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Zm109.94-52.79a8,8,0,0,0-3.89-5.4l-29.83-17-.12-33.62a8,8,0,0,0-2.83-6.08,111.91,111.91,0,0,0-36.72-20.67,8,8,0,0,0-6.46.59L128,41.85,97.88,25a8,8,0,0,0-6.47-.6A112.1,112.1,0,0,0,54.73,45.15a8,8,0,0,0-2.83,6.07l-.15,33.65-29.83,17a8,8,0,0,0-3.89,5.4,106.47,106.47,0,0,0,0,41.56,8,8,0,0,0,3.89,5.4l29.83,17,.12,33.62a8,8,0,0,0,2.83,6.08,111.91,111.91,0,0,0,36.72,20.67,8,8,0,0,0,6.46-.59L128,214.15,158.12,231a7.91,7.91,0,0,0,3.9,1,8.09,8.09,0,0,0,2.57-.42,112.1,112.1,0,0,0,36.68-20.73,8,8,0,0,0,2.83-6.07l.15-33.65,29.83-17a8,8,0,0,0,3.89-5.4A106.47,106.47,0,0,0,237.94,107.21Zm-15,34.91-28.57,16.25a8,8,0,0,0-3,3c-.58,1-1.19,2.06-1.81,3.06a7.94,7.94,0,0,0-1.22,4.21l-.15,32.25a95.89,95.89,0,0,1-25.37,14.3L134,199.13a8,8,0,0,0-3.91-1h-.19c-1.21,0-2.43,0-3.64,0a8.08,8.08,0,0,0-4.1,1l-28.84,16.1A96,96,0,0,1,67.88,201l-.11-32.2a8,8,0,0,0-1.22-4.22c-.62-1-1.23-2-1.8-3.06a8.09,8.09,0,0,0-3-3.06l-28.6-16.29a90.49,90.49,0,0,1,0-28.26L61.67,97.63a8,8,0,0,0,3-3c.58-1,1.19-2.06,1.81-3.06a7.94,7.94,0,0,0,1.22-4.21l.15-32.25a95.89,95.89,0,0,1,25.37-14.3L122,56.87a8,8,0,0,0,4.1,1c1.21,0,2.43,0,3.64,0a8.08,8.08,0,0,0,4.1-1l28.84-16.1A96,96,0,0,1,188.12,55l.11,32.2a8,8,0,0,0,1.22,4.22c.62,1,1.23,2,1.8,3.06a8.09,8.09,0,0,0,3,3.06l28.6,16.29A90.49,90.49,0,0,1,222.9,142.12Z"}))],["thin",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M128,84a44,44,0,1,0,44,44A44.05,44.05,0,0,0,128,84Zm0,80a36,36,0,1,1,36-36A36,36,0,0,1,128,164Zm106-56a4,4,0,0,0-2-2.7l-30.89-17.6q-.47-.82-1-1.62L200.1,51.2a3.94,3.94,0,0,0-1.42-3,107.8,107.8,0,0,0-35.41-19.94,4,4,0,0,0-3.23.29L129,45.87h-2l-31-17.36a4,4,0,0,0-3.23-.3,108.05,108.05,0,0,0-35.39,20,4,4,0,0,0-1.41,3l-.16,34.9-1,1.62L23.9,105.3A4,4,0,0,0,22,108a102.76,102.76,0,0,0,0,40,4,4,0,0,0,1.95,2.7l30.89,17.6q.47.83,1,1.62l.12,34.87a3.94,3.94,0,0,0,1.42,3,107.8,107.8,0,0,0,35.41,19.94,4,4,0,0,0,3.23-.29L127,210.13h2l31,17.36a4,4,0,0,0,3.23.3,108.05,108.05,0,0,0,35.39-20,4,4,0,0,0,1.41-3l.16-34.9,1-1.62L232.1,150.7a4,4,0,0,0,2-2.71A102.76,102.76,0,0,0,234,108Zm-7.48,36.67L196.3,161.84a4,4,0,0,0-1.51,1.53c-.61,1.09-1.25,2.17-1.91,3.24a3.92,3.92,0,0,0-.61,2.1l-.16,34.15a99.8,99.8,0,0,1-29.7,16.77l-30.4-17a4.06,4.06,0,0,0-2-.51H130c-1.28,0-2.57,0-3.84,0a4.1,4.1,0,0,0-2.05.51l-30.45,17A100.23,100.23,0,0,1,63.89,202.9l-.12-34.12a3.93,3.93,0,0,0-.61-2.11c-.66-1-1.3-2.14-1.91-3.23a4,4,0,0,0-1.51-1.53L29.49,144.68a94.78,94.78,0,0,1,0-33.34L59.7,94.16a4,4,0,0,0,1.51-1.53c.61-1.09,1.25-2.17,1.91-3.23a4,4,0,0,0,.61-2.11l.16-34.15a99.8,99.8,0,0,1,29.7-16.77l30.4,17a4.1,4.1,0,0,0,2.05.51c1.28,0,2.57,0,3.84,0a4,4,0,0,0,2.05-.51l30.45-17A100.23,100.23,0,0,1,192.11,53.1l.12,34.12a3.93,3.93,0,0,0,.61,2.11c.66,1,1.3,2.14,1.91,3.23a4,4,0,0,0,1.51,1.53l30.25,17.23A94.78,94.78,0,0,1,226.54,144.66Z"}))]]),a4=H.forwardRef((e,t)=>Qe.createElement(Ku,jre(Vre({ref:t},e),{weights:Gre})));a4.displayName="GearSix";var Wre=Object.defineProperty,qre=Object.defineProperties,Hre=Object.getOwnPropertyDescriptors,zI=Object.getOwnPropertySymbols,Zre=Object.prototype.hasOwnProperty,Xre=Object.prototype.propertyIsEnumerable,OI=(e,t,r)=>t in e?Wre(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Kre=(e,t)=>{for(var r in t||(t={}))Zre.call(t,r)&&OI(e,r,t[r]);if(zI)for(var r of zI(t))Xre.call(t,r)&&OI(e,r,t[r]);return e},Yre=(e,t)=>qre(e,Hre(t));const Qre=new Map([["bold",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M232.49,215.51,185,168a92.12,92.12,0,1,0-17,17l47.53,47.54a12,12,0,0,0,17-17ZM44,112a68,68,0,1,1,68,68A68.07,68.07,0,0,1,44,112Z"}))],["duotone",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M192,112a80,80,0,1,1-80-80A80,80,0,0,1,192,112Z",opacity:"0.2"}),Qe.createElement("path",{d:"M229.66,218.34,179.6,168.28a88.21,88.21,0,1,0-11.32,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"}))],["fill",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M168,112a56,56,0,1,1-56-56A56,56,0,0,1,168,112Zm61.66,117.66a8,8,0,0,1-11.32,0l-50.06-50.07a88,88,0,1,1,11.32-11.31l50.06,50.06A8,8,0,0,1,229.66,229.66ZM112,184a72,72,0,1,0-72-72A72.08,72.08,0,0,0,112,184Z"}))],["light",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M228.24,219.76l-51.38-51.38a86.15,86.15,0,1,0-8.48,8.48l51.38,51.38a6,6,0,0,0,8.48-8.48ZM38,112a74,74,0,1,1,74,74A74.09,74.09,0,0,1,38,112Z"}))],["regular",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"}))],["thin",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M226.83,221.17l-52.7-52.7a84.1,84.1,0,1,0-5.66,5.66l52.7,52.7a4,4,0,0,0,5.66-5.66ZM36,112a76,76,0,1,1,76,76A76.08,76.08,0,0,1,36,112Z"}))]]),s4=H.forwardRef((e,t)=>Qe.createElement(Ku,Yre(Kre({ref:t},e),{weights:Qre})));s4.displayName="MagnifyingGlass";var Jre=Object.defineProperty,eie=Object.defineProperties,tie=Object.getOwnPropertyDescriptors,FI=Object.getOwnPropertySymbols,nie=Object.prototype.hasOwnProperty,rie=Object.prototype.propertyIsEnumerable,BI=(e,t,r)=>t in e?Jre(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,iie=(e,t)=>{for(var r in t||(t={}))nie.call(t,r)&&BI(e,r,t[r]);if(FI)for(var r of FI(t))rie.call(t,r)&&BI(e,r,t[r]);return e},oie=(e,t)=>eie(e,tie(t));const aie=new Map([["bold",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M228,128a12,12,0,0,1-12,12H140v76a12,12,0,0,1-24,0V140H40a12,12,0,0,1,0-24h76V40a12,12,0,0,1,24,0v76h76A12,12,0,0,1,228,128Z"}))],["duotone",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M216,48V208a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8H208A8,8,0,0,1,216,48Z",opacity:"0.2"}),Qe.createElement("path",{d:"M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z"}))],["fill",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM184,136H136v48a8,8,0,0,1-16,0V136H72a8,8,0,0,1,0-16h48V72a8,8,0,0,1,16,0v48h48a8,8,0,0,1,0,16Z"}))],["light",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M222,128a6,6,0,0,1-6,6H134v82a6,6,0,0,1-12,0V134H40a6,6,0,0,1,0-12h82V40a6,6,0,0,1,12,0v82h82A6,6,0,0,1,222,128Z"}))],["regular",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z"}))],["thin",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M220,128a4,4,0,0,1-4,4H132v84a4,4,0,0,1-8,0V132H40a4,4,0,0,1,0-8h84V40a4,4,0,0,1,8,0v84h84A4,4,0,0,1,220,128Z"}))]]),l4=H.forwardRef((e,t)=>Qe.createElement(Ku,oie(iie({ref:t},e),{weights:aie})));l4.displayName="Plus";var sie=Object.defineProperty,lie=Object.defineProperties,cie=Object.getOwnPropertyDescriptors,NI=Object.getOwnPropertySymbols,uie=Object.prototype.hasOwnProperty,die=Object.prototype.propertyIsEnumerable,$I=(e,t,r)=>t in e?sie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,hie=(e,t)=>{for(var r in t||(t={}))uie.call(t,r)&&$I(e,r,t[r]);if(NI)for(var r of NI(t))die.call(t,r)&&$I(e,r,t[r]);return e},fie=(e,t)=>lie(e,cie(t));const pie=new Map([["bold",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M208.49,191.51a12,12,0,0,1-17,17L128,145,64.49,208.49a12,12,0,0,1-17-17L111,128,47.51,64.49a12,12,0,0,1,17-17L128,111l63.51-63.52a12,12,0,0,1,17,17L145,128Z"}))],["duotone",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M216,48V208a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8H208A8,8,0,0,1,216,48Z",opacity:"0.2"}),Qe.createElement("path",{d:"M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"}))],["fill",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM181.66,170.34a8,8,0,0,1-11.32,11.32L128,139.31,85.66,181.66a8,8,0,0,1-11.32-11.32L116.69,128,74.34,85.66A8,8,0,0,1,85.66,74.34L128,116.69l42.34-42.35a8,8,0,0,1,11.32,11.32L139.31,128Z"}))],["light",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M204.24,195.76a6,6,0,1,1-8.48,8.48L128,136.49,60.24,204.24a6,6,0,0,1-8.48-8.48L119.51,128,51.76,60.24a6,6,0,0,1,8.48-8.48L128,119.51l67.76-67.75a6,6,0,0,1,8.48,8.48L136.49,128Z"}))],["regular",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"}))],["thin",Qe.createElement(Qe.Fragment,null,Qe.createElement("path",{d:"M202.83,197.17a4,4,0,0,1-5.66,5.66L128,133.66,58.83,202.83a4,4,0,0,1-5.66-5.66L122.34,128,53.17,58.83a4,4,0,0,1,5.66-5.66L128,122.34l69.17-69.17a4,4,0,1,1,5.66,5.66L133.66,128Z"}))]]),zg=H.forwardRef((e,t)=>Qe.createElement(Ku,fie(hie({ref:t},e),{weights:pie})));zg.displayName="X";var c4={exports:{}};(function(e,t){(function(r,i){e.exports=i(H)})(Ai,function(r){return function(i){var c={};function d(y){if(c[y])return c[y].exports;var a=c[y]={i:y,l:!1,exports:{}};return i[y].call(a.exports,a,a.exports,d),a.l=!0,a.exports}return d.m=i,d.c=c,d.d=function(y,a,b){d.o(y,a)||Object.defineProperty(y,a,{enumerable:!0,get:b})},d.r=function(y){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(y,"__esModule",{value:!0})},d.t=function(y,a){if(1&a&&(y=d(y)),8&a||4&a&&typeof y=="object"&&y&&y.__esModule)return y;var b=Object.create(null);if(d.r(b),Object.defineProperty(b,"default",{enumerable:!0,value:y}),2&a&&typeof y!="string")for(var S in y)d.d(b,S,function(k){return y[k]}.bind(null,S));return b},d.n=function(y){var a=y&&y.__esModule?function(){return y.default}:function(){return y};return d.d(a,"a",a),a},d.o=function(y,a){return Object.prototype.hasOwnProperty.call(y,a)},d.p="/",d(d.s=1)}([function(i,c){i.exports=r},function(i,c,d){i.exports=d(2)},function(i,c,d){function y(fe,$,ue){return $ in fe?Object.defineProperty(fe,$,{value:ue,enumerable:!0,configurable:!0,writable:!0}):fe[$]=ue,fe}function a(fe,$){var ue=Object.keys(fe);if(Object.getOwnPropertySymbols){var Je=Object.getOwnPropertySymbols(fe);$&&(Je=Je.filter(function(Ke){return Object.getOwnPropertyDescriptor(fe,Ke).enumerable})),ue.push.apply(ue,Je)}return ue}function b(fe,$){if(fe==null)return{};var ue,Je,Ke=function(ze,nt){if(ze==null)return{};var _t,Ue,Ee={},_e=Object.keys(ze);for(Ue=0;Ue<_e.length;Ue++)_t=_e[Ue],nt.indexOf(_t)>=0||(Ee[_t]=ze[_t]);return Ee}(fe,$);if(Object.getOwnPropertySymbols){var ke=Object.getOwnPropertySymbols(fe);for(Je=0;Je<ke.length;Je++)ue=ke[Je],$.indexOf(ue)>=0||Object.prototype.propertyIsEnumerable.call(fe,ue)&&(Ke[ue]=fe[ue])}return Ke}d.r(c);var S=d(0),k=d.n(S),P=function(fe){for(var $=0,ue=0;ue<fe.length;ue++)$=($<<5)-$+fe.charCodeAt(ue),$&=$;return Math.abs($)},O=function(fe,$){return Math.floor(fe/Math.pow(10,$)%10)},G=function(fe,$){return!(O(fe,$)%2)},F=function(fe,$,ue){var Je=fe%$;return ue&&O(fe,ue)%2===0?-Je:Je},q=function(fe,$,ue){return $[fe%ue]},ce=function(fe){var $=function(ue,Je){var Ke=P(ue),ke=Je&&Je.length;return Array.from({length:4},function(ze,nt){return{color:q(Ke+nt,Je,ke),translateX:F(Ke*(nt+1),40-(nt+17),1),translateY:F(Ke*(nt+1),40-(nt+17),2),rotate:F(Ke*(nt+1),360),isSquare:G(Ke,2)}})}(fe.name,fe.colors);return S.createElement("svg",{viewBox:"0 0 80 80",fill:"none",role:"img",xmlns:"http://www.w3.org/2000/svg",width:fe.size,height:fe.size},fe.title&&S.createElement("title",null,fe.name),S.createElement("mask",{id:"mask__bauhaus",maskUnits:"userSpaceOnUse",x:0,y:0,width:80,height:80},S.createElement("rect",{width:80,height:80,rx:fe.square?void 0:160,fill:"#FFFFFF"})),S.createElement("g",{mask:"url(#mask__bauhaus)"},S.createElement("rect",{width:80,height:80,fill:$[0].color}),S.createElement("rect",{x:10,y:30,width:80,height:$[1].isSquare?80:10,fill:$[1].color,transform:"translate("+$[1].translateX+" "+$[1].translateY+") rotate("+$[1].rotate+" 40 40)"}),S.createElement("circle",{cx:40,cy:40,fill:$[2].color,r:16,transform:"translate("+$[2].translateX+" "+$[2].translateY+")"}),S.createElement("line",{x1:0,y1:40,x2:80,y2:40,strokeWidth:2,stroke:$[3].color,transform:"translate("+$[3].translateX+" "+$[3].translateY+") rotate("+$[3].rotate+" 40 40)"})))},B=function(fe){var $=function(ue,Je){var Ke=P(Je),ke=ue&&ue.length,ze=Array.from({length:5},function(_t,Ue){return q(Ke+Ue,ue,ke)}),nt=[];return nt[0]=ze[0],nt[1]=ze[1],nt[2]=ze[1],nt[3]=ze[2],nt[4]=ze[2],nt[5]=ze[3],nt[6]=ze[3],nt[7]=ze[0],nt[8]=ze[4],nt}(fe.colors,fe.name);return k.a.createElement("svg",{viewBox:"0 0 90 90",fill:"none",role:"img",xmlns:"http://www.w3.org/2000/svg",width:fe.size,height:fe.size},fe.title&&k.a.createElement("title",null,fe.name),k.a.createElement("mask",{id:"mask__ring",maskUnits:"userSpaceOnUse",x:0,y:0,width:90,height:90},k.a.createElement("rect",{width:90,height:90,rx:fe.square?void 0:180,fill:"#FFFFFF"})),k.a.createElement("g",{mask:"url(#mask__ring)"},k.a.createElement("path",{d:"M0 0h90v45H0z",fill:$[0]}),k.a.createElement("path",{d:"M0 45h90v45H0z",fill:$[1]}),k.a.createElement("path",{d:"M83 45a38 38 0 00-76 0h76z",fill:$[2]}),k.a.createElement("path",{d:"M83 45a38 38 0 01-76 0h76z",fill:$[3]}),k.a.createElement("path",{d:"M77 45a32 32 0 10-64 0h64z",fill:$[4]}),k.a.createElement("path",{d:"M77 45a32 32 0 11-64 0h64z",fill:$[5]}),k.a.createElement("path",{d:"M71 45a26 26 0 00-52 0h52z",fill:$[6]}),k.a.createElement("path",{d:"M71 45a26 26 0 01-52 0h52z",fill:$[7]}),k.a.createElement("circle",{cx:45,cy:45,r:23,fill:$[8]})))},U=function(fe){var $=function(ue,Je){var Ke=P(ue),ke=Je&&Je.length;return Array.from({length:64},function(ze,nt){return q(Ke%nt,Je,ke)})}(fe.name,fe.colors);return S.createElement("svg",{viewBox:"0 0 80 80",fill:"none",role:"img",xmlns:"http://www.w3.org/2000/svg",width:fe.size,height:fe.size},fe.title&&S.createElement("title",null,fe.name),S.createElement("mask",{id:"mask__pixel","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:0,y:0,width:80,height:80},S.createElement("rect",{width:80,height:80,rx:fe.square?void 0:160,fill:"#FFFFFF"})),S.createElement("g",{mask:"url(#mask__pixel)"},S.createElement("rect",{width:10,height:10,fill:$[0]}),S.createElement("rect",{x:20,width:10,height:10,fill:$[1]}),S.createElement("rect",{x:40,width:10,height:10,fill:$[2]}),S.createElement("rect",{x:60,width:10,height:10,fill:$[3]}),S.createElement("rect",{x:10,width:10,height:10,fill:$[4]}),S.createElement("rect",{x:30,width:10,height:10,fill:$[5]}),S.createElement("rect",{x:50,width:10,height:10,fill:$[6]}),S.createElement("rect",{x:70,width:10,height:10,fill:$[7]}),S.createElement("rect",{y:10,width:10,height:10,fill:$[8]}),S.createElement("rect",{y:20,width:10,height:10,fill:$[9]}),S.createElement("rect",{y:30,width:10,height:10,fill:$[10]}),S.createElement("rect",{y:40,width:10,height:10,fill:$[11]}),S.createElement("rect",{y:50,width:10,height:10,fill:$[12]}),S.createElement("rect",{y:60,width:10,height:10,fill:$[13]}),S.createElement("rect",{y:70,width:10,height:10,fill:$[14]}),S.createElement("rect",{x:20,y:10,width:10,height:10,fill:$[15]}),S.createElement("rect",{x:20,y:20,width:10,height:10,fill:$[16]}),S.createElement("rect",{x:20,y:30,width:10,height:10,fill:$[17]}),S.createElement("rect",{x:20,y:40,width:10,height:10,fill:$[18]}),S.createElement("rect",{x:20,y:50,width:10,height:10,fill:$[19]}),S.createElement("rect",{x:20,y:60,width:10,height:10,fill:$[20]}),S.createElement("rect",{x:20,y:70,width:10,height:10,fill:$[21]}),S.createElement("rect",{x:40,y:10,width:10,height:10,fill:$[22]}),S.createElement("rect",{x:40,y:20,width:10,height:10,fill:$[23]}),S.createElement("rect",{x:40,y:30,width:10,height:10,fill:$[24]}),S.createElement("rect",{x:40,y:40,width:10,height:10,fill:$[25]}),S.createElement("rect",{x:40,y:50,width:10,height:10,fill:$[26]}),S.createElement("rect",{x:40,y:60,width:10,height:10,fill:$[27]}),S.createElement("rect",{x:40,y:70,width:10,height:10,fill:$[28]}),S.createElement("rect",{x:60,y:10,width:10,height:10,fill:$[29]}),S.createElement("rect",{x:60,y:20,width:10,height:10,fill:$[30]}),S.createElement("rect",{x:60,y:30,width:10,height:10,fill:$[31]}),S.createElement("rect",{x:60,y:40,width:10,height:10,fill:$[32]}),S.createElement("rect",{x:60,y:50,width:10,height:10,fill:$[33]}),S.createElement("rect",{x:60,y:60,width:10,height:10,fill:$[34]}),S.createElement("rect",{x:60,y:70,width:10,height:10,fill:$[35]}),S.createElement("rect",{x:10,y:10,width:10,height:10,fill:$[36]}),S.createElement("rect",{x:10,y:20,width:10,height:10,fill:$[37]}),S.createElement("rect",{x:10,y:30,width:10,height:10,fill:$[38]}),S.createElement("rect",{x:10,y:40,width:10,height:10,fill:$[39]}),S.createElement("rect",{x:10,y:50,width:10,height:10,fill:$[40]}),S.createElement("rect",{x:10,y:60,width:10,height:10,fill:$[41]}),S.createElement("rect",{x:10,y:70,width:10,height:10,fill:$[42]}),S.createElement("rect",{x:30,y:10,width:10,height:10,fill:$[43]}),S.createElement("rect",{x:30,y:20,width:10,height:10,fill:$[44]}),S.createElement("rect",{x:30,y:30,width:10,height:10,fill:$[45]}),S.createElement("rect",{x:30,y:40,width:10,height:10,fill:$[46]}),S.createElement("rect",{x:30,y:50,width:10,height:10,fill:$[47]}),S.createElement("rect",{x:30,y:60,width:10,height:10,fill:$[48]}),S.createElement("rect",{x:30,y:70,width:10,height:10,fill:$[49]}),S.createElement("rect",{x:50,y:10,width:10,height:10,fill:$[50]}),S.createElement("rect",{x:50,y:20,width:10,height:10,fill:$[51]}),S.createElement("rect",{x:50,y:30,width:10,height:10,fill:$[52]}),S.createElement("rect",{x:50,y:40,width:10,height:10,fill:$[53]}),S.createElement("rect",{x:50,y:50,width:10,height:10,fill:$[54]}),S.createElement("rect",{x:50,y:60,width:10,height:10,fill:$[55]}),S.createElement("rect",{x:50,y:70,width:10,height:10,fill:$[56]}),S.createElement("rect",{x:70,y:10,width:10,height:10,fill:$[57]}),S.createElement("rect",{x:70,y:20,width:10,height:10,fill:$[58]}),S.createElement("rect",{x:70,y:30,width:10,height:10,fill:$[59]}),S.createElement("rect",{x:70,y:40,width:10,height:10,fill:$[60]}),S.createElement("rect",{x:70,y:50,width:10,height:10,fill:$[61]}),S.createElement("rect",{x:70,y:60,width:10,height:10,fill:$[62]}),S.createElement("rect",{x:70,y:70,width:10,height:10,fill:$[63]})))},Z=function(fe){var $=function(ue,Je){var Ke,ke=P(ue),ze=Je&&Je.length,nt=q(ke,Je,ze),_t=F(ke,10,1),Ue=_t<5?_t+4:_t,Ee=F(ke,10,2),_e=Ee<5?Ee+4:Ee;return{wrapperColor:nt,faceColor:(Ke=nt,Ke.slice(0,1)==="#"&&(Ke=Ke.slice(1)),(299*parseInt(Ke.substr(0,2),16)+587*parseInt(Ke.substr(2,2),16)+114*parseInt(Ke.substr(4,2),16))/1e3>=128?"#000000":"#FFFFFF"),backgroundColor:q(ke+13,Je,ze),wrapperTranslateX:Ue,wrapperTranslateY:_e,wrapperRotate:F(ke,360),wrapperScale:1+F(ke,3)/10,isMouthOpen:G(ke,2),isCircle:G(ke,1),eyeSpread:F(ke,5),mouthSpread:F(ke,3),faceRotate:F(ke,10,3),faceTranslateX:Ue>6?Ue/2:F(ke,8,1),faceTranslateY:_e>6?_e/2:F(ke,7,2)}}(fe.name,fe.colors);return S.createElement("svg",{viewBox:"0 0 36 36",fill:"none",role:"img",xmlns:"http://www.w3.org/2000/svg",width:fe.size,height:fe.size},fe.title&&S.createElement("title",null,fe.name),S.createElement("mask",{id:"mask__beam",maskUnits:"userSpaceOnUse",x:0,y:0,width:36,height:36},S.createElement("rect",{width:36,height:36,rx:fe.square?void 0:72,fill:"#FFFFFF"})),S.createElement("g",{mask:"url(#mask__beam)"},S.createElement("rect",{width:36,height:36,fill:$.backgroundColor}),S.createElement("rect",{x:"0",y:"0",width:36,height:36,transform:"translate("+$.wrapperTranslateX+" "+$.wrapperTranslateY+") rotate("+$.wrapperRotate+" 18 18) scale("+$.wrapperScale+")",fill:$.wrapperColor,rx:$.isCircle?36:6}),S.createElement("g",{transform:"translate("+$.faceTranslateX+" "+$.faceTranslateY+") rotate("+$.faceRotate+" 18 18)"},$.isMouthOpen?S.createElement("path",{d:"M15 "+(19+$.mouthSpread)+"c2 1 4 1 6 0",stroke:$.faceColor,fill:"none",strokeLinecap:"round"}):S.createElement("path",{d:"M13,"+(19+$.mouthSpread)+" a1,0.75 0 0,0 10,0",fill:$.faceColor}),S.createElement("rect",{x:14-$.eyeSpread,y:14,width:1.5,height:2,rx:1,stroke:"none",fill:$.faceColor}),S.createElement("rect",{x:20+$.eyeSpread,y:14,width:1.5,height:2,rx:1,stroke:"none",fill:$.faceColor}))))},J=function(fe){var $=function(Je,Ke){var ke=P(Je),ze=Ke&&Ke.length;return Array.from({length:4},function(nt,_t){return q(ke+_t,Ke,ze)})}(fe.name,fe.colors),ue=fe.name.replace(/\s/g,"");return S.createElement("svg",{viewBox:"0 0 80 80",fill:"none",role:"img",xmlns:"http://www.w3.org/2000/svg",width:fe.size,height:fe.size},fe.title&&S.createElement("title",null,fe.name),S.createElement("mask",{id:"mask__sunset",maskUnits:"userSpaceOnUse",x:0,y:0,width:80,height:80},S.createElement("rect",{width:80,height:80,rx:fe.square?void 0:160,fill:"#FFFFFF"})),S.createElement("g",{mask:"url(#mask__sunset)"},S.createElement("path",{fill:"url(#gradient_paint0_linear_"+ue+")",d:"M0 0h80v40H0z"}),S.createElement("path",{fill:"url(#gradient_paint1_linear_"+ue+")",d:"M0 40h80v40H0z"})),S.createElement("defs",null,S.createElement("linearGradient",{id:"gradient_paint0_linear_"+ue,x1:40,y1:0,x2:40,y2:40,gradientUnits:"userSpaceOnUse"},S.createElement("stop",{stopColor:$[0]}),S.createElement("stop",{offset:1,stopColor:$[1]})),S.createElement("linearGradient",{id:"gradient_paint1_linear_"+ue,x1:40,y1:40,x2:40,y2:80,gradientUnits:"userSpaceOnUse"},S.createElement("stop",{stopColor:$[2]}),S.createElement("stop",{offset:1,stopColor:$[3]}))))},Y=function(fe){var $=function(ue,Je){var Ke=P(ue),ke=Je&&Je.length;return Array.from({length:3},function(ze,nt){return{color:q(Ke+nt,Je,ke),translateX:F(Ke*(nt+1),8,1),translateY:F(Ke*(nt+1),8,2),scale:1.2+F(Ke*(nt+1),4)/10,rotate:F(Ke*(nt+1),360,1)}})}(fe.name,fe.colors);return S.createElement("svg",{viewBox:"0 0 80 80",fill:"none",role:"img",xmlns:"http://www.w3.org/2000/svg",width:fe.size,height:fe.size},fe.title&&S.createElement("title",null,fe.name),S.createElement("mask",{id:"mask__marble",maskUnits:"userSpaceOnUse",x:0,y:0,width:80,height:80},S.createElement("rect",{width:80,height:80,rx:fe.square?void 0:160,fill:"#FFFFFF"})),S.createElement("g",{mask:"url(#mask__marble)"},S.createElement("rect",{width:80,height:80,fill:$[0].color}),S.createElement("path",{filter:"url(#prefix__filter0_f)",d:"M32.414 59.35L50.376 70.5H72.5v-71H33.728L26.5 13.381l19.057 27.08L32.414 59.35z",fill:$[1].color,transform:"translate("+$[1].translateX+" "+$[1].translateY+") rotate("+$[1].rotate+" 40 40) scale("+$[2].scale+")"}),S.createElement("path",{filter:"url(#prefix__filter0_f)",style:{mixBlendMode:"overlay"},d:"M22.216 24L0 46.75l14.108 38.129L78 86l-3.081-59.276-22.378 4.005 12.972 20.186-23.35 27.395L22.215 24z",fill:$[2].color,transform:"translate("+$[2].translateX+" "+$[2].translateY+") rotate("+$[2].rotate+" 40 40) scale("+$[2].scale+")"})),S.createElement("defs",null,S.createElement("filter",{id:"prefix__filter0_f",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},S.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),S.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),S.createElement("feGaussianBlur",{stdDeviation:7,result:"effect1_foregroundBlur"}))))},he=["pixel","bauhaus","ring","beam","sunset","marble"],se={geometric:"beam",abstract:"bauhaus"},De=function(fe){var $=fe.variant,ue=$===void 0?"marble":$,Je=fe.colors,Ke=Je===void 0?["#92A1C6","#146A7C","#F0AB3D","#C271B4","#C20D90"]:Je,ke=fe.name,ze=ke===void 0?"Clara Barton":ke,nt=fe.square,_t=nt!==void 0&&nt,Ue=fe.title,Ee=Ue!==void 0&&Ue,_e=fe.size,$e=function(be){for(var Me=1;Me<arguments.length;Me++){var Ge=arguments[Me]!=null?arguments[Me]:{};Me%2?a(Object(Ge),!0).forEach(function(ut){y(be,ut,Ge[ut])}):Object.getOwnPropertyDescriptors?Object.defineProperties(be,Object.getOwnPropertyDescriptors(Ge)):a(Object(Ge)).forEach(function(ut){Object.defineProperty(be,ut,Object.getOwnPropertyDescriptor(Ge,ut))})}return be}({colors:Ke,name:ze,title:Ee,size:_e===void 0?40:_e,square:_t},b(fe,["variant","colors","name","square","title","size"]));return{pixel:k.a.createElement(U,$e),bauhaus:k.a.createElement(ce,$e),ring:k.a.createElement(B,$e),beam:k.a.createElement(Z,$e),sunset:k.a.createElement(J,$e),marble:k.a.createElement(Y,$e)}[Object.keys(se).includes(ue)?se[ue]:he.includes(ue)?ue:"marble"]};c.default=De}])})})(c4);var mie=c4.exports;const u4=ef(mie);function gie(){const[e]=sf(Eg),{setHeadOpt:t,navigate:r,setWrapperOpt:i}=ea(),c={menus:[{key:" ",value:"/"},{key:" ",value:"/previous"}],isForward:!0,icon_L:o4,fn_L:()=>r("/notification"),icon_R:()=>ne(u4,{name:e.id.toString(),variant:"beam",size:28,colors:Dne}),fn_R:()=>r("/mypage")},d={isNoneHeadPadding:!0,scrollable:!1,isFullWidth:!0};return H.useLayoutEffect(()=>{t(c),i(d)},[]),ne(mE,{context:{navigate:r}})}const yie=({drawerBleeding:e,children:t,onClick:r})=>{const i=Hi();return en(Rn,{onClick:r,sx:{position:"absolute",top:-e+1,height:e,borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",visibility:"visible",right:0,left:0,boxShadow:`0px -7px 7px ${Kr(cl,.2)}`,backgroundColor:i.palette.background.default,cursor:"pointer",zIndex:99},children:[ne(zne,{}),ne(Rn,{sx:{position:"absolute",bottom:0,px:"1rem",width:"100%"},children:t})]})},_ie=({open:e,toggleDrawer:t,children:r,headerChildren:i,drawerBleeding:c=52})=>{const d=Hi();return en(gc,{children:[ne(Cg,{styles:{html:{"--brand-color":"#000"},".use_drawer > .MuiPaper-root":{maxHeight:"340px",width:"100%",overflow:"visible",boxShadow:"none"},".use_drawer .MuiPaper-root":{maxWidth:"444px",margin:"0 auto",background:d.palette.background.default},".use_drawer .MuiBackdrop-root":{background:"none",backdropFilter:"blur(2px)",maxWidth:"444px",margin:"0 auto"}}}),en(wne,{anchor:"bottom",open:e,onClose:t,onOpen:t,swipeAreaWidth:c,disableSwipeToOpen:!1,ModalProps:{keepMounted:!0},className:"use_drawer",children:[ne(yie,{drawerBleeding:c,open:e,onClick:t,children:i}),ne(Fne,{sx:{position:"relative",overflow:"scroll",zIndex:10,px:2,boxShadow:`0px -4px 4px ${Kr(cl,.2)}`},children:r})]})]})};function d4(){const[e,t]=H.useState(!1);return{open:e,toggleDrawer:()=>{t(!e)},Drawer:_ie}}function vie({iconSize:e,rand:t,pos:r}){return{width:"10vw",height:"10vw",maxHeight:e,maxWidth:e,borderRadius:"50%",position:"absolute",left:`${50+r.x}%`,bottom:`${50+r.y}%`,transform:"translate(-50%, 50%)",animation:`1.5s ${t}s ease-in-out infinite alternate wooFlow`,boxShadow:"0px 4px 4px #0000003b",cursor:"pointer",textAlign:"center",lineHeight:"2rem","&:hover":{opacity:.8},"& .MuiAvatar-img":{filter:"blur(1.5px)",border:"none",height:"110%",width:"110%"},"@keyframes wooFlow":{from:{transform:"translate(-50%, 50%)"},to:{transform:"translate(-50%, 60%)"}},"@keyframes mount":{from:{transform:"translate(-50%, 50%)scale(0)"},to:{transform:"translate(-50%, 50%)scale(1)"}}}}const xie=({image:e,pos:t,onClick:r})=>{const i=Math.random(),c=40;return ne(une,{in:!0,children:ne(Rn,{sx:{position:"absolute",left:`${50+t.x}%`,bottom:`${50+t.y}%`},onClick:r,children:ne(Rn,{sx:vie({iconSize:c,rand:i,pos:t}),children:ne(EY,{alt:e,src:e,sx:{border:"none"}})})})})},bie=Qe.memo(xie),wie=go(nl)(({theme:e})=>({color:e.palette.text.primary})),Sie=go(wie)(({checked:e})=>({borderRadius:"1.25rem",height:"2rem",padding:"0 1.6rem",border:`1px solid ${e?"#0000":cl}`,color:e?"#fff":"",flex:"0 0 auto"}));function Eie({children:e,action:t}){const[r,i]=H.useState(!1);return ne(Sie,{variant:r?"contained":"outlined",onClick:()=>{i(d=>!d),t()},checked:r,children:e})}function Tie(){return{CategoryItem:Eie}}const Cie=[{id:"life",value:""},{id:"meet",value:""},{id:"info",value:""},{id:"event",value:""},{id:"ad",value:""},{id:"gift",value:""}];function Mie(){const{CategoryItem:e}=Tie();return ne(Rn,{sx:{width:"100%",display:"flex",flexWrap:"nowrap",overflow:"auto",gap:"0.5rem",padding:"1rem 0","&::-webkit-scrollbar":{display:"none"}},children:Cie.map(t=>ne(e,{action:()=>console.log(`Category, ${t.value}`),children:t.value},t.id))})}const Aie={px:2,touchAction:"auto",".MuiSlider-root":{height:"1px",padding:"20px 0"},".MuiSlider-root > .MuiSlider-mark":{width:"10px",height:"10px",color:"#fff",backgroundColor:"#fff",border:`1px solid ${cl}`,borderRadius:"50%",opacity:1},".MuiSlider-root .MuiSlider-markLabel":{fontSize:"10px !important",top:"40px"}},UI=[{value:10,label:"10m"},{value:50,label:"50m"},{value:100,label:"100m"}];function kie(){function e(t){return UI.findIndex(r=>r.value===t)+1}return ne(One,{sx:Aie,children:ne(ane,{"aria-label":"RangeBar values",defaultValue:10,valueLabelFormat:e,step:null,valueLabelDisplay:"off",marks:UI,min:10,max:100})})}const Rie={display:"flex",width:"100%",height:"100vh",alignItems:"center",justifyContent:"center",position:"fixed",touchAction:"auto",maxWidth:"444px",overflow:"hidden","& .lf-player-container":{position:"absolute",width:"100vh"},"& .wooyeonArea":{position:"absolute",top:"calc(50% - 20px)",left:"50%",transform:"translate(-50%, -50%)",width:"110%",aspectRatio:"1 / 1"},"& .radar_circle, & .radar_circle *":{border:"1px solid #c6c6c661",borderRadius:"50%",display:"flex",position:"absolute",alignItems:"center",justifyContent:"center",aspectRatio:"1 / 1"},"& > .radar_circle":{width:"110%",marginBottom:"40px",animation:"1.5s linear 1s infinite alternate a1"},"& .radar_circle > div":{width:"70%",animation:"1.5s linear 2s infinite alternate a1"},"& .radar_circle > div > div":{width:"50%",animation:"1.5s linear 3s infinite alternate a1"},"@keyframes a1":{from:{borderColor:"#c6c6c661"},to:{borderColor:"#4646467a"}}},h4={height:"65px",width:"100%",position:"fixed",bottom:0,cursor:"pointer",zIndex:99999};function Iie(e){return{maxWidth:"444px",transform:"translate(-50%, 0)",left:"50%",bottom:e?0:58,zIndex:e?2e3:"initial",transition:"all 0.5s cubic-bezier(0, 0.85, 0.58, 1) 0s",position:"fixed",display:"flex",width:"100%",justifyContent:"center",gap:3,overflow:"hidden",padding:e?0:"1.5rem 0","& .search-btn":{transition:"all 0.5s cubic-bezier(0, 0.85, 0.58, 1) 0s",height:e?"3.5rem":"3rem",width:e?"100%":"11rem",minWidth:"10rem",maxWidth:"444px",borderRadius:e?"0":"1.5rem",padding:e?"2rem 0 4rem":"0 2rem"},"& .MuiButton-startIcon svg":{fontSize:"15px"},"& .MuiFab-root":{backgroundColor:"#ED6729",color:"#fff",display:"flex"},"& .MuiFab-root:hover":{backgroundColor:"#ED6729",opacity:.8},"& .hide_btn":{display:e?"none":"flex"}}}const Pie=({open:e,searchItems:t})=>{const{navigate:r}=ea();return en(Rn,{sx:Iie(e),children:[ne(Rn,{className:"hide_btn",sx:{width:"48px"}}),ne(nl,{variant:"contained",onClick:t,className:"search-btn",startIcon:ne(s4,{}),children:" "}),ne(AQ,{className:"hide_btn",size:"medium",onClick:()=>r("/add-post"),children:ne(l4,{})})]})};function f4(e){let t;e>50?t=50:e>30?t=34.5:t=16.5;const r=Math.random()*2*Math.PI,i=t*Math.cos(r),c=t*Math.sin(r);if(Math.abs(i)<=40&&c>=-40)return{x:i,y:c};const d=e-1;return f4(d)}function p4({setWooyeons:e,distance:t,image:r,post_id:i}){let c=[];if(e(y=>(c=y,y)),c.length>5)return;const d=f4(t);if(c.length===0)return VI({pos:d,image:r,post_id:i,setWooyeons:e});if(c.some(a=>Math.sqrt((d.x-a.pos.x)*(d.x-a.pos.x)+(d.y-a.pos.y)*(d.y-a.pos.y))<13))p4({setWooyeons:e,distance:t,image:r,post_id:i});else return VI({pos:d,image:r,post_id:i,setWooyeons:e})}function VI({pos:e,image:t,post_id:r,setWooyeons:i}){i(c=>c.length>6?c:[...c,{pos:e,image:t,post_id:r}])}function Lie({setPosition:e}){navigator.geolocation.getCurrentPosition(t=>{e({latitude:t.coords.latitude,longitude:t.coords.longitude})})}const Die=async({position:e})=>await fetch(`${ZO}/post/near?latitude=35.8527&longitude=128.4971`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwidXNlcl9pZCI6IjEyOTAzODEwMjk4MyIsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNTE2MjM5MDIyfQ.pGdZm2StiLp1ksKdF5qlMOEg1QYBg9BUAo5xWZkIuEg"}}).then(r=>r.json());var ff=function(){function e(){this.listeners=[]}var t=e.prototype;return t.subscribe=function(i){var c=this,d=i||function(){};return this.listeners.push(d),this.onSubscribe(),function(){c.listeners=c.listeners.filter(function(y){return y!==d}),c.onUnsubscribe()}},t.hasListeners=function(){return this.listeners.length>0},t.onSubscribe=function(){},t.onUnsubscribe=function(){},e}(),cv=typeof window>"u";function Qi(){}function zie(e,t){return typeof e=="function"?e(t):e}function Q2(e){return typeof e=="number"&&e>=0&&e!==1/0}function uv(e){return Array.isArray(e)?e:[e]}function m4(e,t){return Math.max(e+(t||0)-Date.now(),0)}function w_(e,t,r){return Og(e)?typeof t=="function"?ee({},r,{queryKey:e,queryFn:t}):ee({},t,{queryKey:e}):e}function Oie(e,t,r){return Og(e)?typeof t=="function"?ee({},r,{mutationKey:e,mutationFn:t}):ee({},t,{mutationKey:e}):typeof e=="function"?ee({},t,{mutationFn:e}):ee({},e)}function Xl(e,t,r){return Og(e)?[ee({},t,{queryKey:e}),r]:[e||{},t]}function Fie(e,t){if(e===!0&&t===!0||e==null&&t==null)return"all";if(e===!1&&t===!1)return"none";var r=e??!t;return r?"active":"inactive"}function jI(e,t){var r=e.active,i=e.exact,c=e.fetching,d=e.inactive,y=e.predicate,a=e.queryKey,b=e.stale;if(Og(a)){if(i){if(t.queryHash!==fT(a,t.options))return!1}else if(!dv(t.queryKey,a))return!1}var S=Fie(r,d);if(S==="none")return!1;if(S!=="all"){var k=t.isActive();if(S==="active"&&!k||S==="inactive"&&k)return!1}return!(typeof b=="boolean"&&t.isStale()!==b||typeof c=="boolean"&&t.isFetching()!==c||y&&!y(t))}function GI(e,t){var r=e.exact,i=e.fetching,c=e.predicate,d=e.mutationKey;if(Og(d)){if(!t.options.mutationKey)return!1;if(r){if(Ru(t.options.mutationKey)!==Ru(d))return!1}else if(!dv(t.options.mutationKey,d))return!1}return!(typeof i=="boolean"&&t.state.status==="loading"!==i||c&&!c(t))}function fT(e,t){var r=(t==null?void 0:t.queryKeyHashFn)||Ru;return r(e)}function Ru(e){var t=uv(e);return Bie(t)}function Bie(e){return JSON.stringify(e,function(t,r){return J2(r)?Object.keys(r).sort().reduce(function(i,c){return i[c]=r[c],i},{}):r})}function dv(e,t){return g4(uv(e),uv(t))}function g4(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(function(r){return!g4(e[r],t[r])}):!1}function hv(e,t){if(e===t)return e;var r=Array.isArray(e)&&Array.isArray(t);if(r||J2(e)&&J2(t)){for(var i=r?e.length:Object.keys(e).length,c=r?t:Object.keys(t),d=c.length,y=r?[]:{},a=0,b=0;b<d;b++){var S=r?b:c[b];y[S]=hv(e[S],t[S]),y[S]===e[S]&&a++}return i===d&&a===i?e:y}return t}function Nie(e,t){if(e&&!t||t&&!e)return!1;for(var r in e)if(e[r]!==t[r])return!1;return!0}function J2(e){if(!WI(e))return!1;var t=e.constructor;if(typeof t>"u")return!0;var r=t.prototype;return!(!WI(r)||!r.hasOwnProperty("isPrototypeOf"))}function WI(e){return Object.prototype.toString.call(e)==="[object Object]"}function Og(e){return typeof e=="string"||Array.isArray(e)}function $ie(e){return new Promise(function(t){setTimeout(t,e)})}function qI(e){Promise.resolve().then(e).catch(function(t){return setTimeout(function(){throw t})})}function y4(){if(typeof AbortController=="function")return new AbortController}var Uie=function(e){Ec(t,e);function t(){var i;return i=e.call(this)||this,i.setup=function(c){var d;if(!cv&&((d=window)!=null&&d.addEventListener)){var y=function(){return c()};return window.addEventListener("visibilitychange",y,!1),window.addEventListener("focus",y,!1),function(){window.removeEventListener("visibilitychange",y),window.removeEventListener("focus",y)}}},i}var r=t.prototype;return r.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},r.onUnsubscribe=function(){if(!this.hasListeners()){var c;(c=this.cleanup)==null||c.call(this),this.cleanup=void 0}},r.setEventListener=function(c){var d,y=this;this.setup=c,(d=this.cleanup)==null||d.call(this),this.cleanup=c(function(a){typeof a=="boolean"?y.setFocused(a):y.onFocus()})},r.setFocused=function(c){this.focused=c,c&&this.onFocus()},r.onFocus=function(){this.listeners.forEach(function(c){c()})},r.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},t}(ff),zm=new Uie,Vie=function(e){Ec(t,e);function t(){var i;return i=e.call(this)||this,i.setup=function(c){var d;if(!cv&&((d=window)!=null&&d.addEventListener)){var y=function(){return c()};return window.addEventListener("online",y,!1),window.addEventListener("offline",y,!1),function(){window.removeEventListener("online",y),window.removeEventListener("offline",y)}}},i}var r=t.prototype;return r.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},r.onUnsubscribe=function(){if(!this.hasListeners()){var c;(c=this.cleanup)==null||c.call(this),this.cleanup=void 0}},r.setEventListener=function(c){var d,y=this;this.setup=c,(d=this.cleanup)==null||d.call(this),this.cleanup=c(function(a){typeof a=="boolean"?y.setOnline(a):y.onOnline()})},r.setOnline=function(c){this.online=c,c&&this.onOnline()},r.onOnline=function(){this.listeners.forEach(function(c){c()})},r.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},t}(ff),S_=new Vie;function jie(e){return Math.min(1e3*Math.pow(2,e),3e4)}function fv(e){return typeof(e==null?void 0:e.cancel)=="function"}var _4=function(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent};function E_(e){return e instanceof _4}var v4=function(t){var r=this,i=!1,c,d,y,a;this.abort=t.abort,this.cancel=function(O){return c==null?void 0:c(O)},this.cancelRetry=function(){i=!0},this.continueRetry=function(){i=!1},this.continue=function(){return d==null?void 0:d()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(O,G){y=O,a=G});var b=function(G){r.isResolved||(r.isResolved=!0,t.onSuccess==null||t.onSuccess(G),d==null||d(),y(G))},S=function(G){r.isResolved||(r.isResolved=!0,t.onError==null||t.onError(G),d==null||d(),a(G))},k=function(){return new Promise(function(G){d=G,r.isPaused=!0,t.onPause==null||t.onPause()}).then(function(){d=void 0,r.isPaused=!1,t.onContinue==null||t.onContinue()})},P=function O(){if(!r.isResolved){var G;try{G=t.fn()}catch(F){G=Promise.reject(F)}c=function(q){if(!r.isResolved&&(S(new _4(q)),r.abort==null||r.abort(),fv(G)))try{G.cancel()}catch{}},r.isTransportCancelable=fv(G),Promise.resolve(G).then(b).catch(function(F){var q,ce;if(!r.isResolved){var B=(q=t.retry)!=null?q:3,U=(ce=t.retryDelay)!=null?ce:jie,Z=typeof U=="function"?U(r.failureCount,F):U,J=B===!0||typeof B=="number"&&r.failureCount<B||typeof B=="function"&&B(r.failureCount,F);if(i||!J){S(F);return}r.failureCount++,t.onFail==null||t.onFail(r.failureCount,F),$ie(Z).then(function(){if(!zm.isFocused()||!S_.isOnline())return k()}).then(function(){i?S(F):O()})}})}};P()},Gie=function(){function e(){this.queue=[],this.transactions=0,this.notifyFn=function(r){r()},this.batchNotifyFn=function(r){r()}}var t=e.prototype;return t.batch=function(i){var c;this.transactions++;try{c=i()}finally{this.transactions--,this.transactions||this.flush()}return c},t.schedule=function(i){var c=this;this.transactions?this.queue.push(i):qI(function(){c.notifyFn(i)})},t.batchCalls=function(i){var c=this;return function(){for(var d=arguments.length,y=new Array(d),a=0;a<d;a++)y[a]=arguments[a];c.schedule(function(){i.apply(void 0,y)})}},t.flush=function(){var i=this,c=this.queue;this.queue=[],c.length&&qI(function(){i.batchNotifyFn(function(){c.forEach(function(d){i.notifyFn(d)})})})},t.setNotifyFunction=function(i){this.notifyFn=i},t.setBatchNotifyFunction=function(i){this.batchNotifyFn=i},e}(),ri=new Gie,x4=console;function pv(){return x4}function Wie(e){x4=e}var qie=function(){function e(r){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=r.defaultOptions,this.setOptions(r.options),this.observers=[],this.cache=r.cache,this.queryKey=r.queryKey,this.queryHash=r.queryHash,this.initialState=r.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=r.meta,this.scheduleGc()}var t=e.prototype;return t.setOptions=function(i){var c;this.options=ee({},this.defaultOptions,i),this.meta=i==null?void 0:i.meta,this.cacheTime=Math.max(this.cacheTime||0,(c=this.options.cacheTime)!=null?c:5*60*1e3)},t.setDefaultOptions=function(i){this.defaultOptions=i},t.scheduleGc=function(){var i=this;this.clearGcTimeout(),Q2(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){i.optionalRemove()},this.cacheTime))},t.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},t.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},t.setData=function(i,c){var d,y,a=this.state.data,b=zie(i,a);return(d=(y=this.options).isDataEqual)!=null&&d.call(y,a,b)?b=a:this.options.structuralSharing!==!1&&(b=hv(a,b)),this.dispatch({data:b,type:"success",dataUpdatedAt:c==null?void 0:c.updatedAt}),b},t.setState=function(i,c){this.dispatch({type:"setState",state:i,setStateOptions:c})},t.cancel=function(i){var c,d=this.promise;return(c=this.retryer)==null||c.cancel(i),d?d.then(Qi).catch(Qi):Promise.resolve()},t.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},t.reset=function(){this.destroy(),this.setState(this.initialState)},t.isActive=function(){return this.observers.some(function(i){return i.options.enabled!==!1})},t.isFetching=function(){return this.state.isFetching},t.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(i){return i.getCurrentResult().isStale})},t.isStaleByTime=function(i){return i===void 0&&(i=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!m4(this.state.dataUpdatedAt,i)},t.onFocus=function(){var i,c=this.observers.find(function(d){return d.shouldFetchOnWindowFocus()});c&&c.refetch(),(i=this.retryer)==null||i.continue()},t.onOnline=function(){var i,c=this.observers.find(function(d){return d.shouldFetchOnReconnect()});c&&c.refetch(),(i=this.retryer)==null||i.continue()},t.addObserver=function(i){this.observers.indexOf(i)===-1&&(this.observers.push(i),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:i}))},t.removeObserver=function(i){this.observers.indexOf(i)!==-1&&(this.observers=this.observers.filter(function(c){return c!==i}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:i}))},t.getObserversCount=function(){return this.observers.length},t.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},t.fetch=function(i,c){var d=this,y,a,b;if(this.state.isFetching){if(this.state.dataUpdatedAt&&(c!=null&&c.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var S;return(S=this.retryer)==null||S.continueRetry(),this.promise}}if(i&&this.setOptions(i),!this.options.queryFn){var k=this.observers.find(function(U){return U.options.queryFn});k&&this.setOptions(k.options)}var P=uv(this.queryKey),O=y4(),G={queryKey:P,pageParam:void 0,meta:this.meta};Object.defineProperty(G,"signal",{enumerable:!0,get:function(){if(O)return d.abortSignalConsumed=!0,O.signal}});var F=function(){return d.options.queryFn?(d.abortSignalConsumed=!1,d.options.queryFn(G)):Promise.reject("Missing queryFn")},q={fetchOptions:c,options:this.options,queryKey:P,state:this.state,fetchFn:F,meta:this.meta};if((y=this.options.behavior)!=null&&y.onFetch){var ce;(ce=this.options.behavior)==null||ce.onFetch(q)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((a=q.fetchOptions)==null?void 0:a.meta)){var B;this.dispatch({type:"fetch",meta:(B=q.fetchOptions)==null?void 0:B.meta})}return this.retryer=new v4({fn:q.fetchFn,abort:O==null||(b=O.abort)==null?void 0:b.bind(O),onSuccess:function(Z){d.setData(Z),d.cache.config.onSuccess==null||d.cache.config.onSuccess(Z,d),d.cacheTime===0&&d.optionalRemove()},onError:function(Z){E_(Z)&&Z.silent||d.dispatch({type:"error",error:Z}),E_(Z)||(d.cache.config.onError==null||d.cache.config.onError(Z,d),pv().error(Z)),d.cacheTime===0&&d.optionalRemove()},onFail:function(){d.dispatch({type:"failed"})},onPause:function(){d.dispatch({type:"pause"})},onContinue:function(){d.dispatch({type:"continue"})},retry:q.options.retry,retryDelay:q.options.retryDelay}),this.promise=this.retryer.promise,this.promise},t.dispatch=function(i){var c=this;this.state=this.reducer(this.state,i),ri.batch(function(){c.observers.forEach(function(d){d.onQueryUpdate(i)}),c.cache.notify({query:c,type:"queryUpdated",action:i})})},t.getDefaultState=function(i){var c=typeof i.initialData=="function"?i.initialData():i.initialData,d=typeof i.initialData<"u",y=d?typeof i.initialDataUpdatedAt=="function"?i.initialDataUpdatedAt():i.initialDataUpdatedAt:0,a=typeof c<"u";return{data:c,dataUpdateCount:0,dataUpdatedAt:a?y??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:a?"success":"idle"}},t.reducer=function(i,c){var d,y;switch(c.type){case"failed":return ee({},i,{fetchFailureCount:i.fetchFailureCount+1});case"pause":return ee({},i,{isPaused:!0});case"continue":return ee({},i,{isPaused:!1});case"fetch":return ee({},i,{fetchFailureCount:0,fetchMeta:(d=c.meta)!=null?d:null,isFetching:!0,isPaused:!1},!i.dataUpdatedAt&&{error:null,status:"loading"});case"success":return ee({},i,{data:c.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:(y=c.dataUpdatedAt)!=null?y:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var a=c.error;return E_(a)&&a.revert&&this.revertState?ee({},this.revertState):ee({},i,{error:a,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return ee({},i,{isInvalidated:!0});case"setState":return ee({},i,c.state);default:return i}},e}(),Hie=function(e){Ec(t,e);function t(i){var c;return c=e.call(this)||this,c.config=i||{},c.queries=[],c.queriesMap={},c}var r=t.prototype;return r.build=function(c,d,y){var a,b=d.queryKey,S=(a=d.queryHash)!=null?a:fT(b,d),k=this.get(S);return k||(k=new qie({cache:this,queryKey:b,queryHash:S,options:c.defaultQueryOptions(d),state:y,defaultOptions:c.getQueryDefaults(b),meta:d.meta}),this.add(k)),k},r.add=function(c){this.queriesMap[c.queryHash]||(this.queriesMap[c.queryHash]=c,this.queries.push(c),this.notify({type:"queryAdded",query:c}))},r.remove=function(c){var d=this.queriesMap[c.queryHash];d&&(c.destroy(),this.queries=this.queries.filter(function(y){return y!==c}),d===c&&delete this.queriesMap[c.queryHash],this.notify({type:"queryRemoved",query:c}))},r.clear=function(){var c=this;ri.batch(function(){c.queries.forEach(function(d){c.remove(d)})})},r.get=function(c){return this.queriesMap[c]},r.getAll=function(){return this.queries},r.find=function(c,d){var y=Xl(c,d),a=y[0];return typeof a.exact>"u"&&(a.exact=!0),this.queries.find(function(b){return jI(a,b)})},r.findAll=function(c,d){var y=Xl(c,d),a=y[0];return Object.keys(a).length>0?this.queries.filter(function(b){return jI(a,b)}):this.queries},r.notify=function(c){var d=this;ri.batch(function(){d.listeners.forEach(function(y){y(c)})})},r.onFocus=function(){var c=this;ri.batch(function(){c.queries.forEach(function(d){d.onFocus()})})},r.onOnline=function(){var c=this;ri.batch(function(){c.queries.forEach(function(d){d.onOnline()})})},t}(ff),Zie=function(){function e(r){this.options=ee({},r.defaultOptions,r.options),this.mutationId=r.mutationId,this.mutationCache=r.mutationCache,this.observers=[],this.state=r.state||b4(),this.meta=r.meta}var t=e.prototype;return t.setState=function(i){this.dispatch({type:"setState",state:i})},t.addObserver=function(i){this.observers.indexOf(i)===-1&&this.observers.push(i)},t.removeObserver=function(i){this.observers=this.observers.filter(function(c){return c!==i})},t.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(Qi).catch(Qi)):Promise.resolve()},t.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},t.execute=function(){var i=this,c,d=this.state.status==="loading",y=Promise.resolve();return d||(this.dispatch({type:"loading",variables:this.options.variables}),y=y.then(function(){i.mutationCache.config.onMutate==null||i.mutationCache.config.onMutate(i.state.variables,i)}).then(function(){return i.options.onMutate==null?void 0:i.options.onMutate(i.state.variables)}).then(function(a){a!==i.state.context&&i.dispatch({type:"loading",context:a,variables:i.state.variables})})),y.then(function(){return i.executeMutation()}).then(function(a){c=a,i.mutationCache.config.onSuccess==null||i.mutationCache.config.onSuccess(c,i.state.variables,i.state.context,i)}).then(function(){return i.options.onSuccess==null?void 0:i.options.onSuccess(c,i.state.variables,i.state.context)}).then(function(){return i.options.onSettled==null?void 0:i.options.onSettled(c,null,i.state.variables,i.state.context)}).then(function(){return i.dispatch({type:"success",data:c}),c}).catch(function(a){return i.mutationCache.config.onError==null||i.mutationCache.config.onError(a,i.state.variables,i.state.context,i),pv().error(a),Promise.resolve().then(function(){return i.options.onError==null?void 0:i.options.onError(a,i.state.variables,i.state.context)}).then(function(){return i.options.onSettled==null?void 0:i.options.onSettled(void 0,a,i.state.variables,i.state.context)}).then(function(){throw i.dispatch({type:"error",error:a}),a})})},t.executeMutation=function(){var i=this,c;return this.retryer=new v4({fn:function(){return i.options.mutationFn?i.options.mutationFn(i.state.variables):Promise.reject("No mutationFn found")},onFail:function(){i.dispatch({type:"failed"})},onPause:function(){i.dispatch({type:"pause"})},onContinue:function(){i.dispatch({type:"continue"})},retry:(c=this.options.retry)!=null?c:0,retryDelay:this.options.retryDelay}),this.retryer.promise},t.dispatch=function(i){var c=this;this.state=Xie(this.state,i),ri.batch(function(){c.observers.forEach(function(d){d.onMutationUpdate(i)}),c.mutationCache.notify(c)})},e}();function b4(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function Xie(e,t){switch(t.type){case"failed":return ee({},e,{failureCount:e.failureCount+1});case"pause":return ee({},e,{isPaused:!0});case"continue":return ee({},e,{isPaused:!1});case"loading":return ee({},e,{context:t.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:t.variables});case"success":return ee({},e,{data:t.data,error:null,status:"success",isPaused:!1});case"error":return ee({},e,{data:void 0,error:t.error,failureCount:e.failureCount+1,isPaused:!1,status:"error"});case"setState":return ee({},e,t.state);default:return e}}var Kie=function(e){Ec(t,e);function t(i){var c;return c=e.call(this)||this,c.config=i||{},c.mutations=[],c.mutationId=0,c}var r=t.prototype;return r.build=function(c,d,y){var a=new Zie({mutationCache:this,mutationId:++this.mutationId,options:c.defaultMutationOptions(d),state:y,defaultOptions:d.mutationKey?c.getMutationDefaults(d.mutationKey):void 0,meta:d.meta});return this.add(a),a},r.add=function(c){this.mutations.push(c),this.notify(c)},r.remove=function(c){this.mutations=this.mutations.filter(function(d){return d!==c}),c.cancel(),this.notify(c)},r.clear=function(){var c=this;ri.batch(function(){c.mutations.forEach(function(d){c.remove(d)})})},r.getAll=function(){return this.mutations},r.find=function(c){return typeof c.exact>"u"&&(c.exact=!0),this.mutations.find(function(d){return GI(c,d)})},r.findAll=function(c){return this.mutations.filter(function(d){return GI(c,d)})},r.notify=function(c){var d=this;ri.batch(function(){d.listeners.forEach(function(y){y(c)})})},r.onFocus=function(){this.resumePausedMutations()},r.onOnline=function(){this.resumePausedMutations()},r.resumePausedMutations=function(){var c=this.mutations.filter(function(d){return d.state.isPaused});return ri.batch(function(){return c.reduce(function(d,y){return d.then(function(){return y.continue().catch(Qi)})},Promise.resolve())})},t}(ff);function Yie(){return{onFetch:function(t){t.fetchFn=function(){var r,i,c,d,y,a,b=(r=t.fetchOptions)==null||(i=r.meta)==null?void 0:i.refetchPage,S=(c=t.fetchOptions)==null||(d=c.meta)==null?void 0:d.fetchMore,k=S==null?void 0:S.pageParam,P=(S==null?void 0:S.direction)==="forward",O=(S==null?void 0:S.direction)==="backward",G=((y=t.state.data)==null?void 0:y.pages)||[],F=((a=t.state.data)==null?void 0:a.pageParams)||[],q=y4(),ce=q==null?void 0:q.signal,B=F,U=!1,Z=t.options.queryFn||function(){return Promise.reject("Missing queryFn")},J=function(ke,ze,nt,_t){return B=_t?[ze].concat(B):[].concat(B,[ze]),_t?[nt].concat(ke):[].concat(ke,[nt])},Y=function(ke,ze,nt,_t){if(U)return Promise.reject("Cancelled");if(typeof nt>"u"&&!ze&&ke.length)return Promise.resolve(ke);var Ue={queryKey:t.queryKey,signal:ce,pageParam:nt,meta:t.meta},Ee=Z(Ue),_e=Promise.resolve(Ee).then(function(be){return J(ke,nt,be,_t)});if(fv(Ee)){var $e=_e;$e.cancel=Ee.cancel}return _e},he;if(!G.length)he=Y([]);else if(P){var se=typeof k<"u",De=se?k:HI(t.options,G);he=Y(G,se,De)}else if(O){var fe=typeof k<"u",$=fe?k:Qie(t.options,G);he=Y(G,fe,$,!0)}else(function(){B=[];var Ke=typeof t.options.getNextPageParam>"u",ke=b&&G[0]?b(G[0],0,G):!0;he=ke?Y([],Ke,F[0]):Promise.resolve(J([],F[0],G[0]));for(var ze=function(Ue){he=he.then(function(Ee){var _e=b&&G[Ue]?b(G[Ue],Ue,G):!0;if(_e){var $e=Ke?F[Ue]:HI(t.options,Ee);return Y(Ee,Ke,$e)}return Promise.resolve(J(Ee,F[Ue],G[Ue]))})},nt=1;nt<G.length;nt++)ze(nt)})();var ue=he.then(function(Ke){return{pages:Ke,pageParams:B}}),Je=ue;return Je.cancel=function(){U=!0,q==null||q.abort(),fv(he)&&he.cancel()},ue}}}}function HI(e,t){return e.getNextPageParam==null?void 0:e.getNextPageParam(t[t.length-1],t)}function Qie(e,t){return e.getPreviousPageParam==null?void 0:e.getPreviousPageParam(t[0],t)}var Jie=function(){function e(r){r===void 0&&(r={}),this.queryCache=r.queryCache||new Hie,this.mutationCache=r.mutationCache||new Kie,this.defaultOptions=r.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var t=e.prototype;return t.mount=function(){var i=this;this.unsubscribeFocus=zm.subscribe(function(){zm.isFocused()&&S_.isOnline()&&(i.mutationCache.onFocus(),i.queryCache.onFocus())}),this.unsubscribeOnline=S_.subscribe(function(){zm.isFocused()&&S_.isOnline()&&(i.mutationCache.onOnline(),i.queryCache.onOnline())})},t.unmount=function(){var i,c;(i=this.unsubscribeFocus)==null||i.call(this),(c=this.unsubscribeOnline)==null||c.call(this)},t.isFetching=function(i,c){var d=Xl(i,c),y=d[0];return y.fetching=!0,this.queryCache.findAll(y).length},t.isMutating=function(i){return this.mutationCache.findAll(ee({},i,{fetching:!0})).length},t.getQueryData=function(i,c){var d;return(d=this.queryCache.find(i,c))==null?void 0:d.state.data},t.getQueriesData=function(i){return this.getQueryCache().findAll(i).map(function(c){var d=c.queryKey,y=c.state,a=y.data;return[d,a]})},t.setQueryData=function(i,c,d){var y=w_(i),a=this.defaultQueryOptions(y);return this.queryCache.build(this,a).setData(c,d)},t.setQueriesData=function(i,c,d){var y=this;return ri.batch(function(){return y.getQueryCache().findAll(i).map(function(a){var b=a.queryKey;return[b,y.setQueryData(b,c,d)]})})},t.getQueryState=function(i,c){var d;return(d=this.queryCache.find(i,c))==null?void 0:d.state},t.removeQueries=function(i,c){var d=Xl(i,c),y=d[0],a=this.queryCache;ri.batch(function(){a.findAll(y).forEach(function(b){a.remove(b)})})},t.resetQueries=function(i,c,d){var y=this,a=Xl(i,c,d),b=a[0],S=a[1],k=this.queryCache,P=ee({},b,{active:!0});return ri.batch(function(){return k.findAll(b).forEach(function(O){O.reset()}),y.refetchQueries(P,S)})},t.cancelQueries=function(i,c,d){var y=this,a=Xl(i,c,d),b=a[0],S=a[1],k=S===void 0?{}:S;typeof k.revert>"u"&&(k.revert=!0);var P=ri.batch(function(){return y.queryCache.findAll(b).map(function(O){return O.cancel(k)})});return Promise.all(P).then(Qi).catch(Qi)},t.invalidateQueries=function(i,c,d){var y,a,b,S=this,k=Xl(i,c,d),P=k[0],O=k[1],G=ee({},P,{active:(y=(a=P.refetchActive)!=null?a:P.active)!=null?y:!0,inactive:(b=P.refetchInactive)!=null?b:!1});return ri.batch(function(){return S.queryCache.findAll(P).forEach(function(F){F.invalidate()}),S.refetchQueries(G,O)})},t.refetchQueries=function(i,c,d){var y=this,a=Xl(i,c,d),b=a[0],S=a[1],k=ri.batch(function(){return y.queryCache.findAll(b).map(function(O){return O.fetch(void 0,ee({},S,{meta:{refetchPage:b==null?void 0:b.refetchPage}}))})}),P=Promise.all(k).then(Qi);return S!=null&&S.throwOnError||(P=P.catch(Qi)),P},t.fetchQuery=function(i,c,d){var y=w_(i,c,d),a=this.defaultQueryOptions(y);typeof a.retry>"u"&&(a.retry=!1);var b=this.queryCache.build(this,a);return b.isStaleByTime(a.staleTime)?b.fetch(a):Promise.resolve(b.state.data)},t.prefetchQuery=function(i,c,d){return this.fetchQuery(i,c,d).then(Qi).catch(Qi)},t.fetchInfiniteQuery=function(i,c,d){var y=w_(i,c,d);return y.behavior=Yie(),this.fetchQuery(y)},t.prefetchInfiniteQuery=function(i,c,d){return this.fetchInfiniteQuery(i,c,d).then(Qi).catch(Qi)},t.cancelMutations=function(){var i=this,c=ri.batch(function(){return i.mutationCache.getAll().map(function(d){return d.cancel()})});return Promise.all(c).then(Qi).catch(Qi)},t.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},t.executeMutation=function(i){return this.mutationCache.build(this,i).execute()},t.getQueryCache=function(){return this.queryCache},t.getMutationCache=function(){return this.mutationCache},t.getDefaultOptions=function(){return this.defaultOptions},t.setDefaultOptions=function(i){this.defaultOptions=i},t.setQueryDefaults=function(i,c){var d=this.queryDefaults.find(function(y){return Ru(i)===Ru(y.queryKey)});d?d.defaultOptions=c:this.queryDefaults.push({queryKey:i,defaultOptions:c})},t.getQueryDefaults=function(i){var c;return i?(c=this.queryDefaults.find(function(d){return dv(i,d.queryKey)}))==null?void 0:c.defaultOptions:void 0},t.setMutationDefaults=function(i,c){var d=this.mutationDefaults.find(function(y){return Ru(i)===Ru(y.mutationKey)});d?d.defaultOptions=c:this.mutationDefaults.push({mutationKey:i,defaultOptions:c})},t.getMutationDefaults=function(i){var c;return i?(c=this.mutationDefaults.find(function(d){return dv(i,d.mutationKey)}))==null?void 0:c.defaultOptions:void 0},t.defaultQueryOptions=function(i){if(i!=null&&i._defaulted)return i;var c=ee({},this.defaultOptions.queries,this.getQueryDefaults(i==null?void 0:i.queryKey),i,{_defaulted:!0});return!c.queryHash&&c.queryKey&&(c.queryHash=fT(c.queryKey,c)),c},t.defaultQueryObserverOptions=function(i){return this.defaultQueryOptions(i)},t.defaultMutationOptions=function(i){return i!=null&&i._defaulted?i:ee({},this.defaultOptions.mutations,this.getMutationDefaults(i==null?void 0:i.mutationKey),i,{_defaulted:!0})},t.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},e}(),eoe=function(e){Ec(t,e);function t(i,c){var d;return d=e.call(this)||this,d.client=i,d.options=c,d.trackedProps=[],d.selectError=null,d.bindMethods(),d.setOptions(c),d}var r=t.prototype;return r.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},r.onSubscribe=function(){this.listeners.length===1&&(this.currentQuery.addObserver(this),ZI(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},r.onUnsubscribe=function(){this.listeners.length||this.destroy()},r.shouldFetchOnReconnect=function(){return eS(this.currentQuery,this.options,this.options.refetchOnReconnect)},r.shouldFetchOnWindowFocus=function(){return eS(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},r.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},r.setOptions=function(c,d){var y=this.options,a=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(c),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=y.queryKey),this.updateQuery();var b=this.hasListeners();b&&XI(this.currentQuery,a,this.options,y)&&this.executeFetch(),this.updateResult(d),b&&(this.currentQuery!==a||this.options.enabled!==y.enabled||this.options.staleTime!==y.staleTime)&&this.updateStaleTimeout();var S=this.computeRefetchInterval();b&&(this.currentQuery!==a||this.options.enabled!==y.enabled||S!==this.currentRefetchInterval)&&this.updateRefetchInterval(S)},r.getOptimisticResult=function(c){var d=this.client.defaultQueryObserverOptions(c),y=this.client.getQueryCache().build(this.client,d);return this.createResult(y,d)},r.getCurrentResult=function(){return this.currentResult},r.trackResult=function(c,d){var y=this,a={},b=function(k){y.trackedProps.includes(k)||y.trackedProps.push(k)};return Object.keys(c).forEach(function(S){Object.defineProperty(a,S,{configurable:!1,enumerable:!0,get:function(){return b(S),c[S]}})}),(d.useErrorBoundary||d.suspense)&&b("error"),a},r.getNextResult=function(c){var d=this;return new Promise(function(y,a){var b=d.subscribe(function(S){S.isFetching||(b(),S.isError&&(c!=null&&c.throwOnError)?a(S.error):y(S))})})},r.getCurrentQuery=function(){return this.currentQuery},r.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},r.refetch=function(c){return this.fetch(ee({},c,{meta:{refetchPage:c==null?void 0:c.refetchPage}}))},r.fetchOptimistic=function(c){var d=this,y=this.client.defaultQueryObserverOptions(c),a=this.client.getQueryCache().build(this.client,y);return a.fetch().then(function(){return d.createResult(a,y)})},r.fetch=function(c){var d=this;return this.executeFetch(c).then(function(){return d.updateResult(),d.currentResult})},r.executeFetch=function(c){this.updateQuery();var d=this.currentQuery.fetch(this.options,c);return c!=null&&c.throwOnError||(d=d.catch(Qi)),d},r.updateStaleTimeout=function(){var c=this;if(this.clearStaleTimeout(),!(cv||this.currentResult.isStale||!Q2(this.options.staleTime))){var d=m4(this.currentResult.dataUpdatedAt,this.options.staleTime),y=d+1;this.staleTimeoutId=setTimeout(function(){c.currentResult.isStale||c.updateResult()},y)}},r.computeRefetchInterval=function(){var c;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(c=this.options.refetchInterval)!=null?c:!1},r.updateRefetchInterval=function(c){var d=this;this.clearRefetchInterval(),this.currentRefetchInterval=c,!(cv||this.options.enabled===!1||!Q2(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(function(){(d.options.refetchIntervalInBackground||zm.isFocused())&&d.executeFetch()},this.currentRefetchInterval))},r.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},r.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},r.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},r.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},r.createResult=function(c,d){var y=this.currentQuery,a=this.options,b=this.currentResult,S=this.currentResultState,k=this.currentResultOptions,P=c!==y,O=P?c.state:this.currentQueryInitialState,G=P?this.currentResult:this.previousQueryResult,F=c.state,q=F.dataUpdatedAt,ce=F.error,B=F.errorUpdatedAt,U=F.isFetching,Z=F.status,J=!1,Y=!1,he;if(d.optimisticResults){var se=this.hasListeners(),De=!se&&ZI(c,d),fe=se&&XI(c,y,d,a);(De||fe)&&(U=!0,q||(Z="loading"))}if(d.keepPreviousData&&!F.dataUpdateCount&&(G!=null&&G.isSuccess)&&Z!=="error")he=G.data,q=G.dataUpdatedAt,Z=G.status,J=!0;else if(d.select&&typeof F.data<"u")if(b&&F.data===(S==null?void 0:S.data)&&d.select===this.selectFn)he=this.selectResult;else try{this.selectFn=d.select,he=d.select(F.data),d.structuralSharing!==!1&&(he=hv(b==null?void 0:b.data,he)),this.selectResult=he,this.selectError=null}catch(Je){pv().error(Je),this.selectError=Je}else he=F.data;if(typeof d.placeholderData<"u"&&typeof he>"u"&&(Z==="loading"||Z==="idle")){var $;if(b!=null&&b.isPlaceholderData&&d.placeholderData===(k==null?void 0:k.placeholderData))$=b.data;else if($=typeof d.placeholderData=="function"?d.placeholderData():d.placeholderData,d.select&&typeof $<"u")try{$=d.select($),d.structuralSharing!==!1&&($=hv(b==null?void 0:b.data,$)),this.selectError=null}catch(Je){pv().error(Je),this.selectError=Je}typeof $<"u"&&(Z="success",he=$,Y=!0)}this.selectError&&(ce=this.selectError,he=this.selectResult,B=Date.now(),Z="error");var ue={status:Z,isLoading:Z==="loading",isSuccess:Z==="success",isError:Z==="error",isIdle:Z==="idle",data:he,dataUpdatedAt:q,error:ce,errorUpdatedAt:B,failureCount:F.fetchFailureCount,errorUpdateCount:F.errorUpdateCount,isFetched:F.dataUpdateCount>0||F.errorUpdateCount>0,isFetchedAfterMount:F.dataUpdateCount>O.dataUpdateCount||F.errorUpdateCount>O.errorUpdateCount,isFetching:U,isRefetching:U&&Z!=="loading",isLoadingError:Z==="error"&&F.dataUpdatedAt===0,isPlaceholderData:Y,isPreviousData:J,isRefetchError:Z==="error"&&F.dataUpdatedAt!==0,isStale:pT(c,d),refetch:this.refetch,remove:this.remove};return ue},r.shouldNotifyListeners=function(c,d){if(!d)return!0;var y=this.options,a=y.notifyOnChangeProps,b=y.notifyOnChangePropsExclusions;if(!a&&!b||a==="tracked"&&!this.trackedProps.length)return!0;var S=a==="tracked"?this.trackedProps:a;return Object.keys(c).some(function(k){var P=k,O=c[P]!==d[P],G=S==null?void 0:S.some(function(q){return q===k}),F=b==null?void 0:b.some(function(q){return q===k});return O&&!F&&(!S||G)})},r.updateResult=function(c){var d=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!Nie(this.currentResult,d)){var y={cache:!0};(c==null?void 0:c.listeners)!==!1&&this.shouldNotifyListeners(this.currentResult,d)&&(y.listeners=!0),this.notify(ee({},y,c))}},r.updateQuery=function(){var c=this.client.getQueryCache().build(this.client,this.options);if(c!==this.currentQuery){var d=this.currentQuery;this.currentQuery=c,this.currentQueryInitialState=c.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(d==null||d.removeObserver(this),c.addObserver(this))}},r.onQueryUpdate=function(c){var d={};c.type==="success"?d.onSuccess=!0:c.type==="error"&&!E_(c.error)&&(d.onError=!0),this.updateResult(d),this.hasListeners()&&this.updateTimers()},r.notify=function(c){var d=this;ri.batch(function(){c.onSuccess?(d.options.onSuccess==null||d.options.onSuccess(d.currentResult.data),d.options.onSettled==null||d.options.onSettled(d.currentResult.data,null)):c.onError&&(d.options.onError==null||d.options.onError(d.currentResult.error),d.options.onSettled==null||d.options.onSettled(void 0,d.currentResult.error)),c.listeners&&d.listeners.forEach(function(y){y(d.currentResult)}),c.cache&&d.client.getQueryCache().notify({query:d.currentQuery,type:"observerResultsUpdated"})})},t}(ff);function toe(e,t){return t.enabled!==!1&&!e.state.dataUpdatedAt&&!(e.state.status==="error"&&t.retryOnMount===!1)}function ZI(e,t){return toe(e,t)||e.state.dataUpdatedAt>0&&eS(e,t,t.refetchOnMount)}function eS(e,t,r){if(t.enabled!==!1){var i=typeof r=="function"?r(e):r;return i==="always"||i!==!1&&pT(e,t)}return!1}function XI(e,t,r,i){return r.enabled!==!1&&(e!==t||i.enabled===!1)&&(!r.suspense||e.state.status!=="error")&&pT(e,r)}function pT(e,t){return e.isStaleByTime(t.staleTime)}var noe=function(e){Ec(t,e);function t(i,c){var d;return d=e.call(this)||this,d.client=i,d.setOptions(c),d.bindMethods(),d.updateResult(),d}var r=t.prototype;return r.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},r.setOptions=function(c){this.options=this.client.defaultMutationOptions(c)},r.onUnsubscribe=function(){if(!this.listeners.length){var c;(c=this.currentMutation)==null||c.removeObserver(this)}},r.onMutationUpdate=function(c){this.updateResult();var d={listeners:!0};c.type==="success"?d.onSuccess=!0:c.type==="error"&&(d.onError=!0),this.notify(d)},r.getCurrentResult=function(){return this.currentResult},r.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},r.mutate=function(c,d){return this.mutateOptions=d,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,ee({},this.options,{variables:typeof c<"u"?c:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},r.updateResult=function(){var c=this.currentMutation?this.currentMutation.state:b4(),d=ee({},c,{isLoading:c.status==="loading",isSuccess:c.status==="success",isError:c.status==="error",isIdle:c.status==="idle",mutate:this.mutate,reset:this.reset});this.currentResult=d},r.notify=function(c){var d=this;ri.batch(function(){d.mutateOptions&&(c.onSuccess?(d.mutateOptions.onSuccess==null||d.mutateOptions.onSuccess(d.currentResult.data,d.currentResult.variables,d.currentResult.context),d.mutateOptions.onSettled==null||d.mutateOptions.onSettled(d.currentResult.data,null,d.currentResult.variables,d.currentResult.context)):c.onError&&(d.mutateOptions.onError==null||d.mutateOptions.onError(d.currentResult.error,d.currentResult.variables,d.currentResult.context),d.mutateOptions.onSettled==null||d.mutateOptions.onSettled(void 0,d.currentResult.error,d.currentResult.variables,d.currentResult.context))),c.listeners&&d.listeners.forEach(function(y){y(d.currentResult)})})},t}(ff),roe=xh.unstable_batchedUpdates;ri.setBatchNotifyFunction(roe);var ioe=console;Wie(ioe);var KI=Qe.createContext(void 0),w4=Qe.createContext(!1);function S4(e){return e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=KI),window.ReactQueryClientContext):KI}var E4=function(){var t=Qe.useContext(S4(Qe.useContext(w4)));if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},ooe=function(t){var r=t.client,i=t.contextSharing,c=i===void 0?!1:i,d=t.children;Qe.useEffect(function(){return r.mount(),function(){r.unmount()}},[r]);var y=S4(c);return Qe.createElement(w4.Provider,{value:c},Qe.createElement(y.Provider,{value:r},d))};function aoe(){var e=!1;return{clearReset:function(){e=!1},reset:function(){e=!0},isReset:function(){return e}}}var soe=Qe.createContext(aoe()),loe=function(){return Qe.useContext(soe)};function T4(e,t,r){return typeof t=="function"?t.apply(void 0,r):typeof t=="boolean"?t:!!e}function coe(e,t,r){var i=Qe.useRef(!1),c=Qe.useState(0),d=c[1],y=Oie(e,t,r),a=E4(),b=Qe.useRef();b.current?b.current.setOptions(y):b.current=new noe(a,y);var S=b.current.getCurrentResult();Qe.useEffect(function(){i.current=!0;var P=b.current.subscribe(ri.batchCalls(function(){i.current&&d(function(O){return O+1})}));return function(){i.current=!1,P()}},[]);var k=Qe.useCallback(function(P,O){b.current.mutate(P,O).catch(Qi)},[]);if(S.error&&T4(void 0,b.current.options.useErrorBoundary,[S.error]))throw S.error;return ee({},S,{mutate:k,mutateAsync:S.mutate})}function uoe(e,t){var r=Qe.useRef(!1),i=Qe.useState(0),c=i[1],d=E4(),y=loe(),a=d.defaultQueryObserverOptions(e);a.optimisticResults=!0,a.onError&&(a.onError=ri.batchCalls(a.onError)),a.onSuccess&&(a.onSuccess=ri.batchCalls(a.onSuccess)),a.onSettled&&(a.onSettled=ri.batchCalls(a.onSettled)),a.suspense&&(typeof a.staleTime!="number"&&(a.staleTime=1e3),a.cacheTime===0&&(a.cacheTime=1)),(a.suspense||a.useErrorBoundary)&&(y.isReset()||(a.retryOnMount=!1));var b=Qe.useState(function(){return new t(d,a)}),S=b[0],k=S.getOptimisticResult(a);if(Qe.useEffect(function(){r.current=!0,y.clearReset();var P=S.subscribe(ri.batchCalls(function(){r.current&&c(function(O){return O+1})}));return S.updateResult(),function(){r.current=!1,P()}},[y,S]),Qe.useEffect(function(){S.setOptions(a,{listeners:!1})},[a,S]),a.suspense&&k.isLoading)throw S.fetchOptimistic(a).then(function(P){var O=P.data;a.onSuccess==null||a.onSuccess(O),a.onSettled==null||a.onSettled(O,null)}).catch(function(P){y.clearReset(),a.onError==null||a.onError(P),a.onSettled==null||a.onSettled(void 0,P)});if(k.isError&&!y.isReset()&&!k.isFetching&&T4(a.suspense,a.useErrorBoundary,[k.error,S.getCurrentQuery()]))throw k.error;return a.notifyOnChangeProps==="tracked"&&(k=S.trackResult(k,a)),k}function doe(e,t,r){var i=w_(e,t,r);return uoe(i,eoe)}const YI={latitude:35.8527,longitude:128.4971},hoe=()=>{const{navigate:e}=ea(),{open:t,Drawer:r,toggleDrawer:i}=d4(),[c,d]=H.useState([]),[y,a]=H.useState(void 0),b=H.useRef(YI),S="ontouchstart"in window,k=()=>{c.length>5&&d([]),t&&i(),P()};H.useEffect(()=>{b.current===YI&&Lie({setPosition:a}),P()},[navigator]);const{mutate:P}=coe("get",()=>Die({position:y}),{onMutate(){d([])},onSuccess:O=>{console.log(O),O.forEach((G,F)=>{setTimeout(()=>{p4({setWooyeons:d,post_id:G.post_id,distance:70*Math.random(),image:G.image[0].img_url})},100*F+50*Math.random())})}});return en(gc,{children:[ne(Cg,{styles:{".use_drawer > .MuiPaper-root":{paddingBottom:"6rem"}}}),en(Rn,{sx:Rie,children:[ne("div",{className:"radar_circle",children:ne("div",{children:ne("div",{})})}),ne(Nr,{variant:"h5",sx:{marginBottom:"40px"},children:""}),ne(Rn,{className:"wooyeonArea",children:c.map((O,G)=>ne(bie,{post_id:O.post_id,image:O.image,pos:O.pos,onClick:()=>e(`detail/${O.post_id}`)},O.image+G.toString()))})]}),ne(Pie,{open:t,searchItems:k,navigate:e}),!S&&ne(Rn,{onClick:i,sx:h4}),ne(r,{open:t,toggleDrawer:i,drawerBleeding:65,children:en(Rn,{children:[ne(Nr,{variant:"h6",children:" "}),ne(Mie,{}),ne(Nr,{variant:"h6",children:" "}),ne(kie,{})]})})]})},foe={height:"100%",paddingBottom:2,"& .drawerHeader":{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",paddingBottom:1,px:1},"& .calendarHeader":{display:"flex",alignItems:"center",width:"100%",gap:"7px"},"& .calendarHeader .MuiTypography-root":{width:"calc(100% / 7 - 6px)",color:"#444",textAlign:"center"},"& .calendarHeader span:nth-of-type(1)":{color:"#FF4141"},"& .calendarHeader .MuiTypography-root:nth-last-of-type(1)":{color:"#679BFF"}},poe=["S","M","T","W","T","F","S"],moe=e=>en(Rn,{sx:foe,children:[en(Rn,{className:"drawerHeader",children:[ne(Nr,{variant:"h6",children:"Calendar"}),ne(Nr,{variant:"body2",children:e})]}),ne(Rn,{className:"calendarHeader",children:poe.map((t,r)=>ne(Nr,{variant:"caption",children:t},t+r))})]}),goe={width:"100%",display:"flex",flexWrap:"wrap",rowGap:"5px",paddingBottom:5,"& .calendarItem":{width:"calc((100% / 7) - 8px)",margin:"4px",aspectRatio:"1",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#EEF1EE",borderRadius:"50%"},"& .weekendItem":{backgroundColor:"#d8dbd8"},"& .todayItem":{backgroundColor:"#ED6729",color:"#fff"},"& .disableItem":{opacity:.3},"& .calendarItem:hover":{opacity:.8},"& .disableItem:hover":{opacity:.3}},yoe=({root:e,rootMargin:t="0px",threshold:r=0,onIntersect:i})=>{const[c,d]=H.useState(null);return H.useEffect(()=>{if(!c)return;const y=new IntersectionObserver(i,{root:e,rootMargin:t,threshold:r});return y.observe(c),()=>y.unobserve(c)},[i,e,t,c,r]),{setTarget:d}};function _oe(e){const r=e,i=[],c=new Date(r.getTime()-864e5*100),d=new Date(r.getTime()+864e5*14);let y=c;for(;y<=d;)i.push(y),y=new Date(y.getTime()+864e5);return i}function voe({setDisplayDate:e}){const t=new Date;t.setHours(0,0,0,0);const r=H.useRef(null),i=_oe(t);H.useEffect(()=>{var y,a;r.current&&((a=(y=r.current)==null?void 0:y.querySelector(".todayItem"))==null||a.scrollIntoView({block:"center"}))},[]);const c=([{isIntersecting:y}])=>{console.log(` : ${y}`),e("")},{setTarget:d}=yoe({onIntersect:c});return en(Rn,{sx:goe,ref:r,children:[ne(Rn,{sx:{width:`calc((100% / 7) * ${i[0].getDay()})`}}),i.map(y=>{let a="calendarItem";return y.getTime()===t.getTime()?a+=" todayItem":(y.getDay()%6===0&&(a+=" weekendItem"),y.getDate()===1&&(a+=" monthItem"),y.getTime()>t.getTime()&&(a+=" disableItem")),ne("div",{className:a,ref:y.getTime()===t.getTime()?d:null,children:y.getDate()},y.toString())})]})}const xoe="modulepreload",boe=function(e){return"/"+e},QI={},C4=function(t,r,i){if(!r||r.length===0)return t();const c=document.getElementsByTagName("link");return Promise.all(r.map(d=>{if(d=boe(d),d in QI)return;QI[d]=!0;const y=d.endsWith(".css"),a=y?'[rel="stylesheet"]':"";if(!!i)for(let k=c.length-1;k>=0;k--){const P=c[k];if(P.href===d&&(!y||P.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${a}`))return;const S=document.createElement("link");if(S.rel=y?"stylesheet":xoe,y||(S.as="script",S.crossOrigin=""),S.href=d,document.head.appendChild(S),y)return new Promise((k,P)=>{S.addEventListener("load",k),S.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${d}`)))})})).then(()=>t())},woe=H.createContext(null);function Soe(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function JI(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function eP(e,t){const r=t.viewState||t;let i=!1;if("longitude"in r&&"latitude"in r){const c=e.center;e.center=new c.constructor(r.longitude,r.latitude),i=i||c!==e.center}if("zoom"in r){const c=e.zoom;e.zoom=r.zoom,i=i||c!==e.zoom}if("bearing"in r){const c=e.bearing;e.bearing=r.bearing,i=i||c!==e.bearing}if("pitch"in r){const c=e.pitch;e.pitch=r.pitch,i=i||c!==e.pitch}return r.padding&&!e.isPaddingEqual(r.padding)&&(i=!0,e.padding=r.padding),i}const Eoe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function tP(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const i of e.layers)t[i.id]=i;const r=e.layers.map(i=>{const c=t[i.ref];let d=null;if("interactive"in i&&(d={...i},delete d.interactive),c){d=d||{...i},delete d.ref;for(const y of Eoe)y in c&&(d[y]=c[y])}return d||i});return{...e,layers:r}}function Toe(e,t){const r=Array.isArray(e)?e[0]:e?e.x:0,i=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,d=Array.isArray(t)?t[1]:t?t.y:0;return r===c&&i===d}function Ql(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Ql(e[r],t[r]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(const c of r)if(!t.hasOwnProperty(c)||!Ql(e[c],t[c]))return!1;return!0}return!1}const nP={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},Ew={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},rP={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},Coe=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],Moe=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Jh{constructor(t,r,i){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const d=this.props[rP[c.type]];d&&d(c)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const d=this.props[nP[c.type]];d&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),d(c),delete c.features)},this._onCameraEvent=c=>{if(!this._internalUpdate){const d=this.props[Ew[c.type]];d&&d(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=t,this.props=r,this._initialize(i)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const r=this.props;this.props=t;const i=this._updateSettings(t,r);i&&this._createShadowTransform(this._map);const c=this._updateSize(t),d=this._updateViewState(t,!0);this._updateStyle(t,r),this._updateStyleComponents(t,r),this._updateHandlers(t,r),(i||c||d&&!this._map.isMoving())&&this.redraw()}static reuse(t,r){const i=Jh.savedMaps.pop();if(!i)return null;const c=i.map,d=c.getContainer();for(r.className=d.className;d.childNodes.length>0;)r.appendChild(d.childNodes[0]);c._container=r,i.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:y}=t;return y&&(y.bounds?c.fitBounds(y.bounds,{...y.fitBoundsOptions,duration:0}):i._updateViewState(y,!1)),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),c.triggerRepaint(),i}_initialize(t){const{props:r}=this,i={...r,...r.initialViewState,accessToken:r.mapboxAccessToken||Aoe()||null,container:t,style:tP(r.mapStyle)},c=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[c.longitude||0,c.latitude||0],zoom:c.zoom||0,pitch:c.pitch||0,bearing:c.bearing||0}),r.gl){const S=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=S,r.gl)}const d=new this._MapClass(i);c.padding&&d.setPadding(c.padding),r.cursor&&(d.getCanvas().style.cursor=r.cursor),this._createShadowTransform(d);const y=d._render;d._render=S=>{this._inRender=!0,y.call(d,S),this._inRender=!1};const a=d._renderTaskQueue.run;d._renderTaskQueue.run=S=>{a.call(d._renderTaskQueue,S),this._onBeforeRepaint()},d.on("render",()=>this._onAfterRepaint());const b=d.fire;d.fire=this._fireEvent.bind(this,b),d.on("resize",()=>{this._renderTransform.resize(d.transform.width,d.transform.height)}),d.on("styledata",()=>this._updateStyleComponents(this.props,{})),d.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const S in nP)d.on(S,this._onPointerEvent);for(const S in Ew)d.on(S,this._onCameraEvent);for(const S in rP)d.on(S,this._onEvent);this._map=d}recycle(){const r=this.map.getContainer().querySelector("[mapboxgl-children]");r==null||r.remove(),Jh.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const r=Soe(t.transform);t.painter.transform=r,this._renderTransform=r}_updateSize(t){const{viewState:r}=t;if(r){const i=this._map;if(r.width!==i.transform.width||r.height!==i.transform.height)return i.resize(),!0}return!1}_updateViewState(t,r){if(this._internalUpdate)return!1;const i=this._map,c=this._renderTransform,{zoom:d,pitch:y,bearing:a}=c,b=i.isMoving();b&&(c.cameraElevationReference="sea");const S=eP(c,{...JI(i.transform),...t});if(b&&(c.cameraElevationReference="ground"),S&&r){const k=this._deferredEvents;k.move=!0,k.zoom||(k.zoom=d!==c.zoom),k.rotate||(k.rotate=a!==c.bearing),k.pitch||(k.pitch=y!==c.pitch)}return b||eP(i.transform,t),S}_updateSettings(t,r){const i=this._map;let c=!1;for(const d of Coe)d in t&&!Ql(t[d],r[d])&&(c=!0,i[`set${d[0].toUpperCase()}${d.slice(1)}`](t[d]));return c}_updateStyle(t,r){if(t.cursor!==r.cursor&&(this._map.getCanvas().style.cursor=t.cursor),t.mapStyle!==r.mapStyle){const i={diff:t.styleDiffing};return"localIdeographFontFamily"in t&&(i.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(tP(t.mapStyle),i),!0}return!1}_updateStyleComponents(t,r){const i=this._map;let c=!1;return i.style.loaded()&&("light"in t&&!Ql(t.light,r.light)&&(c=!0,i.setLight(t.light)),"fog"in t&&!Ql(t.fog,r.fog)&&(c=!0,i.setFog(t.fog)),"terrain"in t&&!Ql(t.terrain,r.terrain)&&(!t.terrain||i.getSource(t.terrain.source))&&(c=!0,i.setTerrain(t.terrain))),c}_updateHandlers(t,r){const i=this._map;let c=!1;for(const d of Moe){const y=t[d];Ql(y,r[d])||(c=!0,y?i[d].enable(y):i[d].disable())}return c}_queryRenderedFeatures(t){const r=this._map,{interactiveLayerIds:i=[]}=this.props;try{return r.queryRenderedFeatures(t,{layers:i.filter(r.getLayer.bind(r))})}catch{return[]}}_updateHover(t){var r;const{props:i}=this;if(i.interactiveLayerIds&&(i.onMouseMove||i.onMouseEnter||i.onMouseLeave)){const d=t.type,y=((r=this._hoveredFeatures)===null||r===void 0?void 0:r.length)>0,a=this._queryRenderedFeatures(t.point),b=a.length>0;!b&&y&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=a,b&&!y&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=d}else this._hoveredFeatures=null}_fireEvent(t,r,i){const c=this._map,d=c.transform,y=typeof r=="string"?r:r.type;return y==="move"&&this._updateViewState(this.props,!1),y in Ew&&(typeof r=="object"&&(r.viewState=JI(d)),this._map.isMoving())?(c.transform=this._renderTransform,t.call(c,r,i),c.transform=d,c):(t.call(c,r,i),c)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const i in this._deferredEvents)this._deferredEvents[i]&&t.fire(i);this._internalUpdate=!1;const r=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=r}}}Jh.savedMaps=[];function Aoe(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{}.MapboxAccessToken}catch{}try{e=e||{}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const koe=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function Roe(e,t){if(!e)return null;const r=e.map,i={getMap:()=>r,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:c=>e.transform.locationPoint(t.LngLat.convert(c)),unproject:c=>e.transform.pointLocation(t.Point.convert(c)),queryTerrainElevation:(c,d)=>{const y=r.transform;r.transform=e.transform;const a=r.queryTerrainElevation(c,d);return r.transform=y,a}};for(const c of Ioe(r))!(c in i)&&!koe.includes(c)&&(i[c]=r[c].bind(r));return i}function Ioe(e){const t=new Set;let r=e;for(;r;){for(const i of Object.getOwnPropertyNames(r))i[0]!=="_"&&typeof e[i]=="function"&&i!=="fire"&&i!=="setEventedParent"&&t.add(i);r=Object.getPrototypeOf(r)}return Array.from(t)}const Poe=typeof document<"u"?H.useLayoutEffect:H.useEffect,Loe=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function Doe(e,t){for(const r of Loe)r in t&&(e[r]=t[r]);t.RTLTextPlugin&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(t.RTLTextPlugin,r=>{r&&console.error(r)},!1)}const X1=H.createContext(null),zoe={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:e=>console.error(e.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},K1=H.forwardRef((e,t)=>{const r=H.useContext(woe),[i,c]=H.useState(null),d=H.useRef(),{current:y}=H.useRef({mapLib:null,map:null});H.useEffect(()=>{const S=e.mapLib;let k=!0,P;return Promise.resolve(S||C4(()=>Promise.resolve().then(()=>Hoe),void 0)).then(O=>{if(k){if(O.Map||(O=O.default),!O||!O.Map)throw new Error("Invalid mapLib");if(Doe(O,e),O.supported(e))e.reuseMaps&&(P=Jh.reuse(e,d.current)),P||(P=new Jh(O.Map,e,d.current)),y.map=Roe(P,O),y.mapLib=O,c(P),r==null||r.onMapMount(y.map,e.id);else throw new Error("Map is not supported by this browser")}}).catch(O=>{e.onError({type:"error",target:null,originalEvent:null,error:O})}),()=>{k=!1,P&&(r==null||r.onMapUnmount(e.id),e.reuseMaps?P.recycle():P.destroy())}},[]),Poe(()=>{i&&i.setProps(e)}),H.useImperativeHandle(t,()=>y.map,[i]);const a=H.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),b={height:"100%"};return H.createElement("div",{id:e.id,ref:d,style:a},i&&H.createElement(X1.Provider,{value:y},H.createElement("div",{"mapboxgl-children":"",style:b},e.children)))});K1.displayName="Map";K1.defaultProps=zoe;const Ooe=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Yu(e,t){if(!e||!t)return;const r=e.style;for(const i in t){const c=t[i];Number.isFinite(c)&&!Ooe.test(i)?r[i]=`${c}px`:r[i]=c}}const Foe={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};function M4(e){const{map:t,mapLib:r}=H.useContext(X1),i=H.useRef({props:e});i.current.props=e;const c=H.useMemo(()=>{let d=!1;H.Children.forEach(e.children,b=>{b&&(d=!0)});const y={...e,element:d?document.createElement("div"):null},a=new r.Marker(y).setLngLat([e.longitude,e.latitude]);return a.getElement().addEventListener("click",b=>{var S,k;(k=(S=i.current.props).onClick)===null||k===void 0||k.call(S,{type:"click",target:a,originalEvent:b})}),a.on("dragstart",b=>{var S,k;const P=b;P.lngLat=c.getLngLat(),(k=(S=i.current.props).onDragStart)===null||k===void 0||k.call(S,P)}),a.on("drag",b=>{var S,k;const P=b;P.lngLat=c.getLngLat(),(k=(S=i.current.props).onDrag)===null||k===void 0||k.call(S,P)}),a.on("dragend",b=>{var S,k;const P=b;P.lngLat=c.getLngLat(),(k=(S=i.current.props).onDragEnd)===null||k===void 0||k.call(S,P)}),a},[]);return H.useEffect(()=>(c.addTo(t.getMap()),()=>{c.remove()}),[]),H.useEffect(()=>{Yu(c.getElement(),e.style)},[e.style]),(c.getLngLat().lng!==e.longitude||c.getLngLat().lat!==e.latitude)&&c.setLngLat([e.longitude,e.latitude]),e.offset&&!Toe(c.getOffset(),e.offset)&&c.setOffset(e.offset),c.isDraggable()!==e.draggable&&c.setDraggable(e.draggable),c.getRotation()!==e.rotation&&c.setRotation(e.rotation),c.getRotationAlignment()!==e.rotationAlignment&&c.setRotationAlignment(e.rotationAlignment),c.getPitchAlignment()!==e.pitchAlignment&&c.setPitchAlignment(e.pitchAlignment),c.getPopup()!==e.popup&&c.setPopup(e.popup),fc.createPortal(e.children,c.getElement())}M4.defaultProps=Foe;H.memo(M4);function iP(e){return new Set(e?e.trim().split(/\s+/):[])}function Boe(e){const{map:t,mapLib:r}=H.useContext(X1),i=H.useMemo(()=>document.createElement("div"),[]),c=H.useRef({props:e});c.current.props=e;const d=H.useMemo(()=>{const y={...e},a=new r.Popup(y).setLngLat([e.longitude,e.latitude]);return a.once("open",b=>{var S,k;(k=(S=c.current.props).onOpen)===null||k===void 0||k.call(S,b)}),a},[]);if(H.useEffect(()=>{const y=a=>{var b,S;(S=(b=c.current.props).onClose)===null||S===void 0||S.call(b,a)};return d.on("close",y),d.setDOMContent(i).addTo(t.getMap()),()=>{d.off("close",y),d.isOpen()&&d.remove()}},[]),H.useEffect(()=>{Yu(d.getElement(),e.style)},[e.style]),d.isOpen()&&((d.getLngLat().lng!==e.longitude||d.getLngLat().lat!==e.latitude)&&d.setLngLat([e.longitude,e.latitude]),e.offset&&!Ql(d.options.offset,e.offset)&&d.setOffset(e.offset),(d.options.anchor!==e.anchor||d.options.maxWidth!==e.maxWidth)&&(d.options.anchor=e.anchor,d.setMaxWidth(e.maxWidth)),d.options.className!==e.className)){const y=iP(d.options.className),a=iP(e.className);for(const b of y)a.has(b)||d.removeClassName(b);for(const b of a)y.has(b)||d.addClassName(b);d.options.className=e.className}return fc.createPortal(e.children,i)}H.memo(Boe);function Fg(e,t,r,i){const c=H.useContext(X1),d=H.useMemo(()=>e(c),[]);return H.useEffect(()=>{const y=i||r||t,a=typeof t=="function"&&typeof r=="function"?t:null,b=typeof r=="function"?r:typeof t=="function"?t:null,{map:S}=c;return S.hasControl(d)||(S.addControl(d,y==null?void 0:y.position),a&&a(c)),()=>{b&&b(c),S.hasControl(d)&&S.removeControl(d)}},[]),d}function Noe(e){const t=Fg(({mapLib:r})=>new r.AttributionControl(e),{position:e.position});return H.useEffect(()=>{Yu(t._container,e.style)},[e.style]),null}H.memo(Noe);function $oe(e){const t=Fg(({mapLib:r})=>new r.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return H.useEffect(()=>{Yu(t._controlContainer,e.style)},[e.style]),null}const Uoe=H.memo($oe),A4=H.forwardRef((e,t)=>{const r=H.useRef({props:e}),i=Fg(({mapLib:c})=>{const d=new c.GeolocateControl(e),y=d._setupUI;return d._setupUI=a=>{d._container.hasChildNodes()||y(a)},d.on("geolocate",a=>{var b,S;(S=(b=r.current.props).onGeolocate)===null||S===void 0||S.call(b,a)}),d.on("error",a=>{var b,S;(S=(b=r.current.props).onError)===null||S===void 0||S.call(b,a)}),d.on("outofmaxbounds",a=>{var b,S;(S=(b=r.current.props).onOutOfMaxBounds)===null||S===void 0||S.call(b,a)}),d.on("trackuserlocationstart",a=>{var b,S;(S=(b=r.current.props).onTrackUserLocationStart)===null||S===void 0||S.call(b,a)}),d.on("trackuserlocationend",a=>{var b,S;(S=(b=r.current.props).onTrackUserLocationEnd)===null||S===void 0||S.call(b,a)}),d},{position:e.position});return r.current.props=e,H.useImperativeHandle(t,()=>({trigger:()=>i.trigger()}),[]),H.useEffect(()=>{Yu(i._container,e.style)},[e.style]),null});A4.displayName="GeolocateControl";const Voe=H.memo(A4);function joe(e){const t=Fg(({mapLib:r})=>new r.NavigationControl(e),{position:e.position});return H.useEffect(()=>{Yu(t._container,e.style)},[e.style]),null}const Goe=H.memo(joe),Woe={unit:"metric",maxWidth:100};function k4(e){const t=Fg(({mapLib:r})=>new r.ScaleControl(e),{position:e.position});return(t.options.unit!==e.unit||t.options.maxWidth!==e.maxWidth)&&(t.options.maxWidth=e.maxWidth,t.setUnit(e.unit)),H.useEffect(()=>{Yu(t._container,e.style)},[e.style]),null}k4.defaultProps=Woe;const qoe=H.memo(k4);var R4={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(Ai,function(){var r,i,c;function d(a,b){if(!r)r=b;else if(!i)i=b;else{var S="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+r+")(sharedChunk); ("+i+")(sharedChunk); self.onerror = null;",k={};r(k),c=b(k),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(c.workerUrl=window.URL.createObjectURL(new Blob([S],{type:"text/javascript"})))}}d(["exports"],function(a){var b=typeof self<"u"?self:{},S="2.14.1";let k;const P={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(k==null){const o=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{k={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):o}catch{k=o}}return k},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!P.API_URL)return null;try{const o=new URL(P.API_URL);return o.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":o.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},O={supported:!1,testSupport:function(o){!q&&F&&(ce?B(o):G=o)}};let G,F,q=!1,ce=!1;function B(o){const n=o.createTexture();o.bindTexture(o.TEXTURE_2D,n);try{if(o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,F),o.isContextLost())return;O.supported=!0}catch{}o.deleteTexture(n),q=!0}b.document&&(F=b.document.createElement("img"),F.onload=function(){G&&B(G),G=null,ce=!0},F.onerror=function(){q=!0,G=null},F.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const U="01";var Z=J;function J(o,n,s,u){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(u-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=u}J.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,u=0;u<8;u++){var f=this.sampleCurveX(s)-o;if(Math.abs(f)<n)return s;var m=this.sampleCurveDerivativeX(s);if(Math.abs(m)<1e-6)break;s-=f/m}var _=0,x=1;for(s=o,u=0;u<20&&(f=this.sampleCurveX(s),!(Math.abs(f-o)<n));u++)o>f?_=s:x=s,s=.5*(x-_)+_;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var Y=he;function he(o,n){this.x=o,this.y=n}he.prototype={clone:function(){return new he(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,s=o.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),s=Math.sin(o),u=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=u,this},_rotateAround:function(o,n){var s=Math.cos(o),u=Math.sin(o),f=n.y+u*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-u*(this.y-n.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},he.convert=function(o){return o instanceof he?o:Array.isArray(o)?new he(o[0],o[1]):o};const se=Math.PI/180,De=180/Math.PI;function fe(o){return o*se}function $(o){return o*De}const ue=[[0,0],[1,0],[1,1],[0,1]];function Je(o){if(o<=0)return 0;if(o>=1)return 1;const n=o*o,s=n*o;return 4*(o<.5?s:3*(o-n)+s-.75)}function Ke(o,n,s,u){const f=new Z(o,n,s,u);return function(m){return f.solve(m)}}const ke=Ke(.25,.1,.25,1);function ze(o,n,s){return Math.min(s,Math.max(n,o))}function nt(o,n,s){return(s=ze((s-o)/(n-o),0,1))*s*(3-2*s)}function _t(o,n,s){const u=s-n,f=((o-n)%u+u)%u+n;return f===n?s:f}function Ue(o,n,s){if(!o.length)return s(null,[]);let u=o.length;const f=new Array(o.length);let m=null;o.forEach((_,x)=>{n(_,(E,T)=>{E&&(m=E),f[x]=T,--u==0&&s(m,f)})})}function Ee(o){const n=[];for(const s in o)n.push(o[s]);return n}function _e(o,...n){for(const s of n)for(const u in s)o[u]=s[u];return o}let $e=1;function be(){return $e++}function Me(){return function o(n){return n?(n^Math.random()*(16>>n/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,o)}()}function Ge(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))}function ut(o){return!!o&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(o)}function ht(o,n){o.forEach(s=>{n[s]&&(n[s]=n[s].bind(n))})}function Lt(o,n){return o.indexOf(n,o.length-n.length)!==-1}function zt(o,n,s){const u={};for(const f in o)u[f]=n.call(s||this,o[f],f,o);return u}function Rt(o,n,s){const u={};for(const f in o)n.call(s||this,o[f],f,o)&&(u[f]=o[f]);return u}function St(o){return Array.isArray(o)?o.map(St):typeof o=="object"&&o?zt(o,St):o}const Et={};function Ct(o){Et[o]||(typeof console<"u"&&console.warn(o),Et[o]=!0)}function Kt(o,n,s){return(s.y-o.y)*(n.x-o.x)>(n.y-o.y)*(s.x-o.x)}function Nt(o){let n=0;for(let s,u,f=0,m=o.length,_=m-1;f<m;_=f++)s=o[f],u=o[_],n+=(u.x-s.x)*(s.y+u.y);return n}function pn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Pn(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,u,f,m)=>{const _=f||m;return n[u]=!_||_.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n}let vn=null;function or(o){if(vn==null){const n=o.navigator?o.navigator.userAgent:null;vn=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return vn}function Wr(o){try{const n=b[o];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch{return!1}}function Ln(o,n){return[o[4*n],o[4*n+1],o[4*n+2],o[4*n+3]]}const Xn="mapbox-tiles";let hr,fr,Ut=500,rn=50;function En(){try{return b.caches}catch{}}function Tn(){En()&&!hr&&(hr=b.caches.open(Xn))}function Cn(o){const n=o.indexOf("?");if(n<0)return o;const s=function(f){const m=f.indexOf("?");return m>0?f.slice(m+1).split("&"):[]}(o),u=s.filter(f=>{const m=f.split("=");return m[0]==="language"||m[0]==="worldview"});return u.length?`${o.slice(0,n)}?${u.join("&")}`:o.slice(0,n)}let ln=1/0;const Ne={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Ne);class Ze extends Error{constructor(n,s,u){s===401&&Jt(u)&&(n+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(n),this.status=s,this.url=u}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const lt=pn()?()=>self.worker&&self.worker.referrer:()=>(b.location.protocol==="blob:"?b.parent:b).location.href,Gt=function(o,n){if(!(/^file:/.test(s=o.url)||/^file:/.test(lt())&&!/^\w+:/.test(s))){if(b.fetch&&b.Request&&b.AbortController&&b.Request.prototype.hasOwnProperty("signal"))return function(u,f){const m=new b.AbortController,_=new b.Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:lt(),referrerPolicy:u.referrerPolicy,signal:m.signal});let x=!1,E=!1;const T=(A=_.url).indexOf("sku=")>0&&Jt(A);var A;u.type==="json"&&_.headers.set("Accept","application/json");const I=(N,V,X)=>{if(E)return;if(N&&N.message!=="SecurityError"&&Ct(N),V&&X)return L(V);const re=Date.now();b.fetch(_).then(ge=>{if(ge.ok){const Te=T?ge.clone():null;return L(ge,Te,re)}return f(new Ze(ge.statusText,ge.status,u.url))}).catch(ge=>{ge.name!=="AbortError"&&f(new Error(`${ge.message} ${u.url}`))})},L=(N,V,X)=>{(u.type==="arrayBuffer"?N.arrayBuffer():u.type==="json"?N.json():N.text()).then(re=>{E||(V&&X&&function(ge,Te,me){if(Tn(),!hr)return;const Se={status:Te.status,statusText:Te.statusText,headers:new b.Headers};Te.headers.forEach((it,et)=>Se.headers.set(et,it));const Re=Pn(Te.headers.get("Cache-Control")||"");if(Re["no-store"])return;Re["max-age"]&&Se.headers.set("Expires",new Date(me+1e3*Re["max-age"]).toUTCString());const Ce=Se.headers.get("Expires");Ce&&(new Date(Ce).getTime()-me<42e4||function(it,et){if(fr===void 0)try{new Response(new ReadableStream),fr=!0}catch{fr=!1}fr?et(it.body):it.blob().then(et)}(Te,it=>{const et=new b.Response(it,Se);Tn(),hr&&hr.then(gt=>gt.put(Cn(ge.url),et)).catch(gt=>Ct(gt.message))}))}(_,V,X),x=!0,f(null,re,N.headers.get("Cache-Control"),N.headers.get("Expires")))}).catch(re=>{E||f(new Error(re.message))})};return T?function(N,V){if(Tn(),!hr)return V(null);const X=Cn(N.url);hr.then(re=>{re.match(X).then(ge=>{const Te=function(me){if(!me)return!1;const Se=new Date(me.headers.get("Expires")||0),Re=Pn(me.headers.get("Cache-Control")||"");return Se>Date.now()&&!Re["no-cache"]}(ge);re.delete(X),Te&&re.put(X,ge.clone()),V(null,ge,Te)}).catch(V)}).catch(V)}(_,I):I(null,null),{cancel:()=>{E=!0,x||m.abort()}}}(o,n);if(pn()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n,void 0,!0)}var s;return function(u,f){const m=new b.XMLHttpRequest;m.open(u.method||"GET",u.url,!0),u.type==="arrayBuffer"&&(m.responseType="arraybuffer");for(const _ in u.headers)m.setRequestHeader(_,u.headers[_]);return u.type==="json"&&(m.responseType="text",m.setRequestHeader("Accept","application/json")),m.withCredentials=u.credentials==="include",m.onerror=()=>{f(new Error(m.statusText))},m.onload=()=>{if((m.status>=200&&m.status<300||m.status===0)&&m.response!==null){let _=m.response;if(u.type==="json")try{_=JSON.parse(m.response)}catch(x){return f(x)}f(null,_,m.getResponseHeader("Cache-Control"),m.getResponseHeader("Expires"))}else f(new Ze(m.statusText,m.status,u.url))},m.send(u.body),{cancel:()=>m.abort()}}(o,n)},tn=function(o,n){return Gt(_e(o,{type:"arrayBuffer"}),n)};function Be(o){const n=b.document.createElement("a");return n.href=o,n.protocol===b.document.location.protocol&&n.host===b.document.location.host}const Le="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let ft,yt;ft=[],yt=0;const It=function(o,n){if(O.supported&&(o.headers||(o.headers={}),o.headers.accept="image/webp,*/*"),yt>=P.MAX_PARALLEL_IMAGE_REQUESTS){const m={requestParameters:o,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return ft.push(m),m}yt++;let s=!1;const u=()=>{if(!s)for(s=!0,yt--;ft.length&&yt<P.MAX_PARALLEL_IMAGE_REQUESTS;){const m=ft.shift(),{requestParameters:_,callback:x,cancelled:E}=m;E||(m.cancel=It(_,x).cancel)}},f=tn(o,(m,_,x,E)=>{u(),m?n(m):_&&(b.createImageBitmap?function(T,A){const I=new b.Blob([new Uint8Array(T)],{type:"image/png"});b.createImageBitmap(I).then(L=>{A(null,L)}).catch(L=>{A(new Error(`Could not load image because of ${L.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(_,(T,A)=>n(T,A,x,E)):function(T,A){const I=new b.Image,L=b.URL;I.onload=()=>{A(null,I),L.revokeObjectURL(I.src),I.onload=null,b.requestAnimationFrame(()=>{I.src=Le})},I.onerror=()=>A(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const N=new b.Blob([new Uint8Array(T)],{type:"image/png"});I.src=T.byteLength?L.createObjectURL(N):Le}(_,(T,A)=>n(T,A,x,E)))});return{cancel:()=>{f.cancel(),u()}}},Ft="NO_ACCESS_TOKEN";function Qt(o){return o.indexOf("mapbox:")===0}function Jt(o){return P.API_URL_REGEX.test(o)}function an(o){return P.API_CDN_URL_REGEX.test(o)}function bn(o){return P.API_STYLE_REGEX.test(o)&&!qn(o)}function qn(o){return P.API_SPRITE_REGEX.test(o)}const br=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function jn(o){const n=o.match(br);if(!n)throw new Error("Unable to parse URL object");return{protocol:n[1],authority:n[2],path:n[3]||"/",params:n[4]?n[4].split("&"):[]}}function ar(o){const n=o.params.length?`?${o.params.join("&")}`:"";return`${o.protocol}://${o.authority}${o.path}${n}`}function qr(o){if(!o)return null;const n=o.split(".");if(!n||n.length!==3)return null;try{return JSON.parse(decodeURIComponent(b.atob(n[1]).split("").map(s=>"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class pi{constructor(n){this.type=n,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(n){const s=qr(P.ACCESS_TOKEN);let u="";return u=s&&s.u?b.btoa(encodeURIComponent(s.u).replace(/%([0-9A-F]{2})/g,(f,m)=>String.fromCharCode(+("0x"+m)))):P.ACCESS_TOKEN||"",n?`mapbox.eventData.${n}:${u}`:`mapbox.eventData:${u}`}fetchEventData(){const n=Wr("localStorage"),s=this.getStorageKey(),u=this.getStorageKey("uuid");if(n)try{const f=b.localStorage.getItem(s);f&&(this.eventData=JSON.parse(f));const m=b.localStorage.getItem(u);m&&(this.anonId=m)}catch{Ct("Unable to read from LocalStorage")}}saveEventData(){const n=Wr("localStorage"),s=this.getStorageKey(),u=this.getStorageKey("uuid");if(n)try{b.localStorage.setItem(u,this.anonId),Object.keys(this.eventData).length>=1&&b.localStorage.setItem(s,JSON.stringify(this.eventData))}catch{Ct("Unable to write to LocalStorage")}}processRequests(n){}postEvent(n,s,u,f){if(!P.EVENTS_URL)return;const m=jn(P.EVENTS_URL);m.params.push(`access_token=${f||P.ACCESS_TOKEN||""}`);const _={event:this.type,created:new Date(n).toISOString()},x=s?_e(_,s):_,E={url:ar(m),headers:{"Content-Type":"text/plain"},body:JSON.stringify([x])};this.pendingRequest=function(T,A){return Gt(_e(T,{method:"POST"}),A)}(E,T=>{this.pendingRequest=null,u(T),this.saveEventData(),this.processRequests(f)})}queueRequest(n,s){this.queue.push(n),this.processRequests(s)}}const pe=new class extends pi{constructor(o){super("appUserTurnstile"),this._customAccessToken=o}postTurnstileEvent(o,n){P.EVENTS_URL&&P.ACCESS_TOKEN&&Array.isArray(o)&&o.some(s=>Qt(s)||Jt(s))&&this.queueRequest(Date.now(),n)}processRequests(o){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const n=qr(P.ACCESS_TOKEN),s=n?n.u:P.ACCESS_TOKEN;let u=s!==this.eventData.tokenU;ut(this.anonId)||(this.anonId=Me(),u=!0);const f=this.queue.shift();if(this.eventData.lastSuccess){const m=new Date(this.eventData.lastSuccess),_=new Date(f),x=(f-this.eventData.lastSuccess)/864e5;u=u||x>=1||x<-1||m.getDate()!==_.getDate()}else u=!0;u?this.postEvent(f,{sdkIdentifier:"mapbox-gl-js",sdkVersion:S,skuId:U,"enabled.telemetry":!1,userId:this.anonId},m=>{m||(this.eventData.lastSuccess=f,this.eventData.tokenU=s)},o):this.processRequests()}},j=pe.postTurnstileEvent.bind(pe),K=new class extends pi{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(o,n,s,u){this.skuToken=n,this.errorCb=u,P.EVENTS_URL&&(s||P.ACCESS_TOKEN?this.queueRequest({id:o,timestamp:Date.now()},s):this.errorCb(new Error(Ft)))}processRequests(o){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:s}=this.queue.shift();n&&this.success[n]||(this.anonId||this.fetchEventData(),ut(this.anonId)||(this.anonId=Me()),this.postEvent(s,{sdkIdentifier:"mapbox-gl-js",sdkVersion:S,skuId:U,skuToken:this.skuToken,userId:this.anonId},u=>{u?this.errorCb(u):n&&(this.success[n]=!0)},o))}},oe=K.postMapLoadEvent.bind(K),ve=new class extends pi{constructor(){super("gljs.performance")}postPerformanceEvent(o,n){P.EVENTS_URL&&(o||P.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:n},o)}processRequests(o){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:n,performanceData:s}=this.queue.shift(),u=function(f){const m=b.performance.getEntriesByType("resource"),_=b.performance.getEntriesByType("mark"),x=function(L){const N={};if(L){for(const V in L)if(V!=="other")for(const X of L[V]){const re=`${V}ResolveRangeMin`,ge=`${V}ResolveRangeMax`,Te=`${V}RequestCount`,me=`${V}RequestCachedCount`;N[re]=Math.min(N[re]||1/0,X.startTime),N[ge]=Math.max(N[ge]||-1/0,X.responseEnd);const Se=Re=>{N[Re]===void 0&&(N[Re]=0),++N[Re]};X.transferSize!==void 0&&X.transferSize===0&&Se(me),Se(Te)}}return N}(function(L,N){const V={};if(L)for(const X of L){const re=N(X);V[re]===void 0&&(V[re]=[]),V[re].push(X)}return V}(m,qt)),E=b.devicePixelRatio,T=b.navigator.connection||b.navigator.mozConnection||b.navigator.webkitConnection,A={counters:[],metadata:[],attributes:[]},I=(L,N,V)=>{V!=null&&L.push({name:N,value:V.toString()})};for(const L in x)I(A.counters,L,x[L]);if(f.interactionRange[0]!==1/0&&f.interactionRange[1]!==-1/0&&(I(A.counters,"interactionRangeMin",f.interactionRange[0]),I(A.counters,"interactionRangeMax",f.interactionRange[1])),_)for(const L of Object.keys(je)){const N=je[L],V=_.find(X=>X.name===N);V&&I(A.counters,N,V.startTime)}return I(A.counters,"visibilityHidden",f.visibilityHidden),I(A.attributes,"style",function(L){if(L)for(const N of L){const V=N.name.split("?")[0];if(bn(V)){const X=V.split("/").slice(-2);if(X.length===2)return`mapbox://styles/${X[0]}/${X[1]}`}}}(m)),I(A.attributes,"terrainEnabled",f.terrainEnabled?"true":"false"),I(A.attributes,"fogEnabled",f.fogEnabled?"true":"false"),I(A.attributes,"projection",f.projection),I(A.attributes,"zoom",f.zoom),I(A.metadata,"devicePixelRatio",E),I(A.metadata,"connectionEffectiveType",T?T.effectiveType:void 0),I(A.metadata,"navigatorUserAgent",b.navigator.userAgent),I(A.metadata,"screenWidth",b.screen.width),I(A.metadata,"screenHeight",b.screen.height),I(A.metadata,"windowWidth",b.innerWidth),I(A.metadata,"windowHeight",b.innerHeight),I(A.metadata,"mapWidth",f.width/E),I(A.metadata,"mapHeight",f.height/E),I(A.metadata,"webglRenderer",f.renderer),I(A.metadata,"webglVendor",f.vendor),I(A.metadata,"sdkVersion",S),I(A.metadata,"sdkIdentifier","mapbox-gl-js"),A}(s);for(const f of u.metadata);for(const f of u.counters);for(const f of u.attributes);this.postEvent(n,u,()=>{},o)}},Pe=ve.postPerformanceEvent.bind(ve),We=new class extends pi{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(o,n,s,u){if(!P.API_URL||!P.SESSION_PATH)return;const f=jn(P.API_URL+P.SESSION_PATH);f.params.push(`sku=${n||""}`),f.params.push(`access_token=${u||P.ACCESS_TOKEN||""}`);const m={url:ar(f),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(_,x){return Gt(_e(_,{method:"GET"}),x)}(m,_=>{this.pendingRequest=null,s(_),this.saveEventData(),this.processRequests(u)})}getSessionAPI(o,n,s,u){this.skuToken=n,this.errorCb=u,P.SESSION_PATH&&P.API_URL&&(s||P.ACCESS_TOKEN?this.queueRequest({id:o,timestamp:Date.now()},s):this.errorCb(new Error(Ft)))}processRequests(o){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:s}=this.queue.shift();n&&this.success[n]||this.getSession(s,this.skuToken,u=>{u?this.errorCb(u):n&&(this.success[n]=!0)},o)}},Ve=We.getSessionAPI.bind(We),Oe=new Set,je={create:"create",load:"load",fullLoad:"fullLoad"},mt={mark(o){b.performance.mark(o)},measure(o,n,s){b.performance.measure(o,n,s)}};function qt(o){const n=o.name.split("?")[0];return an(n)&&n.includes("mapbox-gl.js")?"javascript":an(n)&&n.includes("mapbox-gl.css")?"css":function(s){return P.API_FONTS_REGEX.test(s)}(n)?"fontRange":qn(n)?"sprite":bn(n)?"style":function(s){return P.API_TILEJSON_REGEX.test(s)}(n)?"tilejson":"other"}const At=b.performance;function cn(o){const n=o?o.url.toString():void 0;return At.getEntriesByName(n)}let gn,mn,An,zn;const ir={now:()=>An!==void 0?An:b.performance.now(),setNow(o){An=o},restoreNow(){An=void 0},frame(o){const n=b.requestAnimationFrame(o);return{cancel:()=>b.cancelAnimationFrame(n)}},getImageData(o,n=0){const{width:s,height:u}=o;zn||(zn=b.document.createElement("canvas"));const f=zn.getContext("2d",{willReadFrequently:!0});if(!f)throw new Error("failed to create canvas 2d context");return(s>zn.width||u>zn.height)&&(zn.width=s,zn.height=u),f.clearRect(-n,-n,s+2*n,u+2*n),f.drawImage(o,0,0,s,u),f.getImageData(-n,-n,s+2*n,u+2*n)},resolveURL:o=>(gn||(gn=b.document.createElement("a")),gn.href=o,gn.href),get devicePixelRatio(){return b.devicePixelRatio},get prefersReducedMotion(){return!!b.matchMedia&&(mn==null&&(mn=b.matchMedia("(prefers-reduced-motion: reduce)")),mn.matches)}};function wn(o,n,s){s[o]&&s[o].indexOf(n)!==-1||(s[o]=s[o]||[],s[o].push(n))}function gr(o,n,s){if(s&&s[o]){const u=s[o].indexOf(n);u!==-1&&s[o].splice(u,1)}}class yr{constructor(n,s={}){_e(this,s),this.type=n}}class Ga extends yr{constructor(n,s={}){super("error",_e({error:n},s))}}class xa{on(n,s){return this._listeners=this._listeners||{},wn(n,s,this._listeners),this}off(n,s){return gr(n,s,this._listeners),gr(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},wn(n,s,this._oneTimeListeners),this):new Promise(u=>this.once(n,u))}fire(n,s){typeof n=="string"&&(n=new yr(n,s||{}));const u=n.type;if(this.listens(u)){n.target=this;const f=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const x of f)x.call(this,n);const m=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const x of m)gr(u,x,this._oneTimeListeners),x.call(this,n);const _=this._eventedParent;_&&(_e(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(n))}else n instanceof Ga&&console.error(n.error);return this}listens(n){return!!(this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n))}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var pt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function ba(o,...n){for(const s of n)for(const u in s)o[u]=s[u];return o}function ai(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Wa(o){if(Array.isArray(o))return o.map(Wa);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const s in o)n[s]=Wa(o[s]);return n}return ai(o)}class Bg extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}var na=Bg;class ul{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[u,f]of s)this.bindings[u]=f}concat(n){return new ul(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}var Ng=ul;const dl={kind:"null"},$t={kind:"number"},Gn={kind:"string"},Nn={kind:"boolean"},ra={kind:"color"},bs={kind:"object"},Fn={kind:"value"},Cc={kind:"collator"},hl={kind:"formatted"},fl={kind:"resolvedImage"};function Zi(o,n){return{kind:"array",itemType:o,N:n}}function Cr(o){if(o.kind==="array"){const n=Cr(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const $g=[dl,$t,Gn,Nn,ra,hl,bs,Zi(Fn),fl];function no(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!no(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const s of $g)if(!no(s,n))return null}}return`Expected ${Cr(o)} but found ${Cr(n)} instead.`}function pf(o,n){return n.some(s=>s.kind===o.kind)}function ws(o,n){return n.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}var mf,Qu={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Mc(o){return(o=Math.round(o))<0?0:o>255?255:o}function Ss(o){return Mc(o[o.length-1]==="%"?parseFloat(o)/100*255:parseInt(o))}function pl(o){return(n=o[o.length-1]==="%"?parseFloat(o)/100:parseFloat(o))<0?0:n>1?1:n;var n}function gf(o,n,s){return s<0?s+=1:s>1&&(s-=1),6*s<1?o+(n-o)*s*6:2*s<1?n:3*s<2?o+(n-o)*(2/3-s)*6:o}try{mf={}.parseCSSColor=function(o){var n,s=o.replace(/ /g,"").toLowerCase();if(s in Qu)return Qu[s].slice();if(s[0]==="#")return s.length===4?(n=parseInt(s.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:s.length===7&&(n=parseInt(s.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var u=s.indexOf("("),f=s.indexOf(")");if(u!==-1&&f+1===s.length){var m=s.substr(0,u),_=s.substr(u+1,f-(u+1)).split(","),x=1;switch(m){case"rgba":if(_.length!==4)return null;x=pl(_.pop());case"rgb":return _.length!==3?null:[Ss(_[0]),Ss(_[1]),Ss(_[2]),x];case"hsla":if(_.length!==4)return null;x=pl(_.pop());case"hsl":if(_.length!==3)return null;var E=(parseFloat(_[0])%360+360)%360/360,T=pl(_[1]),A=pl(_[2]),I=A<=.5?A*(T+1):A+T-A*T,L=2*A-I;return[Mc(255*gf(L,I,E+1/3)),Mc(255*gf(L,I,E)),Mc(255*gf(L,I,E-1/3)),x];default:return null}}return null}}catch{}class ro{constructor(n,s,u,f=1){this.r=n,this.g=s,this.b=u,this.a=f}static parse(n){if(!n)return;if(n instanceof ro)return n;if(typeof n!="string")return;const s=mf(n);return s?new ro(s[0]/255*s[3],s[1]/255*s[3],s[2]/255*s[3],s[3]):void 0}toString(){const[n,s,u,f]=this.toArray();return`rgba(${Math.round(n)},${Math.round(s)},${Math.round(u)},${f})`}toArray(){const{r:n,g:s,b:u,a:f}=this;return f===0?[0,0,0,0]:[255*n/f,255*s/f,255*u/f,f]}toArray01(){const{r:n,g:s,b:u,a:f}=this;return f===0?[0,0,0,0]:[n/f,s/f,u/f,f]}toArray01PremultipliedAlpha(){const{r:n,g:s,b:u,a:f}=this;return[n,s,u,f]}}ro.black=new ro(0,0,0,1),ro.white=new ro(1,1,1,1),ro.transparent=new ro(0,0,0,0),ro.red=new ro(1,0,0,1),ro.blue=new ro(0,0,1,1);var Jr=ro;class Ju{constructor(n,s,u){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ac{constructor(n,s,u,f,m){this.text=n.normalize?n.normalize():n,this.image=s,this.scale=u,this.fontStack=f,this.textColor=m}}class io{constructor(n){this.sections=n}static fromString(n){return new io([new Ac(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof io?n:io.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}serialize(){const n=["format"];for(const s of this.sections){if(s.image){n.push(["image",s.image.name]);continue}n.push(s.text);const u={};s.fontStack&&(u["text-font"]=["literal",s.fontStack.split(",")]),s.scale&&(u["font-scale"]=s.scale),s.textColor&&(u["text-color"]=["rgba"].concat(s.textColor.toArray())),n.push(u)}return n}}class Xi{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Xi({name:n,available:!1}):null}serialize(){return["image",this.name]}}function Ug(o,n,s,u){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:`Invalid rgba value [${[o,n,s,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof u=="number"?[o,n,s,u]:[o,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ed(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof Jr||o instanceof Ju||o instanceof io||o instanceof Xi)return!0;if(Array.isArray(o)){for(const n of o)if(!ed(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!ed(o[n]))return!1;return!0}return!1}function mi(o){if(o===null)return dl;if(typeof o=="string")return Gn;if(typeof o=="boolean")return Nn;if(typeof o=="number")return $t;if(o instanceof Jr)return ra;if(o instanceof Ju)return Cc;if(o instanceof io)return hl;if(o instanceof Xi)return fl;if(Array.isArray(o)){const n=o.length;let s;for(const u of o){const f=mi(u);if(s){if(s===f)continue;s=Fn;break}s=f}return Zi(s||Fn,n)}return bs}function kc(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof Jr||o instanceof io||o instanceof Xi?o.toString():JSON.stringify(o)}class yf{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!ed(n[1]))return s.error("invalid value");const u=n[1];let f=mi(u);const m=s.expectedType;return f.kind!=="array"||f.N!==0||!m||m.kind!=="array"||typeof m.N=="number"&&m.N!==0||(f=m),new yf(f,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Jr?["rgba"].concat(this.value.toArray()):this.value instanceof io?this.value.serialize():this.value}}var Rc=yf,ki=class{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}};const td={string:Gn,number:$t,boolean:Nn,object:bs};class ml{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let u,f=1;const m=n[0];if(m==="array"){let x,E;if(n.length>2){const T=n[1];if(typeof T!="string"||!(T in td)||T==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);x=td[T],f++}else x=Fn;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);E=n[2],f++}u=Zi(x,E)}else u=td[m];const _=[];for(;f<n.length;f++){const x=s.parse(n[f],f,Fn);if(!x)return null;_.push(x)}return new ml(u,_)}evaluate(n){for(let s=0;s<this.args.length;s++){const u=this.args[s].evaluate(n);if(!no(this.type,mi(u)))return u;if(s===this.args.length-1)throw new ki(`Expected value to be of type ${Cr(this.type)}, but found ${Cr(mi(u))} instead.`)}return null}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=this.type,s=[n.kind];if(n.kind==="array"){const u=n.itemType;if(u.kind==="string"||u.kind==="number"||u.kind==="boolean"){s.push(u.kind);const f=n.N;(typeof f=="number"||this.args.length>1)&&s.push(f)}}return s.concat(this.args.map(u=>u.serialize()))}}var wa=ml;class Ic{constructor(n){this.type=hl,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const u=n[1];if(!Array.isArray(u)&&typeof u=="object")return s.error("First argument must be an image or text section.");const f=[];let m=!1;for(let _=1;_<=n.length-1;++_){const x=n[_];if(m&&typeof x=="object"&&!Array.isArray(x)){m=!1;let E=null;if(x["font-scale"]&&(E=s.parse(x["font-scale"],1,$t),!E))return null;let T=null;if(x["text-font"]&&(T=s.parse(x["text-font"],1,Zi(Gn)),!T))return null;let A=null;if(x["text-color"]&&(A=s.parse(x["text-color"],1,ra),!A))return null;const I=f[f.length-1];I.scale=E,I.font=T,I.textColor=A}else{const E=s.parse(n[_],1,Fn);if(!E)return null;const T=E.type.kind;if(T!=="string"&&T!=="value"&&T!=="null"&&T!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,f.push({content:E,scale:null,font:null,textColor:null})}}return new Ic(f)}evaluate(n){return new io(this.sections.map(s=>{const u=s.content.evaluate(n);return mi(u)===fl?new Ac("",u,null,null,null):new Ac(kc(u),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}serialize(){const n=["format"];for(const s of this.sections){n.push(s.content.serialize());const u={};s.scale&&(u["font-scale"]=s.scale.serialize()),s.font&&(u["text-font"]=s.font.serialize()),s.textColor&&(u["text-color"]=s.textColor.serialize()),n.push(u)}return n}}class nd{constructor(n){this.type=fl,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const u=s.parse(n[1],1,Gn);return u?new nd(u):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),u=Xi.fromString(s);return u&&n.availableImages&&(u.available=n.availableImages.indexOf(s)>-1),u}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Y1={"to-boolean":Nn,"to-color":ra,"to-number":$t,"to-string":Gn};class _f{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const u=n[0];if((u==="to-boolean"||u==="to-string")&&n.length!==2)return s.error("Expected one argument.");const f=Y1[u],m=[];for(let _=1;_<n.length;_++){const x=s.parse(n[_],_,Fn);if(!x)return null;m.push(x)}return new _f(f,m)}evaluate(n){if(this.type.kind==="boolean")return!!this.args[0].evaluate(n);if(this.type.kind==="color"){let s,u;for(const f of this.args){if(s=f.evaluate(n),u=null,s instanceof Jr)return s;if(typeof s=="string"){const m=n.parseColor(s);if(m)return m}else if(Array.isArray(s)&&(u=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Ug(s[0],s[1],s[2],s[3]),!u))return new Jr(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new ki(u||`Could not parse color from value '${typeof s=="string"?s:String(JSON.stringify(s))}'`)}if(this.type.kind==="number"){let s=null;for(const u of this.args){if(s=u.evaluate(n),s===null)return 0;const f=Number(s);if(!isNaN(f))return f}throw new ki(`Could not convert ${JSON.stringify(s)} to number.`)}return this.type.kind==="formatted"?io.fromString(kc(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?Xi.fromString(kc(this.args[0].evaluate(n))):kc(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Ic([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new nd(this.args[0]).serialize();const n=[`to-${this.type.kind}`];return this.eachChild(s=>{n.push(s.serialize())}),n}}var gl=_f;const Vg=["Unknown","Point","LineString","Polygon"];var Pc=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Vg[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const o=this.featureDistanceData.center,n=this.featureDistanceData.scale,{x:s,y:u}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(s*n-o[0])+this.featureDistanceData.bearing[1]*(u*n-o[1])}return 0}parseColor(o){let n=this._parseColorCache[o];return n||(n=this._parseColorCache[o]=Jr.parse(o)),n}};class yl{constructor(n,s,u,f){this.name=n,this.type=s,this._evaluate=u,this.args=f}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(n=>n.serialize()))}static parse(n,s){const u=n[0],f=yl.definitions[u];if(!f)return s.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const m=Array.isArray(f)?f[0]:f.type,_=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,x=_.filter(([T])=>!Array.isArray(T)||T.length===n.length-1);let E=null;for(const[T,A]of x){E=new Ef(s.registry,s.path,null,s.scope);const I=[];let L=!1;for(let N=1;N<n.length;N++){const V=n[N],X=Array.isArray(T)?T[N-1]:T.type,re=E.parse(V,1+I.length,X);if(!re){L=!0;break}I.push(re)}if(!L)if(Array.isArray(T)&&T.length!==I.length)E.error(`Expected ${T.length} arguments, but found ${I.length} instead.`);else{for(let N=0;N<I.length;N++){const V=Array.isArray(T)?T[N]:T.type,X=I[N];E.concat(N+1).checkSubtype(V,X.type)}if(E.errors.length===0)return new yl(u,m,A,I)}}if(x.length===1)s.errors.push(...E.errors);else{const T=(x.length?x:_).map(([I])=>{return L=I,Array.isArray(L)?`(${L.map(Cr).join(", ")})`:`(${Cr(L.type)}...)`;var L}).join(" | "),A=[];for(let I=1;I<n.length;I++){const L=s.parse(n[I],1+A.length);if(!L)return null;A.push(Cr(L.type))}s.error(`Expected arguments of type ${T}, but found (${A.join(", ")}) instead.`)}return null}static register(n,s){yl.definitions=s;for(const u in s)n[u]=yl}}var qa=yl;class rd{constructor(n,s,u){this.type=Cc,this.locale=u,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const u=n[1];if(typeof u!="object"||Array.isArray(u))return s.error("Collator options argument must be an object.");const f=s.parse(u["case-sensitive"]!==void 0&&u["case-sensitive"],1,Nn);if(!f)return null;const m=s.parse(u["diacritic-sensitive"]!==void 0&&u["diacritic-sensitive"],1,Nn);if(!m)return null;let _=null;return u.locale&&(_=s.parse(u.locale,1,Gn),!_)?null:new rd(f,m,_)}evaluate(n){return new Ju(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}serialize(){const n={};return n["case-sensitive"]=this.caseSensitive.serialize(),n["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(n.locale=this.locale.serialize()),["collator",n]}}const Ha=8192;function Eo(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function Lc(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function jg(o,n){const s=(180+o[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,f=Math.pow(2,n.z);return[Math.round(s*f*Ha),Math.round(u*f*Ha)]}function Gg(o,n,s){const u=o[0]-n[0],f=o[1]-n[1],m=o[0]-s[0],_=o[1]-s[1];return u*_-m*f==0&&u*m<=0&&f*_<=0}function id(o,n){let s=!1;for(let _=0,x=n.length;_<x;_++){const E=n[_];for(let T=0,A=E.length;T<A-1;T++){if(Gg(o,E[T],E[T+1]))return!1;(f=E[T])[1]>(u=o)[1]!=(m=E[T+1])[1]>u[1]&&u[0]<(m[0]-f[0])*(u[1]-f[1])/(m[1]-f[1])+f[0]&&(s=!s)}}var u,f,m;return s}function Wg(o,n){for(let s=0;s<n.length;s++)if(id(o,n[s]))return!0;return!1}function vf(o,n,s,u){const f=u[0]-s[0],m=u[1]-s[1],_=(o[0]-s[0])*m-f*(o[1]-s[1]),x=(n[0]-s[0])*m-f*(n[1]-s[1]);return _>0&&x<0||_<0&&x>0}function xf(o,n,s){for(const T of s)for(let A=0;A<T.length-1;++A)if((x=[(_=T[A+1])[0]-(m=T[A])[0],_[1]-m[1]])[0]*(E=[(f=n)[0]-(u=o)[0],f[1]-u[1]])[1]-x[1]*E[0]!=0&&vf(u,f,m,_)&&vf(m,_,u,f))return!0;var u,f,m,_,x,E;return!1}function _l(o,n){for(let s=0;s<o.length;++s)if(!id(o[s],n))return!1;for(let s=0;s<o.length-1;++s)if(xf(o[s],o[s+1],n))return!1;return!0}function qg(o,n){for(let s=0;s<n.length;s++)if(_l(o,n[s]))return!0;return!1}function od(o,n,s){const u=[];for(let f=0;f<o.length;f++){const m=[];for(let _=0;_<o[f].length;_++){const x=jg(o[f][_],s);Eo(n,x),m.push(x)}u.push(m)}return u}function ad(o,n,s){const u=[];for(let f=0;f<o.length;f++){const m=od(o[f],n,s);u.push(m)}return u}function bf(o,n,s,u){if(o[0]<s[0]||o[0]>s[2]){const f=.5*u;let m=o[0]-s[0]>f?-u:s[0]-o[0]>f?u:0;m===0&&(m=o[0]-s[2]>f?-u:s[2]-o[0]>f?u:0),o[0]+=m}Eo(n,o)}function Es(o,n,s,u){const f=Math.pow(2,u.z)*Ha,m=[u.x*Ha,u.y*Ha],_=[];if(!o)return _;for(const x of o)for(const E of x){const T=[E.x+m[0],E.y+m[1]];bf(T,n,s,f),_.push(T)}return _}function sr(o,n,s,u){const f=Math.pow(2,u.z)*Ha,m=[u.x*Ha,u.y*Ha],_=[];if(!o)return _;for(const E of o){const T=[];for(const A of E){const I=[A.x+m[0],A.y+m[1]];Eo(n,I),T.push(I)}_.push(T)}if(n[2]-n[0]<=f/2){(x=n)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(const E of _)for(const T of E)bf(T,n,s,f)}var x;return _}class Dc{constructor(n,s){this.type=Nn,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(ed(n[1])){const u=n[1];if(u.type==="FeatureCollection")for(let f=0;f<u.features.length;++f){const m=u.features[f].geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Dc(u,u.features[f].geometry)}else if(u.type==="Feature"){const f=u.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new Dc(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new Dc(u,u)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,u){const f=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],_=s.canonicalID();if(!_)return!1;if(u.type==="Polygon"){const x=od(u.coordinates,m,_),E=Es(s.geometry(),f,m,_);if(!Lc(f,m))return!1;for(const T of E)if(!id(T,x))return!1}if(u.type==="MultiPolygon"){const x=ad(u.coordinates,m,_),E=Es(s.geometry(),f,m,_);if(!Lc(f,m))return!1;for(const T of E)if(!Wg(T,x))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,u){const f=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],_=s.canonicalID();if(!_)return!1;if(u.type==="Polygon"){const x=od(u.coordinates,m,_),E=sr(s.geometry(),f,m,_);if(!Lc(f,m))return!1;for(const T of E)if(!_l(T,x))return!1}if(u.type==="MultiPolygon"){const x=ad(u.coordinates,m,_),E=sr(s.geometry(),f,m,_);if(!Lc(f,m))return!1;for(const T of E)if(!qg(T,x))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var wf=Dc;function zc(o){if(o instanceof qa&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof wf)return!1;let n=!0;return o.eachChild(s=>{n&&!zc(s)&&(n=!1)}),n}function Oc(o){if(o instanceof qa&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(s=>{n&&!Oc(s)&&(n=!1)}),n}function sd(o,n){if(o instanceof qa&&n.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(u=>{s&&!sd(u,n)&&(s=!1)}),s}class ld{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const u=n[1];return s.scope.has(u)?new ld(u,s.scope.get(u)):s.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Sf=ld;class cd{constructor(n,s=[],u,f=new Ng,m=[]){this.registry=n,this.path=s,this.key=s.map(_=>`[${_}]`).join(""),this.scope=f,this.errors=m,this.expectedType=u}parse(n,s,u,f,m={}){return s?this.concat(s,u,f)._parse(n,m):this._parse(n,m)}_parse(n,s){function u(f,m,_){return _==="assert"?new wa(m,[f]):_==="coerce"?new gl(m,[f]):f}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=n[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const m=this.registry[f];if(m){let _=m.parse(n,this);if(!_)return null;if(this.expectedType){const x=this.expectedType,E=_.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||E.kind!=="value")if(x.kind!=="color"&&x.kind!=="formatted"&&x.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string"){if(this.checkSubtype(x,E))return null}else _=u(_,x,s.typeAnnotation||"coerce");else _=u(_,x,s.typeAnnotation||"assert")}if(!(_ instanceof Rc)&&_.type.kind!=="resolvedImage"&&Za(_)){const x=new Pc;try{_=new Rc(_.type,_.evaluate(x))}catch(E){return this.error(E.message),null}}return _}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,u){const f=typeof n=="number"?this.path.concat(n):this.path,m=u?this.scope.concat(u):this.scope;return new cd(this.registry,f,s||null,m,this.errors)}error(n,...s){const u=`${this.key}${s.map(f=>`[${f}]`).join("")}`;this.errors.push(new na(u,n))}checkSubtype(n,s){const u=no(n,s);return u&&this.error(u),u}}var Ef=cd;function Za(o){if(o instanceof Sf)return Za(o.boundExpression);if(o instanceof qa&&o.name==="error"||o instanceof rd||o instanceof wf)return!1;const n=o instanceof gl||o instanceof wa;let s=!0;return o.eachChild(u=>{s=n?s&&Za(u):s&&u instanceof Rc}),!!s&&zc(o)&&sd(o,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Ts(o,n){const s=o.length-1;let u,f,m=0,_=s,x=0;for(;m<=_;)if(x=Math.floor((m+_)/2),u=o[x],f=o[x+1],u<=n){if(x===s||n<f)return x;m=x+1}else{if(!(u>n))throw new ki("Input is not a number.");_=x-1}return 0}class ud{constructor(n,s,u){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[f,m]of u)this.labels.push(f),this.outputs.push(m)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const u=s.parse(n[1],1,$t);if(!u)return null;const f=[];let m=null;s.expectedType&&s.expectedType.kind!=="value"&&(m=s.expectedType);for(let _=1;_<n.length;_+=2){const x=_===1?-1/0:n[_],E=n[_+1],T=_,A=_+1;if(typeof x!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',T);if(f.length&&f[f.length-1][0]>=x)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',T);const I=s.parse(E,A,m);if(!I)return null;m=m||I.type,f.push([x,I])}return new ud(m,u,f)}evaluate(n){const s=this.labels,u=this.outputs;if(s.length===1)return u[0].evaluate(n);const f=this.input.evaluate(n);if(f<=s[0])return u[0].evaluate(n);const m=s.length;return f>=s[m-1]?u[m-1].evaluate(n):u[Ts(s,f)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){const n=["step",this.input.serialize()];for(let s=0;s<this.labels.length;s++)s>0&&n.push(this.labels[s]),n.push(this.outputs[s].serialize());return n}}var Tf=ud;function Kn(o,n,s){return o*(1-s)+n*s}var Fc=Object.freeze({__proto__:null,number:Kn,color:function(o,n,s){return new Jr(Kn(o.r,n.r,s),Kn(o.g,n.g,s),Kn(o.b,n.b,s),Kn(o.a,n.a,s))},array:function(o,n,s){return o.map((u,f)=>Kn(u,n[f],s))}});const Hg=.95047,Zg=1.08883,Cf=4/29,Mf=6/29,Af=3*Mf*Mf,Xg=Math.PI/180,Q1=180/Math.PI;function dd(o){return o>.008856451679035631?Math.pow(o,1/3):o/Af+Cf}function kf(o){return o>Mf?o*o*o:Af*(o-Cf)}function hd(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function fd(o){return(o/=255)<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Kg(o){const n=fd(o.r),s=fd(o.g),u=fd(o.b),f=dd((.4124564*n+.3575761*s+.1804375*u)/Hg),m=dd((.2126729*n+.7151522*s+.072175*u)/1);return{l:116*m-16,a:500*(f-m),b:200*(m-dd((.0193339*n+.119192*s+.9503041*u)/Zg)),alpha:o.a}}function Yg(o){let n=(o.l+16)/116,s=isNaN(o.a)?n:n+o.a/500,u=isNaN(o.b)?n:n-o.b/200;return n=1*kf(n),s=Hg*kf(s),u=Zg*kf(u),new Jr(hd(3.2404542*s-1.5371385*n-.4985314*u),hd(-.969266*s+1.8760108*n+.041556*u),hd(.0556434*s-.2040259*n+1.0572252*u),o.alpha)}function J1(o,n,s){const u=n-o;return o+s*(u>180||u<-180?u-360*Math.round(u/360):u)}const Bc={forward:Kg,reverse:Yg,interpolate:function(o,n,s){return{l:Kn(o.l,n.l,s),a:Kn(o.a,n.a,s),b:Kn(o.b,n.b,s),alpha:Kn(o.alpha,n.alpha,s)}}},Nc={forward:function(o){const{l:n,a:s,b:u}=Kg(o),f=Math.atan2(u,s)*Q1;return{h:f<0?f+360:f,c:Math.sqrt(s*s+u*u),l:n,alpha:o.a}},reverse:function(o){const n=o.h*Xg,s=o.c;return Yg({l:o.l,a:Math.cos(n)*s,b:Math.sin(n)*s,alpha:o.alpha})},interpolate:function(o,n,s){return{h:J1(o.h,n.h,s),c:Kn(o.c,n.c,s),l:Kn(o.l,n.l,s),alpha:Kn(o.alpha,n.alpha,s)}}};var Qg=Object.freeze({__proto__:null,lab:Bc,hcl:Nc});class $c{constructor(n,s,u,f,m){this.type=n,this.operator=s,this.interpolation=u,this.input=f,this.labels=[],this.outputs=[];for(const[_,x]of m)this.labels.push(_),this.outputs.push(x)}static interpolationFactor(n,s,u,f){let m=0;if(n.name==="exponential")m=Rf(s,n.base,u,f);else if(n.name==="linear")m=Rf(s,1,u,f);else if(n.name==="cubic-bezier"){const _=n.controlPoints;m=new Z(_[0],_[1],_[2],_[3]).solve(Rf(s,1,u,f))}return m}static parse(n,s){let[u,f,m,..._]=n;if(!Array.isArray(f)||f.length===0)return s.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const T=f[1];if(typeof T!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:T}}else{if(f[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const T=f.slice(1);if(T.length!==4||T.some(A=>typeof A!="number"||A<0||A>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:T}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(m=s.parse(m,2,$t),!m)return null;const x=[];let E=null;u==="interpolate-hcl"||u==="interpolate-lab"?E=ra:s.expectedType&&s.expectedType.kind!=="value"&&(E=s.expectedType);for(let T=0;T<_.length;T+=2){const A=_[T],I=_[T+1],L=T+3,N=T+4;if(typeof A!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',L);if(x.length&&x[x.length-1][0]>=A)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',L);const V=s.parse(I,N,E);if(!V)return null;E=E||V.type,x.push([A,V])}return E.kind==="number"||E.kind==="color"||E.kind==="array"&&E.itemType.kind==="number"&&typeof E.N=="number"?new $c(E,u,f,m,x):s.error(`Type ${Cr(E)} is not interpolatable.`)}evaluate(n){const s=this.labels,u=this.outputs;if(s.length===1)return u[0].evaluate(n);const f=this.input.evaluate(n);if(f<=s[0])return u[0].evaluate(n);const m=s.length;if(f>=s[m-1])return u[m-1].evaluate(n);const _=Ts(s,f),x=$c.interpolationFactor(this.interpolation,f,s[_],s[_+1]),E=u[_].evaluate(n),T=u[_+1].evaluate(n);return this.operator==="interpolate"?Fc[this.type.kind.toLowerCase()](E,T,x):this.operator==="interpolate-hcl"?Nc.reverse(Nc.interpolate(Nc.forward(E),Nc.forward(T),x)):Bc.reverse(Bc.interpolate(Bc.forward(E),Bc.forward(T),x))}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){let n;n=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const s=[this.operator,n,this.input.serialize()];for(let u=0;u<this.labels.length;u++)s.push(this.labels[u],this.outputs[u].serialize());return s}}function Rf(o,n,s,u){const f=u-s,m=o-s;return f===0?0:n===1?m/f:(Math.pow(n,m)-1)/(Math.pow(n,f)-1)}var ia=$c;class If{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let u=null;const f=s.expectedType;f&&f.kind!=="value"&&(u=f);const m=[];for(const x of n.slice(1)){const E=s.parse(x,1+m.length,u,void 0,{typeAnnotation:"omit"});if(!E)return null;u=u||E.type,m.push(E)}const _=f&&m.some(x=>no(f,x.type));return new If(_?Fn:u,m)}evaluate(n){let s,u=null,f=0;for(const m of this.args){if(f++,u=m.evaluate(n),u&&u instanceof Xi&&!u.available&&(s||(s=u),u=null,f===this.args.length))return s;if(u!==null)break}return u}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=["coalesce"];return this.eachChild(s=>{n.push(s.serialize())}),n}}var Jg=If;class pd{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const u=[];for(let m=1;m<n.length-1;m+=2){const _=n[m];if(typeof _!="string")return s.error(`Expected string, but found ${typeof _} instead.`,m);if(/[^a-zA-Z0-9_]/.test(_))return s.error("Variable names must contain only alphanumeric characters or '_'.",m);const x=s.parse(n[m+1],m+1);if(!x)return null;u.push([_,x])}const f=s.parse(n[n.length-1],n.length-1,s.expectedType,u);return f?new pd(u,f):null}outputDefined(){return this.result.outputDefined()}serialize(){const n=["let"];for(const[s,u]of this.bindings)n.push(s,u.serialize());return n.push(this.result.serialize()),n}}var Pf=pd;class md{constructor(n,s,u){this.type=n,this.index=s,this.input=u}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const u=s.parse(n[1],1,$t),f=s.parse(n[2],2,Zi(s.expectedType||Fn));return u&&f?new md(f.type.itemType,u,f):null}evaluate(n){const s=this.index.evaluate(n),u=this.input.evaluate(n);if(s<0)throw new ki(`Array index out of bounds: ${s} < 0.`);if(s>=u.length)throw new ki(`Array index out of bounds: ${s} > ${u.length-1}.`);if(s!==Math.floor(s))throw new ki(`Array index must be an integer, but found ${s} instead.`);return u[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var ex=md;class Lf{constructor(n,s){this.type=Nn,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const u=s.parse(n[1],1,Fn),f=s.parse(n[2],2,Fn);return u&&f?pf(u.type,[Nn,Gn,$t,dl,Fn])?new Lf(u,f):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Cr(u.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),u=this.haystack.evaluate(n);if(u==null)return!1;if(!ws(s,["boolean","string","number","null"]))throw new ki(`Expected first argument to be of type boolean, string, number or null, but found ${Cr(mi(s))} instead.`);if(!ws(u,["string","array"]))throw new ki(`Expected second argument to be of type array or string, but found ${Cr(mi(u))} instead.`);return u.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var ey=Lf;class Uc{constructor(n,s,u){this.type=$t,this.needle=n,this.haystack=s,this.fromIndex=u}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const u=s.parse(n[1],1,Fn),f=s.parse(n[2],2,Fn);if(!u||!f)return null;if(!pf(u.type,[Nn,Gn,$t,dl,Fn]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Cr(u.type)} instead`);if(n.length===4){const m=s.parse(n[3],3,$t);return m?new Uc(u,f,m):null}return new Uc(u,f)}evaluate(n){const s=this.needle.evaluate(n),u=this.haystack.evaluate(n);if(!ws(s,["boolean","string","number","null"]))throw new ki(`Expected first argument to be of type boolean, string, number or null, but found ${Cr(mi(s))} instead.`);if(!ws(u,["string","array"]))throw new ki(`Expected second argument to be of type array or string, but found ${Cr(mi(u))} instead.`);if(this.fromIndex){const f=this.fromIndex.evaluate(n);return u.indexOf(s,f)}return u.indexOf(s)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const n=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),n]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var ty=Uc;class Df{constructor(n,s,u,f,m,_){this.inputType=n,this.type=s,this.input=u,this.cases=f,this.outputs=m,this.otherwise=_}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let u,f;s.expectedType&&s.expectedType.kind!=="value"&&(f=s.expectedType);const m={},_=[];for(let T=2;T<n.length-1;T+=2){let A=n[T];const I=n[T+1];Array.isArray(A)||(A=[A]);const L=s.concat(T);if(A.length===0)return L.error("Expected at least one branch label.");for(const V of A){if(typeof V!="number"&&typeof V!="string")return L.error("Branch labels must be numbers or strings.");if(typeof V=="number"&&Math.abs(V)>Number.MAX_SAFE_INTEGER)return L.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof V=="number"&&Math.floor(V)!==V)return L.error("Numeric branch labels must be integer values.");if(u){if(L.checkSubtype(u,mi(V)))return null}else u=mi(V);if(m[String(V)]!==void 0)return L.error("Branch labels must be unique.");m[String(V)]=_.length}const N=s.parse(I,T,f);if(!N)return null;f=f||N.type,_.push(N)}const x=s.parse(n[1],1,Fn);if(!x)return null;const E=s.parse(n[n.length-1],n.length-1,f);return E?x.type.kind!=="value"&&s.concat(1).checkSubtype(u,x.type)?null:new Df(u,f,x,m,_,E):null}evaluate(n){const s=this.input.evaluate(n);return(mi(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["match",this.input.serialize()],s=Object.keys(this.cases).sort(),u=[],f={};for(const _ of s){const x=f[this.cases[_]];x===void 0?(f[this.cases[_]]=u.length,u.push([this.cases[_],[_]])):u[x][1].push(_)}const m=_=>this.inputType.kind==="number"?Number(_):_;for(const[_,x]of u)n.push(x.length===1?m(x[0]):x.map(m)),n.push(this.outputs[_].serialize());return n.push(this.otherwise.serialize()),n}}var tx=Df;class zf{constructor(n,s,u){this.type=n,this.branches=s,this.otherwise=u}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let u;s.expectedType&&s.expectedType.kind!=="value"&&(u=s.expectedType);const f=[];for(let _=1;_<n.length-1;_+=2){const x=s.parse(n[_],_,Nn);if(!x)return null;const E=s.parse(n[_+1],_+1,u);if(!E)return null;f.push([x,E]),u=u||E.type}const m=s.parse(n[n.length-1],n.length-1,u);return m?new zf(u,f,m):null}evaluate(n){for(const[s,u]of this.branches)if(s.evaluate(n))return u.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,u]of this.branches)n(s),n(u);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["case"];return this.eachChild(s=>{n.push(s.serialize())}),n}}var nx=zf;class Cs{constructor(n,s,u,f){this.type=n,this.input=s,this.beginIndex=u,this.endIndex=f}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const u=s.parse(n[1],1,Fn),f=s.parse(n[2],2,$t);if(!u||!f)return null;if(!pf(u.type,[Zi(Fn),Gn,Fn]))return s.error(`Expected first argument to be of type array or string, but found ${Cr(u.type)} instead`);if(n.length===4){const m=s.parse(n[3],3,$t);return m?new Cs(u.type,u,f,m):null}return new Cs(u.type,u,f)}evaluate(n){const s=this.input.evaluate(n),u=this.beginIndex.evaluate(n);if(!ws(s,["string","array"]))throw new ki(`Expected first argument to be of type array or string, but found ${Cr(mi(s))} instead.`);if(this.endIndex){const f=this.endIndex.evaluate(n);return s.slice(u,f)}return s.slice(u)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const n=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),n]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var ny=Cs;function Of(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function ry(o,n,s,u){return u.compare(n,s)===0}function vl(o,n,s){const u=o!=="=="&&o!=="!=";return class I4{constructor(m,_,x){this.type=Nn,this.lhs=m,this.rhs=_,this.collator=x,this.hasUntypedArgument=m.type.kind==="value"||_.type.kind==="value"}static parse(m,_){if(m.length!==3&&m.length!==4)return _.error("Expected two or three arguments.");const x=m[0];let E=_.parse(m[1],1,Fn);if(!E)return null;if(!Of(x,E.type))return _.concat(1).error(`"${x}" comparisons are not supported for type '${Cr(E.type)}'.`);let T=_.parse(m[2],2,Fn);if(!T)return null;if(!Of(x,T.type))return _.concat(2).error(`"${x}" comparisons are not supported for type '${Cr(T.type)}'.`);if(E.type.kind!==T.type.kind&&E.type.kind!=="value"&&T.type.kind!=="value")return _.error(`Cannot compare types '${Cr(E.type)}' and '${Cr(T.type)}'.`);u&&(E.type.kind==="value"&&T.type.kind!=="value"?E=new wa(T.type,[E]):E.type.kind!=="value"&&T.type.kind==="value"&&(T=new wa(E.type,[T])));let A=null;if(m.length===4){if(E.type.kind!=="string"&&T.type.kind!=="string"&&E.type.kind!=="value"&&T.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(A=_.parse(m[3],3,Cc),!A)return null}return new I4(E,T,A)}evaluate(m){const _=this.lhs.evaluate(m),x=this.rhs.evaluate(m);if(u&&this.hasUntypedArgument){const E=mi(_),T=mi(x);if(E.kind!==T.kind||E.kind!=="string"&&E.kind!=="number")throw new ki(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${E.kind}, ${T.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const E=mi(_),T=mi(x);if(E.kind!=="string"||T.kind!=="string")return n(m,_,x)}return this.collator?s(m,_,x,this.collator.evaluate(m)):n(m,_,x)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}serialize(){const m=[o];return this.eachChild(_=>{m.push(_.serialize())}),m}}}const rx=vl("==",function(o,n,s){return n===s},ry),iy=vl("!=",function(o,n,s){return n!==s},function(o,n,s,u){return!ry(0,n,s,u)}),oy=vl("<",function(o,n,s){return n<s},function(o,n,s,u){return u.compare(n,s)<0}),ay=vl(">",function(o,n,s){return n>s},function(o,n,s,u){return u.compare(n,s)>0}),Ff=vl("<=",function(o,n,s){return n<=s},function(o,n,s,u){return u.compare(n,s)<=0}),ix=vl(">=",function(o,n,s){return n>=s},function(o,n,s,u){return u.compare(n,s)>=0});class Bf{constructor(n,s,u,f,m,_){this.type=Gn,this.number=n,this.locale=s,this.currency=u,this.unit=f,this.minFractionDigits=m,this.maxFractionDigits=_}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const u=s.parse(n[1],1,$t);if(!u)return null;const f=n[2];if(typeof f!="object"||Array.isArray(f))return s.error("NumberFormat options argument must be an object.");let m=null;if(f.locale&&(m=s.parse(f.locale,1,Gn),!m))return null;let _=null;if(f.currency&&(_=s.parse(f.currency,1,Gn),!_))return null;let x=null;if(f.unit&&(x=s.parse(f.unit,1,Gn),!x))return null;let E=null;if(f["min-fraction-digits"]&&(E=s.parse(f["min-fraction-digits"],1,$t),!E))return null;let T=null;return f["max-fraction-digits"]&&(T=s.parse(f["max-fraction-digits"],1,$t),!T)?null:new Bf(u,m,_,x,E,T)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(n):void 0,unit:this.unit?this.unit.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.unit&&n(this.unit),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const n={};return this.locale&&(n.locale=this.locale.serialize()),this.currency&&(n.currency=this.currency.serialize()),this.unit&&(n.unit=this.unit.serialize()),this.minFractionDigits&&(n["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(n["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),n]}}class Nf{constructor(n){this.type=$t,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const u=s.parse(n[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${Cr(u.type)} instead.`):new Nf(u):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string"||Array.isArray(s))return s.length;throw new ki(`Expected value to be of type string or array, but found ${Cr(mi(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){const n=["length"];return this.eachChild(s=>{n.push(s.serialize())}),n}}const sy={"==":rx,"!=":iy,">":ay,"<":oy,">=":ix,"<=":Ff,array:wa,at:ex,boolean:wa,case:nx,coalesce:Jg,collator:rd,format:Ic,image:nd,in:ey,"index-of":ty,interpolate:ia,"interpolate-hcl":ia,"interpolate-lab":ia,length:Nf,let:Pf,literal:Rc,match:tx,number:wa,"number-format":Bf,object:wa,slice:ny,step:Tf,string:wa,"to-boolean":gl,"to-color":gl,"to-number":gl,"to-string":gl,var:Sf,within:wf};function ly(o,[n,s,u,f]){n=n.evaluate(o),s=s.evaluate(o),u=u.evaluate(o);const m=f?f.evaluate(o):1,_=Ug(n,s,u,m);if(_)throw new ki(_);return new Jr(n/255*m,s/255*m,u/255*m,m)}function cy(o,n){return o in n}function $f(o,n){const s=n[o];return s===void 0?null:s}function Xa(o){return{type:o}}qa.register(sy,{error:[{kind:"error"},[Gn],(o,[n])=>{throw new ki(n.evaluate(o))}],typeof:[Gn,[Fn],(o,[n])=>Cr(mi(n.evaluate(o)))],"to-rgba":[Zi($t,4),[ra],(o,[n])=>n.evaluate(o).toArray()],rgb:[ra,[$t,$t,$t],ly],rgba:[ra,[$t,$t,$t,$t],ly],has:{type:Nn,overloads:[[[Gn],(o,[n])=>cy(n.evaluate(o),o.properties())],[[Gn,bs],(o,[n,s])=>cy(n.evaluate(o),s.evaluate(o))]]},get:{type:Fn,overloads:[[[Gn],(o,[n])=>$f(n.evaluate(o),o.properties())],[[Gn,bs],(o,[n,s])=>$f(n.evaluate(o),s.evaluate(o))]]},"feature-state":[Fn,[Gn],(o,[n])=>$f(n.evaluate(o),o.featureState||{})],properties:[bs,[],o=>o.properties()],"geometry-type":[Gn,[],o=>o.geometryType()],id:[Fn,[],o=>o.id()],zoom:[$t,[],o=>o.globals.zoom],pitch:[$t,[],o=>o.globals.pitch||0],"distance-from-center":[$t,[],o=>o.distanceFromCenter()],"heatmap-density":[$t,[],o=>o.globals.heatmapDensity||0],"line-progress":[$t,[],o=>o.globals.lineProgress||0],"sky-radial-progress":[$t,[],o=>o.globals.skyRadialProgress||0],accumulated:[Fn,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[$t,Xa($t),(o,n)=>{let s=0;for(const u of n)s+=u.evaluate(o);return s}],"*":[$t,Xa($t),(o,n)=>{let s=1;for(const u of n)s*=u.evaluate(o);return s}],"-":{type:$t,overloads:[[[$t,$t],(o,[n,s])=>n.evaluate(o)-s.evaluate(o)],[[$t],(o,[n])=>-n.evaluate(o)]]},"/":[$t,[$t,$t],(o,[n,s])=>n.evaluate(o)/s.evaluate(o)],"%":[$t,[$t,$t],(o,[n,s])=>n.evaluate(o)%s.evaluate(o)],ln2:[$t,[],()=>Math.LN2],pi:[$t,[],()=>Math.PI],e:[$t,[],()=>Math.E],"^":[$t,[$t,$t],(o,[n,s])=>Math.pow(n.evaluate(o),s.evaluate(o))],sqrt:[$t,[$t],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[$t,[$t],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[$t,[$t],(o,[n])=>Math.log(n.evaluate(o))],log2:[$t,[$t],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[$t,[$t],(o,[n])=>Math.sin(n.evaluate(o))],cos:[$t,[$t],(o,[n])=>Math.cos(n.evaluate(o))],tan:[$t,[$t],(o,[n])=>Math.tan(n.evaluate(o))],asin:[$t,[$t],(o,[n])=>Math.asin(n.evaluate(o))],acos:[$t,[$t],(o,[n])=>Math.acos(n.evaluate(o))],atan:[$t,[$t],(o,[n])=>Math.atan(n.evaluate(o))],min:[$t,Xa($t),(o,n)=>Math.min(...n.map(s=>s.evaluate(o)))],max:[$t,Xa($t),(o,n)=>Math.max(...n.map(s=>s.evaluate(o)))],abs:[$t,[$t],(o,[n])=>Math.abs(n.evaluate(o))],round:[$t,[$t],(o,[n])=>{const s=n.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[$t,[$t],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[$t,[$t],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[Nn,[Gn,Fn],(o,[n,s])=>o.properties()[n.value]===s.value],"filter-id-==":[Nn,[Fn],(o,[n])=>o.id()===n.value],"filter-type-==":[Nn,[Gn],(o,[n])=>o.geometryType()===n.value],"filter-<":[Nn,[Gn,Fn],(o,[n,s])=>{const u=o.properties()[n.value],f=s.value;return typeof u==typeof f&&u<f}],"filter-id-<":[Nn,[Fn],(o,[n])=>{const s=o.id(),u=n.value;return typeof s==typeof u&&s<u}],"filter->":[Nn,[Gn,Fn],(o,[n,s])=>{const u=o.properties()[n.value],f=s.value;return typeof u==typeof f&&u>f}],"filter-id->":[Nn,[Fn],(o,[n])=>{const s=o.id(),u=n.value;return typeof s==typeof u&&s>u}],"filter-<=":[Nn,[Gn,Fn],(o,[n,s])=>{const u=o.properties()[n.value],f=s.value;return typeof u==typeof f&&u<=f}],"filter-id-<=":[Nn,[Fn],(o,[n])=>{const s=o.id(),u=n.value;return typeof s==typeof u&&s<=u}],"filter->=":[Nn,[Gn,Fn],(o,[n,s])=>{const u=o.properties()[n.value],f=s.value;return typeof u==typeof f&&u>=f}],"filter-id->=":[Nn,[Fn],(o,[n])=>{const s=o.id(),u=n.value;return typeof s==typeof u&&s>=u}],"filter-has":[Nn,[Fn],(o,[n])=>n.value in o.properties()],"filter-has-id":[Nn,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[Nn,[Zi(Gn)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[Nn,[Zi(Fn)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[Nn,[Gn,Zi(Fn)],(o,[n,s])=>s.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[Nn,[Gn,Zi(Fn)],(o,[n,s])=>function(u,f,m,_){for(;m<=_;){const x=m+_>>1;if(f[x]===u)return!0;f[x]>u?_=x-1:m=x+1}return!1}(o.properties()[n.value],s.value,0,s.value.length-1)],all:{type:Nn,overloads:[[[Nn,Nn],(o,[n,s])=>n.evaluate(o)&&s.evaluate(o)],[Xa(Nn),(o,n)=>{for(const s of n)if(!s.evaluate(o))return!1;return!0}]]},any:{type:Nn,overloads:[[[Nn,Nn],(o,[n,s])=>n.evaluate(o)||s.evaluate(o)],[Xa(Nn),(o,n)=>{for(const s of n)if(s.evaluate(o))return!0;return!1}]]},"!":[Nn,[Nn],(o,[n])=>!n.evaluate(o)],"is-supported-script":[Nn,[Gn],(o,[n])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(n.evaluate(o))}],upcase:[Gn,[Gn],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[Gn,[Gn],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[Gn,Xa(Fn),(o,n)=>n.map(s=>kc(s.evaluate(o))).join("")],"resolved-locale":[Gn,[Cc],(o,[n])=>n.evaluate(o).resolvedLocale()]});var xl=sy;function Vc(o){return{result:"success",value:o}}function bl(o){return{result:"error",value:o}}function wl(o){return o["property-type"]==="data-driven"}function Sa(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function gd(o){return!!o.expression&&o.expression.interpolated}function Hn(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function yd(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function ox(o){return o}function Uf(o,n){const s=n.type==="color",u=o.stops&&typeof o.stops[0][0]=="object",f=u||!(u||o.property!==void 0),m=o.type||(gd(n)?"exponential":"interval");if(s&&((o=ba({},o)).stops&&(o.stops=o.stops.map(T=>[T[0],Jr.parse(T[1])])),o.default=Jr.parse(o.default?o.default:n.default)),o.colorSpace&&o.colorSpace!=="rgb"&&!Qg[o.colorSpace])throw new Error(`Unknown color space: ${o.colorSpace}`);let _,x,E;if(m==="exponential")_=_d;else if(m==="interval")_=uy;else if(m==="categorical"){_=Vf,x=Object.create(null);for(const T of o.stops)x[T[0]]=T[1];E=typeof o.stops[0][0]}else{if(m!=="identity")throw new Error(`Unknown function type "${m}"`);_=dy}if(u){const T={},A=[];for(let N=0;N<o.stops.length;N++){const V=o.stops[N],X=V[0].zoom;T[X]===void 0&&(T[X]={zoom:X,type:o.type,property:o.property,default:o.default,stops:[]},A.push(X)),T[X].stops.push([V[0].value,V[1]])}const I=[];for(const N of A)I.push([T[N].zoom,Uf(T[N],n)]);const L={name:"linear"};return{kind:"composite",interpolationType:L,interpolationFactor:ia.interpolationFactor.bind(void 0,L),zoomStops:I.map(N=>N[0]),evaluate:({zoom:N},V)=>_d({stops:I,base:o.base},n,N).evaluate(N,V)}}if(f){const T=m==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:T,interpolationFactor:ia.interpolationFactor.bind(void 0,T),zoomStops:o.stops.map(A=>A[0]),evaluate:({zoom:A})=>_(o,n,A,x,E)}}return{kind:"source",evaluate(T,A){const I=A&&A.properties?A.properties[o.property]:void 0;return I===void 0?jc(o.default,n.default):_(o,n,I,x,E)}}}function jc(o,n,s){return o!==void 0?o:n!==void 0?n:s!==void 0?s:void 0}function Vf(o,n,s,u,f){return jc(typeof s===f?u[s]:void 0,o.default,n.default)}function uy(o,n,s){if(Hn(s)!=="number")return jc(o.default,n.default);const u=o.stops.length;if(u===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[u-1][0])return o.stops[u-1][1];const f=Ts(o.stops.map(m=>m[0]),s);return o.stops[f][1]}function _d(o,n,s){const u=o.base!==void 0?o.base:1;if(Hn(s)!=="number")return jc(o.default,n.default);const f=o.stops.length;if(f===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[f-1][0])return o.stops[f-1][1];const m=Ts(o.stops.map(A=>A[0]),s),_=function(A,I,L,N){const V=N-L,X=A-L;return V===0?0:I===1?X/V:(Math.pow(I,X)-1)/(Math.pow(I,V)-1)}(s,u,o.stops[m][0],o.stops[m+1][0]),x=o.stops[m][1],E=o.stops[m+1][1];let T=Fc[n.type]||ox;if(o.colorSpace&&o.colorSpace!=="rgb"){const A=Qg[o.colorSpace];T=(I,L)=>A.reverse(A.interpolate(A.forward(I),A.forward(L),_))}return typeof x.evaluate=="function"?{evaluate(...A){const I=x.evaluate.apply(void 0,A),L=E.evaluate.apply(void 0,A);if(I!==void 0&&L!==void 0)return T(I,L,_)}}:T(x,E,_)}function dy(o,n,s){return n.type==="color"?s=Jr.parse(s):n.type==="formatted"?s=io.fromString(s.toString()):n.type==="resolvedImage"?s=Xi.fromString(s.toString()):Hn(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0),jc(s,o.default,n.default)}class vd{constructor(n,s){this.expression=n,this._warningHistory={},this._evaluator=new Pc,this._defaultValue=s?function(u){return u.type==="color"&&(yd(u.default)||Array.isArray(u.default))?new Jr(0,0,0,0):u.type==="color"?Jr.parse(u.default)||null:u.default===void 0?null:u.default}(s):null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,u,f,m,_,x,E){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=u,this._evaluator.canonical=f||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=_,this._evaluator.featureTileCoord=x||null,this._evaluator.featureDistanceData=E||null,this.expression.evaluate(this._evaluator)}evaluate(n,s,u,f,m,_,x,E){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=u||null,this._evaluator.canonical=f||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=_||null,this._evaluator.featureTileCoord=x||null,this._evaluator.featureDistanceData=E||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new ki(`Expected value to be one of ${Object.keys(this._enumValues).map(A=>JSON.stringify(A)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}}}function Sl(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in xl}function El(o,n){const s=new Ef(xl,[],n?function(f){const m={color:ra,string:Gn,number:$t,enum:Gn,boolean:Nn,formatted:hl,resolvedImage:fl};return f.type==="array"?Zi(m[f.value]||Fn,f.length):m[f.type]}(n):void 0),u=s.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?Vc(new vd(u,n)):bl(s.errors)}class xd{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!Oc(s.expression)}evaluateWithoutErrorHandling(n,s,u,f,m,_){return this._styleExpression.evaluateWithoutErrorHandling(n,s,u,f,m,_)}evaluate(n,s,u,f,m,_){return this._styleExpression.evaluate(n,s,u,f,m,_)}}class Ms{constructor(n,s,u,f){this.kind=n,this.zoomStops=u,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!Oc(s.expression),this.interpolationType=f}evaluateWithoutErrorHandling(n,s,u,f,m,_){return this._styleExpression.evaluateWithoutErrorHandling(n,s,u,f,m,_)}evaluate(n,s,u,f,m,_){return this._styleExpression.evaluate(n,s,u,f,m,_)}interpolationFactor(n,s,u){return this.interpolationType?ia.interpolationFactor(this.interpolationType,n,s,u):0}}function As(o,n){if((o=El(o,n)).result==="error")return o;const s=o.value.expression,u=zc(s);if(!u&&!wl(n))return bl([new na("","data expressions not supported")]);const f=sd(s,["zoom","pitch","distance-from-center"]);if(!f&&!Sa(n))return bl([new na("","zoom expressions not supported")]);const m=Wc(s);return m||f?m instanceof na?bl([m]):m instanceof ia&&!gd(n)?bl([new na("",'"interpolate" expressions cannot be used with this property')]):Vc(m?new Ms(u?"camera":"composite",o.value,m.labels,m instanceof ia?m.interpolation:void 0):new xd(u?"constant":"source",o.value)):bl([new na("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Gc{constructor(n,s){this._parameters=n,this._specification=s,ba(this,Uf(this._parameters,this._specification))}static deserialize(n){return new Gc(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Wc(o){let n=null;if(o instanceof Pf)n=Wc(o.result);else if(o instanceof Jg){for(const s of o.args)if(n=Wc(s),n)break}else(o instanceof Tf||o instanceof ia)&&o.input instanceof qa&&o.input.name==="zoom"&&(n=o);return n instanceof na||o.eachChild(s=>{const u=Wc(s);u instanceof na?n=u:!n&&u?n=new na("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&u&&n!==u&&(n=new na("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}class Zt{constructor(n,s,u,f){this.message=(n?`${n}: `:"")+u,f&&(this.identifier=f),s!=null&&s.__line__&&(this.line=s.__line__)}}function To(o){const n=o.key,s=o.value,u=o.valueSpec||{},f=o.objectElementValidators||{},m=o.style,_=o.styleSpec;let x=[];const E=Hn(s);if(E!=="object")return[new Zt(n,s,`object expected, ${E} found`)];for(const T in s){const A=T.split(".")[0],I=u[A]||u["*"];let L;f[A]?L=f[A]:u[A]?L=Fi:f["*"]?L=f["*"]:u["*"]&&(L=Fi),L?x=x.concat(L({key:(n&&`${n}.`)+T,value:s[T],valueSpec:I,style:m,styleSpec:_,object:s,objectKey:T},s)):x.push(new Zt(n,s[T],`unknown property "${T}"`))}for(const T in u)f[T]||u[T].required&&u[T].default===void 0&&s[T]===void 0&&x.push(new Zt(n,s,`missing required property "${T}"`));return x}function hy(o){const n=o.value,s=o.valueSpec,u=o.style,f=o.styleSpec,m=o.key,_=o.arrayElementValidator||Fi;if(Hn(n)!=="array")return[new Zt(m,n,`array expected, ${Hn(n)} found`)];if(s.length&&n.length!==s.length)return[new Zt(m,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new Zt(m,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let x={type:s.value,values:s.values,minimum:s.minimum,maximum:s.maximum,function:void 0};f.$version<7&&(x.function=s.function),Hn(s.value)==="object"&&(x=s.value);let E=[];for(let T=0;T<n.length;T++)E=E.concat(_({array:n,arrayIndex:T,value:n[T],valueSpec:x,style:u,styleSpec:f,key:`${m}[${T}]`}));return E}function jf(o){const n=o.key,s=o.value,u=o.valueSpec;let f=Hn(s);if(f==="number"&&s!=s&&(f="NaN"),f!=="number")return[new Zt(n,s,`number expected, ${f} found`)];if("minimum"in u){let m=u.minimum;if(Hn(u.minimum)==="array"&&(m=u.minimum[o.arrayIndex]),s<m)return[new Zt(n,s,`${s} is less than the minimum value ${m}`)]}if("maximum"in u){let m=u.maximum;if(Hn(u.maximum)==="array"&&(m=u.maximum[o.arrayIndex]),s>m)return[new Zt(n,s,`${s} is greater than the maximum value ${m}`)]}return[]}function qc(o){const n=o.valueSpec,s=ai(o.value.type);let u,f,m,_={};const x=s!=="categorical"&&o.value.property===void 0,E=!x,T=Hn(o.value.stops)==="array"&&Hn(o.value.stops[0])==="array"&&Hn(o.value.stops[0][0])==="object",A=To({key:o.key,value:o.value,valueSpec:o.styleSpec.function,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(N){if(s==="identity")return[new Zt(N.key,N.value,'identity function may not have a "stops" property')];let V=[];const X=N.value;return V=V.concat(hy({key:N.key,value:X,valueSpec:N.valueSpec,style:N.style,styleSpec:N.styleSpec,arrayElementValidator:I})),Hn(X)==="array"&&X.length===0&&V.push(new Zt(N.key,X,"array must have at least one stop")),V},default:function(N){return Fi({key:N.key,value:N.value,valueSpec:n,style:N.style,styleSpec:N.styleSpec})}}});return s==="identity"&&x&&A.push(new Zt(o.key,o.value,'missing required property "property"')),s==="identity"||o.value.stops||A.push(new Zt(o.key,o.value,'missing required property "stops"')),s==="exponential"&&o.valueSpec.expression&&!gd(o.valueSpec)&&A.push(new Zt(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(E&&!wl(o.valueSpec)?A.push(new Zt(o.key,o.value,"property functions not supported")):x&&!Sa(o.valueSpec)&&A.push(new Zt(o.key,o.value,"zoom functions not supported"))),s!=="categorical"&&!T||o.value.property!==void 0||A.push(new Zt(o.key,o.value,'"property" property is required')),A;function I(N){let V=[];const X=N.value,re=N.key;if(Hn(X)!=="array")return[new Zt(re,X,`array expected, ${Hn(X)} found`)];if(X.length!==2)return[new Zt(re,X,`array length 2 expected, length ${X.length} found`)];if(T){if(Hn(X[0])!=="object")return[new Zt(re,X,`object expected, ${Hn(X[0])} found`)];if(X[0].zoom===void 0)return[new Zt(re,X,"object stop key must have zoom")];if(X[0].value===void 0)return[new Zt(re,X,"object stop key must have value")];const ge=ai(X[0].zoom);if(typeof ge!="number")return[new Zt(re,X[0].zoom,"stop zoom values must be numbers")];if(m&&m>ge)return[new Zt(re,X[0].zoom,"stop zoom values must appear in ascending order")];ge!==m&&(m=ge,f=void 0,_={}),V=V.concat(To({key:`${re}[0]`,value:X[0],valueSpec:{zoom:{}},style:N.style,styleSpec:N.styleSpec,objectElementValidators:{zoom:jf,value:L}}))}else V=V.concat(L({key:`${re}[0]`,value:X[0],valueSpec:{},style:N.style,styleSpec:N.styleSpec},X));return Sl(Wa(X[1]))?V.concat([new Zt(`${re}[1]`,X[1],"expressions are not allowed in function stops.")]):V.concat(Fi({key:`${re}[1]`,value:X[1],valueSpec:n,style:N.style,styleSpec:N.styleSpec}))}function L(N,V){const X=Hn(N.value),re=ai(N.value),ge=N.value!==null?N.value:V;if(u){if(X!==u)return[new Zt(N.key,ge,`${X} stop domain type must match previous stop domain type ${u}`)]}else u=X;if(X!=="number"&&X!=="string"&&X!=="boolean"&&typeof re!="number"&&typeof re!="string"&&typeof re!="boolean")return[new Zt(N.key,ge,"stop domain value must be a number, string, or boolean")];if(X!=="number"&&s!=="categorical"){let Te=`number expected, ${X} found`;return wl(n)&&s===void 0&&(Te+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Zt(N.key,ge,Te)]}return s!=="categorical"||X!=="number"||typeof re=="number"&&isFinite(re)&&Math.floor(re)===re?s!=="categorical"&&X==="number"&&typeof re=="number"&&typeof f=="number"&&f!==void 0&&re<f?[new Zt(N.key,ge,"stop domain values must appear in ascending order")]:(f=re,s==="categorical"&&re in _?[new Zt(N.key,ge,"stop domain values must be unique")]:(_[re]=!0,[])):[new Zt(N.key,ge,`integer expected, found ${String(re)}`)]}}function Tl(o){const n=(o.expressionContext==="property"?As:El)(Wa(o.value),o.valueSpec);if(n.result==="error")return n.value.map(u=>new Zt(`${o.key}${u.key}`,o.value,u.message));const s=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!s.outputDefined())return[new Zt(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Oc(s))return[new Zt(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter")return fy(s,o);if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!sd(s,["zoom","feature-state"]))return[new Zt(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!zc(s))return[new Zt(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function fy(o,n){const s=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(n.valueSpec&&n.valueSpec.expression)for(const f of n.valueSpec.expression.parameters)s.delete(f);if(s.size===0)return[];const u=[];return o instanceof qa&&s.has(o.name)?[new Zt(n.key,n.value,`["${o.name}"] expression is not supported in a filter for a ${n.object.type} layer with id: ${n.object.id}`)]:(o.eachChild(f=>{u.push(...fy(f,n))}),u)}function bd(o){const n=o.key,s=o.value,u=o.valueSpec,f=[];return Array.isArray(u.values)?u.values.indexOf(ai(s))===-1&&f.push(new Zt(n,s,`expected one of [${u.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(u.values).indexOf(ai(s))===-1&&f.push(new Zt(n,s,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(s)} found`)),f}function Gf(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!Gf(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}function wd(o,n="fill"){if(o==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Gf(o)||(o=Ed(o));const s=o;let u=!0;try{u=function(T){if(!Ei(T))return T;let A=Wa(T);return Zc(A),A=Hc(A),A}(s)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(s,null,2)}
        `)}const f=pt[`filter_${n}`],m=El(u,f);let _=null;if(m.result==="error")throw new Error(m.value.map(T=>`${T.key}: ${T.message}`).join(", "));_=(T,A,I)=>m.value.evaluate(T,A,{},I);let x=null,E=null;if(u!==s){const T=El(s,f);if(T.result==="error")throw new Error(T.value.map(A=>`${A.key}: ${A.message}`).join(", "));x=(A,I,L,N,V)=>T.value.evaluate(A,I,{},L,void 0,void 0,N,V),E=!zc(T.value.expression)}return{filter:_,dynamicFilter:x||void 0,needGeometry:py(u),needFeature:!!E}}function Hc(o){if(!Array.isArray(o))return o;const n=function(s){if(Sd.has(s[0])){for(let u=1;u<s.length;u++)if(Ei(s[u]))return!0}return s}(o);return n===!0?n:n.map(s=>Hc(s))}function Zc(o){let n=!1;const s=[];if(o[0]==="case"){for(let u=1;u<o.length-1;u+=2)n=n||Ei(o[u]),s.push(o[u+1]);s.push(o[o.length-1])}else if(o[0]==="match"){n=n||Ei(o[1]);for(let u=2;u<o.length-1;u+=2)s.push(o[u+1]);s.push(o[o.length-1])}else if(o[0]==="step"){n=n||Ei(o[1]);for(let u=1;u<o.length-1;u+=2)s.push(o[u+1])}n&&(o.length=0,o.push("any",...s));for(let u=1;u<o.length;u++)Zc(o[u])}function Ei(o){if(!Array.isArray(o))return!1;if((n=o[0])==="pitch"||n==="distance-from-center")return!0;var n;for(let s=1;s<o.length;s++)if(Ei(o[s]))return!0;return!1}const Sd=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function ax(o,n){return o<n?-1:o>n?1:0}function py(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let n=1;n<o.length;n++)if(py(o[n]))return!0;return!1}function Ed(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?Wf(o[1],o[2],"=="):n==="!="?Cl(Wf(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Wf(o[1],o[2],n):n==="any"?(s=o.slice(1),["any"].concat(s.map(Ed))):n==="all"?["all"].concat(o.slice(1).map(Ed)):n==="none"?["all"].concat(o.slice(1).map(Ed).map(Cl)):n==="in"?Td(o[1],o.slice(2)):n==="!in"?Cl(Td(o[1],o.slice(2))):n==="has"?my(o[1]):n==="!has"?Cl(my(o[1])):n!=="within"||o;var s}function Wf(o,n,s){switch(o){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,o,n]}}function Td(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",o,["literal",n.sort(ax)]]:["filter-in-small",o,["literal",n]]}}function my(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Cl(o){return["!",o]}function qf(o){return Gf(Wa(o.value))?Tl(ba({},o,{expressionContext:"filter",valueSpec:o.styleSpec[`filter_${o.layerType||"fill"}`]})):gy(o)}function gy(o){const n=o.value,s=o.key;if(Hn(n)!=="array")return[new Zt(s,n,`array expected, ${Hn(n)} found`)];const u=o.styleSpec;let f,m=[];if(n.length<1)return[new Zt(s,n,"filter array must have at least 1 element")];switch(m=m.concat(bd({key:`${s}[0]`,value:n[0],valueSpec:u.filter_operator,style:o.style,styleSpec:o.styleSpec})),ai(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&ai(n[1])==="$type"&&m.push(new Zt(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&m.push(new Zt(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(f=Hn(n[1]),f!=="string"&&m.push(new Zt(`${s}[1]`,n[1],`string expected, ${f} found`)));for(let _=2;_<n.length;_++)f=Hn(n[_]),ai(n[1])==="$type"?m=m.concat(bd({key:`${s}[${_}]`,value:n[_],valueSpec:u.geometry_type,style:o.style,styleSpec:o.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&m.push(new Zt(`${s}[${_}]`,n[_],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let _=1;_<n.length;_++)m=m.concat(gy({key:`${s}[${_}]`,value:n[_],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":f=Hn(n[1]),n.length!==2?m.push(new Zt(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):f!=="string"&&m.push(new Zt(`${s}[1]`,n[1],`string expected, ${f} found`));break;case"within":f=Hn(n[1]),n.length!==2?m.push(new Zt(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):f!=="object"&&m.push(new Zt(`${s}[1]`,n[1],`object expected, ${f} found`))}return m}function Cd(o,n){const s=o.key,u=o.style,f=o.styleSpec,m=o.value,_=o.objectKey,x=f[`${n}_${o.layerType}`];if(!x)return[];const E=_.match(/^(.*)-transition$/);if(n==="paint"&&E&&x[E[1]]&&x[E[1]].transition)return Fi({key:s,value:m,valueSpec:f.transition,style:u,styleSpec:f});const T=o.valueSpec||x[_];if(!T)return[new Zt(s,m,`unknown property "${_}"`)];let A;if(Hn(m)==="string"&&wl(T)&&!T.tokens&&(A=/^{([^}]+)}$/.exec(m))){const L=`\`{ "type": "identity", "property": ${A?JSON.stringify(A[1]):'"_"'} }\``;return[new Zt(s,m,`"${_}" does not support interpolation syntax
Use an identity property function instead: ${L}.`)]}const I=[];return o.layerType==="symbol"&&(_==="text-field"&&u&&!u.glyphs&&I.push(new Zt(s,m,'use of "text-field" requires a style "glyphs" property')),_==="text-font"&&yd(Wa(m))&&ai(m.type)==="identity"&&I.push(new Zt(s,m,'"text-font" does not support identity functions'))),I.concat(Fi({key:o.key,value:m,valueSpec:T,style:u,styleSpec:f,expressionContext:"property",propertyType:n,propertyKey:_}))}function yy(o){return Cd(o,"paint")}function Hf(o){return Cd(o,"layout")}function Zf(o){let n=[];const s=o.value,u=o.key,f=o.style,m=o.styleSpec;s.type||s.ref||n.push(new Zt(u,s,'either "type" or "ref" is required'));let _=ai(s.type);const x=ai(s.ref);if(s.id){const E=ai(s.id);for(let T=0;T<o.arrayIndex;T++){const A=f.layers[T];ai(A.id)===E&&n.push(new Zt(u,s.id,`duplicate layer id "${s.id}", previously used at line ${A.id.__line__}`))}}if("ref"in s){let E;["type","source","source-layer","filter","layout"].forEach(T=>{T in s&&n.push(new Zt(u,s[T],`"${T}" is prohibited for ref layers`))}),f.layers.forEach(T=>{ai(T.id)===x&&(E=T)}),E?E.ref?n.push(new Zt(u,s.ref,"ref cannot reference another ref layer")):_=ai(E.type):typeof x=="string"&&n.push(new Zt(u,s.ref,`ref layer "${x}" not found`))}else if(_!=="background"&&_!=="sky")if(s.source){const E=f.sources&&f.sources[s.source],T=E&&ai(E.type);E?T==="vector"&&_==="raster"?n.push(new Zt(u,s.source,`layer "${s.id}" requires a raster source`)):T==="raster"&&_!=="raster"?n.push(new Zt(u,s.source,`layer "${s.id}" requires a vector source`)):T!=="vector"||s["source-layer"]?T==="raster-dem"&&_!=="hillshade"?n.push(new Zt(u,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):_!=="line"||!s.paint||!s.paint["line-gradient"]&&!s.paint["line-trim-offset"]||T==="geojson"&&E.lineMetrics||n.push(new Zt(u,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Zt(u,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new Zt(u,s.source,`source "${s.source}" not found`))}else n.push(new Zt(u,s,'missing required property "source"'));return n=n.concat(To({key:u,value:s,valueSpec:m.layer,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Fi({key:`${u}.type`,value:s.type,valueSpec:m.layer.type,style:o.style,styleSpec:o.styleSpec,object:s,objectKey:"type"}),filter:E=>qf(ba({layerType:_},E)),layout:E=>To({layer:s,key:E.key,value:E.value,valueSpec:{},style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":T=>Hf(ba({layerType:_},T))}}),paint:E=>To({layer:s,key:E.key,value:E.value,valueSpec:{},style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":T=>yy(ba({layerType:_},T))}})}})),n}function Ml(o){const n=o.value,s=o.key,u=Hn(n);return u!=="string"?[new Zt(s,n,`string expected, ${u} found`)]:[]}const Md={promoteId:function({key:o,value:n}){if(Hn(n)==="string")return Ml({key:o,value:n});{const s=[];for(const u in n)s.push(...Ml({key:`${o}.${u}`,value:n[u]}));return s}}};function Xc(o){const n=o.value,s=o.key,u=o.styleSpec,f=o.style;if(!n.type)return[new Zt(s,n,'"type" is required')];const m=ai(n.type);let _;switch(m){case"vector":case"raster":case"raster-dem":return _=To({key:s,value:n,valueSpec:u[`source_${m.replace("-","_")}`],style:o.style,styleSpec:u,objectElementValidators:Md}),_;case"geojson":if(_=To({key:s,value:n,valueSpec:u.source_geojson,style:f,styleSpec:u,objectElementValidators:Md}),n.cluster)for(const x in n.clusterProperties){const[E,T]=n.clusterProperties[x],A=typeof E=="string"?[E,["accumulated"],["get",x]]:E;_.push(...Tl({key:`${s}.${x}.map`,value:T,expressionContext:"cluster-map"})),_.push(...Tl({key:`${s}.${x}.reduce`,value:A,expressionContext:"cluster-reduce"}))}return _;case"video":return To({key:s,value:n,valueSpec:u.source_video,style:f,styleSpec:u});case"image":return To({key:s,value:n,valueSpec:u.source_image,style:f,styleSpec:u});case"canvas":return[new Zt(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return bd({key:`${s}.type`,value:n.type,valueSpec:{values:_y(u)},style:f,styleSpec:u})}}function _y(o){return o.source.reduce((n,s)=>{const u=o[s];return u.type.type==="enum"&&(n=n.concat(Object.keys(u.type.values))),n},[])}function vy(o){const n=o.value,s=o.styleSpec,u=s.light,f=o.style;let m=[];const _=Hn(n);if(n===void 0)return m;if(_!=="object")return m=m.concat([new Zt("light",n,`object expected, ${_} found`)]),m;for(const x in n){const E=x.match(/^(.*)-transition$/);m=m.concat(E&&u[E[1]]&&u[E[1]].transition?Fi({key:x,value:n[x],valueSpec:s.transition,style:f,styleSpec:s}):u[x]?Fi({key:x,value:n[x],valueSpec:u[x],style:f,styleSpec:s}):[new Zt(x,n[x],`unknown property "${x}"`)])}return m}function Xf(o){const n=o.value,s=o.key,u=o.style,f=o.styleSpec,m=f.terrain;let _=[];const x=Hn(n);if(n===void 0)return _;if(x!=="object")return _=_.concat([new Zt("terrain",n,`object expected, ${x} found`)]),_;for(const E in n){const T=E.match(/^(.*)-transition$/);_=_.concat(T&&m[T[1]]&&m[T[1]].transition?Fi({key:E,value:n[E],valueSpec:f.transition,style:u,styleSpec:f}):m[E]?Fi({key:E,value:n[E],valueSpec:m[E],style:u,styleSpec:f}):[new Zt(E,n[E],`unknown property "${E}"`)])}if(n.source){const E=u.sources&&u.sources[n.source],T=E&&ai(E.type);E?T!=="raster-dem"&&_.push(new Zt(s,n.source,`terrain cannot be used with a source of type ${String(T)}, it only be used with a "raster-dem" source type`)):_.push(new Zt(s,n.source,`source "${n.source}" not found`))}else _.push(new Zt(s,n,'terrain is missing required property "source"'));return _}function xy(o){const n=o.value,s=o.style,u=o.styleSpec,f=u.fog;let m=[];const _=Hn(n);if(n===void 0)return m;if(_!=="object")return m=m.concat([new Zt("fog",n,`object expected, ${_} found`)]),m;for(const x in n){const E=x.match(/^(.*)-transition$/);m=m.concat(E&&f[E[1]]&&f[E[1]].transition?Fi({key:x,value:n[x],valueSpec:u.transition,style:s,styleSpec:u}):f[x]?Fi({key:x,value:n[x],valueSpec:f[x],style:s,styleSpec:u}):[new Zt(x,n[x],`unknown property "${x}"`)])}return m}const Ad={"*":()=>[],array:hy,boolean:function(o){const n=o.value,s=o.key,u=Hn(n);return u!=="boolean"?[new Zt(s,n,`boolean expected, ${u} found`)]:[]},number:jf,color:function(o){const n=o.key,s=o.value,u=Hn(s);return u!=="string"?[new Zt(n,s,`color expected, ${u} found`)]:mf(s)===null?[new Zt(n,s,`color expected, "${s}" found`)]:[]},enum:bd,filter:qf,function:qc,layer:Zf,object:To,source:Xc,light:vy,terrain:Xf,fog:xy,string:Ml,formatted:function(o){return Ml(o).length===0?[]:Tl(o)},resolvedImage:function(o){return Ml(o).length===0?[]:Tl(o)},projection:function(o){const n=o.value,s=o.styleSpec,u=s.projection,f=o.style;let m=[];const _=Hn(n);if(_==="object")for(const x in n)m=m.concat(Fi({key:x,value:n[x],valueSpec:u[x],style:f,styleSpec:s}));else _!=="string"&&(m=m.concat([new Zt("projection",n,`object or string expected, ${_} found`)]));return m}};function Fi(o){const n=o.value,s=o.valueSpec,u=o.styleSpec;return s.expression&&yd(ai(n))?qc(o):s.expression&&Sl(Wa(n))?Tl(o):s.type&&Ad[s.type]?Ad[s.type](o):To(ba({},o,{valueSpec:s.type?u[s.type]:s}))}function sx(o){const n=o.value,s=o.key,u=Ml(o);return u.length||(n.indexOf("{fontstack}")===-1&&u.push(new Zt(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&u.push(new Zt(s,n,'"glyphs" url must include a "{range}" token'))),u}function by(o,n=pt){return Ea(Fi({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,objectElementValidators:{glyphs:sx,"*":()=>[]}}))}const lx=o=>Ea(yy(o)),wy=o=>Ea(Hf(o));function Ea(o){return o.slice().sort((n,s)=>n.line&&s.line?n.line-s.line:0)}function Sy(o,n){let s=!1;if(n&&n.length)for(const u of n)o.fire(new Ga(new Error(u.message))),s=!0;return s}var Al=oa;function oa(o,n,s){var u=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;var f=new Int32Array(this.arrayBuffer);o=f[0],this.d=(n=f[1])+2*(s=f[2]);for(var m=0;m<this.d*this.d;m++){var _=f[3+m],x=f[3+m+1];u.push(_===x?null:f.subarray(_,x))}var E=f[3+u.length+1];this.keys=f.subarray(f[3+u.length],E),this.bboxes=f.subarray(E),this.insert=this._insertReadonly}else{this.d=n+2*s;for(var T=0;T<this.d*this.d;T++)u.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=o,this.padding=s,this.scale=n/o,this.uid=0;var A=s/n*o;this.min=-A,this.max=o+A}oa.prototype.insert=function(o,n,s,u,f){this._forEachCell(n,s,u,f,this._insertCell,this.uid++),this.keys.push(o),this.bboxes.push(n),this.bboxes.push(s),this.bboxes.push(u),this.bboxes.push(f)},oa.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},oa.prototype._insertCell=function(o,n,s,u,f,m){this.cells[f].push(m)},oa.prototype.query=function(o,n,s,u,f){var m=this.min,_=this.max;if(o<=m&&n<=m&&_<=s&&_<=u&&!f)return Array.prototype.slice.call(this.keys);var x=[];return this._forEachCell(o,n,s,u,this._queryCell,x,{},f),x},oa.prototype._queryCell=function(o,n,s,u,f,m,_,x){var E=this.cells[f];if(E!==null)for(var T=this.keys,A=this.bboxes,I=0;I<E.length;I++){var L=E[I];if(_[L]===void 0){var N=4*L;(x?x(A[N+0],A[N+1],A[N+2],A[N+3]):o<=A[N+2]&&n<=A[N+3]&&s>=A[N+0]&&u>=A[N+1])?(_[L]=!0,m.push(T[L])):_[L]=!1}}},oa.prototype._forEachCell=function(o,n,s,u,f,m,_,x){for(var E=this._convertToCellCoord(o),T=this._convertToCellCoord(n),A=this._convertToCellCoord(s),I=this._convertToCellCoord(u),L=E;L<=A;L++)for(var N=T;N<=I;N++){var V=this.d*N+L;if((!x||x(this._convertFromCellCoord(L),this._convertFromCellCoord(N),this._convertFromCellCoord(L+1),this._convertFromCellCoord(N+1)))&&f.call(this,o,n,s,u,V,m,_,x))return}},oa.prototype._convertFromCellCoord=function(o){return(o-this.padding)/this.scale},oa.prototype._convertToCellCoord=function(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))},oa.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var o=this.cells,n=3+this.cells.length+1+1,s=0,u=0;u<this.cells.length;u++)s+=this.cells[u].length;var f=new Int32Array(n+s+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;for(var m=n,_=0;_<o.length;_++){var x=o[_];f[3+_]=m,f.set(x,m),m+=x.length}return f[3+o.length]=m,f.set(this.keys,m),f[3+o.length+1]=m+=this.keys.length,f.set(this.bboxes,m),m+=this.bboxes.length,f.buffer};const kd={};function nn(o,n,s={}){Object.defineProperty(o,"_classRegistryKey",{value:n,writeable:!1}),kd[n]={klass:o,omit:s.omit||[]}}nn(Object,"Object"),Al.serialize=function(o,n){const s=o.toArrayBuffer();return n&&n.push(s),{buffer:s}},Al.deserialize=function(o){return new Al(o.buffer)},Object.defineProperty(Al,"name",{value:"Grid"}),nn(Al,"Grid"),nn(Jr,"Color"),nn(Error,"Error"),nn(Ze,"AJAXError"),nn(Xi,"ResolvedImage"),nn(Gc,"StylePropertyFunction"),nn(vd,"StyleExpression",{omit:["_evaluator"]}),nn(Ms,"ZoomDependentExpression"),nn(xd,"ZoomConstantExpression"),nn(qa,"CompoundExpression",{omit:["_evaluate"]});for(const o in xl)kd[xl[o]._classRegistryKey]||nn(xl[o],`Expression${o}`);function Ey(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Kc(o){return b.ImageBitmap&&o instanceof b.ImageBitmap}function Yc(o,n){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp)return o;if(Ey(o)||Kc(o))return n&&n.push(o),o;if(ArrayBuffer.isView(o)){const s=o;return n&&n.push(s.buffer),s}if(o instanceof b.ImageData)return n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const s=[];for(const u of o)s.push(Yc(u,n));return s}if(typeof o=="object"){const s=o.constructor,u=s._classRegistryKey;if(!u)throw new Error(`can't serialize object of unregistered class ${u}`);const f=s.serialize?s.serialize(o,n):{};if(!s.serialize){for(const m in o)o.hasOwnProperty(m)&&(kd[u].omit.indexOf(m)>=0||(f[m]=Yc(o[m],n)));o instanceof Error&&(f.message=o.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(f.$name=u),f}throw new Error("can't serialize object of type "+typeof o)}function Qc(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||Ey(o)||Kc(o)||ArrayBuffer.isView(o)||o instanceof b.ImageData)return o;if(Array.isArray(o))return o.map(Qc);if(typeof o=="object"){const n=o.$name||"Object",{klass:s}=kd[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(o);const u=Object.create(s.prototype);for(const f of Object.keys(o))f!=="$name"&&(u[f]=Qc(o[f]));return u}throw new Error("can't deserialize object of type "+typeof o)}const Jc=o=>o>=1536&&o<=1791,Ty=o=>o>=1872&&o<=1919,Kf=o=>o>=2208&&o<=2303,Cy=o=>o>=11904&&o<=12031,Yf=o=>o>=12032&&o<=12255,Qf=o=>o>=12272&&o<=12287,eu=o=>o>=12288&&o<=12351,Rd=o=>o>=12352&&o<=12447,kl=o=>o>=12448&&o<=12543,Id=o=>o>=12544&&o<=12591,My=o=>o>=12704&&o<=12735,Ay=o=>o>=12736&&o<=12783,Jf=o=>o>=12784&&o<=12799,ky=o=>o>=12800&&o<=13055,Ry=o=>o>=13056&&o<=13311,Iy=o=>o>=13312&&o<=19903,ep=o=>o>=19968&&o<=40959,Py=o=>o>=40960&&o<=42127,Ly=o=>o>=42128&&o<=42191,Dy=o=>o>=44032&&o<=55215,zy=o=>o>=63744&&o<=64255,Pd=o=>o>=64336&&o<=65023,tu=o=>o>=65040&&o<=65055,p=o=>o>=65072&&o<=65103,l=o=>o>=65104&&o<=65135,h=o=>o>=65136&&o<=65279,g=o=>o>=65280&&o<=65519;function v(o){for(const n of o)if(M(n.charCodeAt(0)))return!0;return!1}function w(o){for(const n of o)if(!C(n.charCodeAt(0)))return!1;return!0}function C(o){return!(Jc(o)||Ty(o)||Kf(o)||Pd(o)||h(o))}function M(o){return!(o!==746&&o!==747&&(o<4352||!(My(o)||Id(o)||p(o)&&!(o>=65097&&o<=65103)||zy(o)||Ry(o)||Cy(o)||Ay(o)||!(!eu(o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Iy(o)||ep(o)||ky(o)||(n=>n>=12592&&n<=12687)(o)||(n=>n>=43360&&n<=43391)(o)||(n=>n>=55216&&n<=55295)(o)||(n=>n>=4352&&n<=4607)(o)||Dy(o)||Rd(o)||Qf(o)||(n=>n>=12688&&n<=12703)(o)||Yf(o)||Jf(o)||kl(o)&&o!==12540||!(!g(o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!l(o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||(n=>n>=5120&&n<=5759)(o)||(n=>n>=6320&&n<=6399)(o)||tu(o)||(n=>n>=19904&&n<=19967)(o)||Py(o)||Ly(o))))}function R(o){return!(M(o)||function(n){return!!((s=>s>=128&&s<=255)(n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||(s=>s>=8192&&s<=8303)(n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||(s=>s>=8448&&s<=8527)(n)||(s=>s>=8528&&s<=8591)(n)||(s=>s>=8960&&s<=9215)(n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||(s=>s>=9216&&s<=9279)(n)&&n!==9251||(s=>s>=9280&&s<=9311)(n)||(s=>s>=9312&&s<=9471)(n)||(s=>s>=9632&&s<=9727)(n)||(s=>s>=9728&&s<=9983)(n)&&!(n>=9754&&n<=9759)||(s=>s>=11008&&s<=11263)(n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||eu(n)||kl(n)||(s=>s>=57344&&s<=63743)(n)||p(n)||l(n)||g(n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function z(o){return o>=1424&&o<=2303||Pd(o)||h(o)}function D(o,n){return!(!n&&z(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||(s=>s>=6016&&s<=6143)(o))}function W(o){for(const n of o)if(z(n.charCodeAt(0)))return!0;return!1}const te="deferred",ie="loading",ae="loaded";let le=null,de="unavailable",Q=null;const xe=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(de="error"),le&&le(o)};function ye(){we.fire(new yr("pluginStateChange",{pluginStatus:de,pluginURL:Q}))}const we=new xa,Ie=function(){return de},Ae=function(){if(de!==te||!Q)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");de=ie,ye(),Q&&tn({url:Q},o=>{o?xe(o):(de=ae,ye())})},Fe={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>de===ae||Fe.applyArabicShaping!=null,isLoading:()=>de===ie,setState(o){de=o.pluginStatus,Q=o.pluginURL},isParsed:()=>Fe.applyArabicShaping!=null&&Fe.processBidirectionalText!=null&&Fe.processStyledBidirectionalText!=null,getPluginURL:()=>Q};class He{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.transition=s.transition,this.pitch=s.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(n){return function(s,u){for(const f of s)if(!D(f.charCodeAt(0),u))return!1;return!0}(n,Fe.isLoaded())}}class tt{constructor(n,s){this.property=n,this.value=s,this.expression=function(u,f){if(yd(u))return new Gc(u,f);if(Sl(u)){const m=As(u,f);if(m.result==="error")throw new Error(m.value.map(_=>`${_.key}: ${_.message}`).join(", "));return m.value}{let m=u;return typeof u=="string"&&f.type==="color"&&(m=Jr.parse(u)),{kind:"constant",evaluate:()=>m}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,u){return this.property.possiblyEvaluate(this,n,s,u)}}class ot{constructor(n){this.property=n,this.value=new tt(n,void 0)}transitioned(n,s){return new Ye(this.property,this.value,s,_e({},n.transition,this.transition),n.now)}untransitioned(){return new Ye(this.property,this.value,null,{},0)}}class Ot{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return St(this._values[n].value.value)}setValue(n,s){this._values.hasOwnProperty(n)||(this._values[n]=new ot(this._values[n].property)),this._values[n].value=new tt(this._values[n].property,s===null?void 0:St(s))}getTransition(n){return St(this._values[n].transition)}setTransition(n,s){this._values.hasOwnProperty(n)||(this._values[n]=new ot(this._values[n].property)),this._values[n].transition=St(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const u=this.getValue(s);u!==void 0&&(n[s]=u);const f=this.getTransition(s);f!==void 0&&(n[`${s}-transition`]=f)}return n}transitioned(n,s){const u=new xt(this._properties);for(const f of Object.keys(this._values))u._values[f]=this._values[f].transitioned(n,s._values[f]);return u}untransitioned(){const n=new xt(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class Ye{constructor(n,s,u,f,m){const _=f.delay||0,x=f.duration||0;m=m||0,this.property=n,this.value=s,this.begin=m+_,this.end=this.begin+x,n.specification.transition&&(f.delay||f.duration)&&(this.prior=u)}possiblyEvaluate(n,s,u){const f=n.now||0,m=this.value.possiblyEvaluate(n,s,u),_=this.prior;if(_){if(f>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(f<this.begin)return _.possiblyEvaluate(n,s,u);{const x=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(n,s,u),m,Je(x))}}return m}}class xt{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,u){const f=new rt(this._properties);for(const m of Object.keys(this._values))f._values[m]=this._values[m].possiblyEvaluate(n,s,u);return f}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class dt{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return St(this._values[n].value)}setValue(n,s){this._values[n]=new tt(this._values[n].property,s===null?void 0:St(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const u=this.getValue(s);u!==void 0&&(n[s]=u)}return n}possiblyEvaluate(n,s,u){const f=new rt(this._properties);for(const m of Object.keys(this._values))f._values[m]=this._values[m].possiblyEvaluate(n,s,u);return f}}class Tt{constructor(n,s,u){this.property=n,this.value=s,this.parameters=u}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,u,f){return this.property.evaluate(this.value,this.parameters,n,s,u,f)}}class rt{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class qe{constructor(n){this.specification=n}possiblyEvaluate(n,s){return n.expression.evaluate(s)}interpolate(n,s,u){const f=Fc[this.specification.type];return f?f(n,s,u):n}}class at{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,u,f){return new Tt(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},u,f)}:n.expression,s)}interpolate(n,s,u){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new Tt(this,{kind:"constant",value:void 0},n.parameters);const f=Fc[this.specification.type];return f?new Tt(this,{kind:"constant",value:f(n.value.value,s.value.value,u)},n.parameters):n}evaluate(n,s,u,f,m,_){return n.kind==="constant"?n.value:n.evaluate(s,u,f,m,_)}}class wt{constructor(n){this.specification=n}possiblyEvaluate(n,s,u,f){return!!n.expression.evaluate(s,null,{},u,f)}interpolate(){return!1}}class kt{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const s=new He(0,{});for(const u in n){const f=n[u];f.specification.overridable&&this.overridableProperties.push(u);const m=this.defaultPropertyValues[u]=new tt(f,void 0),_=this.defaultTransitionablePropertyValues[u]=new ot(f);this.defaultTransitioningPropertyValues[u]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=m.possiblyEvaluate(s)}}}function un(o,n){return 256*(o=ze(Math.floor(o),0,255))+ze(Math.floor(n),0,255)}nn(at,"DataDrivenProperty"),nn(qe,"DataConstantProperty"),nn(wt,"ColorRampProperty");const Dn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class on{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Xt{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function dn(o,n=1){let s=0,u=0;return{members:o.map(f=>{const m=Dn[f.type].BYTES_PER_ELEMENT,_=s=$n(s,Math.max(n,m)),x=f.components||1;return u=Math.max(u,m),s+=m*x,{name:f.name,type:f.type,components:x,offset:_}}),size:$n(s,Math.max(u,n)),alignment:n}}function $n(o,n){return Math.ceil(o/n)*n}class yn extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const u=this.length;return this.resize(u+1),this.emplace(u,n,s)}emplace(n,s,u){const f=2*n;return this.int16[f+0]=s,this.int16[f+1]=u,n}}yn.prototype.bytesPerElement=4,nn(yn,"StructArrayLayout2i4");class lr extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,u){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,u)}emplace(n,s,u,f){const m=3*n;return this.int16[m+0]=s,this.int16[m+1]=u,this.int16[m+2]=f,n}}lr.prototype.bytesPerElement=6,nn(lr,"StructArrayLayout3i6");class ur extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,u,f){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,u,f)}emplace(n,s,u,f,m){const _=4*n;return this.int16[_+0]=s,this.int16[_+1]=u,this.int16[_+2]=f,this.int16[_+3]=m,n}}ur.prototype.bytesPerElement=8,nn(ur,"StructArrayLayout4i8");class Mr extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,u,f,m,_,x){const E=this.length;return this.resize(E+1),this.emplace(E,n,s,u,f,m,_,x)}emplace(n,s,u,f,m,_,x,E){const T=6*n,A=12*n,I=3*n;return this.int16[T+0]=s,this.int16[T+1]=u,this.uint8[A+4]=f,this.uint8[A+5]=m,this.uint8[A+6]=_,this.uint8[A+7]=x,this.float32[I+2]=E,n}}Mr.prototype.bytesPerElement=12,nn(Mr,"StructArrayLayout2i4ub1f12");class wr extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,u,f){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,u,f)}emplace(n,s,u,f,m){const _=4*n;return this.float32[_+0]=s,this.float32[_+1]=u,this.float32[_+2]=f,this.float32[_+3]=m,n}}wr.prototype.bytesPerElement=16,nn(wr,"StructArrayLayout4f16");class si extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,u,f,m){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,u,f,m)}emplace(n,s,u,f,m,_){const x=6*n,E=3*n;return this.uint16[x+0]=s,this.uint16[x+1]=u,this.uint16[x+2]=f,this.uint16[x+3]=m,this.float32[E+2]=_,n}}si.prototype.bytesPerElement=12,nn(si,"StructArrayLayout4ui1f12");class oo extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,u,f){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,u,f)}emplace(n,s,u,f,m){const _=4*n;return this.uint16[_+0]=s,this.uint16[_+1]=u,this.uint16[_+2]=f,this.uint16[_+3]=m,n}}oo.prototype.bytesPerElement=8,nn(oo,"StructArrayLayout4ui8");class Uo extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,u,f,m,_){const x=this.length;return this.resize(x+1),this.emplace(x,n,s,u,f,m,_)}emplace(n,s,u,f,m,_,x){const E=6*n;return this.int16[E+0]=s,this.int16[E+1]=u,this.int16[E+2]=f,this.int16[E+3]=m,this.int16[E+4]=_,this.int16[E+5]=x,n}}Uo.prototype.bytesPerElement=12,nn(Uo,"StructArrayLayout6i12");class Ta extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,u,f,m,_,x,E,T,A,I,L){const N=this.length;return this.resize(N+1),this.emplace(N,n,s,u,f,m,_,x,E,T,A,I,L)}emplace(n,s,u,f,m,_,x,E,T,A,I,L,N){const V=12*n;return this.int16[V+0]=s,this.int16[V+1]=u,this.int16[V+2]=f,this.int16[V+3]=m,this.uint16[V+4]=_,this.uint16[V+5]=x,this.uint16[V+6]=E,this.uint16[V+7]=T,this.int16[V+8]=A,this.int16[V+9]=I,this.int16[V+10]=L,this.int16[V+11]=N,n}}Ta.prototype.bytesPerElement=24,nn(Ta,"StructArrayLayout4i4ui4i24");class Or extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,u,f,m,_){const x=this.length;return this.resize(x+1),this.emplace(x,n,s,u,f,m,_)}emplace(n,s,u,f,m,_,x){const E=10*n,T=5*n;return this.int16[E+0]=s,this.int16[E+1]=u,this.int16[E+2]=f,this.float32[T+2]=m,this.float32[T+3]=_,this.float32[T+4]=x,n}}Or.prototype.bytesPerElement=20,nn(Or,"StructArrayLayout3i3f20");class Sr extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}Sr.prototype.bytesPerElement=4,nn(Sr,"StructArrayLayout1ul4");class tr extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,u,f,m,_,x,E,T,A,I,L,N){const V=this.length;return this.resize(V+1),this.emplace(V,n,s,u,f,m,_,x,E,T,A,I,L,N)}emplace(n,s,u,f,m,_,x,E,T,A,I,L,N,V){const X=20*n,re=10*n;return this.int16[X+0]=s,this.int16[X+1]=u,this.int16[X+2]=f,this.int16[X+3]=m,this.int16[X+4]=_,this.float32[re+3]=x,this.float32[re+4]=E,this.float32[re+5]=T,this.float32[re+6]=A,this.int16[X+14]=I,this.uint32[re+8]=L,this.uint16[X+18]=N,this.uint16[X+19]=V,n}}tr.prototype.bytesPerElement=40,nn(tr,"StructArrayLayout5i4f1i1ul2ui40");class Hr extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,u,f,m,_,x){const E=this.length;return this.resize(E+1),this.emplace(E,n,s,u,f,m,_,x)}emplace(n,s,u,f,m,_,x,E){const T=8*n;return this.int16[T+0]=s,this.int16[T+1]=u,this.int16[T+2]=f,this.int16[T+4]=m,this.int16[T+5]=_,this.int16[T+6]=x,this.int16[T+7]=E,n}}Hr.prototype.bytesPerElement=16,nn(Hr,"StructArrayLayout3i2i2i16");class Bi extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,u,f,m){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,u,f,m)}emplace(n,s,u,f,m,_){const x=4*n,E=8*n;return this.float32[x+0]=s,this.float32[x+1]=u,this.float32[x+2]=f,this.int16[E+6]=m,this.int16[E+7]=_,n}}Bi.prototype.bytesPerElement=16,nn(Bi,"StructArrayLayout2f1f2i16");class Pr extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,u,f){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,u,f)}emplace(n,s,u,f,m){const _=12*n,x=3*n;return this.uint8[_+0]=s,this.uint8[_+1]=u,this.float32[x+1]=f,this.float32[x+2]=m,n}}Pr.prototype.bytesPerElement=12,nn(Pr,"StructArrayLayout2ub2f12");class Ni extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,u){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,u)}emplace(n,s,u,f){const m=3*n;return this.float32[m+0]=s,this.float32[m+1]=u,this.float32[m+2]=f,n}}Ni.prototype.bytesPerElement=12,nn(Ni,"StructArrayLayout3f12");class $i extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,u){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,u)}emplace(n,s,u,f){const m=3*n;return this.uint16[m+0]=s,this.uint16[m+1]=u,this.uint16[m+2]=f,n}}$i.prototype.bytesPerElement=6,nn($i,"StructArrayLayout3ui6");class Ka extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,s,u,f,m,_,x,E,T,A,I,L,N,V,X,re,ge,Te,me,Se,Re){const Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,n,s,u,f,m,_,x,E,T,A,I,L,N,V,X,re,ge,Te,me,Se,Re)}emplace(n,s,u,f,m,_,x,E,T,A,I,L,N,V,X,re,ge,Te,me,Se,Re,Ce){const it=30*n,et=15*n,gt=60*n;return this.int16[it+0]=s,this.int16[it+1]=u,this.int16[it+2]=f,this.float32[et+2]=m,this.float32[et+3]=_,this.uint16[it+8]=x,this.uint16[it+9]=E,this.uint32[et+5]=T,this.uint32[et+6]=A,this.uint32[et+7]=I,this.uint16[it+16]=L,this.uint16[it+17]=N,this.uint16[it+18]=V,this.float32[et+10]=X,this.float32[et+11]=re,this.uint8[gt+48]=ge,this.uint8[gt+49]=Te,this.uint8[gt+50]=me,this.uint32[et+13]=Se,this.int16[it+28]=Re,this.uint8[gt+58]=Ce,n}}Ka.prototype.bytesPerElement=60,nn(Ka,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Rl extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,s,u,f,m,_,x,E,T,A,I,L,N,V,X,re,ge,Te,me,Se,Re,Ce,it,et,gt,Pt,st,vt,bt,Mt){const Dt=this.length;return this.resize(Dt+1),this.emplace(Dt,n,s,u,f,m,_,x,E,T,A,I,L,N,V,X,re,ge,Te,me,Se,Re,Ce,it,et,gt,Pt,st,vt,bt,Mt)}emplace(n,s,u,f,m,_,x,E,T,A,I,L,N,V,X,re,ge,Te,me,Se,Re,Ce,it,et,gt,Pt,st,vt,bt,Mt,Dt){const ct=38*n,Vt=19*n;return this.int16[ct+0]=s,this.int16[ct+1]=u,this.int16[ct+2]=f,this.float32[Vt+2]=m,this.float32[Vt+3]=_,this.int16[ct+8]=x,this.int16[ct+9]=E,this.int16[ct+10]=T,this.int16[ct+11]=A,this.int16[ct+12]=I,this.int16[ct+13]=L,this.uint16[ct+14]=N,this.uint16[ct+15]=V,this.uint16[ct+16]=X,this.uint16[ct+17]=re,this.uint16[ct+18]=ge,this.uint16[ct+19]=Te,this.uint16[ct+20]=me,this.uint16[ct+21]=Se,this.uint16[ct+22]=Re,this.uint16[ct+23]=Ce,this.uint16[ct+24]=it,this.uint16[ct+25]=et,this.uint16[ct+26]=gt,this.uint16[ct+27]=Pt,this.uint16[ct+28]=st,this.uint32[Vt+15]=vt,this.float32[Vt+16]=bt,this.float32[Vt+17]=Mt,this.float32[Vt+18]=Dt,n}}Rl.prototype.bytesPerElement=76,nn(Rl,"StructArrayLayout3i2f6i15ui1ul3f76");class yo extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}yo.prototype.bytesPerElement=4,nn(yo,"StructArrayLayout1f4");class Co extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,u,f,m){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,u,f,m)}emplace(n,s,u,f,m,_){const x=5*n;return this.float32[x+0]=s,this.float32[x+1]=u,this.float32[x+2]=f,this.float32[x+3]=m,this.float32[x+4]=_,n}}Co.prototype.bytesPerElement=20,nn(Co,"StructArrayLayout5f20");class Ca extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,u,f){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,u,f)}emplace(n,s,u,f,m){const _=6*n;return this.uint32[3*n+0]=s,this.uint16[_+2]=u,this.uint16[_+3]=f,this.uint16[_+4]=m,n}}Ca.prototype.bytesPerElement=12,nn(Ca,"StructArrayLayout1ul3ui12");class Ya extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const u=this.length;return this.resize(u+1),this.emplace(u,n,s)}emplace(n,s,u){const f=2*n;return this.uint16[f+0]=s,this.uint16[f+1]=u,n}}Ya.prototype.bytesPerElement=4,nn(Ya,"StructArrayLayout2ui4");class Qa extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}Qa.prototype.bytesPerElement=2,nn(Qa,"StructArrayLayout1ui2");class Il extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const u=this.length;return this.resize(u+1),this.emplace(u,n,s)}emplace(n,s,u){const f=2*n;return this.float32[f+0]=s,this.float32[f+1]=u,n}}Il.prototype.bytesPerElement=8,nn(Il,"StructArrayLayout2f8");class xT extends on{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}xT.prototype.size=40;class cx extends tr{get(n){return new xT(this,n)}}nn(cx,"CollisionBoxArray");class bT extends on{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(n){this._structArray.uint8[this._pos1+49]=n}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(n){this._structArray.uint8[this._pos1+50]=n}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(n){this._structArray.uint32[this._pos4+13]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(n){this._structArray.uint8[this._pos1+58]=n}}bT.prototype.size=60;class wT extends Ka{get(n){return new bT(this,n)}}nn(wT,"PlacedSymbolArray");class ST extends on{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(n){this._structArray.uint32[this._pos4+15]=n}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}ST.prototype.size=76;class ET extends Rl{get(n){return new ST(this,n)}}nn(ET,"SymbolInstanceArray");class TT extends yo{getoffsetX(n){return this.float32[1*n+0]}}nn(TT,"GlyphOffsetArray");class CT extends yn{getx(n){return this.int16[2*n+0]}gety(n){return this.int16[2*n+1]}}nn(CT,"SymbolLineVertexArray");class MT extends on{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}MT.prototype.size=12;class AT extends Ca{get(n){return new MT(this,n)}}nn(AT,"FeatureIndexArray");class kT extends Ya{geta_centroid_pos0(n){return this.uint16[2*n+0]}geta_centroid_pos1(n){return this.uint16[2*n+1]}}nn(kT,"FillExtrusionCentroidArray");const Q4=dn([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),J4=dn([{name:"a_dash",components:4,type:"Uint16"}]);var nu={},e5={get exports(){return nu},set exports(o){nu=o}},ux={};({get exports(){return ux},set exports(o){ux=o}}).exports=function(o,n){var s,u,f,m,_,x,E,T;for(u=o.length-(s=3&o.length),f=n,_=3432918353,x=461845907,T=0;T<u;)E=255&o.charCodeAt(T)|(255&o.charCodeAt(++T))<<8|(255&o.charCodeAt(++T))<<16|(255&o.charCodeAt(++T))<<24,++T,f=27492+(65535&(m=5*(65535&(f=(f^=E=(65535&(E=(E=(65535&E)*_+(((E>>>16)*_&65535)<<16)&4294967295)<<15|E>>>17))*x+(((E>>>16)*x&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(m>>>16)&65535)<<16);switch(E=0,s){case 3:E^=(255&o.charCodeAt(T+2))<<16;case 2:E^=(255&o.charCodeAt(T+1))<<8;case 1:f^=E=(65535&(E=(E=(65535&(E^=255&o.charCodeAt(T)))*_+(((E>>>16)*_&65535)<<16)&4294967295)<<15|E>>>17))*x+(((E>>>16)*x&65535)<<16)&4294967295}return f^=o.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0};var dx={};({get exports(){return dx},set exports(o){dx=o}}).exports=function(o,n){for(var s,u=o.length,f=n^u,m=0;u>=4;)s=1540483477*(65535&(s=255&o.charCodeAt(m)|(255&o.charCodeAt(++m))<<8|(255&o.charCodeAt(++m))<<16|(255&o.charCodeAt(++m))<<24))+((1540483477*(s>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),u-=4,++m;switch(u){case 3:f^=(255&o.charCodeAt(m+2))<<16;case 2:f^=(255&o.charCodeAt(m+1))<<8;case 1:f=1540483477*(65535&(f^=255&o.charCodeAt(m)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0};var RT=ux,t5=dx;e5.exports=RT,nu.murmur3=RT,nu.murmur2=t5;class Oy{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,u,f){this.ids.push(IT(n)),this.positions.push(s,u,f)}getPositions(n){const s=IT(n);let u=0,f=this.ids.length-1;for(;u<f;){const _=u+f>>1;this.ids[_]>=s?f=_:u=_+1}const m=[];for(;this.ids[u]===s;)m.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return m}static serialize(n,s){const u=new Float64Array(n.ids),f=new Uint32Array(n.positions);return hx(u,f,0,u.length-1),s&&s.push(u.buffer,f.buffer),{ids:u,positions:f}}static deserialize(n){const s=new Oy;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function IT(o){const n=+o;return!isNaN(n)&&Number.MIN_SAFE_INTEGER<=n&&n<=Number.MAX_SAFE_INTEGER?n:nu(String(o))}function hx(o,n,s,u){for(;s<u;){const f=o[s+u>>1];let m=s-1,_=u+1;for(;;){do m++;while(o[m]<f);do _--;while(o[_]>f);if(m>=_)break;Fy(o,m,_),Fy(n,3*m,3*_),Fy(n,3*m+1,3*_+1),Fy(n,3*m+2,3*_+2)}_-s<u-_?(hx(o,n,s,_),s=_+1):(hx(o,n,_+1,u),u=_)}}function Fy(o,n,s){const u=o[n];o[n]=o[s],o[s]=u}nn(Oy,"FeaturePositionMap");class ks{constructor(n){this.gl=n.gl,this.initialized=!1}fetchUniformLocation(n,s){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(n,s),this.initialized=!0),!!this.location}}class By extends ks{constructor(n){super(n),this.current=0}set(n,s,u){this.fetchUniformLocation(n,s)&&this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class PT extends ks{constructor(n){super(n),this.current=[0,0,0,0]}set(n,s,u){this.fetchUniformLocation(n,s)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3])))}}class LT extends ks{constructor(n){super(n),this.current=Jr.transparent}set(n,s,u){this.fetchUniformLocation(n,s)&&(u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a)))}}const n5=new Float32Array(16),r5=new Float32Array(9),i5=new Float32Array(4);function fx(o){return[un(255*o.r,255*o.g),un(255*o.b,255*o.a)]}class tp{constructor(n,s,u){this.value=n,this.uniformNames=s.map(f=>`u_${f}`),this.type=u}setUniform(n,s,u,f,m){s.set(n,m,f.constantOr(this.value))}getBinding(n,s){return this.type==="color"?new LT(n):new By(n)}}class Ld{constructor(n,s){this.uniformNames=s.map(u=>`u_${u}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(n){this.pixelRatio=n.pixelRatio||1,this.pattern=n.tl.concat(n.br)}setUniform(n,s,u,f,m){const _=m==="u_pattern"||m==="u_dash"?this.pattern:m==="u_pixel_ratio"?this.pixelRatio:null;_&&s.set(n,m,_)}getBinding(n,s){return s==="u_pattern"||s==="u_dash"?new PT(n):new By(n)}}class Rs{constructor(n,s,u,f){this.expression=n,this.type=u,this.maxValue=0,this.paintVertexAttributes=s.map(m=>({name:`a_${m}`,type:"Float32",components:u==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(n,s,u,f,m,_){const x=this.paintVertexArray.length,E=this.expression.evaluate(new He(0),s,{},m,f,_);this.paintVertexArray.resize(n),this._setPaintValue(x,n,E)}updatePaintArray(n,s,u,f,m){const _=this.expression.evaluate({zoom:0},u,f,void 0,m);this._setPaintValue(n,s,_)}_setPaintValue(n,s,u){if(this.type==="color"){const f=fx(u);for(let m=n;m<s;m++)this.paintVertexArray.emplace(m,f[0],f[1])}else{for(let f=n;f<s;f++)this.paintVertexArray.emplace(f,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ma{constructor(n,s,u,f,m,_){this.expression=n,this.uniformNames=s.map(x=>`u_${x}_t`),this.type=u,this.useIntegerZoom=f,this.zoom=m,this.maxValue=0,this.paintVertexAttributes=s.map(x=>({name:`a_${x}`,type:"Float32",components:u==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(n,s,u,f,m,_){const x=this.expression.evaluate(new He(this.zoom),s,{},m,f,_),E=this.expression.evaluate(new He(this.zoom+1),s,{},m,f,_),T=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(T,n,x,E)}updatePaintArray(n,s,u,f,m){const _=this.expression.evaluate({zoom:this.zoom},u,f,void 0,m),x=this.expression.evaluate({zoom:this.zoom+1},u,f,void 0,m);this._setPaintValue(n,s,_,x)}_setPaintValue(n,s,u,f){if(this.type==="color"){const m=fx(u),_=fx(f);for(let x=n;x<s;x++)this.paintVertexArray.emplace(x,m[0],m[1],_[0],_[1])}else{for(let m=n;m<s;m++)this.paintVertexArray.emplace(m,u,f);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(f))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s,u,f,m){const _=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,x=ze(this.expression.interpolationFactor(_,this.zoom,this.zoom+1),0,1);s.set(n,m,x)}getBinding(n,s){return new By(n)}}class Pl{constructor(n,s,u,f,m){this.expression=n,this.layerId=m,this.paintVertexAttributes=(u==="array"?J4:Q4).members;for(let _=0;_<s.length;++_);this.paintVertexArray=new f}populatePaintArray(n,s,u){const f=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValues(f,n,s.patterns&&s.patterns[this.layerId],u)}updatePaintArray(n,s,u,f,m,_){this._setPaintValues(n,s,u.patterns&&u.patterns[this.layerId],_)}_setPaintValues(n,s,u,f){if(!f||!u)return;const m=f[u];if(!m)return;const{tl:_,br:x,pixelRatio:E}=m;for(let T=n;T<s;T++)this.paintVertexArray.emplace(T,_[0],_[1],x[0],x[1],E)}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ll{constructor(n,s,u=()=>!0){this.binders={},this._buffers=[];const f=[];for(const m in n.paint._values){if(!u(m))continue;const _=n.paint.get(m);if(!(_ instanceof Tt&&wl(_.property.specification)))continue;const x=a5(m,n.type),E=_.value,T=_.property.specification.type,A=!!_.property.useIntegerZoom,I=m==="line-dasharray"||m.endsWith("pattern"),L=m==="line-dasharray"&&n.layout.get("line-cap").value.kind!=="constant";if(E.kind!=="constant"||L)if(E.kind==="source"||L||I){const N=DT(m,T,"source");this.binders[m]=I?new Pl(E,x,T,N,n.id):new Rs(E,x,T,N),f.push(`/a_${m}`)}else{const N=DT(m,T,"composite");this.binders[m]=new Ma(E,x,T,A,s,N),f.push(`/z_${m}`)}else this.binders[m]=I?new Ld(E.value,x):new tp(E.value,x,T),f.push(`/u_${m}`)}this.cacheKey=f.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof Rs||s instanceof Ma?s.maxValue:0}populatePaintArrays(n,s,u,f,m,_){for(const x in this.binders){const E=this.binders[x];(E instanceof Rs||E instanceof Ma||E instanceof Pl)&&E.populatePaintArray(n,s,u,f,m,_)}}setConstantPatternPositions(n){for(const s in this.binders){const u=this.binders[s];u instanceof Ld&&u.setConstantPatternPositions(n)}}updatePaintArrays(n,s,u,f,m,_){let x=!1;for(const E in n){const T=s.getPositions(E);for(const A of T){const I=u.feature(A.index);for(const L in this.binders){const N=this.binders[L];if((N instanceof Rs||N instanceof Ma||N instanceof Pl)&&N.expression.isStateDependent===!0){const V=f.paint.get(L);N.expression=V.value,N.updatePaintArray(A.start,A.end,I,n[E],m,_),x=!0}}}}return x}defines(){const n=[];for(const s in this.binders){const u=this.binders[s];(u instanceof tp||u instanceof Ld)&&n.push(...u.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const u=this.binders[s];if(u instanceof Rs||u instanceof Ma||u instanceof Pl)for(let f=0;f<u.paintVertexAttributes.length;f++)n.push(u.paintVertexAttributes[f].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const u=this.binders[s];if(u instanceof tp||u instanceof Ld||u instanceof Ma)for(const f of u.uniformNames)n.push(f)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n){const s=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof tp||f instanceof Ld||f instanceof Ma)for(const m of f.uniformNames)s.push({name:m,property:u,binding:f.getBinding(n,m)})}return s}setUniforms(n,s,u,f,m){for(const{name:_,property:x,binding:E}of u)this.binders[x].setUniform(n,E,m,f.get(x),_)}updatePaintBuffers(){this._buffers=[];for(const n in this.binders){const s=this.binders[n];(s instanceof Rs||s instanceof Ma||s instanceof Pl)&&s.paintVertexBuffer&&this._buffers.push(s.paintVertexBuffer)}}upload(n){for(const s in this.binders){const u=this.binders[s];(u instanceof Rs||u instanceof Ma||u instanceof Pl)&&u.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof Rs||s instanceof Ma||s instanceof Pl)&&s.destroy()}}}class ru{constructor(n,s,u=()=>!0){this.programConfigurations={};for(const f of n)this.programConfigurations[f.id]=new Ll(f,s,u);this.needsUpload=!1,this._featureMap=new Oy,this._bufferOffset=0}populatePaintArrays(n,s,u,f,m,_,x){for(const E in this.programConfigurations)this.programConfigurations[E].populatePaintArrays(n,s,f,m,_,x);s.id!==void 0&&this._featureMap.add(s.id,u,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,u,f,m){for(const _ of u)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(n,this._featureMap,s,_,f,m)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}const o5={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function a5(o,n){return o5[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}const s5={"line-pattern":{source:si,composite:si},"fill-pattern":{source:si,composite:si},"fill-extrusion-pattern":{source:si,composite:si},"line-dasharray":{source:oo,composite:oo}},l5={color:{source:Il,composite:wr},number:{source:yo,composite:Il}};function DT(o,n,s){const u=s5[o];return u&&u[s]||l5[n][s]}nn(tp,"ConstantBinder"),nn(Ld,"PatternConstantBinder"),nn(Rs,"SourceExpressionBinder"),nn(Pl,"PatternCompositeBinder"),nn(Ma,"CompositeExpressionBinder"),nn(Ll,"ProgramConfiguration",{omit:["_buffers"]}),nn(ru,"ProgramConfigurationSet");const Ny="-transition";class Aa extends xa{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&n.type!=="sky"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new dt(s.layout)),s.paint)){this._transitionablePaint=new Ot(s.paint);for(const u in n.paint)this.setPaintProperty(u,n.paint[u],{validate:!1});for(const u in n.layout)this.setLayoutProperty(u,n.layout[u],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new rt(s.paint)}}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,u={}){s!=null&&this._validate(wy,`layers.${this.id}.layout.${n}`,n,s,u)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return Lt(n,Ny)?this._transitionablePaint.getTransition(n.slice(0,-Ny.length)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,u={}){if(s!=null&&this._validate(lx,`layers.${this.id}.paint.${n}`,n,s,u))return!1;if(Lt(n,Ny))return this._transitionablePaint.setTransition(n.slice(0,-Ny.length),s||void 0),!1;{const f=this._transitionablePaint._values[n],m=f.value.isDataDriven(),_=f.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const x=this._transitionablePaint._values[n].value,E=x.isDataDriven(),T=Lt(n,"pattern")||n==="line-dasharray";return E||m||T||this._handleOverridablePaintPropertyUpdate(n,_,x)}}_handleSpecialPaintPropertyUpdate(n){}getProgramIds(){return null}getProgramConfiguration(n){return null}_handleOverridablePaintPropertyUpdate(n,s,u){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),Rt(n,(s,u)=>!(s===void 0||u==="layout"&&!Object.keys(s).length||u==="paint"&&!Object.keys(s).length))}_validate(n,s,u,f,m={}){return(!m||m.validate!==!1)&&Sy(this,n.call(by,{key:s,layerType:this.type,objectKey:u,value:f,styleSpec:pt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof Tt&&wl(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=wd(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const c5=dn([{name:"a_pos",components:2,type:"Int16"}],4),u5=dn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class li{constructor(n=[]){this.segments=n}prepareSegment(n,s,u,f){let m=this.segments[this.segments.length-1];return n>li.MAX_VERTEX_ARRAY_LENGTH&&Ct(`Max vertices per segment is ${li.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!m||m.vertexLength+n>li.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==f)&&(m={vertexOffset:s.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0},f!==void 0&&(m.sortKey=f),this.segments.push(m)),m}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,u,f){return new li([{vertexOffset:n,primitiveOffset:s,vertexLength:u,primitiveLength:f,vaos:{},sortKey:0}])}}li.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,nn(li,"SegmentVector");var kn=8192;class Dl{constructor(n,s){n&&(s?this.setSouthWest(n).setNorthEast(s):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}setNorthEast(n){return this._ne=n instanceof er?new er(n.lng,n.lat):er.convert(n),this}setSouthWest(n){return this._sw=n instanceof er?new er(n.lng,n.lat):er.convert(n),this}extend(n){const s=this._sw,u=this._ne;let f,m;if(n instanceof er)f=n,m=n;else{if(!(n instanceof Dl))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(Dl.convert(n)):this.extend(er.convert(n)):typeof n=="object"&&n!==null&&n.hasOwnProperty("lat")&&(n.hasOwnProperty("lon")||n.hasOwnProperty("lng"))?this.extend(er.convert(n)):this;if(f=n._sw,m=n._ne,!f||!m)return this}return s||u?(s.lng=Math.min(f.lng,s.lng),s.lat=Math.min(f.lat,s.lat),u.lng=Math.max(m.lng,u.lng),u.lat=Math.max(m.lat,u.lat)):(this._sw=new er(f.lng,f.lat),this._ne=new er(m.lng,m.lat)),this}getCenter(){return new er((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new er(this.getWest(),this.getNorth())}getSouthEast(){return new er(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:s,lat:u}=er.convert(n);let f=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(f=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&f}static convert(n){return!n||n instanceof Dl?n:new Dl(n)}}var $y=1e-6,Mo=typeof Float32Array<"u"?Float32Array:Array;function zT(){var o=new Mo(9);return Mo!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[5]=0,o[6]=0,o[7]=0),o[0]=1,o[4]=1,o[8]=1,o}function OT(o,n,s){var u=n[0],f=n[1],m=n[2],_=n[3],x=n[4],E=n[5],T=n[6],A=n[7],I=n[8],L=s[0],N=s[1],V=s[2],X=s[3],re=s[4],ge=s[5],Te=s[6],me=s[7],Se=s[8];return o[0]=L*u+N*_+V*T,o[1]=L*f+N*x+V*A,o[2]=L*m+N*E+V*I,o[3]=X*u+re*_+ge*T,o[4]=X*f+re*x+ge*A,o[5]=X*m+re*E+ge*I,o[6]=Te*u+me*_+Se*T,o[7]=Te*f+me*x+Se*A,o[8]=Te*m+me*E+Se*I,o}function ka(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function px(o,n){var s=n[0],u=n[1],f=n[2],m=n[3],_=n[4],x=n[5],E=n[6],T=n[7],A=n[8],I=n[9],L=n[10],N=n[11],V=n[12],X=n[13],re=n[14],ge=n[15],Te=s*x-u*_,me=s*E-f*_,Se=s*T-m*_,Re=u*E-f*x,Ce=u*T-m*x,it=f*T-m*E,et=A*X-I*V,gt=A*re-L*V,Pt=A*ge-N*V,st=I*re-L*X,vt=I*ge-N*X,bt=L*ge-N*re,Mt=Te*bt-me*vt+Se*st+Re*Pt-Ce*gt+it*et;return Mt?(o[0]=(x*bt-E*vt+T*st)*(Mt=1/Mt),o[1]=(f*vt-u*bt-m*st)*Mt,o[2]=(X*it-re*Ce+ge*Re)*Mt,o[3]=(L*Ce-I*it-N*Re)*Mt,o[4]=(E*Pt-_*bt-T*gt)*Mt,o[5]=(s*bt-f*Pt+m*gt)*Mt,o[6]=(re*Se-V*it-ge*me)*Mt,o[7]=(A*it-L*Se+N*me)*Mt,o[8]=(_*vt-x*Pt+T*et)*Mt,o[9]=(u*Pt-s*vt-m*et)*Mt,o[10]=(V*Ce-X*Se+ge*Te)*Mt,o[11]=(I*Se-A*Ce-N*Te)*Mt,o[12]=(x*gt-_*st-E*et)*Mt,o[13]=(s*st-u*gt+f*et)*Mt,o[14]=(X*me-V*Re-re*Te)*Mt,o[15]=(A*Re-I*me+L*Te)*Mt,o):null}function iu(o,n,s){var u=n[0],f=n[1],m=n[2],_=n[3],x=n[4],E=n[5],T=n[6],A=n[7],I=n[8],L=n[9],N=n[10],V=n[11],X=n[12],re=n[13],ge=n[14],Te=n[15],me=s[0],Se=s[1],Re=s[2],Ce=s[3];return o[0]=me*u+Se*x+Re*I+Ce*X,o[1]=me*f+Se*E+Re*L+Ce*re,o[2]=me*m+Se*T+Re*N+Ce*ge,o[3]=me*_+Se*A+Re*V+Ce*Te,o[4]=(me=s[4])*u+(Se=s[5])*x+(Re=s[6])*I+(Ce=s[7])*X,o[5]=me*f+Se*E+Re*L+Ce*re,o[6]=me*m+Se*T+Re*N+Ce*ge,o[7]=me*_+Se*A+Re*V+Ce*Te,o[8]=(me=s[8])*u+(Se=s[9])*x+(Re=s[10])*I+(Ce=s[11])*X,o[9]=me*f+Se*E+Re*L+Ce*re,o[10]=me*m+Se*T+Re*N+Ce*ge,o[11]=me*_+Se*A+Re*V+Ce*Te,o[12]=(me=s[12])*u+(Se=s[13])*x+(Re=s[14])*I+(Ce=s[15])*X,o[13]=me*f+Se*E+Re*L+Ce*re,o[14]=me*m+Se*T+Re*N+Ce*ge,o[15]=me*_+Se*A+Re*V+Ce*Te,o}function np(o,n,s){var u,f,m,_,x,E,T,A,I,L,N,V,X=s[0],re=s[1],ge=s[2];return n===o?(o[12]=n[0]*X+n[4]*re+n[8]*ge+n[12],o[13]=n[1]*X+n[5]*re+n[9]*ge+n[13],o[14]=n[2]*X+n[6]*re+n[10]*ge+n[14],o[15]=n[3]*X+n[7]*re+n[11]*ge+n[15]):(f=n[1],m=n[2],_=n[3],x=n[4],E=n[5],T=n[6],A=n[7],I=n[8],L=n[9],N=n[10],V=n[11],o[0]=u=n[0],o[1]=f,o[2]=m,o[3]=_,o[4]=x,o[5]=E,o[6]=T,o[7]=A,o[8]=I,o[9]=L,o[10]=N,o[11]=V,o[12]=u*X+x*re+I*ge+n[12],o[13]=f*X+E*re+L*ge+n[13],o[14]=m*X+T*re+N*ge+n[14],o[15]=_*X+A*re+V*ge+n[15]),o}function ou(o,n,s){var u=s[0],f=s[1],m=s[2];return o[0]=n[0]*u,o[1]=n[1]*u,o[2]=n[2]*u,o[3]=n[3]*u,o[4]=n[4]*f,o[5]=n[5]*f,o[6]=n[6]*f,o[7]=n[7]*f,o[8]=n[8]*m,o[9]=n[9]*m,o[10]=n[10]*m,o[11]=n[11]*m,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o}function mx(o,n,s){var u=Math.sin(s),f=Math.cos(s),m=n[4],_=n[5],x=n[6],E=n[7],T=n[8],A=n[9],I=n[10],L=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=m*f+T*u,o[5]=_*f+A*u,o[6]=x*f+I*u,o[7]=E*f+L*u,o[8]=T*f-m*u,o[9]=A*f-_*u,o[10]=I*f-x*u,o[11]=L*f-E*u,o}function Uy(o,n,s){var u=Math.sin(s),f=Math.cos(s),m=n[0],_=n[1],x=n[2],E=n[3],T=n[8],A=n[9],I=n[10],L=n[11];return n!==o&&(o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=m*f-T*u,o[1]=_*f-A*u,o[2]=x*f-I*u,o[3]=E*f-L*u,o[8]=m*u+T*f,o[9]=_*u+A*f,o[10]=x*u+I*f,o[11]=E*u+L*f,o}function FT(o,n){return o[0]=n[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=n[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=n[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function BT(o,n,s){var u,f,m,_=s[0],x=s[1],E=s[2],T=Math.hypot(_,x,E);return T<$y?null:(_*=T=1/T,x*=T,E*=T,u=Math.sin(n),f=Math.cos(n),o[0]=_*_*(m=1-f)+f,o[1]=x*_*m+E*u,o[2]=E*_*m-x*u,o[3]=0,o[4]=_*x*m-E*u,o[5]=x*x*m+f,o[6]=E*x*m+_*u,o[7]=0,o[8]=_*E*m+x*u,o[9]=x*E*m-_*u,o[10]=E*E*m+f,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o)}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var d5=iu;function gx(){var o=new Mo(3);return Mo!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o}function NT(o){var n=new Mo(3);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n}function rp(o){return Math.hypot(o[0],o[1],o[2])}function Dd(o,n,s){var u=new Mo(3);return u[0]=o,u[1]=n,u[2]=s,u}function Is(o,n,s){return o[0]=n[0]+s[0],o[1]=n[1]+s[1],o[2]=n[2]+s[2],o}function yx(o,n,s){return o[0]=n[0]-s[0],o[1]=n[1]-s[1],o[2]=n[2]-s[2],o}function $T(o,n,s){return o[0]=n[0]*s[0],o[1]=n[1]*s[1],o[2]=n[2]*s[2],o}function ip(o,n,s){return o[0]=Math.min(n[0],s[0]),o[1]=Math.min(n[1],s[1]),o[2]=Math.min(n[2],s[2]),o}function op(o,n,s){return o[0]=Math.max(n[0],s[0]),o[1]=Math.max(n[1],s[1]),o[2]=Math.max(n[2],s[2]),o}function Vo(o,n,s){return o[0]=n[0]*s,o[1]=n[1]*s,o[2]=n[2]*s,o}function ap(o,n,s,u){return o[0]=n[0]+s[0]*u,o[1]=n[1]+s[1]*u,o[2]=n[2]+s[2]*u,o}function ao(o,n){var s=n[0],u=n[1],f=n[2],m=s*s+u*u+f*f;return m>0&&(m=1/Math.sqrt(m)),o[0]=n[0]*m,o[1]=n[1]*m,o[2]=n[2]*m,o}function aa(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]}function _x(o,n,s){var u=n[0],f=n[1],m=n[2],_=s[0],x=s[1],E=s[2];return o[0]=f*E-m*x,o[1]=m*_-u*E,o[2]=u*x-f*_,o}function ei(o,n,s){var u=n[0],f=n[1],m=n[2],_=s[3]*u+s[7]*f+s[11]*m+s[15];return o[0]=(s[0]*u+s[4]*f+s[8]*m+s[12])/(_=_||1),o[1]=(s[1]*u+s[5]*f+s[9]*m+s[13])/_,o[2]=(s[2]*u+s[6]*f+s[10]*m+s[14])/_,o}function UT(o,n,s){var u=s[0],f=s[1],m=s[2],_=n[0],x=n[1],E=n[2],T=f*E-m*x,A=m*_-u*E,I=u*x-f*_,L=f*I-m*A,N=m*T-u*I,V=u*A-f*T,X=2*s[3];return A*=X,I*=X,N*=2,V*=2,o[0]=_+(T*=X)+(L*=2),o[1]=x+A+N,o[2]=E+I+V,o}var sp,Ra=yx,h5=$T,f5=rp;function VT(o,n,s){return o[0]=n[0]*s,o[1]=n[1]*s,o[2]=n[2]*s,o[3]=n[3]*s,o}function jT(o,n){var s=n[0],u=n[1],f=n[2],m=n[3],_=s*s+u*u+f*f+m*m;return _>0&&(_=1/Math.sqrt(_)),o[0]=s*_,o[1]=u*_,o[2]=f*_,o[3]=m*_,o}function au(o,n,s){var u=n[0],f=n[1],m=n[2],_=n[3];return o[0]=s[0]*u+s[4]*f+s[8]*m+s[12]*_,o[1]=s[1]*u+s[5]*f+s[9]*m+s[13]*_,o[2]=s[2]*u+s[6]*f+s[10]*m+s[14]*_,o[3]=s[3]*u+s[7]*f+s[11]*m+s[15]*_,o}function GT(){var o=new Mo(4);return Mo!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o[3]=1,o}function WT(o){return o[0]=0,o[1]=0,o[2]=0,o[3]=1,o}function qT(o,n,s){s*=.5;var u=n[0],f=n[1],m=n[2],_=n[3],x=Math.sin(s),E=Math.cos(s);return o[0]=u*E+_*x,o[1]=f*E+m*x,o[2]=m*E-f*x,o[3]=_*E-u*x,o}function HT(o,n,s){s*=.5;var u=n[0],f=n[1],m=n[2],_=n[3],x=Math.sin(s),E=Math.cos(s);return o[0]=u*E-m*x,o[1]=f*E+_*x,o[2]=m*E+u*x,o[3]=_*E-f*x,o}gx(),sp=new Mo(4),Mo!=Float32Array&&(sp[0]=0,sp[1]=0,sp[2]=0,sp[3]=0);var p5=jT;gx(),Dd(1,0,0),Dd(0,1,0),GT(),GT(),zT();const m5=dn([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:ZT}=m5,XT=dn([{name:"a_pos_3",components:3,type:"Int16"}]);var lp=dn([{name:"a_pos",type:"Int16",components:2}]);class vx{constructor(n,s){this.pos=n,this.dir=s}intersectsPlane(n,s,u){const f=aa(s,this.dir);if(Math.abs(f)<1e-6)return!1;const m=((n[0]-this.pos[0])*s[0]+(n[1]-this.pos[1])*s[1]+(n[2]-this.pos[2])*s[2])/f;return u[0]=this.pos[0]+this.dir[0]*m,u[1]=this.pos[1]+this.dir[1]*m,u[2]=this.pos[2]+this.dir[2]*m,!0}closestPointOnSphere(n,s,u){if(function(N,V){var X=N[0],re=N[1],ge=N[2],Te=V[0],me=V[1],Se=V[2];return Math.abs(X-Te)<=$y*Math.max(1,Math.abs(X),Math.abs(Te))&&Math.abs(re-me)<=$y*Math.max(1,Math.abs(re),Math.abs(me))&&Math.abs(ge-Se)<=$y*Math.max(1,Math.abs(ge),Math.abs(Se))}(this.pos,n)||s===0)return u[0]=u[1]=u[2]=0,!1;const[f,m,_]=this.dir,x=this.pos[0]-n[0],E=this.pos[1]-n[1],T=this.pos[2]-n[2],A=f*f+m*m+_*_,I=2*(x*f+E*m+T*_),L=I*I-4*A*(x*x+E*E+T*T-s*s);if(L<0){const N=Math.max(-I/2,0),V=x+f*N,X=E+m*N,re=T+_*N,ge=Math.hypot(V,X,re);return u[0]=V*s/ge,u[1]=X*s/ge,u[2]=re*s/ge,!1}{const N=(-I-Math.sqrt(L))/(2*A);if(N<0){const V=Math.hypot(x,E,T);return u[0]=x*s/V,u[1]=E*s/V,u[2]=T*s/V,!1}return u[0]=x+f*N,u[1]=E+m*N,u[2]=T+_*N,!0}}}class xx{constructor(n,s,u,f,m){this.TL=n,this.TR=s,this.BR=u,this.BL=f,this.horizon=m}static fromInvProjectionMatrix(n,s,u){const f=[-1,1,1],m=[1,1,1],_=[1,-1,1],x=[-1,-1,1],E=ei(f,f,n),T=ei(m,m,n),A=ei(_,_,n),I=ei(x,x,n);return new xx(E,T,A,I,s/u)}}class bx{constructor(n,s){this.points=n,this.planes=s}static fromInvProjectionMatrix(n,s,u,f){const m=Math.pow(2,u),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(E=>{const T=au([],E,n),A=1/T[3]/s*m;return function(I,L,N){return I[0]=L[0]*N[0],I[1]=L[1]*N[1],I[2]=L[2]*N[2],I[3]=L[3]*N[3],I}(T,T,[A,A,f?1/T[3]:A,A])}),x=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(E=>{const T=ao([],_x([],Ra([],_[E[0]],_[E[1]]),Ra([],_[E[2]],_[E[1]]))),A=-aa(T,_[E[1]]);return T.concat(A)});return new bx(_,x)}}class so{static fromPoints(n){const s=[1/0,1/0,1/0],u=[-1/0,-1/0,-1/0];for(const f of n)ip(s,s,f),op(u,u,f);return new so(s,u)}static applyTransform(n,s){const u=n.getCorners();for(let f=0;f<u.length;++f)ei(u[f],u[f],s);return so.fromPoints(u)}constructor(n,s){this.min=n,this.max=s,this.center=Vo([],Is([],this.min,this.max),.5)}quadrant(n){const s=[n%2==0,n<2],u=NT(this.min),f=NT(this.max);for(let m=0;m<s.length;m++)u[m]=s[m]?this.min[m]:this.center[m],f[m]=s[m]?this.center[m]:this.max[m];return f[2]=this.max[2],new so(u,f)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}distanceZ(n){return Math.max(Math.min(this.max[2],n[2]),this.min[2])-n[2]}getCorners(){const n=this.min,s=this.max;return[[n[0],n[1],n[2]],[s[0],n[1],n[2]],[s[0],s[1],n[2]],[n[0],s[1],n[2]],[n[0],n[1],s[2]],[s[0],n[1],s[2]],[s[0],s[1],s[2]],[n[0],s[1],s[2]]]}intersects(n){const s=this.getCorners();let u=!0;for(let f=0;f<n.planes.length;f++){const m=n.planes[f];let _=0;for(let x=0;x<s.length;x++)_+=aa(m,s[x])+m[3]>=0;if(_===0)return 0;_!==s.length&&(u=!1)}if(u)return 2;for(let f=0;f<3;f++){let m=Number.MAX_VALUE,_=-Number.MAX_VALUE;for(let x=0;x<n.points.length;x++){const E=n.points[x][f]-this.min[f];m=Math.min(m,E),_=Math.max(_,E)}if(_<0||m>this.max[f]-this.min[f])return 0}return 1}}const Ja=kn/Math.PI/2,su=64,cp=[su,32,16],sa=-Ja,la=Ja,g5=[new so([sa,sa,sa],[la,la,la]),new so([sa,sa,sa],[0,0,la]),new so([0,sa,sa],[la,0,la]),new so([sa,0,sa],[0,la,la]),new so([0,0,sa],[la,la,la])];function Vy(o){return o*Ja/hp}function KT(o,n,s,u=!0){const f=Vo([],o._camera.position,o.worldSize),m=[n,s,1,1];au(m,m,o.pixelMatrixInverse),VT(m,m,1/m[3]);const _=ao([],Ra([],m,f)),x=o.globeMatrix,E=[x[12],x[13],x[14]],T=Ra([],E,f),A=rp(T),I=ao([],T),L=o.worldSize/(2*Math.PI),N=aa(I,_),V=Math.asin(L/A);if(V<Math.acos(N)){if(!u)return null;const Pt=[],st=[];Vo(Pt,_,A/N),ao(st,Ra(st,Pt,T)),ao(_,Is(_,T,Vo(_,st,Math.tan(V)*A)))}const X=[];new vx(f,_).closestPointOnSphere(E,L,X);const re=ao([],Ln(x,0)),ge=ao([],Ln(x,1)),Te=ao([],Ln(x,2)),me=aa(re,X),Se=aa(ge,X),Re=aa(Te,X),Ce=$(Math.asin(-Se/L));let it=$(Math.atan2(me,Re));it=o.center.lng+function(Pt,st){const vt=(st-Pt+180)%360-180;return vt<-180?vt+360:vt}(o.center.lng,it);const et=ts(it),gt=ze(ns(Ce),0,1);return new Bd(et,gt)}class y5{constructor(n,s,u){this.a=Ra([],n,u),this.b=Ra([],s,u),this.center=u;const f=ao([],this.a),m=ao([],this.b);this.angle=Math.acos(aa(f,m))}}function wx(o,n){if(o.angle===0)return null;let s;return s=o.a[n]===0?1/o.angle*.5*Math.PI:1/o.angle*Math.atan(o.b[n]/o.a[n]/Math.sin(o.angle)-1/Math.tan(o.angle)),s<0||s>1?null:function(u,f,m,_){const x=Math.sin(m);return u*(Math.sin((1-_)*m)/x)+f*(Math.sin(_*m)/x)}(o.a[n],o.b[n],o.angle,ze(s,0,1))+o.center[n]}function es(o){if(o.z<=1)return g5[o.z+2*o.y+o.x];const n=Sx(jy(o));return so.fromPoints(n)}function lu(o,n,s){return Vo(o,o,1-s),ap(o,o,n,s)}function YT(o,n){const s=Fd(n.zoom);if(s===0)return es(o);const u=jy(o),f=Sx(u),m=ts(u.getWest())*n.worldSize,_=ts(u.getEast())*n.worldSize,x=ns(u.getNorth())*n.worldSize,E=ns(u.getSouth())*n.worldSize,T=[m,x,0],A=[_,x,0],I=[m,E,0],L=[_,E,0],N=px([],n.globeMatrix);return ei(T,T,N),ei(A,A,N),ei(I,I,N),ei(L,L,N),f[0]=lu(f[0],I,s),f[1]=lu(f[1],L,s),f[2]=lu(f[2],A,s),f[3]=lu(f[3],T,s),so.fromPoints(f)}function QT(o,n,s){for(const u of o)ei(u,u,n),Vo(u,u,s)}function _5(o,n,s){const u=n/o.worldSize,f=o.globeMatrix;if(s.z<=1){const et=es(s).getCorners();return QT(et,f,u),so.fromPoints(et)}const m=jy(s),_=Sx(m);QT(_,f,u);const x=Number.MAX_VALUE,E=[-x,-x,-x],T=[x,x,x];if(m.contains(o.center)){for(const Pt of _)ip(T,T,Pt),op(E,E,Pt);E[2]=0;const et=o.point,gt=[et.x*u,et.y*u,0];return ip(T,T,gt),op(E,E,gt),new so(T,E)}const A=[f[12]*u,f[13]*u,f[14]*u],I=m.getCenter(),L=ze(o.center.lat,-Vi,Vi),N=ze(I.lat,-Vi,Vi),V=ts(o.center.lng),X=ns(L);let re=V-ts(I.lng);const ge=X-ns(N);re>.5?re-=1:re<-.5&&(re+=1);let Te=0;Math.abs(re)>Math.abs(ge)?Te=re>=0?1:3:(Te=ge>=0?0:2,ap(A,A,[f[4]*u,f[5]*u,f[6]*u],-Math.sin(fe(ge>=0?m.getSouth():m.getNorth()))*Ja));const me=_[Te],Se=_[(Te+1)%4],Re=new y5(me,Se,A),Ce=[wx(Re,0)||me[0],wx(Re,1)||me[1],wx(Re,2)||me[2]],it=Fd(o.zoom);if(it>0){const et=function({x:Pt,y:st,z:vt},bt,Mt,Dt,ct){const Vt=1/(1<<vt);let xn=Pt*Vt,Ht=xn+Vt,sn=st*Vt,jt=sn+Vt,Sn=0;const Un=(xn+Ht)/2-Dt;return Un>.5?Sn=-1:Un<-.5&&(Sn=1),xn=((xn+Sn)*bt-(Dt*=bt))*Mt+Dt,Ht=((Ht+Sn)*bt-Dt)*Mt+Dt,sn=(sn*bt-(ct*=bt))*Mt+ct,jt=(jt*bt-ct)*Mt+ct,[[xn,jt,0],[Ht,jt,0],[Ht,sn,0],[xn,sn,0]]}(s,n,o._pixelsPerMercatorPixel,V,X);for(let Pt=0;Pt<_.length;Pt++)lu(_[Pt],et[Pt],it);const gt=Is([],et[Te],et[(Te+1)%4]);Vo(gt,gt,.5),lu(Ce,gt,it)}for(const et of _)ip(T,T,et),op(E,E,et);return T[2]=Math.min(me[2],Se[2]),ip(T,T,Ce),op(E,E,Ce),new so(T,E)}function jy({x:o,y:n,z:s}){const u=1/(1<<s),f=new er(jo(o*u),Ui((n+1)*u)),m=new er(jo((o+1)*u),Ui(n*u));return new Dl(f,m)}function Sx(o){const n=fe(o.getNorth()),s=fe(o.getSouth()),u=Math.cos(n),f=Math.cos(s),m=Math.sin(n),_=Math.sin(s),x=o.getWest(),E=o.getEast();return[zd(f,_,x),zd(f,_,E),zd(u,m,E),zd(u,m,x)]}function zd(o,n,s,u=Ja){return s=fe(s),[o*Math.sin(s)*u,-n*u,o*Math.cos(s)*u]}function Od(o,n,s){return zd(Math.cos(fe(o)),Math.sin(fe(o)),n,s)}function up(o,n,s,u){const f=1<<s.z,m=(o/kn+s.x)/f;return Od(Ui((n/kn+s.y)/f),jo(m),u)}function Gy({min:o,max:n}){return 16383/Math.max(n[0]-o[0],n[1]-o[1],n[2]-o[2])}const JT=new Float64Array(16);function dp(o){const n=Gy(o),s=FT(JT,[n,n,n]);return np(s,s,((u=[])[0]=-(f=o.min)[0],u[1]=-f[1],u[2]=-f[2],u));var u,f}function Ex(o){const n=(u=o.min,(s=JT)[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=u[0],s[13]=u[1],s[14]=u[2],s[15]=1,s);var s,u;const f=1/Gy(o);return ou(n,n,[f,f,f])}function eC(o,n,s,u,f){const m=function(E){const T=kn/(2*Math.PI);return E/(2*Math.PI)/T}(s),_=[o,n,-s/(2*Math.PI)],x=ka(new Float64Array(16));return np(x,x,_),ou(x,x,[m,m,m]),mx(x,x,fe(-f)),Uy(x,x,fe(-u)),x}function Fd(o){return nt(5,6,o)}function tC(o,n){const s=Od(n.lat,n.lng),u=function(V){const X=Od(V._center.lat,V._center.lng);let re=_x([],Dd(0,1,0),X);const ge=BT([],-V.angle,X);re=ei(re,re,ge),BT(ge,-V._pitch,re);const Te=ao([],X);return Vo(Te,Te,Vy(V.cameraToCenterDistance/V.pixelsPerMeter)),ei(Te,Te,ge),Is([],X,Te)}(o);return _=(f=yx([],u,s))[0],x=f[1],E=f[2],T=(m=s)[0],A=m[1],I=m[2],N=(L=Math.sqrt(_*_+x*x+E*E)*Math.sqrt(T*T+A*A+I*I))&&aa(f,m)/L,Math.acos(Math.min(Math.max(N,-1),1));var f,m,_,x,E,T,A,I,L,N}function Tx(o,n){return tC(o,n)>Math.PI/2*1.01}const nC=fe(85),v5=Math.cos(nC),x5=Math.sin(nC),hp=63710088e-1,rC=2*Math.PI*hp;class er{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new er(_t(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,u=this.lat*s,f=n.lat*s,m=Math.sin(u)*Math.sin(f)+Math.cos(u)*Math.cos(f)*Math.cos((n.lng-this.lng)*s);return hp*Math.acos(Math.min(m,1))}toBounds(n=0){const s=360*n/40075017,u=s/Math.cos(Math.PI/180*this.lat);return new Dl(new er(this.lng-u,this.lat-s),new er(this.lng+u,this.lat+s))}toEcef(n){const s=Vy(n);return Od(this.lat,this.lng,Ja+s)}static convert(n){if(n instanceof er)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new er(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new er(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}function Cx(o){return rC*Math.cos(o*Math.PI/180)}function ts(o){return(180+o)/360}function ns(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Ia(o,n){return o/Cx(n)}function jo(o){return 360*o-180}function Ui(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}function iC(o,n){return o*Cx(Ui(n))}const Vi=85.051129;function oC(o){return 1/Math.cos(o*Math.PI/180)}class Bd{constructor(n,s,u=0){this.x=+n,this.y=+s,this.z=+u}static fromLngLat(n,s=0){const u=er.convert(n);return new Bd(ts(u.lng),ns(u.lat),Ia(s,u.lat))}toLngLat(){return new er(jo(this.x),Ui(this.y))}toAltitude(){return iC(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/rC*oC(Ui(this.y))}}function Mx(o,n,s,u,f,m,_,x,E){const T=(n+u)/2,A=(s+f)/2,I=new Y(T,A);x(I),function(L,N,V,X,re,ge){const Te=V-re,me=X-ge;return Math.abs((X-N)*Te-(V-L)*me)/Math.hypot(Te,me)}(I.x,I.y,m.x,m.y,_.x,_.y)>=E?(Mx(o,n,s,T,A,m,I,x,E),Mx(o,T,A,u,f,I,_,x,E)):o.push(_)}function aC(o,n,s){let u=o[0],f=u.x,m=u.y;n(u);const _=[u];for(let x=1;x<o.length;x++){const E=o[x],{x:T,y:A}=E;n(E),Mx(_,f,m,T,A,u,E,n,s),f=T,m=A,u=E}return _}function Ax(o,n,s,u){if(u(n,s)){const f=n.add(s)._mult(.5);Ax(o,n,f,u),Ax(o,f,s,u)}else o.push(s)}function b5(o,n){let s=o[0];const u=[s];for(let f=1;f<o.length;f++){const m=o[f];Ax(u,s,m,n),s=m}return u}const kx=Math.pow(2,14)-1,sC=-kx-1;function w5(o,n){const s=Math.round(o.x*n),u=Math.round(o.y*n);return o.x=ze(s,sC,kx),o.y=ze(u,sC,kx),(s<o.x||s>o.x+1||u<o.y||u>o.y+1)&&Ct("Geometry exceeds allowed extent, reduce your vector tile buffer size"),o}function Ps(o,n,s){const u=o.loadGeometry(),f=o.extent,m=kn/f;if(n&&s&&s.projection.isReprojectedInTileSpace){const _=1<<n.z,{scale:x,x:E,y:T,projection:A}=s,I=L=>{const N=jo((n.x+L.x/f)/_),V=Ui((n.y+L.y/f)/_),X=A.project(N,V);L.x=(X.x*x-E)*f,L.y=(X.y*x-T)*f};for(let L=0;L<u.length;L++)if(o.type!==1)u[L]=aC(u[L],I,1);else{const N=[];for(const V of u[L])V.x<0||V.x>=f||V.y<0||V.y>=f||(I(V),N.push(V));u[L]=N}}for(const _ of u)for(const x of _)w5(x,m);return u}function cu(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?Ps(o):[]}}function Wy(o,n,s,u,f){o.emplaceBack(2*n+(u+1)/2,2*s+(f+1)/2)}function qy(o,n,s){o.emplaceBack(n.x,n.y,n.z,s[0]*16384,s[1]*16384,s[2]*16384)}class Rx{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.projection=n.projection,this.layoutVertexArray=new yn,this.indexArray=new $i,this.segments=new li,this.programConfigurations=new ru(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,u,f){const m=this.layers[0],_=[];let x=null;m.type==="circle"&&(x=m.layout.get("circle-sort-key"));for(const{feature:T,id:A,index:I,sourceLayerIndex:L}of n){const N=this.layers[0]._featureFilter.needGeometry,V=cu(T,N);if(!this.layers[0]._featureFilter.filter(new He(this.zoom),V,u))continue;const X=x?x.evaluate(V,{},u):void 0,re={id:A,properties:T.properties,type:T.type,sourceLayerIndex:L,index:I,geometry:N?V.geometry:Ps(T,u,f),patterns:{},sortKey:X};_.push(re)}x&&_.sort((T,A)=>T.sortKey-A.sortKey);let E=null;f.projection.name==="globe"&&(this.globeExtVertexArray=new Uo,E=f.projection);for(const T of _){const{geometry:A,index:I,sourceLayerIndex:L}=T,N=n[I].feature;this.addFeature(T,A,I,s.availableImages,u,E),s.featureIndex.insert(N,A,I,L,this.index)}}update(n,s,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,u,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,c5.members),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,u5.members))),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(n,s,u,f,m,_){for(const x of s)for(const E of x){const T=E.x,A=E.y;if(T<0||T>=kn||A<0||A>=kn)continue;if(_){const N=_.projectTilePoint(T,A,m),V=_.upVector(m,T,A),X=this.globeExtVertexArray;qy(X,N,V),qy(X,N,V),qy(X,N,V),qy(X,N,V)}const I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),L=I.vertexLength;Wy(this.layoutVertexArray,T,A,-1,-1),Wy(this.layoutVertexArray,T,A,1,-1),Wy(this.layoutVertexArray,T,A,1,1),Wy(this.layoutVertexArray,T,A,-1,1),this.indexArray.emplaceBack(L,L+1,L+2),this.indexArray.emplaceBack(L,L+2,L+3),I.vertexLength+=4,I.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,{},f,m)}}function lC(o,n){for(let s=0;s<o.length;s++)if(uu(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(uu(o,n[s]))return!0;return!!Ix(o,n)}function S5(o,n,s){return!!uu(o,n)||!!Px(n,o,s)}function cC(o,n){if(o.length===1)return dC(n,o[0]);for(let s=0;s<n.length;s++){const u=n[s];for(let f=0;f<u.length;f++)if(uu(o,u[f]))return!0}for(let s=0;s<o.length;s++)if(dC(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(Ix(o,n[s]))return!0;return!1}function E5(o,n,s){if(o.length>1){if(Ix(o,n))return!0;for(let u=0;u<n.length;u++)if(Px(n[u],o,s))return!0}for(let u=0;u<o.length;u++)if(Px(o[u],n,s))return!0;return!1}function Ix(o,n){if(o.length===0||n.length===0)return!1;for(let s=0;s<o.length-1;s++){const u=o[s],f=o[s+1];for(let m=0;m<n.length-1;m++)if(T5(u,f,n[m],n[m+1]))return!0}return!1}function T5(o,n,s,u){return Kt(o,s,u)!==Kt(n,s,u)&&Kt(o,n,s)!==Kt(o,n,u)}function Px(o,n,s){const u=s*s;if(n.length===1)return o.distSqr(n[0])<u;for(let f=1;f<n.length;f++)if(uC(o,n[f-1],n[f])<u)return!0;return!1}function uC(o,n,s){const u=n.distSqr(s);if(u===0)return o.distSqr(n);const f=((o.x-n.x)*(s.x-n.x)+(o.y-n.y)*(s.y-n.y))/u;return o.distSqr(f<0?n:f>1?s:s.sub(n)._mult(f)._add(n))}function dC(o,n){let s,u,f,m=!1;for(let _=0;_<o.length;_++){s=o[_];for(let x=0,E=s.length-1;x<s.length;E=x++)u=s[x],f=s[E],u.y>n.y!=f.y>n.y&&n.x<(f.x-u.x)*(n.y-u.y)/(f.y-u.y)+u.x&&(m=!m)}return m}function uu(o,n){let s=!1;for(let u=0,f=o.length-1;u<o.length;f=u++){const m=o[u],_=o[f];m.y>n.y!=_.y>n.y&&n.x<(_.x-m.x)*(n.y-m.y)/(_.y-m.y)+m.x&&(s=!s)}return s}function hC(o,n,s,u,f){for(const _ of o)if(n<=_.x&&s<=_.y&&u>=_.x&&f>=_.y)return!0;const m=[new Y(n,s),new Y(n,f),new Y(u,f),new Y(u,s)];if(o.length>2){for(const _ of m)if(uu(o,_))return!0}for(let _=0;_<o.length-1;_++)if(C5(o[_],o[_+1],m))return!0;return!1}function C5(o,n,s){const u=s[0],f=s[2];if(o.x<u.x&&n.x<u.x||o.x>f.x&&n.x>f.x||o.y<u.y&&n.y<u.y||o.y>f.y&&n.y>f.y)return!1;const m=Kt(o,n,s[0]);return m!==Kt(o,n,s[1])||m!==Kt(o,n,s[2])||m!==Kt(o,n,s[3])}function Nd(o,n,s){const u=n.paint.get(o).value;return u.kind==="constant"?u.value:s.programConfigurations.get(n.id).getMaxValue(o)}function Hy(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function fC(o,n,s,u,f){if(!n[0]&&!n[1])return o;const m=Y.convert(n)._mult(f);s==="viewport"&&m._rotate(-u);const _=[];for(let x=0;x<o.length;x++)_.push(o[x].sub(m));return _}function pC(o,n,s,u){const f=Y.convert(o)._mult(u);return n==="viewport"&&f._rotate(-s),f}nn(Rx,"CircleBucket",{omit:["layers"]});const M5=new kt({"circle-sort-key":new at(pt.layout_circle["circle-sort-key"])});var A5={paint:new kt({"circle-radius":new at(pt.paint_circle["circle-radius"]),"circle-color":new at(pt.paint_circle["circle-color"]),"circle-blur":new at(pt.paint_circle["circle-blur"]),"circle-opacity":new at(pt.paint_circle["circle-opacity"]),"circle-translate":new qe(pt.paint_circle["circle-translate"]),"circle-translate-anchor":new qe(pt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new qe(pt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new qe(pt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new at(pt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new at(pt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new at(pt.paint_circle["circle-stroke-opacity"])}),layout:M5};function mC(o,n,s,u,f,m,_,x,E){if(m&&o.queryGeometry.isAboveHorizon)return!1;m&&(E*=o.pixelToTileUnitsFactor);const T=o.tileID.canonical,A=s.projection.upVectorScale(T,s.center.lat,s.worldSize).metersToTile;for(const I of n)for(const L of I){const N=L.add(x),V=f&&s.elevation?s.elevation.exaggeration()*f.getElevationAt(N.x,N.y,!0):0,X=s.projection.projectTilePoint(N.x,N.y,T);if(V>0){const me=s.projection.upVector(T,N.x,N.y);X.x+=me[0]*A*V,X.y+=me[1]*A*V,X.z+=me[2]*A*V}const re=m?N:k5(X.x,X.y,X.z,u),ge=m?o.tilespaceRays.map(me=>I5(me,V)):o.queryGeometry.screenGeometry,Te=au([],[X.x,X.y,X.z,1],u);if(!_&&m?E*=Te[3]/s.cameraToCenterDistance:_&&!m&&(E*=s.cameraToCenterDistance/Te[3]),m){const me=Ui((L.y/kn+T.y)/(1<<T.z));E/=s.projection.pixelsPerMeter(me,1)/Ia(1,me)}if(S5(ge,re,E))return!0}return!1}function k5(o,n,s,u){const f=au([],[o,n,s,1],u);return new Y(f[0]/f[3],f[1]/f[3])}const gC=Dd(0,0,0),R5=Dd(0,0,1);function I5(o,n){const s=gx();return gC[2]=n,o.intersectsPlane(gC,R5,s),new Y(s[0],s[1])}class yC extends Rx{}function _C(o,{width:n,height:s},u,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==n*s*u)throw new RangeError("mismatched image size")}else f=new Uint8Array(n*s*u);return o.width=n,o.height=s,o.data=f,o}function vC(o,n,s){const{width:u,height:f}=n;u===o.width&&f===o.height||(Lx(o,n,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,u),height:Math.min(o.height,f)},s),o.width=u,o.height=f,o.data=n.data)}function Lx(o,n,s,u,f,m){if(f.width===0||f.height===0)return n;if(f.width>o.width||f.height>o.height||s.x>o.width-f.width||s.y>o.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>n.width||f.height>n.height||u.x>n.width-f.width||u.y>n.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const _=o.data,x=n.data;for(let E=0;E<f.height;E++){const T=((s.y+E)*o.width+s.x)*m,A=((u.y+E)*n.width+u.x)*m;for(let I=0;I<f.width*m;I++)x[A+I]=_[T+I]}return n}nn(yC,"HeatmapBucket",{omit:["layers"]});class Ls{constructor(n,s){_C(this,n,1,s)}resize(n){vC(this,new Ls(n),1)}clone(){return new Ls({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,u,f,m){Lx(n,s,u,f,m,1)}}class Ao{constructor(n,s){_C(this,n,4,s)}resize(n){vC(this,new Ao(n),4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Ao({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,u,f,m){Lx(n,s,u,f,m,4)}}nn(Ls,"AlphaImage"),nn(Ao,"RGBAImage");var P5={paint:new kt({"heatmap-radius":new at(pt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new at(pt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new qe(pt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new wt(pt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new qe(pt.paint_heatmap["heatmap-opacity"])})};function Dx(o){const n={},s=o.resolution||256,u=o.clips?o.clips.length:1,f=o.image||new Ao({width:s,height:u}),m=(_,x,E)=>{n[o.evaluationKey]=E;const T=o.expression.evaluate(n);f.data[_+x+0]=Math.floor(255*T.r/T.a),f.data[_+x+1]=Math.floor(255*T.g/T.a),f.data[_+x+2]=Math.floor(255*T.b/T.a),f.data[_+x+3]=Math.floor(255*T.a)};if(o.clips)for(let _=0,x=0;_<u;++_,x+=4*s)for(let E=0,T=0;E<s;E++,T+=4){const A=E/(s-1),{start:I,end:L}=o.clips[_];m(x,T,I*(1-A)+L*A)}else for(let _=0,x=0;_<s;_++,x+=4)m(0,x,_/(s-1));return f}var L5={paint:new kt({"hillshade-illumination-direction":new qe(pt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new qe(pt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new qe(pt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new qe(pt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new qe(pt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new qe(pt.paint_hillshade["hillshade-accent-color"])})};const D5=dn([{name:"a_pos",components:2,type:"Int16"}],4),{members:z5}=D5;var $d={};function Zy(o,n,s){s=s||2;var u,f,m,_,x,E,T,A=n&&n.length,I=A?n[0]*s:o.length,L=xC(o,0,I,s,!0),N=[];if(!L||L.next===L.prev)return N;if(A&&(L=function(X,re,ge,Te){var me,Se,Re,Ce=[];for(me=0,Se=re.length;me<Se;me++)(Re=xC(X,re[me]*Te,me<Se-1?re[me+1]*Te:X.length,Te,!1))===Re.next&&(Re.steiner=!0),Ce.push(j5(Re));for(Ce.sort($5),me=0;me<Ce.length;me++)ge=U5(Ce[me],ge);return ge}(o,n,L,s)),o.length>80*s){u=m=o[0],f=_=o[1];for(var V=s;V<I;V+=s)(x=o[V])<u&&(u=x),(E=o[V+1])<f&&(f=E),x>m&&(m=x),E>_&&(_=E);T=(T=Math.max(m-u,_-f))!==0?32767/T:0}return fp(L,N,s,u,f,T,0),N}function xC(o,n,s,u,f){var m,_;if(f===Fx(o,n,s,u)>0)for(m=n;m<s;m+=u)_=SC(m,o[m],o[m+1],_);else for(m=s-u;m>=n;m-=u)_=SC(m,o[m],o[m+1],_);return _&&Xy(_,_.next)&&(mp(_),_=_.next),_}function du(o,n){if(!o)return o;n||(n=o);var s,u=o;do if(s=!1,u.steiner||!Xy(u,u.next)&&ci(u.prev,u,u.next)!==0)u=u.next;else{if(mp(u),(u=n=u.prev)===u.next)break;s=!0}while(s||u!==n);return n}function fp(o,n,s,u,f,m,_){if(o){!_&&m&&function(A,I,L,N){var V=A;do V.z===0&&(V.z=zx(V.x,V.y,I,L,N)),V.prevZ=V.prev,V.nextZ=V.next,V=V.next;while(V!==A);V.prevZ.nextZ=null,V.prevZ=null,function(X){var re,ge,Te,me,Se,Re,Ce,it,et=1;do{for(ge=X,X=null,Se=null,Re=0;ge;){for(Re++,Te=ge,Ce=0,re=0;re<et&&(Ce++,Te=Te.nextZ);re++);for(it=et;Ce>0||it>0&&Te;)Ce!==0&&(it===0||!Te||ge.z<=Te.z)?(me=ge,ge=ge.nextZ,Ce--):(me=Te,Te=Te.nextZ,it--),Se?Se.nextZ=me:X=me,me.prevZ=Se,Se=me;ge=Te}Se.nextZ=null,et*=2}while(Re>1)}(V)}(o,u,f,m);for(var x,E,T=o;o.prev!==o.next;)if(x=o.prev,E=o.next,m?F5(o,u,f,m):O5(o))n.push(x.i/s|0),n.push(o.i/s|0),n.push(E.i/s|0),mp(o),o=E.next,T=E.next;else if((o=E)===T){_?_===1?fp(o=B5(du(o),n,s),n,s,u,f,m,2):_===2&&N5(o,n,s,u,f,m):fp(du(o),n,s,u,f,m,1);break}}}function O5(o){var n=o.prev,s=o,u=o.next;if(ci(n,s,u)>=0)return!1;for(var f=n.x,m=s.x,_=u.x,x=n.y,E=s.y,T=u.y,A=f<m?f<_?f:_:m<_?m:_,I=x<E?x<T?x:T:E<T?E:T,L=f>m?f>_?f:_:m>_?m:_,N=x>E?x>T?x:T:E>T?E:T,V=u.next;V!==n;){if(V.x>=A&&V.x<=L&&V.y>=I&&V.y<=N&&Ud(f,x,m,E,_,T,V.x,V.y)&&ci(V.prev,V,V.next)>=0)return!1;V=V.next}return!0}function F5(o,n,s,u){var f=o.prev,m=o,_=o.next;if(ci(f,m,_)>=0)return!1;for(var x=f.x,E=m.x,T=_.x,A=f.y,I=m.y,L=_.y,N=x<E?x<T?x:T:E<T?E:T,V=A<I?A<L?A:L:I<L?I:L,X=x>E?x>T?x:T:E>T?E:T,re=A>I?A>L?A:L:I>L?I:L,ge=zx(N,V,n,s,u),Te=zx(X,re,n,s,u),me=o.prevZ,Se=o.nextZ;me&&me.z>=ge&&Se&&Se.z<=Te;){if(me.x>=N&&me.x<=X&&me.y>=V&&me.y<=re&&me!==f&&me!==_&&Ud(x,A,E,I,T,L,me.x,me.y)&&ci(me.prev,me,me.next)>=0||(me=me.prevZ,Se.x>=N&&Se.x<=X&&Se.y>=V&&Se.y<=re&&Se!==f&&Se!==_&&Ud(x,A,E,I,T,L,Se.x,Se.y)&&ci(Se.prev,Se,Se.next)>=0))return!1;Se=Se.nextZ}for(;me&&me.z>=ge;){if(me.x>=N&&me.x<=X&&me.y>=V&&me.y<=re&&me!==f&&me!==_&&Ud(x,A,E,I,T,L,me.x,me.y)&&ci(me.prev,me,me.next)>=0)return!1;me=me.prevZ}for(;Se&&Se.z<=Te;){if(Se.x>=N&&Se.x<=X&&Se.y>=V&&Se.y<=re&&Se!==f&&Se!==_&&Ud(x,A,E,I,T,L,Se.x,Se.y)&&ci(Se.prev,Se,Se.next)>=0)return!1;Se=Se.nextZ}return!0}function B5(o,n,s){var u=o;do{var f=u.prev,m=u.next.next;!Xy(f,m)&&bC(f,u,u.next,m)&&pp(f,m)&&pp(m,f)&&(n.push(f.i/s|0),n.push(u.i/s|0),n.push(m.i/s|0),mp(u),mp(u.next),u=o=m),u=u.next}while(u!==o);return du(u)}function N5(o,n,s,u,f,m){var _=o;do{for(var x=_.next.next;x!==_.prev;){if(_.i!==x.i&&G5(_,x)){var E=wC(_,x);return _=du(_,_.next),E=du(E,E.next),fp(_,n,s,u,f,m,0),void fp(E,n,s,u,f,m,0)}x=x.next}_=_.next}while(_!==o)}function $5(o,n){return o.x-n.x}function U5(o,n){var s=function(f,m){var _,x=m,E=f.x,T=f.y,A=-1/0;do{if(T<=x.y&&T>=x.next.y&&x.next.y!==x.y){var I=x.x+(T-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(I<=E&&I>A&&(A=I,_=x.x<x.next.x?x:x.next,I===E))return _}x=x.next}while(x!==m);if(!_)return null;var L,N=_,V=_.x,X=_.y,re=1/0;x=_;do E>=x.x&&x.x>=V&&E!==x.x&&Ud(T<X?E:A,T,V,X,T<X?A:E,T,x.x,x.y)&&(L=Math.abs(T-x.y)/(E-x.x),pp(x,f)&&(L<re||L===re&&(x.x>_.x||x.x===_.x&&V5(_,x)))&&(_=x,re=L)),x=x.next;while(x!==N);return _}(o,n);if(!s)return n;var u=wC(s,o);return du(u,u.next),du(s,s.next)}function V5(o,n){return ci(o.prev,o,n.prev)<0&&ci(n.next,o,o.next)<0}function zx(o,n,s,u,f){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-s)*f|0)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-u)*f|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function j5(o){var n=o,s=o;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==o);return s}function Ud(o,n,s,u,f,m,_,x){return(f-_)*(n-x)>=(o-_)*(m-x)&&(o-_)*(u-x)>=(s-_)*(n-x)&&(s-_)*(m-x)>=(f-_)*(u-x)}function G5(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(s,u){var f=s;do{if(f.i!==s.i&&f.next.i!==s.i&&f.i!==u.i&&f.next.i!==u.i&&bC(f,f.next,s,u))return!0;f=f.next}while(f!==s);return!1}(o,n)&&(pp(o,n)&&pp(n,o)&&function(s,u){var f=s,m=!1,_=(s.x+u.x)/2,x=(s.y+u.y)/2;do f.y>x!=f.next.y>x&&f.next.y!==f.y&&_<(f.next.x-f.x)*(x-f.y)/(f.next.y-f.y)+f.x&&(m=!m),f=f.next;while(f!==s);return m}(o,n)&&(ci(o.prev,o,n.prev)||ci(o,n.prev,n))||Xy(o,n)&&ci(o.prev,o,o.next)>0&&ci(n.prev,n,n.next)>0)}function ci(o,n,s){return(n.y-o.y)*(s.x-n.x)-(n.x-o.x)*(s.y-n.y)}function Xy(o,n){return o.x===n.x&&o.y===n.y}function bC(o,n,s,u){var f=Yy(ci(o,n,s)),m=Yy(ci(o,n,u)),_=Yy(ci(s,u,o)),x=Yy(ci(s,u,n));return f!==m&&_!==x||!(f!==0||!Ky(o,s,n))||!(m!==0||!Ky(o,u,n))||!(_!==0||!Ky(s,o,u))||!(x!==0||!Ky(s,n,u))}function Ky(o,n,s){return n.x<=Math.max(o.x,s.x)&&n.x>=Math.min(o.x,s.x)&&n.y<=Math.max(o.y,s.y)&&n.y>=Math.min(o.y,s.y)}function Yy(o){return o>0?1:o<0?-1:0}function pp(o,n){return ci(o.prev,o,o.next)<0?ci(o,n,o.next)>=0&&ci(o,o.prev,n)>=0:ci(o,n,o.prev)<0||ci(o,o.next,n)<0}function wC(o,n){var s=new Ox(o.i,o.x,o.y),u=new Ox(n.i,n.x,n.y),f=o.next,m=n.prev;return o.next=n,n.prev=o,s.next=f,f.prev=s,u.next=s,s.prev=u,m.next=u,u.prev=m,u}function SC(o,n,s,u){var f=new Ox(o,n,s);return u?(f.next=u.next,f.prev=u,u.next.prev=f,u.next=f):(f.prev=f,f.next=f),f}function mp(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function Ox(o,n,s){this.i=o,this.x=n,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Fx(o,n,s,u){for(var f=0,m=n,_=s-u;m<s;m+=u)f+=(o[_]-o[m])*(o[m+1]+o[_+1]),_=m;return f}function W5(o,n,s,u,f){EC(o,n,s||0,u||o.length-1,f||q5)}function EC(o,n,s,u,f){for(;u>s;){if(u-s>600){var m=u-s+1,_=n-s+1,x=Math.log(m),E=.5*Math.exp(2*x/3),T=.5*Math.sqrt(x*E*(m-E)/m)*(_-m/2<0?-1:1);EC(o,n,Math.max(s,Math.floor(n-_*E/m+T)),Math.min(u,Math.floor(n+(m-_)*E/m+T)),f)}var A=o[n],I=s,L=u;for(gp(o,s,n),f(o[u],A)>0&&gp(o,s,u);I<L;){for(gp(o,I,L),I++,L--;f(o[I],A)<0;)I++;for(;f(o[L],A)>0;)L--}f(o[s],A)===0?gp(o,s,L):gp(o,++L,u),L<=n&&(s=L+1),n<=L&&(u=L-1)}}function gp(o,n,s){var u=o[n];o[n]=o[s],o[s]=u}function q5(o,n){return o<n?-1:o>n?1:0}function Bx(o,n){const s=o.length;if(s<=1)return[o];const u=[];let f,m;for(let _=0;_<s;_++){const x=Nt(o[_]);x!==0&&(o[_].area=Math.abs(x),m===void 0&&(m=x<0),m===x<0?(f&&u.push(f),f=[o[_]]):f.push(o[_]))}if(f&&u.push(f),n>1)for(let _=0;_<u.length;_++)u[_].length<=n||(W5(u[_],n,1,u[_].length-1,H5),u[_]=u[_].slice(0,n));return u}function H5(o,n){return n.area-o.area}function Nx(o,n,s){const u=s.patternDependencies;let f=!1;for(const m of n){const _=m.paint.get(`${o}-pattern`);_.isConstant()||(f=!0);const x=_.constantOr(null);x&&(f=!0,u[x]=!0)}return f}function $x(o,n,s,u,f){const m=f.patternDependencies;for(const _ of n){const x=_.paint.get(`${o}-pattern`).value;if(x.kind!=="constant"){let E=x.evaluate({zoom:u},s,{},f.availableImages);E=E&&E.name?E.name:E,m[E]=!0,s.patterns[_.id]=E}}return s}({get exports(){return $d},set exports(o){$d=o}}).exports=Zy,$d.default=Zy,Zy.deviation=function(o,n,s,u){var f=n&&n.length,m=Math.abs(Fx(o,0,f?n[0]*s:o.length,s));if(f)for(var _=0,x=n.length;_<x;_++)m-=Math.abs(Fx(o,n[_]*s,_<x-1?n[_+1]*s:o.length,s));var E=0;for(_=0;_<u.length;_+=3){var T=u[_]*s,A=u[_+1]*s,I=u[_+2]*s;E+=Math.abs((o[T]-o[I])*(o[A+1]-o[T+1])-(o[T]-o[A])*(o[I+1]-o[T+1]))}return m===0&&E===0?0:Math.abs((E-m)/m)},Zy.flatten=function(o){for(var n=o[0][0].length,s={vertices:[],holes:[],dimensions:n},u=0,f=0;f<o.length;f++){for(var m=0;m<o[f].length;m++)for(var _=0;_<n;_++)s.vertices.push(o[f][m][_]);f>0&&s.holes.push(u+=o[f-1].length)}return s};class Qy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new yn,this.indexArray=new $i,this.indexArray2=new Ya,this.programConfigurations=new ru(n.layers,n.zoom),this.segments=new li,this.segments2=new li,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.projection=n.projection}populate(n,s,u,f){this.hasPattern=Nx("fill",this.layers,s);const m=this.layers[0].layout.get("fill-sort-key"),_=[];for(const{feature:x,id:E,index:T,sourceLayerIndex:A}of n){const I=this.layers[0]._featureFilter.needGeometry,L=cu(x,I);if(!this.layers[0]._featureFilter.filter(new He(this.zoom),L,u))continue;const N=m?m.evaluate(L,{},u,s.availableImages):void 0,V={id:E,properties:x.properties,type:x.type,sourceLayerIndex:A,index:T,geometry:I?L.geometry:Ps(x,u,f),patterns:{},sortKey:N};_.push(V)}m&&_.sort((x,E)=>x.sortKey-E.sortKey);for(const x of _){const{geometry:E,index:T,sourceLayerIndex:A}=x;if(this.hasPattern){const I=$x("fill",this.layers,x,this.zoom,s);this.patternFeatures.push(I)}else this.addFeature(x,E,T,u,{},s.availableImages);s.featureIndex.insert(n[T].feature,E,T,A,this.index)}}update(n,s,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,u,f)}addFeatures(n,s,u,f,m){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,s,u,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,z5),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,u,f,m,_=[]){for(const x of Bx(s,500)){let E=0;for(const V of x)E+=V.length;const T=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray),A=T.vertexLength,I=[],L=[];for(const V of x){if(V.length===0)continue;V!==x[0]&&L.push(I.length/2);const X=this.segments2.prepareSegment(V.length,this.layoutVertexArray,this.indexArray2),re=X.vertexLength;this.layoutVertexArray.emplaceBack(V[0].x,V[0].y),this.indexArray2.emplaceBack(re+V.length-1,re),I.push(V[0].x),I.push(V[0].y);for(let ge=1;ge<V.length;ge++)this.layoutVertexArray.emplaceBack(V[ge].x,V[ge].y),this.indexArray2.emplaceBack(re+ge-1,re+ge),I.push(V[ge].x),I.push(V[ge].y);X.vertexLength+=V.length,X.primitiveLength+=V.length}const N=$d(I,L);for(let V=0;V<N.length;V+=3)this.indexArray.emplaceBack(A+N[V],A+N[V+1],A+N[V+2]);T.vertexLength+=E,T.primitiveLength+=N.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,m,_,f)}}nn(Qy,"FillBucket",{omit:["layers","patternFeatures"]});const Z5=new kt({"fill-sort-key":new at(pt.layout_fill["fill-sort-key"])});var X5={paint:new kt({"fill-antialias":new qe(pt.paint_fill["fill-antialias"]),"fill-opacity":new at(pt.paint_fill["fill-opacity"]),"fill-color":new at(pt.paint_fill["fill-color"]),"fill-outline-color":new at(pt.paint_fill["fill-outline-color"]),"fill-translate":new qe(pt.paint_fill["fill-translate"]),"fill-translate-anchor":new qe(pt.paint_fill["fill-translate-anchor"]),"fill-pattern":new at(pt.paint_fill["fill-pattern"])}),layout:Z5};const K5=dn([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Y5=dn([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Q5=dn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:J5}=K5;var Jy={},eF=Y,TC=Vd;function Vd(o,n,s,u,f){this.properties={},this.extent=s,this.type=0,this._pbf=o,this._geometry=-1,this._keys=u,this._values=f,o.readFields(tF,this,n)}function tF(o,n,s){o==1?n.id=s.readVarint():o==2?function(u,f){for(var m=u.readVarint()+u.pos;u.pos<m;){var _=f._keys[u.readVarint()],x=f._values[u.readVarint()];f.properties[_]=x}}(s,n):o==3?n.type=s.readVarint():o==4&&(n._geometry=s.pos)}function nF(o){for(var n,s,u=0,f=0,m=o.length,_=m-1;f<m;_=f++)u+=((s=o[_]).x-(n=o[f]).x)*(n.y+s.y);return u}Vd.types=["Unknown","Point","LineString","Polygon"],Vd.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,s=o.readVarint()+o.pos,u=1,f=0,m=0,_=0,x=[];o.pos<s;){if(f<=0){var E=o.readVarint();u=7&E,f=E>>3}if(f--,u===1||u===2)m+=o.readSVarint(),_+=o.readSVarint(),u===1&&(n&&x.push(n),n=[]),n.push(new eF(m,_));else{if(u!==7)throw new Error("unknown command "+u);n&&n.push(n[0].clone())}}return n&&x.push(n),x},Vd.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,s=1,u=0,f=0,m=0,_=1/0,x=-1/0,E=1/0,T=-1/0;o.pos<n;){if(u<=0){var A=o.readVarint();s=7&A,u=A>>3}if(u--,s===1||s===2)(f+=o.readSVarint())<_&&(_=f),f>x&&(x=f),(m+=o.readSVarint())<E&&(E=m),m>T&&(T=m);else if(s!==7)throw new Error("unknown command "+s)}return[_,E,x,T]},Vd.prototype.toGeoJSON=function(o,n,s){var u,f,m=this.extent*Math.pow(2,s),_=this.extent*o,x=this.extent*n,E=this.loadGeometry(),T=Vd.types[this.type];function A(N){for(var V=0;V<N.length;V++){var X=N[V];N[V]=[360*(X.x+_)/m-180,360/Math.PI*Math.atan(Math.exp((180-360*(X.y+x)/m)*Math.PI/180))-90]}}switch(this.type){case 1:var I=[];for(u=0;u<E.length;u++)I[u]=E[u][0];A(E=I);break;case 2:for(u=0;u<E.length;u++)A(E[u]);break;case 3:for(E=function(N){var V=N.length;if(V<=1)return[N];for(var X,re,ge=[],Te=0;Te<V;Te++){var me=nF(N[Te]);me!==0&&(re===void 0&&(re=me<0),re===me<0?(X&&ge.push(X),X=[N[Te]]):X.push(N[Te]))}return X&&ge.push(X),ge}(E),u=0;u<E.length;u++)for(f=0;f<E[u].length;f++)A(E[u][f])}E.length===1?E=E[0]:T="Multi"+T;var L={type:"Feature",geometry:{type:T,coordinates:E},properties:this.properties};return"id"in this&&(L.id=this.id),L};var rF=TC,CC=MC;function MC(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(iF,this,n),this.length=this._features.length}function iF(o,n,s){o===15?n.version=s.readVarint():o===1?n.name=s.readString():o===5?n.extent=s.readVarint():o===2?n._features.push(s.pos):o===3?n._keys.push(s.readString()):o===4&&n._values.push(function(u){for(var f=null,m=u.readVarint()+u.pos;u.pos<m;){var _=u.readVarint()>>3;f=_===1?u.readString():_===2?u.readFloat():_===3?u.readDouble():_===4?u.readVarint64():_===5?u.readVarint():_===6?u.readSVarint():_===7?u.readBoolean():null}return f}(s))}MC.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new rF(this._pbf,n,this.extent,this._keys,this._values)};var oF=CC;function aF(o,n,s){if(o===3){var u=new oF(s,s.readVarint()+s.pos);u.length&&(n[u.name]=u)}}var Ux=Jy.VectorTile=function(o,n){this.layers=o.readFields(aF,{},n)},e0=Jy.VectorTileFeature=TC;function t0(o,n,s,u){const f=[],m=u===0?(_,x,E,T,A,I)=>{_.push(new Y(I,E+(I-x)/(T-x)*(A-E)))}:(_,x,E,T,A,I)=>{_.push(new Y(x+(I-E)/(A-E)*(T-x),I))};for(const _ of o){const x=[];for(const E of _){if(E.length<=2)continue;const T=[];for(let L=0;L<E.length-1;L++){const N=E[L].x,V=E[L].y,X=E[L+1].x,re=E[L+1].y,ge=u===0?N:V,Te=u===0?X:re;ge<n?Te>n&&m(T,N,V,X,re,n):ge>s?Te<s&&m(T,N,V,X,re,s):T.push(E[L]),Te<n&&ge>=n&&m(T,N,V,X,re,n),Te>s&&ge<=s&&m(T,N,V,X,re,s)}let A=E[E.length-1];const I=u===0?A.x:A.y;I>=n&&I<=s&&T.push(A),T.length&&(A=T[T.length-1],T[0].x===A.x&&T[0].y===A.y||T.push(T[0]),x.push(T))}x.length&&f.push(x)}return f}Jy.VectorTileLayer=CC;const sF=e0.types,lF=Math.pow(2,13);function yp(o,n,s,u,f,m,_,x){o.emplaceBack((n<<1)+_,(s<<1)+m,(Math.floor(u*lF)<<1)+f,Math.round(x))}function _p(o,n,s){o.emplaceBack(n.x,n.y,n.z,s[0]*16384,s[1]*16384,s[2]*16384)}class AC{constructor(){this.acc=new Y(0,0),this.polyCount=[]}startRing(n){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new Y(n.x,n.y),this.max=new Y(n.x,n.y))}append(n,s){this.currentPolyCount.edges++,this.acc._add(n);const u=this.min,f=this.max;n.x<u.x?u.x=n.x:n.x>f.x&&(f.x=n.x),n.y<u.y?u.y=n.y:n.y>f.y&&(f.y=n.y),((n.x===0||n.x===kn)&&n.x===s.x)!=((n.y===0||n.y===kn)&&n.y===s.y)&&this.processBorderOverlap(n,s),s.x<0!=n.x<0&&this.addBorderIntersection(0,Kn(s.y,n.y,(0-s.x)/(n.x-s.x))),s.x>kn!=n.x>kn&&this.addBorderIntersection(1,Kn(s.y,n.y,(kn-s.x)/(n.x-s.x))),s.y<0!=n.y<0&&this.addBorderIntersection(2,Kn(s.x,n.x,(0-s.y)/(n.y-s.y))),s.y>kn!=n.y>kn&&this.addBorderIntersection(3,Kn(s.x,n.x,(kn-s.y)/(n.y-s.y)))}addBorderIntersection(n,s){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const u=this.borders[n];s<u[0]&&(u[0]=s),s>u[1]&&(u[1]=s)}processBorderOverlap(n,s){if(n.x===s.x){if(n.y===s.y)return;const u=n.x===0?0:1;this.addBorderIntersection(u,s.y),this.addBorderIntersection(u,n.y)}else{const u=n.y===0?2:3;this.addBorderIntersection(u,s.x),this.addBorderIntersection(u,n.x)}}centroid(){const n=this.polyCount.reduce((s,u)=>s+u.edges,0);return n!==0?this.acc.div(n)._round():new Y(0,0)}span(){return new Y(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((n,s)=>n+ +(s[0]!==Number.MAX_VALUE),0)}}class vp{constructor(n){this.zoom=n.zoom,this.canonical=n.canonical,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=n.projection,this.layoutVertexArray=new ur,this.centroidVertexArray=new kT,this.indexArray=new $i,this.programConfigurations=new ru(n.layers,n.zoom),this.segments=new li,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.enableTerrain=n.enableTerrain}populate(n,s,u,f){this.features=[],this.hasPattern=Nx("fill-extrusion",this.layers,s),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(m){const _=Math.exp(Math.PI*(1-m.y/(1<<m.z)*2));return 80150034*_/(_*_+1)/kn/(1<<m.z)}(u),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:m,id:_,index:x,sourceLayerIndex:E}of n){const T=this.layers[0]._featureFilter.needGeometry,A=cu(m,T);if(!this.layers[0]._featureFilter.filter(new He(this.zoom),A,u))continue;const I={id:_,sourceLayerIndex:E,index:x,geometry:T?A.geometry:Ps(m,u,f),properties:m.properties,type:m.type,patterns:{}},L=this.layoutVertexArray.length;this.hasPattern?this.features.push($x("fill-extrusion",this.layers,I,this.zoom,s)):this.addFeature(I,I.geometry,x,u,{},s.availableImages,f),s.featureIndex.insert(m,I.geometry,x,E,this.index,L)}this.sortBorders()}addFeatures(n,s,u,f,m){for(const _ of this.features){const{geometry:x}=_;this.addFeature(_,x,_.index,s,u,f,m)}this.sortBorders()}update(n,s,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,u,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,J5),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=n.createVertexBuffer(this.layoutVertexExtArray,Q5.members,!0))),this.programConfigurations.upload(n),this.uploaded=!0}uploadCentroid(n){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,Y5.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,u,f,m,_,x){const E=[new Y(0,0),new Y(kn,kn)],T=x.projection,A=T.name==="globe",I=this.enableTerrain&&!A?new AC:null,L=sF[n.type]==="Polygon";A&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Uo);const N=Bx(s,500);for(let ge=N.length-1;ge>=0;ge--){const Te=N[ge];(Te.length===0||(V=Te[0]).every(me=>me.x<=0)||V.every(me=>me.x>=kn)||V.every(me=>me.y<=0)||V.every(me=>me.y>=kn))&&N.splice(ge,1)}var V;let X;if(A)X=zC(N,E,f);else{X=[];for(const ge of N)X.push({polygon:ge,bounds:E})}const re=L?this.edgeRadius:0;for(const{polygon:ge,bounds:Te}of X){let me=0,Se=0;for(const Ce of ge)L&&!Ce[0].equals(Ce[Ce.length-1])&&Ce.push(Ce[0]),Se+=L?Ce.length-1:Ce.length;const Re=this.segments.prepareSegment((L?5:4)*Se,this.layoutVertexArray,this.indexArray);if(L){const Ce=[],it=[];me=Re.vertexLength;for(const gt of ge){let Pt,st;gt.length&&gt!==ge[0]&&it.push(Ce.length/2),Pt=gt[1].sub(gt[0])._perp()._unit();for(let vt=1;vt<gt.length;vt++){const bt=gt[vt],Mt=gt[vt===gt.length-1?1:vt+1];let{x:Dt,y:ct}=bt;if(re){st=Mt.sub(bt)._perp()._unit();const Vt=Pt.add(st)._unit(),xn=re*Math.min(4,1/(Pt.x*Vt.x+Pt.y*Vt.y));Dt+=xn*Vt.x,ct+=xn*Vt.y,Pt=st}yp(this.layoutVertexArray,Dt,ct,0,0,1,1,0),Re.vertexLength++,Ce.push(bt.x,bt.y),A&&_p(this.layoutVertexExtArray,T.projectTilePoint(Dt,ct,f),T.upVector(f,Dt,ct))}}const et=$d(Ce,it);for(let gt=0;gt<et.length;gt+=3)this.indexArray.emplaceBack(me+et[gt],me+et[gt+2],me+et[gt+1]),Re.primitiveLength++}for(const Ce of ge){I&&Ce.length&&I.startRing(Ce[0]);let it,et,gt,Pt=Ce.length>4&&PC(Ce[Ce.length-2],Ce[0],Ce[1]),st=re?cF(Ce[Ce.length-2],Ce[0],Ce[1],re):0;et=Ce[1].sub(Ce[0])._perp()._unit();let vt=!0;for(let bt=1,Mt=0;bt<Ce.length;bt++){let Dt=Ce[bt-1],ct=Ce[bt];const Vt=Ce[bt===Ce.length-1?1:bt+1];if(I&&L&&I.currentPolyCount.top++,IC(ct,Dt,Te)){re&&(et=Vt.sub(ct)._perp()._unit(),vt=!vt);continue}I&&I.append(ct,Dt);const xn=ct.sub(Dt)._perp(),Ht=xn.x/(Math.abs(xn.x)+Math.abs(xn.y)),sn=xn.y>0?1:0,jt=Dt.dist(ct);if(Mt+jt>32768&&(Mt=0),re){gt=Vt.sub(ct)._perp()._unit();let On=RC(Dt,ct,Vt,kC(et,gt),re);isNaN(On)&&(On=0);const Mn=ct.sub(Dt)._unit();Dt=Dt.add(Mn.mult(st))._round(),ct=ct.add(Mn.mult(-On))._round(),st=On,et=gt}const Sn=Re.vertexLength,Un=Ce.length>4&&PC(Dt,ct,Vt);let Bn=LC(Mt,Pt,vt);if(yp(this.layoutVertexArray,Dt.x,Dt.y,Ht,sn,0,0,Bn),yp(this.layoutVertexArray,Dt.x,Dt.y,Ht,sn,0,1,Bn),Mt+=jt,Bn=LC(Mt,Un,!vt),Pt=Un,yp(this.layoutVertexArray,ct.x,ct.y,Ht,sn,0,0,Bn),yp(this.layoutVertexArray,ct.x,ct.y,Ht,sn,0,1,Bn),Re.vertexLength+=4,this.indexArray.emplaceBack(Sn+0,Sn+1,Sn+2),this.indexArray.emplaceBack(Sn+1,Sn+3,Sn+2),Re.primitiveLength+=2,re){const On=me+(bt===1?Ce.length-2:bt-2),Mn=bt===1?me:On+1;if(this.indexArray.emplaceBack(Sn+1,On,Sn+3),this.indexArray.emplaceBack(On,Mn,Sn+3),Re.primitiveLength+=2,it===void 0&&(it=Sn),!IC(Vt,Ce[bt],Te)){const pr=bt===Ce.length-1?it:Re.vertexLength;this.indexArray.emplaceBack(Sn+2,Sn+3,pr),this.indexArray.emplaceBack(Sn+3,pr+1,pr),this.indexArray.emplaceBack(Sn+3,Mn,pr+1),Re.primitiveLength+=3}vt=!vt}if(A){const On=this.layoutVertexExtArray,Mn=T.projectTilePoint(Dt.x,Dt.y,f),pr=T.projectTilePoint(ct.x,ct.y,f),In=T.upVector(f,Dt.x,Dt.y),Vn=T.upVector(f,ct.x,ct.y);_p(On,Mn,In),_p(On,Mn,In),_p(On,pr,Vn),_p(On,pr,Vn)}}L&&(me+=Ce.length-1)}}if(I&&I.polyCount.length>0){if(I.borders){I.vertexArrayOffset=this.centroidVertexArray.length;const ge=I.borders,Te=this.featuresOnBorder.push(I)-1;for(let me=0;me<4;me++)ge[me][0]!==Number.MAX_VALUE&&this.borders[me].push(Te)}this.encodeCentroid(I.borders?void 0:I.centroid(),I)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,m,_,f)}sortBorders(){for(let n=0;n<4;n++)this.borders[n].sort((s,u)=>this.featuresOnBorder[s].borders[n][0]-this.featuresOnBorder[u].borders[n][0])}encodeCentroid(n,s,u=!0){let f,m;if(n)if(n.y!==0){const x=s.span()._mult(this.tileToMeter);f=(Math.max(n.x,1)<<3)+Math.min(7,Math.round(x.x/10)),m=(Math.max(n.y,1)<<3)+Math.min(7,Math.round(x.y/10))}else f=Math.ceil(7*(n.x+450)),m=0;else f=0,m=+u;let _=u?this.centroidVertexArray.length:s.vertexArrayOffset;for(const x of s.polyCount){u&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*x.edges+x.top);for(let E=0;E<x.top;E++)this.centroidVertexArray.emplace(_++,f,m);for(let E=0;E<2*x.edges;E++)this.centroidVertexArray.emplace(_++,0,m),this.centroidVertexArray.emplace(_++,f,m)}}}function kC(o,n){const s=o.add(n)._unit();return o.x*s.x+o.y*s.y}function cF(o,n,s,u){const f=n.sub(o)._perp()._unit(),m=s.sub(n)._perp()._unit();return RC(o,n,s,kC(f,m),u)}function RC(o,n,s,u,f){const m=Math.sqrt(1-u*u);return Math.min(o.dist(n)/3,n.dist(s)/3,f*m/u)}function IC(o,n,s){return o.x<s[0].x&&n.x<s[0].x||o.x>s[1].x&&n.x>s[1].x||o.y<s[0].y&&n.y<s[0].y||o.y>s[1].y&&n.y>s[1].y}function PC(o,n,s){if(o.x<0||o.x>=kn||n.x<0||n.x>=kn||s.x<0||s.x>=kn)return!1;const u=s.sub(n),f=u.perp(),m=o.sub(n);return(u.x*m.x+u.y*m.y)/Math.sqrt((u.x*u.x+u.y*u.y)*(m.x*m.x+m.y*m.y))>-.866&&f.x*m.x+f.y*m.y<0}function LC(o,n,s){const u=n?2|o:-3&o;return s?1|u:-2&u}function DC(){const o=Math.PI/32,n=Math.tan(o),s=hp;return s*Math.sqrt(1+2*n*n)-s}function zC(o,n,s){const u=1<<s.z,f=jo(s.x/u),m=jo((s.x+1)/u),_=Ui(s.y/u),x=Ui((s.y+1)/u);return function(E,T,A,I,L=0,N){const V=[];if(!E.length||!A||!I)return V;const X=(Ce,it)=>{for(const et of Ce)V.push({polygon:et,bounds:it})},re=Math.ceil(Math.log2(A)),ge=Math.ceil(Math.log2(I)),Te=re-ge,me=[];for(let Ce=0;Ce<Math.abs(Te);Ce++)me.push(Te>0?0:1);for(let Ce=0;Ce<Math.min(re,ge);Ce++)me.push(0),me.push(1);let Se=E;if(Se=t0(Se,T[0].y-L,T[1].y+L,1),Se=t0(Se,T[0].x-L,T[1].x+L,0),!Se.length)return V;const Re=[];for(me.length?Re.push({polygons:Se,bounds:T,depth:0}):X(Se,T);Re.length;){const Ce=Re.pop(),it=Ce.depth,et=me[it],gt=Ce.bounds[0],Pt=Ce.bounds[1],st=et===0?gt.x:gt.y,vt=et===0?Pt.x:Pt.y,bt=N?N(et,st,vt):.5*(st+vt),Mt=t0(Ce.polygons,st-L,bt+L,et),Dt=t0(Ce.polygons,bt-L,vt+L,et);if(Mt.length){const ct=[gt,new Y(et===0?bt:Pt.x,et===1?bt:Pt.y)];me.length>it+1?Re.push({polygons:Mt,bounds:ct,depth:it+1}):X(Mt,ct)}if(Dt.length){const ct=[new Y(et===0?bt:gt.x,et===1?bt:gt.y),Pt];me.length>it+1?Re.push({polygons:Dt,bounds:ct,depth:it+1}):X(Dt,ct)}}return V}(o,n,Math.ceil((m-f)/11.25),Math.ceil((_-x)/11.25),1,(E,T,A)=>{if(E===0)return .5*(T+A);{const I=Ui((s.y+T/kn)/u);return(ns(.5*(Ui((s.y+A/kn)/u)+I))*u-s.y)*kn}})}nn(vp,"FillExtrusionBucket",{omit:["layers","features"]}),nn(AC,"PartMetadata");const uF=new kt({"fill-extrusion-edge-radius":new qe(pt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var dF={paint:new kt({"fill-extrusion-opacity":new qe(pt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new at(pt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new qe(pt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new qe(pt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new at(pt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new at(pt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new at(pt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new qe(pt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new qe(pt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new qe(pt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:uF};function OC(o,n,s){var u=2*Math.PI*6378137/256/Math.pow(2,s);return[o*u-2*Math.PI*6378137/2,n*u-2*Math.PI*6378137/2]}class n0{constructor(n,s,u){this.z=n,this.x=s,this.y=u,this.key=xp(0,n,n,s,u)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s){const u=function(m,_,x){var E=OC(256*m,256*(_=Math.pow(2,x)-_-1),x),T=OC(256*(m+1),256*(_+1),x);return E[0]+","+E[1]+","+T[0]+","+T[1]}(this.x,this.y,this.z),f=function(m,_,x){let E,T="";for(let A=m;A>0;A--)E=1<<A-1,T+=(_&E?1:0)+(x&E?2:0);return T}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(s==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",f).replace("{bbox-epsg-3857}",u)}toString(){return`${this.z}/${this.x}/${this.y}`}}class FC{constructor(n,s){this.wrap=n,this.canonical=s,this.key=xp(n,s.z,s.z,s.x,s.y)}}class lo{constructor(n,s,u,f,m){this.overscaledZ=n,this.wrap=s,this.canonical=new n0(u,+f,+m),this.key=s===0&&n===u?this.canonical.key:xp(s,n,u,f,m)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){const s=this.canonical.z-n;return n>this.canonical.z?new lo(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new lo(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s=!0){if(this.overscaledZ===n&&s)return this.key;if(n>this.canonical.z)return xp(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y);{const u=this.canonical.z-n;return xp(this.wrap*+s,n,n,this.canonical.x>>u,this.canonical.y>>u)}}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new lo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,u=2*this.canonical.x,f=2*this.canonical.y;return[new lo(s,this.wrap,s,u,f),new lo(s,this.wrap,s,u+1,f),new lo(s,this.wrap,s,u,f+1),new lo(s,this.wrap,s,u+1,f+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new lo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new lo(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new FC(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function xp(o,n,s,u,f){const m=1<<Math.min(s,22);let _=m*(f%m)+u%m;return o&&s<22&&(_+=m*m*((o<0?-2*o-1:2*o)%(1<<2*(22-s)))),16*(32*_+s)+(n-s)}nn(n0,"CanonicalTileID"),nn(lo,"OverscaledTileID",{omit:["projMatrix"]});class jd extends Y{constructor(n,s,u){super(n,s),this.z=u}}function bp(o,n){return o.x*n.x+o.y*n.y}function BC(o,n){if(o.length===1){let s=0;const u=n[s++];let f;for(;!f||u.equals(f);)if(f=n[s++],!f)return 1/0;for(;s<n.length;s++){const m=n[s],_=o[0],x=f.sub(u),E=m.sub(u),T=_.sub(u),A=bp(x,x),I=bp(x,E),L=bp(E,E),N=bp(T,x),V=bp(T,E),X=A*L-I*I,re=(L*N-I*V)/X,ge=(A*V-I*N)/X,Te=u.z*(1-re-ge)+f.z*re+m.z*ge;if(isFinite(Te))return Te}return 1/0}{let s=1/0;for(const u of n)s=Math.min(s,u.z);return s}}function NC(o,n,s,u,f,m,_,x){const E=_*f.getElevationAt(o,n,!0,!0),T=m[0]!==0,A=T?m[1]===0?_*(m[0]/7-450):_*function(I,L,N){const V=Math.floor(L[0]/8),X=Math.floor(L[1]/8),re=10*(L[0]-8*V),ge=10*(L[1]-8*X),Te=I.getElevationAt(V,X,!0,!0),me=I.getMeterToDEM(N),Se=Math.floor(.5*(re*me-1)),Re=Math.floor(.5*(ge*me-1)),Ce=I.tileCoordToPixel(V,X),it=2*Se+1,et=2*Re+1,gt=function(Dt,ct,Vt,xn,Ht){return[Dt.getElevationAtPixel(ct,Vt,!0),Dt.getElevationAtPixel(ct+Ht,Vt,!0),Dt.getElevationAtPixel(ct,Vt+Ht,!0),Dt.getElevationAtPixel(ct+xn,Vt+Ht,!0)]}(I,Ce.x-Se,Ce.y-Re,it,et),Pt=Math.abs(gt[0]-gt[1]),st=Math.abs(gt[2]-gt[3]),vt=Math.abs(gt[0]-gt[2])+Math.abs(gt[1]-gt[3]),bt=Math.min(.25,.5*me*(Pt+st)/it),Mt=Math.min(.25,.5*me*vt/et);return Te+Math.max(bt*re,Mt*ge)}(f,m,x):E;return{base:E+(s===0)?-1:s,top:T?Math.max(A+u,E+s+2):E+u}}const hF=dn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:fF}=hF,pF=dn([{name:"a_packed",components:4,type:"Float32"}]),{members:mF}=pF,gF=e0.types,yF=Math.cos(Math.PI/180*37.5);class r0{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.projection=n.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Mr,this.layoutVertexArray2=new wr,this.indexArray=new $i,this.programConfigurations=new ru(n.layers,n.zoom),this.segments=new li,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,u,f){this.hasPattern=Nx("line",this.layers,s);const m=this.layers[0].layout.get("line-sort-key"),_=[];for(const{feature:A,id:I,index:L,sourceLayerIndex:N}of n){const V=this.layers[0]._featureFilter.needGeometry,X=cu(A,V);if(!this.layers[0]._featureFilter.filter(new He(this.zoom),X,u))continue;const re=m?m.evaluate(X,{},u):void 0,ge={id:I,properties:A.properties,type:A.type,sourceLayerIndex:N,index:L,geometry:V?X.geometry:Ps(A,u,f),patterns:{},sortKey:re};_.push(ge)}m&&_.sort((A,I)=>A.sortKey-I.sortKey);const{lineAtlas:x,featureIndex:E}=s,T=this.addConstantDashes(x);for(const A of _){const{geometry:I,index:L,sourceLayerIndex:N}=A;if(T&&this.addFeatureDashes(A,x),this.hasPattern){const V=$x("line",this.layers,A,this.zoom,s);this.patternFeatures.push(V)}else this.addFeature(A,I,L,u,x.positions,s.availableImages);E.insert(n[L].feature,I,L,N,this.index)}}addConstantDashes(n){let s=!1;for(const u of this.layers){const f=u.paint.get("line-dasharray").value,m=u.layout.get("line-cap").value;if(f.kind!=="constant"||m.kind!=="constant")s=!0;else{const _=m.value,x=f.value;if(!x)continue;n.addDash(x,_)}}return s}addFeatureDashes(n,s){const u=this.zoom;for(const f of this.layers){const m=f.paint.get("line-dasharray").value,_=f.layout.get("line-cap").value;if(m.kind==="constant"&&_.kind==="constant")continue;let x,E;if(m.kind==="constant"){if(x=m.value,!x)continue}else x=m.evaluate({zoom:u},n);E=_.kind==="constant"?_.value:_.evaluate({zoom:u},n),s.addDash(x,E),n.patterns[f.id]=s.getKey(x,E)}}update(n,s,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,u,f)}addFeatures(n,s,u,f,m){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,s,u,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,mF)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,fF),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&n.properties.hasOwnProperty("mapbox_clip_start")&&n.properties.hasOwnProperty("mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,u,f,m,_){const x=this.layers[0].layout,E=x.get("line-join").evaluate(n,{}),T=x.get("line-cap").evaluate(n,{}),A=x.get("line-miter-limit"),I=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const L of s)this.addLine(L,n,E,T,A,I);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,m,_,f)}addLine(n,s,u,f,m,_){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ge=0;ge<n.length-1;ge++)this.totalDistance+=n[ge].dist(n[ge+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const x=gF[s.type]==="Polygon";let E=n.length;for(;E>=2&&n[E-1].equals(n[E-2]);)E--;let T=0;for(;T<E-1&&n[T].equals(n[T+1]);)T++;if(E<(x?3:2))return;u==="bevel"&&(m=1.05);const A=this.overscaling<=16?122880/(512*this.overscaling):0,I=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let L,N,V,X,re;this.e1=this.e2=-1,x&&(L=n[E-2],re=n[T].sub(L)._unit()._perp());for(let ge=T;ge<E;ge++){if(V=ge===E-1?x?n[T+1]:void 0:n[ge+1],V&&n[ge].equals(V))continue;re&&(X=re),L&&(N=L),L=n[ge],re=V?V.sub(L)._unit()._perp():X,X=X||re;let Te=X.add(re);Te.x===0&&Te.y===0||Te._unit();const me=X.x*re.x+X.y*re.y,Se=Te.x*re.x+Te.y*re.y,Re=Se!==0?1/Se:1/0,Ce=2*Math.sqrt(2-2*Se),it=Se<yF&&N&&V,et=X.x*re.y-X.y*re.x>0;if(it&&ge>T){const st=L.dist(N);if(st>2*A){const vt=L.sub(L.sub(N)._mult(A/st)._round());this.updateDistance(N,vt),this.addCurrentVertex(vt,X,0,0,I),N=vt}}const gt=N&&V;let Pt=gt?u:x?"butt":f;if(gt&&Pt==="round"&&(Re<_?Pt="miter":Re<=2&&(Pt="fakeround")),Pt==="miter"&&Re>m&&(Pt="bevel"),Pt==="bevel"&&(Re>2&&(Pt="flipbevel"),Re<m&&(Pt="miter")),N&&this.updateDistance(N,L),Pt==="miter")Te._mult(Re),this.addCurrentVertex(L,Te,0,0,I);else if(Pt==="flipbevel"){if(Re>100)Te=re.mult(-1);else{const st=Re*X.add(re).mag()/X.sub(re).mag();Te._perp()._mult(st*(et?-1:1))}this.addCurrentVertex(L,Te,0,0,I),this.addCurrentVertex(L,Te.mult(-1),0,0,I)}else if(Pt==="bevel"||Pt==="fakeround"){const st=-Math.sqrt(Re*Re-1),vt=et?st:0,bt=et?0:st;if(N&&this.addCurrentVertex(L,X,vt,bt,I),Pt==="fakeround"){const Mt=Math.round(180*Ce/Math.PI/20);for(let Dt=1;Dt<Mt;Dt++){let ct=Dt/Mt;if(ct!==.5){const xn=ct-.5;ct+=ct*xn*(ct-1)*((1.0904+me*(me*(3.55645-1.43519*me)-3.2452))*xn*xn+(.848013+me*(.215638*me-1.06021)))}const Vt=re.sub(X)._mult(ct)._add(X)._unit()._mult(et?-1:1);this.addHalfVertex(L,Vt.x,Vt.y,!1,et,0,I)}}V&&this.addCurrentVertex(L,re,-vt,-bt,I)}else if(Pt==="butt")this.addCurrentVertex(L,Te,0,0,I);else if(Pt==="square"){const st=N?1:-1;N||this.addCurrentVertex(L,Te,st,st,I),this.addCurrentVertex(L,Te,0,0,I),N&&this.addCurrentVertex(L,Te,st,st,I)}else Pt==="round"&&(N&&(this.addCurrentVertex(L,X,0,0,I),this.addCurrentVertex(L,X,1,1,I,!0)),V&&(this.addCurrentVertex(L,re,-1,-1,I,!0),this.addCurrentVertex(L,re,0,0,I)));if(it&&ge<E-1){const st=L.dist(V);if(st>2*A){const vt=L.add(V.sub(L)._mult(A/st)._round());this.updateDistance(L,vt),this.addCurrentVertex(vt,re,0,0,I),L=vt}}}}addCurrentVertex(n,s,u,f,m,_=!1){const x=s.y*f-s.x,E=-s.y-s.x*f;this.addHalfVertex(n,s.x+s.y*u,s.y-s.x*u,_,!1,u,m),this.addHalfVertex(n,x,E,_,!0,-f,m)}addHalfVertex({x:n,y:s},u,f,m,_,x,E){this.layoutVertexArray.emplaceBack((n<<1)+(m?1:0),(s<<1)+(_?1:0),Math.round(63*u)+128,Math.round(63*f)+128,1+(x===0?0:x<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const T=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,T),E.primitiveLength++),_?this.e2=T:this.e1=T}updateScaledDistance(){if(this.lineClips){const n=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=n*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}nn(r0,"LineBucket",{omit:["layers","patternFeatures"]});const _F=new kt({"line-cap":new at(pt.layout_line["line-cap"]),"line-join":new at(pt.layout_line["line-join"]),"line-miter-limit":new qe(pt.layout_line["line-miter-limit"]),"line-round-limit":new qe(pt.layout_line["line-round-limit"]),"line-sort-key":new at(pt.layout_line["line-sort-key"])});var $C={paint:new kt({"line-opacity":new at(pt.paint_line["line-opacity"]),"line-color":new at(pt.paint_line["line-color"]),"line-translate":new qe(pt.paint_line["line-translate"]),"line-translate-anchor":new qe(pt.paint_line["line-translate-anchor"]),"line-width":new at(pt.paint_line["line-width"]),"line-gap-width":new at(pt.paint_line["line-gap-width"]),"line-offset":new at(pt.paint_line["line-offset"]),"line-blur":new at(pt.paint_line["line-blur"]),"line-dasharray":new at(pt.paint_line["line-dasharray"]),"line-pattern":new at(pt.paint_line["line-pattern"]),"line-gradient":new wt(pt.paint_line["line-gradient"]),"line-trim-offset":new qe(pt.paint_line["line-trim-offset"])}),layout:_F};const UC=new class extends at{possiblyEvaluate(o,n){return n=new He(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,transition:n.transition}),super.possiblyEvaluate(o,n)}evaluate(o,n,s,u){return n=_e({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(o,n,s,u)}}($C.paint.properties["line-width"].specification);function VC(o,n){return n>0?n+2*o:o}UC.useIntegerZoom=!0;const vF=dn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),xF=dn([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),bF=dn([{name:"a_projected_pos",components:4,type:"Float32"}],4);dn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const wF=dn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),SF=dn([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);dn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const jC=dn([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),EF=dn([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);dn([{name:"triangle",components:3,type:"Uint16"}]),dn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),dn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),dn([{type:"Float32",name:"offsetX"}]),dn([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var ji=24;const rs=128;function Vx(o,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new He(o+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:u,interpolationType:f}=s;let m=0;for(;m<u.length&&u[m]<=o;)m++;m=Math.max(0,m-1);let _=m;for(;_<u.length&&u[_]<o+1;)_++;_=Math.min(u.length-1,_);const x=u[m],E=u[_];return s.kind==="composite"?{kind:"composite",minZoom:x,maxZoom:E,interpolationType:f}:{kind:"camera",minZoom:x,maxZoom:E,minSize:s.evaluate(new He(x)),maxSize:s.evaluate(new He(E)),interpolationType:f}}}function i0(o,{uSize:n,uSizeT:s},{lowerSize:u,upperSize:f}){return o.kind==="source"?u/rs:o.kind==="composite"?Kn(u/rs,f/rs,s):n}function Gd(o,n){let s=0,u=0;if(o.kind==="constant")u=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:f,minZoom:m,maxZoom:_}=o,x=f?ze(ia.interpolationFactor(f,n,m,_),0,1):0;o.kind==="camera"?u=Kn(o.minSize,o.maxSize,x):s=x}return{uSizeT:s,uSize:u}}var TF=Object.freeze({__proto__:null,getSizeData:Vx,evaluateSizeForFeature:i0,evaluateSizeForZoom:Gd,SIZE_PACK_FACTOR:rs});function CF(o,n,s){return o.sections.forEach(u=>{u.text=function(f,m,_){const x=m.layout.get("text-transform").evaluate(_,{});return x==="uppercase"?f=f.toLocaleUpperCase():x==="lowercase"&&(f=f.toLocaleLowerCase()),Fe.applyArabicShaping&&(f=Fe.applyArabicShaping(f)),f}(u.text,n,s)}),o}const wp={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function MF(o){return o===""||o===""||o===""||o===""||o===""||o===""||o===""||o===""||o===""||o===""||o===""||o===""||o===""||o===""||o===""||o===""||o===""}function AF(o){return o===""||o===""||o===""||o===""||o===""||o===""||o===""||o===""||o===""||o===""}var Sp=Ar,GC=function(o,n,s,u,f){var m,_,x=8*f-u-1,E=(1<<x)-1,T=E>>1,A=-7,I=s?f-1:0,L=s?-1:1,N=o[n+I];for(I+=L,m=N&(1<<-A)-1,N>>=-A,A+=x;A>0;m=256*m+o[n+I],I+=L,A-=8);for(_=m&(1<<-A)-1,m>>=-A,A+=u;A>0;_=256*_+o[n+I],I+=L,A-=8);if(m===0)m=1-T;else{if(m===E)return _?NaN:1/0*(N?-1:1);_+=Math.pow(2,u),m-=T}return(N?-1:1)*_*Math.pow(2,m-u)},WC=function(o,n,s,u,f,m){var _,x,E,T=8*m-f-1,A=(1<<T)-1,I=A>>1,L=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,N=u?0:m-1,V=u?1:-1,X=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(x=isNaN(n)?1:0,_=A):(_=Math.floor(Math.log(n)/Math.LN2),n*(E=Math.pow(2,-_))<1&&(_--,E*=2),(n+=_+I>=1?L/E:L*Math.pow(2,1-I))*E>=2&&(_++,E/=2),_+I>=A?(x=0,_=A):_+I>=1?(x=(n*E-1)*Math.pow(2,f),_+=I):(x=n*Math.pow(2,I-1)*Math.pow(2,f),_=0));f>=8;o[s+N]=255&x,N+=V,x/=256,f-=8);for(_=_<<f|x,T+=f;T>0;o[s+N]=255&_,N+=V,_/=256,T-=8);o[s+N-V]|=128*X};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Ar(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Ar.Varint=0,Ar.Fixed64=1,Ar.Bytes=2,Ar.Fixed32=5;var jx=4294967296,qC=1/jx,HC=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ds(o){return o.type===Ar.Bytes?o.readVarint()+o.pos:o.pos+1}function Wd(o,n,s){return s?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function ZC(o,n,s){var u=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(u);for(var f=s.pos-1;f>=o;f--)s.buf[f+u]=s.buf[f]}function kF(o,n){for(var s=0;s<o.length;s++)n.writeVarint(o[s])}function RF(o,n){for(var s=0;s<o.length;s++)n.writeSVarint(o[s])}function IF(o,n){for(var s=0;s<o.length;s++)n.writeFloat(o[s])}function PF(o,n){for(var s=0;s<o.length;s++)n.writeDouble(o[s])}function LF(o,n){for(var s=0;s<o.length;s++)n.writeBoolean(o[s])}function DF(o,n){for(var s=0;s<o.length;s++)n.writeFixed32(o[s])}function zF(o,n){for(var s=0;s<o.length;s++)n.writeSFixed32(o[s])}function OF(o,n){for(var s=0;s<o.length;s++)n.writeFixed64(o[s])}function FF(o,n){for(var s=0;s<o.length;s++)n.writeSFixed64(o[s])}function o0(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function qd(o,n,s){o[s]=n,o[s+1]=n>>>8,o[s+2]=n>>>16,o[s+3]=n>>>24}function XC(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}function BF(o,n,s){n.glyphs=[],o===1&&s.readMessage(NF,n)}function NF(o,n,s){if(o===3){const{id:u,bitmap:f,width:m,height:_,left:x,top:E,advance:T}=s.readMessage($F,{});n.glyphs.push({id:u,bitmap:new Ls({width:m+6,height:_+6},f),metrics:{width:m,height:_,left:x,top:E,advance:T}})}else o===4?n.ascender=s.readSVarint():o===5&&(n.descender=s.readSVarint())}function $F(o,n,s){o===1?n.id=s.readVarint():o===2?n.bitmap=s.readBytes():o===3?n.width=s.readVarint():o===4?n.height=s.readVarint():o===5?n.left=s.readSVarint():o===6?n.top=s.readSVarint():o===7&&(n.advance=s.readVarint())}function Gx(o){let n=0,s=0;for(const _ of o)n+=_.w*_.h,s=Math.max(s,_.w);o.sort((_,x)=>x.h-_.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let f=0,m=0;for(const _ of o)for(let x=u.length-1;x>=0;x--){const E=u[x];if(!(_.w>E.w||_.h>E.h)){if(_.x=E.x,_.y=E.y,m=Math.max(m,_.y+_.h),f=Math.max(f,_.x+_.w),_.w===E.w&&_.h===E.h){const T=u.pop();x<u.length&&(u[x]=T)}else _.h===E.h?(E.x+=_.w,E.w-=_.w):_.w===E.w?(E.y+=_.h,E.h-=_.h):(u.push({x:E.x+_.w,y:E.y,w:E.w-_.w,h:_.h}),E.y+=_.h,E.h-=_.h);break}}return{w:f,h:m,fill:n/(f*m)||0}}Ar.prototype={destroy:function(){this.buf=null},readFields:function(o,n,s){for(s=s||this.length;this.pos<s;){var u=this.readVarint(),f=u>>3,m=this.pos;this.type=7&u,o(f,n,this),this.pos===m&&this.skip(u)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=o0(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=XC(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=o0(this.buf,this.pos)+o0(this.buf,this.pos+4)*jx;return this.pos+=8,o},readSFixed64:function(){var o=o0(this.buf,this.pos)+XC(this.buf,this.pos+4)*jx;return this.pos+=8,o},readFloat:function(){var o=GC(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=GC(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,s,u=this.buf;return n=127&(s=u[this.pos++]),s<128?n:(n|=(127&(s=u[this.pos++]))<<7,s<128?n:(n|=(127&(s=u[this.pos++]))<<14,s<128?n:(n|=(127&(s=u[this.pos++]))<<21,s<128?n:function(f,m,_){var x,E,T=_.buf;if(x=(112&(E=T[_.pos++]))>>4,E<128||(x|=(127&(E=T[_.pos++]))<<3,E<128)||(x|=(127&(E=T[_.pos++]))<<10,E<128)||(x|=(127&(E=T[_.pos++]))<<17,E<128)||(x|=(127&(E=T[_.pos++]))<<24,E<128)||(x|=(1&(E=T[_.pos++]))<<31,E<128))return Wd(f,x,m);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=u[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&HC?function(s,u,f){return HC.decode(s.subarray(u,f))}(this.buf,n,o):function(s,u,f){for(var m="",_=u;_<f;){var x,E,T,A=s[_],I=null,L=A>239?4:A>223?3:A>191?2:1;if(_+L>f)break;L===1?A<128&&(I=A):L===2?(192&(x=s[_+1]))==128&&(I=(31&A)<<6|63&x)<=127&&(I=null):L===3?(E=s[_+2],(192&(x=s[_+1]))==128&&(192&E)==128&&((I=(15&A)<<12|(63&x)<<6|63&E)<=2047||I>=55296&&I<=57343)&&(I=null)):L===4&&(E=s[_+2],T=s[_+3],(192&(x=s[_+1]))==128&&(192&E)==128&&(192&T)==128&&((I=(15&A)<<18|(63&x)<<12|(63&E)<<6|63&T)<=65535||I>=1114112)&&(I=null)),I===null?(I=65533,L=1):I>65535&&(I-=65536,m+=String.fromCharCode(I>>>10&1023|55296),I=56320|1023&I),m+=String.fromCharCode(I),_+=L}return m}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==Ar.Bytes)return o.push(this.readVarint(n));var s=Ds(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==Ar.Bytes)return o.push(this.readSVarint());var n=Ds(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Ar.Bytes)return o.push(this.readBoolean());var n=Ds(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Ar.Bytes)return o.push(this.readFloat());var n=Ds(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Ar.Bytes)return o.push(this.readDouble());var n=Ds(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Ar.Bytes)return o.push(this.readFixed32());var n=Ds(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Ar.Bytes)return o.push(this.readSFixed32());var n=Ds(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Ar.Bytes)return o.push(this.readFixed64());var n=Ds(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Ar.Bytes)return o.push(this.readSFixed64());var n=Ds(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===Ar.Varint)for(;this.buf[this.pos++]>127;);else if(n===Ar.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Ar.Fixed32)this.pos+=4;else{if(n!==Ar.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),qd(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),qd(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),qd(this.buf,-1&o,this.pos),qd(this.buf,Math.floor(o*qC),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),qd(this.buf,-1&o,this.pos),qd(this.buf,Math.floor(o*qC),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,s){var u,f;if(n>=0?(u=n%4294967296|0,f=n/4294967296|0):(f=~(-n/4294967296),4294967295^(u=~(-n%4294967296))?u=u+1|0:(u=0,f=f+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(m,_,x){x.buf[x.pos++]=127&m|128,m>>>=7,x.buf[x.pos++]=127&m|128,m>>>=7,x.buf[x.pos++]=127&m|128,m>>>=7,x.buf[x.pos++]=127&m|128,x.buf[x.pos]=127&(m>>>=7)}(u,0,s),function(m,_){var x=(7&m)<<4;_.buf[_.pos++]|=x|((m>>>=3)?128:0),m&&(_.buf[_.pos++]=127&m|((m>>>=7)?128:0),m&&(_.buf[_.pos++]=127&m|((m>>>=7)?128:0),m&&(_.buf[_.pos++]=127&m|((m>>>=7)?128:0),m&&(_.buf[_.pos++]=127&m|((m>>>=7)?128:0),m&&(_.buf[_.pos++]=127&m)))))}(f,s)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(u,f,m){for(var _,x,E=0;E<f.length;E++){if((_=f.charCodeAt(E))>55295&&_<57344){if(!x){_>56319||E+1===f.length?(u[m++]=239,u[m++]=191,u[m++]=189):x=_;continue}if(_<56320){u[m++]=239,u[m++]=191,u[m++]=189,x=_;continue}_=x-55296<<10|_-56320|65536,x=null}else x&&(u[m++]=239,u[m++]=191,u[m++]=189,x=null);_<128?u[m++]=_:(_<2048?u[m++]=_>>6|192:(_<65536?u[m++]=_>>12|224:(u[m++]=_>>18|240,u[m++]=_>>12&63|128),u[m++]=_>>6&63|128),u[m++]=63&_|128)}return m}(this.buf,o,this.pos);var s=this.pos-n;s>=128&&ZC(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),WC(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),WC(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,n){this.pos++;var s=this.pos;o(n,this);var u=this.pos-s;u>=128&&ZC(s,u,this),this.pos=s-1,this.writeVarint(u),this.pos+=u},writeMessage:function(o,n,s){this.writeTag(o,Ar.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,kF,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,RF,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,LF,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,IF,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,PF,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,DF,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,zF,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,OF,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,FF,n)},writeBytesField:function(o,n){this.writeTag(o,Ar.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,Ar.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,Ar.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,Ar.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,Ar.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,Ar.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,Ar.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,Ar.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,Ar.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,Ar.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,!!n)}};class Wx{constructor(n,{pixelRatio:s,version:u,stretchX:f,stretchY:m,content:_}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=f,this.stretchY=m,this.content=_,this.version=u}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class KC{constructor(n,s){const u={},f={};this.haveRenderCallbacks=[];const m=[];this.addImages(n,u,m),this.addImages(s,f,m);const{w:_,h:x}=Gx(m),E=new Ao({width:_||1,height:x||1});for(const T in n){const A=n[T],I=u[T].paddedRect;Ao.copy(A.data,E,{x:0,y:0},{x:I.x+1,y:I.y+1},A.data)}for(const T in s){const A=s[T],I=f[T].paddedRect,L=I.x+1,N=I.y+1,V=A.data.width,X=A.data.height;Ao.copy(A.data,E,{x:0,y:0},{x:L,y:N},A.data),Ao.copy(A.data,E,{x:0,y:X-1},{x:L,y:N-1},{width:V,height:1}),Ao.copy(A.data,E,{x:0,y:0},{x:L,y:N+X},{width:V,height:1}),Ao.copy(A.data,E,{x:V-1,y:0},{x:L-1,y:N},{width:1,height:X}),Ao.copy(A.data,E,{x:0,y:0},{x:L+V,y:N},{width:1,height:X})}this.image=E,this.iconPositions=u,this.patternPositions=f}addImages(n,s,u){for(const f in n){const m=n[f],_={x:0,y:0,w:m.data.width+2,h:m.data.height+2};u.push(_),s[f]=new Wx(_,m),m.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(n,s){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(u=>n.hasImage(u)),n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const u in n.updatedImages)this.patchUpdatedImage(this.iconPositions[u],n.getImage(u),s),this.patchUpdatedImage(this.patternPositions[u],n.getImage(u),s)}patchUpdatedImage(n,s,u){if(!n||!s||n.version===s.version)return;n.version=s.version;const[f,m]=n.tl;u.update(s.data,void 0,{x:f,y:m})}}nn(Wx,"ImagePosition"),nn(KC,"ImageAtlas");const Go={horizontal:1,vertical:2,horizontalOnly:3};class Ep{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const u=new Ep;return u.scale=n||1,u.fontStack=s,u}static forImage(n){const s=new Ep;return s.imageName=n,s}}class Hd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const u=new Hd;for(let f=0;f<n.sections.length;f++){const m=n.sections[f];m.image?u.addImageSection(m):u.addTextSection(m,s)}return u}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSections(){return this.sections}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(n){this.text=function(s,u){let f="";for(let m=0;m<s.length;m++){const _=s.charCodeAt(m+1)||null,x=s.charCodeAt(m-1)||null;f+=!u&&(_&&R(_)&&!wp[s[m+1]]||x&&R(x)&&!wp[s[m-1]])||!wp[s[m]]?s[m]:wp[s[m]]}return f}(this.text,n)}trim(){let n=0;for(let u=0;u<this.text.length&&a0[this.text.charCodeAt(u)];u++)n++;let s=this.text.length;for(let u=this.text.length-1;u>=0&&u>=n&&a0[this.text.charCodeAt(u)];u--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const u=new Hd;return u.text=this.text.substring(n,s),u.sectionIndex=this.sectionIndex.slice(n,s),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(Ep.forText(n.scale,n.fontStack||s));const u=this.sections.length-1;for(let f=0;f<n.text.length;++f)this.sectionIndex.push(u)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void Ct("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(Ep.forImage(s)),this.sectionIndex.push(this.sections.length-1)):Ct("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function qx(o,n,s,u,f,m,_,x,E,T,A,I,L,N,V){const X=Hd.fromFeature(o,f);I===Go.vertical&&X.verticalizePunctuation(L);let re=[];const ge=function(Ce,it,et,gt,Pt,st){if(!Ce)return[];const vt=[],bt=function(Vt,xn,Ht,sn,jt,Sn){let Un=0;for(let Bn=0;Bn<Vt.length();Bn++){const On=Vt.getSection(Bn);Un+=YC(Vt.getCharCode(Bn),On,sn,jt,xn,Sn)}return Un/Math.max(1,Math.ceil(Un/Ht))}(Ce,it,et,gt,Pt,st),Mt=Ce.text.indexOf("")>=0;let Dt=0;for(let Vt=0;Vt<Ce.length();Vt++){const xn=Ce.getSection(Vt),Ht=Ce.getCharCode(Vt);if(a0[Ht]||(Dt+=YC(Ht,xn,gt,Pt,it,st)),Vt<Ce.length()-1){const sn=!((ct=Ht)<11904||!(My(ct)||Id(ct)||p(ct)||zy(ct)||Ry(ct)||Cy(ct)||Ay(ct)||eu(ct)||Iy(ct)||ep(ct)||ky(ct)||g(ct)||Rd(ct)||Qf(ct)||Yf(ct)||Jf(ct)||kl(ct)||tu(ct)||Ly(ct)||Py(ct)));(UF[Ht]||sn||xn.imageName)&&vt.push(JC(Vt+1,Dt,bt,vt,VF(Ht,Ce.getCharCode(Vt+1),sn&&Mt),!1))}}var ct;return eM(JC(Ce.length(),Dt,bt,vt,0,!0))}(X,T,m,n,u,N),{processBidirectionalText:Te,processStyledBidirectionalText:me}=Fe;if(Te&&X.sections.length===1){const Ce=Te(X.toString(),ge);for(const it of Ce){const et=new Hd;et.text=it,et.sections=X.sections;for(let gt=0;gt<it.length;gt++)et.sectionIndex.push(0);re.push(et)}}else if(me){const Ce=me(X.text,X.sectionIndex,ge);for(const it of Ce){const et=new Hd;et.text=it[0],et.sectionIndex=it[1],et.sections=X.sections,re.push(et)}}else re=function(Ce,it){const et=[],gt=Ce.text;let Pt=0;for(const st of it)et.push(Ce.substring(Pt,st)),Pt=st;return Pt<gt.length&&et.push(Ce.substring(Pt,gt.length)),et}(X,ge);const Se=[],Re={positionedLines:Se,text:X.toString(),top:A[1],bottom:A[1],left:A[0],right:A[0],writingMode:I,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Ce,it,et,gt,Pt,st,vt,bt,Mt,Dt,ct,Vt){let xn=0,Ht=0,sn=0;const jt=bt==="right"?1:bt==="left"?0:.5;let Sn=!1;for(const In of Pt){const Vn=In.getSections();for(const _r of Vn){if(_r.imageName)continue;const Lr=it[_r.fontStack];if(Lr&&(Sn=Lr.ascender!==void 0&&Lr.descender!==void 0,!Sn))break}if(!Sn)break}let Un=0;for(const In of Pt){In.trim();const Vn=In.getMaxScale(),_r=(Vn-1)*ji,Lr={positionedGlyphs:[],lineOffset:0};Ce.positionedLines[Un]=Lr;const kr=Lr.positionedGlyphs;let Dr=0;if(!In.length()){Ht+=st,++Un;continue}let Fr=0,Zr=0;for(let mr=0;mr<In.length();mr++){const gi=In.getSection(mr),ui=In.getSectionIndex(mr),nr=In.getCharCode(mr);let Vr=gi.scale,xi=null,vr=null,ti=null,Ki=ji,Ii=0;const Pi=!(Mt===Go.horizontal||!ct&&!M(nr)||ct&&(a0[nr]||(Bn=nr,Jc(Bn)||Ty(Bn)||Kf(Bn)||Pd(Bn)||h(Bn))));if(gi.imageName){const co=gt[gi.imageName];if(!co)continue;ti=gi.imageName,Ce.iconsInText=Ce.iconsInText||!0,vr=co.paddedRect;const Li=co.displaySize;Vr=Vr*ji/Vt,xi={width:Li[0],height:Li[1],left:1,top:-3,advance:Pi?Li[1]:Li[0],localGlyph:!1},Ii=Sn?-xi.height*Vr:Vn*ji-17-Li[1]*Vr,Ki=xi.advance;const Os=(Pi?Li[0]:Li[1])*Vr-ji*Vn;Os>0&&Os>Dr&&(Dr=Os)}else{const co=et[gi.fontStack];if(!co)continue;co[nr]&&(vr=co[nr]);const Li=it[gi.fontStack];if(!Li)continue;const Os=Li.glyphs[nr];if(!Os)continue;if(xi=Os.metrics,Ki=nr!==8203?ji:0,Sn){const Qd=Li.ascender!==void 0?Math.abs(Li.ascender):0,Pp=Li.descender!==void 0?Math.abs(Li.descender):0,Lp=(Qd+Pp)*Vr;Fr<Lp&&(Fr=Lp,Zr=(Qd-Pp)/2*Vr),Ii=-Qd*Vr}else Ii=(Vn-Vr)*ji-17}Pi?(Ce.verticalizable=!0,kr.push({glyph:nr,imageName:ti,x:xn,y:Ht+Ii,vertical:Pi,scale:Vr,localGlyph:xi.localGlyph,fontStack:gi.fontStack,sectionIndex:ui,metrics:xi,rect:vr}),xn+=Ki*Vr+Dt):(kr.push({glyph:nr,imageName:ti,x:xn,y:Ht+Ii,vertical:Pi,scale:Vr,localGlyph:xi.localGlyph,fontStack:gi.fontStack,sectionIndex:ui,metrics:xi,rect:vr}),xn+=xi.advance*Vr+Dt)}kr.length!==0&&(sn=Math.max(xn-Dt,sn),Sn?tM(kr,jt,Dr,Zr,st*Vn/2):tM(kr,jt,Dr,0,st/2)),xn=0;const Ri=st*Vn+Dr;Lr.lineOffset=Math.max(Dr,_r),Ht+=Ri,++Un}var Bn;const On=Ht,{horizontalAlign:Mn,verticalAlign:pr}=Hx(vt);(function(In,Vn,_r,Lr,kr,Dr){const Fr=(Vn-_r)*kr,Zr=-Dr*Lr;for(const Ri of In)for(const mr of Ri.positionedGlyphs)mr.x+=Fr,mr.y+=Zr})(Ce.positionedLines,jt,Mn,pr,sn,On),Ce.top+=-pr*On,Ce.bottom=Ce.top+On,Ce.left+=-Mn*sn,Ce.right=Ce.left+sn,Ce.hasBaseline=Sn}(Re,n,s,u,re,_,x,E,I,T,L,V),!function(Ce){for(const it of Ce)if(it.positionedGlyphs.length!==0)return!1;return!0}(Se)&&Re}const a0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},UF={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function YC(o,n,s,u,f,m){if(n.imageName){const _=u[n.imageName];return _?_.displaySize[0]*n.scale*ji/m+f:0}{const _=s[n.fontStack],x=_&&_.glyphs[o];return x?x.metrics.advance*n.scale+f:0}}function QC(o,n,s,u){const f=Math.pow(o-n,2);return u?o<n?f/2:2*f:f+Math.abs(s)*s}function VF(o,n,s){let u=0;return o===10&&(u-=1e4),s&&(u+=150),o!==40&&o!==65288||(u+=50),n!==41&&n!==65289||(u+=50),u}function JC(o,n,s,u,f,m){let _=null,x=QC(n,s,f,m);for(const E of u){const T=QC(n-E.x,s,f,m)+E.badness;T<=x&&(_=E,x=T)}return{index:o,x:n,priorBreak:_,badness:x}}function eM(o){return o?eM(o.priorBreak).concat(o.index):[]}function Hx(o){let n=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function tM(o,n,s,u,f){if(!(n||s||u||f))return;const m=o.length-1,_=o[m],x=(_.x+_.metrics.advance*_.scale)*n;for(let E=0;E<=m;E++)o[E].x-=x,o[E].y+=s+u+f}function jF(o,n,s){const{horizontalAlign:u,verticalAlign:f}=Hx(s),m=n[0]-o.displaySize[0]*u,_=n[1]-o.displaySize[1]*f;return{image:o,top:_,bottom:_+o.displaySize[1],left:m,right:m+o.displaySize[0]}}function nM(o,n,s,u,f,m){const _=o.image;let x;if(_.content){const re=_.content,ge=_.pixelRatio||1;x=[re[0]/ge,re[1]/ge,_.displaySize[0]-re[2]/ge,_.displaySize[1]-re[3]/ge]}const E=n.left*m,T=n.right*m;let A,I,L,N;s==="width"||s==="both"?(N=f[0]+E-u[3],I=f[0]+T+u[1]):(N=f[0]+(E+T-_.displaySize[0])/2,I=N+_.displaySize[0]);const V=n.top*m,X=n.bottom*m;return s==="height"||s==="both"?(A=f[1]+V-u[0],L=f[1]+X+u[2]):(A=f[1]+(V+X-_.displaySize[1])/2,L=A+_.displaySize[1]),{image:_,top:A,right:I,bottom:L,left:N,collisionPadding:x}}class zs extends Y{constructor(n,s,u,f,m){super(n,s),this.angle=f,this.z=u,m!==void 0&&(this.segment=m)}clone(){return new zs(this.x,this.y,this.z,this.angle,this.segment)}}function rM(o,n,s,u,f){if(n.segment===void 0)return!0;let m=n,_=n.segment+1,x=0;for(;x>-s/2;){if(_--,_<0)return!1;x-=o[_].dist(m),m=o[_]}x+=o[_].dist(o[_+1]),_++;const E=[];let T=0;for(;x<s/2;){const A=o[_],I=o[_+1];if(!I)return!1;let L=o[_-1].angleTo(A)-A.angleTo(I);for(L=Math.abs((L+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:x,angleDelta:L}),T+=L;x-E[0].distance>u;)T-=E.shift().angleDelta;if(T>f)return!1;_++,x+=A.dist(I)}return!0}function iM(o){let n=0;for(let s=0;s<o.length-1;s++)n+=o[s].dist(o[s+1]);return n}function oM(o,n,s){return o?.6*n*s:0}function aM(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function GF(o,n,s,u,f,m){const _=oM(s,f,m),x=aM(s,u)*m;let E=0;const T=iM(o)/2;for(let A=0;A<o.length-1;A++){const I=o[A],L=o[A+1],N=I.dist(L);if(E+N>T){const V=(T-E)/N,X=Kn(I.x,L.x,V),re=Kn(I.y,L.y,V),ge=new zs(X,re,0,L.angleTo(I),A);return!_||rM(o,ge,x,_,n)?ge:void 0}E+=N}}function WF(o,n,s,u,f,m,_,x,E){const T=oM(u,m,_),A=aM(u,f),I=A*_,L=o[0].x===0||o[0].x===E||o[0].y===0||o[0].y===E;return n-I<n/4&&(n=I+n/4),sM(o,L?n/2*x%n:(A/2+2*m)*_*x%n,n,T,s,I,L,!1,E)}function sM(o,n,s,u,f,m,_,x,E){const T=m/2,A=iM(o);let I=0,L=n-s,N=[];for(let V=0;V<o.length-1;V++){const X=o[V],re=o[V+1],ge=X.dist(re),Te=re.angleTo(X);for(;L+s<I+ge;){L+=s;const me=(L-I)/ge,Se=Kn(X.x,re.x,me),Re=Kn(X.y,re.y,me);if(Se>=0&&Se<E&&Re>=0&&Re<E&&L-T>=0&&L+T<=A){const Ce=new zs(Se,Re,0,Te,V);Ce._round(),u&&!rM(o,Ce,m,u,f)||N.push(Ce)}}I+=ge}return x||N.length||_||(N=sM(o,I/2,s,u,f,m,_,!0,E)),N}function lM(o,n,s,u,f){const m=[];for(let _=0;_<o.length;_++){const x=o[_];let E;for(let T=0;T<x.length-1;T++){let A=x[T],I=x[T+1];A.x<n&&I.x<n||(A.x<n?A=new Y(n,A.y+(n-A.x)/(I.x-A.x)*(I.y-A.y))._round():I.x<n&&(I=new Y(n,A.y+(n-A.x)/(I.x-A.x)*(I.y-A.y))._round()),A.y<s&&I.y<s||(A.y<s?A=new Y(A.x+(s-A.y)/(I.y-A.y)*(I.x-A.x),s)._round():I.y<s&&(I=new Y(A.x+(s-A.y)/(I.y-A.y)*(I.x-A.x),s)._round()),A.x>=u&&I.x>=u||(A.x>=u?A=new Y(u,A.y+(u-A.x)/(I.x-A.x)*(I.y-A.y))._round():I.x>=u&&(I=new Y(u,A.y+(u-A.x)/(I.x-A.x)*(I.y-A.y))._round()),A.y>=f&&I.y>=f||(A.y>=f?A=new Y(A.x+(f-A.y)/(I.y-A.y)*(I.x-A.x),f)._round():I.y>=f&&(I=new Y(A.x+(f-A.y)/(I.y-A.y)*(I.x-A.x),f)._round()),E&&A.equals(E[E.length-1])||(E=[A],m.push(E)),E.push(I)))))}}return m}nn(zs,"Anchor");const Tp=1e20;function cM(o,n,s,u,f,m,_,x,E){for(let T=n;T<n+u;T++)uM(o,s*m+T,m,f,_,x,E);for(let T=s;T<s+f;T++)uM(o,T*m+n,1,u,_,x,E)}function uM(o,n,s,u,f,m,_){m[0]=0,_[0]=-Tp,_[1]=Tp,f[0]=o[n];for(let x=1,E=0,T=0;x<u;x++){f[x]=o[n+x*s];const A=x*x;do{const I=m[E];T=(f[x]-f[I]+A-I*I)/(x-I)/2}while(T<=_[E]&&--E>-1);E++,m[E]=x,_[E]=T,_[E+1]=Tp}for(let x=0,E=0;x<u;x++){for(;_[E+1]<x;)E++;const T=m[E],A=x-T;o[n+x*s]=f[T]+A*A}}const Zx={none:0,ideographs:1,all:2};class Zd{constructor(n,s,u){this.requestManager=n,this.localGlyphMode=s,this.localFontFamily=u,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(n){this.url=n}getGlyphs(n,s){const u=[];for(const f in n)for(const m of n[f])u.push({stack:f,id:m});Ue(u,({stack:f,id:m},_)=>{let x=this.entries[f];x||(x=this.entries[f]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let E=x.glyphs[m];if(E!==void 0)return void _(null,{stack:f,id:m,glyph:E});if(E=this._tinySDF(x,f,m),E)return x.glyphs[m]=E,void _(null,{stack:f,id:m,glyph:E});const T=Math.floor(m/256);if(256*T>65535)return void _(new Error("glyphs > 65535 not supported"));if(x.ranges[T])return void _(null,{stack:f,id:m,glyph:E});let A=x.requests[T];A||(A=x.requests[T]=[],Zd.loadGlyphRange(f,T,this.url,this.requestManager,(I,L)=>{if(L){x.ascender=L.ascender,x.descender=L.descender;for(const N in L.glyphs)this._doesCharSupportLocalGlyph(+N)||(x.glyphs[+N]=L.glyphs[+N]);x.ranges[T]=!0}for(const N of A)N(I,L);delete x.requests[T]})),A.push((I,L)=>{I?_(I):L&&_(null,{stack:f,id:m,glyph:L.glyphs[m]||null})})},(f,m)=>{if(f)s(f);else if(m){const _={};for(const{stack:x,id:E,glyph:T}of m)_[x]===void 0&&(_[x]={}),_[x].glyphs===void 0&&(_[x].glyphs={}),_[x].glyphs[E]=T&&{id:T.id,bitmap:T.bitmap.clone(),metrics:T.metrics},_[x].ascender=this.entries[x].ascender,_[x].descender=this.entries[x].descender;s(null,_)}})}_doesCharSupportLocalGlyph(n){return this.localGlyphMode!==Zx.none&&(this.localGlyphMode===Zx.all?!!this.localFontFamily:!!this.localFontFamily&&(ep(n)||Dy(n)||Rd(n)||kl(n)||eu(n)))}_tinySDF(n,s,u){const f=this.localFontFamily;if(!f||!this._doesCharSupportLocalGlyph(u))return;let m=n.tinySDF;if(!m){let X="400";/bold/i.test(s)?X="900":/medium/i.test(s)?X="500":/light/i.test(s)&&(X="200"),m=n.tinySDF=new Zd.TinySDF({fontFamily:f,fontWeight:X,fontSize:48,buffer:6,radius:16}),m.fontWeight=X}if(this.localGlyphs[m.fontWeight][u])return this.localGlyphs[m.fontWeight][u];const _=String.fromCharCode(u),{data:x,width:E,height:T,glyphWidth:A,glyphHeight:I,glyphLeft:L,glyphTop:N,glyphAdvance:V}=m.draw(_);return this.localGlyphs[m.fontWeight][u]={id:u,bitmap:new Ls({width:E,height:T},x),metrics:{width:A/2,height:I/2,left:L/2,top:N/2-27,advance:V/2,localGlyph:!0}}}}function dM(o,n,s,u){const f=[],m=o.image,_=m.pixelRatio,x=m.paddedRect.w-2,E=m.paddedRect.h-2,T=o.right-o.left,A=o.bottom-o.top,I=m.stretchX||[[0,x]],L=m.stretchY||[[0,E]],N=(st,vt)=>st+vt[1]-vt[0],V=I.reduce(N,0),X=L.reduce(N,0),re=x-V,ge=E-X;let Te=0,me=V,Se=0,Re=X,Ce=0,it=re,et=0,gt=ge;if(m.content&&u){const st=m.content;Te=s0(I,0,st[0]),Se=s0(L,0,st[1]),me=s0(I,st[0],st[2]),Re=s0(L,st[1],st[3]),Ce=st[0]-Te,et=st[1]-Se,it=st[2]-st[0]-me,gt=st[3]-st[1]-Re}const Pt=(st,vt,bt,Mt)=>{const Dt=l0(st.stretch-Te,me,T,o.left),ct=c0(st.fixed-Ce,it,st.stretch,V),Vt=l0(vt.stretch-Se,Re,A,o.top),xn=c0(vt.fixed-et,gt,vt.stretch,X),Ht=l0(bt.stretch-Te,me,T,o.left),sn=c0(bt.fixed-Ce,it,bt.stretch,V),jt=l0(Mt.stretch-Se,Re,A,o.top),Sn=c0(Mt.fixed-et,gt,Mt.stretch,X),Un=new Y(Dt,Vt),Bn=new Y(Ht,Vt),On=new Y(Ht,jt),Mn=new Y(Dt,jt),pr=new Y(ct/_,xn/_),In=new Y(sn/_,Sn/_),Vn=n*Math.PI/180;if(Vn){const kr=Math.sin(Vn),Dr=Math.cos(Vn),Fr=[Dr,-kr,kr,Dr];Un._matMult(Fr),Bn._matMult(Fr),Mn._matMult(Fr),On._matMult(Fr)}const _r=st.stretch+st.fixed,Lr=vt.stretch+vt.fixed;return{tl:Un,tr:Bn,bl:Mn,br:On,tex:{x:m.paddedRect.x+1+_r,y:m.paddedRect.y+1+Lr,w:bt.stretch+bt.fixed-_r,h:Mt.stretch+Mt.fixed-Lr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:pr,pixelOffsetBR:In,minFontScaleX:it/_/T,minFontScaleY:gt/_/A,isSDF:s}};if(u&&(m.stretchX||m.stretchY)){const st=hM(I,re,V),vt=hM(L,ge,X);for(let bt=0;bt<st.length-1;bt++){const Mt=st[bt],Dt=st[bt+1];for(let ct=0;ct<vt.length-1;ct++)f.push(Pt(Mt,vt[ct],Dt,vt[ct+1]))}}else f.push(Pt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:x+1},{fixed:0,stretch:E+1}));return f}function s0(o,n,s){let u=0;for(const f of o)u+=Math.max(n,Math.min(s,f[1]))-Math.max(n,Math.min(s,f[0]));return u}function hM(o,n,s){const u=[{fixed:-1,stretch:0}];for(const[f,m]of o){const _=u[u.length-1];u.push({fixed:f-_.stretch,stretch:_.stretch}),u.push({fixed:f-_.stretch,stretch:_.stretch+(m-f)})}return u.push({fixed:n+1,stretch:s}),u}function l0(o,n,s,u){return o/n*s+u}function c0(o,n,s,u){return o-n*s/u}function qF(o,n,s,u){const f=n+o.positionedLines[u].lineOffset;return u===0?s+f/2:s+(f+(n+o.positionedLines[u-1].lineOffset))/2}Zd.loadGlyphRange=function(o,n,s,u,f){const m=256*n,_=m+255,x=u.transformRequest(u.normalizeGlyphsURL(s).replace("{fontstack}",o).replace("{range}",`${m}-${_}`),Ne.Glyphs);tn(x,(E,T)=>{if(E)f(E);else if(T){const A={},I=function(L){return new Sp(L).readFields(BF,{})}(T);for(const L of I.glyphs)A[L.id]=L;f(null,{glyphs:A,ascender:I.ascender,descender:I.descender})}})},Zd.TinySDF=class{constructor({fontSize:o=24,buffer:n=3,radius:s=8,cutoff:u=.25,fontFamily:f="sans-serif",fontWeight:m="normal",fontStyle:_="normal"}={}){this.buffer=n,this.cutoff=u,this.radius=s;const x=this.size=o+4*n,E=this._createCanvas(x),T=this.ctx=E.getContext("2d",{willReadFrequently:!0});T.font=`${_} ${m} ${o}px ${f}`,T.textBaseline="alphabetic",T.textAlign="left",T.fillStyle="black",this.gridOuter=new Float64Array(x*x),this.gridInner=new Float64Array(x*x),this.f=new Float64Array(x),this.z=new Float64Array(x+1),this.v=new Uint16Array(x)}_createCanvas(o){const n=document.createElement("canvas");return n.width=n.height=o,n}draw(o){const{width:n,actualBoundingBoxAscent:s,actualBoundingBoxDescent:u,actualBoundingBoxLeft:f,actualBoundingBoxRight:m}=this.ctx.measureText(o),_=Math.ceil(s),x=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(m-f))),E=Math.min(this.size-this.buffer,_+Math.ceil(u)),T=x+2*this.buffer,A=E+2*this.buffer,I=Math.max(T*A,0),L=new Uint8ClampedArray(I),N={data:L,width:T,height:A,glyphWidth:x,glyphHeight:E,glyphTop:_,glyphLeft:0,glyphAdvance:n};if(x===0||E===0)return N;const{ctx:V,buffer:X,gridInner:re,gridOuter:ge}=this;V.clearRect(X,X,x,E),V.fillText(o,X,X+_);const Te=V.getImageData(X,X,x,E);ge.fill(Tp,0,I),re.fill(0,0,I);for(let me=0;me<E;me++)for(let Se=0;Se<x;Se++){const Re=Te.data[4*(me*x+Se)+3]/255;if(Re===0)continue;const Ce=(me+X)*T+Se+X;if(Re===1)ge[Ce]=0,re[Ce]=Tp;else{const it=.5-Re;ge[Ce]=it>0?it*it:0,re[Ce]=it<0?it*it:0}}cM(ge,0,0,T,A,T,this.f,this.v,this.z),cM(re,X,X,x,E,T,this.f,this.v,this.z);for(let me=0;me<I;me++){const Se=Math.sqrt(ge[me])-Math.sqrt(re[me]);L[me]=Math.round(255-255*(Se/this.radius+this.cutoff))}return N}};class HF{constructor(n=[],s=ZF){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:u}=this,f=s[n];for(;n>0;){const m=n-1>>1,_=s[m];if(u(f,_)>=0)break;s[n]=_,n=m}s[n]=f}_down(n){const{data:s,compare:u}=this,f=this.length>>1,m=s[n];for(;n<f;){let _=1+(n<<1),x=s[_];const E=_+1;if(E<this.length&&u(s[E],x)<0&&(_=E,x=s[E]),u(x,m)>=0)break;s[n]=x,n=_}s[n]=m}}function ZF(o,n){return o<n?-1:o>n?1:0}function XF(o,n=1,s=!1){let u=1/0,f=1/0,m=-1/0,_=-1/0;const x=o[0];for(let N=0;N<x.length;N++){const V=x[N];(!N||V.x<u)&&(u=V.x),(!N||V.y<f)&&(f=V.y),(!N||V.x>m)&&(m=V.x),(!N||V.y>_)&&(_=V.y)}const E=Math.min(m-u,_-f);let T=E/2;const A=new HF([],KF);if(E===0)return new Y(u,f);for(let N=u;N<m;N+=E)for(let V=f;V<_;V+=E)A.push(new Xd(N+T,V+T,T,o));let I=function(N){let V=0,X=0,re=0;const ge=N[0];for(let Te=0,me=ge.length,Se=me-1;Te<me;Se=Te++){const Re=ge[Te],Ce=ge[Se],it=Re.x*Ce.y-Ce.x*Re.y;X+=(Re.x+Ce.x)*it,re+=(Re.y+Ce.y)*it,V+=3*it}return new Xd(X/V,re/V,0,N)}(o),L=A.length;for(;A.length;){const N=A.pop();(N.d>I.d||!I.d)&&(I=N,s&&console.log("found best %d after %d probes",Math.round(1e4*N.d)/1e4,L)),N.max-I.d<=n||(T=N.h/2,A.push(new Xd(N.p.x-T,N.p.y-T,T,o)),A.push(new Xd(N.p.x+T,N.p.y-T,T,o)),A.push(new Xd(N.p.x-T,N.p.y+T,T,o)),A.push(new Xd(N.p.x+T,N.p.y+T,T,o)),L+=4)}return s&&(console.log(`num probes: ${L}`),console.log(`best distance: ${I.d}`)),I.p}function KF(o,n){return n.max-o.max}class Xd{constructor(n,s,u,f){this.p=new Y(n,s),this.h=u,this.d=function(m,_){let x=!1,E=1/0;for(let T=0;T<_.length;T++){const A=_[T];for(let I=0,L=A.length,N=L-1;I<L;N=I++){const V=A[I],X=A[N];V.y>m.y!=X.y>m.y&&m.x<(X.x-V.x)*(m.y-V.y)/(X.y-V.y)+V.x&&(x=!x),E=Math.min(E,uC(m,V,X))}}return(x?1:-1)*Math.sqrt(E)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}}const Xx=Number.POSITIVE_INFINITY,YF=Math.sqrt(2);function fM(o,[n,s]){let u=0,f=0;if(s===Xx){n<0&&(n=0);const m=n/YF;switch(o){case"top-right":case"top-left":f=m-7;break;case"bottom-right":case"bottom-left":f=7-m;break;case"bottom":f=7-n;break;case"top":f=n-7}switch(o){case"top-right":case"bottom-right":u=-m;break;case"top-left":case"bottom-left":u=m;break;case"left":u=n;break;case"right":u=-n}}else{switch(n=Math.abs(n),s=Math.abs(s),o){case"top-right":case"top-left":case"top":f=s-7;break;case"bottom-right":case"bottom-left":case"bottom":f=7-s}switch(o){case"top-right":case"bottom-right":case"right":u=-n;break;case"top-left":case"bottom-left":case"left":u=n}}return[u,f]}function QF(o,n,s,u,f,m,_,x,E,T){o.createArrays(),o.tilePixelRatio=kn/(512*o.overscaling),o.compareText={},o.iconsNeedLinear=!1;const A=o.layers[0].layout,I=o.layers[0]._unevaluatedLayout._values,L={};if(o.textSizeData.kind==="composite"){const{minZoom:X,maxZoom:re}=o.textSizeData;L.compositeTextSizes=[I["text-size"].possiblyEvaluate(new He(X),x),I["text-size"].possiblyEvaluate(new He(re),x)]}if(o.iconSizeData.kind==="composite"){const{minZoom:X,maxZoom:re}=o.iconSizeData;L.compositeIconSizes=[I["icon-size"].possiblyEvaluate(new He(X),x),I["icon-size"].possiblyEvaluate(new He(re),x)]}L.layoutTextSize=I["text-size"].possiblyEvaluate(new He(E+1),x),L.layoutIconSize=I["icon-size"].possiblyEvaluate(new He(E+1),x),L.textMaxSize=I["text-size"].possiblyEvaluate(new He(18),x);const N=A.get("text-rotation-alignment")==="map"&&A.get("symbol-placement")!=="point",V=A.get("text-size");for(const X of o.features){const re=A.get("text-font").evaluate(X,{},x).join(","),ge=V.evaluate(X,{},x),Te=L.layoutTextSize.evaluate(X,{},x),me=(L.layoutIconSize.evaluate(X,{},x),{horizontal:{},vertical:void 0}),Se=X.text;let Re,Ce=[0,0];if(Se){const gt=Se.toString(),Pt=A.get("text-letter-spacing").evaluate(X,{},x)*ji,st=A.get("text-line-height").evaluate(X,{},x)*ji,vt=w(gt)?Pt:0,bt=A.get("text-anchor").evaluate(X,{},x),Mt=A.get("text-variable-anchor");if(!Mt){const Ht=A.get("text-radial-offset").evaluate(X,{},x);Ce=Ht?fM(bt,[Ht*ji,Xx]):A.get("text-offset").evaluate(X,{},x).map(sn=>sn*ji)}let Dt=N?"center":A.get("text-justify").evaluate(X,{},x);const ct=A.get("symbol-placement")==="point",Vt=ct?A.get("text-max-width").evaluate(X,{},x)*ji:1/0,xn=Ht=>{o.allowVerticalPlacement&&v(gt)&&(me.vertical=qx(Se,n,s,f,re,Vt,st,bt,Ht,vt,Ce,Go.vertical,!0,Te,ge))};if(!N&&Mt){const Ht=Dt==="auto"?Mt.map(jt=>Kx(jt)):[Dt];let sn=!1;for(let jt=0;jt<Ht.length;jt++){const Sn=Ht[jt];if(!me.horizontal[Sn])if(sn)me.horizontal[Sn]=me.horizontal[0];else{const Un=qx(Se,n,s,f,re,Vt,st,"center",Sn,vt,Ce,Go.horizontal,!1,Te,ge);Un&&(me.horizontal[Sn]=Un,sn=Un.positionedLines.length===1)}}xn("left")}else{if(Dt==="auto"&&(Dt=Kx(bt)),ct||A.get("text-writing-mode").indexOf("horizontal")>=0||!v(gt)){const Ht=qx(Se,n,s,f,re,Vt,st,bt,Dt,vt,Ce,Go.horizontal,!1,Te,ge);Ht&&(me.horizontal[Dt]=Ht)}xn(ct?"left":Dt)}}let it=!1;if(X.icon&&X.icon.name){const gt=u[X.icon.name];gt&&(Re=jF(f[X.icon.name],A.get("icon-offset").evaluate(X,{},x),A.get("icon-anchor").evaluate(X,{},x)),it=gt.sdf,o.sdfIcons===void 0?o.sdfIcons=gt.sdf:o.sdfIcons!==gt.sdf&&Ct("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(gt.pixelRatio!==o.pixelRatio||A.get("icon-rotate").constantOr(1)!==0)&&(o.iconsNeedLinear=!0))}const et=mM(me.horizontal)||me.vertical;o.iconsInText||(o.iconsInText=!!et&&et.iconsInText),(et||Re)&&JF(o,X,me,Re,u,L,Te,0,Ce,it,_,x,T)}m&&o.generateCollisionDebugBuffers(E,o.collisionBoxArray)}function Kx(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function JF(o,n,s,u,f,m,_,x,E,T,A,I,L){let N=m.textMaxSize.evaluate(n,{},I);N===void 0&&(N=_);const V=o.layers[0].layout,X=V.get("icon-offset").evaluate(n,{},I),re=mM(s.horizontal)||s.vertical,ge=L.name==="globe",Te=_/24,me=o.tilePixelRatio*N/24,Se=(vt=o.overscaling,o.zoom>18&&vt>2&&(vt>>=1),Math.max(kn/(512*vt),1)*V.get("symbol-spacing")),Re=V.get("text-padding")*o.tilePixelRatio,Ce=V.get("icon-padding")*o.tilePixelRatio,it=fe(V.get("text-max-angle")),et=V.get("text-rotation-alignment")==="map"&&V.get("symbol-placement")!=="point",gt=V.get("icon-rotation-alignment")==="map"&&V.get("symbol-placement")!=="point",Pt=V.get("symbol-placement"),st=Se/2;var vt;const bt=V.get("icon-text-fit");let Mt;u&&bt!=="none"&&(o.allowVerticalPlacement&&s.vertical&&(Mt=nM(u,s.vertical,bt,V.get("icon-text-fit-padding"),X,Te)),re&&(u=nM(u,re,bt,V.get("icon-text-fit-padding"),X,Te)));const Dt=(ct,Vt,xn)=>{if(Vt.x<0||Vt.x>=kn||Vt.y<0||Vt.y>=kn)return;let Ht=null;if(ge){const{x:sn,y:jt,z:Sn}=L.projectTilePoint(Vt.x,Vt.y,xn);Ht={anchor:new zs(sn,jt,Sn,0,void 0),up:L.upVector(xn,Vt.x,Vt.y)}}(function(sn,jt,Sn,Un,Bn,On,Mn,pr,In,Vn,_r,Lr,kr,Dr,Fr,Zr,Ri,mr,gi,ui,nr,Vr,xi,vr,ti){const Ki=sn.addToLineVertexArray(jt,Un);let Ii,Pi,co,Li,Os,Qd,Pp,Lp=0,GM=0,WM=0,qM=0,lb=-1,cb=-1;const ss={};let HM=nu("");const pu=Sn?Sn.anchor:jt;let ub=0,db=0;if(In._unevaluatedLayout.getValue("text-radial-offset")===void 0?[ub,db]=In.layout.get("text-offset").evaluate(nr,{},ti).map(ko=>ko*ji):(ub=In.layout.get("text-radial-offset").evaluate(nr,{},ti)*ji,db=Xx),sn.allowVerticalPlacement&&Bn.vertical){const ko=Bn.vertical;if(Fr)Qd=Yx(ko),pr&&(Pp=Yx(pr));else{const Ro=In.layout.get("text-rotate").evaluate(nr,{},ti)+90;co=u0(Vn,pu,jt,_r,Lr,kr,ko,Dr,Ro,Zr),pr&&(Li=u0(Vn,pu,jt,_r,Lr,kr,pr,mr,Ro))}}if(On){const ko=In.layout.get("icon-rotate").evaluate(nr,{},ti),Ro=In.layout.get("icon-text-fit")!=="none",Dp=dM(On,ko,xi,Ro),fb=pr?dM(pr,ko,xi,Ro):void 0;Pi=u0(Vn,pu,jt,_r,Lr,kr,On,mr,ko),Lp=4*Dp.length;const ZM=sn.iconSizeData;let mu=null;ZM.kind==="source"?(mu=[rs*In.layout.get("icon-size").evaluate(nr,{},ti)],mu[0]>zl&&Ct(`${sn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):ZM.kind==="composite"&&(mu=[rs*Vr.compositeIconSizes[0].evaluate(nr,{},ti),rs*Vr.compositeIconSizes[1].evaluate(nr,{},ti)],(mu[0]>zl||mu[1]>zl)&&Ct(`${sn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),sn.addSymbols(sn.icon,Dp,mu,ui,gi,nr,!1,Sn,jt,Ki.lineStartIndex,Ki.lineLength,-1,vr,ti),lb=sn.icon.placedSymbolArray.length-1,fb&&(GM=4*fb.length,sn.addSymbols(sn.icon,fb,mu,ui,gi,nr,Go.vertical,Sn,jt,Ki.lineStartIndex,Ki.lineLength,-1,vr,ti),cb=sn.icon.placedSymbolArray.length-1)}for(const ko in Bn.horizontal){const Ro=Bn.horizontal[ko];Ii||(HM=nu(Ro.text),Fr?Os=Yx(Ro):Ii=u0(Vn,pu,jt,_r,Lr,kr,Ro,Dr,In.layout.get("text-rotate").evaluate(nr,{},ti),Zr));const Dp=Ro.positionedLines.length===1;if(WM+=pM(sn,Sn,jt,Ro,Mn,In,Fr,nr,Zr,Ki,Bn.vertical?Go.horizontal:Go.horizontalOnly,Dp?Object.keys(Bn.horizontal):[ko],ss,lb,Vr,vr,ti),Dp)break}Bn.vertical&&(qM+=pM(sn,Sn,jt,Bn.vertical,Mn,In,Fr,nr,Zr,Ki,Go.vertical,["vertical"],ss,cb,Vr,vr,ti));let Ul=-1;const hb=(ko,Ro)=>ko?Math.max(ko,Ro):Ro;Ul=hb(Os,Ul),Ul=hb(Qd,Ul),Ul=hb(Pp,Ul);const MB=Ul>-1?1:0;sn.glyphOffsetArray.length>=Fl.MAX_GLYPHS&&Ct("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),nr.sortKey!==void 0&&sn.addToSortKeyRanges(sn.symbolInstances.length,nr.sortKey),sn.symbolInstances.emplaceBack(pu.x,pu.y,pu.z,jt.x,jt.y,ss.right>=0?ss.right:-1,ss.center>=0?ss.center:-1,ss.left>=0?ss.left:-1,ss.vertical>=0?ss.vertical:-1,lb,cb,HM,Ii!==void 0?Ii:sn.collisionBoxArray.length,Ii!==void 0?Ii+1:sn.collisionBoxArray.length,co!==void 0?co:sn.collisionBoxArray.length,co!==void 0?co+1:sn.collisionBoxArray.length,Pi!==void 0?Pi:sn.collisionBoxArray.length,Pi!==void 0?Pi+1:sn.collisionBoxArray.length,Li||sn.collisionBoxArray.length,Li?Li+1:sn.collisionBoxArray.length,_r,WM,qM,Lp,GM,MB,0,ub,db,Ul)})(o,Vt,Ht,ct,s,u,f,Mt,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,Re,et,E,0,Ce,gt,X,n,m,T,A,I)};if(Pt==="line")for(const ct of lM(n.geometry,0,0,kn,kn)){const Vt=WF(ct,Se,it,s.vertical||re,u,24,me,o.overscaling,kn);for(const xn of Vt){const Ht=re;Ht&&eB(o,Ht.text,st,xn)||Dt(ct,xn,I)}}else if(Pt==="line-center"){for(const ct of n.geometry)if(ct.length>1){const Vt=GF(ct,it,s.vertical||re,u,24,me);Vt&&Dt(ct,Vt,I)}}else if(n.type==="Polygon")for(const ct of Bx(n.geometry,0)){const Vt=XF(ct,16);Dt(ct[0],new zs(Vt.x,Vt.y,0,0,void 0),I)}else if(n.type==="LineString")for(const ct of n.geometry)Dt(ct,new zs(ct[0].x,ct[0].y,0,0,void 0),I);else if(n.type==="Point")for(const ct of n.geometry)for(const Vt of ct)Dt([Vt],new zs(Vt.x,Vt.y,0,0,void 0),I)}const zl=32640;function pM(o,n,s,u,f,m,_,x,E,T,A,I,L,N,V,X,re){const ge=function(Se,Re,Ce,it,et,gt,Pt,st){const vt=[];if(Re.positionedLines.length===0)return vt;const bt=it.layout.get("text-rotate").evaluate(gt,{})*Math.PI/180,Mt=function(Ht){const sn=Ht[0],jt=Ht[1],Sn=sn*jt;return Sn>0?[sn,-jt]:Sn<0?[-sn,jt]:sn===0?[jt,sn]:[jt,-sn]}(Ce);let Dt=Math.abs(Re.top-Re.bottom);for(const Ht of Re.positionedLines)Dt-=Ht.lineOffset;const ct=Re.positionedLines.length,Vt=Dt/ct;let xn=Re.top-Ce[1];for(let Ht=0;Ht<ct;++Ht){const sn=Re.positionedLines[Ht];xn=qF(Re,Vt,xn,Ht);for(const jt of sn.positionedGlyphs){if(!jt.rect)continue;const Sn=jt.rect||{};let Un=4,Bn=!0,On=1,Mn=0;if(jt.imageName){const vr=Pt[jt.imageName];if(!vr)continue;if(vr.sdf){Ct("SDF images are not supported in formatted text and will be ignored.");continue}Bn=!1,On=vr.pixelRatio,Un=1/On}const pr=(et||st)&&jt.vertical,In=jt.metrics.advance*jt.scale/2,Vn=jt.metrics,_r=jt.rect;if(_r===null)continue;st&&Re.verticalizable&&(Mn=jt.imageName?In-jt.metrics.width*jt.scale/2:0);const Lr=et?[jt.x+In,jt.y]:[0,0];let kr=[0,0],Dr=[0,0],Fr=!1;et||(pr?(Dr=[jt.x+In+Mt[0],jt.y+Mt[1]-Mn],Fr=!0):kr=[jt.x+In+Ce[0],jt.y+Ce[1]-Mn]);const Zr=_r.w*jt.scale/(On*(jt.localGlyph?2:1)),Ri=_r.h*jt.scale/(On*(jt.localGlyph?2:1));let mr,gi,ui,nr;if(pr){const vr=jt.y-xn,ti=new Y(-In,In-vr),Ki=-Math.PI/2,Ii=new Y(...Dr);mr=new Y(-In+kr[0],kr[1]),mr._rotateAround(Ki,ti)._add(Ii),mr.x+=-vr+In,mr.y-=(Vn.left-Un)*jt.scale;const Pi=jt.imageName?Vn.advance*jt.scale:ji*jt.scale,co=String.fromCharCode(jt.glyph);MF(co)?mr.x+=(1-Un)*jt.scale:AF(co)?mr.x+=Pi-Vn.height*jt.scale+(-Un-1)*jt.scale:mr.x+=jt.imageName||Vn.width+2*Un===_r.w&&Vn.height+2*Un===_r.h?(Pi-Ri)/2:(Pi-(Vn.height+2*Un)*jt.scale)/2,gi=new Y(mr.x,mr.y-Zr),ui=new Y(mr.x+Ri,mr.y),nr=new Y(mr.x+Ri,mr.y-Zr)}else{const vr=(Vn.left-Un)*jt.scale-In+kr[0],ti=(-Vn.top-Un)*jt.scale+kr[1],Ki=vr+Zr,Ii=ti+Ri;mr=new Y(vr,ti),gi=new Y(Ki,ti),ui=new Y(vr,Ii),nr=new Y(Ki,Ii)}if(bt){let vr;vr=et?new Y(0,0):Fr?new Y(Mt[0],Mt[1]):new Y(Ce[0],Ce[1]),mr._rotateAround(bt,vr),gi._rotateAround(bt,vr),ui._rotateAround(bt,vr),nr._rotateAround(bt,vr)}const Vr=new Y(0,0),xi=new Y(0,0);vt.push({tl:mr,tr:gi,bl:ui,br:nr,tex:Sn,writingMode:Re.writingMode,glyphOffset:Lr,sectionIndex:jt.sectionIndex,isSDF:Bn,pixelOffsetTL:Vr,pixelOffsetBR:xi,minFontScaleX:0,minFontScaleY:0})}}return vt}(0,u,E,m,_,x,f,o.allowVerticalPlacement),Te=o.textSizeData;let me=null;Te.kind==="source"?(me=[rs*m.layout.get("text-size").evaluate(x,{},re)],me[0]>zl&&Ct(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Te.kind==="composite"&&(me=[rs*V.compositeTextSizes[0].evaluate(x,{},re),rs*V.compositeTextSizes[1].evaluate(x,{},re)],(me[0]>zl||me[1]>zl)&&Ct(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),o.addSymbols(o.text,ge,me,E,_,x,A,n,s,T.lineStartIndex,T.lineLength,N,X,re);for(const Se of I)L[Se]=o.text.placedSymbolArray.length-1;return 4*ge.length}function mM(o){for(const n in o)return o[n];return null}function u0(o,n,s,u,f,m,_,x,E,T){let A=_.top,I=_.bottom,L=_.left,N=_.right;const V=_.collisionPadding;if(V&&(L-=V[0],A-=V[1],N+=V[2],I+=V[3]),E){const X=new Y(L,A),re=new Y(N,A),ge=new Y(L,I),Te=new Y(N,I),me=fe(E);let Se=new Y(0,0);T&&(Se=new Y(T[0],T[1])),X._rotateAround(me,Se),re._rotateAround(me,Se),ge._rotateAround(me,Se),Te._rotateAround(me,Se),L=Math.min(X.x,re.x,ge.x,Te.x),N=Math.max(X.x,re.x,ge.x,Te.x),A=Math.min(X.y,re.y,ge.y,Te.y),I=Math.max(X.y,re.y,ge.y,Te.y)}return o.emplaceBack(n.x,n.y,n.z,s.x,s.y,L,A,N,I,x,u,f,m),o.length-1}function Yx(o){o.collisionPadding&&(o.top-=o.collisionPadding[1],o.bottom+=o.collisionPadding[3]);const n=o.bottom-o.top;return n>0?Math.max(10,n):null}function eB(o,n,s,u){const f=o.compareText;if(n in f){const m=f[n];for(let _=m.length-1;_>=0;_--)if(u.dist(m[_])<s)return!0}else f[n]=[];return f[n].push(u),!1}function gM(o,n){const s=o.fovAboveCenter,u=o.elevation?o.elevation.getMinElevationBelowMSL()*n:0,f=(o._camera.position[2]*o.worldSize-u)/Math.cos(o._pitch),m=Math.sin(s)*f/Math.sin(Math.max(Math.PI/2-o._pitch-s,.01)),_=Math.sin(o._pitch)*m+f;return Math.min(1.01*_,f*(1/o._horizonShift))}function hu(o,n){if(!n.isReprojectedInTileSpace)return{scale:1<<o.z,x:o.x,y:o.y,x2:o.x+1,y2:o.y+1,projection:n};const s=Math.pow(2,-o.z),u=o.x*s,f=(o.x+1)*s,m=o.y*s,_=(o.y+1)*s,x=jo(u),E=jo(f),T=Ui(m),A=Ui(_),I=n.project(x,T),L=n.project(E,T),N=n.project(E,A),V=n.project(x,A);let X=Math.min(I.x,L.x,N.x,V.x),re=Math.min(I.y,L.y,N.y,V.y),ge=Math.max(I.x,L.x,N.x,V.x),Te=Math.max(I.y,L.y,N.y,V.y);const me=s/16;function Se(Ce,it,et,gt,Pt,st){const vt=(et+Pt)/2,bt=(gt+st)/2,Mt=n.project(jo(vt),Ui(bt)),Dt=Math.max(0,X-Mt.x,re-Mt.y,Mt.x-ge,Mt.y-Te);X=Math.min(X,Mt.x),ge=Math.max(ge,Mt.x),re=Math.min(re,Mt.y),Te=Math.max(Te,Mt.y),Dt>me&&(Se(Ce,Mt,et,gt,vt,bt),Se(Mt,it,vt,bt,Pt,st))}Se(I,L,u,m,f,m),Se(L,N,f,m,f,_),Se(N,V,f,_,u,_),Se(V,I,u,_,u,m),X-=me,re-=me,ge+=me,Te+=me;const Re=1/Math.max(ge-X,Te-re);return{scale:Re,x:X*Re,y:re*Re,x2:ge*Re,y2:Te*Re,projection:n}}const tB=ka(new Float32Array(16));class Ol{constructor(n){this.spec=n,this.name=n.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(n,s){return{x:0,y:0,z:0}}unproject(n,s){return new er(0,0)}projectTilePoint(n,s,u){return{x:n,y:s,z:0}}locationPoint(n,s,u=!0){return n._coordinatePoint(n.locationCoordinate(s),u)}pixelsPerMeter(n,s){return Ia(1,n)*s}pixelSpaceConversion(n,s,u){return 1}farthestPixelDistance(n){return gM(n,n.pixelsPerMeter)}pointCoordinate(n,s,u,f){const m=n.horizonLineFromTop(!1),_=new Y(s,Math.max(m,u));return n.rayIntersectionCoordinate(n.pointRayIntersection(_,f))}pointCoordinate3D(n,s,u){const f=new Y(s,u);if(n.elevation)return n.elevation.pointCoordinate(f);{const m=this.pointCoordinate(n,f.x,f.y,0);return[m.x,m.y,m.z]}}isPointAboveHorizon(n,s){if(n.elevation)return!this.pointCoordinate3D(n,s.x,s.y);const u=n.horizonLineFromTop();return s.y<u}createInversionMatrix(n,s){return tB}createTileMatrix(n,s,u){let f,m,_;const x=u.canonical,E=ka(new Float64Array(16));if(this.isReprojectedInTileSpace){const T=hu(x,this);f=1,m=T.x+u.wrap*T.scale,_=T.y,ou(E,E,[f/T.scale,f/T.scale,n.pixelsPerMeter/s])}else f=s/n.zoomScale(x.z),m=(x.x+Math.pow(2,x.z)*u.wrap)*f,_=x.y*f;return np(E,E,[m,_,0]),ou(E,E,[f/kn,f/kn,1]),E}upVector(n,s,u){return[0,0,1]}upVectorScale(n,s,u){return{metersToTile:1}}}class nB extends Ol{constructor(n){super(n),this.range=[4,7],this.center=n.center||[-96,37.5];const[s,u]=this.parallels=n.parallels||[29.5,45.5],f=Math.sin(fe(s));this.n=(f+Math.sin(fe(u)))/2,this.c=1+f*(2*this.n-f),this.r0=Math.sqrt(this.c)/this.n}project(n,s){const{n:u,c:f,r0:m}=this,_=fe(n-this.center[0]),x=fe(s),E=Math.sqrt(f-2*u*Math.sin(x))/u;return{x:E*Math.sin(_*u),y:E*Math.cos(_*u)-m,z:0}}unproject(n,s){const{n:u,c:f,r0:m}=this,_=m+s;let x=Math.atan2(n,Math.abs(_))*Math.sign(_);_*u<0&&(x-=Math.PI*Math.sign(n)*Math.sign(_));const E=fe(this.center[0])*u;x=_t(x,-Math.PI-E,Math.PI-E);const T=ze($(x/u)+this.center[0],-180,180),A=Math.asin(ze((f-(n*n+_*_)*u*u)/(2*u),-1,1)),I=ze($(A),-Vi,Vi);return new er(T,I)}}const Cp=1.340264,Mp=-.081106,Ap=893e-6,kp=.003796,d0=Math.sqrt(3)/2;class rB extends Ol{project(n,s){s=s/180*Math.PI,n=n/180*Math.PI;const u=Math.asin(d0*Math.sin(s)),f=u*u,m=f*f*f;return{x:.5*(n*Math.cos(u)/(d0*(Cp+3*Mp*f+m*(7*Ap+9*kp*f)))/Math.PI+.5),y:1-.5*(u*(Cp+Mp*f+m*(Ap+kp*f))/Math.PI+1),z:0}}unproject(n,s){n=(2*n-.5)*Math.PI;let u=s=(2*(1-s)-1)*Math.PI,f=u*u,m=f*f*f;for(let A,I,L,N=0;N<12&&(I=u*(Cp+Mp*f+m*(Ap+kp*f))-s,L=Cp+3*Mp*f+m*(7*Ap+9*kp*f),A=I/L,u=ze(u-A,-Math.PI/3,Math.PI/3),f=u*u,m=f*f*f,!(Math.abs(A)<1e-12));++N);const _=d0*n*(Cp+3*Mp*f+m*(7*Ap+9*kp*f))/Math.cos(u),x=Math.asin(Math.sin(u)/d0),E=ze(180*_/Math.PI,-180,180),T=ze(180*x/Math.PI,-Vi,Vi);return new er(E,T)}}class iB extends Ol{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0}project(n,s){return{x:.5+n/360,y:.5-s/360,z:0}}unproject(n,s){const u=360*(n-.5),f=ze(360*(.5-s),-Vi,Vi);return new er(u,f)}}const Kd=Math.PI/2;function h0(o){return Math.tan((Kd+o)/2)}class oB extends Ol{constructor(n){super(n),this.center=n.center||[0,30];const[s,u]=this.parallels=n.parallels||[30,30];let f=fe(s),m=fe(u);this.southernCenter=f+m<0,this.southernCenter&&(f=-f,m=-m);const _=Math.cos(f),x=h0(f);this.n=f===m?Math.sin(f):Math.log(_/Math.cos(m))/Math.log(h0(m)/x),this.f=_*Math.pow(h0(f),this.n)/this.n}project(n,s){s=fe(s),this.southernCenter&&(s=-s),n=fe(n-this.center[0]);const u=1e-6,{n:f,f:m}=this;m>0?s<-Kd+u&&(s=-Kd+u):s>Kd-u&&(s=Kd-u);const _=m/Math.pow(h0(s),f);let x=_*Math.sin(f*n),E=m-_*Math.cos(f*n);return x=.5*(x/Math.PI+.5),E=.5*(E/Math.PI+.5),{x,y:this.southernCenter?E:1-E,z:0}}unproject(n,s){n=(2*n-.5)*Math.PI,this.southernCenter&&(s=1-s),s=(2*(1-s)-.5)*Math.PI;const{n:u,f}=this,m=f-s,_=Math.sign(m),x=Math.sign(u)*Math.sqrt(n*n+m*m);let E=Math.atan2(n,Math.abs(m))*_;m*u<0&&(E-=Math.PI*Math.sign(n)*_);const T=ze($(E/u)+this.center[0],-180,180),A=ze($(2*Math.atan(Math.pow(f/x,1/u))-Kd),-Vi,Vi);return new er(T,this.southernCenter?-A:A)}}class yM extends Ol{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(n,s){return{x:ts(n),y:ns(s),z:0}}unproject(n,s){const u=jo(n),f=Ui(s);return new er(u,f)}}const _M=fe(Vi);class aB extends Ol{project(n,s){const u=(s=fe(s))*s,f=u*u;return{x:.5*((n=fe(n))*(.8707-.131979*u+f*(f*(.003971*u-.001529*f)-.013791))/Math.PI+.5),y:1-.5*(s*(1.007226+u*(.015085+f*(.028874*u-.044475-.005916*f)))/Math.PI+1),z:0}}unproject(n,s){n=(2*n-.5)*Math.PI;let u=s=(2*(1-s)-1)*Math.PI,f=25,m=0,_=u*u;do{_=u*u;const T=_*_;m=(u*(1.007226+_*(.015085+T*(.028874*_-.044475-.005916*T)))-s)/(1.007226+_*(.045255+T*(.259866*_-.311325-.005916*11*T))),u=ze(u-m,-_M,_M)}while(Math.abs(m)>1e-6&&--f>0);_=u*u;const x=ze($(n/(.8707+_*(_*(_*_*_*(.003971-.001529*_)-.013791)-.131979))),-180,180),E=$(u);return new er(x,E)}}const vM=fe(Vi);class sB extends Ol{project(n,s){s=fe(s),n=fe(n);const u=Math.cos(s),f=2/Math.PI,m=Math.acos(u*Math.cos(n/2)),_=Math.sin(m)/m,x=.5*(n*f+2*u*Math.sin(n/2)/_)||0,E=.5*(s+Math.sin(s)/_)||0;return{x:.5*(x/Math.PI+.5),y:1-.5*(E/Math.PI+1),z:0}}unproject(n,s){let u=n=(2*n-.5)*Math.PI,f=s=(2*(1-s)-1)*Math.PI,m=25;const _=1e-6;let x=0,E=0;do{const T=Math.cos(f),A=Math.sin(f),I=2*A*T,L=A*A,N=T*T,V=Math.cos(u/2),X=Math.sin(u/2),re=2*V*X,ge=X*X,Te=1-N*V*V,me=Te?1/Te:0,Se=Te?Math.acos(T*V)*Math.sqrt(1/Te):0,Re=.5*(2*Se*T*X+2*u/Math.PI)-n,Ce=.5*(Se*A+f)-s,it=.5*me*(N*ge+Se*T*V*L)+1/Math.PI,et=me*(re*I/4-Se*A*X),gt=.125*me*(I*X-Se*A*N*re),Pt=.5*me*(L*V+Se*ge*T)+.5,st=et*gt-Pt*it;x=(Ce*et-Re*Pt)/st,E=(Re*gt-Ce*it)/st,u=ze(u-x,-Math.PI,Math.PI),f=ze(f-E,-vM,vM)}while((Math.abs(x)>_||Math.abs(E)>_)&&--m>0);return new er($(u),$(f))}}class xM extends Ol{constructor(n){super(n),this.center=n.center||[0,0],this.parallels=n.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(fe(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(n,s){const{scale:u,cosPhi:f}=this;return{x:fe(n)*f*u+.5,y:-Math.sin(fe(s))/f*u+.5,z:0}}unproject(n,s){const{scale:u,cosPhi:f}=this,m=-(s-.5)/u,_=ze($((n-.5)/u)/f,-180,180),x=Math.asin(ze(m*f,-1,1)),E=ze($(x),-Vi,Vi);return new er(_,E)}}class lB extends yM{constructor(n){super(n),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(n,s,u){const f=up(n,s,u);return ei(f,f,dp(es(u))),{x:f[0],y:f[1],z:f[2]}}locationPoint(n,s){const u=Od(s.lat,s.lng),f=ao([],u),m=n.elevation?n.elevation.getAtPointOrZero(n.locationCoordinate(s),n._centerAltitude):n._centerAltitude;ap(u,u,f,Ia(1,0)*kn*m);const _=ka(new Float64Array(16));return iu(_,n.pixelMatrix,n.globeMatrix),ei(u,u,_),new Y(u[0],u[1])}pixelsPerMeter(n,s){return Ia(1,0)*s}pixelSpaceConversion(n,s,u){const f=Ia(1,n)*s,m=Kn(Ia(1,45)*s,f,u);return this.pixelsPerMeter(n,s)/m}createTileMatrix(n,s,u){const f=Ex(es(u.canonical));return iu(new Float64Array(16),n.globeMatrix,f)}createInversionMatrix(n,s){const{center:u}=n,f=dp(es(s));return Uy(f,f,fe(u.lng)),mx(f,f,fe(u.lat)),ou(f,f,[n._pixelsPerMercatorPixel,n._pixelsPerMercatorPixel,1]),Float32Array.from(f)}pointCoordinate(n,s,u,f){return KT(n,s,u,!0)||new Bd(0,0)}pointCoordinate3D(n,s,u){const f=this.pointCoordinate(n,s,u,0);return[f.x,f.y,f.z]}isPointAboveHorizon(n,s){return!KT(n,s.x,s.y,!1)}farthestPixelDistance(n){const s=function(f,m){const _=f.cameraToCenterDistance,x=f._centerAltitude*m,E=f._camera,T=f._camera.forward(),A=Is([],Vo([],T,-_),[0,0,x]),I=f.worldSize/(2*Math.PI),L=[0,0,-I],N=f.width/f.height,V=Math.tan(f.fovAboveCenter),X=Vo([],E.up(),V),re=Vo([],E.right(),V*N),ge=ao([],Is([],Is([],T,X),re)),Te=[];let me;if(new vx(A,ge).closestPointOnSphere(L,I,Te)){const Se=Is([],Te,L),Re=Ra([],Se,A);me=Math.cos(f.fovAboveCenter)*rp(Re)}else{const Se=Ra([],A,L),Re=Ra([],L,A);ao(Re,Re);const Ce=rp(Se)-I;me=Math.sqrt(Ce*(Ce+2*I));const it=Math.acos(me/(I+Ce))-Math.acos(aa(T,Re));me*=Math.cos(it)}return 1.01*me}(n,this.pixelsPerMeter(n.center.lat,n.worldSize)),u=Fd(n.zoom);if(u>0){const f=gM(n,Ia(1,n.center.lat)*n.worldSize),m=n.worldSize/(2*Math.PI),_=Math.max(n.width,n.height)/n.worldSize*Math.PI;return Kn(s,f+m*(1-Math.cos(_)),Math.pow(u,10))}return s}upVector(n,s,u){return up(s,u,n,1)}upVectorScale(n){return{metersToTile:Vy(Gy(es(n)))}}}function bM(o){const n=o.parallels,s=!!n&&Math.abs(n[0]+n[1])<.01;switch(o.name){case"mercator":return new yM(o);case"equirectangular":return new iB(o);case"naturalEarth":return new aB(o);case"equalEarth":return new rB(o);case"winkelTripel":return new sB(o);case"albers":return s?new xM(o):new nB(o);case"lambertConformalConic":return s?new xM(o):new oB(o);case"globe":return new lB(o)}throw new Error(`Invalid projection name: ${o.name}`)}const cB=e0.types,uB=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function f0(o,n,s,u,f,m,_,x,E,T,A,I,L){const N=x?Math.min(zl,Math.round(x[0])):0,V=x?Math.min(zl,Math.round(x[1])):0;o.emplaceBack(n,s,Math.round(32*u),Math.round(32*f),m,_,(N<<1)+(E?1:0),V,16*T,16*A,256*I,256*L)}function p0(o,n,s,u,f,m,_){o.emplaceBack(n,s,u,f,m,_)}function m0(o,n,s,u,f){o.emplaceBack(n,s,u,f),o.emplaceBack(n,s,u,f),o.emplaceBack(n,s,u,f),o.emplaceBack(n,s,u,f)}function dB(o){for(const n of o.sections)if(W(n.text))return!0;return!1}class Qx{constructor(n){this.layoutVertexArray=new Ta,this.indexArray=new $i,this.programConfigurations=n,this.segments=new li,this.dynamicLayoutVertexArray=new wr,this.opacityVertexArray=new Sr,this.placedSymbolArray=new wT,this.globeExtVertexArray=new Or}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,u,f){this.isEmpty()||(u&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,vF.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,bF.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,uB,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,xF.members,!0)),this.opacityVertexBuffer.itemSize=1),(u||f)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}nn(Qx,"SymbolBuffers");class Jx{constructor(n,s,u){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new u,this.segments=new li,this.collisionVertexArray=new Pr,this.collisionVertexArrayExt=new Ni}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,wF.members,!0),this.collisionVertexBufferExt=n.createVertexBuffer(this.collisionVertexArrayExt,SF.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}nn(Jx,"CollisionBuffers");class Fl{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(_=>_.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ka([]),this.placementViewportMatrix=ka([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Vx(this.zoom,s["text-size"]),this.iconSizeData=Vx(this.zoom,s["icon-size"]);const u=this.layers[0].layout,f=u.get("symbol-sort-key"),m=u.get("symbol-z-order");this.canOverlap=u.get("text-allow-overlap")||u.get("icon-allow-overlap")||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=m!=="viewport-y"&&f.constantOr(1)!==void 0,this.sortFeaturesByY=(m==="viewport-y"||m==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=u.get("text-writing-mode").map(_=>Go[_]),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=n.sourceID,this.projection=n.projection}createArrays(){this.text=new Qx(new ru(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new Qx(new ru(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new TT,this.lineVertexArray=new CT,this.symbolInstances=new ET}calculateGlyphDependencies(n,s,u,f,m){for(let _=0;_<n.length;_++)if(s[n.charCodeAt(_)]=!0,f&&m){const x=wp[n.charAt(_)];x&&(s[x.charCodeAt(0)]=!0)}}populate(n,s,u,f){const m=this.layers[0],_=m.layout,x=this.projection.name==="globe",E=_.get("text-font"),T=_.get("text-field"),A=_.get("icon-image"),I=(T.value.kind!=="constant"||T.value.value instanceof io&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(E.value.kind!=="constant"||E.value.value.length>0),L=A.value.kind!=="constant"||!!A.value.value||Object.keys(A.parameters).length>0,N=_.get("symbol-sort-key");if(this.features=[],!I&&!L)return;const V=s.iconDependencies,X=s.glyphDependencies,re=s.availableImages,ge=new He(this.zoom);for(const{feature:Te,id:me,index:Se,sourceLayerIndex:Re}of n){const Ce=m._featureFilter.needGeometry,it=cu(Te,Ce);if(!m._featureFilter.filter(ge,it,u))continue;if(Ce||(it.geometry=Ps(Te,u,f)),x&&Te.type!==1&&u.z<=5){const st=it.geometry,vt=.98078528056,bt=(Mt,Dt)=>aa(up(Mt.x,Mt.y,u,1),up(Dt.x,Dt.y,u,1))<vt;for(let Mt=0;Mt<st.length;Mt++)st[Mt]=b5(st[Mt],bt)}let et,gt;if(I){const st=m.getValueAndResolveTokens("text-field",it,u,re),vt=io.factory(st);dB(vt)&&(this.hasRTLText=!0),(!this.hasRTLText||Ie()==="unavailable"||this.hasRTLText&&Fe.isParsed())&&(et=CF(vt,m,it))}if(L){const st=m.getValueAndResolveTokens("icon-image",it,u,re);gt=st instanceof Xi?st:Xi.fromString(st)}if(!et&&!gt)continue;const Pt=this.sortFeaturesByKey?N.evaluate(it,{},u):void 0;if(this.features.push({id:me,text:et,icon:gt,index:Se,sourceLayerIndex:Re,geometry:it.geometry,properties:Te.properties,type:cB[Te.type],sortKey:Pt}),gt&&(V[gt.name]=!0),et){const st=E.evaluate(it,{},u).join(","),vt=_.get("text-rotation-alignment")==="map"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Go.vertical)>=0;for(const bt of et.sections)if(bt.image)V[bt.image.name]=!0;else{const Mt=v(et.toString()),Dt=bt.fontStack||st,ct=X[Dt]=X[Dt]||{};this.calculateGlyphDependencies(bt.text,ct,vt,this.allowVerticalPlacement,Mt)}}}_.get("symbol-placement")==="line"&&(this.features=function(Te){const me={},Se={},Re=[];let Ce=0;function it(st){Re.push(Te[st]),Ce++}function et(st,vt,bt){const Mt=Se[st];return delete Se[st],Se[vt]=Mt,Re[Mt].geometry[0].pop(),Re[Mt].geometry[0]=Re[Mt].geometry[0].concat(bt[0]),Mt}function gt(st,vt,bt){const Mt=me[vt];return delete me[vt],me[st]=Mt,Re[Mt].geometry[0].shift(),Re[Mt].geometry[0]=bt[0].concat(Re[Mt].geometry[0]),Mt}function Pt(st,vt,bt){const Mt=bt?vt[0][vt[0].length-1]:vt[0][0];return`${st}:${Mt.x}:${Mt.y}`}for(let st=0;st<Te.length;st++){const vt=Te[st],bt=vt.geometry,Mt=vt.text?vt.text.toString():null;if(!Mt){it(st);continue}const Dt=Pt(Mt,bt),ct=Pt(Mt,bt,!0);if(Dt in Se&&ct in me&&Se[Dt]!==me[ct]){const Vt=gt(Dt,ct,bt),xn=et(Dt,ct,Re[Vt].geometry);delete me[Dt],delete Se[ct],Se[Pt(Mt,Re[xn].geometry,!0)]=xn,Re[Vt].geometry=null}else Dt in Se?et(Dt,ct,bt):ct in me?gt(Dt,ct,bt):(it(st),me[Dt]=Ce-1,Se[ct]=Ce-1)}return Re.filter(st=>st.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Te,me)=>Te.sortKey-me.sortKey)}update(n,s,u,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,u,f),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,u,f))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=bM(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const u=this.lineVertexArray.length;if(n.segment!==void 0)for(const{x:f,y:m}of s)this.lineVertexArray.emplaceBack(f,m);return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(n,s,u,f,m,_,x,E,T,A,I,L,N,V){const X=n.indexArray,re=n.layoutVertexArray,ge=n.globeExtVertexArray,Te=n.segments.prepareSegment(4*s.length,re,X,this.canOverlap?_.sortKey:void 0),me=this.glyphOffsetArray.length,Se=Te.vertexLength,Re=this.allowVerticalPlacement&&x===Go.vertical?Math.PI/2:0,Ce=_.text&&_.text.sections;for(let et=0;et<s.length;et++){const{tl:gt,tr:Pt,bl:st,br:vt,tex:bt,pixelOffsetTL:Mt,pixelOffsetBR:Dt,minFontScaleX:ct,minFontScaleY:Vt,glyphOffset:xn,isSDF:Ht,sectionIndex:sn}=s[et],jt=Te.vertexLength,Sn=xn[1];if(f0(re,T.x,T.y,gt.x,Sn+gt.y,bt.x,bt.y,u,Ht,Mt.x,Mt.y,ct,Vt),f0(re,T.x,T.y,Pt.x,Sn+Pt.y,bt.x+bt.w,bt.y,u,Ht,Dt.x,Mt.y,ct,Vt),f0(re,T.x,T.y,st.x,Sn+st.y,bt.x,bt.y+bt.h,u,Ht,Mt.x,Dt.y,ct,Vt),f0(re,T.x,T.y,vt.x,Sn+vt.y,bt.x+bt.w,bt.y+bt.h,u,Ht,Dt.x,Dt.y,ct,Vt),E){const{x:Un,y:Bn,z:On}=E.anchor,[Mn,pr,In]=E.up;p0(ge,Un,Bn,On,Mn,pr,In),p0(ge,Un,Bn,On,Mn,pr,In),p0(ge,Un,Bn,On,Mn,pr,In),p0(ge,Un,Bn,On,Mn,pr,In),m0(n.dynamicLayoutVertexArray,Un,Bn,On,Re)}else m0(n.dynamicLayoutVertexArray,T.x,T.y,T.z,Re);X.emplaceBack(jt,jt+1,jt+2),X.emplaceBack(jt+1,jt+2,jt+3),Te.vertexLength+=4,Te.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(xn[0]),et!==s.length-1&&sn===s[et+1].sectionIndex||n.programConfigurations.populatePaintArrays(re.length,_,_.index,{},N,V,Ce&&Ce[sn])}const it=E?E.anchor:T;n.placedSymbolArray.emplaceBack(it.x,it.y,it.z,T.x,T.y,me,this.glyphOffsetArray.length-me,Se,A,I,T.segment,u?u[0]:0,u?u[1]:0,f[0],f[1],x,0,!1,0,L,0)}_commitLayoutVertex(n,s,u,f,m,_,x){n.emplaceBack(s,u,f,m,_,Math.round(x.x),Math.round(x.y))}_addCollisionDebugVertices(n,s,u,f,m,_,x){const E=u.segments.prepareSegment(4,u.layoutVertexArray,u.indexArray),T=E.vertexLength,A=x.tileAnchorX,I=x.tileAnchorY;for(let N=0;N<4;N++)u.collisionVertexArray.emplaceBack(0,0,0,0);u.collisionVertexArrayExt.emplaceBack(s,-n.padding,-n.padding),u.collisionVertexArrayExt.emplaceBack(s,n.padding,-n.padding),u.collisionVertexArrayExt.emplaceBack(s,n.padding,n.padding),u.collisionVertexArrayExt.emplaceBack(s,-n.padding,n.padding),this._commitLayoutVertex(u.layoutVertexArray,f,m,_,A,I,new Y(n.x1,n.y1)),this._commitLayoutVertex(u.layoutVertexArray,f,m,_,A,I,new Y(n.x2,n.y1)),this._commitLayoutVertex(u.layoutVertexArray,f,m,_,A,I,new Y(n.x2,n.y2)),this._commitLayoutVertex(u.layoutVertexArray,f,m,_,A,I,new Y(n.x1,n.y2)),E.vertexLength+=4;const L=u.indexArray;L.emplaceBack(T,T+1),L.emplaceBack(T+1,T+2),L.emplaceBack(T+2,T+3),L.emplaceBack(T+3,T),E.primitiveLength+=4}_addTextDebugCollisionBoxes(n,s,u,f,m,_){for(let x=f;x<m;x++){const E=u.get(x),T=this.getSymbolInstanceTextSize(n,_,s,x);this._addCollisionDebugVertices(E,T,this.textCollisionBox,E.projectedAnchorX,E.projectedAnchorY,E.projectedAnchorZ,_)}}_addIconDebugCollisionBoxes(n,s,u,f,m,_){for(let x=f;x<m;x++){const E=u.get(x),T=this.getSymbolInstanceIconSize(n,s,_.placedIconSymbolIndex);this._addCollisionDebugVertices(E,T,this.iconCollisionBox,E.projectedAnchorX,E.projectedAnchorY,E.projectedAnchorZ,_)}}generateCollisionDebugBuffers(n,s){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Jx(Hr,jC.members,Ya),this.iconCollisionBox=new Jx(Hr,jC.members,Ya);const u=Gd(this.iconSizeData,n),f=Gd(this.textSizeData,n);for(let m=0;m<this.symbolInstances.length;m++){const _=this.symbolInstances.get(m);this._addTextDebugCollisionBoxes(f,n,s,_.textBoxStartIndex,_.textBoxEndIndex,_),this._addTextDebugCollisionBoxes(f,n,s,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_),this._addIconDebugCollisionBoxes(u,n,s,_.iconBoxStartIndex,_.iconBoxEndIndex,_),this._addIconDebugCollisionBoxes(u,n,s,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex,_)}}getSymbolInstanceTextSize(n,s,u,f){const m=this.text.placedSymbolArray.get(s.rightJustifiedTextSymbolIndex>=0?s.rightJustifiedTextSymbolIndex:s.centerJustifiedTextSymbolIndex>=0?s.centerJustifiedTextSymbolIndex:s.leftJustifiedTextSymbolIndex>=0?s.leftJustifiedTextSymbolIndex:s.verticalPlacedTextSymbolIndex>=0?s.verticalPlacedTextSymbolIndex:f),_=i0(this.textSizeData,n,m)/ji;return this.tilePixelRatio*_}getSymbolInstanceIconSize(n,s,u){const f=this.icon.placedSymbolArray.get(u),m=i0(this.iconSizeData,n,f);return this.tilePixelRatio*m}_commitDebugCollisionVertexUpdate(n,s,u){n.emplaceBack(s,-u,-u),n.emplaceBack(s,u,-u),n.emplaceBack(s,u,u),n.emplaceBack(s,-u,u)}_updateTextDebugCollisionBoxes(n,s,u,f,m,_){for(let x=f;x<m;x++){const E=u.get(x),T=this.getSymbolInstanceTextSize(n,_,s,x);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,T,E.padding)}}_updateIconDebugCollisionBoxes(n,s,u,f,m,_){for(let x=f;x<m;x++){const E=u.get(x),T=this.getSymbolInstanceIconSize(n,s,_);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,T,E.padding)}}updateCollisionDebugBuffers(n,s){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const u=Gd(this.iconSizeData,n),f=Gd(this.textSizeData,n);for(let m=0;m<this.symbolInstances.length;m++){const _=this.symbolInstances.get(m);this._updateTextDebugCollisionBoxes(f,n,s,_.textBoxStartIndex,_.textBoxEndIndex,_),this._updateTextDebugCollisionBoxes(f,n,s,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_),this._updateIconDebugCollisionBoxes(u,n,s,_.iconBoxStartIndex,_.iconBoxEndIndex,_.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(u,n,s,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex,_.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(n,s,u,f,m,_,x,E,T){const A={};if(s<u){const{x1:I,y1:L,x2:N,y2:V,padding:X,projectedAnchorX:re,projectedAnchorY:ge,projectedAnchorZ:Te,tileAnchorX:me,tileAnchorY:Se,featureIndex:Re}=n.get(s);A.textBox={x1:I,y1:L,x2:N,y2:V,padding:X,projectedAnchorX:re,projectedAnchorY:ge,projectedAnchorZ:Te,tileAnchorX:me,tileAnchorY:Se},A.textFeatureIndex=Re}if(f<m){const{x1:I,y1:L,x2:N,y2:V,padding:X,projectedAnchorX:re,projectedAnchorY:ge,projectedAnchorZ:Te,tileAnchorX:me,tileAnchorY:Se,featureIndex:Re}=n.get(f);A.verticalTextBox={x1:I,y1:L,x2:N,y2:V,padding:X,projectedAnchorX:re,projectedAnchorY:ge,projectedAnchorZ:Te,tileAnchorX:me,tileAnchorY:Se},A.verticalTextFeatureIndex=Re}if(_<x){const{x1:I,y1:L,x2:N,y2:V,padding:X,projectedAnchorX:re,projectedAnchorY:ge,projectedAnchorZ:Te,tileAnchorX:me,tileAnchorY:Se,featureIndex:Re}=n.get(_);A.iconBox={x1:I,y1:L,x2:N,y2:V,padding:X,projectedAnchorX:re,projectedAnchorY:ge,projectedAnchorZ:Te,tileAnchorX:me,tileAnchorY:Se},A.iconFeatureIndex=Re}if(E<T){const{x1:I,y1:L,x2:N,y2:V,padding:X,projectedAnchorX:re,projectedAnchorY:ge,projectedAnchorZ:Te,tileAnchorX:me,tileAnchorY:Se,featureIndex:Re}=n.get(E);A.verticalIconBox={x1:I,y1:L,x2:N,y2:V,padding:X,projectedAnchorX:re,projectedAnchorY:ge,projectedAnchorZ:Te,tileAnchorX:me,tileAnchorY:Se},A.verticalIconFeatureIndex=Re}return A}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const u=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const u=n.placedSymbolArray.get(s),f=u.vertexStartIndex+4*u.numGlyphs;for(let m=u.vertexStartIndex;m<f;m+=4)n.indexArray.emplaceBack(m,m+1,m+2),n.indexArray.emplaceBack(m+1,m+2,m+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),u=Math.cos(n),f=[],m=[],_=[];for(let x=0;x<this.symbolInstances.length;++x){_.push(x);const E=this.symbolInstances.get(x);f.push(0|Math.round(s*E.tileAnchorX+u*E.tileAnchorY)),m.push(E.featureIndex)}return _.sort((x,E)=>f[x]-f[E]||m[E]-m[x]),_}addToSortKeyRanges(n,s){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===s?u.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const u=this.symbolInstances.get(s);this.featureSortOrder.push(u.featureIndex);const{rightJustifiedTextSymbolIndex:f,centerJustifiedTextSymbolIndex:m,leftJustifiedTextSymbolIndex:_,verticalPlacedTextSymbolIndex:x,placedIconSymbolIndex:E,verticalPlacedIconSymbolIndex:T}=u;f>=0&&this.addIndicesForPlacedSymbol(this.text,f),m>=0&&m!==f&&this.addIndicesForPlacedSymbol(this.text,m),_>=0&&_!==m&&_!==f&&this.addIndicesForPlacedSymbol(this.text,_),x>=0&&this.addIndicesForPlacedSymbol(this.text,x),E>=0&&this.addIndicesForPlacedSymbol(this.icon,E),T>=0&&this.addIndicesForPlacedSymbol(this.icon,T)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}nn(Fl,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Fl.MAX_GLYPHS=65535,Fl.addDynamicAttributes=m0;const hB=new kt({"symbol-placement":new qe(pt.layout_symbol["symbol-placement"]),"symbol-spacing":new qe(pt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new qe(pt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new at(pt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new qe(pt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new qe(pt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new qe(pt.layout_symbol["icon-ignore-placement"]),"icon-optional":new qe(pt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new qe(pt.layout_symbol["icon-rotation-alignment"]),"icon-size":new at(pt.layout_symbol["icon-size"]),"icon-text-fit":new qe(pt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new qe(pt.layout_symbol["icon-text-fit-padding"]),"icon-image":new at(pt.layout_symbol["icon-image"]),"icon-rotate":new at(pt.layout_symbol["icon-rotate"]),"icon-padding":new qe(pt.layout_symbol["icon-padding"]),"icon-keep-upright":new qe(pt.layout_symbol["icon-keep-upright"]),"icon-offset":new at(pt.layout_symbol["icon-offset"]),"icon-anchor":new at(pt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new qe(pt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new qe(pt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new qe(pt.layout_symbol["text-rotation-alignment"]),"text-field":new at(pt.layout_symbol["text-field"]),"text-font":new at(pt.layout_symbol["text-font"]),"text-size":new at(pt.layout_symbol["text-size"]),"text-max-width":new at(pt.layout_symbol["text-max-width"]),"text-line-height":new at(pt.layout_symbol["text-line-height"]),"text-letter-spacing":new at(pt.layout_symbol["text-letter-spacing"]),"text-justify":new at(pt.layout_symbol["text-justify"]),"text-radial-offset":new at(pt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new qe(pt.layout_symbol["text-variable-anchor"]),"text-anchor":new at(pt.layout_symbol["text-anchor"]),"text-max-angle":new qe(pt.layout_symbol["text-max-angle"]),"text-writing-mode":new qe(pt.layout_symbol["text-writing-mode"]),"text-rotate":new at(pt.layout_symbol["text-rotate"]),"text-padding":new qe(pt.layout_symbol["text-padding"]),"text-keep-upright":new qe(pt.layout_symbol["text-keep-upright"]),"text-transform":new at(pt.layout_symbol["text-transform"]),"text-offset":new at(pt.layout_symbol["text-offset"]),"text-allow-overlap":new qe(pt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new qe(pt.layout_symbol["text-ignore-placement"]),"text-optional":new qe(pt.layout_symbol["text-optional"])});var eb={paint:new kt({"icon-opacity":new at(pt.paint_symbol["icon-opacity"]),"icon-color":new at(pt.paint_symbol["icon-color"]),"icon-halo-color":new at(pt.paint_symbol["icon-halo-color"]),"icon-halo-width":new at(pt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new at(pt.paint_symbol["icon-halo-blur"]),"icon-translate":new qe(pt.paint_symbol["icon-translate"]),"icon-translate-anchor":new qe(pt.paint_symbol["icon-translate-anchor"]),"text-opacity":new at(pt.paint_symbol["text-opacity"]),"text-color":new at(pt.paint_symbol["text-color"],{runtimeType:ra,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new at(pt.paint_symbol["text-halo-color"]),"text-halo-width":new at(pt.paint_symbol["text-halo-width"]),"text-halo-blur":new at(pt.paint_symbol["text-halo-blur"]),"text-translate":new qe(pt.paint_symbol["text-translate"]),"text-translate-anchor":new qe(pt.paint_symbol["text-translate-anchor"])}),layout:hB};class wM{constructor(n){this.type=n.property.overrides?n.property.overrides.runtimeType:dl,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}nn(wM,"FormatSectionOverride",{omit:["defaultValue"]});class g0 extends Aa{constructor(n){super(n,eb)}recalculate(n,s){super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const u=this.layout.get("text-writing-mode");if(u){const f=[];for(const m of u)f.indexOf(m)<0&&f.push(m);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(n,s,u,f){const m=this.layout.get(n).evaluate(s,{},u,f),_=this._unevaluatedLayout._values[n];return _.isDataDriven()||Sl(_.value)||!m?m:function(x,E){return E.replace(/{([^{}]+)}/g,(T,A)=>A in x?String(x[A]):"")}(s.properties,m)}createBucket(n){return new Fl(n)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const n of eb.paint.overridableProperties){if(!g0.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),u=new wM(s),f=new vd(u,s.property.specification);let m=null;m=s.value.kind==="constant"||s.value.kind==="source"?new xd("source",f):new Ms("composite",f,s.value.zoomStops,s.value._interpolationType),this.paint._values[n]=new Tt(s.property,m,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,u){return!(!this.layout||s.isDataDriven()||u.isDataDriven())&&g0.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const u=n.get("text-field"),f=eb.paint.properties[s];let m=!1;const _=x=>{for(const E of x)if(f.overrides&&f.overrides.hasOverride(E))return void(m=!0)};if(u.value.kind==="constant"&&u.value.value instanceof io)_(u.value.value.sections);else if(u.value.kind==="source"){const x=T=>{m||(T instanceof Rc&&mi(T.value)===hl?_(T.value.sections):T instanceof Ic?_(T.sections):T.eachChild(x))},E=u.value;E._styleExpression&&x(E._styleExpression.expression)}return m}getProgramConfiguration(n){return new Ll(this,n)}}var fB={paint:new kt({"background-color":new qe(pt.paint_background["background-color"]),"background-pattern":new qe(pt.paint_background["background-pattern"]),"background-opacity":new qe(pt.paint_background["background-opacity"])})},pB={paint:new kt({"raster-opacity":new qe(pt.paint_raster["raster-opacity"]),"raster-hue-rotate":new qe(pt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new qe(pt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new qe(pt.paint_raster["raster-brightness-max"]),"raster-saturation":new qe(pt.paint_raster["raster-saturation"]),"raster-contrast":new qe(pt.paint_raster["raster-contrast"]),"raster-resampling":new qe(pt.paint_raster["raster-resampling"]),"raster-fade-duration":new qe(pt.paint_raster["raster-fade-duration"])})};class mB extends Aa{constructor(n){super(n,{}),this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(n){this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl)}onRemove(n){this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl)}}var gB={paint:new kt({"sky-type":new qe(pt.paint_sky["sky-type"]),"sky-atmosphere-sun":new qe(pt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new qe(pt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new qe(pt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new qe(pt.paint_sky["sky-gradient-radius"]),"sky-gradient":new wt(pt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new qe(pt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new qe(pt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new qe(pt.paint_sky["sky-opacity"])})};function tb(o,n,s){const u=[0,0,1],f=WT([]);return HT(f,f,s?-fe(o)+Math.PI:fe(o)),qT(f,f,-fe(n)),UT(u,u,f),ao(u,u)}const yB={circle:class extends Aa{constructor(o){super(o,A5)}createBucket(o){return new Rx(o)}queryRadius(o){const n=o;return Nd("circle-radius",this,n)+Nd("circle-stroke-width",this,n)+Hy(this.paint.get("circle-translate"))}queryIntersectsFeature(o,n,s,u,f,m,_,x){const E=pC(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),m.angle,o.pixelToTileUnitsFactor),T=this.paint.get("circle-radius").evaluate(n,s)+this.paint.get("circle-stroke-width").evaluate(n,s);return mC(o,u,m,_,x,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",E,T)}getProgramIds(){return["circle"]}getProgramConfiguration(o){return new Ll(this,o)}},heatmap:class extends Aa{createBucket(o){return new yC(o)}constructor(o){super(o,P5),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Dx({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(o){return Nd("heatmap-radius",this,o)}queryIntersectsFeature(o,n,s,u,f,m,_,x){const E=this.paint.get("heatmap-radius").evaluate(n,s);return mC(o,u,m,_,x,!0,!0,new Y(0,0),E)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(o){return new Ll(this,o)}},hillshade:class extends Aa{constructor(o){super(o,L5)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Aa{constructor(o){super(o,X5)}getProgramIds(){const o=this.paint.get("fill-pattern"),n=o&&o.constantOr(1),s=[n?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&s.push(n&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),s}getProgramConfiguration(o){return new Ll(this,o)}recalculate(o,n){super.recalculate(o,n);const s=this.paint._values["fill-outline-color"];s.value.kind==="constant"&&s.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new Qy(o)}queryRadius(){return Hy(this.paint.get("fill-translate"))}queryIntersectsFeature(o,n,s,u,f,m){return!o.queryGeometry.isAboveHorizon&&cC(fC(o.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),m.angle,o.pixelToTileUnitsFactor),u)}isTileClipped(){return!0}},"fill-extrusion":class extends Aa{constructor(o){super(o,dF)}createBucket(o){return new vp(o)}queryRadius(){return Hy(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(o){return new Ll(this,o)}queryIntersectsFeature(o,n,s,u,f,m,_,x,E){const T=pC(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),m.angle,o.pixelToTileUnitsFactor),A=this.paint.get("fill-extrusion-height").evaluate(n,s),I=this.paint.get("fill-extrusion-base").evaluate(n,s),L=[0,0],N=x&&m.elevation,V=m.elevation?m.elevation.exaggeration():1,X=o.tile.getBucket(this);if(N&&X instanceof vp){const Se=X.centroidVertexArray,Re=E+1;Re<Se.length&&(L[0]=Se.geta_centroid_pos0(Re),L[1]=Se.geta_centroid_pos1(Re))}if(L[0]===0&&L[1]===1)return!1;m.projection.name==="globe"&&(u=zC([u],[new Y(0,0),new Y(kn,kn)],o.tileID.canonical).map(Se=>Se.polygon).flat());const re=N?x:null,[ge,Te]=function(Se,Re,Ce,it,et,gt,Pt,st,vt,bt,Mt){return Se.projection.name==="globe"?function(Dt,ct,Vt,xn,Ht,sn,jt,Sn,Un,Bn,On){const Mn=[],pr=[],In=Dt.projection.upVectorScale(On,Dt.center.lat,Dt.worldSize).metersToTile,Vn=[0,0,0,1],_r=[0,0,0,1],Lr=(Dr,Fr,Zr,Ri)=>{Dr[0]=Fr,Dr[1]=Zr,Dr[2]=Ri,Dr[3]=1},kr=DC();Vt>0&&(Vt+=kr),xn+=kr;for(const Dr of ct){const Fr=[],Zr=[];for(const Ri of Dr){const mr=Ri.x+Ht.x,gi=Ri.y+Ht.y,ui=Dt.projection.projectTilePoint(mr,gi,On),nr=Dt.projection.upVector(On,Ri.x,Ri.y);let Vr=Vt,xi=xn;if(jt){const vr=NC(mr,gi,Vt,xn,jt,Sn,Un,Bn);Vr+=vr.base,xi+=vr.top}Vt!==0?Lr(Vn,ui.x+nr[0]*In*Vr,ui.y+nr[1]*In*Vr,ui.z+nr[2]*In*Vr):Lr(Vn,ui.x,ui.y,ui.z),Lr(_r,ui.x+nr[0]*In*xi,ui.y+nr[1]*In*xi,ui.z+nr[2]*In*xi),ei(Vn,Vn,sn),ei(_r,_r,sn),Fr.push(new jd(Vn[0],Vn[1],Vn[2])),Zr.push(new jd(_r[0],_r[1],_r[2]))}Mn.push(Fr),pr.push(Zr)}return[Mn,pr]}(Se,Re,Ce,it,et,gt,Pt,st,vt,bt,Mt):Pt?function(Dt,ct,Vt,xn,Ht,sn,jt,Sn,Un){const Bn=[],On=[],Mn=[0,0,0,1];for(const pr of Dt){const In=[],Vn=[];for(const _r of pr){const Lr=_r.x+xn.x,kr=_r.y+xn.y,Dr=NC(Lr,kr,ct,Vt,sn,jt,Sn,Un);Mn[0]=Lr,Mn[1]=kr,Mn[2]=Dr.base,Mn[3]=1,au(Mn,Mn,Ht),Mn[3]=Math.max(Mn[3],1e-5);const Fr=new jd(Mn[0]/Mn[3],Mn[1]/Mn[3],Mn[2]/Mn[3]);Mn[0]=Lr,Mn[1]=kr,Mn[2]=Dr.top,Mn[3]=1,au(Mn,Mn,Ht),Mn[3]=Math.max(Mn[3],1e-5);const Zr=new jd(Mn[0]/Mn[3],Mn[1]/Mn[3],Mn[2]/Mn[3]);In.push(Fr),Vn.push(Zr)}Bn.push(In),On.push(Vn)}return[Bn,On]}(Re,Ce,it,et,gt,Pt,st,vt,bt):function(Dt,ct,Vt,xn,Ht){const sn=[],jt=[],Sn=Ht[8]*ct,Un=Ht[9]*ct,Bn=Ht[10]*ct,On=Ht[11]*ct,Mn=Ht[8]*Vt,pr=Ht[9]*Vt,In=Ht[10]*Vt,Vn=Ht[11]*Vt;for(const _r of Dt){const Lr=[],kr=[];for(const Dr of _r){const Fr=Dr.x+xn.x,Zr=Dr.y+xn.y,Ri=Ht[0]*Fr+Ht[4]*Zr+Ht[12],mr=Ht[1]*Fr+Ht[5]*Zr+Ht[13],gi=Ht[2]*Fr+Ht[6]*Zr+Ht[14],ui=Ht[3]*Fr+Ht[7]*Zr+Ht[15],nr=Ri+Sn,Vr=mr+Un,xi=gi+Bn,vr=Math.max(ui+On,1e-5),ti=Ri+Mn,Ki=mr+pr,Ii=gi+In,Pi=Math.max(ui+Vn,1e-5);Lr.push(new jd(nr/vr,Vr/vr,xi/vr)),kr.push(new jd(ti/Pi,Ki/Pi,Ii/Pi))}sn.push(Lr),jt.push(kr)}return[sn,jt]}(Re,Ce,it,et,gt)}(m,u,I,A,T,_,re,L,V,m.center.lat,o.tileID.canonical),me=o.queryGeometry;return function(Se,Re,Ce){let it=1/0;cC(Ce,Re)&&(it=BC(Ce,Re[0]));for(let et=0;et<Re.length;et++){const gt=Re[et],Pt=Se[et];for(let st=0;st<gt.length-1;st++){const vt=gt[st],bt=[vt,gt[st+1],Pt[st+1],Pt[st],vt];lC(Ce,bt)&&(it=Math.min(it,BC(Ce,bt)))}}return it!==1/0&&it}(ge,Te,me.isPointQuery()?me.screenBounds:me.screenGeometry)}},line:class extends Aa{constructor(o){super(o,$C),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(o){if(o==="line-gradient"){const n=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=n._styleExpression&&n._styleExpression.expression instanceof Tf,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(o,n){super.recalculate(o,n),this.paint._values["line-floorwidth"]=UC.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new r0(o)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(o){return new Ll(this,o)}queryRadius(o){const n=o,s=VC(Nd("line-width",this,n),Nd("line-gap-width",this,n)),u=Nd("line-offset",this,n);return s/2+Math.abs(u)+Hy(this.paint.get("line-translate"))}queryIntersectsFeature(o,n,s,u,f,m){if(o.queryGeometry.isAboveHorizon)return!1;const _=fC(o.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),m.angle,o.pixelToTileUnitsFactor),x=o.pixelToTileUnitsFactor/2*VC(this.paint.get("line-width").evaluate(n,s),this.paint.get("line-gap-width").evaluate(n,s)),E=this.paint.get("line-offset").evaluate(n,s);return E&&(u=function(T,A){const I=[],L=new Y(0,0);for(let N=0;N<T.length;N++){const V=T[N],X=[];for(let re=0;re<V.length;re++){const ge=V[re-1],Te=V[re],me=V[re+1],Se=re===0?L:Te.sub(ge)._unit()._perp(),Re=re===V.length-1?L:me.sub(Te)._unit()._perp(),Ce=Se._add(Re)._unit();Ce._mult(1/(Ce.x*Re.x+Ce.y*Re.y)),X.push(Ce._mult(A)._add(Te))}I.push(X)}return I}(u,E*o.pixelToTileUnitsFactor)),function(T,A,I){for(let L=0;L<A.length;L++){const N=A[L];if(T.length>=3){for(let V=0;V<N.length;V++)if(uu(T,N[V]))return!0}if(E5(T,N,I))return!0}return!1}(_,u,x)}isTileClipped(){return!0}},symbol:g0,background:class extends Aa{constructor(o){super(o,fB)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Aa{constructor(o){super(o,pB)}getProgramIds(){return["raster"]}},sky:class extends Aa{constructor(o){super(o,gB),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){o==="sky-gradient"?this._updateColorRamp():o!=="sky-atmosphere-sun"&&o!=="sky-atmosphere-halo-color"&&o!=="sky-atmosphere-color"&&o!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Dx({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(o){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const n=o.style.light.properties.get("position");return this._lightPosition.azimuthal!==n.azimuthal||this._lightPosition.polar!==n.polar}return!1}getCenter(o,n){if(this.paint.get("sky-type")==="atmosphere"){const u=this.paint.get("sky-atmosphere-sun"),f=!u,m=o.style.light,_=m.properties.get("position");return f&&m.properties.get("anchor")==="viewport"&&Ct("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),f?tb(_.azimuthal,90-_.polar,n):tb(u[0],90-u[1],n)}const s=this.paint.get("sky-gradient-center");return tb(s[0],90-s[1],n)}is3D(){return!1}isSky(){return!0}markSkyboxValid(o){this._skyboxInvalidated=!1,this._lightPosition=o.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const o=this.paint.get("sky-type");return o==="atmosphere"?["skyboxCapture","skybox"]:o==="gradient"?["skyboxGradient"]:null}}};class Rp{constructor(n,s,u,f){this.context=n,this.format=u,this.texture=n.gl.createTexture(),this.update(s,f)}update(n,s,u){const{width:f,height:m}=n,{context:_}=this,{gl:x}=_,{HTMLImageElement:E,HTMLCanvasElement:T,HTMLVideoElement:A,ImageData:I,ImageBitmap:L}=b;if(x.bindTexture(x.TEXTURE_2D,this.texture),_.pixelStoreUnpackFlipY.set(!1),_.pixelStoreUnpack.set(1),_.pixelStoreUnpackPremultiplyAlpha.set(this.format===x.RGBA&&(!s||s.premultiply!==!1)),u||this.size&&this.size[0]===f&&this.size[1]===m){const{x:N,y:V}=u||{x:0,y:0};n instanceof E||n instanceof T||n instanceof A||n instanceof I||L&&n instanceof L?x.texSubImage2D(x.TEXTURE_2D,0,N,V,x.RGBA,x.UNSIGNED_BYTE,n):x.texSubImage2D(x.TEXTURE_2D,0,N,V,f,m,x.RGBA,x.UNSIGNED_BYTE,n.data)}else this.size=[f,m],n instanceof E||n instanceof T||n instanceof A||n instanceof I||L&&n instanceof L?x.texImage2D(x.TEXTURE_2D,0,this.format,this.format,x.UNSIGNED_BYTE,n):x.texImage2D(x.TEXTURE_2D,0,this.format,f,m,0,this.format,x.UNSIGNED_BYTE,n.data);this.useMipmap=!!(s&&s.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&x.generateMipmap(x.TEXTURE_2D)}bind(n,s){const{context:u}=this,{gl:f}=u;f.bindTexture(f.TEXTURE_2D,this.texture),n!==this.filter&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,n),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,this.useMipmap?n===f.NEAREST?f.NEAREST_MIPMAP_NEAREST:f.LINEAR_MIPMAP_NEAREST:n),this.filter=n),s!==this.wrap&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,s),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}class _B{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class vB{constructor(){this.tasks={},this.taskQueue=[],ht(["process"],this),this.invoker=new _B(this.process),this.nextId=0}add(n,s){const u=this.nextId++,f=function({type:m,isSymbolTile:_,zoom:x}){return x=x||0,m==="message"?0:m!=="maybePrepare"||_?m!=="parseTile"||_?m==="parseTile"&&_?300-x:m==="maybePrepare"&&_?400-x:500:200-x:100-x}(s);if(f===0){pn();try{n()}finally{}return{cancel:()=>{}}}return this.tasks[u]={fn:n,metadata:s,priority:f,id:u},this.taskQueue.push(u),this.invoker.trigger(),{cancel:()=>{delete this.tasks[u]}}}process(){pn();try{if(this.taskQueue=this.taskQueue.filter(u=>!!this.tasks[u]),!this.taskQueue.length)return;const n=this.pick();if(n===null)return;const s=this.tasks[n];if(delete this.tasks[n],this.taskQueue.length&&this.invoker.trigger(),!s)return;s.fn()}finally{}}pick(){let n=null,s=1/0;for(let f=0;f<this.taskQueue.length;f++){const m=this.tasks[this.taskQueue[f]];m.priority<s&&(s=m.priority,n=f)}if(n===null)return null;const u=this.taskQueue[n];return this.taskQueue.splice(n,1),u}remove(){this.invoker.remove()}}class SM{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const u=n[s];this._stringToNumber[u]=s,this._numberToString[s]=u}}encode(n){return this._stringToNumber[n]}decode(n){return this._numberToString[n]}}const xB=["tile","layer","source","sourceLayer","state"];class EM{constructor(n,s,u,f,m){this.type="Feature",this._vectorTileFeature=n,this._z=s,this._x=u,this._y=f,this.properties=n.properties,this.id=m}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(n.id=this.id);for(const s of xB)this[s]!==void 0&&(n[s]=this[s]);return n}}const ca=32,is=33,Bl=new Uint16Array(8184);for(let o=0;o<2046;o++){let n=o+2,s=0,u=0,f=0,m=0,_=0,x=0;for(1&n?f=m=_=ca:s=u=x=ca;(n>>=1)>1;){const T=s+f>>1,A=u+m>>1;1&n?(f=s,m=u,s=_,u=x):(s=f,u=m,f=_,m=x),_=T,x=A}const E=4*o;Bl[E+0]=s,Bl[E+1]=u,Bl[E+2]=f,Bl[E+3]=m}const os=new Uint16Array(2178),Nl=new Uint8Array(1089),y0=new Uint16Array(1089);function TM(o){return o===0?-.03125:o===32?.03125:0}var CM=dn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const MM={type:2,extent:kn,loadGeometry:()=>[[new Y(0,0),new Y(8193,0),new Y(8193,8193),new Y(0,8193),new Y(0,0)]]};class nb{constructor(n,s,u,f,m){this.tileID=n,this.uid=be(),this.uses=0,this.tileSize=s,this.tileZoom=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=m,this.expiredRequestCount=0,this.state="loading",f&&f.transform&&(this.projection=f.transform.projection)}registerFadeDuration(n){const s=n+this.timeAdded;s<ir.now()||this.fadeEndTime&&s<this.fadeEndTime||(this.fadeEndTime=s)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=hu(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(n,s,u){if(this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(f,m){const _={};if(!m)return _;for(const x of f){const E=x.layerIds.map(T=>m.getLayer(T)).filter(Boolean);if(E.length!==0){x.layers=E,x.stateDependentLayerIds&&(x.stateDependentLayers=x.stateDependentLayerIds.map(T=>E.filter(A=>A.id===T)[0]));for(const T of E)_[T.id]=x}}return _}(n.buckets,s.style),this.hasSymbolBuckets=!1;for(const f in this.buckets){const m=this.buckets[f];if(m instanceof Fl){if(this.hasSymbolBuckets=!0,!u)break;m.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const f in this.buckets){const m=this.buckets[f];if(m instanceof Fl&&m.hasRTLText){this.hasRTLText=!0,Fe.isLoading()||Fe.isLoaded()||Ie()!=="deferred"||Ae();break}}this.queryPadding=0;for(const f in this.buckets){const m=this.buckets[f];this.queryPadding=Math.max(this.queryPadding,s.style.getLayer(f).queryRadius(m))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage),n.lineAtlas&&(this.lineAtlas=n.lineAtlas)}else this.collisionBoxArray=new cx}unloadVectorData(){if(this.hasData()){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(n){return this.buckets[n.id]}upload(n){for(const u in this.buckets){const f=this.buckets[u];f.uploadPending()&&f.upload(n)}const s=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Rp(n,this.imageAtlas.image,s.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Rp(n,this.glyphAtlasImage,s.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Rp(n,this.lineAtlas.image,s.ALPHA),this.lineAtlas.uploaded=!0)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,s,u,f,m,_,x,E){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:f,pixelPosMatrix:x,transform:_,params:m,tileTransform:this.tileTransform},n,s,u):{}}querySourceFeatures(n,s){const u=this.latestFeatureIndex;if(!u||!u.rawTileData)return;const f=u.loadVTLayers(),m=s?s.sourceLayer:"",_=f._geojsonTileLayer||f[m];if(!_)return;const x=wd(s&&s.filter),{z:E,x:T,y:A}=this.tileID.canonical,I={z:E,x:T,y:A};for(let L=0;L<_.length;L++){const N=_.feature(L);if(x.needGeometry){const re=cu(N,!0);if(!x.filter(new He(this.tileID.overscaledZ),re,this.tileID.canonical))continue}else if(!x.filter(new He(this.tileID.overscaledZ),N))continue;const V=u.getId(N,m),X=new EM(N,E,T,A,V);X.tile=I,n.push(X)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const s=this.expirationTime;if(n.cacheControl){const u=Pn(n.cacheControl);u["max-age"]&&(this.expirationTime=Date.now()+1e3*u["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const u=Date.now();let f=!1;if(this.expirationTime>u)f=!1;else if(s)if(this.expirationTime<s)f=!0;else{const m=this.expirationTime-s;m?this.expirationTime=u+Math.max(m,3e4):f=!0}else f=!0;f?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,s){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0||!s)return;const u=this.latestFeatureIndex.loadVTLayers(),f=s.style.listImages();for(const m in this.buckets){if(!s.style.hasLayer(m))continue;const _=this.buckets[m],x=_.layers[0].sourceLayer||"_geojsonTileLayer",E=u[x],T=n[x];if(!E||!T||Object.keys(T).length===0)continue;if(_.update(T,E,f,this.imageAtlas&&this.imageAtlas.patternPositions||{}),_ instanceof r0||_ instanceof Qy){const I=s.style._getSourceCache(_.layers[0].source);s._terrain&&s._terrain.enabled&&I&&_.programConfigurations.needsUpload&&s._terrain._clearRenderCacheForTile(I.id,this.tileID)}const A=s&&s.style&&s.style.getLayer(m);A&&(this.queryPadding=Math.max(this.queryPadding,A.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ir.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=ir.now()+n}setTexture(n,s){const u=s.context,f=u.gl;this.texture=this.texture||s.getTileTexture(n.width),this.texture?this.texture.update(n,{useMipmap:!0}):(this.texture=new Rp(u,n,f.RGBA,{useMipmap:!0}),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE))}setDependencies(n,s){const u={};for(const f of s)u[f]=!0;this.dependencies[n]=u}hasDependency(n,s){for(const u of n){const f=this.dependencies[u];if(f){for(const m of s)if(f[m])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(n,s){if(!s||s.name==="mercator"||this._tileDebugBuffer)return;const u=Ps(MM,this.tileID.canonical,this.tileTransform)[0],f=new yn,m=new Qa;for(let _=0;_<u.length;_++){const{x,y:E}=u[_];f.emplaceBack(x,E),m.emplaceBack(_)}m.emplaceBack(0),this._tileDebugIndexBuffer=n.createIndexBuffer(m),this._tileDebugBuffer=n.createVertexBuffer(f,lp.members),this._tileDebugSegments=li.simpleSegment(0,0,f.length,m.length)}_makeTileBoundsBuffers(n,s){if(this._tileBoundsBuffer||!s||s.name==="mercator")return;const u=Ps(MM,this.tileID.canonical,this.tileTransform)[0];let f,m;if(this.isRaster){const _=function(x,E){const T=hu(x,E),A=Math.pow(2,x.z);for(let re=0;re<is;re++)for(let ge=0;ge<is;ge++){const Te=jo((x.x+(ge+TM(ge))/ca)/A),me=Ui((x.y+(re+TM(re))/ca)/A),Se=E.project(Te,me),Re=re*is+ge;os[2*Re+0]=Math.round((Se.x*T.scale-T.x)*kn),os[2*Re+1]=Math.round((Se.y*T.scale-T.y)*kn)}Nl.fill(0),y0.fill(0);for(let re=2045;re>=0;re--){const ge=4*re,Te=Bl[ge+0],me=Bl[ge+1],Se=Bl[ge+2],Re=Bl[ge+3],Ce=Te+Se>>1,it=me+Re>>1,et=Ce+it-me,gt=it+Te-Ce,Pt=me*is+Te,st=Re*is+Se,vt=it*is+Ce,bt=Math.hypot((os[2*Pt+0]+os[2*st+0])/2-os[2*vt+0],(os[2*Pt+1]+os[2*st+1])/2-os[2*vt+1])>=16;if(Nl[vt]=Nl[vt]||(bt?1:0),re<1022){const Mt=(me+gt>>1)*is+(Te+et>>1),Dt=(Re+gt>>1)*is+(Se+et>>1);Nl[vt]=Nl[vt]||Nl[Mt]||Nl[Dt]}}const I=new ur,L=new $i;let N=0;function V(re,ge){const Te=ge*is+re;return y0[Te]===0&&(I.emplaceBack(os[2*Te+0],os[2*Te+1],re*kn/ca,ge*kn/ca),y0[Te]=++N),y0[Te]-1}function X(re,ge,Te,me,Se,Re){const Ce=re+Te>>1,it=ge+me>>1;if(Math.abs(re-Se)+Math.abs(ge-Re)>1&&Nl[it*is+Ce])X(Se,Re,re,ge,Ce,it),X(Te,me,Se,Re,Ce,it);else{const et=V(re,ge),gt=V(Te,me),Pt=V(Se,Re);L.emplaceBack(et,gt,Pt)}}return X(0,0,ca,ca,ca,0),X(ca,ca,0,0,0,ca),{vertices:I,indices:L}}(this.tileID.canonical,s);f=_.vertices,m=_.indices}else{f=new ur,m=new $i;for(const{x,y:E}of u)f.emplaceBack(x,E,0,0);const _=$d(f.int16,void 0,4);for(let x=0;x<_.length;x+=3)m.emplaceBack(_[x],_[x+1],_[x+2])}this._tileBoundsBuffer=n.createVertexBuffer(f,CM.members),this._tileBoundsIndexBuffer=n.createIndexBuffer(m),this._tileBoundsSegments=li.simpleSegment(0,0,f.length,m.length)}_makeGlobeTileDebugBuffers(n,s){const u=s.projection;if(!u||u.name!=="globe"||s.freezeTileCoverage)return;const f=this.tileID.canonical,m=dp(YT(f,s)),_=Fd(s.zoom);let x;_>0&&(x=px(new Float64Array(16),s.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(n,f,s,m,x,_),this._makeGlobeTileDebugTextBuffer(n,f,s,m,x,_)}_globePoint(n,s,u,f,m,_,x){let E=up(n,s,u);if(_){const T=1<<u.z,A=ts(f.center.lng),I=ns(f.center.lat),L=(u.x+.5)/T-A;let N=0;L>.5?N=-1:L<-.5&&(N=1);let V=(n/kn+u.x)/T+N,X=(s/kn+u.y)/T;V=(V-A)*f._pixelsPerMercatorPixel+A,X=(X-I)*f._pixelsPerMercatorPixel+I;const re=[V*f.worldSize,X*f.worldSize,0];ei(re,re,_),E=lu(E,re,x)}return ei(E,E,m)}_makeGlobeTileDebugBorderBuffer(n,s,u,f,m,_){const x=new yn,E=new Qa,T=new lr,A=(L,N,V,X,re)=>{const ge=(V-L)/(re-1),Te=(X-N)/(re-1),me=x.length;for(let Se=0;Se<re;Se++){const Re=L+Se*ge,Ce=N+Se*Te;x.emplaceBack(Re,Ce);const it=this._globePoint(Re,Ce,s,u,f,m,_);T.emplaceBack(it[0],it[1],it[2]),E.emplaceBack(me+Se)}},I=kn;A(0,0,I,0,16),A(I,0,I,I,16),A(I,I,0,I,16),A(0,I,0,0,16),this._tileDebugIndexBuffer=n.createIndexBuffer(E),this._tileDebugBuffer=n.createVertexBuffer(x,lp.members),this._globeTileDebugBorderBuffer=n.createVertexBuffer(T,XT.members),this._tileDebugSegments=li.simpleSegment(0,0,x.length,E.length)}_makeGlobeTileDebugTextBuffer(n,s,u,f,m,_){const x=new yn,E=new $i,T=new lr,A=25;E.reserve(32),x.reserve(A),T.reserve(A);const I=(L,N)=>A*L+N;for(let L=0;L<A;L++){const N=2048*L;for(let V=0;V<A;V++){const X=2048*V;x.emplaceBack(X,N);const re=this._globePoint(X,N,s,u,f,m,_);T.emplaceBack(re[0],re[1],re[2])}}for(let L=0;L<4;L++)for(let N=0;N<4;N++){const V=I(L,N),X=I(L,N+1),re=I(L+1,N),ge=I(L+1,N+1);E.emplaceBack(V,X,re),E.emplaceBack(re,X,ge)}this._tileDebugTextIndexBuffer=n.createIndexBuffer(E),this._tileDebugTextBuffer=n.createVertexBuffer(x,lp.members),this._globeTileDebugTextBuffer=n.createVertexBuffer(T,XT.members),this._tileDebugTextSegments=li.simpleSegment(0,0,A,32)}}class bB{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,s,u){const f=String(s);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][f]=this.stateChanges[n][f]||{},_e(this.stateChanges[n][f],u),this.deletedStates[n]===null){this.deletedStates[n]={};for(const m in this.state[n])m!==f&&(this.deletedStates[n][m]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][f]===null){this.deletedStates[n][f]={};for(const m in this.state[n][f])u[m]||(this.deletedStates[n][f][m]=null)}else for(const m in u)this.deletedStates[n]&&this.deletedStates[n][f]&&this.deletedStates[n][f][m]===null&&delete this.deletedStates[n][f][m]}removeFeatureState(n,s,u){if(this.deletedStates[n]===null)return;const f=String(s);if(this.deletedStates[n]=this.deletedStates[n]||{},u&&s!==void 0)this.deletedStates[n][f]!==null&&(this.deletedStates[n][f]=this.deletedStates[n][f]||{},this.deletedStates[n][f][u]=null);else if(s!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][f])for(u in this.deletedStates[n][f]={},this.stateChanges[n][f])this.deletedStates[n][f][u]=null;else this.deletedStates[n][f]=null;else this.deletedStates[n]=null}getState(n,s){const u=String(s),f=_e({},(this.state[n]||{})[u],(this.stateChanges[n]||{})[u]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const m=this.deletedStates[n][s];if(m===null)return{};for(const _ in m)delete f[_]}return f}initializeTileState(n,s){n.setFeatureState(this.state,s)}coalesceChanges(n,s){const u={};for(const f in this.stateChanges){this.state[f]=this.state[f]||{};const m={};for(const _ in this.stateChanges[f])this.state[f][_]||(this.state[f][_]={}),_e(this.state[f][_],this.stateChanges[f][_]),m[_]=this.state[f][_];u[f]=m}for(const f in this.deletedStates){this.state[f]=this.state[f]||{};const m={};if(this.deletedStates[f]===null)for(const _ in this.state[f])m[_]={},this.state[f][_]={};else for(const _ in this.deletedStates[f]){if(this.deletedStates[f][_]===null)this.state[f][_]={};else if(this.state[f][_])for(const x of Object.keys(this.deletedStates[f][_]))delete this.state[f][_][x];m[_]=this.state[f][_]}u[f]=u[f]||{},_e(u[f],m)}if(this.stateChanges={},this.deletedStates={},Object.keys(u).length!==0)for(const f in n)n[f].setFeatureState(u,s)}}class AM{constructor(n){this.size=n,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(n,s){const u=this.toIdx(n,s);return{min:this.minimums[u],max:this.maximums[u]}}isLeaf(n,s){return this.leaves[this.toIdx(n,s)]}toIdx(n,s){return s*this.size+n}}function kM(o,n,s,u){let f=0,m=Number.MAX_VALUE;for(let _=0;_<3;_++)if(Math.abs(u[_])<1e-15){if(s[_]<o[_]||s[_]>n[_])return null}else{const x=1/u[_];let E=(o[_]-s[_])*x,T=(n[_]-s[_])*x;if(E>T){const A=E;E=T,T=A}if(E>f&&(f=E),T<m&&(m=T),f>m)return null}return f}function RM(o,n,s,u,f,m,_,x,E,T,A){const I=u-o,L=f-n,N=m-s,V=_-o,X=x-n,re=E-s,ge=A[1]*re-A[2]*X,Te=A[2]*V-A[0]*re,me=A[0]*X-A[1]*V,Se=I*ge+L*Te+N*me;if(Math.abs(Se)<1e-15)return null;const Re=1/Se,Ce=T[0]-o,it=T[1]-n,et=T[2]-s,gt=(Ce*ge+it*Te+et*me)*Re;if(gt<0||gt>1)return null;const Pt=it*N-et*L,st=et*I-Ce*N,vt=Ce*L-it*I,bt=(A[0]*Pt+A[1]*st+A[2]*vt)*Re;return bt<0||gt+bt>1?null:(V*Pt+X*st+re*vt)*Re}function IM(o,n,s){return(o-n)/(s-n)}function PM(o,n,s,u,f,m,_,x,E){const T=1<<s,A=m-u,I=_-f,L=(o+1)/T*A+u,N=(n+0)/T*I+f,V=(n+1)/T*I+f;x[0]=(o+0)/T*A+u,x[1]=N,E[0]=L,E[1]=V}class LM{constructor(n){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=n,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const s=function(m){const _=Math.ceil(Math.log2(m.dim/8)),x=[];let E=Math.ceil(Math.pow(2,_));const T=1/E,A=(N,V,X,re,ge)=>{const Te=re?1:0,me=(N+1)*X-Te,Se=V*X,Re=(V+1)*X-Te;ge[0]=N*X,ge[1]=Se,ge[2]=me,ge[3]=Re};let I=new AM(E);const L=[];for(let N=0;N<E*E;N++){A(N%E,Math.floor(N/E),T,!1,L);const V=$l(L[0],L[1],m),X=$l(L[2],L[1],m),re=$l(L[2],L[3],m),ge=$l(L[0],L[3],m);I.minimums.push(Math.min(V,X,re,ge)),I.maximums.push(Math.max(V,X,re,ge)),I.leaves.push(1)}for(x.push(I),E/=2;E>=1;E/=2){const N=x[x.length-1];I=new AM(E);for(let V=0;V<E*E;V++){A(V%E,Math.floor(V/E),2,!0,L);const X=N.getElevation(L[0],L[1]),re=N.getElevation(L[2],L[1]),ge=N.getElevation(L[2],L[3]),Te=N.getElevation(L[0],L[3]),me=N.isLeaf(L[0],L[1]),Se=N.isLeaf(L[2],L[1]),Re=N.isLeaf(L[2],L[3]),Ce=N.isLeaf(L[0],L[3]),it=Math.min(X.min,re.min,ge.min,Te.min),et=Math.max(X.max,re.max,ge.max,Te.max),gt=me&&Se&&Re&&Ce;I.maximums.push(et),I.minimums.push(it),I.leaves.push(et-it<=5&&gt?1:0)}x.push(I)}return x}(this.dem),u=s.length-1,f=s[u];this._addNode(f.minimums[0],f.maximums[0],f.leaves[0]),this._construct(s,0,0,u,0)}raycastRoot(n,s,u,f,m,_,x=1){return kM([n,s,-100],[u,f,this.maximums[0]*x],m,_)}raycast(n,s,u,f,m,_,x=1){if(!this.nodeCount)return null;const E=this.raycastRoot(n,s,u,f,m,_,x);if(E==null)return null;const T=[],A=[],I=[],L=[],N=[{idx:0,t:E,nodex:0,nodey:0,depth:0}];for(;N.length>0;){const{idx:V,t:X,nodex:re,nodey:ge,depth:Te}=N.pop();if(this.leaves[V]){PM(re,ge,Te,n,s,u,f,I,L);const Se=1<<Te,Re=(re+0)/Se,Ce=(re+1)/Se,it=(ge+0)/Se,et=(ge+1)/Se,gt=$l(Re,it,this.dem)*x,Pt=$l(Ce,it,this.dem)*x,st=$l(Ce,et,this.dem)*x,vt=$l(Re,et,this.dem)*x,bt=RM(I[0],I[1],gt,L[0],I[1],Pt,L[0],L[1],st,m,_),Mt=RM(L[0],L[1],st,I[0],L[1],vt,I[0],I[1],gt,m,_),Dt=Math.min(bt!==null?bt:Number.MAX_VALUE,Mt!==null?Mt:Number.MAX_VALUE);if(Dt!==Number.MAX_VALUE)return Dt;{const ct=ap([],m,_,X);if(DM(gt,Pt,vt,st,IM(ct[0],I[0],L[0]),IM(ct[1],I[1],L[1]))>=ct[2])return X}continue}let me=0;for(let Se=0;Se<this._siblingOffset.length;Se++){PM((re<<1)+this._siblingOffset[Se][0],(ge<<1)+this._siblingOffset[Se][1],Te+1,n,s,u,f,I,L),I[2]=-100,L[2]=this.maximums[this.childOffsets[V]+Se]*x;const Re=kM(I,L,m,_);if(Re!=null){const Ce=Re;T[Se]=Ce;let it=!1;for(let et=0;et<me&&!it;et++)Ce>=T[A[et]]&&(A.splice(et,0,Se),it=!0);it||(A[me]=Se),me++}}for(let Se=0;Se<me;Se++){const Re=A[Se];N.push({idx:this.childOffsets[V]+Re,t:T[Re],nodex:(re<<1)+this._siblingOffset[Re][0],nodey:(ge<<1)+this._siblingOffset[Re][1],depth:Te+1})}}return null}_addNode(n,s,u){return this.minimums.push(n),this.maximums.push(s),this.leaves.push(u),this.childOffsets.push(0),this.nodeCount++}_construct(n,s,u,f,m){if(n[f].isLeaf(s,u)===1)return;this.childOffsets[m]||(this.childOffsets[m]=this.nodeCount);const _=f-1,x=n[_];let E=0,T=0;for(let A=0;A<this._siblingOffset.length;A++){const I=2*s+this._siblingOffset[A][0],L=2*u+this._siblingOffset[A][1],N=x.getElevation(I,L),V=x.isLeaf(I,L),X=this._addNode(N.min,N.max,V);V&&(E|=1<<A),T||(T=X)}for(let A=0;A<this._siblingOffset.length;A++)E&1<<A||this._construct(n,2*s+this._siblingOffset[A][0],2*u+this._siblingOffset[A][1],_,T+A)}}function DM(o,n,s,u,f,m){return Kn(Kn(o,s,m),Kn(n,u,m),f)}function $l(o,n,s){const u=s.dim,f=ze(o*u-.5,0,u-1),m=ze(n*u-.5,0,u-1),_=Math.floor(f),x=Math.floor(m),E=Math.min(_+1,u-1),T=Math.min(x+1,u-1);return DM(s.get(_,x),s.get(E,x),s.get(_,T),s.get(E,T),f-_,m-x)}const zM={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function wB(o,n,s){return(256*o*256+256*n+s)/10-1e4}function SB(o,n,s){return 256*o+n+s/256-32768}class _0{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(n,s,u,f=!1,m=!1){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(u&&u!=="mapbox"&&u!=="terrarium")return Ct(`"${u}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=s.height;const _=this.dim=s.height-2,x=new Uint32Array(s.data.buffer);if(this.pixels=new Uint8Array(s.data.buffer),this.encoding=u||"mapbox",this.borderReady=f,!f){for(let E=0;E<_;E++)x[this._idx(-1,E)]=x[this._idx(0,E)],x[this._idx(_,E)]=x[this._idx(_-1,E)],x[this._idx(E,-1)]=x[this._idx(E,0)],x[this._idx(E,_)]=x[this._idx(E,_-1)];x[this._idx(-1,-1)]=x[this._idx(0,0)],x[this._idx(_,-1)]=x[this._idx(_-1,0)],x[this._idx(-1,_)]=x[this._idx(0,_-1)],x[this._idx(_,_)]=x[this._idx(_-1,_-1)],m&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new LM(this)}get(n,s,u=!1){u&&(n=ze(n,-1,this.dim),s=ze(s,-1,this.dim));const f=4*this._idx(n,s);return(this.encoding==="terrarium"?SB:wB)(this.pixels[f],this.pixels[f+1],this.pixels[f+2])}static getUnpackVector(n){return zM[n]}get unpackVector(){return zM[this.encoding]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}static pack(n,s){const u=[0,0,0,0],f=_0.getUnpackVector(s);let m=Math.floor((n+f[3])/f[2]);return u[2]=m%256,m=Math.floor(m/256),u[1]=m%256,m=Math.floor(m/256),u[0]=m,u}getPixels(){return new Ao({width:this.stride,height:this.stride},this.pixels)}backfillBorder(n,s,u){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let f=s*this.dim,m=s*this.dim+this.dim,_=u*this.dim,x=u*this.dim+this.dim;switch(s){case-1:f=m-1;break;case 1:m=f+1}switch(u){case-1:_=x-1;break;case 1:x=_+1}const E=-s*this.dim,T=-u*this.dim;for(let A=_;A<x;A++)for(let I=f;I<m;I++){const L=4*this._idx(I,A),N=4*this._idx(I+E,A+T);this.pixels[L+0]=n.pixels[N+0],this.pixels[L+1]=n.pixels[N+1],this.pixels[L+2]=n.pixels[N+2],this.pixels[L+3]=n.pixels[N+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}nn(_0,"DEMData"),nn(LM,"DemMinMaxQuadTree",{omit:["dem"]});class EB{constructor(n,s){this.max=n,this.onRemove=s,this.reset()}reset(){for(const n in this.data)for(const s of this.data[n])s.timeout&&clearTimeout(s.timeout),this.onRemove(s.value);return this.data={},this.order=[],this}add(n,s,u){const f=n.wrapped().key;this.data[f]===void 0&&(this.data[f]=[]);const m={value:s,timeout:void 0};if(u!==void 0&&(m.timeout=setTimeout(()=>{this.remove(n,m)},u)),this.data[f].push(m),this.order.push(f),this.order.length>this.max){const _=this._getAndRemoveByKey(this.order[0]);_&&this.onRemove(_)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const s=this.data[n].shift();return s.timeout&&clearTimeout(s.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),s.value}getByKey(n){const s=this.data[n];return s?s[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,s){if(!this.has(n))return this;const u=n.wrapped().key,f=s===void 0?0:this.data[u].indexOf(s),m=this.data[u][f];return this.data[u].splice(f,1),m.timeout&&clearTimeout(m.timeout),this.data[u].length===0&&delete this.data[u],this.onRemove(m.value),this.order.splice(this.order.indexOf(u),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this}filter(n){const s=[];for(const u in this.data)for(const f of this.data[u])n(f.value)||s.push(f);for(const u of s)this.remove(u.value.tileID,u)}}class Yd{constructor(n,s,u){this.func=n,this.mask=s,this.range=u}}Yd.ReadOnly=!1,Yd.ReadWrite=!0,Yd.disabled=new Yd(519,Yd.ReadOnly,[0,1]);const rb=7680;class ib{constructor(n,s,u,f,m,_){this.test=n,this.ref=s,this.mask=u,this.fail=f,this.depthFail=m,this.pass=_}}ib.disabled=new ib({func:519,mask:0},0,0,rb,rb,rb);class as{constructor(n,s,u){this.blendFunction=n,this.blendColor=s,this.mask=u}}as.Replace=[1,0],as.disabled=new as(as.Replace,Jr.transparent,[!1,!1,!1,!1]),as.unblended=new as(as.Replace,Jr.transparent,[!0,!0,!0,!0]),as.alphaBlended=new as([1,771],Jr.transparent,[!0,!0,!0,!0]);const ob=1029,ab=2305;class Pa{constructor(n,s,u){this.enable=n,this.mode=s,this.frontFace=u}}Pa.disabled=new Pa(!1,ob,ab),Pa.backCCW=new Pa(!0,ob,ab),Pa.backCW=new Pa(!0,ob,2304),Pa.frontCW=new Pa(!0,1028,2304),Pa.frontCCW=new Pa(!0,1028,ab);class fu extends xa{constructor(n,s,u){super(),this.id=n,this._onlySymbols=u,s.on("data",f=>{f.dataType==="source"&&f.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&f.dataType==="source"&&f.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),s.on("error",()=>{this._sourceErrored=!0}),this._source=s,this._tiles={},this._cache=new EB(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=s.minTileCacheSize,this._maxTileCacheSize=s.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new bB,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(n){this.map=n,this._minTileCacheSize=this._minTileCacheSize===void 0&&n?n._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&n?n._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const n in this._tiles){const s=this._tiles[n];if(s.state!=="loaded"&&s.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(n,s){return n.isSymbolTile=this._onlySymbols,this._source.loadTile(n,s)}_unloadTile(n){if(this._source.unloadTile)return this._source.unloadTile(n,()=>{})}_abortTile(n){if(this._source.abortTile)return this._source.abortTile(n,()=>{})}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const s in this._tiles){const u=this._tiles[s];u.upload(n),u.prepare(this.map.style.imageManager)}}getIds(){return Ee(this._tiles).map(n=>n.tileID).sort(OM).map(n=>n.key)}getRenderableIds(n){const s=[];for(const u in this._tiles)this._isIdRenderable(+u,n)&&s.push(this._tiles[u]);return n?s.sort((u,f)=>{const m=u.tileID,_=f.tileID,x=new Y(m.canonical.x,m.canonical.y)._rotate(this.transform.angle),E=new Y(_.canonical.x,_.canonical.y)._rotate(this.transform.angle);return m.overscaledZ-_.overscaledZ||E.y-x.y||E.x-x.x}).map(u=>u.tileID.key):s.map(u=>u.tileID).sort(OM).map(u=>u.key)}hasRenderableParent(n){const s=this.findLoadedParent(n,0);return!!s&&this._isIdRenderable(s.tileID.key)}_isIdRenderable(n,s){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(s||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(+n,"reloading")}}_reloadTile(n,s){const u=this._tiles[n];u&&(u.state!=="loading"&&(u.state=s),this._loadTile(u,this._tileLoaded.bind(this,u,n,s)))}_tileLoaded(n,s,u,f){if(f)if(n.state="errored",f.status!==404)this._source.fire(new Ga(f,{tile:n}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const m=this.map.painter.terrain;this.update(this.transform,m.getScaledDemTileSize(),!0),m.resetTileLookupCache(this.id)}else this.update(this.transform);else n.timeAdded=ir.now(),u==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(s,n),this._source.type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),this._source.fire(new yr("data",{dataType:"source",tile:n,coord:n.tileID,sourceCacheId:this.id}))}_backfillDEM(n){const s=this.getRenderableIds();for(let f=0;f<s.length;f++){const m=s[f];if(n.neighboringTiles&&n.neighboringTiles[m]){const _=this.getTileByID(m);u(n,_),u(_,n)}}function u(f,m){if(!f.dem||f.dem.borderReady)return;f.needsHillshadePrepare=!0,f.needsDEMTextureUpload=!0;let _=m.tileID.canonical.x-f.tileID.canonical.x;const x=m.tileID.canonical.y-f.tileID.canonical.y,E=Math.pow(2,f.tileID.canonical.z),T=m.tileID.key;_===0&&x===0||Math.abs(x)>1||(Math.abs(_)>1&&(Math.abs(_+E)===1?_+=E:Math.abs(_-E)===1&&(_-=E)),m.dem&&f.dem&&(f.dem.backfillBorder(m.dem,_,x),f.neighboringTiles&&f.neighboringTiles[T]&&(f.neighboringTiles[T].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,s,u,f){for(const m in this._tiles){let _=this._tiles[m];if(f[m]||!_.hasData()||_.tileID.overscaledZ<=s||_.tileID.overscaledZ>u)continue;let x=_.tileID;for(;_&&_.tileID.overscaledZ>s+1;){const T=_.tileID.scaledTo(_.tileID.overscaledZ-1);_=this._tiles[T.key],_&&_.hasData()&&(x=T)}let E=x;for(;E.overscaledZ>s;)if(E=E.scaledTo(E.overscaledZ-1),n[E.key]){f[x.key]=x;break}}}findLoadedParent(n,s){if(n.key in this._loadedParentTiles){const u=this._loadedParentTiles[n.key];return u&&u.tileID.overscaledZ>=s?u:null}for(let u=n.overscaledZ-1;u>=s;u--){const f=n.scaledTo(u),m=this._getLoadedTile(f);if(m)return m}}_getLoadedTile(n){const s=this._tiles[n.key];return s&&s.hasData()?s:this._cache.getByKey(this._source.reparseOverscaled?n.wrapped().key:n.canonical.key)}updateCacheSize(n,s){s=s||this._source.tileSize;const u=Math.ceil(n.width/s)+1,f=Math.ceil(n.height/s)+1,m=Math.floor(u*f*5),_=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,m):m,x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(x)}handleWrapJump(n){const s=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,s){const u={};for(const f in this._tiles){const m=this._tiles[f];m.tileID=m.tileID.unwrapTo(m.tileID.wrap+s),u[m.tileID.key]=m}this._tiles=u;for(const f in this._timers)clearTimeout(this._timers[f]),delete this._timers[f];for(const f in this._tiles)this._setTileReloadTimer(+f,this._tiles[f])}}update(n,s,u){if(this.transform=n,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!u)return;let f;this.updateCacheSize(n,s),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(x=>new lo(x.canonical.z,x.wrap,x.canonical.z,x.canonical.x,x.canonical.y)):(f=n.coveringTiles({tileSize:s||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!u,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(f=f.filter(x=>this._source.hasTile(x)))):f=[];const m=this._updateRetainedTiles(f);if(FM(this._source.type)&&f.length!==0){const x={},E={},T=Object.keys(m);for(const I of T){const L=m[I],N=this._tiles[I];if(!N||N.fadeEndTime&&N.fadeEndTime<=ir.now())continue;const V=this.findLoadedParent(L,Math.max(L.overscaledZ-fu.maxOverzooming,this._source.minzoom));V&&(this._addTile(V.tileID),x[V.tileID.key]=V.tileID),E[I]=L}const A=f[f.length-1].overscaledZ;for(const I in this._tiles){const L=this._tiles[I];if(m[I]||!L.hasData())continue;let N=L.tileID;for(;N.overscaledZ>A;){N=N.scaledTo(N.overscaledZ-1);const V=this._tiles[N.key];if(V&&V.hasData()&&E[N.key]){m[I]=L.tileID;break}}}for(const I in x)m[I]||(this._coveredTiles[I]=!0,m[I]=x[I])}for(const x in m)this._tiles[x].clearFadeHold();const _=function(x,E){const T=[];for(const A in x)A in E||T.push(A);return T}(this._tiles,m);for(const x of _){const E=this._tiles[x];E.hasSymbolBuckets&&!E.holdingForFade()?E.setHoldDuration(this.map._fadeDuration):E.hasSymbolBuckets&&!E.symbolFadeFinished()||this._removeTile(+x)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(+n)}_updateRetainedTiles(n){const s={};if(n.length===0)return s;const u={},f=n.reduce((T,A)=>Math.min(T,A.overscaledZ),1/0),m=n[0].overscaledZ,_=Math.max(m-fu.maxOverzooming,this._source.minzoom),x=Math.max(m+fu.maxUnderzooming,this._source.minzoom),E={};for(const T of n){const A=this._addTile(T);s[T.key]=T,A.hasData()||f<this._source.maxzoom&&(E[T.key]=T)}this._retainLoadedChildren(E,f,x,s);for(const T of n){let A=this._tiles[T.key];if(A.hasData())continue;if(T.canonical.z>=this._source.maxzoom){const L=T.children(this._source.maxzoom)[0],N=this.getTile(L);if(N&&N.hasData()){s[L.key]=L;continue}}else{const L=T.children(this._source.maxzoom);if(s[L[0].key]&&s[L[1].key]&&s[L[2].key]&&s[L[3].key])continue}let I=A.wasRequested();for(let L=T.overscaledZ-1;L>=_;--L){const N=T.scaledTo(L);if(u[N.key]||(u[N.key]=!0,A=this.getTile(N),!A&&I&&(A=this._addTile(N)),A&&(s[N.key]=N,I=A.wasRequested(),A.hasData())))break}}return s}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const s=[];let u,f=this._tiles[n].tileID;for(;f.overscaledZ>0;){if(f.key in this._loadedParentTiles){u=this._loadedParentTiles[f.key];break}s.push(f.key);const m=f.scaledTo(f.overscaledZ-1);if(u=this._getLoadedTile(m),u)break;f=m}for(const m of s)this._loadedParentTiles[m]=u}}_addTile(n){let s=this._tiles[n.key];if(s)return s;s=this._cache.getAndRemove(n),s&&(this._setTileReloadTimer(n.key,s),s.tileID=n,this._state.initializeTileState(s,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,s)));const u=!!s;if(!u){const f=this.map?this.map.painter:null;s=new nb(n,this._source.tileSize*n.overscaleFactor(),this.transform.tileZoom,f,this._isRaster),this._loadTile(s,this._tileLoaded.bind(this,s,n.key,s.state))}return s?(s.uses++,this._tiles[n.key]=s,u||this._source.fire(new yr("dataloading",{tile:s,coord:s.tileID,dataType:"source"})),s):null}_setTileReloadTimer(n,s){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const u=s.getExpiryTimeout();u&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},u))}_removeTile(n){const s=this._tiles[n];s&&(s.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),s.uses>0||(s.hasData()&&s.state!=="reloading"?this._cache.add(s.tileID,s,s.getExpiryTimeout()):(s.aborted=!0,this._abortTile(s),this._unloadTile(s))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(+n);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(n,s,u){const f=[],m=this.transform;if(!m)return f;const _=m.projection.name==="globe",x=ts(m.center.lng);for(const E in this._tiles){const T=this._tiles[E];if(u&&T.clearQueryDebugViz(),T.holdingForFade())continue;let A;if(_){const I=T.tileID.canonical;if(I.z===0){const L=[Math.abs(ze(x,...Ip(I,-1))-x),Math.abs(ze(x,...Ip(I,1))-x)];A=[0,2*L.indexOf(Math.min(...L))-1]}else{const L=[Math.abs(ze(x,...Ip(I,-1))-x),Math.abs(ze(x,...Ip(I,0))-x),Math.abs(ze(x,...Ip(I,1))-x)];A=[L.indexOf(Math.min(...L))-1]}}else A=[0];for(const I of A){const L=n.containsTile(T,m,s,I);L&&f.push(L)}}return f}getVisibleCoordinates(n){const s=this.getRenderableIds(n).map(u=>this._tiles[u].tileID);for(const u of s)u.projMatrix=this.transform.calculateProjMatrix(u.toUnwrapped());return s}hasTransition(){if(this._source.hasTransition())return!0;if(FM(this._source.type))for(const n in this._tiles){const s=this._tiles[n];if(s.fadeEndTime!==void 0&&s.fadeEndTime>=ir.now())return!0}return!1}setFeatureState(n,s,u){this._state.updateState(n=n||"_geojsonTileLayer",s,u)}removeFeatureState(n,s,u){this._state.removeFeatureState(n=n||"_geojsonTileLayer",s,u)}getFeatureState(n,s){return this._state.getState(n=n||"_geojsonTileLayer",s)}setDependencies(n,s,u){const f=this._tiles[n];f&&f.setDependencies(s,u)}reloadTilesForDependencies(n,s){for(const u in this._tiles)this._tiles[u].hasDependency(n,s)&&this._reloadTile(+u,"reloading");this._cache.filter(u=>!u.hasDependency(n,s))}_preloadTiles(n,s){const u=new Map,f=Array.isArray(n)?n:[n],m=this.map.painter.terrain,_=this.usedForTerrain&&m?m.getScaledDemTileSize():this._source.tileSize;for(const x of f){const E=x.coveringTiles({tileSize:_,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const T of E)u.set(T.key,T);this.usedForTerrain&&x.updateElevation(!1)}Ue(Array.from(u.values()),(x,E)=>{const T=new nb(x,this._source.tileSize*x.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(T,A=>{this._source.type==="raster-dem"&&T.dem&&this._backfillDEM(T),E(A,T)})},s)}}function OM(o,n){const s=Math.abs(2*o.wrap)-+(o.wrap<0),u=Math.abs(2*n.wrap)-+(n.wrap<0);return o.overscaledZ-n.overscaledZ||u-s||n.canonical.y-o.canonical.y||n.canonical.x-o.canonical.x}function FM(o){return o==="raster"||o==="image"||o==="video"||o==="custom"}function Ip(o,n){const s=1<<o.z;return[o.x/s+n,(o.x+1)/s+n]}fu.maxOverzooming=10,fu.maxUnderzooming=3;class v0{constructor(n,s,u){this._demTile=n,this._dem=this._demTile.dem,this._scale=s,this._offset=u}static create(n,s,u){const f=u||n.findDEMTileFor(s);if(!f||!f.dem)return;const m=f.dem,_=f.tileID,x=1<<s.canonical.z-_.canonical.z;return new v0(f,f.tileSize/kn/x,[(s.canonical.x/x-_.canonical.x)*m.dim,(s.canonical.y/x-_.canonical.y)*m.dim])}tileCoordToPixel(n,s){const u=s*this._scale+this._offset[1],f=Math.floor(n*this._scale+this._offset[0]),m=Math.floor(u);return new Y(f,m)}getElevationAt(n,s,u,f){const m=n*this._scale+this._offset[0],_=s*this._scale+this._offset[1],x=Math.floor(m),E=Math.floor(_),T=this._dem;return f=!!f,u?Kn(Kn(T.get(x,E,f),T.get(x,E+1,f),_-E),Kn(T.get(x+1,E,f),T.get(x+1,E+1,f),_-E),m-x):T.get(x,E,f)}getElevationAtPixel(n,s,u){return this._dem.get(n,s,!!u)}getMeterToDEM(n){return(1<<this._demTile.tileID.canonical.z)*Ia(1,n)*this._dem.stride}}class BM{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Al(kn,16,0),this.featureIndexArray=new AT,this.promoteId=s}insert(n,s,u,f,m,_=0){const x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,f,m,_);const E=this.grid;for(let T=0;T<s.length;T++){const A=s[T],I=[1/0,1/0,-1/0,-1/0];for(let L=0;L<A.length;L++){const N=A[L];I[0]=Math.min(I[0],N.x),I[1]=Math.min(I[1],N.y),I[2]=Math.max(I[2],N.x),I[3]=Math.max(I[3],N.y)}I[0]<kn&&I[1]<kn&&I[2]>=0&&I[3]>=0&&E.insert(x,I[0],I[1],I[2],I[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Ux(new Sp(this.rawTileData)).layers,this.sourceLayerCoder=new SM(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const n in this.vtLayers)this.vtFeatures[n]=[]}return this.vtLayers}query(n,s,u,f){this.loadVTLayers();const m=n.params||{},_=wd(m.filter),x=n.tileResult,E=n.transform,T=x.bufferedTilespaceBounds,A=this.grid.query(T.min.x,T.min.y,T.max.x,T.max.y,(V,X,re,ge)=>hC(x.bufferedTilespaceGeometry,V,X,re,ge));A.sort(TB);let I=null;E.elevation&&A.length>0&&(I=v0.create(E.elevation,this.tileID));const L={};let N;for(let V=0;V<A.length;V++){const X=A[V];if(X===N)continue;N=X;const re=this.featureIndexArray.get(X);let ge=null;this.loadMatchingFeature(L,re,_,m.layers,m.availableImages,s,u,f,(Te,me,Se,Re=0)=>(ge||(ge=Ps(Te,this.tileID.canonical,n.tileTransform)),me.queryIntersectsFeature(x,Te,Se,ge,this.z,n.transform,n.pixelPosMatrix,I,Re)))}return L}loadMatchingFeature(n,s,u,f,m,_,x,E,T){const{featureIndex:A,bucketIndex:I,sourceLayerIndex:L,layoutVertexArrayOffset:N}=s,V=this.bucketLayerIDs[I];if(f&&!function(Te,me){for(let Se=0;Se<Te.length;Se++)if(me.indexOf(Te[Se])>=0)return!0;return!1}(f,V))return;const X=this.sourceLayerCoder.decode(L),re=this.vtLayers[X].feature(A);if(u.needGeometry){const Te=cu(re,!0);if(!u.filter(new He(this.tileID.overscaledZ),Te,this.tileID.canonical))return}else if(!u.filter(new He(this.tileID.overscaledZ),re))return;const ge=this.getId(re,X);for(let Te=0;Te<V.length;Te++){const me=V[Te];if(f&&f.indexOf(me)<0)continue;const Se=_[me];if(!Se)continue;let Re={};ge!==void 0&&E&&(Re=E.getState(Se.sourceLayer||"_geojsonTileLayer",ge));const Ce=_e({},x[me]);Ce.paint=NM(Ce.paint,Se.paint,re,Re,m),Ce.layout=NM(Ce.layout,Se.layout,re,Re,m);const it=!T||T(re,Se,Re,N);if(!it)continue;const et=new EM(re,this.z,this.x,this.y,ge);et.layer=Ce;let gt=n[me];gt===void 0&&(gt=n[me]=[]),gt.push({featureIndex:A,feature:et,intersectionZ:it})}}lookupSymbolFeatures(n,s,u,f,m,_,x,E){const T={};this.loadVTLayers();const A=wd(m);for(const I of n)this.loadMatchingFeature(T,{bucketIndex:u,sourceLayerIndex:f,featureIndex:I,layoutVertexArrayOffset:0},A,_,x,E,s);return T}loadFeature(n){const{featureIndex:s,sourceLayerIndex:u}=n;this.loadVTLayers();const f=this.sourceLayerCoder.decode(u),m=this.vtFeatures[f];if(m[s])return m[s];const _=this.vtLayers[f].feature(s);return m[s]=_,_}hasLayer(n){for(const s of this.bucketLayerIDs)for(const u of s)if(n===u)return!0;return!1}getId(n,s){let u=n.id;if(this.promoteId){const f=typeof this.promoteId=="string"?this.promoteId:this.promoteId[s];f!=null&&(u=n.properties[f]),typeof u=="boolean"&&(u=Number(u))}return u}}function NM(o,n,s,u,f){return zt(o,(m,_)=>{const x=n instanceof rt?n.get(_):null;return x&&x.evaluate?x.evaluate(s,u,f):x})}function TB(o,n){return n-o}nn(BM,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class $M{constructor(n,s){this.width=n,this.height=s,this.nextRow=0,this.image=new Ls({width:n,height:s}),this.positions={},this.uploaded=!1}getDash(n,s){const u=this.getKey(n,s);return this.positions[u]}trim(){const n=this.width,s=this.height=Ge(this.nextRow);this.image.resize({width:n,height:s})}getKey(n,s){return n.join(",")+s}getDashRanges(n,s,u){const f=[];let m=n.length%2==1?-n[n.length-1]*u:0,_=n[0]*u,x=!0;f.push({left:m,right:_,isDash:x,zeroLength:n[0]===0});let E=n[0];for(let T=1;T<n.length;T++){x=!x;const A=n[T];m=E*u,E+=A,_=E*u,f.push({left:m,right:_,isDash:x,zeroLength:A===0})}return f}addRoundDash(n,s,u){const f=s/2;for(let m=-u;m<=u;m++){const _=this.width*(this.nextRow+u+m);let x=0,E=n[x];for(let T=0;T<this.width;T++){T/E.right>1&&(E=n[++x]);const A=Math.abs(T-E.left),I=Math.abs(T-E.right),L=Math.min(A,I);let N;const V=m/u*(f+1);if(E.isDash){const X=f-Math.abs(V);N=Math.sqrt(L*L+X*X)}else N=f-Math.sqrt(L*L+V*V);this.image.data[_+T]=Math.max(0,Math.min(255,N+128))}}}addRegularDash(n,s){for(let E=n.length-1;E>=0;--E){const T=n[E],A=n[E+1];T.zeroLength?n.splice(E,1):A&&A.isDash===T.isDash&&(A.left=T.left,n.splice(E,1))}const u=n[0],f=n[n.length-1];u.isDash===f.isDash&&(u.left=f.left-this.width,f.right=u.right+this.width);const m=this.width*this.nextRow;let _=0,x=n[_];for(let E=0;E<this.width;E++){E/x.right>1&&(x=n[++_]);const T=Math.abs(E-x.left),A=Math.abs(E-x.right),I=Math.min(T,A);this.image.data[m+E]=Math.max(0,Math.min(255,(x.isDash?I:-I)+s+128))}}addDash(n,s){const u=this.getKey(n,s);if(this.positions[u])return this.positions[u];const f=s==="round",m=f?7:0,_=2*m+1;if(this.nextRow+_>this.height)return Ct("LineAtlas out of space"),null;n.length===0&&n.push(1);let x=0;for(let A=0;A<n.length;A++)n[A]<0&&(Ct("Negative value is found in line dasharray, replacing values with 0"),n[A]=0),x+=n[A];if(x!==0){const A=this.width/x,I=this.getDashRanges(n,this.width,A);f?this.addRoundDash(I,A,m):this.addRegularDash(I,s==="square"?.5*A:0)}const E=this.nextRow+m;this.nextRow+=_;const T={tl:[E,m],br:[x,0]};return this.positions[u]=T,T}}nn($M,"LineAtlas");class UM{constructor(n){const s={},u=[];for(const x in n){const E=n[x],T=s[x]={};for(const A in E.glyphs){const I=E.glyphs[+A];if(!I||I.bitmap.width===0||I.bitmap.height===0)continue;const L=I.metrics.localGlyph?2:1,N={x:0,y:0,w:I.bitmap.width+2*L,h:I.bitmap.height+2*L};u.push(N),T[A]=N}}const{w:f,h:m}=Gx(u),_=new Ls({width:f||1,height:m||1});for(const x in n){const E=n[x];for(const T in E.glyphs){const A=E.glyphs[+T];if(!A||A.bitmap.width===0||A.bitmap.height===0)continue;const I=s[x][T],L=A.metrics.localGlyph?2:1;Ls.copy(A.bitmap,_,{x:0,y:0},{x:I.x+L,y:I.y+L},A.bitmap)}}this.image=_,this.positions=s}}nn(UM,"GlyphAtlas");class CB{constructor(n){this.tileID=new lo(n.tileID.overscaledZ,n.tileID.wrap,n.tileID.canonical.z,n.tileID.canonical.x,n.tileID.canonical.y),this.tileZoom=n.tileZoom,this.uid=n.uid,this.zoom=n.zoom,this.canonical=n.tileID.canonical,this.pixelRatio=n.pixelRatio,this.tileSize=n.tileSize,this.source=n.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=n.showCollisionBoxes,this.collectResourceTiming=!!n.collectResourceTiming,this.returnDependencies=!!n.returnDependencies,this.promoteId=n.promoteId,this.enableTerrain=!!n.enableTerrain,this.isSymbolTile=n.isSymbolTile,this.tileTransform=hu(n.tileID.canonical,n.projection),this.projection=n.projection}parse(n,s,u,f,m){this.status="parsing",this.data=n,this.collisionBoxArray=new cx;const _=new SM(Object.keys(n.layers).sort()),x=new BM(this.tileID,this.promoteId);x.bucketLayerIDs=[];const E={},T=new $M(256,256),A={featureIndex:x,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:T,availableImages:u},I=s.familiesBySource[this.source];for(const Re in I){const Ce=n.layers[Re];if(!Ce)continue;let it=!1,et=!1;for(const st of I[Re])st[0].type==="symbol"?it=!0:et=!0;if(this.isSymbolTile===!0&&!it||this.isSymbolTile===!1&&!et)continue;Ce.version===1&&Ct(`Vector tile source "${this.source}" layer "${Re}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const gt=_.encode(Re),Pt=[];for(let st=0;st<Ce.length;st++){const vt=Ce.feature(st),bt=x.getId(vt,Re);Pt.push({feature:vt,id:bt,index:st,sourceLayerIndex:gt})}for(const st of I[Re]){const vt=st[0];this.isSymbolTile!==void 0&&vt.type==="symbol"!==this.isSymbolTile||vt.minzoom&&this.zoom<Math.floor(vt.minzoom)||vt.maxzoom&&this.zoom>=vt.maxzoom||vt.visibility!=="none"&&(sb(st,this.zoom,u),(E[vt.id]=vt.createBucket({index:x.bucketLayerIDs.length,layers:st,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:gt,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:u})).populate(Pt,A,this.tileID.canonical,this.tileTransform),x.bucketLayerIDs.push(st.map(bt=>bt.id)))}}let L,N,V,X;T.trim();const re={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},ge=zt(A.glyphDependencies,Re=>Object.keys(Re).map(Number));Object.keys(ge).length?f.send("getGlyphs",{uid:this.uid,stacks:ge},(Re,Ce)=>{L||(L=Re,N=Ce,Se.call(this))},void 0,!1,re):N={};const Te=Object.keys(A.iconDependencies);Te.length?f.send("getImages",{icons:Te,source:this.source,tileID:this.tileID,type:"icons"},(Re,Ce)=>{L||(L=Re,V=Ce,Se.call(this))},void 0,!1,re):V={};const me=Object.keys(A.patternDependencies);function Se(){if(L)return m(L);if(N&&V&&X){const Re=new UM(N),Ce=new KC(V,X);for(const it in E){const et=E[it];et instanceof Fl?(sb(et.layers,this.zoom,u),QF(et,N,Re.positions,V,Ce.iconPositions,this.showCollisionBoxes,u,this.tileID.canonical,this.tileZoom,this.projection)):et.hasPattern&&(et instanceof r0||et instanceof Qy||et instanceof vp)&&(sb(et.layers,this.zoom,u),et.addFeatures(A,this.tileID.canonical,Ce.patternPositions,u,this.tileTransform))}this.status="done",m(null,{buckets:Ee(E).filter(it=>!it.isEmpty()),featureIndex:x,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Re.image,lineAtlas:T,imageAtlas:Ce,glyphMap:this.returnDependencies?N:null,iconMap:this.returnDependencies?V:null,glyphPositions:this.returnDependencies?Re.positions:null})}}me.length?f.send("getImages",{icons:me,source:this.source,tileID:this.tileID,type:"patterns"},(Re,Ce)=>{L||(L=Re,X=Ce,Se.call(this))},void 0,!1,re):X={},Se.call(this)}}function sb(o,n,s){const u=new He(n);for(const f of o)f.recalculate(u,s)}class VM{constructor(n){this.entries={},this.scheduler=n}request(n,s,u,f){const m=this.entries[n]=this.entries[n]||{callbacks:[]};if(m.result){const[_,x]=m.result;return this.scheduler?this.scheduler.add(()=>{f(_,x)},s):f(_,x),()=>{}}return m.callbacks.push(f),m.cancel||(m.cancel=u((_,x)=>{m.result=[_,x];for(const E of m.callbacks)this.scheduler?this.scheduler.add(()=>{E(_,x)},s):E(_,x);setTimeout(()=>delete this.entries[n],3e3)})),()=>{m.result||(m.callbacks=m.callbacks.filter(_=>_!==f),m.callbacks.length||(m.cancel(),delete this.entries[n]))}}}function jM(o,n,s){const u=JSON.stringify(o.request);return o.data&&(this.deduped.entries[u]={result:[null,o.data]}),this.deduped.request(u,{type:"parseTile",isSymbolTile:o.isSymbolTile,zoom:o.tileZoom},f=>{const m=tn(o.request,(_,x,E,T)=>{_?f(_):x&&f(null,{vectorTile:s?void 0:new Ux(new Sp(x)),rawData:x,cacheControl:E,expires:T})});return()=>{m.cancel(),f()}},n)}a.ARRAY_TYPE=Mo,a.AUTH_ERR_MSG=Ft,a.Aabb=so,a.Actor=class{constructor(o,n,s){this.target=o,this.parent=n,this.mapId=s,this.callbacks={},this.cancelCallbacks={},ht(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=pn()?o:b,this.scheduler=new vB}send(o,n,s,u,f=!1,m){const _=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(s.metadata=m,this.callbacks[_]=s);const x=or(this.globalScope)?void 0:[];return this.target.postMessage({id:_,type:o,hasCallback:!!s,targetMapId:u,mustQueue:f,sourceMapId:this.mapId,data:Yc(n,x)},x),{cancel:()=>{s&&delete this.callbacks[_],this.target.postMessage({id:_,type:"<cancel>",targetMapId:u,sourceMapId:this.mapId})}}}receive(o){const n=o.data,s=n.id;if(s&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){const u=this.cancelCallbacks[s];delete this.cancelCallbacks[s],u&&u.cancel()}else if(n.mustQueue||pn()){const u=this.callbacks[s];this.cancelCallbacks[s]=this.scheduler.add(()=>this.processTask(s,n),u&&u.metadata||{type:"message"})}else this.processTask(s,n)}processTask(o,n){if(n.type==="<response>"){const s=this.callbacks[o];delete this.callbacks[o],s&&(n.error?s(Qc(n.error)):s(null,Qc(n.data)))}else{const s=or(this.globalScope)?void 0:[],u=n.hasCallback?(m,_)=>{delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:m?Yc(m):null,data:Yc(_,s)},s)}:m=>{},f=Qc(n.data);if(this.parent[n.type])this.parent[n.type](n.sourceMapId,f,u);else if(this.parent.getWorkerSource){const m=n.type.split(".");this.parent.getWorkerSource(n.sourceMapId,m[0],f.source)[m[1]](f,u)}else u(new Error(`Could not find function ${n.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},a.CanonicalTileID=n0,a.Color=Jr,a.ColorMode=as,a.CullFaceMode=Pa,a.DEMData=_0,a.DataConstantProperty=qe,a.DedupedRequest=VM,a.DepthMode=Yd,a.EXTENT=kn,a.Elevation=class{isDataAvailableAtPoint(o){const n=this._source();if(this.isUsingMockSource()||!n||o.y<0||o.y>1)return!1;const s=n.getSource().maxzoom,u=1<<s,f=Math.floor(o.x),m=Math.floor((o.x-f)*u),_=Math.floor(o.y*u),x=this.findDEMTileFor(new lo(s,f,s,m,_));return!(!x||!x.dem)}getAtPointOrZero(o,n=0){return this.getAtPoint(o,n)||0}getAtPoint(o,n,s=!0){if(this.isUsingMockSource())return null;n==null&&(n=null);const u=this._source();if(!u||o.y<0||o.y>1)return n;const f=u.getSource().maxzoom,m=1<<f,_=Math.floor(o.x),x=o.x-_,E=new lo(f,_,f,Math.floor(x*m),Math.floor(o.y*m)),T=this.findDEMTileFor(E);if(!T||!T.dem)return n;const A=T.dem,I=1<<T.tileID.canonical.z,L=(x*I-T.tileID.canonical.x)*A.dim,N=(o.y*I-T.tileID.canonical.y)*A.dim,V=Math.floor(L),X=Math.floor(N);return(s?this.exaggeration():1)*Kn(Kn(A.get(V,X),A.get(V,X+1),N-X),Kn(A.get(V+1,X),A.get(V+1,X+1),N-X),L-V)}getAtTileOffset(o,n,s){const u=1<<o.canonical.z;return this.getAtPointOrZero(new Bd(o.wrap+(o.canonical.x+n/kn)/u,(o.canonical.y+s/kn)/u))}getAtTileOffsetFunc(o,n,s,u){return f=>{const m=this.getAtTileOffset(o,f.x,f.y),_=u.upVector(o.canonical,f.x,f.y);return Vo(_,_,m*u.upVectorScale(o.canonical,n,s).metersToTile),_}}getForTilePoints(o,n,s,u){if(this.isUsingMockSource())return!1;const f=v0.create(this,o,u);return!!f&&(n.forEach(m=>{m[2]=this.exaggeration()*f.getElevationAt(m[0],m[1],s)}),!0)}getMinMaxForTile(o){if(this.isUsingMockSource())return null;const n=this.findDEMTileFor(o);if(!n||!n.dem)return null;const s=n.dem.tree,u=n.tileID,f=1<<o.canonical.z-u.canonical.z;let m=o.canonical.x/f-u.canonical.x,_=o.canonical.y/f-u.canonical.y,x=0;for(let E=0;E<o.canonical.z-u.canonical.z&&!s.leaves[x];E++){m*=2,_*=2;const T=2*Math.floor(_)+Math.floor(m);x=s.childOffsets[x]+T,m%=1,_%=1}return{min:this.exaggeration()*s.minimums[x],max:this.exaggeration()*s.maximums[x]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(o,n,s){throw new Error("Pure virtual method called.")}pointCoordinate(o){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(o){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},a.ErrorEvent=Ga,a.EvaluationParameters=He,a.Event=yr,a.Evented=xa,a.FillExtrusionBucket=vp,a.Frustum=bx,a.FrustumCorners=xx,a.GLOBE_RADIUS=Ja,a.GLOBE_SCALE_MATCH_LATITUDE=45,a.GLOBE_ZOOM_THRESHOLD_MAX=6,a.GLOBE_ZOOM_THRESHOLD_MIN=5,a.GlobeSharedBuffers=class{constructor(o){this._createGrid(o),this._createPoles(o)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const o of this._poleSegments)o.destroy();for(const o of this._gridSegments)o.withSkirts.destroy(),o.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const o of this._wireframeSegments)o.destroy()}}_fillGridMeshWithLods(o,n){const s=new yn,u=new $i,f=[],m=o+1+2,_=n[0]+1,x=n[0]+1+(1+n.length),E=(T,A,I)=>{let L=T===m-1?T-2:T===0?T:T-1;return L+=I?24575:0,[L,A]};for(let T=0;T<m;++T)s.emplaceBack(...E(T,0,!0));for(let T=0;T<_;++T)for(let A=0;A<m;++A)s.emplaceBack(...E(A,T,(A===0||A===m-1)&&!0));for(let T=0;T<n.length;++T){const A=n[T];for(let I=0;I<m;++I)s.emplaceBack(...E(I,A,!0))}for(let T=0;T<n.length;++T){const A=u.length,I=n[T]+1+2,L=new $i;for(let X=0;X<I-1;X++){const re=X===I-2,ge=re?m*(x-n.length+T-X):m;for(let Te=0;Te<m-1;Te++){const me=X*m+Te;X===0||re||Te===0||Te===m-2?(L.emplaceBack(me+1,me,me+ge),L.emplaceBack(me+ge,me+ge+1,me+1)):(u.emplaceBack(me+1,me,me+ge),u.emplaceBack(me+ge,me+ge+1,me+1))}}const N=li.simpleSegment(0,A,s.length,u.length-A);for(let X=0;X<L.uint16.length;X+=3)u.emplaceBack(L.uint16[X],L.uint16[X+1],L.uint16[X+2]);const V=li.simpleSegment(0,A,s.length,u.length-A);f.push({withoutSkirts:N,withSkirts:V})}return{vertices:s,indices:u,segments:f}}_createGrid(o){const n=this._fillGridMeshWithLods(su,cp);this._gridSegments=n.segments,this._gridBuffer=o.createVertexBuffer(n.vertices,lp.members),this._gridIndexBuffer=o.createIndexBuffer(n.indices,!0)}_createPoles(o){const n=new $i;for(let f=0;f<=su;f++)n.emplaceBack(0,f+1,f+2);this._poleIndexBuffer=o.createIndexBuffer(n,!0);const s=new Co,u=new Co;this._poleSegments=[];for(let f=0,m=0;f<5;f++){const _=360/(1<<f);s.emplaceBack(0,-Ja,0,.5,0),u.emplaceBack(0,-Ja,0,.5,1);for(let x=0;x<=su;x++){const E=x/su,T=Kn(0,_,E),[A,I,L]=zd(v5,x5,T,Ja);s.emplaceBack(A,I,L,E,0),u.emplaceBack(A,I,L,E,1)}this._poleSegments.push(li.simpleSegment(m,0,66,64)),m+=66}this._poleNorthVertexBuffer=o.createVertexBuffer(s,ZT,!1),this._poleSouthVertexBuffer=o.createVertexBuffer(u,ZT,!1)}getGridBuffers(o,n){return[this._gridBuffer,this._gridIndexBuffer,n?this._gridSegments[o].withSkirts:this._gridSegments[o].withoutSkirts]}getPoleBuffers(o){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[o]]}getWirefameBuffers(o,n){if(!this._wireframeSegments){const s=new Ya,u=su,f=u+1+2,m=1;this._wireframeSegments=[];for(let _=0,x=0;_<cp.length;_++){const E=cp[_];for(let A=m;A<E+m;A++)for(let I=m;I<u+m;I++){const L=A*f+I;s.emplaceBack(L,L+1),s.emplaceBack(L,L+f),s.emplaceBack(L,L+f+1)}const T=E*u*3;this._wireframeSegments.push(li.simpleSegment(0,x,(E+1)*f,T)),x+=T}this._wireframeIndexBuffer=o.createIndexBuffer(s)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[n]]}},a.GlyphManager=Zd,a.ImagePosition=Wx,a.LivePerformanceUtils=mt,a.LngLat=er,a.LngLatBounds=Dl,a.LocalGlyphMode=Zx,a.MAX_MERCATOR_LATITUDE=Vi,a.MercatorCoordinate=Bd,a.ONE_EM=ji,a.OverscaledTileID=lo,a.PerformanceMarkers=je,a.Properties=kt,a.RGBAImage=Ao,a.Ray=vx,a.RequestManager=class{constructor(o,n,s){this._transformRequestFn=o,this._customAccessToken=n,this._silenceAuthErrors=!!s,this._createSkuToken()}_createSkuToken(){const o=function(){let n="";for(let s=0;s<10;s++)n+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",U,n].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=o.token,this._skuTokenExpiresAt=o.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(o,n){return this._transformRequestFn&&this._transformRequestFn(o,n)||{url:o}}normalizeStyleURL(o,n){if(!Qt(o))return o;const s=jn(o);return s.path=`/styles/v1${s.path}`,this._makeAPIURL(s,this._customAccessToken||n)}normalizeGlyphsURL(o,n){if(!Qt(o))return o;const s=jn(o);return s.path=`/fonts/v1${s.path}`,this._makeAPIURL(s,this._customAccessToken||n)}normalizeSourceURL(o,n,s,u){if(!Qt(o))return o;const f=jn(o);return f.path=`/v4/${f.authority}.json`,f.params.push("secure"),s&&f.params.push(`language=${s}`),u&&f.params.push(`worldview=${u}`),this._makeAPIURL(f,this._customAccessToken||n)}normalizeSpriteURL(o,n,s,u){const f=jn(o);return Qt(o)?(f.path=`/styles/v1${f.path}/sprite${n}${s}`,this._makeAPIURL(f,this._customAccessToken||u)):(f.path+=`${n}${s}`,ar(f))}normalizeTileURL(o,n,s){if(this._isSkuTokenExpired()&&this._createSkuToken(),o&&!Qt(o))return o;const u=jn(o);u.path=u.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${n||s&&u.authority!=="raster"&&s===512?"@2x":""}${O.supported?".webp":"$1"}`),u.authority==="raster"?u.path=`/${P.RASTER_URL_PREFIX}${u.path}`:(u.path=u.path.replace(/^.+\/v4\//,"/"),u.path=`/${P.TILE_URL_VERSION}${u.path}`);const f=this._customAccessToken||function(m){for(const _ of m){const x=_.match(/^access_token=(.*)$/);if(x)return x[1]}return null}(u.params)||P.ACCESS_TOKEN;return P.REQUIRE_ACCESS_TOKEN&&f&&this._skuToken&&u.params.push(`sku=${this._skuToken}`),this._makeAPIURL(u,f)}canonicalizeTileURL(o,n){const s=jn(o);if(!s.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!s.path.match(/\.[\w]+$/))return o;let u="mapbox://";s.path.match(/^\/raster\/v1\//)?u+=`raster/${s.path.replace(`/${P.RASTER_URL_PREFIX}/`,"")}`:u+=`tiles/${s.path.replace(`/${P.TILE_URL_VERSION}/`,"")}`;let f=s.params;return n&&(f=f.filter(m=>!m.match(/^access_token=/))),f.length&&(u+=`?${f.join("&")}`),u}canonicalizeTileset(o,n){const s=!!n&&Qt(n),u=[];for(const f of o.tiles||[])Jt(f)?u.push(this.canonicalizeTileURL(f,s)):u.push(f);return u}_makeAPIURL(o,n){const s="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",u=jn(P.API_URL);if(o.protocol=u.protocol,o.authority=u.authority,o.protocol==="http"){const f=o.params.indexOf("secure");f>=0&&o.params.splice(f,1)}if(u.path!=="/"&&(o.path=`${u.path}${o.path}`),!P.REQUIRE_ACCESS_TOKEN)return ar(o);if(n=n||P.ACCESS_TOKEN,!this._silenceAuthErrors){if(!n)throw new Error(`An API access token is required to use Mapbox GL. ${s}`);if(n[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${s}`)}return o.params=o.params.filter(f=>f.indexOf("access_token")===-1),o.params.push(`access_token=${n||""}`),ar(o)}},a.ResourceType=Ne,a.SegmentVector=li,a.SourceCache=fu,a.StencilMode=ib,a.StructArrayLayout1ui2=Qa,a.StructArrayLayout2f1f2i16=Bi,a.StructArrayLayout2i4=yn,a.StructArrayLayout2ui4=Ya,a.StructArrayLayout3f12=Ni,a.StructArrayLayout3ui6=$i,a.StructArrayLayout4i8=ur,a.StructArrayLayout5f20=Co,a.Texture=Rp,a.Tile=nb,a.Transitionable=Ot,a.Uniform1f=By,a.Uniform1i=class extends ks{constructor(o){super(o),this.current=0}set(o,n,s){this.fetchUniformLocation(o,n)&&this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},a.Uniform2f=class extends ks{constructor(o){super(o),this.current=[0,0]}set(o,n,s){this.fetchUniformLocation(o,n)&&(s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1])))}},a.Uniform3f=class extends ks{constructor(o){super(o),this.current=[0,0,0]}set(o,n,s){this.fetchUniformLocation(o,n)&&(s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2])))}},a.Uniform4f=PT,a.UniformColor=LT,a.UniformMatrix2f=class extends ks{constructor(o){super(o),this.current=i5}set(o,n,s){if(this.fetchUniformLocation(o,n)){for(let u=0;u<4;u++)if(s[u]!==this.current[u]){this.current=s,this.gl.uniformMatrix2fv(this.location,!1,s);break}}}},a.UniformMatrix3f=class extends ks{constructor(o){super(o),this.current=r5}set(o,n,s){if(this.fetchUniformLocation(o,n)){for(let u=0;u<9;u++)if(s[u]!==this.current[u]){this.current=s,this.gl.uniformMatrix3fv(this.location,!1,s);break}}}},a.UniformMatrix4f=class extends ks{constructor(o){super(o),this.current=n5}set(o,n,s){if(this.fetchUniformLocation(o,n)){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let u=1;u<16;u++)if(s[u]!==this.current[u]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}}},a.UnwrappedTileID=FC,a.ValidationError=Zt,a.VectorTileFeature=e0,a.VectorTileWorkerSource=class extends xa{constructor(o,n,s,u,f){super(),this.actor=o,this.layerIndex=n,this.availableImages=s,this.loadVectorData=f||jM,this.loading={},this.loaded={},this.deduped=new VM(o.scheduler),this.isSpriteLoaded=u,this.scheduler=o.scheduler}loadTile(o,n){const s=o.uid,u=o&&o.request,f=u&&u.collectResourceTiming,m=this.loading[s]=new CB(o);m.abort=this.loadVectorData(o,(_,x)=>{const E=!this.loading[s];if(delete this.loading[s],E||_||!x)return m.status="done",E||(this.loaded[s]=m),n(_);const T=x.rawData,A={};x.expires&&(A.expires=x.expires),x.cacheControl&&(A.cacheControl=x.cacheControl),m.vectorTile=x.vectorTile||new Ux(new Sp(T));const I=()=>{m.parse(m.vectorTile,this.layerIndex,this.availableImages,this.actor,(L,N)=>{if(L||!N)return n(L);const V={};if(f){const X=cn(u);X.length>0&&(V.resourceTiming=JSON.parse(JSON.stringify(X)))}n(null,_e({rawTileData:T.slice(0)},N,A,V))})};this.isSpriteLoaded?I():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(I,{type:"parseTile",isSymbolTile:o.isSymbolTile,zoom:o.tileZoom}):I()}),this.loaded=this.loaded||{},this.loaded[s]=m})}reloadTile(o,n){const s=this.loaded,u=o.uid,f=this;if(s&&s[u]){const m=s[u];m.showCollisionBoxes=o.showCollisionBoxes,m.enableTerrain=!!o.enableTerrain,m.projection=o.projection,m.tileTransform=hu(o.tileID.canonical,o.projection);const _=(x,E)=>{const T=m.reloadCallback;T&&(delete m.reloadCallback,m.parse(m.vectorTile,f.layerIndex,this.availableImages,f.actor,T)),n(x,E)};m.status==="parsing"?m.reloadCallback=_:m.status==="done"&&(m.vectorTile?m.parse(m.vectorTile,this.layerIndex,this.availableImages,this.actor,_):_())}}abortTile(o,n){const s=o.uid,u=this.loading[s];u&&(u.abort&&u.abort(),delete this.loading[s]),n()}removeTile(o,n){const s=this.loaded,u=o.uid;s&&s[u]&&delete s[u],n()}},a.WritingMode=Go,a.ZoomDependentExpression=Ms,a.add=Is,a.addDynamicAttributes=m0,a.adjoint=function(o,n){var s=n[0],u=n[1],f=n[2],m=n[3],_=n[4],x=n[5],E=n[6],T=n[7],A=n[8];return o[0]=_*A-x*T,o[1]=f*T-u*A,o[2]=u*x-f*_,o[3]=x*E-m*A,o[4]=s*A-f*E,o[5]=f*m-s*x,o[6]=m*T-_*E,o[7]=u*E-s*T,o[8]=s*_-u*m,o},a.asyncAll=Ue,a.bezier=Ke,a.bindAll=ht,a.boundsAttributes=CM,a.bufferConvexPolygon=function(o,n){const s=[];for(let u=0;u<o.length;u++){const f=_t(u-1,-1,o.length-1),m=_t(u+1,-1,o.length-1),_=o[u],x=o[m],E=o[f].sub(_).unit(),T=x.sub(_).unit(),A=T.angleWithSep(E.x,E.y),I=E.add(T).unit().mult(-1*n/Math.sin(A/2));s.push(_.add(I))}return s},a.cacheEntryPossiblyAdded=function(o){ln++,ln>rn&&(o.getActor().send("enforceCacheSizeLimit",Ut),ln=0)},a.calculateGlobeLabelMatrix=function(o,n){const{x:s,y:u}=o.point,f=eC(s,u,o.worldSize/o._pixelsPerMercatorPixel,0,0);return iu(f,f,Ex(es(n)))},a.calculateGlobeMatrix=function(o){const{x:n,y:s}=o.point,{lng:u,lat:f}=o._center;return eC(n,s,o.worldSize,u,f)},a.calculateGlobeMercatorMatrix=function(o){const n=o.pixelsPerMeter,s=n/Ia(1,o.center.lat),u=ka(new Float64Array(16));return np(u,u,[o.point.x,o.point.y,0]),ou(u,u,[s,s,n]),Float32Array.from(u)},a.circumferenceAtLatitude=Cx,a.clamp=ze,a.clearTileCache=function(o){if(!En())return;const n=b.caches.delete(Xn);o&&n.catch(o).then(()=>o())},a.clipLine=lM,a.clone=function(o){var n=new Mo(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},a.clone$1=St,a.collisionCircleLayout=EF,a.config=P,a.conjugate=function(o,n){return o[0]=-n[0],o[1]=-n[1],o[2]=-n[2],o[3]=n[3],o},a.create=function(){var o=new Mo(16);return Mo!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},a.create$1=zT,a.createExpression=El,a.createLayout=dn,a.createStyleLayer=function(o){return o.type==="custom"?new mB(o):new yB[o.type](o)},a.cross=_x,a.degToRad=fe,a.distance=function(o,n){return Math.hypot(n[0]-o[0],n[1]-o[1],n[2]-o[2])},a.div=function(o,n,s){return o[0]=n[0]/s[0],o[1]=n[1]/s[1],o[2]=n[2]/s[2],o},a.dot=aa,a.earthRadius=hp,a.ease=ke,a.easeCubicInOut=Je,a.ecefToLatLng=function([o,n,s]){const u=Math.hypot(o,n,s),f=Math.atan2(o,s),m=.5*Math.PI-Math.acos(-n/u);return new er($(f),$(m))},a.emitValidationErrors=Sy,a.endsWith=Lt,a.enforceCacheSizeLimit=function(o){Tn(),hr&&hr.then(n=>{n.keys().then(s=>{for(let u=0;u<s.length-o;u++)n.delete(s[u])})})},a.evaluateSizeForFeature=i0,a.evaluateSizeForZoom=Gd,a.evaluateVariableOffset=fM,a.evented=we,a.exactEquals=function(o,n){return o[0]===n[0]&&o[1]===n[1]&&o[2]===n[2]&&o[3]===n[3]},a.exactEquals$1=function(o,n){return o[0]===n[0]&&o[1]===n[1]&&o[2]===n[2]},a.exported=ir,a.exported$1=O,a.extend=_e,a.extend$1=ba,a.fillExtrusionHeightLift=DC,a.filterObject=Rt,a.fromMat4=function(o,n){return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[4],o[4]=n[5],o[5]=n[6],o[6]=n[8],o[7]=n[9],o[8]=n[10],o},a.fromQuat=function(o,n){var s=n[0],u=n[1],f=n[2],m=n[3],_=s+s,x=u+u,E=f+f,T=s*_,A=u*_,I=u*x,L=f*_,N=f*x,V=f*E,X=m*_,re=m*x,ge=m*E;return o[0]=1-I-V,o[1]=A+ge,o[2]=L-re,o[3]=0,o[4]=A-ge,o[5]=1-T-V,o[6]=N+X,o[7]=0,o[8]=L+re,o[9]=N-X,o[10]=1-T-I,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},a.fromRotation=function(o,n){var s=Math.sin(n),u=Math.cos(n);return o[0]=u,o[1]=s,o[2]=0,o[3]=-s,o[4]=u,o[5]=0,o[6]=0,o[7]=0,o[8]=1,o},a.fromScaling=FT,a.furthestTileCorner=function(o){const n=Math.round((o+45+360)%360/90)%4;return ue[n]},a.getAABBPointSquareDist=function(o,n,s){let u=0;for(let f=0;f<2;++f){const m=s?s[f]:0;o[f]>m&&(u+=(o[f]-m)*(o[f]-m)),n[f]<m&&(u+=(m-n[f])*(m-n[f]))}return u},a.getAnchorAlignment=Hx,a.getAnchorJustification=Kx,a.getBounds=function(o){let n=1/0,s=1/0,u=-1/0,f=-1/0;for(const m of o)n=Math.min(n,m.x),s=Math.min(s,m.y),u=Math.max(u,m.x),f=Math.max(f,m.y);return{min:new Y(n,s),max:new Y(u,f)}},a.getColumn=Ln,a.getGridMatrix=function(o,n,s,u){const f=n.getNorth(),m=n.getSouth(),_=n.getWest(),x=n.getEast(),E=1<<o.z,T=x-_,A=f-m,I=T/su,L=-A/cp[s],N=[0,I,0,L,0,0,f,_,0];if(o.z>0){const V=180/u;OT(N,N,[V/T+1,0,0,0,V/A+1,0,-.5*V/I,.5*V/L,1])}return N[2]=E,N[5]=o.x,N[8]=o.y,N},a.getImage=It,a.getJSON=function(o,n){return Gt(_e(o,{type:"json"}),n)},a.getLatitudinalLod=function(o){const n=Vi-5;o=ze(o,-n,n)/n*90;const s=Math.pow(Math.abs(Math.sin(fe(o))),3);return Math.round(s*(cp.length-1))},a.getMapSessionAPI=Ve,a.getPerformanceMeasurement=cn,a.getProjection=bM,a.getRTLTextPluginStatus=Ie,a.getReferrer=lt,a.getTilePoint=function(o,{x:n,y:s},u=0){return new Y(((n-u)*o.scale-o.x)*kn,(s*o.scale-o.y)*kn)},a.getTileVec3=function(o,n,s=0){return Dd(((n.x-s)*o.scale-o.x)*kn,(n.y*o.scale-o.y)*kn,iC(n.z,n.y))},a.getVideo=function(o,n){const s=b.document.createElement("video");s.muted=!0,s.onloadstart=function(){n(null,s)};for(let u=0;u<o.length;u++){const f=b.document.createElement("source");Be(o[u])||(s.crossOrigin="Anonymous"),f.src=o[u],s.appendChild(f)}return{cancel:()=>{}}},a.globeCenterToScreenPoint=function(o){const n=[0,0,0],s=ka(new Float64Array(16));return iu(s,o.pixelMatrix,o.globeMatrix),ei(n,n,s),new Y(n[0],n[1])},a.globeDenormalizeECEF=Ex,a.globeECEFOrigin=function(o,n){const s=[0,0,0];return ei(s,s,dp(es(n.canonical))),ei(s,s,o),s},a.globeMetersToEcef=Vy,a.globeNormalizeECEF=dp,a.globePixelsToTileUnits=function(o,n){return kn/(512*Math.pow(2,o))*Gy(es(n))},a.globePoleMatrixForTile=function(o,n,s){const u=ka(new Float64Array(16)),f=(n/(1<<o)-.5)*Math.PI*2;return Uy(u,s.globeMatrix,f),Float32Array.from(u)},a.globeTileBounds=es,a.globeTiltAtLngLat=tC,a.globeToMercatorTransition=Fd,a.globeUseCustomAntiAliasing=function(o,n,s){const u=Fd(s.zoom),f=o.style.map._antialias,m=!!n.extStandardDerivatives,_=n.extStandardDerivativesForceOff||o.terrain&&o.terrain.exaggeration()>0;return u===0&&!f&&!_&&m},a.identity=ka,a.identity$1=WT,a.invert=px,a.isFullscreen=function(){return!!b.document.fullscreenElement||!!b.document.webkitFullscreenElement},a.isLngLatBehindGlobe=Tx,a.isMapAuthenticated=function(o){return Oe.has(o)},a.isMapboxURL=Qt,a.isSafariWithAntialiasingBug=function(o){const n=o.navigator?o.navigator.userAgent:null;return!!or(o)&&n&&(n.match("Version/15.4")||n.match("Version/15.5")||n.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},a.latFromMercatorY=Ui,a.latLngToECEF=Od,a.len=f5,a.length=rp,a.length$1=function(o){return Math.hypot(o[0],o[1],o[2],o[3])},a.lngFromMercatorX=jo,a.loadVectorTile=jM,a.makeRequest=Gt,a.mapValue=function(o,n,s,u,f){return ze((o-n)/(s-n)*(f-u)+u,u,f)},a.mercatorScale=oC,a.mercatorXfromLng=ts,a.mercatorYfromLat=ns,a.mercatorZfromAltitude=Ia,a.mul=d5,a.mul$1=h5,a.multiply=iu,a.multiply$1=OT,a.multiply$2=$T,a.nextPowerOfTwo=Ge,a.normalize=ao,a.normalize$1=p5,a.normalize$2=jT,a.number=Kn,a.ortho=function(o,n,s,u,f,m,_){var x=1/(n-s),E=1/(u-f),T=1/(m-_);return o[0]=-2*x,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*E,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*T,o[11]=0,o[12]=(n+s)*x,o[13]=(f+u)*E,o[14]=(_+m)*T,o[15]=1,o},a.pbf=Sp,a.perspective=function(o,n,s,u,f){var m,_=1/Math.tan(n/2);return o[0]=_/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=_,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,f!=null&&f!==1/0?(o[10]=(f+u)*(m=1/(u-f)),o[14]=2*f*u*m):(o[10]=-1,o[14]=-2*u),o},a.pick=function(o,n){const s={};for(let u=0;u<n.length;u++){const f=n[u];f in o&&(s[f]=o[f])}return s},a.plugin=Fe,a.pointGeometry=Y,a.polesInViewport=function(o){const n=ka(new Float64Array(16));iu(n,o.pixelMatrix,o.globeMatrix);const s=[0,sa,0],u=[0,la,0];return ei(s,s,n),ei(u,u,n),[s[0]>0&&s[0]<=o.width&&s[1]>0&&s[1]<=o.height&&!Tx(o,new er(o.center.lat,90)),u[0]>0&&u[0]<=o.width&&u[1]>0&&u[1]<=o.height&&!Tx(o,new er(o.center.lat,-90))]},a.polygonContainsPoint=uu,a.polygonIntersectsBox=hC,a.polygonIntersectsPolygon=lC,a.polygonizeBounds=function(o,n,s=0,u=!0){const f=new Y(s,s),m=o.sub(f),_=n.add(f),x=[m,new Y(_.x,m.y),_,new Y(m.x,_.y)];return u&&x.push(m.clone()),x},a.posAttributes=lp,a.postMapLoadEvent=oe,a.postPerformanceEvent=Pe,a.postTurnstileEvent=j,a.potpack=Gx,a.prevPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.floor(Math.log(o)/Math.LN2))},a.radToDeg=$,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.registerForPluginStateChange=function(o){return o({pluginStatus:de,pluginURL:Q}),we.on("pluginStateChange",o),o},a.removeAuthState=function(o){Oe.delete(o)},a.renderColorRamp=Dx,a.resample=aC,a.rotateX=mx,a.rotateX$1=qT,a.rotateY=Uy,a.rotateY$1=HT,a.rotateZ=function(o,n,s){var u=Math.sin(s),f=Math.cos(s),m=n[0],_=n[1],x=n[2],E=n[3],T=n[4],A=n[5],I=n[6],L=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=m*f+T*u,o[1]=_*f+A*u,o[2]=x*f+I*u,o[3]=E*f+L*u,o[4]=T*f-m*u,o[5]=A*f-_*u,o[6]=I*f-x*u,o[7]=L*f-E*u,o},a.rotateZ$1=function(o,n,s){s*=.5;var u=n[0],f=n[1],m=n[2],_=n[3],x=Math.sin(s),E=Math.cos(s);return o[0]=u*E+f*x,o[1]=f*E-u*x,o[2]=m*E+_*x,o[3]=_*E-m*x,o},a.scale=ou,a.scale$1=VT,a.scale$2=Vo,a.scaleAndAdd=ap,a.set=function(o,n,s,u){return o[0]=n,o[1]=s,o[2]=u,o},a.setCacheLimits=function(o,n){Ut=o,rn=n},a.setColumn=function(o,n,s){o[4*n+0]=s[0],o[4*n+1]=s[1],o[4*n+2]=s[2],o[4*n+3]=s[3]},a.setRTLTextPlugin=function(o,n,s=!1){if(de===te||de===ie||de===ae)throw new Error("setRTLTextPlugin cannot be called multiple times.");Q=ir.resolveURL(o),de=te,le=n,ye(),s||Ae()},a.smoothstep=nt,a.spec=pt,a.squaredLength=function(o){var n=o[0],s=o[1],u=o[2];return n*n+s*s+u*u},a.storeAuthState=function(o,n){n?Oe.add(o):Oe.delete(o)},a.sub=Ra,a.subtract=yx,a.symbolSize=TF,a.tileAABB=function(o,n,s,u,f,m,_,x,E){if(E.name==="globe")return _5(o,n,new n0(s,u,f));const T=hu({z:s,x:u,y:f},E);return new so([(m+T.x/T.scale)*n,n*(T.y/T.scale),_],[(m+T.x2/T.scale)*n,n*(T.y2/T.scale),x])},a.tileCornersToBounds=jy,a.tileTransform=hu,a.transformMat3=function(o,n,s){var u=n[0],f=n[1],m=n[2];return o[0]=u*s[0]+f*s[3]+m*s[6],o[1]=u*s[1]+f*s[4]+m*s[7],o[2]=u*s[2]+f*s[5]+m*s[8],o},a.transformMat4=ei,a.transformMat4$1=au,a.transformQuat=UT,a.transitionTileAABBinECEF=YT,a.translate=np,a.transpose=function(o,n){if(o===n){var s=n[1],u=n[2],f=n[5];o[1]=n[3],o[2]=n[6],o[3]=s,o[5]=n[7],o[6]=u,o[7]=f}else o[0]=n[0],o[1]=n[3],o[2]=n[6],o[3]=n[1],o[4]=n[4],o[5]=n[7],o[6]=n[2],o[7]=n[5],o[8]=n[8];return o},a.triggerPluginCompletionEvent=xe,a.uniqueId=be,a.updateGlobeVertexNormal=function(o,n,s,u,f){const m=5*n+2;o.float32[m+0]=s,o.float32[m+1]=u,o.float32[m+2]=f},a.validateCustomStyleLayer=function(o){const n=[],s=o.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},a.validateFilter=o=>Ea(qf(o)),a.validateFog=o=>Ea(xy(o)),a.validateLayer=o=>Ea(Zf(o)),a.validateLight=o=>Ea(vy(o)),a.validateSource=o=>Ea(Xc(o)),a.validateStyle=by,a.validateTerrain=o=>Ea(Xf(o)),a.values=Ee,a.vectorTile=Jy,a.version=S,a.warnOnce=Ct,a.window=b,a.wrap=_t}),d(["./shared"],function(a){function b(pe){if(typeof pe=="number"||typeof pe=="boolean"||typeof pe=="string"||pe==null)return JSON.stringify(pe);if(Array.isArray(pe)){let K="[";for(const oe of pe)K+=`${b(oe)},`;return`${K}]`}let j="{";for(const K of Object.keys(pe).sort())j+=`${K}:${b(pe[K])},`;return`${j}}`}function S(pe){let j="";for(const K of a.refProperties)j+=`/${b(pe[K])}`;return j}class k{constructor(j){this.keyCache={},j&&this.replace(j)}replace(j){this._layerConfigs={},this._layers={},this.update(j,[])}update(j,K){for(const ve of j)this._layerConfigs[ve.id]=ve,(this._layers[ve.id]=a.createStyleLayer(ve)).compileFilter(),this.keyCache[ve.id]&&delete this.keyCache[ve.id];for(const ve of K)delete this.keyCache[ve],delete this._layerConfigs[ve],delete this._layers[ve];this.familiesBySource={};const oe=function(ve,Pe){const We={};for(let Oe=0;Oe<ve.length;Oe++){const je=Pe&&Pe[ve[Oe].id]||S(ve[Oe]);Pe&&(Pe[ve[Oe].id]=je);let mt=We[je];mt||(mt=We[je]=[]),mt.push(ve[Oe])}const Ve=[];for(const Oe in We)Ve.push(We[Oe]);return Ve}(a.values(this._layerConfigs),this.keyCache);for(const ve of oe){const Pe=ve.map(qt=>this._layers[qt.id]),We=Pe[0];if(We.visibility==="none")continue;const Ve=We.source||"";let Oe=this.familiesBySource[Ve];Oe||(Oe=this.familiesBySource[Ve]={});const je=We.sourceLayer||"_geojsonTileLayer";let mt=Oe[je];mt||(mt=Oe[je]=[]),mt.push(Pe)}}}class P{loadTile(j,K){const{uid:oe,encoding:ve,rawImageData:Pe,padding:We,buildQuadTree:Ve}=j,Oe=a.window.ImageBitmap&&Pe instanceof a.window.ImageBitmap?this.getImageData(Pe,We):Pe;K(null,new a.DEMData(oe,Oe,ve,We<1,Ve))}getImageData(j,K){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(j.width,j.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=j.width,this.offscreenCanvas.height=j.height,this.offscreenCanvasContext.drawImage(j,0,0,j.width,j.height);const oe=this.offscreenCanvasContext.getImageData(-K,-K,j.width+2*K,j.height+2*K);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),oe}}var O=function pe(j,K){var oe,ve=j&&j.type;if(ve==="FeatureCollection")for(oe=0;oe<j.features.length;oe++)pe(j.features[oe],K);else if(ve==="GeometryCollection")for(oe=0;oe<j.geometries.length;oe++)pe(j.geometries[oe],K);else if(ve==="Feature")pe(j.geometry,K);else if(ve==="Polygon")G(j.coordinates,K);else if(ve==="MultiPolygon")for(oe=0;oe<j.coordinates.length;oe++)G(j.coordinates[oe],K);return j};function G(pe,j){if(pe.length!==0){F(pe[0],j);for(var K=1;K<pe.length;K++)F(pe[K],!j)}}function F(pe,j){for(var K=0,oe=0,ve=0,Pe=pe.length,We=Pe-1;ve<Pe;We=ve++){var Ve=(pe[ve][0]-pe[We][0])*(pe[We][1]+pe[ve][1]),Oe=K+Ve;oe+=Math.abs(K)>=Math.abs(Ve)?K-Oe+Ve:Ve-Oe+K,K=Oe}K+oe>=0!=!!j&&pe.reverse()}const q=a.VectorTileFeature.prototype.toGeoJSON;class ce{constructor(j){this._feature=j,this.extent=a.EXTENT,this.type=j.type,this.properties=j.tags,"id"in j&&!isNaN(j.id)&&(this.id=parseInt(j.id,10))}loadGeometry(){if(this._feature.type===1){const j=[];for(const K of this._feature.geometry)j.push([new a.pointGeometry(K[0],K[1])]);return j}{const j=[];for(const K of this._feature.geometry){const oe=[];for(const ve of K)oe.push(new a.pointGeometry(ve[0],ve[1]));j.push(oe)}return j}}toGeoJSON(j,K,oe){return q.call(this,j,K,oe)}}class B{constructor(j){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=j.length,this._features=j}feature(j){return new ce(this._features[j])}}var U={},Z={get exports(){return U},set exports(pe){U=pe}},J=a.pointGeometry,Y=a.vectorTile.VectorTileFeature,he=se;function se(pe,j){this.options=j||{},this.features=pe,this.length=pe.length}function De(pe,j){this.id=typeof pe.id=="number"?pe.id:void 0,this.type=pe.type,this.rawGeometry=pe.type===1?[pe.geometry]:pe.geometry,this.properties=pe.tags,this.extent=j||4096}se.prototype.feature=function(pe){return new De(this.features[pe],this.options.extent)},De.prototype.loadGeometry=function(){var pe=this.rawGeometry;this.geometry=[];for(var j=0;j<pe.length;j++){for(var K=pe[j],oe=[],ve=0;ve<K.length;ve++)oe.push(new J(K[ve][0],K[ve][1]));this.geometry.push(oe)}return this.geometry},De.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var pe=this.geometry,j=1/0,K=-1/0,oe=1/0,ve=-1/0,Pe=0;Pe<pe.length;Pe++)for(var We=pe[Pe],Ve=0;Ve<We.length;Ve++){var Oe=We[Ve];j=Math.min(j,Oe.x),K=Math.max(K,Oe.x),oe=Math.min(oe,Oe.y),ve=Math.max(ve,Oe.y)}return[j,oe,K,ve]},De.prototype.toGeoJSON=Y.prototype.toGeoJSON;var fe=a.pbf,$=he;function ue(pe){var j=new fe;return function(K,oe){for(var ve in K.layers)oe.writeMessage(3,Je,K.layers[ve])}(pe,j),j.finish()}function Je(pe,j){var K;j.writeVarintField(15,pe.version||1),j.writeStringField(1,pe.name||""),j.writeVarintField(5,pe.extent||4096);var oe={keys:[],values:[],keycache:{},valuecache:{}};for(K=0;K<pe.length;K++)oe.feature=pe.feature(K),j.writeMessage(2,Ke,oe);var ve=oe.keys;for(K=0;K<ve.length;K++)j.writeStringField(3,ve[K]);var Pe=oe.values;for(K=0;K<Pe.length;K++)j.writeMessage(4,Ue,Pe[K])}function Ke(pe,j){var K=pe.feature;K.id!==void 0&&j.writeVarintField(1,K.id),j.writeMessage(2,ke,pe),j.writeVarintField(3,K.type),j.writeMessage(4,_t,K)}function ke(pe,j){var K=pe.feature,oe=pe.keys,ve=pe.values,Pe=pe.keycache,We=pe.valuecache;for(var Ve in K.properties){var Oe=K.properties[Ve],je=Pe[Ve];if(Oe!==null){je===void 0&&(oe.push(Ve),Pe[Ve]=je=oe.length-1),j.writeVarint(je);var mt=typeof Oe;mt!=="string"&&mt!=="boolean"&&mt!=="number"&&(Oe=JSON.stringify(Oe));var qt=mt+":"+Oe,At=We[qt];At===void 0&&(ve.push(Oe),We[qt]=At=ve.length-1),j.writeVarint(At)}}}function ze(pe,j){return(j<<3)+(7&pe)}function nt(pe){return pe<<1^pe>>31}function _t(pe,j){for(var K=pe.loadGeometry(),oe=pe.type,ve=0,Pe=0,We=K.length,Ve=0;Ve<We;Ve++){var Oe=K[Ve],je=1;oe===1&&(je=Oe.length),j.writeVarint(ze(1,je));for(var mt=oe===3?Oe.length-1:Oe.length,qt=0;qt<mt;qt++){qt===1&&oe!==1&&j.writeVarint(ze(2,mt-1));var At=Oe[qt].x-ve,cn=Oe[qt].y-Pe;j.writeVarint(nt(At)),j.writeVarint(nt(cn)),ve+=At,Pe+=cn}oe===3&&j.writeVarint(ze(7,1))}}function Ue(pe,j){var K=typeof pe;K==="string"?j.writeStringField(1,pe):K==="boolean"?j.writeBooleanField(7,pe):K==="number"&&(pe%1!=0?j.writeDoubleField(3,pe):pe<0?j.writeSVarintField(6,pe):j.writeVarintField(5,pe))}function Ee(pe,j,K,oe,ve,Pe){if(ve-oe<=K)return;const We=oe+ve>>1;_e(pe,j,We,oe,ve,Pe%2),Ee(pe,j,K,oe,We-1,Pe+1),Ee(pe,j,K,We+1,ve,Pe+1)}function _e(pe,j,K,oe,ve,Pe){for(;ve>oe;){if(ve-oe>600){const je=ve-oe+1,mt=K-oe+1,qt=Math.log(je),At=.5*Math.exp(2*qt/3),cn=.5*Math.sqrt(qt*At*(je-At)/je)*(mt-je/2<0?-1:1);_e(pe,j,K,Math.max(oe,Math.floor(K-mt*At/je+cn)),Math.min(ve,Math.floor(K+(je-mt)*At/je+cn)),Pe)}const We=j[2*K+Pe];let Ve=oe,Oe=ve;for($e(pe,j,oe,K),j[2*ve+Pe]>We&&$e(pe,j,oe,ve);Ve<Oe;){for($e(pe,j,Ve,Oe),Ve++,Oe--;j[2*Ve+Pe]<We;)Ve++;for(;j[2*Oe+Pe]>We;)Oe--}j[2*oe+Pe]===We?$e(pe,j,oe,Oe):(Oe++,$e(pe,j,Oe,ve)),Oe<=K&&(oe=Oe+1),K<=Oe&&(ve=Oe-1)}}function $e(pe,j,K,oe){be(pe,K,oe),be(j,2*K,2*oe),be(j,2*K+1,2*oe+1)}function be(pe,j,K){const oe=pe[j];pe[j]=pe[K],pe[K]=oe}function Me(pe,j,K,oe){const ve=pe-K,Pe=j-oe;return ve*ve+Pe*Pe}Z.exports=ue,U.fromVectorTileJs=ue,U.fromGeojsonVt=function(pe,j){j=j||{};var K={};for(var oe in pe)K[oe]=new $(pe[oe].features,j),K[oe].name=oe,K[oe].version=j.version,K[oe].extent=j.extent;return ue({layers:K})},U.GeoJSONWrapper=$;const Ge=pe=>pe[0],ut=pe=>pe[1];class ht{constructor(j,K=Ge,oe=ut,ve=64,Pe=Float64Array){this.nodeSize=ve,this.points=j;const We=j.length<65536?Uint16Array:Uint32Array,Ve=this.ids=new We(j.length),Oe=this.coords=new Pe(2*j.length);for(let je=0;je<j.length;je++)Ve[je]=je,Oe[2*je]=K(j[je]),Oe[2*je+1]=oe(j[je]);Ee(Ve,Oe,ve,0,Ve.length-1,0)}range(j,K,oe,ve){return function(Pe,We,Ve,Oe,je,mt,qt){const At=[0,Pe.length-1,0],cn=[];let gn,mn;for(;At.length;){const An=At.pop(),zn=At.pop(),ir=At.pop();if(zn-ir<=qt){for(let yr=ir;yr<=zn;yr++)gn=We[2*yr],mn=We[2*yr+1],gn>=Ve&&gn<=je&&mn>=Oe&&mn<=mt&&cn.push(Pe[yr]);continue}const wn=Math.floor((ir+zn)/2);gn=We[2*wn],mn=We[2*wn+1],gn>=Ve&&gn<=je&&mn>=Oe&&mn<=mt&&cn.push(Pe[wn]);const gr=(An+1)%2;(An===0?Ve<=gn:Oe<=mn)&&(At.push(ir),At.push(wn-1),At.push(gr)),(An===0?je>=gn:mt>=mn)&&(At.push(wn+1),At.push(zn),At.push(gr))}return cn}(this.ids,this.coords,j,K,oe,ve,this.nodeSize)}within(j,K,oe){return function(ve,Pe,We,Ve,Oe,je){const mt=[0,ve.length-1,0],qt=[],At=Oe*Oe;for(;mt.length;){const cn=mt.pop(),gn=mt.pop(),mn=mt.pop();if(gn-mn<=je){for(let gr=mn;gr<=gn;gr++)Me(Pe[2*gr],Pe[2*gr+1],We,Ve)<=At&&qt.push(ve[gr]);continue}const An=Math.floor((mn+gn)/2),zn=Pe[2*An],ir=Pe[2*An+1];Me(zn,ir,We,Ve)<=At&&qt.push(ve[An]);const wn=(cn+1)%2;(cn===0?We-Oe<=zn:Ve-Oe<=ir)&&(mt.push(mn),mt.push(An-1),mt.push(wn)),(cn===0?We+Oe>=zn:Ve+Oe>=ir)&&(mt.push(An+1),mt.push(gn),mt.push(wn))}return qt}(this.ids,this.coords,j,K,oe,this.nodeSize)}}const Lt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:pe=>pe},zt=Math.fround||(Rt=new Float32Array(1),pe=>(Rt[0]=+pe,Rt[0]));var Rt;class St{constructor(j){this.options=or(Object.create(Lt),j),this.trees=new Array(this.options.maxZoom+1)}load(j){const{log:K,minZoom:oe,maxZoom:ve,nodeSize:Pe}=this.options;K&&console.time("total time");const We=`prepare ${j.length} points`;K&&console.time(We),this.points=j;let Ve=[];for(let Oe=0;Oe<j.length;Oe++)j[Oe].geometry&&Ve.push(Ct(j[Oe],Oe));this.trees[ve+1]=new ht(Ve,Wr,Ln,Pe,Float32Array),K&&console.timeEnd(We);for(let Oe=ve;Oe>=oe;Oe--){const je=+Date.now();Ve=this._cluster(Ve,Oe),this.trees[Oe]=new ht(Ve,Wr,Ln,Pe,Float32Array),K&&console.log("z%d: %d clusters in %dms",Oe,Ve.length,+Date.now()-je)}return K&&console.timeEnd("total time"),this}getClusters(j,K){let oe=((j[0]+180)%360+360)%360-180;const ve=Math.max(-90,Math.min(90,j[1]));let Pe=j[2]===180?180:((j[2]+180)%360+360)%360-180;const We=Math.max(-90,Math.min(90,j[3]));if(j[2]-j[0]>=360)oe=-180,Pe=180;else if(oe>Pe){const mt=this.getClusters([oe,ve,180,We],K),qt=this.getClusters([-180,ve,Pe,We],K);return mt.concat(qt)}const Ve=this.trees[this._limitZoom(K)],Oe=Ve.range(pn(oe),Pn(We),pn(Pe),Pn(ve)),je=[];for(const mt of Oe){const qt=Ve.points[mt];je.push(qt.numPoints?Kt(qt):this.points[qt.index])}return je}getChildren(j){const K=this._getOriginId(j),oe=this._getOriginZoom(j),ve="No cluster with the specified id.",Pe=this.trees[oe];if(!Pe)throw new Error(ve);const We=Pe.points[K];if(!We)throw new Error(ve);const Ve=this.options.radius/(this.options.extent*Math.pow(2,oe-1)),Oe=Pe.within(We.x,We.y,Ve),je=[];for(const mt of Oe){const qt=Pe.points[mt];qt.parentId===j&&je.push(qt.numPoints?Kt(qt):this.points[qt.index])}if(je.length===0)throw new Error(ve);return je}getLeaves(j,K,oe){const ve=[];return this._appendLeaves(ve,j,K=K||10,oe=oe||0,0),ve}getTile(j,K,oe){const ve=this.trees[this._limitZoom(j)],Pe=Math.pow(2,j),{extent:We,radius:Ve}=this.options,Oe=Ve/We,je=(oe-Oe)/Pe,mt=(oe+1+Oe)/Pe,qt={features:[]};return this._addTileFeatures(ve.range((K-Oe)/Pe,je,(K+1+Oe)/Pe,mt),ve.points,K,oe,Pe,qt),K===0&&this._addTileFeatures(ve.range(1-Oe/Pe,je,1,mt),ve.points,Pe,oe,Pe,qt),K===Pe-1&&this._addTileFeatures(ve.range(0,je,Oe/Pe,mt),ve.points,-1,oe,Pe,qt),qt.features.length?qt:null}getClusterExpansionZoom(j){let K=this._getOriginZoom(j)-1;for(;K<=this.options.maxZoom;){const oe=this.getChildren(j);if(K++,oe.length!==1)break;j=oe[0].properties.cluster_id}return K}_appendLeaves(j,K,oe,ve,Pe){const We=this.getChildren(K);for(const Ve of We){const Oe=Ve.properties;if(Oe&&Oe.cluster?Pe+Oe.point_count<=ve?Pe+=Oe.point_count:Pe=this._appendLeaves(j,Oe.cluster_id,oe,ve,Pe):Pe<ve?Pe++:j.push(Ve),j.length===oe)break}return Pe}_addTileFeatures(j,K,oe,ve,Pe,We){for(const Ve of j){const Oe=K[Ve],je=Oe.numPoints;let mt,qt,At;if(je)mt=Nt(Oe),qt=Oe.x,At=Oe.y;else{const mn=this.points[Oe.index];mt=mn.properties,qt=pn(mn.geometry.coordinates[0]),At=Pn(mn.geometry.coordinates[1])}const cn={type:1,geometry:[[Math.round(this.options.extent*(qt*Pe-oe)),Math.round(this.options.extent*(At*Pe-ve))]],tags:mt};let gn;je?gn=Oe.id:this.options.generateId?gn=Oe.index:this.points[Oe.index].id&&(gn=this.points[Oe.index].id),gn!==void 0&&(cn.id=gn),We.features.push(cn)}}_limitZoom(j){return Math.max(this.options.minZoom,Math.min(Math.floor(+j),this.options.maxZoom+1))}_cluster(j,K){const oe=[],{radius:ve,extent:Pe,reduce:We,minPoints:Ve}=this.options,Oe=ve/(Pe*Math.pow(2,K));for(let je=0;je<j.length;je++){const mt=j[je];if(mt.zoom<=K)continue;mt.zoom=K;const qt=this.trees[K+1],At=qt.within(mt.x,mt.y,Oe),cn=mt.numPoints||1;let gn=cn;for(const mn of At){const An=qt.points[mn];An.zoom>K&&(gn+=An.numPoints||1)}if(gn>cn&&gn>=Ve){let mn=mt.x*cn,An=mt.y*cn,zn=We&&cn>1?this._map(mt,!0):null;const ir=(je<<5)+(K+1)+this.points.length;for(const wn of At){const gr=qt.points[wn];if(gr.zoom<=K)continue;gr.zoom=K;const yr=gr.numPoints||1;mn+=gr.x*yr,An+=gr.y*yr,gr.parentId=ir,We&&(zn||(zn=this._map(mt,!0)),We(zn,this._map(gr)))}mt.parentId=ir,oe.push(Et(mn/gn,An/gn,ir,gn,zn))}else if(oe.push(mt),gn>1)for(const mn of At){const An=qt.points[mn];An.zoom<=K||(An.zoom=K,oe.push(An))}}return oe}_getOriginId(j){return j-this.points.length>>5}_getOriginZoom(j){return(j-this.points.length)%32}_map(j,K){if(j.numPoints)return K?or({},j.properties):j.properties;const oe=this.points[j.index].properties,ve=this.options.map(oe);return K&&ve===oe?or({},ve):ve}}function Et(pe,j,K,oe,ve){return{x:zt(pe),y:zt(j),zoom:1/0,id:K,parentId:-1,numPoints:oe,properties:ve}}function Ct(pe,j){const[K,oe]=pe.geometry.coordinates;return{x:zt(pn(K)),y:zt(Pn(oe)),zoom:1/0,index:j,parentId:-1}}function Kt(pe){return{type:"Feature",id:pe.id,properties:Nt(pe),geometry:{type:"Point",coordinates:[(j=pe.x,360*(j-.5)),vn(pe.y)]}};var j}function Nt(pe){const j=pe.numPoints,K=j>=1e4?`${Math.round(j/1e3)}k`:j>=1e3?Math.round(j/100)/10+"k":j;return or(or({},pe.properties),{cluster:!0,cluster_id:pe.id,point_count:j,point_count_abbreviated:K})}function pn(pe){return pe/360+.5}function Pn(pe){const j=Math.sin(pe*Math.PI/180),K=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return K<0?0:K>1?1:K}function vn(pe){const j=(180-360*pe)*Math.PI/180;return 360*Math.atan(Math.exp(j))/Math.PI-90}function or(pe,j){for(const K in j)pe[K]=j[K];return pe}function Wr(pe){return pe.x}function Ln(pe){return pe.y}function Xn(pe,j,K,oe){for(var ve,Pe=oe,We=K-j>>1,Ve=K-j,Oe=pe[j],je=pe[j+1],mt=pe[K],qt=pe[K+1],At=j+3;At<K;At+=3){var cn=hr(pe[At],pe[At+1],Oe,je,mt,qt);if(cn>Pe)ve=At,Pe=cn;else if(cn===Pe){var gn=Math.abs(At-We);gn<Ve&&(ve=At,Ve=gn)}}Pe>oe&&(ve-j>3&&Xn(pe,j,ve,oe),pe[ve+2]=Pe,K-ve>3&&Xn(pe,ve,K,oe))}function hr(pe,j,K,oe,ve,Pe){var We=ve-K,Ve=Pe-oe;if(We!==0||Ve!==0){var Oe=((pe-K)*We+(j-oe)*Ve)/(We*We+Ve*Ve);Oe>1?(K=ve,oe=Pe):Oe>0&&(K+=We*Oe,oe+=Ve*Oe)}return(We=pe-K)*We+(Ve=j-oe)*Ve}function fr(pe,j,K,oe){var ve={id:pe===void 0?null:pe,type:j,geometry:K,tags:oe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Pe){var We=Pe.geometry,Ve=Pe.type;if(Ve==="Point"||Ve==="MultiPoint"||Ve==="LineString")Ut(Pe,We);else if(Ve==="Polygon"||Ve==="MultiLineString")for(var Oe=0;Oe<We.length;Oe++)Ut(Pe,We[Oe]);else if(Ve==="MultiPolygon")for(Oe=0;Oe<We.length;Oe++)for(var je=0;je<We[Oe].length;je++)Ut(Pe,We[Oe][je])}(ve),ve}function Ut(pe,j){for(var K=0;K<j.length;K+=3)pe.minX=Math.min(pe.minX,j[K]),pe.minY=Math.min(pe.minY,j[K+1]),pe.maxX=Math.max(pe.maxX,j[K]),pe.maxY=Math.max(pe.maxY,j[K+1])}function rn(pe,j,K,oe){if(j.geometry){var ve=j.geometry.coordinates,Pe=j.geometry.type,We=Math.pow(K.tolerance/((1<<K.maxZoom)*K.extent),2),Ve=[],Oe=j.id;if(K.promoteId?Oe=j.properties[K.promoteId]:K.generateId&&(Oe=oe||0),Pe==="Point")En(ve,Ve);else if(Pe==="MultiPoint")for(var je=0;je<ve.length;je++)En(ve[je],Ve);else if(Pe==="LineString")Tn(ve,Ve,We,!1);else if(Pe==="MultiLineString"){if(K.lineMetrics){for(je=0;je<ve.length;je++)Tn(ve[je],Ve=[],We,!1),pe.push(fr(Oe,"LineString",Ve,j.properties));return}Cn(ve,Ve,We,!1)}else if(Pe==="Polygon")Cn(ve,Ve,We,!0);else{if(Pe!=="MultiPolygon"){if(Pe==="GeometryCollection"){for(je=0;je<j.geometry.geometries.length;je++)rn(pe,{id:Oe,geometry:j.geometry.geometries[je],properties:j.properties},K,oe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(je=0;je<ve.length;je++){var mt=[];Cn(ve[je],mt,We,!0),Ve.push(mt)}}pe.push(fr(Oe,Pe,Ve,j.properties))}}function En(pe,j){j.push(ln(pe[0])),j.push(Ne(pe[1])),j.push(0)}function Tn(pe,j,K,oe){for(var ve,Pe,We=0,Ve=0;Ve<pe.length;Ve++){var Oe=ln(pe[Ve][0]),je=Ne(pe[Ve][1]);j.push(Oe),j.push(je),j.push(0),Ve>0&&(We+=oe?(ve*je-Oe*Pe)/2:Math.sqrt(Math.pow(Oe-ve,2)+Math.pow(je-Pe,2))),ve=Oe,Pe=je}var mt=j.length-3;j[2]=1,Xn(j,0,mt,K),j[mt+2]=1,j.size=Math.abs(We),j.start=0,j.end=j.size}function Cn(pe,j,K,oe){for(var ve=0;ve<pe.length;ve++){var Pe=[];Tn(pe[ve],Pe,K,oe),j.push(Pe)}}function ln(pe){return pe/360+.5}function Ne(pe){var j=Math.sin(pe*Math.PI/180),K=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return K<0?0:K>1?1:K}function Ze(pe,j,K,oe,ve,Pe,We,Ve){if(oe/=j,Pe>=(K/=j)&&We<oe)return pe;if(We<K||Pe>=oe)return null;for(var Oe=[],je=0;je<pe.length;je++){var mt=pe[je],qt=mt.geometry,At=mt.type,cn=ve===0?mt.minX:mt.minY,gn=ve===0?mt.maxX:mt.maxY;if(cn>=K&&gn<oe)Oe.push(mt);else if(!(gn<K||cn>=oe)){var mn=[];if(At==="Point"||At==="MultiPoint")lt(qt,mn,K,oe,ve);else if(At==="LineString")Gt(qt,mn,K,oe,ve,!1,Ve.lineMetrics);else if(At==="MultiLineString")Be(qt,mn,K,oe,ve,!1);else if(At==="Polygon")Be(qt,mn,K,oe,ve,!0);else if(At==="MultiPolygon")for(var An=0;An<qt.length;An++){var zn=[];Be(qt[An],zn,K,oe,ve,!0),zn.length&&mn.push(zn)}if(mn.length){if(Ve.lineMetrics&&At==="LineString"){for(An=0;An<mn.length;An++)Oe.push(fr(mt.id,At,mn[An],mt.tags));continue}At!=="LineString"&&At!=="MultiLineString"||(mn.length===1?(At="LineString",mn=mn[0]):At="MultiLineString"),At!=="Point"&&At!=="MultiPoint"||(At=mn.length===3?"Point":"MultiPoint"),Oe.push(fr(mt.id,At,mn,mt.tags))}}}return Oe.length?Oe:null}function lt(pe,j,K,oe,ve){for(var Pe=0;Pe<pe.length;Pe+=3){var We=pe[Pe+ve];We>=K&&We<=oe&&(j.push(pe[Pe]),j.push(pe[Pe+1]),j.push(pe[Pe+2]))}}function Gt(pe,j,K,oe,ve,Pe,We){for(var Ve,Oe,je=tn(pe),mt=ve===0?ft:yt,qt=pe.start,At=0;At<pe.length-3;At+=3){var cn=pe[At],gn=pe[At+1],mn=pe[At+2],An=pe[At+3],zn=pe[At+4],ir=ve===0?cn:gn,wn=ve===0?An:zn,gr=!1;We&&(Ve=Math.sqrt(Math.pow(cn-An,2)+Math.pow(gn-zn,2))),ir<K?wn>K&&(Oe=mt(je,cn,gn,An,zn,K),We&&(je.start=qt+Ve*Oe)):ir>oe?wn<oe&&(Oe=mt(je,cn,gn,An,zn,oe),We&&(je.start=qt+Ve*Oe)):Le(je,cn,gn,mn),wn<K&&ir>=K&&(Oe=mt(je,cn,gn,An,zn,K),gr=!0),wn>oe&&ir<=oe&&(Oe=mt(je,cn,gn,An,zn,oe),gr=!0),!Pe&&gr&&(We&&(je.end=qt+Ve*Oe),j.push(je),je=tn(pe)),We&&(qt+=Ve)}var yr=pe.length-3;cn=pe[yr],gn=pe[yr+1],mn=pe[yr+2],(ir=ve===0?cn:gn)>=K&&ir<=oe&&Le(je,cn,gn,mn),yr=je.length-3,Pe&&yr>=3&&(je[yr]!==je[0]||je[yr+1]!==je[1])&&Le(je,je[0],je[1],je[2]),je.length&&j.push(je)}function tn(pe){var j=[];return j.size=pe.size,j.start=pe.start,j.end=pe.end,j}function Be(pe,j,K,oe,ve,Pe){for(var We=0;We<pe.length;We++)Gt(pe[We],j,K,oe,ve,Pe,!1)}function Le(pe,j,K,oe){pe.push(j),pe.push(K),pe.push(oe)}function ft(pe,j,K,oe,ve,Pe){var We=(Pe-j)/(oe-j);return pe.push(Pe),pe.push(K+(ve-K)*We),pe.push(1),We}function yt(pe,j,K,oe,ve,Pe){var We=(Pe-K)/(ve-K);return pe.push(j+(oe-j)*We),pe.push(Pe),pe.push(1),We}function It(pe,j){for(var K=[],oe=0;oe<pe.length;oe++){var ve,Pe=pe[oe],We=Pe.type;if(We==="Point"||We==="MultiPoint"||We==="LineString")ve=Ft(Pe.geometry,j);else if(We==="MultiLineString"||We==="Polygon"){ve=[];for(var Ve=0;Ve<Pe.geometry.length;Ve++)ve.push(Ft(Pe.geometry[Ve],j))}else if(We==="MultiPolygon")for(ve=[],Ve=0;Ve<Pe.geometry.length;Ve++){for(var Oe=[],je=0;je<Pe.geometry[Ve].length;je++)Oe.push(Ft(Pe.geometry[Ve][je],j));ve.push(Oe)}K.push(fr(Pe.id,We,ve,Pe.tags))}return K}function Ft(pe,j){var K=[];K.size=pe.size,pe.start!==void 0&&(K.start=pe.start,K.end=pe.end);for(var oe=0;oe<pe.length;oe+=3)K.push(pe[oe]+j,pe[oe+1],pe[oe+2]);return K}function Qt(pe,j){if(pe.transformed)return pe;var K,oe,ve,Pe=1<<pe.z,We=pe.x,Ve=pe.y;for(K=0;K<pe.features.length;K++){var Oe=pe.features[K],je=Oe.geometry,mt=Oe.type;if(Oe.geometry=[],mt===1)for(oe=0;oe<je.length;oe+=2)Oe.geometry.push(Jt(je[oe],je[oe+1],j,Pe,We,Ve));else for(oe=0;oe<je.length;oe++){var qt=[];for(ve=0;ve<je[oe].length;ve+=2)qt.push(Jt(je[oe][ve],je[oe][ve+1],j,Pe,We,Ve));Oe.geometry.push(qt)}}return pe.transformed=!0,pe}function Jt(pe,j,K,oe,ve,Pe){return[Math.round(K*(pe*oe-ve)),Math.round(K*(j*oe-Pe))]}function an(pe,j,K,oe,ve){for(var Pe=j===ve.maxZoom?0:ve.tolerance/((1<<j)*ve.extent),We={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:K,y:oe,z:j,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ve=0;Ve<pe.length;Ve++){We.numFeatures++,bn(We,pe[Ve],Pe,ve);var Oe=pe[Ve].minX,je=pe[Ve].minY,mt=pe[Ve].maxX,qt=pe[Ve].maxY;Oe<We.minX&&(We.minX=Oe),je<We.minY&&(We.minY=je),mt>We.maxX&&(We.maxX=mt),qt>We.maxY&&(We.maxY=qt)}return We}function bn(pe,j,K,oe){var ve=j.geometry,Pe=j.type,We=[];if(Pe==="Point"||Pe==="MultiPoint")for(var Ve=0;Ve<ve.length;Ve+=3)We.push(ve[Ve]),We.push(ve[Ve+1]),pe.numPoints++,pe.numSimplified++;else if(Pe==="LineString")qn(We,ve,pe,K,!1,!1);else if(Pe==="MultiLineString"||Pe==="Polygon")for(Ve=0;Ve<ve.length;Ve++)qn(We,ve[Ve],pe,K,Pe==="Polygon",Ve===0);else if(Pe==="MultiPolygon")for(var Oe=0;Oe<ve.length;Oe++){var je=ve[Oe];for(Ve=0;Ve<je.length;Ve++)qn(We,je[Ve],pe,K,!0,Ve===0)}if(We.length){var mt=j.tags||null;if(Pe==="LineString"&&oe.lineMetrics){for(var qt in mt={},j.tags)mt[qt]=j.tags[qt];mt.mapbox_clip_start=ve.start/ve.size,mt.mapbox_clip_end=ve.end/ve.size}var At={geometry:We,type:Pe==="Polygon"||Pe==="MultiPolygon"?3:Pe==="LineString"||Pe==="MultiLineString"?2:1,tags:mt};j.id!==null&&(At.id=j.id),pe.features.push(At)}}function qn(pe,j,K,oe,ve,Pe){var We=oe*oe;if(oe>0&&j.size<(ve?We:oe))K.numPoints+=j.length/3;else{for(var Ve=[],Oe=0;Oe<j.length;Oe+=3)(oe===0||j[Oe+2]>We)&&(K.numSimplified++,Ve.push(j[Oe]),Ve.push(j[Oe+1])),K.numPoints++;ve&&function(je,mt){for(var qt=0,At=0,cn=je.length,gn=cn-2;At<cn;gn=At,At+=2)qt+=(je[At]-je[gn])*(je[At+1]+je[gn+1]);if(qt>0===mt)for(At=0,cn=je.length;At<cn/2;At+=2){var mn=je[At],An=je[At+1];je[At]=je[cn-2-At],je[At+1]=je[cn-1-At],je[cn-2-At]=mn,je[cn-1-At]=An}}(Ve,Pe),pe.push(Ve)}}function br(pe,j){var K=(j=this.options=function(ve,Pe){for(var We in Pe)ve[We]=Pe[We];return ve}(Object.create(this.options),j)).debug;if(K&&console.time("preprocess data"),j.maxZoom<0||j.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(j.promoteId&&j.generateId)throw new Error("promoteId and generateId cannot be used together.");var oe=function(ve,Pe){var We=[];if(ve.type==="FeatureCollection")for(var Ve=0;Ve<ve.features.length;Ve++)rn(We,ve.features[Ve],Pe,Ve);else rn(We,ve.type==="Feature"?ve:{geometry:ve},Pe);return We}(pe,j);this.tiles={},this.tileCoords=[],K&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",j.indexMaxZoom,j.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),oe=function(ve,Pe){var We=Pe.buffer/Pe.extent,Ve=ve,Oe=Ze(ve,1,-1-We,We,0,-1,2,Pe),je=Ze(ve,1,1-We,2+We,0,-1,2,Pe);return(Oe||je)&&(Ve=Ze(ve,1,-We,1+We,0,-1,2,Pe)||[],Oe&&(Ve=It(Oe,1).concat(Ve)),je&&(Ve=Ve.concat(It(je,-1)))),Ve}(oe,j),oe.length&&this.splitTile(oe,0,0,0),K&&(oe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function jn(pe,j,K){return 32*((1<<pe)*K+j)+pe}function ar(pe,j){const K=pe.tileID.canonical;if(!this._geoJSONIndex)return j(null,null);const oe=this._geoJSONIndex.getTile(K.z,K.x,K.y);if(!oe)return j(null,null);const ve=new B(oe.features);let Pe=U(ve);Pe.byteOffset===0&&Pe.byteLength===Pe.buffer.byteLength||(Pe=new Uint8Array(Pe)),j(null,{vectorTile:ve,rawData:Pe.buffer})}br.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},br.prototype.splitTile=function(pe,j,K,oe,ve,Pe,We){for(var Ve=[pe,j,K,oe],Oe=this.options,je=Oe.debug;Ve.length;){oe=Ve.pop(),K=Ve.pop(),j=Ve.pop(),pe=Ve.pop();var mt=1<<j,qt=jn(j,K,oe),At=this.tiles[qt];if(!At&&(je>1&&console.time("creation"),At=this.tiles[qt]=an(pe,j,K,oe,Oe),this.tileCoords.push({z:j,x:K,y:oe}),je)){je>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",j,K,oe,At.numFeatures,At.numPoints,At.numSimplified),console.timeEnd("creation"));var cn="z"+j;this.stats[cn]=(this.stats[cn]||0)+1,this.total++}if(At.source=pe,ve){if(j===Oe.maxZoom||j===ve)continue;var gn=1<<ve-j;if(K!==Math.floor(Pe/gn)||oe!==Math.floor(We/gn))continue}else if(j===Oe.indexMaxZoom||At.numPoints<=Oe.indexMaxPoints)continue;if(At.source=null,pe.length!==0){je>1&&console.time("clipping");var mn,An,zn,ir,wn,gr,yr=.5*Oe.buffer/Oe.extent,Ga=.5-yr,xa=.5+yr,pt=1+yr;mn=An=zn=ir=null,wn=Ze(pe,mt,K-yr,K+xa,0,At.minX,At.maxX,Oe),gr=Ze(pe,mt,K+Ga,K+pt,0,At.minX,At.maxX,Oe),pe=null,wn&&(mn=Ze(wn,mt,oe-yr,oe+xa,1,At.minY,At.maxY,Oe),An=Ze(wn,mt,oe+Ga,oe+pt,1,At.minY,At.maxY,Oe),wn=null),gr&&(zn=Ze(gr,mt,oe-yr,oe+xa,1,At.minY,At.maxY,Oe),ir=Ze(gr,mt,oe+Ga,oe+pt,1,At.minY,At.maxY,Oe),gr=null),je>1&&console.timeEnd("clipping"),Ve.push(mn||[],j+1,2*K,2*oe),Ve.push(An||[],j+1,2*K,2*oe+1),Ve.push(zn||[],j+1,2*K+1,2*oe),Ve.push(ir||[],j+1,2*K+1,2*oe+1)}}},br.prototype.getTile=function(pe,j,K){var oe=this.options,ve=oe.extent,Pe=oe.debug;if(pe<0||pe>24)return null;var We=1<<pe,Ve=jn(pe,j=(j%We+We)%We,K);if(this.tiles[Ve])return Qt(this.tiles[Ve],ve);Pe>1&&console.log("drilling down to z%d-%d-%d",pe,j,K);for(var Oe,je=pe,mt=j,qt=K;!Oe&&je>0;)je--,mt=Math.floor(mt/2),qt=Math.floor(qt/2),Oe=this.tiles[jn(je,mt,qt)];return Oe&&Oe.source?(Pe>1&&console.log("found parent tile z%d-%d-%d",je,mt,qt),Pe>1&&console.time("drilling down"),this.splitTile(Oe.source,je,mt,qt,pe,j,K),Pe>1&&console.timeEnd("drilling down"),this.tiles[Ve]?Qt(this.tiles[Ve],ve):null):null};class qr extends a.VectorTileWorkerSource{constructor(j,K,oe,ve,Pe){super(j,K,oe,ve,ar),Pe&&(this.loadGeoJSON=Pe)}loadData(j,K){const oe=j&&j.request,ve=oe&&oe.collectResourceTiming;this.loadGeoJSON(j,(Pe,We)=>{if(Pe||!We)return K(Pe);if(typeof We!="object")return K(new Error(`Input data given to '${j.source}' is not a valid GeoJSON object.`));{O(We,!0);try{if(j.filter){const Oe=a.createExpression(j.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Oe.result==="error")throw new Error(Oe.value.map(mt=>`${mt.key}: ${mt.message}`).join(", "));We={type:"FeatureCollection",features:We.features.filter(mt=>Oe.value.evaluate({zoom:0},mt))}}this._geoJSONIndex=j.cluster?new St(function({superclusterOptions:Oe,clusterProperties:je}){if(!je||!Oe)return Oe;const mt={},qt={},At={accumulated:null,zoom:0},cn={properties:null},gn=Object.keys(je);for(const mn of gn){const[An,zn]=je[mn],ir=a.createExpression(zn),wn=a.createExpression(typeof An=="string"?[An,["accumulated"],["get",mn]]:An);mt[mn]=ir.value,qt[mn]=wn.value}return Oe.map=mn=>{cn.properties=mn;const An={};for(const zn of gn)An[zn]=mt[zn].evaluate(At,cn);return An},Oe.reduce=(mn,An)=>{cn.properties=An;for(const zn of gn)At.accumulated=mn[zn],mn[zn]=qt[zn].evaluate(At,cn)},Oe}(j)).load(We.features):function(Oe,je){return new br(Oe,je)}(We,j.geojsonVtOptions)}catch(Oe){return K(Oe)}this.loaded={};const Ve={};if(ve){const Oe=a.getPerformanceMeasurement(oe);Oe&&(Ve.resourceTiming={},Ve.resourceTiming[j.source]=JSON.parse(JSON.stringify(Oe)))}K(null,Ve)}})}reloadTile(j,K){const oe=this.loaded;return oe&&oe[j.uid]?super.reloadTile(j,K):this.loadTile(j,K)}loadGeoJSON(j,K){if(j.request)a.getJSON(j.request,K);else{if(typeof j.data!="string")return K(new Error(`Input data given to '${j.source}' is not a valid GeoJSON object.`));try{return K(null,JSON.parse(j.data))}catch{return K(new Error(`Input data given to '${j.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(j,K){try{K(null,this._geoJSONIndex.getClusterExpansionZoom(j.clusterId))}catch(oe){K(oe)}}getClusterChildren(j,K){try{K(null,this._geoJSONIndex.getChildren(j.clusterId))}catch(oe){K(oe)}}getClusterLeaves(j,K){try{K(null,this._geoJSONIndex.getLeaves(j.clusterId,j.limit,j.offset))}catch(oe){K(oe)}}}class pi{constructor(j){this.self=j,this.actor=new a.Actor(j,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=a.getProjection({name:"mercator"}),this.workerSourceTypes={vector:a.VectorTileWorkerSource,geojson:qr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(K,oe)=>{if(this.workerSourceTypes[K])throw new Error(`Worker source with name "${K}" already registered.`);this.workerSourceTypes[K]=oe},this.self.registerRTLTextPlugin=K=>{if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=K.applyArabicShaping,a.plugin.processBidirectionalText=K.processBidirectionalText,a.plugin.processStyledBidirectionalText=K.processStyledBidirectionalText}}clearCaches(j,K,oe){delete this.layerIndexes[j],delete this.availableImages[j],delete this.workerSources[j],delete this.demWorkerSources[j],oe()}checkIfReady(j,K,oe){oe()}setReferrer(j,K){this.referrer=K}spriteLoaded(j,K){this.isSpriteLoaded[j]=K;for(const oe in this.workerSources[j]){const ve=this.workerSources[j][oe];for(const Pe in ve)ve[Pe]instanceof a.VectorTileWorkerSource&&(ve[Pe].isSpriteLoaded=K,ve[Pe].fire(new a.Event("isSpriteLoaded")))}}setImages(j,K,oe){this.availableImages[j]=K;for(const ve in this.workerSources[j]){const Pe=this.workerSources[j][ve];for(const We in Pe)Pe[We].availableImages=K}oe()}enableTerrain(j,K,oe){this.terrain=K,oe()}setProjection(j,K){this.projections[j]=a.getProjection(K)}setLayers(j,K,oe){this.getLayerIndex(j).replace(K),oe()}updateLayers(j,K,oe){this.getLayerIndex(j).update(K.layers,K.removedIds),oe()}loadTile(j,K,oe){const ve=this.enableTerrain?a.extend({enableTerrain:this.terrain},K):K;ve.projection=this.projections[j]||this.defaultProjection,this.getWorkerSource(j,K.type,K.source).loadTile(ve,oe)}loadDEMTile(j,K,oe){const ve=this.enableTerrain?a.extend({buildQuadTree:this.terrain},K):K;this.getDEMWorkerSource(j,K.source).loadTile(ve,oe)}reloadTile(j,K,oe){const ve=this.enableTerrain?a.extend({enableTerrain:this.terrain},K):K;ve.projection=this.projections[j]||this.defaultProjection,this.getWorkerSource(j,K.type,K.source).reloadTile(ve,oe)}abortTile(j,K,oe){this.getWorkerSource(j,K.type,K.source).abortTile(K,oe)}removeTile(j,K,oe){this.getWorkerSource(j,K.type,K.source).removeTile(K,oe)}removeSource(j,K,oe){if(!this.workerSources[j]||!this.workerSources[j][K.type]||!this.workerSources[j][K.type][K.source])return;const ve=this.workerSources[j][K.type][K.source];delete this.workerSources[j][K.type][K.source],ve.removeSource!==void 0?ve.removeSource(K,oe):oe()}loadWorkerSource(j,K,oe){try{this.self.importScripts(K.url),oe()}catch(ve){oe(ve.toString())}}syncRTLPluginState(j,K,oe){try{a.plugin.setState(K);const ve=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&ve!=null){this.self.importScripts(ve);const Pe=a.plugin.isParsed();oe(Pe?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ve}`),Pe)}}catch(ve){oe(ve.toString())}}getAvailableImages(j){let K=this.availableImages[j];return K||(K=[]),K}getLayerIndex(j){let K=this.layerIndexes[j];return K||(K=this.layerIndexes[j]=new k),K}getWorkerSource(j,K,oe){if(this.workerSources[j]||(this.workerSources[j]={}),this.workerSources[j][K]||(this.workerSources[j][K]={}),!this.workerSources[j][K][oe]){const ve={send:(Pe,We,Ve,Oe,je,mt)=>{this.actor.send(Pe,We,Ve,j,je,mt)},scheduler:this.actor.scheduler};this.workerSources[j][K][oe]=new this.workerSourceTypes[K](ve,this.getLayerIndex(j),this.getAvailableImages(j),this.isSpriteLoaded[j])}return this.workerSources[j][K][oe]}getDEMWorkerSource(j,K){return this.demWorkerSources[j]||(this.demWorkerSources[j]={}),this.demWorkerSources[j][K]||(this.demWorkerSources[j][K]=new P),this.demWorkerSources[j][K]}enforceCacheSizeLimit(j,K){a.enforceCacheSizeLimit(K)}getWorkerPerformanceMetrics(j,K,oe){oe(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new pi(self)),pi}),d(["./shared"],function(a){function b(p,l){if(Array.isArray(p)){if(!Array.isArray(l)||p.length!==l.length)return!1;for(let h=0;h<p.length;h++)if(!b(p[h],l[h]))return!1;return!0}if(typeof p=="object"&&p!==null&&l!==null){if(typeof l!="object"||Object.keys(p).length!==Object.keys(l).length)return!1;for(const h in p)if(!b(p[h],l[h]))return!1;return!0}return p===l}var S=k;function k(p){return!function(l){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var g,v,w=new Blob([""],{type:"text/javascript"}),C=URL.createObjectURL(w);try{v=new Worker(C),g=!0}catch{g=!1}return v&&v.terminate(),URL.revokeObjectURL(C),g}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var g=document.createElement("canvas");g.width=g.height=1;var v=g.getContext("2d");if(!v)return!1;var w=v.getImageData(0,0,1,1);return w&&w.width===g.width}()?(P[h=l&&l.failIfMajorPerformanceCaveat]===void 0&&(P[h]=function(g){var v,w=function(C){var M=document.createElement("canvas"),R=Object.create(k.webGLContextAttributes);return R.failIfMajorPerformanceCaveat=C,M.getContext("webgl",R)||M.getContext("experimental-webgl",R)}(g);if(!w)return!1;try{v=w.createShader(w.VERTEX_SHADER)}catch{return!1}return!(!v||w.isContextLost())&&(w.shaderSource(v,"void main() {}"),w.compileShader(v),w.getShaderParameter(v,w.COMPILE_STATUS)===!0)}(h)),P[h]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var h}(p)}var P={};function O(p,l,h){const g=a.window.document.createElement(p);return l!==void 0&&(g.className=l),h&&h.appendChild(g),g}function G(p,l,h){const g=a.window.document.createElementNS("http://www.w3.org/2000/svg",p);for(const v of Object.keys(l))g.setAttributeNS(null,v,l[v]);return h&&h.appendChild(g),g}k.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const F=a.window.document&&a.window.document.documentElement.style,q=F&&F.userSelect!==void 0?"userSelect":"WebkitUserSelect";let ce;function B(){F&&q&&(ce=F[q],F[q]="none")}function U(){F&&q&&(F[q]=ce)}function Z(p){p.preventDefault(),p.stopPropagation(),a.window.removeEventListener("click",Z,!0)}function J(){a.window.addEventListener("click",Z,!0),a.window.setTimeout(()=>{a.window.removeEventListener("click",Z,!0)},0)}function Y(p,l){const h=p.getBoundingClientRect();return De(p,h,l)}function he(p,l){const h=p.getBoundingClientRect(),g=[];for(let v=0;v<l.length;v++)g.push(De(p,h,l[v]));return g}function se(p){return a.window.InstallTrigger!==void 0&&p.button===2&&p.ctrlKey&&a.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:p.button}function De(p,l,h){const g=p.offsetWidth===l.width?1:p.offsetWidth/l.width;return new a.pointGeometry((h.clientX-l.left)*g,(h.clientY-l.top)*g)}function fe(p,l){var h=l[0],g=l[1],v=l[2],w=l[3],C=h*w-v*g;return C?(p[0]=w*(C=1/C),p[1]=-g*C,p[2]=-v*C,p[3]=h*C,p):null}function $(p){const{userImage:l}=p;return!!(l&&l.render&&l.render())&&(p.data.replace(new Uint8Array(l.data.buffer)),!0)}class ue extends a.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:h,callback:g}of this.requestors)this._notify(h,g);this.requestors=[]}}hasImage(l){return!!this.getImage(l)}getImage(l){return this.images[l]}addImage(l,h){this._validate(l,h)&&(this.images[l]=h)}_validate(l,h){let g=!0;return this._validateStretch(h.stretchX,h.data&&h.data.width)||(this.fire(new a.ErrorEvent(new Error(`Image "${l}" has invalid "stretchX" value`))),g=!1),this._validateStretch(h.stretchY,h.data&&h.data.height)||(this.fire(new a.ErrorEvent(new Error(`Image "${l}" has invalid "stretchY" value`))),g=!1),this._validateContent(h.content,h)||(this.fire(new a.ErrorEvent(new Error(`Image "${l}" has invalid "content" value`))),g=!1),g}_validateStretch(l,h){if(!l)return!0;let g=0;for(const v of l){if(v[0]<g||v[1]<v[0]||h<v[1])return!1;g=v[1]}return!0}_validateContent(l,h){return!(l&&(l.length!==4||l[0]<0||h.data.width<l[0]||l[1]<0||h.data.height<l[1]||l[2]<0||h.data.width<l[2]||l[3]<0||h.data.height<l[3]||l[2]<l[0]||l[3]<l[1]))}updateImage(l,h){h.version=this.images[l].version+1,this.images[l]=h,this.updatedImages[l]=!0}removeImage(l){const h=this.images[l];delete this.images[l],delete this.patterns[l],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l,h){let g=!0;if(!this.isLoaded())for(const v of l)this.images[v]||(g=!1);this.isLoaded()||g?this._notify(l,h):this.requestors.push({ids:l,callback:h})}_notify(l,h){const g={};for(const v of l){this.images[v]||this.fire(new a.Event("styleimagemissing",{id:v}));const w=this.images[v];w?g[v]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,hasRenderCallback:!!(w.userImage&&w.userImage.render)}:a.warnOnce(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}h(null,g)}getPixelSize(){const{width:l,height:h}=this.atlasImage;return{width:l,height:h}}getPattern(l){const h=this.patterns[l],g=this.getImage(l);if(!g)return null;if(h&&h.position.version===g.version)return h.position;if(h)h.position.version=g.version;else{const v={w:g.data.width+2,h:g.data.height+2,x:0,y:0},w=new a.ImagePosition(v,g);this.patterns[l]={bin:v,position:w}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const h=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(l,this.atlasImage,h.RGBA),this.atlasTexture&&this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const w in this.patterns)l.push(this.patterns[w].bin);const{w:h,h:g}=a.potpack(l),v=this.atlasImage;v.resize({width:h||1,height:g||1});for(const w in this.patterns){const{bin:C}=this.patterns[w],M=C.x+1,R=C.y+1,z=this.images[w].data,D=z.width,W=z.height;a.RGBAImage.copy(z,v,{x:0,y:0},{x:M,y:R},{width:D,height:W}),a.RGBAImage.copy(z,v,{x:0,y:W-1},{x:M,y:R-1},{width:D,height:1}),a.RGBAImage.copy(z,v,{x:0,y:0},{x:M,y:R+W},{width:D,height:1}),a.RGBAImage.copy(z,v,{x:D-1,y:0},{x:M-1,y:R},{width:1,height:W}),a.RGBAImage.copy(z,v,{x:0,y:0},{x:M+D,y:R},{width:1,height:W})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const h of l){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;const g=this.images[h];$(g)&&this.updateImage(h,g)}}}const Je=new a.Properties({anchor:new a.DataConstantProperty(a.spec.light.anchor),position:new class{constructor(){this.specification=a.spec.light.position}possiblyEvaluate(p,l){return function([h,g,v]){const w=a.degToRad(g+90),C=a.degToRad(v);return{x:h*Math.cos(w)*Math.sin(C),y:h*Math.sin(w)*Math.sin(C),z:h*Math.cos(C),azimuthal:g,polar:v}}(p.expression.evaluate(l))}interpolate(p,l,h){return{x:a.number(p.x,l.x,h),y:a.number(p.y,l.y,h),z:a.number(p.z,l.z,h),azimuthal:a.number(p.azimuthal,l.azimuthal,h),polar:a.number(p.polar,l.polar,h)}}},color:new a.DataConstantProperty(a.spec.light.color),intensity:new a.DataConstantProperty(a.spec.light.intensity)}),Ke="-transition";class ke extends a.Evented{constructor(l){super(),this._transitionable=new a.Transitionable(Je),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,h={}){if(!this._validate(a.validateLight,l,h))for(const g in l){const v=l[g];a.endsWith(g,Ke)?this._transitionable.setTransition(g.slice(0,-Ke.length),v):this._transitionable.setValue(g,v)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,h,g){return(!g||g.validate!==!1)&&a.emitValidationErrors(this,l.call(a.validateStyle,a.extend({value:h,style:{glyphs:!0,sprite:!0},styleSpec:a.spec})))}}const ze=new a.Properties({source:new a.DataConstantProperty(a.spec.terrain.source),exaggeration:new a.DataConstantProperty(a.spec.terrain.exaggeration)}),nt="-transition";class _t extends a.Evented{constructor(l,h){super(),this._transitionable=new a.Transitionable(ze),this.set(l),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=h}get(){return this._transitionable.serialize()}set(l){for(const h in l){const g=l[h];a.endsWith(h,nt)?this._transitionable.setTransition(h.slice(0,-nt.length),g):this._transitionable.setValue(h,g)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}}function Ue(p,l,h,g){const v=a.smoothstep(45,65,h),[w,C]=Ee(p,g),M=a.length(l);let R=1-Math.min(1,Math.exp((M-w)/(C-w)*-6));return R*=R*R,R=Math.min(1,1.00747*R),R*v*p.alpha}function Ee(p,l){const h=.5/Math.tan(.5*l);return[p.range[0]+h,p.range[1]+h]}const _e=new a.Properties({range:new a.DataConstantProperty(a.spec.fog.range),color:new a.DataConstantProperty(a.spec.fog.color),"high-color":new a.DataConstantProperty(a.spec.fog["high-color"]),"space-color":new a.DataConstantProperty(a.spec.fog["space-color"]),"horizon-blend":new a.DataConstantProperty(a.spec.fog["horizon-blend"]),"star-intensity":new a.DataConstantProperty(a.spec.fog["star-intensity"])}),$e="-transition";class be extends a.Evented{constructor(l,h){super(),this._transitionable=new a.Transitionable(_e),this.set(l),this._transitioning=this._transitionable.untransitioned(),this._transform=h}get state(){const l=this._transform,h=l.projection.name==="globe",g=a.globeToMercatorTransition(l.zoom),v=this.properties.get("range"),w=[.5,3];return{range:h?[a.number(w[0],v[0],g),a.number(w[1],v[1],g)]:v,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(l,h={}){if(!this._validate(a.validateFog,l,h)){for(const g of Object.keys(a.spec.fog))l&&l[g]===void 0&&(l[g]=a.spec.fog[g].default);for(const g in l){const v=l[g];a.endsWith(g,$e)?this._transitionable.setTransition(g.slice(0,-$e.length),v):this._transitionable.setValue(g,v)}}}getOpacity(l){if(!this._transform.projection.supportsFog)return 0;const h=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:a.smoothstep(45,65,l))*h.a}getOpacityAtLatLng(l,h){return this._transform.projection.supportsFog?function(g,v,w){const C=a.MercatorCoordinate.fromLngLat(v),M=w.elevation?w.elevation.getAtPointOrZero(C):0,R=[C.x,C.y,M];return a.transformMat4(R,R,w.mercatorFogMatrix),Ue(g,R,w.pitch,w._fov)}(this.state,l,h):0}getFovAdjustedRange(l){return this._transform.projection.supportsFog?Ee(this.state,l):[0,1]}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,h,g){return(!g||g.validate!==!1)&&a.emitValidationErrors(this,l.call(a.validateStyle,a.extend({value:h,style:{glyphs:!0,sprite:!0},styleSpec:a.spec})))}}class Me{constructor(l,h){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=a.uniqueId();const g=this.workerPool.acquire(this.id);for(let v=0;v<g.length;v++){const w=new Me.Actor(g[v],h,this.id);w.name=`Worker ${v}`,this.actors.push(w)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(l,h,g){a.asyncAll(this.actors,(v,w)=>{v.send(l,h,w)},g=g||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(l=>{l.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Ge(p,l,h){return l*(a.EXTENT/(p.tileSize*Math.pow(2,h-p.tileID.overscaledZ)))}Me.Actor=a.Actor;class ut{constructor(l,h,g,v){this.screenBounds=l,this.cameraPoint=h,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=g,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,v)}static createFromScreenPoints(l,h){let g,v;if(l instanceof a.pointGeometry||typeof l[0]=="number"){const w=a.pointGeometry.convert(l);g=[w],v=h.isPointAboveHorizon(w)}else{const w=a.pointGeometry.convert(l[0]),C=a.pointGeometry.convert(l[1]);g=[w,C],v=a.polygonizeBounds(w,C).every(M=>h.isPointAboveHorizon(M))}return new ut(g,h.getCameraPoint(),v,h)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(l){return a.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],l)}bufferedCameraGeometry(l){const h=this.screenBounds[0],g=this.screenBounds.length===1?this.screenBounds[0].add(new a.pointGeometry(1,1)):this.screenBounds[1],v=a.polygonizeBounds(h,g,0,!1);return this.cameraPoint.y>g.y&&(this.cameraPoint.x>h.x&&this.cameraPoint.x<g.x?v.splice(3,0,this.cameraPoint):this.cameraPoint.x>=g.x?v[2]=this.cameraPoint:this.cameraPoint.x<=h.x&&(v[3]=this.cameraPoint)),a.bufferConvexPolygon(v,l)}bufferedCameraGeometryGlobe(l){const h=this.screenBounds[0],g=this.screenBounds.length===1?this.screenBounds[0].add(new a.pointGeometry(1,1)):this.screenBounds[1],v=a.polygonizeBounds(h,g,l),w=this.cameraPoint.clone();switch(3*((w.y>h.y)+(w.y>g.y))+((w.x>h.x)+(w.x>g.x))){case 0:v[0]=w,v[4]=w.clone();break;case 1:v.splice(1,0,w);break;case 2:v[1]=w;break;case 3:v.splice(4,0,w);break;case 5:v.splice(2,0,w);break;case 6:v[3]=w;break;case 7:v.splice(3,0,w);break;case 8:v[2]=w}return v}containsTile(l,h,g,v=0){const w=l.queryPadding/h._pixelsPerMercatorPixel+1,C=g?this._bufferedCameraMercator(w,h):this._bufferedScreenMercator(w,h);let M=l.tileID.wrap+(C.unwrapped?v:0);const R=C.polygon.map(de=>a.getTilePoint(l.tileTransform,de,M));if(!a.polygonIntersectsBox(R,0,0,a.EXTENT,a.EXTENT))return;M=l.tileID.wrap+(this.screenGeometryMercator.unwrapped?v:0);const z=this.screenGeometryMercator.polygon.map(de=>a.getTileVec3(l.tileTransform,de,M)),D=z.map(de=>new a.pointGeometry(de[0],de[1])),W=h.getFreeCameraOptions().position||new a.MercatorCoordinate(0,0,0),te=a.getTileVec3(l.tileTransform,W,M),ie=z.map(de=>{const Q=a.sub(de,de,te);return a.normalize(Q,Q),new a.Ray(te,Q)}),ae=Ge(l,1,h.zoom)*h._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:D,tilespaceRays:ie,bufferedTilespaceGeometry:R,bufferedTilespaceBounds:(le=a.getBounds(R),le.min.x=a.clamp(le.min.x,0,a.EXTENT),le.min.y=a.clamp(le.min.y,0,a.EXTENT),le.max.x=a.clamp(le.max.x,0,a.EXTENT),le.max.y=a.clamp(le.max.y,0,a.EXTENT),le),tile:l,tileID:l.tileID,pixelToTileUnitsFactor:ae};var le}_bufferedScreenMercator(l,h){const g=zt(l);if(this._screenRaycastCache[g])return this._screenRaycastCache[g];{let v;return v=h.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(l),h):{polygon:this.bufferedScreenGeometry(l).map(w=>h.pointCoordinate3D(w)),unwrapped:!0},this._screenRaycastCache[g]=v,v}}_bufferedCameraMercator(l,h){const g=zt(l);if(this._cameraRaycastCache[g])return this._cameraRaycastCache[g];{let v;return v=h.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(l),h):{polygon:this.bufferedCameraGeometry(l).map(w=>h.pointCoordinate3D(w)),unwrapped:!0},this._cameraRaycastCache[g]=v,v}}_projectAndResample(l,h){const g=function(w,C){const M=a.multiply([],C.pixelMatrix,C.globeMatrix),R=[0,-a.GLOBE_RADIUS,0,1],z=[0,a.GLOBE_RADIUS,0,1],D=[0,0,0,1];a.transformMat4$1(R,R,M),a.transformMat4$1(z,z,M),a.transformMat4$1(D,D,M);const W=new a.pointGeometry(R[0]/R[3],R[1]/R[3]),te=new a.pointGeometry(z[0]/z[3],z[1]/z[3]),ie=a.polygonContainsPoint(w,W)&&R[3]<D[3],ae=a.polygonContainsPoint(w,te)&&z[3]<D[3];if(!ie&&!ae)return null;const le=function(Fe,He,tt){for(let ot=1;ot<Fe.length;ot++){const Ot=Lt(He.pointCoordinate3D(Fe[ot-1]).x),Ye=Lt(He.pointCoordinate3D(Fe[ot]).x);if(tt<0){if(Ot<Ye)return{idx:ot,t:-Ot/(Ye-1-Ot)}}else if(Ye<Ot)return{idx:ot,t:(1-Ot)/(Ye+1-Ot)}}return null}(w,C,ie?-1:1);if(!le)return null;const{idx:de,t:Q}=le;let xe=de>1?ht(w.slice(0,de),C):[],ye=de<w.length?ht(w.slice(de),C):[];xe=xe.map(Fe=>new a.pointGeometry(Lt(Fe.x),Fe.y)),ye=ye.map(Fe=>new a.pointGeometry(Lt(Fe.x),Fe.y));const we=[...xe];we.length===0&&we.push(ye[ye.length-1]);const Ie=a.number(we[we.length-1].y,(ye.length===0?xe[0]:ye[0]).y,Q);let Ae;return Ae=ie?[new a.pointGeometry(0,Ie),new a.pointGeometry(0,0),new a.pointGeometry(1,0),new a.pointGeometry(1,Ie)]:[new a.pointGeometry(1,Ie),new a.pointGeometry(1,1),new a.pointGeometry(0,1),new a.pointGeometry(0,Ie)],we.push(...Ae),ye.length===0?we.push(xe[0]):we.push(...ye),{polygon:we.map(Fe=>new a.MercatorCoordinate(Fe.x,Fe.y)),unwrapped:!1}}(l,h);if(g)return g;const v=function(w,C){let M=!1,R=-1/0,z=0;for(let W=0;W<w.length-1;W++)w[W].x>R&&(R=w[W].x,z=W);for(let W=0;W<w.length-1;W++){const te=(z+W)%(w.length-1),ie=w[te],ae=w[te+1];Math.abs(ie.x-ae.x)>.5&&(ie.x<ae.x?(ie.x+=1,te===0&&(w[w.length-1].x+=1)):(ae.x+=1,te+1===w.length-1&&(w[0].x+=1)),M=!0)}const D=a.mercatorXfromLng(C.center.lng);return M&&D<Math.abs(D-1)&&w.forEach(W=>{W.x-=1}),{polygon:w,unwrapped:M}}(ht(l,h).map(w=>new a.pointGeometry(Lt(w.x),w.y)),h);return{polygon:v.polygon.map(w=>new a.MercatorCoordinate(w.x,w.y)),unwrapped:v.unwrapped}}}function ht(p,l){return a.resample(p,h=>{const g=l.pointCoordinate3D(h);h.x=g.x,h.y=g.y},1/256)}function Lt(p){return p<0?1+p%1:p%1}function zt(p){return 100*p|0}function Rt(p,l,h,g,v){const w=function(C,M){if(C)return v(C);if(M){p.url&&M.tiles&&p.tiles&&delete p.tiles;const R=a.pick(a.extend(M,p),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);M.vector_layers&&(R.vectorLayers=M.vector_layers,R.vectorLayerIds=R.vectorLayers.map(z=>z.id)),R.tiles=l.canonicalizeTileset(R,p.url),v(null,R)}};return p.url?a.getJSON(l.transformRequest(l.normalizeSourceURL(p.url,null,h,g),a.ResourceType.Source),w):a.exported.frame(()=>w(null,p))}class St{constructor(l,h,g){this.bounds=a.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=h||0,this.maxzoom=g||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const h=Math.pow(2,l.z),g=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*h),v=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*h),w=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*h),C=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*h);return l.x>=g&&l.x<w&&l.y>=v&&l.y<C}}class Et{constructor(l,h,g){this.context=l;const v=l.gl;this.buffer=v.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||h.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const h=this.context.gl;this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ct={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Kt{constructor(l,h,g,v){this.length=h.length,this.attributes=g,this.itemSize=h.bytesPerElement,this.dynamicDraw=v,this.context=l;const w=l.gl;this.buffer=w.createBuffer(),l.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||h.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,h){for(let g=0;g<this.attributes.length;g++){const v=h.attributes[this.attributes[g].name];v!==void 0&&l.enableVertexAttribArray(v)}}setVertexAttribPointers(l,h,g){for(let v=0;v<this.attributes.length;v++){const w=this.attributes[v],C=h.attributes[w.name];C!==void 0&&l.vertexAttribPointer(C,w.components,l[Ct[w.type]],!1,this.itemSize,w.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Nt{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class pn extends Nt{getDefault(){return a.Color.transparent}set(l){const h=this.current;(l.r!==h.r||l.g!==h.g||l.b!==h.b||l.a!==h.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Pn extends Nt{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class vn extends Nt{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class or extends Nt{getDefault(){return[!0,!0,!0,!0]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||l[3]!==h[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Wr extends Nt{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class Ln extends Nt{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class Xn extends Nt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const h=this.current;(l.func!==h.func||l.ref!==h.ref||l.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class hr extends Nt{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class fr extends Nt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=l,this.dirty=!1}}class Ut extends Nt{getDefault(){return[0,1]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class rn extends Nt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=l,this.dirty=!1}}class En extends Nt{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class Tn extends Nt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.BLEND):h.disable(h.BLEND),this.current=l,this.dirty=!1}}class Cn extends Nt{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class ln extends Nt{getDefault(){return a.Color.transparent}set(l){const h=this.current;(l.r!==h.r||l.g!==h.g||l.b!==h.b||l.a!==h.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Ne extends Nt{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class Ze extends Nt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=l,this.dirty=!1}}class lt extends Nt{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class Gt extends Nt{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class tn extends Nt{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class Be extends Nt{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class Le extends Nt{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||l[3]!==h[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class ft extends Nt{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class yt extends Nt{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class It extends Nt{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class Ft extends Nt{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Qt extends Nt{getDefault(){return null}set(l){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Jt extends Nt{constructor(l){super(l),this.vao=l.extVertexArrayObject}getDefault(){return null}set(l){this.vao&&(l!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(l),this.current=l,this.dirty=!1)}}class an extends Nt{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class bn extends Nt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class qn extends Nt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class br extends Nt{constructor(l,h){super(l),this.context=l,this.parent=h}getDefault(){return null}}class jn extends br{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class ar extends br{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,this.attachment(),h.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class qr extends ar{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class pi{constructor(l,h,g,v){this.context=l,this.width=h,this.height=g;const w=this.framebuffer=l.gl.createFramebuffer();this.colorAttachment=new jn(l,w),v&&(this.depthAttachment=new ar(l,w))}destroy(){const l=this.context.gl,h=this.colorAttachment.get();if(h&&l.deleteTexture(h),this.depthAttachment){const g=this.depthAttachment.get();g&&l.deleteRenderbuffer(g)}l.deleteFramebuffer(this.framebuffer)}}class pe{constructor(l,h=!1){if(this.gl=l,this.isWebGL2=h,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),h){const g=l;this.extVertexArrayObject={createVertexArrayOES:g.createVertexArray.bind(l),deleteVertexArrayOES:g.deleteVertexArray.bind(l),bindVertexArrayOES:g.bindVertexArray.bind(l)}}this.clearColor=new pn(this),this.clearDepth=new Pn(this),this.clearStencil=new vn(this),this.colorMask=new or(this),this.depthMask=new Wr(this),this.stencilMask=new Ln(this),this.stencilFunc=new Xn(this),this.stencilOp=new hr(this),this.stencilTest=new fr(this),this.depthRange=new Ut(this),this.depthTest=new rn(this),this.depthFunc=new En(this),this.blend=new Tn(this),this.blendFunc=new Cn(this),this.blendColor=new ln(this),this.blendEquation=new Ne(this),this.cullFace=new Ze(this),this.cullFaceSide=new lt(this),this.frontFace=new Gt(this),this.program=new tn(this),this.activeTexture=new Be(this),this.viewport=new Le(this),this.bindFramebuffer=new ft(this),this.bindRenderbuffer=new yt(this),this.bindTexture=new It(this),this.bindVertexBuffer=new Ft(this),this.bindElementBuffer=new Qt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Jt(this),this.pixelStoreUnpack=new an(this),this.pixelStoreUnpackPremultiplyAlpha=new bn(this),this.pixelStoreUnpackFlipY=new qn(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=l.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=l.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=l.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),h||(this.extTextureHalfFloat=l.getExtension("OES_texture_half_float")),(h||this.extTextureHalfFloat&&l.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=h||l.getExtension("OES_standard_derivatives"),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,h){return new Et(this,l,h)}createVertexBuffer(l,h,g){return new Kt(this,l,h,g)}createRenderbuffer(l,h,g){const v=this.gl,w=v.createRenderbuffer();return this.bindRenderbuffer.set(w),v.renderbufferStorage(v.RENDERBUFFER,l,h,g),this.bindRenderbuffer.set(null),w}createFramebuffer(l,h,g){return new pi(this,l,h,g)}clear({color:l,depth:h,stencil:g}){const v=this.gl;let w=0;l&&(w|=v.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(w|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),g!==void 0&&(w|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),v.clear(w)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){b(l.blendFunction,a.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class j extends a.Evented{constructor(l,h,g,v){if(super(),this.id=l,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(h,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v),this._tileWorkers={},this._deduped=new a.DedupedRequest}load(l){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"}));const h=Array.isArray(this.map._language)?this.map._language.join():this.map._language,g=this.map._worldview;this._tileJSONRequest=Rt(this._options,this.map._requestManager,h,g,(v,w)=>{this._tileJSONRequest=null,this._loaded=!0,v?(h&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${h}`),g&&g.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${g}`),this.fire(new a.ErrorEvent(v))):w&&(a.extend(this,w),w.bounds&&(this.tileBounds=new St(w.bounds,this.minzoom,this.maxzoom)),a.postTurnstileEvent(w.tiles,this.map._requestManager._customAccessToken),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"}))),l&&l(v)})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return a.extend({},this._options)}loadTile(l,h){const g=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme)),v={request:this.map._requestManager.transformRequest(g,a.ResourceType.Tile),data:void 0,uid:l.uid,tileID:l.tileID,tileZoom:l.tileZoom,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:l.isSymbolTile};if(v.request.collectResourceTiming=this._collectResourceTiming,l.actor&&l.state!=="expired")l.state==="loading"?l.reloadCallback=h:l.request=l.actor.send("reloadTile",v,w.bind(this));else if(l.actor=this._tileWorkers[g]=this._tileWorkers[g]||this.dispatcher.getActor(),this.dispatcher.ready)l.request=l.actor.send("loadTile",v,w.bind(this),void 0,!0);else{const C=a.loadVectorTile.call({deduped:this._deduped},v,(M,R)=>{M||!R?w.call(this,M):(v.data={cacheControl:R.cacheControl,expires:R.expires,rawData:R.rawData.slice(0)},l.actor&&l.actor.send("loadTile",v,w.bind(this),void 0,!0))},!0);l.request={cancel:C}}function w(C,M){return delete l.request,l.aborted?h(null):C&&C.status!==404?h(C):(M&&M.resourceTiming&&(l.resourceTiming=M.resourceTiming),this.map._refreshExpiredTiles&&M&&l.setExpiryData(M),l.loadVectorData(M,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),h(null),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id})}unloadTile(l){l.unloadVectorData(),l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class K extends a.Evented{constructor(l,h,g,v){super(),this.id=l,this.dispatcher=g,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},h),a.extend(this,a.pick(h,["url","scheme","tileSize"]))}load(l){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Rt(this._options,this.map._requestManager,null,null,(h,g)=>{this._tileJSONRequest=null,this._loaded=!0,h?this.fire(new a.ErrorEvent(h)):g&&(a.extend(this,g),g.bounds&&(this.tileBounds=new St(g.bounds,this.minzoom,this.maxzoom)),a.postTurnstileEvent(g.tiles),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"}))),l&&l(h)})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return a.extend({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,h){const g=a.exported.devicePixelRatio>=2,v=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),g,this.tileSize);l.request=a.getImage(this.map._requestManager.transformRequest(v,a.ResourceType.Tile),(w,C,M,R)=>(delete l.request,l.aborted?(l.state="unloaded",h(null)):w?(l.state="errored",h(w)):C?(this.map._refreshExpiredTiles&&l.setExpiryData({cacheControl:M,expires:R}),l.setTexture(C,this.map.painter),l.state="loaded",a.cacheEntryPossiblyAdded(this.dispatcher),void h(null)):h(null)))}static loadTileData(l,h,g){l.setTexture(h,g)}static unloadTileData(l,h){l.texture&&h.saveTileTexture(l.texture)}abortTile(l,h){l.request&&(l.request.cancel(),delete l.request),h()}unloadTile(l,h){l.texture&&this.map.painter.saveTileTexture(l.texture),h()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}let oe;function ve(p,l,h,g,v,w,C,M){const R=[p,h,v,l,g,w,1,1,1],z=[C,M,1],D=a.adjoint([],R),[W,te,ie]=a.transformMat3(z,z,a.transpose(D,D));return a.multiply$1(R,[W,0,0,0,te,0,0,0,ie],R)}class Pe extends a.Evented{constructor(l,h,g,v){super(),this.id=l,this.dispatcher=g,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=h,this._dirty=!1}load(l,h){this._loaded=h||!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),(g,v)=>{if(this._imageRequest=null,this._loaded=!0,g)this.fire(new a.ErrorEvent(g));else if(v){const{HTMLImageElement:w}=a.window;this.image=v instanceof w?a.exported.getImageData(v):v,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,l&&(this.coordinates=l),this._finishLoading()}})}loaded(){return this._loaded}updateImage(l){return this.image&&l.url?(this._imageRequest&&l.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=l.url,this.load(l.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(l){this.coordinates=l,this._boundsArray=void 0;const h=l.map(a.MercatorCoordinate.fromLngLat);return this.tileID=function(g){let v=1/0,w=1/0,C=-1/0,M=-1/0;for(const W of g)v=Math.min(v,W.x),w=Math.min(w,W.y),C=Math.max(C,W.x),M=Math.max(M,W.y);const R=Math.max(C-v,M-w),z=Math.max(0,Math.floor(-Math.log(R)/Math.LN2)),D=Math.pow(2,z);return new a.CanonicalTileID(z,Math.floor((v+C)/2*D),Math.floor((w+M)/2*D))}(h),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(l){for(const R in this.tiles){const z=this.tiles[R];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture)}if(this._boundsArray)return;const h=a.tileTransform(this.tileID,this.map.transform.projection),[g,v,w,C]=this.coordinates.map(R=>{const z=h.projection.project(R[0],R[1]);return a.getTilePoint(h,z)._round()});this.perspectiveTransform=function(R,z,D,W,te,ie,ae,le,de,Q){const xe=ve(0,0,R,0,0,z,R,z),ye=ve(D,W,te,ie,ae,le,de,Q);return a.multiply$1(ye,a.adjoint(xe,xe),ye),[ye[6]/ye[8]*R/a.EXTENT,ye[7]/ye[8]*z/a.EXTENT]}(this.width,this.height,g.x,g.y,v.x,v.y,C.x,C.y,w.x,w.y);const M=this._boundsArray=new a.StructArrayLayout4i8;M.emplaceBack(g.x,g.y,0,0),M.emplaceBack(v.x,v.y,a.EXTENT,0),M.emplaceBack(C.x,C.y,0,a.EXTENT),M.emplaceBack(w.x,w.y,a.EXTENT,a.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=l.createVertexBuffer(M,a.boundsAttributes.members),this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,h=l.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new a.Texture(l,this.image,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(l)}loadTile(l,h){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={},h(null)):(l.state="errored",h(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const We={vector:j,raster:K,"raster-dem":class extends K{constructor(p,l,h,g){super(p,l,h,g),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox"}loadTile(p,l){const h=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function g(v,w){v&&(p.state="errored",l(v)),w&&(p.dem=w,p.dem.onDeserialize(),p.needsHillshadePrepare=!0,p.needsDEMTextureUpload=!0,p.state="loaded",l(null))}p.request=a.getImage(this.map._requestManager.transformRequest(h,a.ResourceType.Tile),function(v,w,C,M){if(delete p.request,p.aborted)p.state="unloaded",l(null);else if(v)p.state="errored",l(v);else if(w){this.map._refreshExpiredTiles&&p.setExpiryData({cacheControl:C,expires:M});const R=a.window.ImageBitmap&&w instanceof a.window.ImageBitmap&&(oe==null&&(oe=a.window.OffscreenCanvas&&new a.window.OffscreenCanvas(1,1).getContext("2d")&&typeof a.window.createImageBitmap=="function"),oe),z=1-(w.width-a.prevPowerOfTwo(w.width))/2;z<1||p.neighboringTiles||(p.neighboringTiles=this._getNeighboringTiles(p.tileID));const D=R?w:a.exported.getImageData(w,z),W={uid:p.uid,coord:p.tileID,source:this.id,rawImageData:D,encoding:this.encoding,padding:z};p.actor&&p.state!=="expired"||(p.actor=this.dispatcher.getActor(),p.actor.send("loadDEMTile",W,g.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(p){const l=p.canonical,h=Math.pow(2,l.z),g=(l.x-1+h)%h,v=l.x===0?p.wrap-1:p.wrap,w=(l.x+1+h)%h,C=l.x+1===h?p.wrap+1:p.wrap,M={};return M[new a.OverscaledTileID(p.overscaledZ,v,l.z,g,l.y).key]={backfilled:!1},M[new a.OverscaledTileID(p.overscaledZ,C,l.z,w,l.y).key]={backfilled:!1},l.y>0&&(M[new a.OverscaledTileID(p.overscaledZ,v,l.z,g,l.y-1).key]={backfilled:!1},M[new a.OverscaledTileID(p.overscaledZ,p.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},M[new a.OverscaledTileID(p.overscaledZ,C,l.z,w,l.y-1).key]={backfilled:!1}),l.y+1<h&&(M[new a.OverscaledTileID(p.overscaledZ,v,l.z,g,l.y+1).key]={backfilled:!1},M[new a.OverscaledTileID(p.overscaledZ,p.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},M[new a.OverscaledTileID(p.overscaledZ,C,l.z,w,l.y+1).key]={backfilled:!1}),M}unloadTile(p){p.demTexture&&this.map.painter.saveTileTexture(p.demTexture),p.fbo&&(p.fbo.destroy(),delete p.fbo),p.dem&&delete p.dem,delete p.neighboringTiles,p.state="unloaded"}},geojson:class extends a.Evented{constructor(p,l,h,g){super(),this.id=p,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=h.getActor(),this.setEventedParent(g),this._data=l.data,this._options=a.extend({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const v=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*v,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*v,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:a.EXTENT,radius:(l.clusterRadius!==void 0?l.clusterRadius:50)*v,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions)}onAdd(p){this.map=p,this.setData(this._data)}setData(p){return this._data=p,this._updateWorkerData(),this}getClusterExpansionZoom(p,l){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:p,source:this.id},l),this}getClusterChildren(p,l){return this.actor.send("geojson.getClusterChildren",{clusterId:p,source:this.id},l),this}getClusterLeaves(p,l,h,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:p,limit:l,offset:h},g),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new a.Event("dataloading",{dataType:"source"})),this._loaded=!1;const p=a.extend({},this.workerOptions),l=this._data;typeof l=="string"?(p.request=this.map._requestManager.transformRequest(a.exported.resolveURL(l),a.ResourceType.Source),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(l),this._pendingLoad=this.actor.send(`${this.type}.loadData`,p,(h,g)=>{if(this._loaded=!0,this._pendingLoad=null,h)this.fire(new a.ErrorEvent(h));else{const v={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&g&&g.resourceTiming&&g.resourceTiming[this.id]&&(v.resourceTiming=g.resourceTiming[this.id]),this.fire(new a.Event("data",v)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(p,l){const h=p.actor?"reloadTile":"loadTile";p.actor=this.actor,p.request=this.actor.send(h,{type:this.type,uid:p.uid,tileID:p.tileID,tileZoom:p.tileZoom,zoom:p.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(g,v)=>(delete p.request,p.unloadVectorData(),p.aborted?l(null):g?l(g):(p.loadVectorData(v,this.map.painter,h==="reloadTile"),l(null))),void 0,h==="loadTile")}abortTile(p){p.request&&(p.request.cancel(),delete p.request),p.aborted=!0}unloadTile(p){p.unloadVectorData(),this.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return a.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Pe{constructor(p,l,h,g){super(p,l,h,g),this.roundZoom=!0,this.type="video",this.options=l}load(){this._loaded=!1;const p=this.options;this.urls=[];for(const l of p.urls)this.urls.push(this.map._requestManager.transformRequest(l,a.ResourceType.Source).url);a.getVideo(this.urls,(l,h)=>{this._loaded=!0,l?this.fire(new a.ErrorEvent(l)):h&&(this.video=h,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(p){if(this.video){const l=this.video.seekable;p<l.start(0)||p>l.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=p}}getVideo(){return this.video}onAdd(p){this.map||(this.map=p,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const p=this.map.painter.context,l=p.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(p,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(p)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Pe,canvas:class extends Pe{constructor(p,l,h,g){super(p,l,h,g),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(w=>typeof w!="number"))||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${p}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${p}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${p}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${p}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${p}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(p){this.map=p,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let p=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,p=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,p=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context;this.texture?(p||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(l,this.canvas,l.gl.RGBA,{premultiply:!0}),this._prepareData(l)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const p of[this.canvas.width,this.canvas.height])if(isNaN(p)||p<=0)return!0;return!1}},custom:class extends a.Evented{constructor(p,l,h,g){super(),this.id=p,this.type="custom",this._dataType="raster",this._dispatcher=h,this._implementation=l,this.setEventedParent(g),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new a.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new a.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new St(this._implementation.bounds,this.minzoom,this.maxzoom)),l.update=this._update.bind(this),l.clearTiles=this._clearTiles.bind(this),l.coveringTiles=this._coveringTiles.bind(this),a.extend(this,a.pick(l,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return a.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(p){this._map=p,this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(p),this.load()}onRemove(p){this._implementation.onRemove&&this._implementation.onRemove(p)}hasTile(p){if(this._implementation.hasTile){const{x:l,y:h,z:g}=p.canonical;return this._implementation.hasTile({x:l,y:h,z:g})}return!this.tileBounds||this.tileBounds.contains(p.canonical)}loadTile(p,l){const{x:h,y:g,z:v}=p.tileID.canonical,w=new a.window.AbortController;p.request=Promise.resolve(this._implementation.loadTile({x:h,y:g,z:v},{signal:w.signal})).then(function(C){return delete p.request,p.aborted?(p.state="unloaded",l(null)):C===void 0?(p.state="errored",l(null)):C===null?(this.loadTileData(p,{width:this.tileSize,height:this.tileSize,data:null}),p.state="loaded",l(null)):function(M){return M instanceof a.window.ImageData||M instanceof a.window.HTMLCanvasElement||M instanceof a.window.ImageBitmap||M instanceof a.window.HTMLImageElement}(C)?(this.loadTileData(p,C),p.state="loaded",void l(null)):(p.state="errored",l(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(C=>{C.code!==20&&(p.state="errored",l(C))}),p.request.cancel=()=>w.abort()}loadTileData(p,l){K.loadTileData(p,l,this._map.painter)}unloadTileData(p){K.unloadTileData(p,this._map.painter)}unloadTile(p,l){if(this.unloadTileData(p),this._implementation.unloadTile){const{x:h,y:g,z:v}=p.tileID.canonical;this._implementation.unloadTile({x:h,y:g,z:v})}l()}abortTile(p,l){p.request&&p.request.cancel&&(p.request.cancel(),delete p.request),l()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(p=>({x:p.canonical.x,y:p.canonical.y,z:p.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Ve=function(p,l,h,g){const v=new We[l.type](p,l,h,g);if(v.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${v.id}`);return a.bindAll(["load","abort","unload","serialize","prepare"],v),v};function Oe(p,l){const h=a.identity([]);return a.scale(h,h,[.5*p.width,.5*-p.height,1]),a.translate(h,h,[1,-1,0]),a.multiply(h,h,p.calculateProjMatrix(l.toUnwrapped())),Float32Array.from(h)}function je(p,l,h,g,v,w,C,M=!1){const R=p.tilesIn(g,C,M);R.sort(qt);const z=[];for(const W of R)z.push({wrappedTileID:W.tile.tileID.wrapped().key,queryResults:W.tile.queryRenderedFeatures(l,h,p._state,W,v,w,Oe(p.transform,W.tile.tileID),M)});const D=function(W){const te={},ie={};for(const ae of W){const le=ae.queryResults,de=ae.wrappedTileID,Q=ie[de]=ie[de]||{};for(const xe in le){const ye=le[xe],we=Q[xe]=Q[xe]||{},Ie=te[xe]=te[xe]||[];for(const Ae of ye)we[Ae.featureIndex]||(we[Ae.featureIndex]=!0,Ie.push(Ae))}}return te}(z);for(const W in D)D[W].forEach(te=>{const ie=te.feature,ae=ie.layer;ae&&ae.type!=="background"&&ae.type!=="sky"&&(ie.source=ae.source,ae["source-layer"]&&(ie.sourceLayer=ae["source-layer"]),ie.state=ie.id!==void 0?p.getFeatureState(ae["source-layer"],ie.id):{})});return D}function mt(p,l){const h=p.getRenderableIds().map(w=>p.getTileByID(w)),g=[],v={};for(let w=0;w<h.length;w++){const C=h[w],M=C.tileID.canonical.key;v[M]||(v[M]=!0,C.querySourceFeatures(g,l))}return g}function qt(p,l){const h=p.tileID,g=l.tileID;return h.overscaledZ-g.overscaledZ||h.canonical.y-g.canonical.y||h.wrap-g.wrap||h.canonical.x-g.canonical.x}function At(){return tu.workerClass!=null?new tu.workerClass:new a.window.Worker(tu.workerUrl)}const cn="mapboxgl_preloaded_worker_pool";class gn{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<gn.workerCount;)this.workers.push(new At);return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(h=>{h.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[cn]}numActive(){return Object.keys(this.active).length}}let mn;function An(){return mn||(mn=new gn),mn}function zn(p,l){const h={};for(const g in p)g!=="ref"&&(h[g]=p[g]);return a.refProperties.forEach(g=>{g in l&&(h[g]=l[g])}),h}function ir(p){p=p.slice();const l=Object.create(null);for(let h=0;h<p.length;h++)l[p[h].id]=p[h];for(let h=0;h<p.length;h++)"ref"in p[h]&&(p[h]=zn(p[h],l[p[h].ref]));return p}gn.workerCount=2;const wn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function gr(p,l,h){h.push({command:wn.addSource,args:[p,l[p]]})}function yr(p,l,h){l.push({command:wn.removeSource,args:[p]}),h[p]=!0}function Ga(p,l,h,g){yr(p,h,g),gr(p,l,h)}function xa(p,l,h){let g;for(g in p[h])if(p[h].hasOwnProperty(g)&&g!=="data"&&!b(p[h][g],l[h][g]))return!1;for(g in l[h])if(l[h].hasOwnProperty(g)&&g!=="data"&&!b(p[h][g],l[h][g]))return!1;return!0}function pt(p,l,h,g,v,w){let C;for(C in l=l||{},p=p||{})p.hasOwnProperty(C)&&(b(p[C],l[C])||h.push({command:w,args:[g,C,l[C],v]}));for(C in l)l.hasOwnProperty(C)&&!p.hasOwnProperty(C)&&(b(p[C],l[C])||h.push({command:w,args:[g,C,l[C],v]}))}function ba(p){return p.id}function ai(p,l){return p[l.id]=l,p}class Wa{constructor(l,h){this.reset(l,h)}reset(l,h){this.points=l||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=a.clamp(l,0,1);let h=1,g=this._distances[h];const v=l*this.paddedLength+this.padding;for(;g<v&&h<this._distances.length;)g=this._distances[++h];const w=h-1,C=this._distances[w],M=g-C,R=M>0?(v-C)/M:0;return this.points[w].mult(1-R).add(this.points[h].mult(R))}}class Bg{constructor(l,h,g){const v=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(l/g),this.yCellCount=Math.ceil(h/g);for(let C=0;C<this.xCellCount*this.yCellCount;C++)v.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=h,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,h,g,v,w){this._forEachCell(h,g,v,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(v),this.bboxes.push(w)}insertCircle(l,h,g,v){this._forEachCell(h-v,g-v,h+v,g+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(h),this.circles.push(g),this.circles.push(v)}_insertBoxCell(l,h,g,v,w,C){this.boxCells[w].push(C)}_insertCircleCell(l,h,g,v,w,C){this.circleCells[w].push(C)}_query(l,h,g,v,w,C){if(g<0||l>this.width||v<0||h>this.height)return!w&&[];const M=[];if(l<=0&&h<=0&&this.width<=g&&this.height<=v){if(w)return!0;for(let R=0;R<this.boxKeys.length;R++)M.push({key:this.boxKeys[R],x1:this.bboxes[4*R],y1:this.bboxes[4*R+1],x2:this.bboxes[4*R+2],y2:this.bboxes[4*R+3]});for(let R=0;R<this.circleKeys.length;R++){const z=this.circles[3*R],D=this.circles[3*R+1],W=this.circles[3*R+2];M.push({key:this.circleKeys[R],x1:z-W,y1:D-W,x2:z+W,y2:D+W})}return C?M.filter(C):M}return this._forEachCell(l,h,g,v,this._queryCell,M,{hitTest:w,seenUids:{box:{},circle:{}}},C),w?M.length>0:M}_queryCircle(l,h,g,v,w){const C=l-g,M=l+g,R=h-g,z=h+g;if(M<0||C>this.width||z<0||R>this.height)return!v&&[];const D=[];return this._forEachCell(C,R,M,z,this._queryCellCircle,D,{hitTest:v,circle:{x:l,y:h,radius:g},seenUids:{box:{},circle:{}}},w),v?D.length>0:D}query(l,h,g,v,w){return this._query(l,h,g,v,!1,w)}hitTest(l,h,g,v,w){return this._query(l,h,g,v,!0,w)}hitTestCircle(l,h,g,v){return this._queryCircle(l,h,g,!0,v)}_queryCell(l,h,g,v,w,C,M,R){const z=M.seenUids,D=this.boxCells[w];if(D!==null){const te=this.bboxes;for(const ie of D)if(!z.box[ie]){z.box[ie]=!0;const ae=4*ie;if(l<=te[ae+2]&&h<=te[ae+3]&&g>=te[ae+0]&&v>=te[ae+1]&&(!R||R(this.boxKeys[ie]))){if(M.hitTest)return C.push(!0),!0;C.push({key:this.boxKeys[ie],x1:te[ae],y1:te[ae+1],x2:te[ae+2],y2:te[ae+3]})}}}const W=this.circleCells[w];if(W!==null){const te=this.circles;for(const ie of W)if(!z.circle[ie]){z.circle[ie]=!0;const ae=3*ie;if(this._circleAndRectCollide(te[ae],te[ae+1],te[ae+2],l,h,g,v)&&(!R||R(this.circleKeys[ie]))){if(M.hitTest)return C.push(!0),!0;{const le=te[ae],de=te[ae+1],Q=te[ae+2];C.push({key:this.circleKeys[ie],x1:le-Q,y1:de-Q,x2:le+Q,y2:de+Q})}}}}}_queryCellCircle(l,h,g,v,w,C,M,R){const z=M.circle,D=M.seenUids,W=this.boxCells[w];if(W!==null){const ie=this.bboxes;for(const ae of W)if(!D.box[ae]){D.box[ae]=!0;const le=4*ae;if(this._circleAndRectCollide(z.x,z.y,z.radius,ie[le+0],ie[le+1],ie[le+2],ie[le+3])&&(!R||R(this.boxKeys[ae])))return C.push(!0),!0}}const te=this.circleCells[w];if(te!==null){const ie=this.circles;for(const ae of te)if(!D.circle[ae]){D.circle[ae]=!0;const le=3*ae;if(this._circlesCollide(ie[le],ie[le+1],ie[le+2],z.x,z.y,z.radius)&&(!R||R(this.circleKeys[ae])))return C.push(!0),!0}}}_forEachCell(l,h,g,v,w,C,M,R){const z=this._convertToXCellCoord(l),D=this._convertToYCellCoord(h),W=this._convertToXCellCoord(g),te=this._convertToYCellCoord(v);for(let ie=z;ie<=W;ie++)for(let ae=D;ae<=te;ae++)if(w.call(this,l,h,g,v,this.xCellCount*ae+ie,C,M,R))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,h,g,v,w,C){const M=v-l,R=w-h,z=g+C;return z*z>M*M+R*R}_circleAndRectCollide(l,h,g,v,w,C,M){const R=(C-v)/2,z=Math.abs(l-(v+R));if(z>R+g)return!1;const D=(M-w)/2,W=Math.abs(h-(w+D));if(W>D+g)return!1;if(z<=R||W<=D)return!0;const te=z-R,ie=W-D;return te*te+ie*ie<=g*g}}const na=Math.tan(85*Math.PI/180);function ul(p,l,h,g,v,w,C){const M=a.create();if(h)if(w.name==="globe"){const R=a.calculateGlobeLabelMatrix(v,l);a.multiply(M,M,R)}else{const R=fe([],C);M[0]=R[0],M[1]=R[1],M[4]=R[2],M[5]=R[3],g||a.rotateZ(M,M,v.angle)}else a.multiply(M,v.labelPlaneMatrix,p);return M}function Ng(p,l,h,g,v,w,C){const M=ul(p,l,h,g,v,w,C);return w.name==="globe"&&h||(M[2]=M[6]=M[10]=M[14]=0),M}function dl(p,l,h,g,v,w,C){if(h){if(w.name==="globe"){const M=ul(p,l,h,g,v,w,C);return a.invert(M,M),a.multiply(M,p,M),M}{const M=a.clone(p),R=a.identity([]);return R[0]=C[0],R[1]=C[1],R[4]=C[2],R[5]=C[3],a.multiply(M,M,R),g||a.rotateZ(M,M,-v.angle),M}}return v.glCoordMatrix}function $t(p,l,h,g){const v=[p,l,h,1];h?a.transformMat4$1(v,v,g):$g(v,v,g);const w=v[3];return v[0]/=w,v[1]/=w,v[2]/=w,v}function Gn(p,l){return Math.min(.5+p/l*.5,1.5)}function Nn(p,l){const h=p[0]/p[3],g=p[1]/p[3];return h>=-l[0]&&h<=l[0]&&g>=-l[1]&&g<=l[1]}function ra(p,l,h,g,v,w,C,M,R,z){const D=h.transform,W=g?p.textSizeData:p.iconSizeData,te=a.evaluateSizeForZoom(W,h.transform.zoom),ie=D.projection.name==="globe",ae=[256/h.width*2+1,256/h.height*2+1],le=g?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;le.clear();let de=null;ie&&(de=g?p.text.globeExtVertexArray:p.icon.globeExtVertexArray);const Q=p.lineVertexArray,xe=g?p.text.placedSymbolArray:p.icon.placedSymbolArray,ye=h.transform.width/h.transform.height;let we,Ie=!1;for(let Ae=0;Ae<xe.length;Ae++){const Fe=xe.get(Ae),{numGlyphs:He,writingMode:tt}=Fe;if(tt!==a.WritingMode.vertical||Ie||we===a.WritingMode.horizontal||(Ie=!0),we=tt,(Fe.hidden||tt===a.WritingMode.vertical)&&!Ie){Cr(He,le);continue}Ie=!1;const ot=new a.pointGeometry(Fe.tileAnchorX,Fe.tileAnchorY);let{x:Ot,y:Ye,z:xt}=D.projection.projectTilePoint(ot.x,ot.y,z.canonical);if(R){const[Dn,on,Xt]=R(ot);Ot+=Dn,Ye+=on,xt+=Xt}const dt=[Ot,Ye,xt,1];if(a.transformMat4$1(dt,dt,l),!Nn(dt,ae)){Cr(He,le);continue}const Tt=Gn(h.transform.cameraToCenterDistance,dt[3]),rt=a.evaluateSizeForFeature(W,te,Fe),qe=C?rt/Tt:rt*Tt,at=$t(Ot,Ye,xt,v);if(at[3]<=0){Cr(He,le);continue}let wt={};const kt=C?null:R,un=Cc(Fe,qe,!1,M,l,v,w,p.glyphOffsetArray,Q,le,de,at,ot,wt,ye,kt,D.projection,z,C);Ie=un.useVertical,kt&&un.needsFlipping&&(wt={}),(un.notEnoughRoom||Ie||un.needsFlipping&&Cc(Fe,qe,!0,M,l,v,w,p.glyphOffsetArray,Q,le,de,at,ot,wt,ye,kt,D.projection,z,C).notEnoughRoom)&&Cr(He,le)}g?(p.text.dynamicLayoutVertexBuffer.updateData(le),de&&p.text.globeExtVertexBuffer.updateData(de)):(p.icon.dynamicLayoutVertexBuffer.updateData(le),de&&p.icon.globeExtVertexBuffer.updateData(de))}function bs(p,l,h,g,v,w,C,M,R,z,D,W,te,ie,ae,le){const{lineStartIndex:de,glyphStartIndex:Q,segment:xe}=M,ye=Q+M.numGlyphs,we=de+M.lineLength,Ie=l.getoffsetX(Q),Ae=l.getoffsetX(ye-1),Fe=Zi(p*Ie,h,g,v,w,C,xe,de,we,R,z,D,W,te,!0,ie,ae,le);if(!Fe)return null;const He=Zi(p*Ae,h,g,v,w,C,xe,de,we,R,z,D,W,te,!0,ie,ae,le);return He?{first:Fe,last:He}:null}function Fn(p,l,h,g){return p===a.WritingMode.horizontal&&Math.abs(g)>Math.abs(h)?{useVertical:!0}:p===a.WritingMode.vertical?g>0?{needsFlipping:!0}:null:l!==0&&function(v,w){return v===0||Math.abs(w/v)>na}(h,g)?l===1?{needsFlipping:!0}:null:h<0?{needsFlipping:!0}:null}function Cc(p,l,h,g,v,w,C,M,R,z,D,W,te,ie,ae,le,de,Q,xe){const ye=l/24,we=p.lineOffsetX*ye,Ie=p.lineOffsetY*ye,{lineStartIndex:Ae,glyphStartIndex:Fe,numGlyphs:He,segment:tt,writingMode:ot,flipState:Ot}=p,Ye=Ae+p.lineLength,xt=dt=>{if(D){const[at,wt,kt]=dt.up,un=z.length;a.updateGlobeVertexNormal(D,un+0,at,wt,kt),a.updateGlobeVertexNormal(D,un+1,at,wt,kt),a.updateGlobeVertexNormal(D,un+2,at,wt,kt),a.updateGlobeVertexNormal(D,un+3,at,wt,kt)}const[Tt,rt,qe]=dt.point;a.addDynamicAttributes(z,Tt,rt,qe,dt.angle)};if(He>1){const dt=bs(ye,M,we,Ie,h,W,te,p,R,w,ie,le,!1,de,Q,xe);if(!dt)return{notEnoughRoom:!0};if(g&&!h){let[Tt,rt,qe]=dt.first.point,[at,wt,kt]=dt.last.point;[Tt,rt]=$t(Tt,rt,qe,C),[at,wt]=$t(at,wt,kt,C);const un=Fn(ot,Ot,(at-Tt)*ae,wt-rt);if(p.flipState=un&&un.needsFlipping?1:2,un)return un}xt(dt.first);for(let Tt=Fe+1;Tt<Fe+He-1;Tt++){const rt=Zi(ye*M.getoffsetX(Tt),we,Ie,h,W,te,tt,Ae,Ye,R,w,ie,le,!1,!1,de,Q,xe);if(!rt)return z.length-=4*(Tt-Fe),{notEnoughRoom:!0};xt(rt)}xt(dt.last)}else{if(g&&!h){const Tt=$t(te.x,te.y,0,v),rt=Ae+tt+1,qe=new a.pointGeometry(R.getx(rt),R.gety(rt)),at=$t(qe.x,qe.y,0,v),wt=at[3]>0?at:fl(te,qe,Tt,1,v,void 0,de,Q.canonical),kt=Fn(ot,Ot,(wt[0]-Tt[0])*ae,wt[1]-Tt[1]);if(p.flipState=kt&&kt.needsFlipping?1:2,kt)return kt}const dt=Zi(ye*M.getoffsetX(Fe),we,Ie,h,W,te,tt,Ae,Ye,R,w,ie,le,!1,!1,de,Q,xe);if(!dt)return{notEnoughRoom:!0};xt(dt)}return{}}function hl(p,l,h,g,v){const{x:w,y:C,z:M}=g.projectTilePoint(p.x,p.y,l);if(!v)return $t(w,C,M,h);const[R,z,D]=v(p);return $t(w+R,C+z,M+D,h)}function fl(p,l,h,g,v,w,C,M){const R=hl(p.sub(l)._unit()._add(p),M,v,C,w);return a.sub(R,h,R),a.normalize(R,R),a.scaleAndAdd(R,h,R,g)}function Zi(p,l,h,g,v,w,C,M,R,z,D,W,te,ie,ae,le,de,Q){const xe=g?p-l:p+l;let ye=xe>0?1:-1,we=0;g&&(ye*=-1,we=Math.PI),ye<0&&(we+=Math.PI);let Ie=M+C+(ye>0?0:1)|0,Ae=v,Fe=v,He=0,tt=0;const ot=Math.abs(xe),Ot=[],Ye=[];let xt=w,dt=xt;const Tt=()=>fl(dt,xt,Fe,ot-He+1,D,te,le,de.canonical);for(;He+tt<=ot;){if(Ie+=ye,Ie<M||Ie>=R)return null;if(Fe=Ae,dt=xt,Ot.push(Fe),ie&&Ye.push(dt),xt=new a.pointGeometry(z.getx(Ie),z.gety(Ie)),Ae=W[Ie],!Ae){const Xt=hl(xt,de.canonical,D,le,te);Ae=Xt[3]>0?W[Ie]=Xt:Tt()}He+=tt,tt=a.distance(Fe,Ae)}ae&&te&&(W[Ie]&&(Ae=Tt(),tt=a.distance(Fe,Ae)),W[Ie]=Ae);const rt=(ot-He)/tt,qe=xt.sub(dt)._mult(rt)._add(dt),at=a.sub([],Ae,Fe),wt=a.scaleAndAdd([],Fe,at,rt);let kt=[0,0,1],un=at[0],Dn=at[1];if(Q&&(kt=le.upVector(de.canonical,qe.x,qe.y),kt[0]!==0||kt[1]!==0||kt[2]!==1)){const Xt=[kt[2],0,-kt[0]],dn=a.cross([],kt,Xt);a.normalize(Xt,Xt),a.normalize(dn,dn),un=a.dot(at,Xt),Dn=a.dot(at,dn)}if(h){const Xt=a.cross([],kt,at);a.normalize(Xt,Xt),a.scaleAndAdd(wt,wt,Xt,h*ye)}const on=we+Math.atan2(Dn,un);return Ot.push(wt),ie&&Ye.push(qe),{point:wt,angle:on,path:Ot,tilePath:Ye,up:kt}}function Cr(p,l){const h=l.length,g=h+4*p;l.resize(g),l.float32.fill(-1/0,4*h,4*g)}function $g(p,l,h){const g=l[0],v=l[1];return p[0]=h[0]*g+h[4]*v+h[12],p[1]=h[1]*g+h[5]*v+h[13],p[3]=h[3]*g+h[7]*v+h[15],p}const no=100;class pf{constructor(l,h,g=new Bg(l.width+200,l.height+200,25),v=new Bg(l.width+200,l.height+200,25)){this.transform=l,this.grid=g,this.ignoredGrid=v,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+no,this.screenBottomBoundary=l.height+no,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.fogState=h}placeCollisionBox(l,h,g,v,w,C,M,R){let z=g.projectedAnchorX,D=g.projectedAnchorY,W=g.projectedAnchorZ;const te=g.elevation,ie=g.tileID,ae=l.getProjection();if(te&&ie){const[Ae,Fe,He]=ae.upVector(ie.canonical,g.tileAnchorX,g.tileAnchorY),tt=ae.upVectorScale(ie.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;z+=Ae*te*tt,D+=Fe*te*tt,W+=He*te*tt}const le=this.projectAndGetPerspectiveRatio(M,z,D,W,g.tileID,ae.name==="globe"||!!te||this.transform.pitch>0,ae),de=C*le.perspectiveRatio,Q=(g.x1*h+v.x-g.padding)*de+le.point.x,xe=(g.y1*h+v.y-g.padding)*de+le.point.y,ye=(g.x2*h+v.x+g.padding)*de+le.point.x,we=(g.y2*h+v.y+g.padding)*de+le.point.y,Ie=le.perspectiveRatio<=.55||le.occluded;return!this.isInsideGrid(Q,xe,ye,we)||!w&&this.grid.hitTest(Q,xe,ye,we,R)||Ie?{box:[],offscreen:!1,occluded:le.occluded}:{box:[Q,xe,ye,we],offscreen:this.isOffscreen(Q,xe,ye,we),occluded:!1}}placeCollisionCircles(l,h,g,v,w,C,M,R,z,D,W,te,ie,ae,le){const de=[],Q=this.transform.elevation,xe=l.getProjection(),ye=Q?Q.getAtTileOffsetFunc(le,this.transform.center.lat,this.transform.worldSize,xe):null,we=new a.pointGeometry(g.tileAnchorX,g.tileAnchorY);let{x:Ie,y:Ae,z:Fe}=xe.projectTilePoint(we.x,we.y,le.canonical);if(ye){const[qe,at,wt]=ye(we);Ie+=qe,Ae+=at,Fe+=wt}const He=xe.name==="globe",tt=this.projectAndGetPerspectiveRatio(M,Ie,Ae,Fe,le,He||!!Q||this.transform.pitch>0,xe),{perspectiveRatio:ot}=tt,Ot=(W?C/ot:C*ot)/a.ONE_EM,Ye=$t(Ie,Ae,Fe,R),xt=tt.signedDistanceFromCamera>0?bs(Ot,w,g.lineOffsetX*Ot,g.lineOffsetY*Ot,!1,Ye,we,g,v,R,{},Q&&!W?ye:null,W&&!!Q,xe,le,W):null;let dt=!1,Tt=!1,rt=!0;if(xt&&!tt.occluded){const qe=.5*ie*ot+ae,at=new a.pointGeometry(-100,-100),wt=new a.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),kt=new Wa,{first:un,last:Dn}=xt,on=un.path.length;let Xt=[];for(let yn=on-1;yn>=1;yn--)Xt.push(un.path[yn]);for(let yn=1;yn<Dn.path.length;yn++)Xt.push(Dn.path[yn]);const dn=2.5*qe;z&&(Xt=Xt.map(([yn,lr,ur],Mr)=>(ye&&!He&&(ur=ye(Mr<on-1?un.tilePath[on-1-Mr]:Dn.tilePath[Mr-on+2])[2]),$t(yn,lr,ur,z))),Xt.some(yn=>yn[3]<=0)&&(Xt=[]));let $n=[];if(Xt.length>0){let yn=1/0,lr=-1/0,ur=1/0,Mr=-1/0;for(const wr of Xt)yn=Math.min(yn,wr[0]),ur=Math.min(ur,wr[1]),lr=Math.max(lr,wr[0]),Mr=Math.max(Mr,wr[1]);lr>=at.x&&yn<=wt.x&&Mr>=at.y&&ur<=wt.y&&($n=[Xt.map(wr=>new a.pointGeometry(wr[0],wr[1]))],(yn<at.x||lr>wt.x||ur<at.y||Mr>wt.y)&&($n=a.clipLine($n,at.x,at.y,wt.x,wt.y)))}for(const yn of $n){kt.reset(yn,.25*qe);let lr=0;lr=kt.length<=.5*qe?1:Math.ceil(kt.paddedLength/dn)+1;for(let ur=0;ur<lr;ur++){const Mr=ur/Math.max(lr-1,1),wr=kt.lerp(Mr),si=wr.x+no,oo=wr.y+no;de.push(si,oo,qe,0);const Uo=si-qe,Ta=oo-qe,Or=si+qe,Sr=oo+qe;if(rt=rt&&this.isOffscreen(Uo,Ta,Or,Sr),Tt=Tt||this.isInsideGrid(Uo,Ta,Or,Sr),!h&&this.grid.hitTestCircle(si,oo,qe,te)&&(dt=!0,!D))return{circles:[],offscreen:!1,collisionDetected:dt,occluded:!1}}}}return{circles:!D&&dt||!Tt?[]:de,offscreen:rt,collisionDetected:dt,occluded:tt.occluded}}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[];let g=1/0,v=1/0,w=-1/0,C=-1/0;for(const D of l){const W=new a.pointGeometry(D.x+no,D.y+no);g=Math.min(g,W.x),v=Math.min(v,W.y),w=Math.max(w,W.x),C=Math.max(C,W.y),h.push(W)}const M=this.grid.query(g,v,w,C).concat(this.ignoredGrid.query(g,v,w,C)),R={},z={};for(const D of M){const W=D.key;if(R[W.bucketInstanceId]===void 0&&(R[W.bucketInstanceId]={}),R[W.bucketInstanceId][W.featureIndex])continue;const te=[new a.pointGeometry(D.x1,D.y1),new a.pointGeometry(D.x2,D.y1),new a.pointGeometry(D.x2,D.y2),new a.pointGeometry(D.x1,D.y2)];a.polygonIntersectsPolygon(h,te)&&(R[W.bucketInstanceId][W.featureIndex]=!0,z[W.bucketInstanceId]===void 0&&(z[W.bucketInstanceId]=[]),z[W.bucketInstanceId].push(W.featureIndex))}return z}insertCollisionBox(l,h,g,v,w){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:v,collisionGroupID:w},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,h,g,v,w){const C=h?this.ignoredGrid:this.grid,M={bucketInstanceId:g,featureIndex:v,collisionGroupID:w};for(let R=0;R<l.length;R+=4)C.insertCircle(M,l[R],l[R+1],l[R+2])}projectAndGetPerspectiveRatio(l,h,g,v,w,C,M){const R=[h,g,v,1];let z=!1;if(v||this.transform.pitch>0){a.transformMat4$1(R,R,l);const W=M.name==="globe";this.fogState&&w&&!W&&(z=function(ie,ae,le,de,Q,xe){const ye=xe.calculateFogTileMatrix(Q),we=[ae,le,de];return a.transformMat4(we,we,ye),Ue(ie,we,xe.pitch,xe._fov)}(this.fogState,h,g,v,w.toUnwrapped(),this.transform)>.9)}else $g(R,R,l);const D=R[3];return{point:new a.pointGeometry((R[0]/D+1)/2*this.transform.width+no,(-R[1]/D+1)/2*this.transform.height+no),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(M)/D*.5,1.5),signedDistanceFromCamera:D,occluded:C&&R[2]>D||z}}isOffscreen(l,h,g,v){return g<no||l>=this.screenRightBoundary||v<no||h>this.screenBottomBoundary}isInsideGrid(l,h,g,v){return g>=0&&l<this.gridRightBoundary&&v>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const l=a.identity([]);return a.translate(l,l,[-100,-100,0]),l}}function ws(p,l,h){const g=l.createTileMatrix(p,p.worldSize,h.toUnwrapped());return a.multiply(new Float32Array(16),p.projMatrix,g)}function mf(p,l,h){if(l.projection.name===h.projection.name)return p.projMatrix;const g=h.clone();return g.setProjection(l.projection),ws(g,l.getProjection(),p)}function Qu(p,l,h){return l.name===h.projection.name?p.projMatrix:ws(h,l,p)}class Mc{constructor(l,h,g,v){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?h:-h))):v&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class Ss{constructor(l,h,g,v,w,C=!1){this.text=new Mc(l?l.text:null,h,g,w),this.icon=new Mc(l?l.icon:null,h,v,w),this.clipped=C}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class pl{constructor(l,h,g,v=!1){this.text=l,this.icon=h,this.skipFade=g,this.clipped=v}}class gf{constructor(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]}}class ro{constructor(l,h,g,v,w){this.bucketInstanceId=l,this.featureIndex=h,this.sourceLayerIndex=g,this.bucketIndex=v,this.tileID=w}}class Jr{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const h=++this.maxGroupID;this.collisionGroups[l]={ID:h,predicate:g=>g.collisionGroupID===h}}return this.collisionGroups[l]}}function Ju(p,l,h,g,v){const{horizontalAlign:w,verticalAlign:C}=a.getAnchorAlignment(p),M=-(w-.5)*l,R=-(C-.5)*h,z=a.evaluateVariableOffset(p,g);return new a.pointGeometry(M+z[0]*v,R+z[1]*v)}function Ac(p,l,h,g,v){const w=new a.pointGeometry(p,l);return h&&w._rotate(g?v:-v),w}class io{constructor(l,h,g,v,w){this.transform=l.clone(),this.projection=l.projection.name,this.collisionIndex=new pf(this.transform,w),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new Jr(g),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,h,g,v){const w=g.getBucket(h),C=g.latestFeatureIndex;if(!w||!C||h.id!==w.layerIds[0])return;const M=w.layers[0].layout,R=g.collisionBoxArray,z=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),D=g.tileSize/a.EXTENT,W=g.tileID.toUnwrapped();this.transform.setProjection(w.projection);const te=(ie=g.tileID,ae=w.getProjection(),le=this.transform,ae.name===this.projection?le.calculateProjMatrix(ie.toUnwrapped()):ws(le,ae,ie));var ie,ae,le;const de=M.get("text-pitch-alignment")==="map",Q=M.get("text-rotation-alignment")==="map";h.compileFilter();const xe=h.dynamicFilter(),ye=h.dynamicFilterNeedsFeature(),we=this.transform.calculatePixelsToTileUnitsMatrix(g),Ie=Ng(te,g.tileID.canonical,de,Q,this.transform,w.getProjection(),we);let Ae=null;if(de){const tt=dl(te,g.tileID.canonical,de,Q,this.transform,w.getProjection(),we);Ae=a.multiply([],this.transform.labelPlaneMatrix,tt)}let Fe=null;xe&&g.latestFeatureIndex&&(Fe={unwrappedTileID:W,dynamicFilter:xe,dynamicFilterNeedsFeature:ye,featureIndex:g.latestFeatureIndex}),this.retainedQueryData[w.bucketInstanceId]=new ro(w.bucketInstanceId,C,w.sourceLayerIndex,w.index,g.tileID);const He={bucket:w,layout:M,posMatrix:te,textLabelPlaneMatrix:Ie,labelToScreenMatrix:Ae,clippingData:Fe,scale:z,textPixelRatio:D,holdingForFade:g.holdingForFade(),collisionBoxArray:R,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(w.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:a.evaluateSizeForZoom(w.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(v)for(const tt of w.sortKeyRanges){const{sortKey:ot,symbolInstanceStart:Ot,symbolInstanceEnd:Ye}=tt;l.push({sortKey:ot,symbolInstanceStart:Ot,symbolInstanceEnd:Ye,parameters:He})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:He})}attemptAnchorPlacement(l,h,g,v,w,C,M,R,z,D,W,te,ie,ae,le,de,Q,xe){const{textOffset0:ye,textOffset1:we,crossTileID:Ie}=te,Ae=[ye,we],Fe=Ju(l,g,v,Ae,w),He=this.collisionIndex.placeCollisionBox(ae,w,h,Ac(Fe.x,Fe.y,C,M,this.transform.angle),W,R,z,D.predicate);if(de){const tt=ae.getSymbolInstanceIconSize(xe,this.transform.zoom,te.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(ae,tt,de,Ac(Fe.x,Fe.y,C,M,this.transform.angle),W,R,z,D.predicate).box.length===0)return}if(He.box.length>0){let tt;return this.prevPlacement&&this.prevPlacement.variableOffsets[Ie]&&this.prevPlacement.placements[Ie]&&this.prevPlacement.placements[Ie].text&&(tt=this.prevPlacement.variableOffsets[Ie].anchor),this.variableOffsets[Ie]={textOffset:Ae,width:g,height:v,anchor:l,textScale:w,prevAnchor:tt},this.markUsedJustification(ae,l,te,le),ae.allowVerticalPlacement&&(this.markUsedOrientation(ae,le,te),this.placedOrientations[Ie]=le),{shift:Fe,placedGlyphBoxes:He}}}placeLayerBucketPart(l,h,g,v){const{bucket:w,layout:C,posMatrix:M,textLabelPlaneMatrix:R,labelToScreenMatrix:z,clippingData:D,textPixelRatio:W,holdingForFade:te,collisionBoxArray:ie,partiallyEvaluatedTextSize:ae,partiallyEvaluatedIconSize:le,collisionGroup:de}=l.parameters,Q=C.get("text-optional"),xe=C.get("icon-optional"),ye=C.get("text-allow-overlap"),we=C.get("icon-allow-overlap"),Ie=C.get("text-rotation-alignment")==="map",Ae=C.get("text-pitch-alignment")==="map",Fe=C.get("icon-text-fit")!=="none",He=C.get("symbol-z-order")==="viewport-y";this.transform.setProjection(w.projection);let tt=ye&&(we||!w.hasIconData()||xe),ot=we&&(ye||!w.hasTextData()||Q);!w.collisionArrays&&ie&&w.deserializeCollisionBoxes(ie),g&&v&&w.updateCollisionDebugBuffers(this.transform.zoom,ie);const Ot=(Ye,xt,dt)=>{const{crossTileID:Tt,numVerticalGlyphVertices:rt}=Ye;if(D){const Or={zoom:this.transform.zoom,pitch:this.transform.pitch};let Sr=null;if(D.dynamicFilterNeedsFeature){const tr=this.retainedQueryData[w.bucketInstanceId];Sr=D.featureIndex.loadFeature({featureIndex:Ye.featureIndex,bucketIndex:tr.bucketIndex,sourceLayerIndex:tr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,D.dynamicFilter)(Or,Sr,this.retainedQueryData[w.bucketInstanceId].tileID.canonical,new a.pointGeometry(Ye.tileAnchorX,Ye.tileAnchorY),this.transform.calculateDistanceTileData(D.unwrappedTileID)))return this.placements[Tt]=new pl(!1,!1,!1,!0),void(h[Tt]=!0)}if(h[Tt])return;if(te)return void(this.placements[Tt]=new pl(!1,!1,!1));let qe=!1,at=!1,wt=!0,kt=!1,un=!1,Dn=null,on={box:null,offscreen:null,occluded:null},Xt={box:null,offscreen:null,occluded:null},dn=null,$n=null,yn=null,lr=0,ur=0,Mr=0;dt.textFeatureIndex?lr=dt.textFeatureIndex:Ye.useRuntimeCollisionCircles&&(lr=Ye.featureIndex),dt.verticalTextFeatureIndex&&(ur=dt.verticalTextFeatureIndex);const wr=Or=>{Or.tileID=this.retainedQueryData[w.bucketInstanceId].tileID;const Sr=this.transform.elevation;(Sr||Or.elevation)&&(Or.elevation=Sr?Sr.getAtTileOffset(Or.tileID,Or.tileAnchorX,Or.tileAnchorY):0)},si=dt.textBox;if(si){wr(si);const Or=tr=>{let Hr=a.WritingMode.horizontal;if(w.allowVerticalPlacement&&!tr&&this.prevPlacement){const Bi=this.prevPlacement.placedOrientations[Tt];Bi&&(this.placedOrientations[Tt]=Bi,Hr=Bi,this.markUsedOrientation(w,Hr,Ye))}return Hr},Sr=(tr,Hr)=>{if(w.allowVerticalPlacement&&rt>0&&dt.verticalTextBox){for(const Bi of w.writingModes)if(Bi===a.WritingMode.vertical?(on=Hr(),Xt=on):on=tr(),on&&on.box&&on.box.length)break}else on=tr()};if(C.get("text-variable-anchor")){let tr=C.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Tt]){const Pr=this.prevPlacement.variableOffsets[Tt];tr.indexOf(Pr.anchor)>0&&(tr=tr.filter(Ni=>Ni!==Pr.anchor),tr.unshift(Pr.anchor))}const Hr=(Pr,Ni,$i)=>{const Ka=w.getSymbolInstanceTextSize(ae,Ye,this.transform.zoom,xt),Rl=(Pr.x2-Pr.x1)*Ka+2*Pr.padding,yo=(Pr.y2-Pr.y1)*Ka+2*Pr.padding,Co=Fe&&!we?Ni:null;Co&&wr(Co);let Ca={box:[],offscreen:!1,occluded:!1};const Ya=ye?2*tr.length:tr.length;for(let Qa=0;Qa<Ya;++Qa){const Il=this.attemptAnchorPlacement(tr[Qa%tr.length],Pr,Rl,yo,Ka,Ie,Ae,W,M,de,Qa>=tr.length,Ye,xt,w,$i,Co,ae,le);if(Il&&(Ca=Il.placedGlyphBoxes,Ca&&Ca.box&&Ca.box.length)){qe=!0,Dn=Il.shift;break}}return Ca};Sr(()=>Hr(si,dt.iconBox,a.WritingMode.horizontal),()=>{const Pr=dt.verticalTextBox;return Pr&&wr(Pr),w.allowVerticalPlacement&&!(on&&on.box&&on.box.length)&&rt>0&&Pr?Hr(Pr,dt.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),on&&(qe=on.box,wt=on.offscreen,kt=on.occluded);const Bi=Or(on&&on.box);if(!qe&&this.prevPlacement){const Pr=this.prevPlacement.variableOffsets[Tt];Pr&&(this.variableOffsets[Tt]=Pr,this.markUsedJustification(w,Pr.anchor,Ye,Bi))}}else{const tr=(Hr,Bi)=>{const Pr=w.getSymbolInstanceTextSize(ae,Ye,this.transform.zoom,xt),Ni=this.collisionIndex.placeCollisionBox(w,Pr,Hr,new a.pointGeometry(0,0),ye,W,M,de.predicate);return Ni&&Ni.box&&Ni.box.length&&(this.markUsedOrientation(w,Bi,Ye),this.placedOrientations[Tt]=Bi),Ni};Sr(()=>tr(si,a.WritingMode.horizontal),()=>{const Hr=dt.verticalTextBox;return w.allowVerticalPlacement&&rt>0&&Hr?(wr(Hr),tr(Hr,a.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Or(on&&on.box&&on.box.length)}}if(dn=on,qe=dn&&dn.box&&dn.box.length>0,wt=dn&&dn.offscreen,kt=dn&&dn.occluded,Ye.useRuntimeCollisionCircles){const Or=w.text.placedSymbolArray.get(Ye.centerJustifiedTextSymbolIndex>=0?Ye.centerJustifiedTextSymbolIndex:Ye.verticalPlacedTextSymbolIndex),Sr=a.evaluateSizeForFeature(w.textSizeData,ae,Or),tr=C.get("text-padding");$n=this.collisionIndex.placeCollisionCircles(w,ye,Or,w.lineVertexArray,w.glyphOffsetArray,Sr,M,R,z,g,Ae,de.predicate,Ye.collisionCircleDiameter*Sr/a.ONE_EM,tr,this.retainedQueryData[w.bucketInstanceId].tileID),qe=ye||$n.circles.length>0&&!$n.collisionDetected,wt=wt&&$n.offscreen,kt=$n.occluded}if(dt.iconFeatureIndex&&(Mr=dt.iconFeatureIndex),dt.iconBox){const Or=Sr=>{wr(Sr);const tr=Fe&&Dn?Ac(Dn.x,Dn.y,Ie,Ae,this.transform.angle):new a.pointGeometry(0,0),Hr=w.getSymbolInstanceIconSize(le,this.transform.zoom,Ye.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(w,Hr,Sr,tr,we,W,M,de.predicate)};Xt&&Xt.box&&Xt.box.length&&dt.verticalIconBox?(yn=Or(dt.verticalIconBox),at=yn.box.length>0):(yn=Or(dt.iconBox),at=yn.box.length>0),wt=wt&&yn.offscreen,un=yn.occluded}const oo=Q||Ye.numHorizontalGlyphVertices===0&&rt===0,Uo=xe||Ye.numIconVertices===0;if(oo||Uo?Uo?oo||(at=at&&qe):qe=at&&qe:at=qe=at&&qe,qe&&dn&&dn.box&&this.collisionIndex.insertCollisionBox(dn.box,C.get("text-ignore-placement"),w.bucketInstanceId,Xt&&Xt.box&&ur?ur:lr,de.ID),at&&yn&&this.collisionIndex.insertCollisionBox(yn.box,C.get("icon-ignore-placement"),w.bucketInstanceId,Mr,de.ID),$n&&(qe&&this.collisionIndex.insertCollisionCircles($n.circles,C.get("text-ignore-placement"),w.bucketInstanceId,lr,de.ID),g)){const Or=w.bucketInstanceId;let Sr=this.collisionCircleArrays[Or];Sr===void 0&&(Sr=this.collisionCircleArrays[Or]=new gf);for(let tr=0;tr<$n.circles.length;tr+=4)Sr.circles.push($n.circles[tr+0]),Sr.circles.push($n.circles[tr+1]),Sr.circles.push($n.circles[tr+2]),Sr.circles.push($n.collisionDetected?1:0)}const Ta=w.projection.name!=="globe";tt=tt&&(Ta||!kt),ot=ot&&(Ta||!un),this.placements[Tt]=new pl(qe||tt,at||ot,wt||w.justReloaded),h[Tt]=!0};if(He){const Ye=w.getSortedSymbolIndexes(this.transform.angle);for(let xt=Ye.length-1;xt>=0;--xt){const dt=Ye[xt];Ot(w.symbolInstances.get(dt),dt,w.collisionArrays[dt])}}else for(let Ye=l.symbolInstanceStart;Ye<l.symbolInstanceEnd;Ye++)Ot(w.symbolInstances.get(Ye),Ye,w.collisionArrays[Ye]);if(g&&w.bucketInstanceId in this.collisionCircleArrays){const Ye=this.collisionCircleArrays[w.bucketInstanceId];a.invert(Ye.invProjMatrix,M),Ye.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1}markUsedJustification(l,h,g,v){const{leftJustifiedTextSymbolIndex:w,centerJustifiedTextSymbolIndex:C,rightJustifiedTextSymbolIndex:M,verticalPlacedTextSymbolIndex:R,crossTileID:z}=g,D=a.getAnchorJustification(h),W=v===a.WritingMode.vertical?R:D==="left"?w:D==="center"?C:D==="right"?M:-1;w>=0&&(l.text.placedSymbolArray.get(w).crossTileID=W>=0&&w!==W?0:z),C>=0&&(l.text.placedSymbolArray.get(C).crossTileID=W>=0&&C!==W?0:z),M>=0&&(l.text.placedSymbolArray.get(M).crossTileID=W>=0&&M!==W?0:z),R>=0&&(l.text.placedSymbolArray.get(R).crossTileID=W>=0&&R!==W?0:z)}markUsedOrientation(l,h,g){const v=h===a.WritingMode.horizontal||h===a.WritingMode.horizontalOnly?h:0,w=h===a.WritingMode.vertical?h:0,{leftJustifiedTextSymbolIndex:C,centerJustifiedTextSymbolIndex:M,rightJustifiedTextSymbolIndex:R,verticalPlacedTextSymbolIndex:z}=g,D=l.text.placedSymbolArray;C>=0&&(D.get(C).placedOrientation=v),M>=0&&(D.get(M).placedOrientation=v),R>=0&&(D.get(R).placedOrientation=v),z>=0&&(D.get(z).placedOrientation=w)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let g=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const v=h?h.symbolFadeChange(l):1,w=h?h.opacities:{},C=h?h.variableOffsets:{},M=h?h.placedOrientations:{};for(const R in this.placements){const z=this.placements[R],D=w[R];D?(this.opacities[R]=new Ss(D,v,z.text,z.icon,null,z.clipped),g=g||z.text!==D.text.placed||z.icon!==D.icon.placed):(this.opacities[R]=new Ss(null,v,z.text,z.icon,z.skipFade,z.clipped),g=g||z.text||z.icon)}for(const R in w){const z=w[R];if(!this.opacities[R]){const D=new Ss(z,v,!1,!1);D.isHidden()||(this.opacities[R]=D,g=g||z.text.placed||z.icon.placed)}}for(const R in C)this.variableOffsets[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.variableOffsets[R]=C[R]);for(const R in M)this.placedOrientations[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.placedOrientations[R]=M[R]);g?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:l)}updateLayerOpacities(l,h){const g={};for(const v of h){const w=v.getBucket(l);w&&v.latestFeatureIndex&&l.id===w.layerIds[0]&&this.updateBucketOpacities(w,g,v.collisionBoxArray)}}updateBucketOpacities(l,h,g){l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const v=l.layers[0].layout,w=!!l.layers[0].dynamicFilter(),C=new Ss(null,0,!1,!1,!0),M=v.get("text-allow-overlap"),R=v.get("icon-allow-overlap"),z=v.get("text-variable-anchor"),D=v.get("text-rotation-alignment")==="map",W=v.get("text-pitch-alignment")==="map",te=v.get("icon-text-fit")!=="none",ie=new Ss(null,0,M&&(R||!l.hasIconData()||v.get("icon-optional")),R&&(M||!l.hasTextData()||v.get("text-optional")),!0);!l.collisionArrays&&g&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(g);const ae=(de,Q,xe)=>{for(let ye=0;ye<Q/4;ye++)de.opacityVertexArray.emplaceBack(xe)};let le=0;for(let de=0;de<l.symbolInstances.length;de++){const Q=l.symbolInstances.get(de),{numHorizontalGlyphVertices:xe,numVerticalGlyphVertices:ye,crossTileID:we,numIconVertices:Ie}=Q;let Ae=this.opacities[we];h[we]?Ae=C:Ae||(Ae=ie,this.opacities[we]=Ae),h[we]=!0;const Fe=xe>0||ye>0,He=Ie>0,tt=this.placedOrientations[we],ot=tt===a.WritingMode.vertical,Ot=tt===a.WritingMode.horizontal||tt===a.WritingMode.horizontalOnly;if(!Fe&&!He||Ae.isHidden()||le++,Fe){const Ye=td(Ae.text);ae(l.text,xe,ot?ml:Ye),ae(l.text,ye,Ot?ml:Ye);const xt=Ae.text.isHidden(),{leftJustifiedTextSymbolIndex:dt,centerJustifiedTextSymbolIndex:Tt,rightJustifiedTextSymbolIndex:rt,verticalPlacedTextSymbolIndex:qe}=Q,at=l.text.placedSymbolArray,wt=xt||ot?1:0;dt>=0&&(at.get(dt).hidden=wt),Tt>=0&&(at.get(Tt).hidden=wt),rt>=0&&(at.get(rt).hidden=wt),qe>=0&&(at.get(qe).hidden=xt||Ot?1:0);const kt=this.variableOffsets[we];kt&&this.markUsedJustification(l,kt.anchor,Q,tt);const un=this.placedOrientations[we];un&&(this.markUsedJustification(l,"left",Q,un),this.markUsedOrientation(l,un,Q))}if(He){const Ye=td(Ae.icon),{placedIconSymbolIndex:xt,verticalPlacedIconSymbolIndex:dt}=Q,Tt=l.icon.placedSymbolArray,rt=Ae.icon.isHidden()?1:0;xt>=0&&(ae(l.icon,Ie,ot?ml:Ye),Tt.get(xt).hidden=rt),dt>=0&&(ae(l.icon,Q.numVerticalIconVertices,Ot?ml:Ye),Tt.get(dt).hidden=rt)}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const Ye=l.collisionArrays[de];if(Ye){let xt=new a.pointGeometry(0,0),dt=!0;if(Ye.textBox||Ye.verticalTextBox){if(z){const rt=this.variableOffsets[we];rt?(xt=Ju(rt.anchor,rt.width,rt.height,rt.textOffset,rt.textScale),D&&xt._rotate(W?this.transform.angle:-this.transform.angle)):dt=!1}w&&(dt=!Ae.clipped),Ye.textBox&&Xi(l.textCollisionBox.collisionVertexArray,Ae.text.placed,!dt||ot,xt.x,xt.y),Ye.verticalTextBox&&Xi(l.textCollisionBox.collisionVertexArray,Ae.text.placed,!dt||Ot,xt.x,xt.y)}const Tt=dt&&!!(!Ot&&Ye.verticalIconBox);Ye.iconBox&&Xi(l.iconCollisionBox.collisionVertexArray,Ae.icon.placed,Tt,te?xt.x:0,te?xt.y:0),Ye.verticalIconBox&&Xi(l.iconCollisionBox.collisionVertexArray,Ae.icon.placed,!Tt,te?xt.x:0,te?xt.y:0)}}}if(l.fullyClipped=le===0,l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){const de=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=de.invProjMatrix,l.placementViewportMatrix=de.viewportMatrix,l.collisionCircleArray=de.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,h){const g=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*g>l}setStale(){this.stale=!0}}function Xi(p,l,h,g,v){p.emplaceBack(l?1:0,h?1:0,g||0,v||0),p.emplaceBack(l?1:0,h?1:0,g||0,v||0),p.emplaceBack(l?1:0,h?1:0,g||0,v||0),p.emplaceBack(l?1:0,h?1:0,g||0,v||0)}const Ug=Math.pow(2,25),ed=Math.pow(2,24),mi=Math.pow(2,17),kc=Math.pow(2,16),yf=Math.pow(2,9),Rc=Math.pow(2,8),ki=Math.pow(2,1);function td(p){if(p.opacity===0&&!p.placed)return 0;if(p.opacity===1&&p.placed)return 4294967295;const l=p.placed?1:0,h=Math.floor(127*p.opacity);return h*Ug+l*ed+h*mi+l*kc+h*yf+l*Rc+h*ki+l}const ml=0;class wa{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&l.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,h,g,v,w){const C=this._bucketParts;for(;this._currentTileIndex<l.length;)if(h.getBucketParts(C,v,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((M,R)=>M.sortKey-R.sortKey));this._currentPartIndex<C.length;){const M=C[this._currentPartIndex];if(h.placeLayerBucketPart(M,this._seenCrossTileIDs,g,M.symbolInstanceStart===0),this._currentPartIndex++,w())return!0}return!1}}class Ic{constructor(l,h,g,v,w,C,M,R){this.placement=new io(l,w,C,M,R),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(l,h,g){const v=a.exported.now(),w=()=>{const C=a.exported.now()-v;return!this._forceFullPlacement&&C>2};for(;this._currentPlacementIndex>=0;){const C=h[l[this._currentPlacementIndex]],M=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=M)&&(!C.maxzoom||C.maxzoom>M)){if(this._inProgressLayer||(this._inProgressLayer=new wa(C)),this._inProgressLayer.continuePlacement(g[C.source],this.placement,this._showCollisionBoxes,C,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const nd=512/a.EXTENT/2;class Y1{constructor(l,h,g){this.tileID=l,this.indexedSymbolInstances={},this.bucketInstanceId=g;for(let v=0;v<h.length;v++){const w=h.get(v),C=w.key;this.indexedSymbolInstances[C]||(this.indexedSymbolInstances[C]=[]),this.indexedSymbolInstances[C].push({crossTileID:w.crossTileID,coord:this.getScaledCoordinates(w,l)})}}getScaledCoordinates(l,h){const g=nd/Math.pow(2,h.canonical.z-this.tileID.canonical.z);return{x:Math.floor((h.canonical.x*a.EXTENT+l.tileAnchorX)*g),y:Math.floor((h.canonical.y*a.EXTENT+l.tileAnchorY)*g)}}findMatches(l,h,g){const v=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z);for(let w=0;w<l.length;w++){const C=l.get(w);if(C.crossTileID)continue;const M=this.indexedSymbolInstances[C.key];if(!M)continue;const R=this.getScaledCoordinates(C,h);for(const z of M)if(Math.abs(z.coord.x-R.x)<=v&&Math.abs(z.coord.y-R.y)<=v&&!g[z.crossTileID]){g[z.crossTileID]=!0,C.crossTileID=z.crossTileID;break}}}}class _f{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class gl{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const h=Math.round((l-this.lng)/360);if(h!==0)for(const g in this.indexes){const v=this.indexes[g],w={};for(const C in v){const M=v[C];M.tileID=M.tileID.unwrapTo(M.tileID.wrap+h),w[M.tileID.key]=M}this.indexes[g]=w}this.lng=l}addBucket(l,h,g){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let w=0;w<h.symbolInstances.length;w++)h.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const v=this.usedCrossTileIDs[l.overscaledZ];for(const w in this.indexes){const C=this.indexes[w];if(Number(w)>l.overscaledZ)for(const M in C){const R=C[M];R.tileID.isChildOf(l)&&R.findMatches(h.symbolInstances,l,v)}else{const M=C[l.scaledTo(Number(w)).key];M&&M.findMatches(h.symbolInstances,l,v)}}for(let w=0;w<h.symbolInstances.length;w++){const C=h.symbolInstances.get(w);C.crossTileID||(C.crossTileID=g.generate(),v[C.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new Y1(l,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(l,h){for(const g in h.indexedSymbolInstances)for(const v of h.indexedSymbolInstances[g])delete this.usedCrossTileIDs[l][v.crossTileID]}removeStaleBuckets(l){let h=!1;for(const g in this.indexes){const v=this.indexes[g];for(const w in v)l[v[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,v[w]),delete v[w],h=!0)}return h}}class Vg{constructor(){this.layerIndexes={},this.crossTileIDs=new _f,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,h,g,v){let w=this.layerIndexes[l.id];w===void 0&&(w=this.layerIndexes[l.id]=new gl);let C=!1;const M={};v.name!=="globe"&&w.handleWrapJump(g);for(const R of h){const z=R.getBucket(l);z&&l.id===z.layerIds[0]&&(z.bucketInstanceId||(z.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(R.tileID,z,this.crossTileIDs)&&(C=!0),M[z.bucketInstanceId]=!0)}return w.removeStaleBuckets(M)&&(C=!0),C}pruneUnusedLayers(l){const h={};l.forEach(g=>{h[g]=!0});for(const g in this.layerIndexes)h[g]||delete this.layerIndexes[g]}}const Pc=(p,l)=>a.emitValidationErrors(p,l&&l.filter(h=>h.identifier!=="source.canvas")),yl=a.pick(wn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),qa=a.pick(wn,["setCenter","setZoom","setBearing","setPitch"]),rd={version:8,layers:[],sources:{}},Ha={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Eo extends a.Evented{constructor(l,h={}){super(),this.map=l,this.dispatcher=new Me(An(),this),this.imageManager=new ue,this.imageManager.setEventedParent(this),this.glyphManager=new a.GlyphManager(l._requestManager,h.localFontFamily?a.LocalGlyphMode.all:h.localIdeographFontFamily?a.LocalGlyphMode.ideographs:a.LocalGlyphMode.none,h.localFontFamily||h.localIdeographFontFamily),this.crossTileSymbolIndex=new Vg,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());const g=this;this._rtlTextPluginCallback=Eo.registerForPluginStateChange(v=>{g.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:v.pluginStatus,pluginURL:v.pluginURL},(w,C)=>{if(a.triggerPluginCompletionEvent(w),C&&C.every(M=>M))for(const M in g._sourceCaches){const R=g._sourceCaches[M],z=R.getSource().type;z!=="vector"&&z!=="geojson"||R.reload()}})}),this.on("data",v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;const w=this.getSource(v.sourceId);if(w&&w.vectorLayerIds)for(const C in this._layers){const M=this._layers[C];M.source===w.id&&this._validateLayer(M)}})}loadURL(l,h={}){this.fire(new a.Event("dataloading",{dataType:"style"}));const g=typeof h.validate=="boolean"?h.validate:!a.isMapboxURL(l);l=this.map._requestManager.normalizeStyleURL(l,h.accessToken);const v=this.map._requestManager.transformRequest(l,a.ResourceType.Style);this._request=a.getJSON(v,(w,C)=>{this._request=null,w?this.fire(new a.ErrorEvent(w)):C&&this._load(C,g)})}loadJSON(l,h={}){this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.exported.frame(()=>{this._request=null,this._load(l,h.validate!==!1)})}loadEmpty(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(rd,!1)}_updateLayerCount(l,h){const g=h?1:-1;l.is3D()&&(this._num3DLayers+=g),l.type==="circle"&&(this._numCircleLayers+=g),l.type==="symbol"&&(this._numSymbolLayers+=g)}_load(l,h){if(h&&Pc(this,a.validateStyle(l)))return;this._loaded=!0,this.stylesheet=a.clone$1(l),this._updateMapProjection();for(const v in l.sources)this.addSource(v,l.sources[v],{validate:!1});this._changed=!1,l.sprite?this._loadSprite(l.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(l.glyphs);const g=ir(this.stylesheet.layers);this._order=g.map(v=>v.id),this._layers={},this._serializedLayers={};for(const v of g){const w=a.createStyleLayer(v);w.setEventedParent(this,{layer:{id:w.id}}),this._layers[w.id]=w,this._serializedLayers[w.id]=w.serialize(),this._updateLayerCount(w,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ke(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(l){l?this.stylesheet.projection=l:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(l){this._spriteRequest=function(h,g,v){let w,C,M;const R=a.exported.devicePixelRatio>1?"@2x":"";let z=a.getJSON(g.transformRequest(g.normalizeSpriteURL(h,R,".json"),a.ResourceType.SpriteJSON),(te,ie)=>{z=null,M||(M=te,w=ie,W())}),D=a.getImage(g.transformRequest(g.normalizeSpriteURL(h,R,".png"),a.ResourceType.SpriteImage),(te,ie)=>{D=null,M||(M=te,C=ie,W())});function W(){if(M)v(M);else if(w&&C){const te=a.exported.getImageData(C),ie={};for(const ae in w){const{width:le,height:de,x:Q,y:xe,sdf:ye,pixelRatio:we,stretchX:Ie,stretchY:Ae,content:Fe}=w[ae],He=new a.RGBAImage({width:le,height:de});a.RGBAImage.copy(te,He,{x:Q,y:xe},{x:0,y:0},{width:le,height:de}),ie[ae]={data:He,pixelRatio:we,sdf:ye,stretchX:Ie,stretchY:Ae,content:Fe}}v(null,ie)}}return{cancel(){z&&(z.cancel(),z=null),D&&(D.cancel(),D=null)}}}(l,this.map._requestManager,(h,g)=>{if(this._spriteRequest=null,h)this.fire(new a.ErrorEvent(h));else if(g)for(const v in g)this.imageManager.addImage(v,g[v]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new a.Event("data",{dataType:"style"}))})}_validateLayer(l){const h=this.getSource(l.source);if(!h)return;const g=l.sourceLayer;g&&(h.type==="geojson"||h.vectorLayerIds&&h.vectorLayerIds.indexOf(g)===-1)&&this.fire(new a.ErrorEvent(new Error(`Source layer "${g}" does not exist on source "${h.id}" as specified by style layer "${l.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this._sourceCaches)if(!this._sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(l){const h=[];for(const g of l){const v=this._layers[g];v.type!=="custom"&&h.push(v.serialize())}return h}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const l in this._sourceCaches)if(this._sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(l){return!!this.terrain&&(typeof l.isLayerDraped=="function"?l.isLayerDraped():Ha[l.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(l){if(!this._loaded)return;const h=this._changed;if(this._changed){const v=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(v.length||w.length)&&this._updateWorkerLayers(v,w);for(const C in this._updatedSources){const M=this._updatedSources[C];M==="reload"?this._reloadSource(C):M==="clear"&&this._clearSource(C)}this._updateTilesForChangedImages();for(const C in this._updatedPaintProps)this._layers[C].updateTransitions(l);this.light.updateTransitions(l),this.fog&&this.fog.updateTransitions(l),this._resetUpdates()}const g={};for(const v in this._sourceCaches){const w=this._sourceCaches[v];g[v]=w.used,w.used=!1}for(const v of this._order){const w=this._layers[v];if(w.recalculate(l,this._availableImages),!w.isHidden(l.zoom)){const M=this._getLayerSourceCache(w);M&&(M.used=!0)}const C=this.map.painter;if(C){const M=w.getProgramIds();if(!M)continue;const R=w.getProgramConfiguration(l.zoom);for(const z of M)C.useProgram(z,R)}}for(const v in g){const w=this._sourceCaches[v];g[v]!==w.used&&w.getSource().fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:w.getSource().id}))}this.light.recalculate(l),this.terrain&&this.terrain.recalculate(l),this.fog&&this.fog.recalculate(l),this.z=l.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),h&&this.fire(new a.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const h in this._sourceCaches)this._sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateWorkerLayers(l,h){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(l),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(l){if(this._checkLoaded(),Pc(this,a.validateStyle(l)))return!1;(l=a.clone$1(l)).layers=ir(l.layers);const h=function(v,w){if(!v)return[{command:wn.setStyle,args:[w]}];let C=[];try{if(!b(v.version,w.version))return[{command:wn.setStyle,args:[w]}];b(v.center,w.center)||C.push({command:wn.setCenter,args:[w.center]}),b(v.zoom,w.zoom)||C.push({command:wn.setZoom,args:[w.zoom]}),b(v.bearing,w.bearing)||C.push({command:wn.setBearing,args:[w.bearing]}),b(v.pitch,w.pitch)||C.push({command:wn.setPitch,args:[w.pitch]}),b(v.sprite,w.sprite)||C.push({command:wn.setSprite,args:[w.sprite]}),b(v.glyphs,w.glyphs)||C.push({command:wn.setGlyphs,args:[w.glyphs]}),b(v.transition,w.transition)||C.push({command:wn.setTransition,args:[w.transition]}),b(v.light,w.light)||C.push({command:wn.setLight,args:[w.light]}),b(v.fog,w.fog)||C.push({command:wn.setFog,args:[w.fog]}),b(v.projection,w.projection)||C.push({command:wn.setProjection,args:[w.projection]});const M={},R=[];(function(W,te,ie,ae){let le;for(le in te=te||{},W=W||{})W.hasOwnProperty(le)&&(te.hasOwnProperty(le)||yr(le,ie,ae));for(le in te){if(!te.hasOwnProperty(le))continue;const de=te[le];W.hasOwnProperty(le)?b(W[le],de)||(W[le].type==="geojson"&&de.type==="geojson"&&xa(W,te,le)?ie.push({command:wn.setGeoJSONSourceData,args:[le,de.data]}):Ga(le,te,ie,ae)):gr(le,te,ie)}})(v.sources,w.sources,R,M);const z=[];v.layers&&v.layers.forEach(W=>{W.source&&M[W.source]?C.push({command:wn.removeLayer,args:[W.id]}):z.push(W)});let D=v.terrain;D&&M[D.source]&&(C.push({command:wn.setTerrain,args:[void 0]}),D=void 0),C=C.concat(R),b(D,w.terrain)||C.push({command:wn.setTerrain,args:[w.terrain]}),function(W,te,ie){te=te||[];const ae=(W=W||[]).map(ba),le=te.map(ba),de=W.reduce(ai,{}),Q=te.reduce(ai,{}),xe=ae.slice(),ye=Object.create(null);let we,Ie,Ae,Fe,He,tt,ot;for(we=0,Ie=0;we<ae.length;we++)Ae=ae[we],Q.hasOwnProperty(Ae)?Ie++:(ie.push({command:wn.removeLayer,args:[Ae]}),xe.splice(xe.indexOf(Ae,Ie),1));for(we=0,Ie=0;we<le.length;we++)Ae=le[le.length-1-we],xe[xe.length-1-we]!==Ae&&(de.hasOwnProperty(Ae)?(ie.push({command:wn.removeLayer,args:[Ae]}),xe.splice(xe.lastIndexOf(Ae,xe.length-Ie),1)):Ie++,tt=xe[xe.length-we],ie.push({command:wn.addLayer,args:[Q[Ae],tt]}),xe.splice(xe.length-we,0,Ae),ye[Ae]=!0);for(we=0;we<le.length;we++)if(Ae=le[we],Fe=de[Ae],He=Q[Ae],!ye[Ae]&&!b(Fe,He))if(b(Fe.source,He.source)&&b(Fe["source-layer"],He["source-layer"])&&b(Fe.type,He.type)){for(ot in pt(Fe.layout,He.layout,ie,Ae,null,wn.setLayoutProperty),pt(Fe.paint,He.paint,ie,Ae,null,wn.setPaintProperty),b(Fe.filter,He.filter)||ie.push({command:wn.setFilter,args:[Ae,He.filter]}),b(Fe.minzoom,He.minzoom)&&b(Fe.maxzoom,He.maxzoom)||ie.push({command:wn.setLayerZoomRange,args:[Ae,He.minzoom,He.maxzoom]}),Fe)Fe.hasOwnProperty(ot)&&ot!=="layout"&&ot!=="paint"&&ot!=="filter"&&ot!=="metadata"&&ot!=="minzoom"&&ot!=="maxzoom"&&(ot.indexOf("paint.")===0?pt(Fe[ot],He[ot],ie,Ae,ot.slice(6),wn.setPaintProperty):b(Fe[ot],He[ot])||ie.push({command:wn.setLayerProperty,args:[Ae,ot,He[ot]]}));for(ot in He)He.hasOwnProperty(ot)&&!Fe.hasOwnProperty(ot)&&ot!=="layout"&&ot!=="paint"&&ot!=="filter"&&ot!=="metadata"&&ot!=="minzoom"&&ot!=="maxzoom"&&(ot.indexOf("paint.")===0?pt(Fe[ot],He[ot],ie,Ae,ot.slice(6),wn.setPaintProperty):b(Fe[ot],He[ot])||ie.push({command:wn.setLayerProperty,args:[Ae,ot,He[ot]]}))}else ie.push({command:wn.removeLayer,args:[Ae]}),tt=xe[xe.lastIndexOf(Ae)+1],ie.push({command:wn.addLayer,args:[He,tt]})}(z,w.layers,C)}catch(M){console.warn("Unable to compute style diff:",M),C=[{command:wn.setStyle,args:[w]}]}return C}(this.serialize(),l).filter(v=>!(v.command in qa));if(h.length===0)return!1;const g=h.filter(v=>!(v.command in yl));if(g.length>0)throw new Error(`Unimplemented: ${g.map(v=>v.command).join(", ")}.`);return h.forEach(v=>{v.command!=="setTransition"&&v.command!=="setProjection"&&this[v.command].apply(this,v.args)}),this.stylesheet=l,this._updateMapProjection(),!0}addImage(l,h){return this.getImage(l)?this.fire(new a.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(l,h),this._afterImageUpdated(l),this)}updateImage(l,h){this.imageManager.updateImage(l,h)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){return this.getImage(l)?(this.imageManager.removeImage(l),this._afterImageUpdated(l),this):this.fire(new a.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(l,h,g={}){if(this._checkLoaded(),this.getSource(l)!==void 0)throw new Error("There is already a source with this ID");if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(a.validateSource,`sources.${l}`,h,null,g))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const v=Ve(l,h,this.dispatcher,this);v.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(l),source:v.serialize(),sourceId:l}));const w=C=>{const M=(C?"symbol:":"other:")+l,R=this._sourceCaches[M]=new a.SourceCache(M,v,C);(C?this._symbolSourceCaches:this._otherSourceCaches)[l]=R,R.style=this,R.onAdd(this.map)};w(!1),h.type!=="vector"&&h.type!=="geojson"||w(!0),v.onAdd&&v.onAdd(this.map),this._changed=!0}removeSource(l){this._checkLoaded();const h=this.getSource(l);if(!h)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===l)return this.fire(new a.ErrorEvent(new Error(`Source "${l}" cannot be removed while layer "${v}" is using it.`)));if(this.terrain&&this.terrain.get().source===l)return this.fire(new a.ErrorEvent(new Error(`Source "${l}" cannot be removed while terrain is using it.`)));const g=this._getSourceCaches(l);for(const v of g)delete this._sourceCaches[v.id],delete this._updatedSources[v.id],v.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:v.getSource().id})),v.setEventedParent(null),v.clearTiles();return delete this._otherSourceCaches[l],delete this._symbolSourceCaches[l],h.setEventedParent(null),h.onRemove&&h.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(l,h){this._checkLoaded(),this.getSource(l).setData(h),this._changed=!0}getSource(l){const h=this._getSourceCache(l);return h&&h.getSource()}_getSources(){const l=[];for(const h in this._otherSourceCaches){const g=this._getSourceCache(h);g&&l.push(g.getSource())}return l}addLayer(l,h,g={}){this._checkLoaded();const v=l.id;if(this.getLayer(v))return void this.fire(new a.ErrorEvent(new Error(`Layer with id "${v}" already exists on this map`)));let w;if(l.type==="custom"){if(Pc(this,a.validateCustomStyleLayer(l)))return;w=a.createStyleLayer(l)}else{if(typeof l.source=="object"&&(this.addSource(v,l.source),l=a.clone$1(l),l=a.extend(l,{source:v})),this._validate(a.validateLayer,`layers.${v}`,l,{arrayIndex:-1},g))return;w=a.createStyleLayer(l),this._validateLayer(w),w.setEventedParent(this,{layer:{id:v}}),this._serializedLayers[w.id]=w.serialize(),this._updateLayerCount(w,!0)}const C=h?this._order.indexOf(h):this._order.length;if(h&&C===-1)return void this.fire(new a.ErrorEvent(new Error(`Layer with id "${h}" does not exist on this map.`)));this._order.splice(C,0,v),this._layerOrderChanged=!0,this._layers[v]=w;const M=this._getLayerSourceCache(w);if(this._removedLayers[v]&&w.source&&M&&w.type!=="custom"){const R=this._removedLayers[v];delete this._removedLayers[v],R.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",M.pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(l,h){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new a.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===h)return;const g=this._order.indexOf(l);this._order.splice(g,1);const v=h?this._order.indexOf(h):this._order.length;h&&v===-1?this.fire(new a.ErrorEvent(new Error(`Layer with id "${h}" does not exist on this map.`))):(this._order.splice(v,0,l),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(l){this._checkLoaded();const h=this._layers[l];if(!h)return void this.fire(new a.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be removed.`)));h.setEventedParent(null),this._updateLayerCount(h,!1);const g=this._order.indexOf(l);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=h,delete this._layers[l],delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],h.onRemove&&h.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(l){return this._layers[l]}hasLayer(l){return l in this._layers}hasLayerType(l){for(const h in this._layers)if(this._layers[h].type===l)return!0;return!1}setLayerZoomRange(l,h,g){this._checkLoaded();const v=this.getLayer(l);v?v.minzoom===h&&v.maxzoom===g||(h!=null&&(v.minzoom=h),g!=null&&(v.maxzoom=g),this._updateLayer(v)):this.fire(new a.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(l,h,g={}){this._checkLoaded();const v=this.getLayer(l);if(v){if(!b(v.filter,h))return h==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(a.validateFilter,`layers.${v.id}.filter`,h,{layerType:v.type},g)||(v.filter=a.clone$1(h),this._updateLayer(v)))}else this.fire(new a.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be filtered.`)))}getFilter(l){const h=this.getLayer(l);return h&&a.clone$1(h.filter)}setLayoutProperty(l,h,g,v={}){this._checkLoaded();const w=this.getLayer(l);w?b(w.getLayoutProperty(h),g)||(w.setLayoutProperty(h,g,v),this._updateLayer(w)):this.fire(new a.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(l,h){const g=this.getLayer(l);if(g)return g.getLayoutProperty(h);this.fire(new a.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style.`)))}setPaintProperty(l,h,g,v={}){this._checkLoaded();const w=this.getLayer(l);w?b(w.getPaintProperty(h),g)||(w.setPaintProperty(h,g,v)&&this._updateLayer(w),this._changed=!0,this._updatedPaintProps[l]=!0):this.fire(new a.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(l,h){const g=this.getLayer(l);return g&&g.getPaintProperty(h)}setFeatureState(l,h){this._checkLoaded();const g=l.source,v=l.sourceLayer,w=this.getSource(g);if(!w)return void this.fire(new a.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)));const C=w.type;if(C==="geojson"&&v)return void this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(C==="vector"&&!v)return void this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));l.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided.")));const M=this._getSourceCaches(g);for(const R of M)R.setFeatureState(v,l.id,h)}removeFeatureState(l,h){this._checkLoaded();const g=l.source,v=this.getSource(g);if(!v)return void this.fire(new a.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)));const w=v.type,C=w==="vector"?l.sourceLayer:void 0;if(w==="vector"&&!C)return void this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(h&&typeof l.id!="string"&&typeof l.id!="number")return void this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const M=this._getSourceCaches(g);for(const R of M)R.removeFeatureState(C,l.id,h)}getFeatureState(l){this._checkLoaded();const h=l.source,g=l.sourceLayer,v=this.getSource(h);if(v){if(v.type!=="vector"||g)return l.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(h)[0].getFeatureState(g,l.id);this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const l={};for(const h in this._sourceCaches){const g=this._sourceCaches[h].getSource();l[g.id]||(l[g.id]=g.serialize())}return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:l,layers:this._serializeLayers(this._order)},h=>h!==void 0)}_updateLayer(l){this._updatedLayers[l.id]=!0;const h=this._getLayerSourceCache(l);l.source&&!this._updatedSources[l.source]&&h&&h.getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",h.pause()),this._changed=!0,l.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(l){const h=C=>this._layers[C].type==="fill-extrusion",g={},v=[];for(let C=this._order.length-1;C>=0;C--){const M=this._order[C];if(h(M)){g[M]=C;for(const R of l){const z=R[M];if(z)for(const D of z)v.push(D)}}}v.sort((C,M)=>M.intersectionZ-C.intersectionZ);const w=[];for(let C=this._order.length-1;C>=0;C--){const M=this._order[C];if(h(M))for(let R=v.length-1;R>=0;R--){const z=v[R].feature;if(g[z.layer.id]<C)break;w.push(z),v.pop()}else for(const R of l){const z=R[M];if(z)for(const D of z)w.push(D.feature)}}return w}queryRenderedFeatures(l,h,g){h&&h.filter&&this._validate(a.validateFilter,"queryRenderedFeatures.filter",h.filter,null,h);const v={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const R of h.layers){const z=this._layers[R];if(!z)return this.fire(new a.ErrorEvent(new Error(`The layer '${R}' does not exist in the map's style and cannot be queried for features.`))),[];v[z.source]=!0}}const w=[];h.availableImages=this._availableImages;const C=h&&h.layers?h.layers.some(R=>{const z=this.getLayer(R);return z&&z.is3D()}):this.has3DLayers(),M=ut.createFromScreenPoints(l,g);for(const R in this._sourceCaches){const z=this._sourceCaches[R].getSource().id;h.layers&&!v[z]||w.push(je(this._sourceCaches[R],this._layers,this._serializedLayers,M,h,g,C,!!this.map._showQueryGeometry))}return this.placement&&w.push(function(R,z,D,W,te,ie,ae){const le={},de=ie.queryRenderedSymbols(W),Q=[];for(const xe of Object.keys(de).map(Number))Q.push(ae[xe]);Q.sort(qt);for(const xe of Q){const ye=xe.featureIndex.lookupSymbolFeatures(de[xe.bucketInstanceId],z,xe.bucketIndex,xe.sourceLayerIndex,te.filter,te.layers,te.availableImages,R);for(const we in ye){const Ie=le[we]=le[we]||[],Ae=ye[we];Ae.sort((Fe,He)=>{const tt=xe.featureSortOrder;if(tt){const ot=tt.indexOf(Fe.featureIndex);return tt.indexOf(He.featureIndex)-ot}return He.featureIndex-Fe.featureIndex});for(const Fe of Ae)Ie.push(Fe)}}for(const xe in le)le[xe].forEach(ye=>{const we=ye.feature,Ie=D(R[xe]);if(!Ie)return;const Ae=Ie.getFeatureState(we.layer["source-layer"],we.id);we.source=we.layer.source,we.layer["source-layer"]&&(we.sourceLayer=we.layer["source-layer"]),we.state=Ae});return le}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),M.screenGeometry,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(l,h){h&&h.filter&&this._validate(a.validateFilter,"querySourceFeatures.filter",h.filter,null,h);const g=this._getSourceCaches(l);let v=[];for(const w of g)v=v.concat(mt(w,h));return v}addSourceType(l,h,g){return Eo.getSourceType(l)?g(new Error(`A source type called "${l}" already exists.`)):(Eo.setSourceType(l,h),h.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:h.workerSourceURL},g):g(null,null))}getLight(){return this.light.getLight()}setLight(l,h={}){this._checkLoaded();const g=this.light.getLight();let v=!1;for(const C in l)if(!b(l[C],g[C])){v=!0;break}if(!v)return;const w=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(l,h),this.light.updateTransitions(w)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(l,h=1){if(this._checkLoaded(),!l)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let g=l;if(h===1){if(typeof g.source=="object"){const v="terrain-dem-src";this.addSource(v,g.source),g=a.clone$1(g),g=a.extend(g,{source:v})}if(this._validate(a.validateTerrain,"terrain",g))return}if(!this.terrain||this.terrain&&h!==this.terrain.drapeRenderMode){if(!g)return;this._createTerrain(g,h)}else{const v=this.terrain,w=v.get();for(const C of Object.keys(a.spec.terrain))!g.hasOwnProperty(C)&&a.spec.terrain[C].default&&(g[C]=a.spec.terrain[C].default);for(const C in g)if(!b(g[C],w[C])){v.set(g),this.stylesheet.terrain=g;const M=this._setTransitionParameters({duration:0});v.updateTransitions(M);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(l){const h=this.fog=new be(l,this.map.transform);this.stylesheet.fog=l;const g=this._setTransitionParameters({duration:0});h.updateTransitions(g)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const l of this.map._markers)l._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(l){if(this._checkLoaded(),!l)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const h=this.fog,g=h.get();Object.keys(l).length===0&&h.set(l);for(const v in l)if(!b(l[v],g[v])){h.set(l),this.stylesheet.fog=l;const w=this._setTransitionParameters({duration:0});h.updateTransitions(w);break}}else this._createFog(l);this._markersNeedUpdate=!0}_setTransitionParameters(l){return{now:a.exported.now(),transition:a.extend(l,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const l=this._order.filter(g=>this.isLayerDraped(this._layers[g])),h=this._order.filter(g=>!this.isLayerDraped(this._layers[g]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...l),this._drapedFirstOrder.push(...h)}_createTerrain(l,h){const g=this.terrain=new _t(l,h);this.stylesheet.terrain=l,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const v=this._setTransitionParameters({duration:0});g.updateTransitions(v)}_force3DLayerUpdate(){for(const l in this._layers){const h=this._layers[l];h.type==="fill-extrusion"&&this._updateLayer(h)}}_forceSymbolLayerUpdate(){for(const l in this._layers){const h=this._layers[l];h.type==="symbol"&&this._updateLayer(h)}}_validate(l,h,g,v,w={}){return(!w||w.validate!==!1)&&Pc(this,l.call(a.validateStyle,a.extend({key:h,style:this.serialize(),value:g,styleSpec:a.spec},v)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this._sourceCaches)this._sourceCaches[l].clearTiles(),this._sourceCaches[l].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(l){const h=this._getSourceCaches(l);for(const g of h)g.clearTiles()}_reloadSource(l){const h=this._getSourceCaches(l);for(const g of h)g.resume(),g.reload()}_reloadSources(){for(const l of this._getSources())l.reload&&l.reload()}_updateSources(l){for(const h in this._sourceCaches)this._sourceCaches[h].update(l)}_generateCollisionBoxes(){for(const l in this._sourceCaches){const h=this._sourceCaches[l];h.resume(),h.reload()}}_updatePlacement(l,h,g,v,w=!1){let C=!1,M=!1;const R={};for(const z of this._order){const D=this._layers[z];if(D.type!=="symbol")continue;if(!R[D.source]){const te=this._getLayerSourceCache(D);if(!te)continue;R[D.source]=te.getRenderableIds(!0).map(ie=>te.getTileByID(ie)).sort((ie,ae)=>ae.tileID.overscaledZ-ie.tileID.overscaledZ||(ie.tileID.isLessThan(ae.tileID)?-1:1))}const W=this.crossTileSymbolIndex.addLayer(D,R[D.source],l.center.lng,l.projection);C=C||W}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),w=w||this._layerOrderChanged||g===0,this._layerOrderChanged&&this.fire(new a.Event("neworder")),(w||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.exported.now(),l.zoom))&&(this.pauseablePlacement=new Ic(l,this._order,w,h,g,v,this.placement,this.fog&&l.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,R),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.exported.now()),M=!0),C&&this.pauseablePlacement.placement.setStale()),M||C)for(const z of this._order){const D=this._layers[z];D.type==="symbol"&&this.placement.updateLayerOpacities(D,R[D.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.exported.now())}_releaseSymbolFadeTiles(){for(const l in this._sourceCaches)this._sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,h,g){this.imageManager.getImages(h.icons,g),this._updateTilesForChangedImages();const v=w=>{w&&w.setDependencies(h.tileID.key,h.type,h.icons)};v(this._otherSourceCaches[h.source]),v(this._symbolSourceCaches[h.source])}getGlyphs(l,h,g){this.glyphManager.getGlyphs(h.stacks,g)}getResource(l,h,g){return a.makeRequest(h,g)}_getSourceCache(l){return this._otherSourceCaches[l]}_getLayerSourceCache(l){return l.type==="symbol"?this._symbolSourceCaches[l.source]:this._otherSourceCaches[l.source]}_getSourceCaches(l){const h=[];return this._otherSourceCaches[l]&&h.push(this._otherSourceCaches[l]),this._symbolSourceCaches[l]&&h.push(this._symbolSourceCaches[l]),h}_isSourceCacheLoaded(l){const h=this._getSourceCaches(l);return h.length===0?(this.fire(new a.ErrorEvent(new Error(`There is no source with ID '${l}'`))),!1):h.every(g=>g.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Eo.getSourceType=function(p){return We[p]},Eo.setSourceType=function(p,l){We[p]=l},Eo.registerForPluginStateChange=a.registerForPluginStateChange;var Lc=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,jg="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Gg=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,id=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Wg=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let vf={},xf={};const _l=[];Es(Lc,_l),Es(Gg,_l),Es(id,_l),Es(Wg,_l),vf=sr("",Gg),xf=sr(Wg,id);const qg=sr(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),od=Lc,ad=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var bf={background:sr(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:sr(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:sr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:sr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:sr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:sr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:sr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:sr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:sr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:sr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:sr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:sr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:sr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:sr(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:sr(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:sr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:sr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:sr(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:sr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:sr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:sr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:sr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:sr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:sr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:sr(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:sr(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,jg),skyboxGradient:sr(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,jg),skyboxCapture:sr(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:sr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:sr(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function Es(p,l){const h=p.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let g of h)if(g=g.trim(),g[0]==="#"&&g.includes("if")&&!g.includes("endif")){g=g.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const v=g.split(" ");for(const w of v)l.includes(w)||l.push(w)}}function sr(p,l){const h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=l.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),v={},w=[..._l];return Es(p,w),Es(l,w),{fragmentSource:p=p.replace(h,(C,M,R,z,D)=>(v[D]=!0,M==="define"?`
#ifndef HAS_UNIFORM_u_${D}
varying ${R} ${z} ${D};
#else
uniform ${R} ${z} u_${D};
#endif
`:`
#ifdef HAS_UNIFORM_u_${D}
    ${R} ${z} ${D} = u_${D};
#endif
`)),vertexSource:l=l.replace(h,(C,M,R,z,D)=>{const W=z==="float"?"vec2":"vec4",te=D.match(/color/)?"color":W;return v[D]?M==="define"?`
#ifndef HAS_UNIFORM_u_${D}
uniform lowp float u_${D}_t;
attribute ${R} ${W} a_${D};
varying ${R} ${z} ${D};
#else
uniform ${R} ${z} u_${D};
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_${D}
    ${D} = a_${D};
#else
    ${R} ${z} ${D} = u_${D};
#endif
`:`
#ifndef HAS_UNIFORM_u_${D}
    ${D} = unpack_mix_${te}(a_${D}, u_${D}_t);
#else
    ${R} ${z} ${D} = u_${D};
#endif
`:M==="define"?`
#ifndef HAS_UNIFORM_u_${D}
uniform lowp float u_${D}_t;
attribute ${R} ${W} a_${D};
#else
uniform ${R} ${z} u_${D};
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_${D}
    ${R} ${z} ${D} = a_${D};
#else
    ${R} ${z} ${D} = u_${D};
#endif
`:`
#ifndef HAS_UNIFORM_u_${D}
    ${R} ${z} ${D} = unpack_mix_${te}(a_${D}, u_${D}_t);
#else
    ${R} ${z} ${D} = u_${D};
#endif
`}),staticAttributes:g,usedDefines:w}}class Dc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(l,h,g,v,w,C,M){this.context=l;let R=this.boundPaintVertexBuffers.length!==v.length;for(let D=0;!R&&D<v.length;D++)this.boundPaintVertexBuffers[D]!==v[D]&&(R=!0);let z=this.boundDynamicVertexBuffers.length!==M.length;for(let D=0;!z&&D<M.length;D++)this.boundDynamicVertexBuffers[D]!==M[D]&&(z=!0);if(!l.extVertexArrayObject||!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==g||R||z||this.boundIndexBuffer!==w||this.boundVertexOffset!==C)this.freshBind(h,g,v,w,C,M);else{l.bindVertexArrayOES.set(this.vao);for(const D of M)D&&D.bind();w&&w.dynamicDraw&&w.bind()}}freshBind(l,h,g,v,w,C){let M;const R=l.numAttributes,z=this.context,D=z.gl;if(z.extVertexArrayObject)this.vao&&this.destroy(),this.vao=z.extVertexArrayObject.createVertexArrayOES(),z.bindVertexArrayOES.set(this.vao),M=0,this.boundProgram=l,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=v,this.boundVertexOffset=w,this.boundDynamicVertexBuffers=C;else{M=z.currentNumAttributes||0;for(let W=R;W<M;W++)D.disableVertexAttribArray(W)}h.enableAttributes(D,l),h.bind(),h.setVertexAttribPointers(D,l,w);for(const W of g)W.enableAttributes(D,l),W.bind(),W.setVertexAttribPointers(D,l,w);for(const W of C)W&&(W.enableAttributes(D,l),W.bind(),W.setVertexAttribPointers(D,l,w));v&&v.bind(),z.currentNumAttributes=R}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function wf(p,l){const h=Math.pow(2,l.canonical.z),g=l.canonical.y;return[new a.MercatorCoordinate(0,g/h).toLngLat().lat,new a.MercatorCoordinate(0,(g+1)/h).toLngLat().lat]}function zc(p,l,h,g,v,w,C){const M=p.context,R=M.gl,z=h.fbo;if(!z)return;p.prepareDrawTile();const D=p.useProgram("hillshade");M.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,z.colorAttachment.get());const W=((le,de,Q,xe)=>{const ye=Q.paint.get("hillshade-shadow-color"),we=Q.paint.get("hillshade-highlight-color"),Ie=Q.paint.get("hillshade-accent-color");let Ae=Q.paint.get("hillshade-illumination-direction")*(Math.PI/180);Q.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ae-=le.transform.angle);const Fe=!le.options.moving;return{u_matrix:xe||le.transform.calculateProjMatrix(de.tileID.toUnwrapped(),Fe),u_image:0,u_latrange:wf(0,de.tileID),u_light:[Q.paint.get("hillshade-exaggeration"),Ae],u_shadow:ye,u_highlight:we,u_accent:Ie}})(p,h,g,p.terrain?l.projMatrix:null);p.prepareDrawProgram(M,D,l.toUnwrapped());const{tileBoundsBuffer:te,tileBoundsIndexBuffer:ie,tileBoundsSegments:ae}=p.getTileBoundsBuffers(h);D.draw(M,R.TRIANGLES,v,w,C,a.CullFaceMode.disabled,W,g.id,te,ie,ae)}function Oc(p,l,h){if(!l.needsDEMTextureUpload)return;const g=p.context,v=g.gl;g.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||p.getTileTexture(h.stride);const w=h.getPixels();l.demTexture?l.demTexture.update(w,{premultiply:!1}):l.demTexture=new a.Texture(g,w,v.RGBA,{premultiply:!1}),l.needsDEMTextureUpload=!1}function sd(p,l,h,g,v,w){const C=p.context,M=C.gl;if(!l.dem)return;const R=l.dem;if(C.activeTexture.set(M.TEXTURE1),Oc(p,l,R),!l.demTexture)return;l.demTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE);const z=R.dim;C.activeTexture.set(M.TEXTURE0);let D=l.fbo;if(!D){const ae=new a.Texture(C,{width:z,height:z,data:null},M.RGBA);ae.bind(M.LINEAR,M.CLAMP_TO_EDGE),D=l.fbo=C.createFramebuffer(z,z,!0),D.colorAttachment.set(ae.texture)}C.bindFramebuffer.set(D.framebuffer),C.viewport.set([0,0,z,z]);const{tileBoundsBuffer:W,tileBoundsIndexBuffer:te,tileBoundsSegments:ie}=p.getMercatorTileBoundsBuffers();p.useProgram("hillshadePrepare").draw(C,M.TRIANGLES,g,v,w,a.CullFaceMode.disabled,((ae,le)=>{const de=le.stride,Q=a.create();return a.ortho(Q,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(Q,Q,[0,-a.EXTENT,0]),{u_matrix:Q,u_image:1,u_dimension:[de,de],u_zoom:ae.overscaledZ,u_unpack:le.unpackVector}})(l.tileID,R),h.id,W,te,ie),l.needsHillshadePrepare=!1}const ld=p=>({u_matrix:new a.UniformMatrix4f(p),u_image0:new a.Uniform1i(p),u_skirt_height:new a.Uniform1f(p)}),Sf=(p,l)=>({u_matrix:p,u_image0:0,u_skirt_height:l}),cd=(p,l,h,g,v,w,C,M,R,z,D,W,te,ie,ae)=>({u_proj_matrix:Float32Array.from(p),u_globe_matrix:l,u_normalize_matrix:Float32Array.from(g),u_merc_matrix:h,u_zoom_transition:v,u_merc_center:w,u_image0:0,u_frustum_tl:C,u_frustum_tr:M,u_frustum_br:R,u_frustum_bl:z,u_globe_pos:D,u_globe_radius:W,u_viewport:te,u_grid_matrix:ae?Float32Array.from(ae):new Float32Array(9),u_skirt_height:ie});function Ef(p,l){return p!=null&&l!=null&&!(!p.hasData()||!l.hasData())&&p.demTexture!=null&&l.demTexture!=null&&p.tileID.key!==l.tileID.key}const Za=new class{constructor(){this.operations={}}newMorphing(p,l,h,g,v){if(p in this.operations){const w=this.operations[p];w.to.tileID.key!==h.tileID.key&&(w.queued=h)}else this.operations[p]={startTime:g,phase:0,duration:v,from:l,to:h,queued:null}}getMorphValuesForProxy(p){if(!(p in this.operations))return null;const l=this.operations[p];return{from:l.from,to:l.to,phase:l.phase}}update(p){for(const l in this.operations){const h=this.operations[l];for(h.phase=(p-h.startTime)/h.duration;h.phase>=1||!this._validOp(h);)if(!this._nextOp(h,p)){delete this.operations[l];break}}}_nextOp(p,l){return!!p.queued&&(p.from=p.to,p.to=p.queued,p.queued=null,p.phase=0,p.startTime=l,!0)}_validOp(p){return p.from.hasData()&&p.to.hasData()}},Ts={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function ud(p){return 6*Math.pow(1.5,22-p)}function Tf(p,l){const h=1<<p.z;return!l&&(p.x===0||p.x===h-1)||p.y===0||p.y===h-1}const Kn=p=>({u_matrix:p});function Fc(p,l,h,g,v){if(v>0){const w=a.exported.now(),C=(w-p.timeAdded)/v,M=l?(w-l.timeAdded)/v:-1,R=h.getSource(),z=g.coveringZoomLevel({tileSize:R.tileSize,roundZoom:R.roundZoom}),D=!l||Math.abs(l.tileID.overscaledZ-z)>Math.abs(p.tileID.overscaledZ-z),W=D&&p.refreshedUponExpiration?1:a.clamp(D?C:1-M,0,1);return p.refreshedUponExpiration&&C>=1&&(p.refreshedUponExpiration=!1),l?{opacity:1,mix:1-W}:{opacity:W,mix:0}}return{opacity:1,mix:0}}class Hg extends a.SourceCache{constructor(l){const h={type:"raster-dem",maxzoom:l.transform.maxZoom},g=new Me(An(),null),v=Ve("mock-dem",h,g,l.style);super("mock-dem",v,!1),v.setEventedParent(this),this._sourceLoaded=!0}_loadTile(l,h){l.state="loaded",h(null)}}class Zg extends a.SourceCache{constructor(l){const h=Ve("proxy",{type:"geojson",maxzoom:l.transform.maxZoom},new Me(An(),null),l.style);super("proxy",h,!1),h.setEventedParent(this),this.map=this.getSource().map=l,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(l,h,g){if(l.freezeTileCoverage)return;this.transform=l;const v=l.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((w,C)=>{if(w[C.key]="",!this._tiles[C.key]){const M=new a.Tile(C,this._source.tileSize*C.overscaleFactor(),l.tileZoom);M.state="loaded",this._tiles[C.key]=M}return w},{});for(const w in this._tiles)w in v||(this.freeFBO(w),this._tiles[w].unloadVectorData(),delete this._tiles[w])}freeFBO(l){const h=this.proxyCachedFBO[l];if(h!==void 0){const g=Object.values(h);this.renderCachePool.push(...g),delete this.proxyCachedFBO[l]}}deallocRenderCache(){this.renderCache.forEach(l=>l.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Cf extends a.OverscaledTileID{constructor(l,h,g){super(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,l.canonical.y),this.proxyTileKey=h,this.projMatrix=g}}class Mf extends a.Elevation{constructor(l,h){super(),this.painter=l,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[g,v,w]=function(R){const z=new a.StructArrayLayout2i4,D=new a.StructArrayLayout3ui6,W=131;z.reserve(17161),D.reserve(33800);const te=a.EXTENT/128,ie=a.EXTENT+te/2,ae=ie+te;for(let de=-te;de<ae;de+=te)for(let Q=-te;Q<ae;Q+=te){const xe=Q<0||Q>ie||de<0||de>ie?24575:0,ye=a.clamp(Math.round(Q),0,a.EXTENT),we=a.clamp(Math.round(de),0,a.EXTENT);z.emplaceBack(ye+xe,we)}const le=(de,Q)=>{const xe=Q*W+de;D.emplaceBack(xe+1,xe,xe+W),D.emplaceBack(xe+W,xe+W+1,xe+1)};for(let de=1;de<129;de++)for(let Q=1;Q<129;Q++)le(Q,de);return[0,129].forEach(de=>{for(let Q=0;Q<130;Q++)le(Q,de),le(de,Q)}),[z,D,32768]}(),C=l.context;this.gridBuffer=C.createVertexBuffer(g,a.posAttributes.members),this.gridIndexBuffer=C.createIndexBuffer(v),this.gridSegments=a.SegmentVector.simpleSegment(0,0,g.length,v.length),this.gridNoSkirtSegments=a.SegmentVector.simpleSegment(0,0,g.length,w),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Zg(h.map),this.orthoMatrix=a.create(),a.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,a.EXTENT,0,a.EXTENT,0,1);const M=C.gl;this._overlapStencilMode=new a.StencilMode({func:M.GEQUAL,mask:255},0,255,M.KEEP,M.KEEP,M.REPLACE),this._previousZoom=l.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=h,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Hg(h.map)}set style(l){l.on("data",this._onStyleDataEvent.bind(this)),l.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=l,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(l,h,g){if(l&&l.terrain){this._style!==l&&(this.style=l),this.enabled=!0;const v=l.terrain.properties;this.sourceCache=l.terrain.drapeRenderMode===0?this._mockSourceCache:l._getSourceCache(v.get("source")),this._exaggeration=v.get("exaggeration");const w=()=>{this.sourceCache.used&&a.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const C=this.getScaledDemTileSize();this.sourceCache.update(h,C,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,w(),this._initializing=!0),w(),h.updateElevation(!0,g),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(h),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(l){this._findCoveringTileCache[l]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const l=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||l.efficiency!==100&&a.warnOnce(`Terrain render cache efficiency is not optimal (${l.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${l.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(l){l.coord&&l.dataType==="source"?this._clearRenderCacheForTile(l.sourceCacheId,l.coord):l.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const l in this._style._sourceCaches)this._style._sourceCaches[l].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(l=>l.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const l=2*this.proxySourceCache.getSource().tileSize;return[l,l]}set useVertexMorphing(l){this._useVertexMorphing=l}updateTileBinding(l){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const h=this.proxySourceCache,g=this.painter.transform;this._initializing&&(this._initializing=g._centerAltitude===0&&this.getAtPointOrZero(a.MercatorCoordinate.fromLngLat(g.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const v=this.proxyCoords=h.getIds().map(R=>{const z=h.getTileByID(R).tileID;return z.projMatrix=g.calculateProjMatrix(z.toUnwrapped()),z});(function(R,z){const D=z.transform.pointCoordinate(z.transform.getCameraPoint()),W=new a.pointGeometry(D.x,D.y);R.sort((te,ie)=>{if(ie.overscaledZ-te.overscaledZ)return ie.overscaledZ-te.overscaledZ;const ae=new a.pointGeometry(te.canonical.x+(1<<te.canonical.z)*te.wrap,te.canonical.y),le=new a.pointGeometry(ie.canonical.x+(1<<ie.canonical.z)*ie.wrap,ie.canonical.y),de=W.mult(1<<te.canonical.z);return de.x-=.5,de.y-=.5,de.distSqr(ae)-de.distSqr(le)})})(v,this.painter),this._previousZoom=g.zoom;const w=this.proxyToSource||{};this.proxyToSource={},v.forEach(R=>{this.proxyToSource[R.key]={}}),this.terrainTileForTile={};const C=this._style._sourceCaches;for(const R in C){const z=C[R];if(!z.used||(z!==this.sourceCache&&this.resetTileLookupCache(z.id),this._setupProxiedCoordsForOrtho(z,l[R],w),z.usedForTerrain))continue;const D=l[R];z.getSource().reparseOverscaled&&this._assignTerrainTiles(D)}this.proxiedCoords[h.id]=v.map(R=>new Cf(R,R.key,this.orthoMatrix)),this._assignTerrainTiles(v),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(w),this.renderingToTexture=!1,this._updateTimestamp=a.exported.now();const M={};this._visibleDemTiles=[];for(const R of this.proxyCoords){const z=this.terrainTileForTile[R.key];if(!z)continue;const D=z.tileID.key;D in M||(this._visibleDemTiles.push(z),M[D]=D)}}_assignTerrainTiles(l){this._initializing||l.forEach(h=>{if(this.terrainTileForTile[h.key])return;const g=this._findTileCoveringTileID(h,this.sourceCache);g&&(this.terrainTileForTile[h.key]=g)})}_prepareDEMTextures(){const l=this.painter.context,h=l.gl;for(const g in this.terrainTileForTile){const v=this.terrainTileForTile[g],w=v.dem;!w||v.demTexture&&!v.needsDEMTextureUpload||(l.activeTexture.set(h.TEXTURE1),Oc(this.painter,v,w))}}_prepareDemTileUniforms(l,h,g,v){if(!h||h.demTexture==null)return!1;const w=l.tileID.canonical,C=Math.pow(2,h.tileID.canonical.z-w.z),M=v||"";return g[`u_dem_tl${M}`]=[w.x*C%1,w.y*C%1],g[`u_dem_scale${M}`]=C,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const l=this.painter.context,h=l.gl;if(!this._emptyDepthBufferTexture){const g=new a.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new a.Texture(l,g,h.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let l=0;const h=this._visibleDemTiles.reduce((g,v)=>{if(!v.dem)return g;const w=v.dem.tree.minimums[0];return w>0&&l++,g+w},0);return l?h/l:0}_updateEmptyDEMTexture(){const l=this.painter.context,h=l.gl;l.activeTexture.set(h.TEXTURE2);const g=this._getLoadedAreaMinimum(),v=new a.RGBAImage({width:1,height:1},new Uint8Array(a.DEMData.pack(g,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let w=this._emptyDEMTexture;return w?w.update(v,{premultiply:!1}):w=this._emptyDEMTexture=new a.Texture(l,v,h.RGBA,{premultiply:!1}),w}setupElevationDraw(l,h,g){const v=this.painter.context,w=v.gl,C=(M=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:a.DEMData.getUnpackVector(M),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var M;C.u_dem_size=this.sourceCache.getSource().tileSize,C.u_exaggeration=this.exaggeration();let R=null,z=null,D=1;if(g&&g.morphing&&this._useVertexMorphing){const W=g.morphing.srcDemTile,te=g.morphing.dstDemTile;D=g.morphing.phase,W&&te&&(this._prepareDemTileUniforms(l,W,C,"_prev")&&(z=W),this._prepareDemTileUniforms(l,te,C)&&(R=te))}if(z&&R?(v.activeTexture.set(w.TEXTURE2),R.demTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE,w.NEAREST),v.activeTexture.set(w.TEXTURE4),z.demTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE,w.NEAREST),C.u_dem_lerp=D):(R=this.terrainTileForTile[l.tileID.key],v.activeTexture.set(w.TEXTURE2),(this._prepareDemTileUniforms(l,R,C)?R.demTexture:this.emptyDEMTexture).bind(w.NEAREST,w.CLAMP_TO_EDGE)),v.activeTexture.set(w.TEXTURE3),g&&g.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),this._depthFBO&&(C.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),C.u_depth_size_inv=[1,1]),g&&g.useMeterToDem&&R){const W=(1<<R.tileID.canonical.z)*a.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;C.u_meter_to_dem=W}if(g&&g.labelPlaneMatrixInv&&(C.u_label_plane_matrix_inv=g.labelPlaneMatrixInv),h.setTerrainUniformValues(v,C),this.painter.transform.projection.name==="globe"){const W=this.globeUniformValues(this.painter.transform,l.tileID.canonical,g&&g.useDenormalizedUpVectorScale);h.setGlobeUniformValues(v,W)}}globeUniformValues(l,h,g){const v=l.projection;return{u_tile_tl_up:v.upVector(h,0,0),u_tile_tr_up:v.upVector(h,a.EXTENT,0),u_tile_br_up:v.upVector(h,a.EXTENT,a.EXTENT),u_tile_bl_up:v.upVector(h,0,a.EXTENT),u_tile_up_scale:g?a.globeMetersToEcef(1):v.upVectorScale(h,l.center.lat,l.worldSize).metersToTile}}renderToBackBuffer(l){const h=this.painter,g=this.painter.context;l.length!==0&&(g.bindFramebuffer.set(null),g.viewport.set([0,0,h.width,h.height]),h.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(v,w,C,M,R){if(v.transform.projection.name==="globe")(function(z,D,W,te,ie){const ae=z.context,le=ae.gl;let de,Q;const xe=z.options.showTerrainWireframe?2:0,ye=z.transform,we=a.globeUseCustomAntiAliasing(z,ae,ye),Ie=(Tt,rt)=>{if(Q===Tt)return;const qe=[Ts[Tt],"PROJECTION_GLOBE_VIEW"];we&&qe.push("CUSTOM_ANTIALIASING"),rt&&qe.push(Ts[xe]),de=z.useProgram("globeRaster",null,qe),Q=Tt},Ae=z.colorModeForRenderPass(),Fe=new a.DepthMode(le.LEQUAL,a.DepthMode.ReadWrite,z.depthRangeFor3D);Za.update(ie);const He=a.calculateGlobeMercatorMatrix(ye),tt=[a.mercatorXfromLng(ye.center.lng),a.mercatorYfromLat(ye.center.lat)],ot=xe?[!1,!0]:[!1],Ot=z.globeSharedBuffers,Ye=[ye.width*a.exported.devicePixelRatio,ye.height*a.exported.devicePixelRatio],xt=Float32Array.from(ye.globeMatrix),dt={useDenormalizedUpVectorScale:!0};if(ot.forEach(Tt=>{const rt=z.transform,qe=ud(rt.zoom)*D.exaggeration();Q=-1;const at=Tt?le.LINES:le.TRIANGLES;for(const wt of te){const kt=W.getTile(wt),un=a.StencilMode.disabled,Dn=D.prevTerrainTileForTile[wt.key],on=D.terrainTileForTile[wt.key];Ef(Dn,on)&&Za.newMorphing(wt.key,Dn,on,ie,250),ae.activeTexture.set(le.TEXTURE0),kt.texture.bind(le.LINEAR,le.CLAMP_TO_EDGE);const Xt=Za.getMorphValuesForProxy(wt.key),dn=Xt?1:0;Xt&&a.extend$1(dt,{morphing:{srcDemTile:Xt.from,dstDemTile:Xt.to,phase:a.easeCubicInOut(Xt.phase)}});const $n=a.tileCornersToBounds(wt.canonical),yn=a.getLatitudinalLod($n.getCenter().lat),lr=a.getGridMatrix(wt.canonical,$n,yn,rt.worldSize/rt._pixelsPerMercatorPixel),ur=a.globeNormalizeECEF(a.globeTileBounds(wt.canonical)),Mr=cd(rt.projMatrix,xt,He,ur,a.globeToMercatorTransition(rt.zoom),tt,rt.frustumCorners.TL,rt.frustumCorners.TR,rt.frustumCorners.BR,rt.frustumCorners.BL,rt.globeCenterInViewSpace,rt.globeRadius,Ye,qe,lr);if(Ie(dn,Tt),D.setupElevationDraw(kt,de,dt),z.prepareDrawProgram(ae,de,wt.toUnwrapped()),Ot){const[wr,si,oo]=Tt?Ot.getWirefameBuffers(z.context,yn):Ot.getGridBuffers(yn,qe!==0);de.draw(ae,at,Fe,un,Ae,a.CullFaceMode.backCCW,Mr,"globe_raster",wr,si,oo)}}}),Ot){const Tt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];we&&Tt.push("CUSTOM_ANTIALIASING"),de=z.useProgram("globeRaster",null,Tt);for(const rt of te){const{x:qe,y:at,z:wt}=rt.canonical,kt=at===0,un=at===(1<<wt)-1,[Dn,on,Xt,dn]=Ot.getPoleBuffers(wt);if(dn&&(kt||un)){const $n=W.getTile(rt);ae.activeTexture.set(le.TEXTURE0),$n.texture.bind(le.LINEAR,le.CLAMP_TO_EDGE);let yn=a.globePoleMatrixForTile(wt,qe,ye);const lr=a.globeNormalizeECEF(a.globeTileBounds(rt.canonical)),ur=(Mr,wr)=>Mr.draw(ae,le.TRIANGLES,Fe,a.StencilMode.disabled,Ae,a.CullFaceMode.disabled,cd(ye.projMatrix,yn,yn,lr,0,tt,ye.frustumCorners.TL,ye.frustumCorners.TR,ye.frustumCorners.BR,ye.frustumCorners.BL,ye.globeCenterInViewSpace,ye.globeRadius,Ye,0),"globe_pole_raster",wr,Xt,dn);D.setupElevationDraw($n,de,dt),z.prepareDrawProgram(ae,de,rt.toUnwrapped()),kt&&ur(de,Dn),un&&(yn=a.scale(a.create(),yn,[1,-1,1]),ur(de,on))}}}})(v,w,C,M,R);else{const z=v.context,D=z.gl;let W,te;const ie=v.options.showTerrainWireframe?2:0,ae=(ye,we)=>{if(te===ye)return;const Ie=[Ts[ye]];we&&Ie.push(Ts[ie]),W=v.useProgram("terrainRaster",null,Ie),te=ye},le=v.colorModeForRenderPass(),de=new a.DepthMode(D.LEQUAL,a.DepthMode.ReadWrite,v.depthRangeFor3D);Za.update(R);const Q=v.transform,xe=ud(Q.zoom)*w.exaggeration();(ie?[!1,!0]:[!1]).forEach(ye=>{te=-1;const we=ye?D.LINES:D.TRIANGLES,[Ie,Ae]=ye?w.getWirefameBuffer():[w.gridIndexBuffer,w.gridSegments];for(const Fe of M){const He=C.getTile(Fe),tt=a.StencilMode.disabled,ot=w.prevTerrainTileForTile[Fe.key],Ot=w.terrainTileForTile[Fe.key];Ef(ot,Ot)&&Za.newMorphing(Fe.key,ot,Ot,R,250),z.activeTexture.set(D.TEXTURE0),He.texture.bind(D.LINEAR,D.CLAMP_TO_EDGE,D.LINEAR_MIPMAP_NEAREST);const Ye=Za.getMorphValuesForProxy(Fe.key),xt=Ye?1:0;let dt;Ye&&(dt={morphing:{srcDemTile:Ye.from,dstDemTile:Ye.to,phase:a.easeCubicInOut(Ye.phase)}});const Tt=Sf(Fe.projMatrix,Tf(Fe.canonical,Q.renderWorldCopies)?xe/10:xe);ae(xt,ye),w.setupElevationDraw(He,W,dt),v.prepareDrawProgram(z,W,Fe.toUnwrapped()),W.draw(z,we,de,tt,le,a.CullFaceMode.backCCW,Tt,"terrain_raster",w.gridBuffer,Ie,Ae)}})}}(h,this,this.proxySourceCache,l,this._updateTimestamp),this.renderingToTexture=!0,h.gpuTimingDeferredRenderEnd(),l.splice(0,l.length))}renderBatch(l){if(this._drapedRenderBatches.length===0)return l+1;this.renderingToTexture=!0;const h=this.painter,g=this.painter.context,v=this.proxySourceCache,w=this.proxiedCoords[v.id],C=this._drapedRenderBatches.shift(),M=[],R=h.style.order;let z=0;for(const D of w){const W=v.getTileByID(D.proxyTileKey),te=v.proxyCachedFBO[D.key]?v.proxyCachedFBO[D.key][l]:void 0,ie=te!==void 0?v.renderCache[te]:this.pool[z++],ae=te!==void 0;if(W.texture=ie.tex,ae&&!ie.dirty){M.push(W.tileID);continue}let le;g.bindFramebuffer.set(ie.fb.framebuffer),this.renderedToTile=!1,ie.dirty&&(g.clear({color:a.Color.transparent,stencil:0}),ie.dirty=!1);for(let de=C.start;de<=C.end;++de){const Q=h.style._layers[R[de]];if(Q.isHidden(h.transform.zoom))continue;const xe=h.style._getLayerSourceCache(Q),ye=xe?this.proxyToSource[D.key][xe.id]:[D];if(!ye)continue;const we=ye;g.viewport.set([0,0,ie.fb.width,ie.fb.height]),le!==(xe?xe.id:null)&&(this._setupStencil(ie,ye,Q,xe),le=xe?xe.id:null),h.renderLayer(h,xe,Q,we)}this.renderedToTile?(ie.dirty=!0,M.push(W.tileID)):ae||--z,z===5&&(z=0,this.renderToBackBuffer(M))}return this.renderToBackBuffer(M),this.renderingToTexture=!1,g.bindFramebuffer.set(null),g.viewport.set([0,0,h.width,h.height]),C.end+1}postRender(){}renderCacheEfficiency(l){const h=l.order.length;if(h===0)return{efficiency:100};let g,v=0,w=0,C=!1;for(let M=0;M<h;++M){const R=l._layers[l.order[M]];this._style.isLayerDraped(R)?(C&&++v,++w):C||(C=!0,g=R.id)}return w===0?{efficiency:100}:{efficiency:100*(1-v/w),firstUndrapedLayer:g}}getMinElevationBelowMSL(){let l=0;return this._visibleDemTiles.filter(h=>h.dem).forEach(h=>{l=Math.min(l,h.dem.tree.minimums[0])}),l===0?l:(l-30)*this._exaggeration}raycast(l,h,g){if(!this._visibleDemTiles)return null;const v=this._visibleDemTiles.filter(w=>w.dem).map(w=>{const C=w.tileID,M=1<<C.overscaledZ,{x:R,y:z}=C.canonical,D=R/M,W=(R+1)/M,te=z/M,ie=(z+1)/M;return{minx:D,miny:te,maxx:W,maxy:ie,t:w.dem.tree.raycastRoot(D,te,W,ie,l,h,g),tile:w}});v.sort((w,C)=>(w.t!==null?w.t:Number.MAX_VALUE)-(C.t!==null?C.t:Number.MAX_VALUE));for(const w of v){if(w.t==null)return null;const C=w.tile.dem.tree.raycast(w.minx,w.miny,w.maxx,w.maxy,l,h,g);if(C!=null)return C}return null}_createFBO(){const l=this.painter.context,h=l.gl,g=this.drapeBufferSize;l.activeTexture.set(h.TEXTURE0);const v=new a.Texture(l,{width:g[0],height:g[1],data:null},h.RGBA);v.bind(h.LINEAR,h.CLAMP_TO_EDGE);const w=l.createFramebuffer(g[0],g[1],!1);return w.colorAttachment.set(v.texture),w.depthAttachment=new qr(l,w.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=l.createRenderbuffer(l.gl.DEPTH_STENCIL,g[0],g[1]),this._stencilRef=0,w.depthAttachment.set(this._sharedDepthStencil),l.clear({stencil:0})):w.depthAttachment.set(this._sharedDepthStencil),l.extTextureFilterAnisotropic&&!l.extTextureFilterAnisotropicForceOff&&h.texParameterf(h.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax),{fb:w,tex:v,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const l in this._style._sourceCaches)if(this._style._sourceCaches[l].hasTransition())return!0;return this._style.order.some(l=>{const h=this._style._layers[l],g=h.isHidden(this.painter.transform.zoom);return h.type==="custom"?!g&&h.shouldRedrape():!g&&h.hasTransition()})}_clearLineLayersFromRenderCache(){let l=!1;for(const g of this._style._getSources())if(g instanceof j){l=!0;break}if(!l)return;const h={};for(let g=0;g<this._style.order.length;++g){const v=this._style._layers[this._style.order[g]],w=this._style._getLayerSourceCache(v);if(w&&!h[w.id]&&!v.isHidden(this.painter.transform.zoom)&&v.type==="line"&&v.widthExpression()instanceof a.ZoomDependentExpression){h[w.id]=!0;for(const C of this.proxyCoords){const M=this.proxyToSource[C.key][w.id];if(M)for(const R of M)this._clearRenderCacheForTile(w.id,R)}}}}_clearRasterLayersFromRenderCache(){let l=!1;for(const g in this._style._sourceCaches)if(this._style._sourceCaches[g]._source instanceof K){l=!0;break}if(!l)return;const h={};for(let g=0;g<this._style.order.length;++g){const v=this._style._layers[this._style.order[g]],w=this._style._getLayerSourceCache(v);if(!w||h[w.id]||v.isHidden(this.painter.transform.zoom)||v.type!=="raster")continue;const C=v.paint.get("raster-fade-duration");for(const M of this.proxyCoords){const R=this.proxyToSource[M.key][w.id];if(R)for(const z of R){const D=Fc(w.getTile(z),w.findLoadedParent(z,0),w,this.painter.transform,C);(D.opacity!==1||D.mix!==0)&&this._clearRenderCacheForTile(w.id,z)}}}}_setupDrapedRenderBatches(){const l=this._style.order,h=l.length;if(h===0)return;const g=[];let v,w=0,C=this._style._layers[l[w]];for(;!this._style.isLayerDraped(C)&&C.isHidden(this.painter.transform.zoom)&&++w<h;)C=this._style._layers[l[w]];for(;w<h;++w){const M=this._style._layers[l[w]];M.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(M)?v===void 0&&(v=w):v!==void 0&&(g.push({start:v,end:w-1}),v=void 0))}v!==void 0&&g.push({start:v,end:w-1}),this._drapedRenderBatches=g}_setupRenderCache(l){const h=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,h.renderCache.length>h.renderCachePool.length){const C=Object.values(h.proxyCachedFBO);h.proxyCachedFBO={};for(let M=0;M<C.length;++M){const R=Object.values(C[M]);h.renderCachePool.push(...R)}}return}this._clearRasterLayersFromRenderCache();const g=this.proxyCoords,v=this._tilesDirty;for(let C=g.length-1;C>=0;C--){const M=g[C];if(h.getTileByID(M.key),h.proxyCachedFBO[M.key]!==void 0){const R=l[M.key],z=this.proxyToSource[M.key];let D=0;for(const W in z){const te=z[W],ie=R[W];if(!ie||ie.length!==te.length||te.some((ae,le)=>ae!==ie[le]||v[W]&&v[W].hasOwnProperty(ae.key))){D=-1;break}++D}for(const W in h.proxyCachedFBO[M.key])h.renderCache[h.proxyCachedFBO[M.key][W]].dirty=D<0||D!==Object.values(R).length}}const w=[...this._drapedRenderBatches];w.sort((C,M)=>M.end-M.start-(C.end-C.start));for(const C of w)for(const M of g){if(h.proxyCachedFBO[M.key])continue;let R=h.renderCachePool.pop();R===void 0&&h.renderCache.length<50&&(R=h.renderCache.length,h.renderCache.push(this._createFBO())),R!==void 0&&(h.proxyCachedFBO[M.key]={},h.proxyCachedFBO[M.key][C.start]=R,h.renderCache[R].dirty=!0)}this._tilesDirty={}}_setupStencil(l,h,g,v){if(!v||!this._sourceTilesOverlap[v.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const w=this.painter.context,C=w.gl;if(h.length<=1)return void(this._overlapStencilType=!1);let M;if(g.isTileClipped())M=h.length,this._overlapStencilMode.test={func:C.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(h[0].overscaledZ>h[h.length-1].overscaledZ))return void(this._overlapStencilType=!1);M=1,this._overlapStencilMode.test={func:C.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+M>255&&(w.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=M,this._overlapStencilMode.ref=this._stencilRef,g.isTileClipped()&&this._renderTileClippingMasks(h,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(l){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[l.key]),this._overlapStencilMode):a.StencilMode.disabled}_renderTileClippingMasks(l,h){const g=this.painter,v=this.painter.context,w=v.gl;g._tileClippingMaskIDs={},v.setColorMode(a.ColorMode.disabled),v.setDepthMode(a.DepthMode.disabled);const C=g.useProgram("clippingMask");for(const M of l){const R=g._tileClippingMaskIDs[M.key]=--h;C.draw(v,w.TRIANGLES,a.DepthMode.disabled,new a.StencilMode({func:w.ALWAYS,mask:0},R,255,w.KEEP,w.KEEP,w.REPLACE),a.ColorMode.disabled,a.CullFaceMode.disabled,Kn(M.projMatrix),"$clipping",g.tileExtentBuffer,g.quadTriangleIndexBuffer,g.tileExtentSegments)}}pointCoordinate(l){const h=this.painter.transform;if(l.x<0||l.x>h.width||l.y<0||l.y>h.height)return null;const g=[l.x,l.y,1,1];a.transformMat4$1(g,g,h.pixelMatrixInverse),a.scale$1(g,g,1/g[3]),g[0]/=h.worldSize,g[1]/=h.worldSize;const v=h._camera.position,w=a.mercatorZfromAltitude(1,h.center.lat),C=[v[0],v[1],v[2]/w,0],M=a.subtract([],g.slice(0,3),C);a.normalize(M,M);const R=this.raycast(C,M,this._exaggeration);return R!==null&&R?(a.scaleAndAdd(C,C,M,R),C[3]=C[2],C[2]*=w,C):null}drawDepth(){const l=this.painter,h=l.context,g=this.proxySourceCache,v=Math.ceil(l.width),w=Math.ceil(l.height);if(!this._depthFBO||this._depthFBO.width===v&&this._depthFBO.height===w||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const C=h.gl,M=h.createFramebuffer(v,w,!0);h.activeTexture.set(C.TEXTURE0);const R=new a.Texture(h,{width:v,height:w,data:null},C.RGBA);R.bind(C.NEAREST,C.CLAMP_TO_EDGE),M.colorAttachment.set(R.texture);const z=h.createRenderbuffer(h.gl.DEPTH_COMPONENT16,v,w);M.depthAttachment.set(z),this._depthFBO=M,this._depthTexture=R}h.bindFramebuffer.set(this._depthFBO.framebuffer),h.viewport.set([0,0,v,w]),function(C,M,R,z){if(C.transform.projection.name==="globe")return;const D=C.context,W=D.gl;D.clear({depth:1});const te=C.useProgram("terrainDepth"),ie=new a.DepthMode(W.LESS,a.DepthMode.ReadWrite,C.depthRangeFor3D);for(const ae of z){const le=R.getTile(ae),de=Sf(ae.projMatrix,0);M.setupElevationDraw(le,te),te.draw(D,W.TRIANGLES,ie,a.StencilMode.disabled,a.ColorMode.unblended,a.CullFaceMode.backCCW,de,"terrain_depth",M.gridBuffer,M.gridIndexBuffer,M.gridNoSkirtSegments)}}(l,this,g,this.proxyCoords)}_setupProxiedCoordsForOrtho(l,h,g){if(l.getSource()instanceof Pe)return this._setupProxiedCoordsForImageSource(l,h,g);this._findCoveringTileCache[l.id]=this._findCoveringTileCache[l.id]||{};const v=this.proxiedCoords[l.id]=[],w=this.proxyCoords;for(let M=0;M<w.length;M++){const R=w[M],z=this._findTileCoveringTileID(R,l);if(z){const D=this._createProxiedId(R,z,g[R.key]&&g[R.key][l.id]);v.push(D),this.proxyToSource[R.key][l.id]=[D]}}let C=!1;for(let M=0;M<h.length;M++){const R=l.getTile(h[M]);if(!R||!R.hasData())continue;const z=this._findTileCoveringTileID(R.tileID,this.proxySourceCache);if(z&&z.tileID.canonical.z!==R.tileID.canonical.z){const D=this.proxyToSource[z.tileID.key][l.id],W=this._createProxiedId(z.tileID,R,g[z.tileID.key]&&g[z.tileID.key][l.id]);D?D.splice(D.length-1,0,W):this.proxyToSource[z.tileID.key][l.id]=[W],v.push(W),C=!0}}this._sourceTilesOverlap[l.id]=C}_setupProxiedCoordsForImageSource(l,h,g){if(!l.getSource().loaded())return;const v=this.proxiedCoords[l.id]=[],w=this.proxyCoords,C=l.getSource(),M=new a.pointGeometry(C.tileID.x,C.tileID.y)._div(1<<C.tileID.z),R=C.coordinates.map(a.MercatorCoordinate.fromLngLat).reduce((D,W)=>(D.min.x=Math.min(D.min.x,W.x-M.x),D.min.y=Math.min(D.min.y,W.y-M.y),D.max.x=Math.max(D.max.x,W.x-M.x),D.max.y=Math.max(D.max.y,W.y-M.y),D),{min:new a.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new a.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),z=(D,W)=>{const te=D.wrap+D.canonical.x/(1<<D.canonical.z),ie=D.canonical.y/(1<<D.canonical.z),ae=a.EXTENT/(1<<D.canonical.z),le=W.wrap+W.canonical.x/(1<<W.canonical.z),de=W.canonical.y/(1<<W.canonical.z);return te+ae<le+R.min.x||te>le+R.max.x||ie+ae<de+R.min.y||ie>de+R.max.y};for(let D=0;D<w.length;D++){const W=w[D];for(let te=0;te<h.length;te++){const ie=l.getTile(h[te]);if(!ie||!ie.hasData()||z(W,ie.tileID))continue;const ae=this._createProxiedId(W,ie,g[W.key]&&g[W.key][l.id]),le=this.proxyToSource[W.key][l.id];le?le.push(ae):this.proxyToSource[W.key][l.id]=[ae],v.push(ae)}}}_createProxiedId(l,h,g){let v=this.orthoMatrix;if(g){const w=g.find(C=>C.key===h.tileID.key);if(w)return w}if(h.tileID.key!==l.key){const w=l.canonical.z-h.tileID.canonical.z;let C,M,R;v=a.create();const z=h.tileID.wrap-l.wrap<<l.overscaledZ;w>0?(C=a.EXTENT>>w,M=C*((h.tileID.canonical.x<<w)-l.canonical.x+z),R=C*((h.tileID.canonical.y<<w)-l.canonical.y)):(C=a.EXTENT<<-w,M=a.EXTENT*(h.tileID.canonical.x-(l.canonical.x+z<<-w)),R=a.EXTENT*(h.tileID.canonical.y-(l.canonical.y<<-w))),a.ortho(v,0,C,0,C,0,1),a.translate(v,v,[M,R,0])}return new Cf(h.tileID,l.key,v)}_findTileCoveringTileID(l,h){let g=h.getTile(l);if(g&&g.hasData())return g;const v=this._findCoveringTileCache[h.id],w=v[l.key];if(g=w?h.getTileByID(w):null,g&&g.hasData()||w===null)return g;let C=g?g.tileID:l,M=C.overscaledZ;const R=h.getSource().minzoom,z=[];if(!w){const W=h.getSource().maxzoom;if(l.canonical.z>=W){const te=l.canonical.z-W;h.getSource().reparseOverscaled?(M=Math.max(l.canonical.z+2,h.transform.tileZoom),C=new a.OverscaledTileID(M,l.wrap,W,l.canonical.x>>te,l.canonical.y>>te)):te!==0&&(M=W,C=new a.OverscaledTileID(M,l.wrap,W,l.canonical.x>>te,l.canonical.y>>te))}C.key!==l.key&&(z.push(C.key),g=h.getTile(C))}const D=W=>{z.forEach(te=>{v[te]=W}),z.length=0};for(M-=1;M>=R&&(!g||!g.hasData());M--){g&&D(g.tileID.key);const W=C.calculateScaledKey(M);if(g=h.getTileByID(W),g&&g.hasData())break;const te=v[W];if(te===null)break;te===void 0?z.push(W):g=h.getTileByID(te)}return D(g?g.tileID.key:null),g&&g.hasData()?g:null}findDEMTileFor(l){return this.enabled?this._findTileCoveringTileID(l,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(l,h){let g=this._tilesDirty[l];g||(g=this._tilesDirty[l]={}),g[h.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const l=function(h){let g=0;const v=new a.StructArrayLayout2ui4,w=131;for(let C=1;C<129;C++){for(let M=1;M<129;M++)g=C*w+M,v.emplaceBack(g,g+1),v.emplaceBack(g,g+w),v.emplaceBack(g+1,g+w),C===128&&v.emplaceBack(g+w,g+w+1);v.emplaceBack(g+1,g+1+w)}return v}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(l),this.wireframeSegments=a.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,l.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Af{static cacheKey(l,h,g,v){let w=`${h}${v?v.cacheKey:""}`;for(const C of g)l.usedDefines.includes(C)&&(w+=`/${C}`);return w}constructor(l,h,g,v,w,C){const M=l.gl;this.program=M.createProgram();const R=function(Q){const xe=[];for(let ye=0;ye<Q.length;ye++){if(Q[ye]===null)continue;const we=Q[ye].split(" ");xe.push(we.pop())}return xe}(g.staticAttributes),z=v?v.getBinderAttributes():[],D=R.concat(z);let W=v?v.defines():[];W=W.concat(C.map(Q=>`#define ${Q}`));const te=l.isWebGL2?`#version 300 es
`:"",ie=te+W.concat(l.extStandardDerivatives&&te.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(ad):ad,ad,od,qg.fragmentSource,xf.fragmentSource,g.fragmentSource).join(`
`),ae=te+W.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,od,qg.vertexSource,xf.vertexSource,vf.vertexSource,g.vertexSource).join(`
`),le=M.createShader(M.FRAGMENT_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);M.shaderSource(le,ie),M.compileShader(le),M.attachShader(this.program,le);const de=M.createShader(M.VERTEX_SHADER);if(M.isContextLost())this.failedToCreate=!0;else{M.shaderSource(de,ae),M.compileShader(de),M.attachShader(this.program,de),this.attributes={},this.numAttributes=D.length;for(let Q=0;Q<this.numAttributes;Q++)D[Q]&&(M.bindAttribLocation(this.program,Q,D[Q]),this.attributes[D[Q]]=Q);M.linkProgram(this.program),M.deleteShader(de),M.deleteShader(le),this.fixedUniforms=w(l),this.binderUniforms=v?v.getUniforms(l):[],C.includes("TERRAIN")&&(this.terrainUniforms=(Q=>({u_dem:new a.Uniform1i(Q),u_dem_prev:new a.Uniform1i(Q),u_dem_unpack:new a.Uniform4f(Q),u_dem_tl:new a.Uniform2f(Q),u_dem_scale:new a.Uniform1f(Q),u_dem_tl_prev:new a.Uniform2f(Q),u_dem_scale_prev:new a.Uniform1f(Q),u_dem_size:new a.Uniform1f(Q),u_dem_lerp:new a.Uniform1f(Q),u_exaggeration:new a.Uniform1f(Q),u_depth:new a.Uniform1i(Q),u_depth_size_inv:new a.Uniform2f(Q),u_meter_to_dem:new a.Uniform1f(Q),u_label_plane_matrix_inv:new a.UniformMatrix4f(Q)}))(l)),C.includes("GLOBE")&&(this.globeUniforms=(Q=>({u_tile_tl_up:new a.Uniform3f(Q),u_tile_tr_up:new a.Uniform3f(Q),u_tile_br_up:new a.Uniform3f(Q),u_tile_bl_up:new a.Uniform3f(Q),u_tile_up_scale:new a.Uniform1f(Q)}))(l)),C.includes("FOG")&&(this.fogUniforms=(Q=>({u_fog_matrix:new a.UniformMatrix4f(Q),u_fog_range:new a.Uniform2f(Q),u_fog_color:new a.Uniform4f(Q),u_fog_horizon_blend:new a.Uniform1f(Q),u_fog_temporal_offset:new a.Uniform1f(Q),u_frustum_tl:new a.Uniform3f(Q),u_frustum_tr:new a.Uniform3f(Q),u_frustum_br:new a.Uniform3f(Q),u_frustum_bl:new a.Uniform3f(Q),u_globe_pos:new a.Uniform3f(Q),u_globe_radius:new a.Uniform1f(Q),u_globe_transition:new a.Uniform1f(Q),u_is_globe:new a.Uniform1i(Q),u_viewport:new a.Uniform2f(Q)}))(l))}}setTerrainUniformValues(l,h){if(!this.terrainUniforms)return;const g=this.terrainUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const v in h)g[v]&&g[v].set(this.program,v,h[v])}}setGlobeUniformValues(l,h){if(!this.globeUniforms)return;const g=this.globeUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const v in h)g[v]&&g[v].set(this.program,v,h[v])}}setFogUniformValues(l,h){if(!this.fogUniforms)return;const g=this.fogUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const v in h)g[v].set(this.program,v,h[v])}}draw(l,h,g,v,w,C,M,R,z,D,W,te,ie,ae,le){const de=l.gl;if(this.failedToCreate)return;l.program.set(this.program),l.setDepthMode(g),l.setStencilMode(v),l.setColorMode(w),l.setCullFace(C);for(const xe of Object.keys(this.fixedUniforms))this.fixedUniforms[xe].set(this.program,xe,M[xe]);ae&&ae.setUniforms(this.program,l,this.binderUniforms,te,{zoom:ie});const Q={[de.LINES]:2,[de.TRIANGLES]:3,[de.LINE_STRIP]:1}[h];for(const xe of W.get()){const ye=xe.vaos||(xe.vaos={});(ye[R]||(ye[R]=new Dc)).bind(l,this,z,ae?ae.getPaintVertexBuffers():[],D,xe.vertexOffset,le||[]),de.drawElements(h,xe.primitiveLength*Q,de.UNSIGNED_SHORT,xe.primitiveOffset*Q*2)}}}function Xg(p,l){const h=Math.pow(2,l.tileID.overscaledZ),g=l.tileSize*Math.pow(2,p.transform.tileZoom)/h,v=g*(l.tileID.canonical.x+l.tileID.wrap*h),w=g*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_tile_units_to_pixels:1/Ge(l,1,p.transform.tileZoom),u_pixel_coord_upper:[v>>16,w>>16],u_pixel_coord_lower:[65535&v,65535&w]}}const Q1=a.create(),dd=(p,l,h,g,v,w,C,M,R,z,D)=>{const W=l.style.light,te=W.properties.get("position"),ie=[te.x,te.y,te.z],ae=a.create$1();W.properties.get("anchor")==="viewport"&&(a.fromRotation(ae,-l.transform.angle),a.transformMat3(ie,ie,ae));const le=W.properties.get("color"),de=l.transform,Q={u_matrix:p,u_lightpos:ie,u_lightintensity:W.properties.get("intensity"),u_lightcolor:[le.r,le.g,le.b],u_vertical_gradient:+h,u_opacity:g,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Q1,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:v,u_edge_radius:w};return de.projection.name==="globe"&&(Q.u_tile_id=[C.canonical.x,C.canonical.y,1<<C.canonical.z],Q.u_zoom_transition=R,Q.u_inv_rot_matrix=D,Q.u_merc_center=z,Q.u_up_dir=de.projection.upVector(new a.CanonicalTileID(0,0,0),z[0]*a.EXTENT,z[1]*a.EXTENT),Q.u_height_lift=M),Q},kf=(p,l,h,g,v,w,C,M,R,z,D,W)=>{const te=dd(p,l,h,g,v,w,C,R,z,D,W),ie={u_height_factor:-Math.pow(2,C.overscaledZ)/M.tileSize/8};return a.extend(te,Xg(l,M),ie)},hd=p=>({u_matrix:p}),fd=(p,l,h)=>a.extend(hd(p),Xg(l,h)),Kg=(p,l)=>({u_matrix:p,u_world:l}),Yg=(p,l,h,g)=>a.extend(fd(p,l,h),{u_world:g}),J1=a.create(),Bc=(p,l,h,g,v,w)=>{const C=p.transform,M=C.projection.name==="globe";let R;if(w.paint.get("circle-pitch-alignment")==="map")if(M){const D=a.globePixelsToTileUnits(C.zoom,l.canonical)*C._pixelsPerMercatorPixel;R=Float32Array.from([D,0,0,D])}else R=C.calculatePixelsToTileUnitsMatrix(h);else R=new Float32Array([C.pixelsToGLUnits[0],0,0,C.pixelsToGLUnits[1]]);const z={u_camera_to_center_distance:C.cameraToCenterDistance,u_matrix:p.translatePosMatrix(l.projMatrix,h,w.paint.get("circle-translate"),w.paint.get("circle-translate-anchor")),u_device_pixel_ratio:a.exported.devicePixelRatio,u_extrude_scale:R,u_inv_rot_matrix:J1,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(M){z.u_inv_rot_matrix=g,z.u_merc_center=v,z.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],z.u_zoom_transition=a.globeToMercatorTransition(C.zoom);const D=v[0]*a.EXTENT,W=v[1]*a.EXTENT;z.u_up_dir=C.projection.upVector(new a.CanonicalTileID(0,0,0),D,W)}return z},Nc=p=>{const l=[];return p.paint.get("circle-pitch-alignment")==="map"&&l.push("PITCH_WITH_MAP"),p.paint.get("circle-pitch-scale")==="map"&&l.push("SCALE_WITH_MAP"),l},Qg=(p,l,h,g)=>{const v=a.EXTENT/h.tileSize;return{u_matrix:p,u_camera_to_center_distance:l.getCameraToCenterDistance(g),u_extrude_scale:[l.pixelsToGLUnits[0]/v,l.pixelsToGLUnits[1]/v]}},$c=(p,l,h=1)=>({u_matrix:p,u_color:l,u_overlay:0,u_overlay_scale:h}),Rf=a.create(),ia=(p,l,h,g,v,w,C)=>{const M=p.transform,R=M.projection.name==="globe",z=R?a.globePixelsToTileUnits(M.zoom,l.canonical)*M._pixelsPerMercatorPixel:Ge(h,1,w),D={u_matrix:l.projMatrix,u_extrude_scale:z,u_intensity:C,u_inv_rot_matrix:Rf,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(R){D.u_inv_rot_matrix=g,D.u_merc_center=v,D.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],D.u_zoom_transition=a.globeToMercatorTransition(M.zoom);const W=v[0]*a.EXTENT,te=v[1]*a.EXTENT;D.u_up_dir=M.projection.upVector(new a.CanonicalTileID(0,0,0),W,te)}return D},If=(p,l,h,g,v,w,C)=>{const M=p.transform,R=M.calculatePixelsToTileUnitsMatrix(l);return{u_matrix:Pf(p,l,h,g),u_pixels_to_tile_units:R,u_device_pixel_ratio:w,u_units_to_pixels:[1/M.pixelsToGLUnits[0],1/M.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:v,u_texsize:md(h)?l.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:pd(l,p.transform),u_alpha_discard_threshold:0,u_trim_offset:C}},Jg=(p,l,h,g,v)=>{const w=p.transform;return{u_matrix:Pf(p,l,h,g),u_texsize:l.imageAtlasTexture.size,u_pixels_to_tile_units:w.calculatePixelsToTileUnitsMatrix(l),u_device_pixel_ratio:v,u_image:0,u_tile_units_to_pixels:pd(l,w),u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function pd(p,l){return 1/Ge(p,1,l.tileZoom)}function Pf(p,l,h,g){return p.translatePosMatrix(g||l.tileID.projMatrix,l,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}function md(p){const l=p.paint.get("line-dasharray").value;return l.value||l.kind!=="constant"}const ex=(p,l,h,g,v,w)=>{return{u_matrix:p,u_tl_parent:l,u_scale_parent:h,u_fade_t:g.mix,u_opacity:g.opacity*v.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:v.paint.get("raster-brightness-min"),u_brightness_high:v.paint.get("raster-brightness-max"),u_saturation_factor:(M=v.paint.get("raster-saturation"),M>0?1-1/(1.001-M):-M),u_contrast_factor:(C=v.paint.get("raster-contrast"),C>0?1/(1-C):1+C),u_spin_weights:Lf(v.paint.get("raster-hue-rotate")),u_perspective_transform:w};var C,M};function Lf(p){p*=Math.PI/180;const l=Math.sin(p),h=Math.cos(p);return[(2*h+1)/3,(-Math.sqrt(3)*l-h+1)/3,(Math.sqrt(3)*l-h+1)/3]}const ey=a.create(),Uc=(p,l,h,g,v,w,C,M,R,z,D,W,te,ie,ae,le)=>{const de=v.transform,Q={u_is_size_zoom_constant:+(p==="constant"||p==="source"),u_is_size_feature_constant:+(p==="constant"||p==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:de.cameraToCenterDistance,u_rotate_symbol:+h,u_aspect_ratio:de.width/de.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:C,u_coord_matrix:M,u_is_text:+R,u_pitch_with_map:+g,u_texsize:z,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:ey,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:ey,u_up_vector:[0,-1,0]};return le.name==="globe"&&(Q.u_tile_id=[D.canonical.x,D.canonical.y,1<<D.canonical.z],Q.u_zoom_transition=W,Q.u_inv_rot_matrix=ie,Q.u_merc_center=te,Q.u_camera_forward=de._camera.forward(),Q.u_ecef_origin=a.globeECEFOrigin(de.globeMatrix,D.toUnwrapped()),Q.u_tile_matrix=Float32Array.from(de.globeMatrix),Q.u_up_vector=ae),Q},ty=(p,l,h,g,v,w,C,M,R,z,D,W,te,ie,ae,le,de)=>a.extend(Uc(p,l,h,g,v,w,C,M,R,z,W,te,ie,ae,le,de),{u_gamma_scale:g?v.transform.cameraToCenterDistance*Math.cos(v.terrain?0:v.transform._pitch):1,u_device_pixel_ratio:a.exported.devicePixelRatio,u_is_halo:+D}),Df=(p,l,h,g,v,w,C,M,R,z,D,W,te,ie,ae,le)=>a.extend(ty(p,l,h,g,v,w,C,M,!0,R,!0,D,W,te,ie,ae,le),{u_texsize_icon:z,u_texture_icon:1}),tx=(p,l,h)=>({u_matrix:p,u_opacity:l,u_color:h}),zf=(p,l,h,g,v)=>a.extend(function(w,C,M){const R=C.imageManager.getPattern(w.toString()),{width:z,height:D}=C.imageManager.getPixelSize(),W=Math.pow(2,M.tileID.overscaledZ),te=M.tileSize*Math.pow(2,C.transform.tileZoom)/W,ie=te*(M.tileID.canonical.x+M.tileID.wrap*W),ae=te*M.tileID.canonical.y;return{u_image:0,u_pattern_tl:R.tl,u_pattern_br:R.br,u_texsize:[z,D],u_pattern_size:R.displaySize,u_tile_units_to_pixels:1/Ge(M,1,C.transform.tileZoom),u_pixel_coord_upper:[ie>>16,ae>>16],u_pixel_coord_lower:[65535&ie,65535&ae]}}(g,h,v),{u_matrix:p,u_opacity:l}),nx={fillExtrusion:p=>({u_matrix:new a.UniformMatrix4f(p),u_lightpos:new a.Uniform3f(p),u_lightintensity:new a.Uniform1f(p),u_lightcolor:new a.Uniform3f(p),u_vertical_gradient:new a.Uniform1f(p),u_opacity:new a.Uniform1f(p),u_edge_radius:new a.Uniform1f(p),u_ao:new a.Uniform2f(p),u_tile_id:new a.Uniform3f(p),u_zoom_transition:new a.Uniform1f(p),u_inv_rot_matrix:new a.UniformMatrix4f(p),u_merc_center:new a.Uniform2f(p),u_up_dir:new a.Uniform3f(p),u_height_lift:new a.Uniform1f(p)}),fillExtrusionPattern:p=>({u_matrix:new a.UniformMatrix4f(p),u_lightpos:new a.Uniform3f(p),u_lightintensity:new a.Uniform1f(p),u_lightcolor:new a.Uniform3f(p),u_vertical_gradient:new a.Uniform1f(p),u_height_factor:new a.Uniform1f(p),u_edge_radius:new a.Uniform1f(p),u_ao:new a.Uniform2f(p),u_tile_id:new a.Uniform3f(p),u_zoom_transition:new a.Uniform1f(p),u_inv_rot_matrix:new a.UniformMatrix4f(p),u_merc_center:new a.Uniform2f(p),u_up_dir:new a.Uniform3f(p),u_height_lift:new a.Uniform1f(p),u_image:new a.Uniform1i(p),u_texsize:new a.Uniform2f(p),u_pixel_coord_upper:new a.Uniform2f(p),u_pixel_coord_lower:new a.Uniform2f(p),u_tile_units_to_pixels:new a.Uniform1f(p),u_opacity:new a.Uniform1f(p)}),fill:p=>({u_matrix:new a.UniformMatrix4f(p)}),fillPattern:p=>({u_matrix:new a.UniformMatrix4f(p),u_image:new a.Uniform1i(p),u_texsize:new a.Uniform2f(p),u_pixel_coord_upper:new a.Uniform2f(p),u_pixel_coord_lower:new a.Uniform2f(p),u_tile_units_to_pixels:new a.Uniform1f(p)}),fillOutline:p=>({u_matrix:new a.UniformMatrix4f(p),u_world:new a.Uniform2f(p)}),fillOutlinePattern:p=>({u_matrix:new a.UniformMatrix4f(p),u_world:new a.Uniform2f(p),u_image:new a.Uniform1i(p),u_texsize:new a.Uniform2f(p),u_pixel_coord_upper:new a.Uniform2f(p),u_pixel_coord_lower:new a.Uniform2f(p),u_tile_units_to_pixels:new a.Uniform1f(p)}),circle:p=>({u_camera_to_center_distance:new a.Uniform1f(p),u_extrude_scale:new a.UniformMatrix2f(p),u_device_pixel_ratio:new a.Uniform1f(p),u_matrix:new a.UniformMatrix4f(p),u_inv_rot_matrix:new a.UniformMatrix4f(p),u_merc_center:new a.Uniform2f(p),u_tile_id:new a.Uniform3f(p),u_zoom_transition:new a.Uniform1f(p),u_up_dir:new a.Uniform3f(p)}),collisionBox:p=>({u_matrix:new a.UniformMatrix4f(p),u_camera_to_center_distance:new a.Uniform1f(p),u_extrude_scale:new a.Uniform2f(p)}),collisionCircle:p=>({u_matrix:new a.UniformMatrix4f(p),u_inv_matrix:new a.UniformMatrix4f(p),u_camera_to_center_distance:new a.Uniform1f(p),u_viewport_size:new a.Uniform2f(p)}),debug:p=>({u_color:new a.UniformColor(p),u_matrix:new a.UniformMatrix4f(p),u_overlay:new a.Uniform1i(p),u_overlay_scale:new a.Uniform1f(p)}),clippingMask:p=>({u_matrix:new a.UniformMatrix4f(p)}),heatmap:p=>({u_extrude_scale:new a.Uniform1f(p),u_intensity:new a.Uniform1f(p),u_matrix:new a.UniformMatrix4f(p),u_inv_rot_matrix:new a.UniformMatrix4f(p),u_merc_center:new a.Uniform2f(p),u_tile_id:new a.Uniform3f(p),u_zoom_transition:new a.Uniform1f(p),u_up_dir:new a.Uniform3f(p)}),heatmapTexture:p=>({u_image:new a.Uniform1i(p),u_color_ramp:new a.Uniform1i(p),u_opacity:new a.Uniform1f(p)}),hillshade:p=>({u_matrix:new a.UniformMatrix4f(p),u_image:new a.Uniform1i(p),u_latrange:new a.Uniform2f(p),u_light:new a.Uniform2f(p),u_shadow:new a.UniformColor(p),u_highlight:new a.UniformColor(p),u_accent:new a.UniformColor(p)}),hillshadePrepare:p=>({u_matrix:new a.UniformMatrix4f(p),u_image:new a.Uniform1i(p),u_dimension:new a.Uniform2f(p),u_zoom:new a.Uniform1f(p),u_unpack:new a.Uniform4f(p)}),line:p=>({u_matrix:new a.UniformMatrix4f(p),u_pixels_to_tile_units:new a.UniformMatrix2f(p),u_device_pixel_ratio:new a.Uniform1f(p),u_units_to_pixels:new a.Uniform2f(p),u_dash_image:new a.Uniform1i(p),u_gradient_image:new a.Uniform1i(p),u_image_height:new a.Uniform1f(p),u_texsize:new a.Uniform2f(p),u_tile_units_to_pixels:new a.Uniform1f(p),u_alpha_discard_threshold:new a.Uniform1f(p),u_trim_offset:new a.Uniform2f(p)}),linePattern:p=>({u_matrix:new a.UniformMatrix4f(p),u_texsize:new a.Uniform2f(p),u_pixels_to_tile_units:new a.UniformMatrix2f(p),u_device_pixel_ratio:new a.Uniform1f(p),u_image:new a.Uniform1i(p),u_units_to_pixels:new a.Uniform2f(p),u_tile_units_to_pixels:new a.Uniform1f(p),u_alpha_discard_threshold:new a.Uniform1f(p)}),raster:p=>({u_matrix:new a.UniformMatrix4f(p),u_tl_parent:new a.Uniform2f(p),u_scale_parent:new a.Uniform1f(p),u_fade_t:new a.Uniform1f(p),u_opacity:new a.Uniform1f(p),u_image0:new a.Uniform1i(p),u_image1:new a.Uniform1i(p),u_brightness_low:new a.Uniform1f(p),u_brightness_high:new a.Uniform1f(p),u_saturation_factor:new a.Uniform1f(p),u_contrast_factor:new a.Uniform1f(p),u_spin_weights:new a.Uniform3f(p),u_perspective_transform:new a.Uniform2f(p)}),symbolIcon:p=>({u_is_size_zoom_constant:new a.Uniform1i(p),u_is_size_feature_constant:new a.Uniform1i(p),u_size_t:new a.Uniform1f(p),u_size:new a.Uniform1f(p),u_camera_to_center_distance:new a.Uniform1f(p),u_rotate_symbol:new a.Uniform1i(p),u_aspect_ratio:new a.Uniform1f(p),u_fade_change:new a.Uniform1f(p),u_matrix:new a.UniformMatrix4f(p),u_label_plane_matrix:new a.UniformMatrix4f(p),u_coord_matrix:new a.UniformMatrix4f(p),u_is_text:new a.Uniform1i(p),u_pitch_with_map:new a.Uniform1i(p),u_texsize:new a.Uniform2f(p),u_tile_id:new a.Uniform3f(p),u_zoom_transition:new a.Uniform1f(p),u_inv_rot_matrix:new a.UniformMatrix4f(p),u_merc_center:new a.Uniform2f(p),u_camera_forward:new a.Uniform3f(p),u_tile_matrix:new a.UniformMatrix4f(p),u_up_vector:new a.Uniform3f(p),u_ecef_origin:new a.Uniform3f(p),u_texture:new a.Uniform1i(p)}),symbolSDF:p=>({u_is_size_zoom_constant:new a.Uniform1i(p),u_is_size_feature_constant:new a.Uniform1i(p),u_size_t:new a.Uniform1f(p),u_size:new a.Uniform1f(p),u_camera_to_center_distance:new a.Uniform1f(p),u_rotate_symbol:new a.Uniform1i(p),u_aspect_ratio:new a.Uniform1f(p),u_fade_change:new a.Uniform1f(p),u_matrix:new a.UniformMatrix4f(p),u_label_plane_matrix:new a.UniformMatrix4f(p),u_coord_matrix:new a.UniformMatrix4f(p),u_is_text:new a.Uniform1i(p),u_pitch_with_map:new a.Uniform1i(p),u_texsize:new a.Uniform2f(p),u_texture:new a.Uniform1i(p),u_gamma_scale:new a.Uniform1f(p),u_device_pixel_ratio:new a.Uniform1f(p),u_tile_id:new a.Uniform3f(p),u_zoom_transition:new a.Uniform1f(p),u_inv_rot_matrix:new a.UniformMatrix4f(p),u_merc_center:new a.Uniform2f(p),u_camera_forward:new a.Uniform3f(p),u_tile_matrix:new a.UniformMatrix4f(p),u_up_vector:new a.Uniform3f(p),u_ecef_origin:new a.Uniform3f(p),u_is_halo:new a.Uniform1i(p)}),symbolTextAndIcon:p=>({u_is_size_zoom_constant:new a.Uniform1i(p),u_is_size_feature_constant:new a.Uniform1i(p),u_size_t:new a.Uniform1f(p),u_size:new a.Uniform1f(p),u_camera_to_center_distance:new a.Uniform1f(p),u_rotate_symbol:new a.Uniform1i(p),u_aspect_ratio:new a.Uniform1f(p),u_fade_change:new a.Uniform1f(p),u_matrix:new a.UniformMatrix4f(p),u_label_plane_matrix:new a.UniformMatrix4f(p),u_coord_matrix:new a.UniformMatrix4f(p),u_is_text:new a.Uniform1i(p),u_pitch_with_map:new a.Uniform1i(p),u_texsize:new a.Uniform2f(p),u_texsize_icon:new a.Uniform2f(p),u_texture:new a.Uniform1i(p),u_texture_icon:new a.Uniform1i(p),u_gamma_scale:new a.Uniform1f(p),u_device_pixel_ratio:new a.Uniform1f(p),u_is_halo:new a.Uniform1i(p)}),background:p=>({u_matrix:new a.UniformMatrix4f(p),u_opacity:new a.Uniform1f(p),u_color:new a.UniformColor(p)}),backgroundPattern:p=>({u_matrix:new a.UniformMatrix4f(p),u_opacity:new a.Uniform1f(p),u_image:new a.Uniform1i(p),u_pattern_tl:new a.Uniform2f(p),u_pattern_br:new a.Uniform2f(p),u_texsize:new a.Uniform2f(p),u_pattern_size:new a.Uniform2f(p),u_pixel_coord_upper:new a.Uniform2f(p),u_pixel_coord_lower:new a.Uniform2f(p),u_tile_units_to_pixels:new a.Uniform1f(p)}),terrainRaster:ld,terrainDepth:ld,skybox:p=>({u_matrix:new a.UniformMatrix4f(p),u_sun_direction:new a.Uniform3f(p),u_cubemap:new a.Uniform1i(p),u_opacity:new a.Uniform1f(p),u_temporal_offset:new a.Uniform1f(p)}),skyboxGradient:p=>({u_matrix:new a.UniformMatrix4f(p),u_color_ramp:new a.Uniform1i(p),u_center_direction:new a.Uniform3f(p),u_radius:new a.Uniform1f(p),u_opacity:new a.Uniform1f(p),u_temporal_offset:new a.Uniform1f(p)}),skyboxCapture:p=>({u_matrix_3f:new a.UniformMatrix3f(p),u_sun_direction:new a.Uniform3f(p),u_sun_intensity:new a.Uniform1f(p),u_color_tint_r:new a.Uniform4f(p),u_color_tint_m:new a.Uniform4f(p),u_luminance:new a.Uniform1f(p)}),globeRaster:p=>({u_proj_matrix:new a.UniformMatrix4f(p),u_globe_matrix:new a.UniformMatrix4f(p),u_normalize_matrix:new a.UniformMatrix4f(p),u_merc_matrix:new a.UniformMatrix4f(p),u_zoom_transition:new a.Uniform1f(p),u_merc_center:new a.Uniform2f(p),u_image0:new a.Uniform1i(p),u_grid_matrix:new a.UniformMatrix3f(p),u_skirt_height:new a.Uniform1f(p),u_frustum_tl:new a.Uniform3f(p),u_frustum_tr:new a.Uniform3f(p),u_frustum_br:new a.Uniform3f(p),u_frustum_bl:new a.Uniform3f(p),u_globe_pos:new a.Uniform3f(p),u_globe_radius:new a.Uniform1f(p),u_viewport:new a.Uniform2f(p)}),globeAtmosphere:p=>({u_frustum_tl:new a.Uniform3f(p),u_frustum_tr:new a.Uniform3f(p),u_frustum_br:new a.Uniform3f(p),u_frustum_bl:new a.Uniform3f(p),u_horizon:new a.Uniform1f(p),u_transition:new a.Uniform1f(p),u_fadeout_range:new a.Uniform1f(p),u_color:new a.Uniform4f(p),u_high_color:new a.Uniform4f(p),u_space_color:new a.Uniform4f(p),u_star_intensity:new a.Uniform1f(p),u_star_density:new a.Uniform1f(p),u_star_size:new a.Uniform1f(p),u_temporal_offset:new a.Uniform1f(p),u_horizon_angle:new a.Uniform1f(p),u_rotation_matrix:new a.UniformMatrix4f(p)})};let Cs;function ny(p,l,h,g,v,w,C){const M=p.context,R=M.gl,z=p.transform,D=p.useProgram("collisionBox"),W=[];let te=0,ie=0;for(let we=0;we<g.length;we++){const Ie=g[we],Ae=l.getTile(Ie),Fe=Ae.getBucket(h);if(!Fe)continue;const He=mf(Ie,Fe,z);let tt=He;v[0]===0&&v[1]===0||(tt=p.translatePosMatrix(He,Ae,v,w));const ot=C?Fe.textCollisionBox:Fe.iconCollisionBox,Ot=Fe.collisionCircleArray;if(Ot.length>0){const Ye=a.create(),xt=tt;a.mul(Ye,Fe.placementInvProjMatrix,z.glCoordMatrix),a.mul(Ye,Ye,Fe.placementViewportMatrix),W.push({circleArray:Ot,circleOffset:ie,transform:xt,invTransform:Ye,projection:Fe.getProjection()}),te+=Ot.length/4,ie=te}ot&&(p.terrain&&p.terrain.setupElevationDraw(Ae,D),D.draw(M,R.LINES,a.DepthMode.disabled,a.StencilMode.disabled,p.colorModeForRenderPass(),a.CullFaceMode.disabled,Qg(tt,z,Ae,Fe.getProjection()),h.id,ot.layoutVertexBuffer,ot.indexBuffer,ot.segments,null,z.zoom,null,[ot.collisionVertexBuffer,ot.collisionVertexBufferExt]))}if(!C||!W.length)return;const ae=p.useProgram("collisionCircle"),le=new a.StructArrayLayout2f1f2i16;le.resize(4*te),le._trim();let de=0;for(const we of W)for(let Ie=0;Ie<we.circleArray.length/4;Ie++){const Ae=4*Ie,Fe=we.circleArray[Ae+0],He=we.circleArray[Ae+1],tt=we.circleArray[Ae+2],ot=we.circleArray[Ae+3];le.emplace(de++,Fe,He,tt,ot,0),le.emplace(de++,Fe,He,tt,ot,1),le.emplace(de++,Fe,He,tt,ot,2),le.emplace(de++,Fe,He,tt,ot,3)}(!Cs||Cs.length<2*te)&&(Cs=function(we){const Ie=2*we,Ae=new a.StructArrayLayout3ui6;Ae.resize(Ie),Ae._trim();for(let Fe=0;Fe<Ie;Fe++){const He=6*Fe;Ae.uint16[He+0]=4*Fe+0,Ae.uint16[He+1]=4*Fe+1,Ae.uint16[He+2]=4*Fe+2,Ae.uint16[He+3]=4*Fe+2,Ae.uint16[He+4]=4*Fe+3,Ae.uint16[He+5]=4*Fe+0}return Ae}(te));const Q=M.createIndexBuffer(Cs,!0),xe=M.createVertexBuffer(le,a.collisionCircleLayout.members,!0);for(const we of W){const Ie={u_matrix:we.transform,u_inv_matrix:we.invTransform,u_camera_to_center_distance:(ye=z).getCameraToCenterDistance(we.projection),u_viewport_size:[ye.width,ye.height]};ae.draw(M,R.TRIANGLES,a.DepthMode.disabled,a.StencilMode.disabled,p.colorModeForRenderPass(),a.CullFaceMode.disabled,Ie,h.id,xe,Q,a.SegmentVector.simpleSegment(0,2*we.circleOffset,we.circleArray.length,we.circleArray.length/2),null,z.zoom)}var ye;xe.destroy(),Q.destroy()}const Of=a.create();function ry({width:p,height:l,anchor:h,textOffset:g,textScale:v},w){const{horizontalAlign:C,verticalAlign:M}=a.getAnchorAlignment(h),R=-(C-.5)*p,z=-(M-.5)*l,D=a.evaluateVariableOffset(h,g);return new a.pointGeometry((R/v+D[0])*w,(z/v+D[1])*w)}function vl(p,l,h,g,v,w,C,M,R,z,D){const W=p.text.placedSymbolArray,te=p.text.dynamicLayoutVertexArray,ie=p.icon.dynamicLayoutVertexArray,ae={},le=p.getProjection(),de=Qu(M,le,w),Q=w.elevation,xe=le.upVectorScale(M.canonical,w.center.lat,w.worldSize).metersToTile;te.clear();for(let ye=0;ye<W.length;ye++){const we=W.get(ye),{tileAnchorX:Ie,tileAnchorY:Ae,numGlyphs:Fe}=we,He=p.allowVerticalPlacement&&!we.placedOrientation,tt=we.hidden||!we.crossTileID||He?null:g[we.crossTileID];if(tt){let ot=0,Ot=0,Ye=0;if(Q){const un=Q?Q.getAtTileOffset(M,Ie,Ae):0,[Dn,on,Xt]=le.upVector(M.canonical,Ie,Ae);ot=un*Dn*xe,Ot=un*on*xe,Ye=un*Xt*xe}let[xt,dt,Tt,rt]=$t(we.projectedAnchorX+ot,we.projectedAnchorY+Ot,we.projectedAnchorZ+Ye,h?de:C);const qe=Gn(w.getCameraToCenterDistance(le),rt);let at=v.evaluateSizeForFeature(p.textSizeData,z,we)*qe/a.ONE_EM;h&&(at*=p.tilePixelRatio/R);const wt=ry(tt,at);h?({x:xt,y:dt,z:Tt}=le.projectTilePoint(Ie+wt.x,Ae+wt.y,M.canonical),[xt,dt,Tt]=$t(xt+ot,dt+Ot,Tt+Ye,C)):(l&&wt._rotate(-w.angle),xt+=wt.x,dt+=wt.y,Tt=0);const kt=p.allowVerticalPlacement&&we.placedOrientation===a.WritingMode.vertical?Math.PI/2:0;for(let un=0;un<Fe;un++)a.addDynamicAttributes(te,xt,dt,Tt,kt);D&&we.associatedIconIndex>=0&&(ae[we.associatedIconIndex]={x:xt,y:dt,z:Tt,angle:kt})}else Cr(Fe,te)}if(D){ie.clear();const ye=p.icon.placedSymbolArray;for(let we=0;we<ye.length;we++){const Ie=ye.get(we),{numGlyphs:Ae}=Ie,Fe=ae[we];if(Ie.hidden||!Fe)Cr(Ae,ie);else{const{x:He,y:tt,z:ot,angle:Ot}=Fe;for(let Ye=0;Ye<Ae;Ye++)a.addDynamicAttributes(ie,He,tt,ot,Ot)}}p.icon.dynamicLayoutVertexBuffer.updateData(ie)}p.text.dynamicLayoutVertexBuffer.updateData(te)}function rx(p,l,h){return h.iconsInText&&l?"symbolTextAndIcon":p?"symbolSDF":"symbolIcon"}function iy(p,l,h,g,v,w,C,M,R,z,D,W){const te=p.context,ie=te.gl,ae=p.transform,le=M==="map",de=R==="map",Q=le&&h.layout.get("symbol-placement")!=="point",xe=le&&!de&&!Q,ye=h.layout.get("symbol-sort-key").constantOr(1)!==void 0;let we=!1;const Ie=p.depthModeForSublayer(0,a.DepthMode.ReadOnly),Ae=[a.mercatorXfromLng(ae.center.lng),a.mercatorYfromLat(ae.center.lat)],Fe=h.layout.get("text-variable-anchor"),He=ae.projection.name==="globe",tt=[],ot=[0,-1,0];let Ot=ot;!He&&!ae.mercatorFromTransition||le||(Ot=function(Ye){const xt=Ye._camera.getWorldToCamera(Ye.worldSize,1),dt=a.multiply([],xt,Ye.globeMatrix);a.invert(dt,dt);const Tt=[0,0,0],rt=[0,1,0,0];return a.transformMat4$1(rt,rt,dt),Tt[0]=rt[0],Tt[1]=rt[1],Tt[2]=rt[2],a.normalize(Tt,Tt),Tt}(ae));for(const Ye of g){const xt=l.getTile(Ye),dt=xt.getBucket(h);if(!dt||dt.projection.name==="mercator"&&He)continue;const Tt=v?dt.text:dt.icon;if(!Tt||dt.fullyClipped||!Tt.segments.get().length)continue;const rt=Tt.programConfigurations.get(h.id),qe=v||dt.sdfIcons,at=v?dt.textSizeData:dt.iconSizeData,wt=de||ae.pitch!==0,kt=a.evaluateSizeForZoom(at,ae.zoom);let un,Dn,on,Xt,dn=[0,0],$n=null;if(v){if(Dn=xt.glyphAtlasTexture,on=ie.LINEAR,un=xt.glyphAtlasTexture.size,dt.iconsInText){dn=xt.imageAtlasTexture.size,$n=xt.imageAtlasTexture;const yo=at.kind==="composite"||at.kind==="camera";Xt=wt||p.options.rotating||p.options.zooming||yo?ie.LINEAR:ie.NEAREST}}else{const yo=h.layout.get("icon-size").constantOr(0)!==1||dt.iconsNeedLinear;Dn=xt.imageAtlasTexture,on=qe||p.options.rotating||p.options.zooming||yo||wt?ie.LINEAR:ie.NEAREST,un=xt.imageAtlasTexture.size}const yn=dt.projection.name==="globe",lr=yn?Ot:ot,ur=yn?a.globeToMercatorTransition(ae.zoom):0,Mr=Qu(Ye,dt.getProjection(),ae),wr=ae.calculatePixelsToTileUnitsMatrix(xt),si=ul(Mr,xt.tileID.canonical,de,le,ae,dt.getProjection(),wr),oo=p.terrain&&de&&Q?a.invert(a.create(),si):Of,Uo=dl(Mr,xt.tileID.canonical,de,le,ae,dt.getProjection(),wr),Ta=Fe&&dt.hasTextData(),Or=h.layout.get("icon-text-fit")!=="none"&&Ta&&dt.hasIconData();if(Q){const yo=ae.elevation,Co=yo?yo.getAtTileOffsetFunc(Ye,ae.center.lat,ae.worldSize,dt.getProjection()):null,Ca=Ng(Mr,xt.tileID.canonical,de,le,ae,dt.getProjection(),wr);ra(dt,Mr,p,v,Ca,Uo,de,z,Co,Ye)}const Sr=Q||v&&Fe||Or,tr=p.translatePosMatrix(Mr,xt,w,C),Hr=Sr?Of:si,Bi=p.translatePosMatrix(Uo,xt,w,C,!0),Pr=dt.getProjection().createInversionMatrix(ae,Ye.canonical),Ni=[];p.terrainRenderModeElevated()&&de&&Ni.push("PITCH_WITH_MAP_TERRAIN"),yn&&Ni.push("PROJECTION_GLOBE_VIEW"),Sr&&Ni.push("PROJECTED_POS_ON_VIEWPORT");const $i=qe&&h.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ka;Ka=qe?dt.iconsInText?Df(at.kind,kt,xe,de,p,tr,Hr,Bi,un,dn,Ye,ur,Ae,Pr,lr,dt.getProjection()):ty(at.kind,kt,xe,de,p,tr,Hr,Bi,v,un,!0,Ye,ur,Ae,Pr,lr,dt.getProjection()):Uc(at.kind,kt,xe,de,p,tr,Hr,Bi,v,un,Ye,ur,Ae,Pr,lr,dt.getProjection());const Rl={program:p.useProgram(rx(qe,v,dt),rt,Ni),buffers:Tt,uniformValues:Ka,atlasTexture:Dn,atlasTextureIcon:$n,atlasInterpolation:on,atlasInterpolationIcon:Xt,isSDF:qe,hasHalo:$i,tile:xt,labelPlaneMatrixInv:oo};if(ye&&dt.canOverlap){we=!0;const yo=Tt.segments.get();for(const Co of yo)tt.push({segments:new a.SegmentVector([Co]),sortKey:Co.sortKey,state:Rl})}else tt.push({segments:Tt.segments,sortKey:0,state:Rl})}we&&tt.sort((Ye,xt)=>Ye.sortKey-xt.sortKey);for(const Ye of tt){const xt=Ye.state;if(p.terrain&&p.terrain.setupElevationDraw(xt.tile,xt.program,{useDepthForOcclusion:!He,labelPlaneMatrixInv:xt.labelPlaneMatrixInv}),te.activeTexture.set(ie.TEXTURE0),xt.atlasTexture.bind(xt.atlasInterpolation,ie.CLAMP_TO_EDGE),xt.atlasTextureIcon&&(te.activeTexture.set(ie.TEXTURE1),xt.atlasTextureIcon&&xt.atlasTextureIcon.bind(xt.atlasInterpolationIcon,ie.CLAMP_TO_EDGE)),xt.isSDF){const dt=xt.uniformValues;xt.hasHalo&&(dt.u_is_halo=1,oy(xt.buffers,Ye.segments,h,p,xt.program,Ie,D,W,dt)),dt.u_is_halo=0}oy(xt.buffers,Ye.segments,h,p,xt.program,Ie,D,W,xt.uniformValues)}}function oy(p,l,h,g,v,w,C,M,R){const z=g.context,D=[p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer,p.globeExtVertexBuffer];v.draw(z,z.gl.TRIANGLES,w,C,M,a.CullFaceMode.disabled,R,h.id,p.layoutVertexBuffer,p.indexBuffer,l,h.paint,g.transform.zoom,p.programConfigurations.get(h.id),D)}function ay(p,l,h,g,v,w,C){const M=p.context.gl,R=h.paint.get("fill-pattern"),z=R&&R.constantOr(1);let D,W,te,ie,ae;C?(W=z&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",D=M.LINES):(W=z?"fillPattern":"fill",D=M.TRIANGLES);for(const le of g){const de=l.getTile(le);if(z&&!de.patternsLoaded())continue;const Q=de.getBucket(h);if(!Q)continue;p.prepareDrawTile();const xe=Q.programConfigurations.get(h.id),ye=p.useProgram(W,xe);z&&(p.context.activeTexture.set(M.TEXTURE0),de.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),xe.updatePaintBuffers());const we=R.constantOr(null);if(we&&de.imageAtlas){const Ae=de.imageAtlas.patternPositions[we.toString()];Ae&&xe.setConstantPatternPositions(Ae)}const Ie=p.translatePosMatrix(le.projMatrix,de,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));if(C){ie=Q.indexBuffer2,ae=Q.segments2;const Ae=p.terrain&&p.terrain.renderingToTexture?p.terrain.drapeBufferSize:[M.drawingBufferWidth,M.drawingBufferHeight];te=W==="fillOutlinePattern"&&z?Yg(Ie,p,de,Ae):Kg(Ie,Ae)}else ie=Q.indexBuffer,ae=Q.segments,te=z?fd(Ie,p,de):hd(Ie);p.prepareDrawProgram(p.context,ye,le.toUnwrapped()),ye.draw(p.context,D,v,p.stencilModeForClipping(le),w,a.CullFaceMode.disabled,te,h.id,Q.layoutVertexBuffer,ie,ae,h.paint,p.transform.zoom,xe)}}function Ff(p,l,h,g,v,w,C){const M=p.context,R=M.gl,z=p.transform,D=h.paint.get("fill-extrusion-pattern"),W=D.constantOr(1),te=h.paint.get("fill-extrusion-opacity"),ie=[h.paint.get("fill-extrusion-ambient-occlusion-intensity"),h.paint.get("fill-extrusion-ambient-occlusion-radius")],ae=h.layout.get("fill-extrusion-edge-radius"),le=z.projection.name==="globe"?a.fillExtrusionHeightLift():0,de=z.projection.name==="globe",Q=de?a.globeToMercatorTransition(z.zoom):0,xe=[a.mercatorXfromLng(z.center.lng),a.mercatorYfromLat(z.center.lat)],ye=[];de&&ye.push("PROJECTION_GLOBE_VIEW"),ie[0]>0&&ye.push("FAUX_AO");for(const we of g){const Ie=l.getTile(we),Ae=Ie.getBucket(h);if(!Ae||Ae.projection.name!==z.projection.name)continue;const Fe=Ae.programConfigurations.get(h.id),He=p.useProgram(W?"fillExtrusionPattern":"fillExtrusion",Fe,ye);if(p.terrain){const Tt=p.terrain;if(p.style.terrainSetForDrapingOnly())Tt.setupElevationDraw(Ie,He,{useMeterToDem:!0});else{if(!Ae.enableTerrain)continue;if(Tt.setupElevationDraw(Ie,He,{useMeterToDem:!0}),ix(M,l,we,Ae,h,Tt),!Ae.centroidVertexBuffer){const rt=He.attributes.a_centroid_pos;rt!==void 0&&R.vertexAttrib2f(rt,0,0)}}}W&&(p.context.activeTexture.set(R.TEXTURE0),Ie.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),Fe.updatePaintBuffers());const tt=D.constantOr(null);if(tt&&Ie.imageAtlas){const Tt=Ie.imageAtlas.patternPositions[tt.toString()];Tt&&Fe.setConstantPatternPositions(Tt)}const ot=p.translatePosMatrix(we.projMatrix,Ie,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),Ot=z.projection.createInversionMatrix(z,we.canonical),Ye=h.paint.get("fill-extrusion-vertical-gradient"),xt=W?kf(ot,p,Ye,te,ie,ae,we,Ie,le,Q,xe,Ot):dd(ot,p,Ye,te,ie,ae,we,le,Q,xe,Ot);p.prepareDrawProgram(M,He,we.toUnwrapped());const dt=[];p.terrain&&dt.push(Ae.centroidVertexBuffer),de&&dt.push(Ae.layoutVertexExtBuffer),He.draw(M,M.gl.TRIANGLES,v,w,C,a.CullFaceMode.backCCW,xt,h.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,h.paint,p.transform.zoom,Fe,dt)}}function ix(p,l,h,g,v,w){const C=[Q=>{let xe=Q.canonical.x-1,ye=Q.wrap;return xe<0&&(xe=(1<<Q.canonical.z)-1,ye--),new a.OverscaledTileID(Q.overscaledZ,ye,Q.canonical.z,xe,Q.canonical.y)},Q=>{let xe=Q.canonical.x+1,ye=Q.wrap;return xe===1<<Q.canonical.z&&(xe=0,ye++),new a.OverscaledTileID(Q.overscaledZ,ye,Q.canonical.z,xe,Q.canonical.y)},Q=>new a.OverscaledTileID(Q.overscaledZ,Q.wrap,Q.canonical.z,Q.canonical.x,(Q.canonical.y===0?1<<Q.canonical.z:Q.canonical.y)-1),Q=>new a.OverscaledTileID(Q.overscaledZ,Q.wrap,Q.canonical.z,Q.canonical.x,Q.canonical.y===(1<<Q.canonical.z)-1?0:Q.canonical.y+1)],M=Q=>{const xe=l.getSource().minzoom,ye=Ie=>{const Ae=l.getTileByID(Ie);if(Ae&&Ae.hasData())return Ae.getBucket(v)},we=[0,-1,1];for(const Ie of we){if(Q.overscaledZ+Ie<xe)continue;const Ae=ye(Q.calculateScaledKey(Q.overscaledZ+Ie));if(Ae)return Ae}},R=[0,0,0],z=(Q,xe)=>(R[0]=Math.min(Q.min.y,xe.min.y),R[1]=Math.max(Q.max.y,xe.max.y),R[2]=a.EXTENT-xe.min.x>Q.max.x?xe.min.x-a.EXTENT:Q.max.x,R),D=(Q,xe)=>(R[0]=Math.min(Q.min.x,xe.min.x),R[1]=Math.max(Q.max.x,xe.max.x),R[2]=a.EXTENT-xe.min.y>Q.max.y?xe.min.y-a.EXTENT:Q.max.y,R),W=[(Q,xe)=>z(Q,xe),(Q,xe)=>z(xe,Q),(Q,xe)=>D(Q,xe),(Q,xe)=>D(xe,Q)],te=new a.pointGeometry(0,0);let ie,ae,le;const de=(Q,xe,ye,we,Ie)=>{const Ae=[[we?ye:Q,we?Q:ye,0],[we?ye:xe,we?xe:ye,0]],Fe=Ie<0?a.EXTENT+Ie:Ie,He=[we?Fe:(Q+xe)/2,we?(Q+xe)/2:Fe,0];return ye===0&&Ie<0||ye!==0&&Ie>0?w.getForTilePoints(le,[He],!0,ae):Ae.push(He),w.getForTilePoints(h,Ae,!0,ie),Math.max(Ae[0][2],Ae[1][2],He[2])/w.exaggeration()};for(let Q=0;Q<4;Q++){const xe=(Q<2?1:5)-Q,ye=g.borders[Q];if(ye.length===0)continue;const we=le=C[Q](h),Ie=M(we);if(!(Ie&&Ie instanceof a.FillExtrusionBucket&&Ie.enableTerrain)||g.borderDoneWithNeighborZ[Q]===Ie.canonical.z&&Ie.borderDoneWithNeighborZ[xe]===g.canonical.z||(ae=w.findDEMTileFor(we),!ae||!ae.dem))continue;if(!ie){const tt=w.findDEMTileFor(h);if(!tt||!tt.dem)return;ie=tt}const Ae=Ie.borders[xe];let Fe=0;const He=Ie.borderDoneWithNeighborZ[xe]!==g.canonical.z;if(g.canonical.z===Ie.canonical.z){for(let tt=0;tt<ye.length;tt++){const ot=g.featuresOnBorder[ye[tt]],Ot=ot.borders[Q];let Ye;for(;Fe<Ae.length&&(Ye=Ie.featuresOnBorder[Ae[Fe]],!(Ye.borders[xe][1]>Ot[0]+3));)He&&Ie.encodeCentroid(void 0,Ye,!1),Fe++;if(Ye&&Fe<Ae.length){const xt=Fe;let dt=0;for(;!(Ye.borders[xe][0]>Ot[1]-3)&&(dt++,++Fe!==Ae.length);)Ye=Ie.featuresOnBorder[Ae[Fe]];if(Ye=Ie.featuresOnBorder[Ae[xt]],ot.intersectsCount()>1||Ye.intersectsCount()>1||dt!==1){dt!==1&&(Fe=xt),g.encodeCentroid(void 0,ot,!1),He&&Ie.encodeCentroid(void 0,Ye,!1);continue}const Tt=W[Q](ot,Ye),rt=Q%2?a.EXTENT-1:0;te.x=de(Tt[0],Math.min(a.EXTENT-1,Tt[1]),rt,Q<2,Tt[2]),te.y=0,g.encodeCentroid(te,ot,!1),He&&Ie.encodeCentroid(te,Ye,!1)}else g.encodeCentroid(void 0,ot,!1)}g.borderDoneWithNeighborZ[Q]=Ie.canonical.z,g.needsCentroidUpdate=!0,He&&(Ie.borderDoneWithNeighborZ[xe]=g.canonical.z,Ie.needsCentroidUpdate=!0)}else{for(const tt of ye)g.encodeCentroid(void 0,g.featuresOnBorder[tt],!1);if(He){for(const tt of Ae)Ie.encodeCentroid(void 0,Ie.featuresOnBorder[tt],!1);Ie.borderDoneWithNeighborZ[xe]=g.canonical.z,Ie.needsCentroidUpdate=!0}g.borderDoneWithNeighborZ[Q]=Ie.canonical.z,g.needsCentroidUpdate=!0}}(g.needsCentroidUpdate||!g.centroidVertexBuffer&&g.centroidVertexArray.length!==0)&&g.uploadCentroid(p)}const Bf=new a.Color(1,0,0,1),Nf=new a.Color(0,1,0,1),sy=new a.Color(0,0,1,1),ly=new a.Color(1,0,1,1),cy=new a.Color(0,1,1,1);function $f(p,l,h){const g=p.context,v=p.transform,w=g.gl,C=v.projection.name==="globe",M=C?["PROJECTION_GLOBE_VIEW"]:null;let R=h.projMatrix;if(C&&a.globeToMercatorTransition(v.zoom)>0){const ot=a.transitionTileAABBinECEF(h.canonical,v),Ot=a.globeDenormalizeECEF(ot);R=a.multiply(new Float32Array(16),v.globeMatrix,Ot),a.multiply(R,v.projMatrix,R)}const z=p.useProgram("debug",null,M),D=l.getTileByID(h.key);p.terrain&&p.terrain.setupElevationDraw(D,z);const W=a.DepthMode.disabled,te=a.StencilMode.disabled,ie=p.colorModeForRenderPass(),ae="$debug";g.activeTexture.set(w.TEXTURE0),p.emptyTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE),C?D._makeGlobeTileDebugBuffers(p.context,v):D._makeDebugTileBoundsBuffers(p.context,v.projection);const le=D._tileDebugBuffer||p.debugBuffer,de=D._tileDebugIndexBuffer||p.debugIndexBuffer,Q=D._tileDebugSegments||p.debugSegments;z.draw(g,w.LINE_STRIP,W,te,ie,a.CullFaceMode.disabled,$c(R,a.Color.red),ae,le,de,Q,null,null,null,[D._globeTileDebugBorderBuffer]);const xe=D.latestRawTileData,ye=Math.floor((xe&&xe.byteLength||0)/1024),we=l.getTile(h).tileSize,Ie=512/Math.min(we,512)*(h.overscaledZ/v.zoom)*.5;let Ae=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(Ae+=` => ${h.overscaledZ}`),Ae+=` ${ye}kb`,function(ot,Ot){ot.initDebugOverlayCanvas();const Ye=ot.debugOverlayCanvas,xt=ot.context.gl,dt=ot.debugOverlayCanvas.getContext("2d");dt.clearRect(0,0,Ye.width,Ye.height),dt.shadowColor="white",dt.shadowBlur=2,dt.lineWidth=1.5,dt.strokeStyle="white",dt.textBaseline="top",dt.font="bold 36px Open Sans, sans-serif",dt.fillText(Ot,5,5),dt.strokeText(Ot,5,5),ot.debugOverlayTexture.update(Ye),ot.debugOverlayTexture.bind(xt.LINEAR,xt.CLAMP_TO_EDGE)}(p,Ae);const Fe=D._tileDebugTextBuffer||p.debugBuffer,He=D._tileDebugTextIndexBuffer||p.quadTriangleIndexBuffer,tt=D._tileDebugTextSegments||p.debugSegments;z.draw(g,w.TRIANGLES,W,te,a.ColorMode.alphaBlended,a.CullFaceMode.disabled,$c(R,a.Color.transparent,Ie),ae,Fe,He,tt,null,null,null,[D._globeTileDebugTextBuffer])}function Xa(p,l,h,g){Vc(p,0,l+h/2,p.transform.width,h,g)}function xl(p,l,h,g){Vc(p,l-h/2,0,h,p.transform.height,g)}function Vc(p,l,h,g,v,w){const C=p.context,M=C.gl;M.enable(M.SCISSOR_TEST),M.scissor(l*a.exported.devicePixelRatio,h*a.exported.devicePixelRatio,g*a.exported.devicePixelRatio,v*a.exported.devicePixelRatio),C.clear({color:w}),M.disable(M.SCISSOR_TEST)}const bl=a.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:wl}=bl;function Sa(p,l,h,g){p.emplaceBack(l,h,g)}class gd{constructor(l){this.vertexArray=new a.StructArrayLayout3f12,this.indices=new a.StructArrayLayout3ui6,Sa(this.vertexArray,-1,-1,1),Sa(this.vertexArray,1,-1,1),Sa(this.vertexArray,-1,1,1),Sa(this.vertexArray,1,1,1),Sa(this.vertexArray,-1,-1,-1),Sa(this.vertexArray,1,-1,-1),Sa(this.vertexArray,-1,1,-1),Sa(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=l.createVertexBuffer(this.vertexArray,wl),this.indexBuffer=l.createIndexBuffer(this.indices),this.segment=a.SegmentVector.simpleSegment(0,0,36,12)}}function Hn(p,l,h,g,v,w){const C=p.gl,M=l.paint.get("sky-atmosphere-color"),R=l.paint.get("sky-atmosphere-halo-color"),z=l.paint.get("sky-atmosphere-sun-intensity"),D=((W,te,ie,ae,le)=>({u_matrix_3f:W,u_sun_direction:te,u_sun_intensity:ie,u_color_tint_r:[ae.r,ae.g,ae.b,ae.a],u_color_tint_m:[le.r,le.g,le.b,le.a],u_luminance:5e-5}))(a.fromMat4(a.create$1(),g),v,z,M,R);C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_CUBE_MAP_POSITIVE_X+w,l.skyboxTexture,0),h.draw(p,C.TRIANGLES,a.DepthMode.disabled,a.StencilMode.disabled,a.ColorMode.unblended,a.CullFaceMode.frontCW,D,"skyboxCapture",l.skyboxGeometry.vertexBuffer,l.skyboxGeometry.indexBuffer,l.skyboxGeometry.segment)}const yd=a.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class ox{constructor(l){const h=new a.StructArrayLayout5f20;h.emplaceBack(-1,1,1,0,0),h.emplaceBack(1,1,1,1,0),h.emplaceBack(1,-1,1,1,1),h.emplaceBack(-1,-1,1,0,1);const g=new a.StructArrayLayout3ui6;g.emplaceBack(0,1,2),g.emplaceBack(2,3,0),this.vertexBuffer=l.createVertexBuffer(h,yd.members),this.indexBuffer=l.createIndexBuffer(g),this.segments=a.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Uf={symbol:function(p,l,h,g,v){if(p.renderPass!=="translucent")return;const w=a.StencilMode.disabled,C=p.colorModeForRenderPass();h.layout.get("text-variable-anchor")&&function(M,R,z,D,W,te,ie){const ae=R.transform,le=W==="map",de=te==="map";for(const Q of M){const xe=D.getTile(Q),ye=xe.getBucket(z);if(!ye||!ye.text||!ye.text.segments.get().length)continue;const we=a.evaluateSizeForZoom(ye.textSizeData,ae.zoom),Ie=Qu(Q,ye.getProjection(),ae),Ae=ae.calculatePixelsToTileUnitsMatrix(xe),Fe=ul(Ie,xe.tileID.canonical,de,le,ae,ye.getProjection(),Ae),He=z.layout.get("icon-text-fit")!=="none"&&ye.hasIconData();if(we){const tt=Math.pow(2,ae.zoom-xe.tileID.overscaledZ);vl(ye,le,de,ie,a.symbolSize,ae,Fe,Q,tt,we,He)}}}(g,p,h,l,h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),v),h.paint.get("icon-opacity").constantOr(1)!==0&&iy(p,l,h,g,!1,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),h.layout.get("icon-rotation-alignment"),h.layout.get("icon-pitch-alignment"),h.layout.get("icon-keep-upright"),w,C),h.paint.get("text-opacity").constantOr(1)!==0&&iy(p,l,h,g,!0,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),h.layout.get("text-keep-upright"),w,C),l.map.showCollisionBoxes&&(ny(p,l,h,g,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),!0),ny(p,l,h,g,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),!1))},circle:function(p,l,h,g){if(p.renderPass!=="translucent")return;const v=h.paint.get("circle-opacity"),w=h.paint.get("circle-stroke-width"),C=h.paint.get("circle-stroke-opacity"),M=h.layout.get("circle-sort-key").constantOr(1)!==void 0;if(v.constantOr(1)===0&&(w.constantOr(1)===0||C.constantOr(1)===0))return;const R=p.context,z=R.gl,D=p.transform,W=p.depthModeForSublayer(0,a.DepthMode.ReadOnly),te=a.StencilMode.disabled,ie=p.colorModeForRenderPass(),ae=D.projection.name==="globe",le=[a.mercatorXfromLng(D.center.lng),a.mercatorYfromLat(D.center.lat)],de=[];for(let xe=0;xe<g.length;xe++){const ye=g[xe],we=l.getTile(ye),Ie=we.getBucket(h);if(!Ie||Ie.projection.name!==D.projection.name)continue;const Ae=Ie.programConfigurations.get(h.id),Fe=Nc(h);ae&&Fe.push("PROJECTION_GLOBE_VIEW");const He=p.useProgram("circle",Ae,Fe),tt=Ie.layoutVertexBuffer,ot=Ie.globeExtVertexBuffer,Ot=Ie.indexBuffer,Ye=D.projection.createInversionMatrix(D,ye.canonical),xt={programConfiguration:Ae,program:He,layoutVertexBuffer:tt,globeExtVertexBuffer:ot,indexBuffer:Ot,uniformValues:Bc(p,ye,we,Ye,le,h),tile:we};if(M){const dt=Ie.segments.get();for(const Tt of dt)de.push({segments:new a.SegmentVector([Tt]),sortKey:Tt.sortKey,state:xt})}else de.push({segments:Ie.segments,sortKey:0,state:xt})}M&&de.sort((xe,ye)=>xe.sortKey-ye.sortKey);const Q={useDepthForOcclusion:!ae};for(const xe of de){const{programConfiguration:ye,program:we,layoutVertexBuffer:Ie,globeExtVertexBuffer:Ae,indexBuffer:Fe,uniformValues:He,tile:tt}=xe.state,ot=xe.segments;p.terrain&&p.terrain.setupElevationDraw(tt,we,Q),p.prepareDrawProgram(R,we,tt.tileID.toUnwrapped()),we.draw(R,z.TRIANGLES,W,te,ie,a.CullFaceMode.disabled,He,h.id,Ie,Fe,ot,h.paint,D.zoom,ye,[Ae])}},heatmap:function(p,l,h,g){if(h.paint.get("heatmap-opacity")!==0)if(p.renderPass==="offscreen"){const v=p.context,w=v.gl,C=a.StencilMode.disabled,M=new a.ColorMode([w.ONE,w.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(ie,ae,le,de){const Q=ie.gl,xe=ae.width*de,ye=ae.height*de;ie.activeTexture.set(Q.TEXTURE1),ie.viewport.set([0,0,xe,ye]);let we=le.heatmapFbo;if(!we||we&&(we.width!==xe||we.height!==ye)){we&&we.destroy();const Ie=Q.createTexture();Q.bindTexture(Q.TEXTURE_2D,Ie),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_S,Q.CLAMP_TO_EDGE),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_T,Q.CLAMP_TO_EDGE),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MIN_FILTER,Q.LINEAR),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MAG_FILTER,Q.LINEAR),we=le.heatmapFbo=ie.createFramebuffer(xe,ye,!1),function(Ae,Fe,He,tt,ot,Ot){const Ye=Ae.gl;Ye.texImage2D(Ye.TEXTURE_2D,0,Ae.isWebGL2&&Ae.extRenderToTextureHalfFloat?Ye.RGBA16F:Ye.RGBA,ot,Ot,0,Ye.RGBA,Ae.extRenderToTextureHalfFloat?Ae.isWebGL2?Ye.HALF_FLOAT:Ae.extTextureHalfFloat.HALF_FLOAT_OES:Ye.UNSIGNED_BYTE,null),tt.colorAttachment.set(He)}(ie,0,Ie,we,xe,ye)}else Q.bindTexture(Q.TEXTURE_2D,we.colorAttachment.get()),ie.bindFramebuffer.set(we.framebuffer)})(v,p,h,p.transform.projection.name==="globe"?.5:.25),v.clear({color:a.Color.transparent});const R=p.transform,z=R.projection.name==="globe",D=z?["PROJECTION_GLOBE_VIEW"]:null,W=z?a.CullFaceMode.frontCCW:a.CullFaceMode.disabled,te=[a.mercatorXfromLng(R.center.lng),a.mercatorYfromLat(R.center.lat)];for(let ie=0;ie<g.length;ie++){const ae=g[ie];if(l.hasRenderableParent(ae))continue;const le=l.getTile(ae),de=le.getBucket(h);if(!de||de.projection.name!==R.projection.name)continue;const Q=de.programConfigurations.get(h.id),xe=p.useProgram("heatmap",Q,D),{zoom:ye}=p.transform;p.terrain&&p.terrain.setupElevationDraw(le,xe),p.prepareDrawProgram(v,xe,ae.toUnwrapped());const we=R.projection.createInversionMatrix(R,ae.canonical);xe.draw(v,w.TRIANGLES,a.DepthMode.disabled,C,M,W,ia(p,ae,le,we,te,ye,h.paint.get("heatmap-intensity")),h.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,h.paint,p.transform.zoom,Q,z?[de.globeExtVertexBuffer]:null)}v.viewport.set([0,0,p.width,p.height])}else p.renderPass==="translucent"&&(p.context.setColorMode(p.colorModeForRenderPass()),function(v,w){const C=v.context,M=C.gl,R=w.heatmapFbo;if(!R)return;C.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,R.colorAttachment.get()),C.activeTexture.set(M.TEXTURE1);let z=w.colorRampTexture;z||(z=w.colorRampTexture=new a.Texture(C,w.colorRamp,M.RGBA)),z.bind(M.LINEAR,M.CLAMP_TO_EDGE),v.useProgram("heatmapTexture").draw(C,M.TRIANGLES,a.DepthMode.disabled,a.StencilMode.disabled,v.colorModeForRenderPass(),a.CullFaceMode.disabled,((D,W,te,ie)=>({u_image:0,u_color_ramp:1,u_opacity:W.paint.get("heatmap-opacity")}))(0,w),w.id,v.viewportBuffer,v.quadTriangleIndexBuffer,v.viewportSegments,w.paint,v.transform.zoom)}(p,h))},line:function(p,l,h,g){if(p.renderPass!=="translucent")return;const v=h.paint.get("line-opacity"),w=h.paint.get("line-width");if(v.constantOr(1)===0||w.constantOr(1)===0)return;const C=p.depthModeForSublayer(0,a.DepthMode.ReadOnly),M=p.colorModeForRenderPass(),R=p.terrain&&p.terrain.renderingToTexture?1:a.exported.devicePixelRatio,z=h.paint.get("line-dasharray"),D=z.constantOr(1),W=h.layout.get("line-cap"),te=h.paint.get("line-pattern"),ie=te.constantOr(1),ae=h.paint.get("line-gradient"),le=ie?"linePattern":"line",de=p.context,Q=de.gl,xe=(we=>{const Ie=[];md(we)&&Ie.push("RENDER_LINE_DASH"),we.paint.get("line-gradient")&&Ie.push("RENDER_LINE_GRADIENT");const Ae=we.paint.get("line-trim-offset");Ae[0]===0&&Ae[1]===0||Ie.push("RENDER_LINE_TRIM_OFFSET");const Fe=we.paint.get("line-pattern").constantOr(1),He=we.paint.get("line-opacity").constantOr(1)!==1;return!Fe&&He&&Ie.push("RENDER_LINE_ALPHA_DISCARD"),Ie})(h);let ye=xe.includes("RENDER_LINE_ALPHA_DISCARD");p.terrain&&p.terrain.clipOrMaskOverlapStencilType()&&(ye=!1);for(const we of g){const Ie=l.getTile(we);if(ie&&!Ie.patternsLoaded())continue;const Ae=Ie.getBucket(h);if(!Ae)continue;p.prepareDrawTile();const Fe=Ae.programConfigurations.get(h.id),He=p.useProgram(le,Fe,xe),tt=te.constantOr(null);if(tt&&Ie.imageAtlas){const qe=Ie.imageAtlas.patternPositions[tt.toString()];qe&&Fe.setConstantPatternPositions(qe)}const ot=z.constantOr(null),Ot=W.constantOr(null);if(!ie&&ot&&Ot&&Ie.lineAtlas){const qe=Ie.lineAtlas.getDash(ot,Ot);qe&&Fe.setConstantPatternPositions(qe)}let[Ye,xt]=h.paint.get("line-trim-offset");(Ot==="round"||Ot==="square")&&Ye!==xt&&(Ye===0&&(Ye-=1),xt===1&&(xt+=1));const dt=p.terrain?we.projMatrix:null,Tt=ie?Jg(p,Ie,h,dt,R):If(p,Ie,h,dt,Ae.lineClipsArray.length,R,[Ye,xt]);if(ae){const qe=Ae.gradients[h.id];let at=qe.texture;if(h.gradientVersion!==qe.version){let wt=256;if(h.stepInterpolant){const kt=l.getSource().maxzoom,un=we.canonical.z===kt?Math.ceil(1<<p.transform.maxZoom-we.canonical.z):1;wt=a.clamp(a.nextPowerOfTwo(Ae.maxLineLength/a.EXTENT*1024*un),256,de.maxTextureSize)}qe.gradient=a.renderColorRamp({expression:h.gradientExpression(),evaluationKey:"lineProgress",resolution:wt,image:qe.gradient||void 0,clips:Ae.lineClipsArray}),qe.texture?qe.texture.update(qe.gradient):qe.texture=new a.Texture(de,qe.gradient,Q.RGBA),qe.version=h.gradientVersion,at=qe.texture}de.activeTexture.set(Q.TEXTURE1),at.bind(h.stepInterpolant?Q.NEAREST:Q.LINEAR,Q.CLAMP_TO_EDGE)}D&&(de.activeTexture.set(Q.TEXTURE0),Ie.lineAtlasTexture.bind(Q.LINEAR,Q.REPEAT),Fe.updatePaintBuffers()),ie&&(de.activeTexture.set(Q.TEXTURE0),Ie.imageAtlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),Fe.updatePaintBuffers()),p.prepareDrawProgram(de,He,we.toUnwrapped());const rt=qe=>{He.draw(de,Q.TRIANGLES,C,qe,M,a.CullFaceMode.disabled,Tt,h.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,h.paint,p.transform.zoom,Fe,[Ae.layoutVertexBuffer2])};if(ye){const qe=p.stencilModeForClipping(we).ref;qe===0&&p.terrain&&de.clear({stencil:0});const at={func:Q.EQUAL,mask:255};Tt.u_alpha_discard_threshold=.8,rt(new a.StencilMode(at,qe,255,Q.KEEP,Q.KEEP,Q.INVERT)),Tt.u_alpha_discard_threshold=0,rt(new a.StencilMode(at,qe,255,Q.KEEP,Q.KEEP,Q.KEEP))}else rt(p.stencilModeForClipping(we))}ye&&(p.resetStencilClippingMasks(),p.terrain&&de.clear({stencil:0}))},fill:function(p,l,h,g){const v=h.paint.get("fill-color"),w=h.paint.get("fill-opacity");if(w.constantOr(1)===0)return;const C=p.colorModeForRenderPass(),M=h.paint.get("fill-pattern"),R=p.opaquePassEnabledForLayer()&&!M.constantOr(1)&&v.constantOr(a.Color.transparent).a===1&&w.constantOr(0)===1?"opaque":"translucent";if(p.renderPass===R){const z=p.depthModeForSublayer(1,p.renderPass==="opaque"?a.DepthMode.ReadWrite:a.DepthMode.ReadOnly);ay(p,l,h,g,z,C,!1)}if(p.renderPass==="translucent"&&h.paint.get("fill-antialias")){const z=p.depthModeForSublayer(h.getPaintProperty("fill-outline-color")?2:0,a.DepthMode.ReadOnly);ay(p,l,h,g,z,C,!0)}},"fill-extrusion":function(p,l,h,g){const v=h.paint.get("fill-extrusion-opacity");if(v!==0&&p.renderPass==="translucent"){const w=new a.DepthMode(p.context.gl.LEQUAL,a.DepthMode.ReadWrite,p.depthRangeFor3D);if(v!==1||h.paint.get("fill-extrusion-pattern").constantOr(1))Ff(p,l,h,g,w,a.StencilMode.disabled,a.ColorMode.disabled),Ff(p,l,h,g,w,p.stencilModeFor3D(),p.colorModeForRenderPass()),p.resetStencilClippingMasks();else{const C=p.colorModeForRenderPass();Ff(p,l,h,g,w,a.StencilMode.disabled,C)}}},hillshade:function(p,l,h,g){if(p.renderPass!=="offscreen"&&p.renderPass!=="translucent")return;const v=p.context,w=p.depthModeForSublayer(0,a.DepthMode.ReadOnly),C=p.colorModeForRenderPass(),M=p.terrain&&p.terrain.renderingToTexture,[R,z]=p.renderPass!=="translucent"||M?[{},g]:p.stencilConfigForOverlap(g);for(const D of z){const W=l.getTile(D);if(W.needsHillshadePrepare&&p.renderPass==="offscreen")sd(p,W,h,w,a.StencilMode.disabled,C);else if(p.renderPass==="translucent"){const te=M&&p.terrain?p.terrain.stencilModeForRTTOverlap(D):R[D.overscaledZ];zc(p,D,W,h,w,te,C)}}v.viewport.set([0,0,p.width,p.height]),p.resetStencilClippingMasks()},raster:function(p,l,h,g,v,w){if(p.renderPass!=="translucent"||h.paint.get("raster-opacity")===0||!g.length)return;const C=p.context,M=C.gl,R=l.getSource(),z=p.useProgram("raster"),D=p.colorModeForRenderPass(),W=p.terrain&&p.terrain.renderingToTexture,[te,ie]=R instanceof Pe||W?[{},g]:p.stencilConfigForOverlap(g),ae=ie[ie.length-1].overscaledZ,le=!p.options.moving;for(const de of ie){const Q=W?a.DepthMode.disabled:p.depthModeForSublayer(de.overscaledZ-ae,h.paint.get("raster-opacity")===1?a.DepthMode.ReadWrite:a.DepthMode.ReadOnly,M.LESS),xe=de.toUnwrapped(),ye=l.getTile(de);if(W&&(!ye||!ye.hasData()))continue;const we=W?de.projMatrix:p.transform.calculateProjMatrix(xe,le),Ie=p.terrain&&W?p.terrain.stencilModeForRTTOverlap(de):te[de.overscaledZ],Ae=w?0:h.paint.get("raster-fade-duration");ye.registerFadeDuration(Ae);const Fe=l.findLoadedParent(de,0),He=Fc(ye,Fe,l,p.transform,Ae);let tt,ot;p.terrain&&p.terrain.prepareDrawTile();const Ot=h.paint.get("raster-resampling")==="nearest"?M.NEAREST:M.LINEAR;C.activeTexture.set(M.TEXTURE0),ye.texture.bind(Ot,M.CLAMP_TO_EDGE),C.activeTexture.set(M.TEXTURE1),Fe?(Fe.texture.bind(Ot,M.CLAMP_TO_EDGE),tt=Math.pow(2,Fe.tileID.overscaledZ-ye.tileID.overscaledZ),ot=[ye.tileID.canonical.x*tt%1,ye.tileID.canonical.y*tt%1]):ye.texture.bind(Ot,M.CLAMP_TO_EDGE),ye.texture.useMipmap&&C.extTextureFilterAnisotropic&&p.transform.pitch>20&&M.texParameterf(M.TEXTURE_2D,C.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,C.extTextureFilterAnisotropicMax);const Ye=ex(we,ot||[0,0],tt||1,He,h,R instanceof Pe?R.perspectiveTransform:[0,0]);if(p.prepareDrawProgram(C,z,xe),R instanceof Pe)R.boundsBuffer&&R.boundsSegments&&z.draw(C,M.TRIANGLES,Q,a.StencilMode.disabled,D,a.CullFaceMode.disabled,Ye,h.id,R.boundsBuffer,p.quadTriangleIndexBuffer,R.boundsSegments);else{const{tileBoundsBuffer:xt,tileBoundsIndexBuffer:dt,tileBoundsSegments:Tt}=p.getTileBoundsBuffers(ye);z.draw(C,M.TRIANGLES,Q,Ie,D,a.CullFaceMode.disabled,Ye,h.id,xt,dt,Tt)}}p.resetStencilClippingMasks()},background:function(p,l,h,g){const v=h.paint.get("background-color"),w=h.paint.get("background-opacity");if(w===0)return;const C=p.context,M=C.gl,R=p.transform,z=R.tileSize,D=h.paint.get("background-pattern");if(p.isPatternMissing(D))return;const W=!D&&v.a===1&&w===1&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass!==W)return;const te=a.StencilMode.disabled,ie=p.depthModeForSublayer(0,W==="opaque"?a.DepthMode.ReadWrite:a.DepthMode.ReadOnly),ae=p.colorModeForRenderPass(),le=p.useProgram(D?"backgroundPattern":"background");let de,Q=g;Q||(de=p.getBackgroundTiles(),Q=Object.values(de).map(xe=>xe.tileID)),D&&(C.activeTexture.set(M.TEXTURE0),p.imageManager.bind(p.context));for(const xe of Q){const ye=xe.toUnwrapped(),we=g?xe.projMatrix:p.transform.calculateProjMatrix(ye);p.prepareDrawTile();const Ie=l?l.getTile(xe):de?de[xe.key]:new a.Tile(xe,z,R.zoom,p),Ae=D?zf(we,w,p,D,{tileID:xe,tileSize:z}):tx(we,w,v);p.prepareDrawProgram(C,le,ye);const{tileBoundsBuffer:Fe,tileBoundsIndexBuffer:He,tileBoundsSegments:tt}=p.getTileBoundsBuffers(Ie);le.draw(C,M.TRIANGLES,ie,te,ae,a.CullFaceMode.disabled,Ae,h.id,Fe,He,tt)}},sky:function(p,l,h){const g=p.transform,v=g.projection.name==="mercator"||g.projection.name==="globe"?1:a.smoothstep(7,8,g.zoom),w=h.paint.get("sky-opacity")*v;if(w===0)return;const C=p.context,M=h.paint.get("sky-type"),R=new a.DepthMode(C.gl.LEQUAL,a.DepthMode.ReadOnly,[0,1]),z=p.frameCounter/1e3%1;M==="atmosphere"?p.renderPass==="offscreen"?h.needsSkyboxCapture(p)&&(function(D,W,te,ie){const ae=D.context,le=ae.gl;let de=W.skyboxFbo;if(!de){de=W.skyboxFbo=ae.createFramebuffer(32,32,!1),W.skyboxGeometry=new gd(ae),W.skyboxTexture=ae.gl.createTexture(),le.bindTexture(le.TEXTURE_CUBE_MAP,W.skyboxTexture),le.texParameteri(le.TEXTURE_CUBE_MAP,le.TEXTURE_WRAP_S,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_CUBE_MAP,le.TEXTURE_WRAP_T,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_CUBE_MAP,le.TEXTURE_MIN_FILTER,le.LINEAR),le.texParameteri(le.TEXTURE_CUBE_MAP,le.TEXTURE_MAG_FILTER,le.LINEAR);for(let we=0;we<6;++we)le.texImage2D(le.TEXTURE_CUBE_MAP_POSITIVE_X+we,0,le.RGBA,32,32,0,le.RGBA,le.UNSIGNED_BYTE,null)}ae.bindFramebuffer.set(de.framebuffer),ae.viewport.set([0,0,32,32]);const Q=W.getCenter(D,!0),xe=D.useProgram("skyboxCapture"),ye=new Float64Array(16);a.identity(ye),a.rotateY(ye,ye,.5*-Math.PI),Hn(ae,W,xe,ye,Q,0),a.identity(ye),a.rotateY(ye,ye,.5*Math.PI),Hn(ae,W,xe,ye,Q,1),a.identity(ye),a.rotateX(ye,ye,.5*-Math.PI),Hn(ae,W,xe,ye,Q,2),a.identity(ye),a.rotateX(ye,ye,.5*Math.PI),Hn(ae,W,xe,ye,Q,3),a.identity(ye),Hn(ae,W,xe,ye,Q,4),a.identity(ye),a.rotateY(ye,ye,Math.PI),Hn(ae,W,xe,ye,Q,5),ae.viewport.set([0,0,D.width,D.height])}(p,h),h.markSkyboxValid(p)):p.renderPass==="sky"&&function(D,W,te,ie,ae){const le=D.context,de=le.gl,Q=D.transform,xe=D.useProgram("skybox");le.activeTexture.set(de.TEXTURE0),de.bindTexture(de.TEXTURE_CUBE_MAP,W.skyboxTexture);const ye=((we,Ie,Ae,Fe,He)=>({u_matrix:we,u_sun_direction:Ie,u_cubemap:0,u_opacity:Fe,u_temporal_offset:He}))(Q.skyboxMatrix,W.getCenter(D,!1),0,ie,ae);D.prepareDrawProgram(le,xe),xe.draw(le,de.TRIANGLES,te,a.StencilMode.disabled,D.colorModeForRenderPass(),a.CullFaceMode.backCW,ye,"skybox",W.skyboxGeometry.vertexBuffer,W.skyboxGeometry.indexBuffer,W.skyboxGeometry.segment)}(p,h,R,w,z):M==="gradient"&&p.renderPass==="sky"&&function(D,W,te,ie,ae){const le=D.context,de=le.gl,Q=D.transform,xe=D.useProgram("skyboxGradient");W.skyboxGeometry||(W.skyboxGeometry=new gd(le)),le.activeTexture.set(de.TEXTURE0);let ye=W.colorRampTexture;ye||(ye=W.colorRampTexture=new a.Texture(le,W.colorRamp,de.RGBA)),ye.bind(de.LINEAR,de.CLAMP_TO_EDGE);const we=((Ie,Ae,Fe,He,tt)=>({u_matrix:Ie,u_color_ramp:0,u_center_direction:Ae,u_radius:a.degToRad(Fe),u_opacity:He,u_temporal_offset:tt}))(Q.skyboxMatrix,W.getCenter(D,!1),W.paint.get("sky-gradient-radius"),ie,ae);D.prepareDrawProgram(le,xe),xe.draw(le,de.TRIANGLES,te,a.StencilMode.disabled,D.colorModeForRenderPass(),a.CullFaceMode.backCW,we,"skyboxGradient",W.skyboxGeometry.vertexBuffer,W.skyboxGeometry.indexBuffer,W.skyboxGeometry.segment)}(p,h,R,w,z)},debug:function(p,l,h){for(let g=0;g<h.length;g++)$f(p,l,h[g])},custom:function(p,l,h,g){const v=p.context,w=h.implementation;if(!p.transform.projection.unsupportedLayers||!p.transform.projection.unsupportedLayers.includes("custom")||p.terrain&&(p.terrain.renderingToTexture||p.renderPass==="offscreen")&&h.isLayerDraped()){if(p.renderPass==="offscreen"){const C=w.prerender;if(C){if(p.setCustomLayerDefaults(),v.setColorMode(p.colorModeForRenderPass()),p.transform.projection.name==="globe"){const M=p.transform.pointMerc;C.call(w,v.gl,p.transform.customLayerMatrix(),p.transform.getProjection(),p.transform.globeToMercatorMatrix(),a.globeToMercatorTransition(p.transform.zoom),[M.x,M.y],p.transform.pixelsPerMeterRatio)}else C.call(w,v.gl,p.transform.customLayerMatrix());v.setDirty(),p.setBaseState()}}else if(p.renderPass==="translucent"){if(p.terrain&&p.terrain.renderingToTexture){const M=w.renderToTile;if(M){const R=g[0].canonical,z=new a.MercatorCoordinate(R.x+g[0].wrap*(1<<R.z),R.y,R.z);v.setDepthMode(a.DepthMode.disabled),v.setStencilMode(a.StencilMode.disabled),v.setColorMode(p.colorModeForRenderPass()),p.setCustomLayerDefaults(),M.call(w,v.gl,z),v.setDirty(),p.setBaseState()}return}p.setCustomLayerDefaults(),v.setColorMode(p.colorModeForRenderPass()),v.setStencilMode(a.StencilMode.disabled);const C=w.renderingMode==="3d"?new a.DepthMode(p.context.gl.LEQUAL,a.DepthMode.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,a.DepthMode.ReadOnly);if(v.setDepthMode(C),p.transform.projection.name==="globe"){const M=p.transform.pointMerc;w.render(v.gl,p.transform.customLayerMatrix(),p.transform.getProjection(),p.transform.globeToMercatorMatrix(),a.globeToMercatorTransition(p.transform.zoom),[M.x,M.y],p.transform.pixelsPerMeterRatio)}else w.render(v.gl,p.transform.customLayerMatrix());v.setDirty(),p.setBaseState(),v.bindFramebuffer.set(null)}}else a.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class jc{constructor(l,h,g=!1){this.context=new pe(l,g),this.transform=h,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=a.SourceCache.maxUnderzooming+a.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Vg,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(l,h){const g=!!l&&!!l.terrain&&this.transform.projection.supportsTerrain;if(!(g||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Mf(this,l));const v=this._terrain;this.transform.elevation=g?v:null,v.update(l,this.transform,h)}_updateFog(l){const h=l.fog;if(!h||this.transform.projection.name==="globe"||h.getOpacity(this.transform.pitch)<1||h.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[g,v]=h.getFovAdjustedRange(this.transform._fov);if(g>v)return void(this.transform.fogCullDistSq=null);const w=g+.78*(v-g);this.transform.fogCullDistSq=w*w}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(l,h){if(this.width=l*a.exported.devicePixelRatio,this.height=h*a.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style.order)this.style._layers[g].resize()}setup(){const l=this.context,h=new a.StructArrayLayout2i4;h.emplaceBack(0,0),h.emplaceBack(a.EXTENT,0),h.emplaceBack(0,a.EXTENT),h.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(h,a.posAttributes.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);const g=new a.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(a.EXTENT,0),g.emplaceBack(0,a.EXTENT),g.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=l.createVertexBuffer(g,a.posAttributes.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);const v=new a.StructArrayLayout2i4;v.emplaceBack(-1,-1),v.emplaceBack(1,-1),v.emplaceBack(-1,1),v.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(v,a.posAttributes.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);const w=new a.StructArrayLayout4i8;w.emplaceBack(0,0,0,0),w.emplaceBack(a.EXTENT,0,a.EXTENT,0),w.emplaceBack(0,a.EXTENT,0,a.EXTENT),w.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.mercatorBoundsBuffer=l.createVertexBuffer(w,a.boundsAttributes.members),this.mercatorBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);const C=new a.StructArrayLayout3ui6;C.emplaceBack(0,1,2),C.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(C);const M=new a.StructArrayLayout1ui2;for(const z of[0,1,3,2,0])M.emplaceBack(z);this.debugIndexBuffer=l.createIndexBuffer(M),this.emptyTexture=new a.Texture(l,new a.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),l.gl.RGBA),this.identityMat=a.create();const R=this.context.gl;this.stencilClearMode=new a.StencilMode({func:R.ALWAYS,mask:0},0,255,R.ZERO,R.ZERO,R.ZERO),this.loadTimeStamps.push(a.window.performance.now()),this.atmosphereBuffer=new ox(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(l){return l._makeTileBoundsBuffers(this.context,this.transform.projection),l._tileBoundsBuffer?{tileBoundsBuffer:l._tileBoundsBuffer,tileBoundsIndexBuffer:l._tileBoundsIndexBuffer,tileBoundsSegments:l._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const l=this.context,h=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(l,h.TRIANGLES,a.DepthMode.disabled,this.stencilClearMode,a.ColorMode.disabled,a.CullFaceMode.disabled,Kn(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(l,h,g){if(!h||this.currentStencilSource===h.id||!l.isTileClipped()||!g||g.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let M=!1;for(const R of g)if(this._tileClippingMaskIDs[R.key]===void 0){M=!0;break}if(!M)return}this.currentStencilSource=h.id;const v=this.context,w=v.gl;this.nextStencilID+g.length>256&&this.clearStencil(),v.setColorMode(a.ColorMode.disabled),v.setDepthMode(a.DepthMode.disabled);const C=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const M of g){const R=h.getTile(M),z=this._tileClippingMaskIDs[M.key]=this.nextStencilID++,{tileBoundsBuffer:D,tileBoundsIndexBuffer:W,tileBoundsSegments:te}=this.getTileBoundsBuffers(R);C.draw(v,w.TRIANGLES,a.DepthMode.disabled,new a.StencilMode({func:w.ALWAYS,mask:0},z,255,w.KEEP,w.KEEP,w.REPLACE),a.ColorMode.disabled,a.CullFaceMode.disabled,Kn(M.projMatrix),"$clipping",D,W,te)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,h=this.context.gl;return new a.StencilMode({func:h.NOTEQUAL,mask:255},l,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(l){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(l);const h=this.context.gl;return new a.StencilMode({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,h.KEEP,h.KEEP,h.REPLACE)}stencilConfigForOverlap(l){const h=this.context.gl,g=l.sort((C,M)=>M.overscaledZ-C.overscaledZ),v=g[g.length-1].overscaledZ,w=g[0].overscaledZ-v+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();const C={};for(let M=0;M<w;M++)C[M+v]=new a.StencilMode({func:h.GEQUAL,mask:255},M+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=w,[C,g]}return[{[v]:a.StencilMode.disabled},g]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new a.ColorMode([l.CONSTANT_COLOR,l.ONE],new a.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?a.ColorMode.unblended:a.ColorMode.alphaBlended}depthModeForSublayer(l,h,g){if(!this.opaquePassEnabledForLayer())return a.DepthMode.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new a.DepthMode(g||this.context.gl.LEQUAL,h,[v,v])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,h){this.style=l,this.options=h,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(a.exported.now()),this.imageManager.beginFrame();const g=this.style.order,v=this.style._sourceCaches;for(const z in v){const D=v[z];D.used&&D.prepare(this.context)}const w={},C={},M={};for(const z in v){const D=v[z];w[z]=D.getVisibleCoordinates(),C[z]=w[z].slice().reverse(),M[z]=D.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let z=0;z<g.length;z++)if(this.style._layers[g[z]].is3D()){this.opaquePassCutoff=z;break}if(this.terrain&&(this.terrain.updateTileBinding(M),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new a.GlobeSharedBuffers(this.context)),!a.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const z of g){const D=this.style._layers[z],W=l._getLayerSourceCache(D);if(!D.hasOffscreenPass()||D.isHidden(this.transform.zoom))continue;const te=W?C[W.id]:void 0;(D.type==="custom"||D.isSky()||te&&te.length)&&this.renderLayer(this,W,D,te)}this.depthRangeFor3D=[0,1-(l.order.length+2)*this.numSublayers*this.depthEpsilon];const R=this.terrain;if(R&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&R.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:h.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){const z=this.style._layers[g[this.currentLayer]],D=l._getLayerSourceCache(z);if(z.isSky())continue;const W=D?C[D.id]:void 0;this._renderTileClippingMasks(z,D,W),this.renderLayer(this,D,z,W)}if(this.style.fog&&this.transform.projection.supportsFog&&function(z,D){const W=z.context,te=W.gl,ie=z.transform,ae=new a.DepthMode(te.LEQUAL,a.DepthMode.ReadOnly,[0,1]),le=z.useProgram("globeAtmosphere",null,ie.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),de=a.globeToMercatorTransition(ie.zoom),Q=D.properties.get("color").toArray01(),xe=D.properties.get("high-color").toArray01(),ye=D.properties.get("space-color").toArray01PremultipliedAlpha(),we=a.identity$1([]);a.rotateY$1(we,we,-a.degToRad(ie._center.lng)),a.rotateX$1(we,we,a.degToRad(ie._center.lat)),a.rotateZ$1(we,we,ie.angle),a.rotateX$1(we,we,-ie._pitch);const Ie=a.fromQuat(new Float32Array(16),we),Ae=a.mapValue(D.properties.get("star-intensity"),0,1,0,.25),Fe=5e-4,He=a.mapValue(D.properties.get("horizon-blend"),0,1,Fe,.25),tt=a.globeUseCustomAntiAliasing(z,W,ie)&&He===Fe?ie.worldSize/(2*Math.PI*1.025)-1:ie.globeRadius,ot=z.frameCounter/1e3%1,Ot=a.length(ie.globeCenterInViewSpace),Ye=Math.sqrt(Math.pow(Ot,2)-Math.pow(tt,2)),xt=Math.acos(Ye/Ot),dt=((rt,qe,at,wt,kt,un,Dn,on,Xt,dn,$n,yn,lr,ur)=>({u_frustum_tl:rt,u_frustum_tr:qe,u_frustum_br:at,u_frustum_bl:wt,u_horizon:kt,u_transition:un,u_fadeout_range:Dn,u_color:on,u_high_color:Xt,u_space_color:dn,u_star_intensity:$n,u_star_size:5*a.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:yn,u_horizon_angle:lr,u_rotation_matrix:ur}))(ie.frustumCorners.TL,ie.frustumCorners.TR,ie.frustumCorners.BR,ie.frustumCorners.BL,ie.frustumCorners.horizon,de,He,Q,xe,ye,Ae,ot,xt,Ie);z.prepareDrawProgram(W,le);const Tt=z.atmosphereBuffer;Tt&&le.draw(W,te.TRIANGLES,ae,a.StencilMode.disabled,a.ColorMode.alphaBlended,a.CullFaceMode.backCW,dt,"skybox",Tt.vertexBuffer,Tt.indexBuffer,Tt.segments)}(this,this.style.fog),this.renderPass="sky",(a.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){const z=this.style._layers[g[this.currentLayer]],D=l._getLayerSourceCache(z);z.isSky()&&this.renderLayer(this,D,z,D?C[D.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;){const z=this.style._layers[g[this.currentLayer]],D=l._getLayerSourceCache(z);if(z.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(z)){if(z.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const W=D?(z.type==="symbol"?M:C)[D.id]:void 0;this._renderTileClippingMasks(z,D,D?w[D.id]:void 0),this.renderLayer(this,D,z,W),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let z=null;a.values(this.style._layers).forEach(D=>{const W=l._getLayerSourceCache(D);W&&!D.isHidden(this.transform.zoom)&&(!z||z.getSource().maxzoom<W.getSource().maxzoom)&&(z=W)}),z&&this.options.showTileBoundaries&&Uf.debug(this,z,z.getVisibleCoordinates())}this.options.showPadding&&function(z){const D=z.transform.padding;Xa(z,z.transform.height-(D.top||0),3,Bf),Xa(z,D.bottom||0,3,Nf),xl(z,D.left||0,3,sy),xl(z,z.transform.width-(D.right||0),3,ly);const W=z.transform.centerPoint;(function(te,ie,ae,le){Vc(te,ie-1,ae-10,2,20,le),Vc(te,ie-10,ae-1,20,2,le)})(z,W.x,z.transform.height-W.y,cy)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(a.window.performance.now()),this.saveCanvasCopy())}renderLayer(l,h,g,v){g.isHidden(this.transform.zoom)||(g.type==="background"||g.type==="sky"||g.type==="custom"||v&&v.length)&&(this.id=g.id,this.gpuTimingStart(g),(!l.transform.projection.unsupportedLayers||!l.transform.projection.unsupportedLayers.includes(g.type)||l.terrain&&g.type==="custom")&&Uf[g.type](l,h,g,v,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(l){if(!this.options.gpuTiming)return;const h=this.context.extTimerQuery;let g=this.gpuTimers[l.id];g||(g=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:h.createQueryEXT()}),g.calls++,h.beginQueryEXT(h.TIME_ELAPSED_EXT,g.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const l=this.context.extTimerQuery,h=l.createQueryEXT();this.deferredRenderGpuTimeQueries.push(h),l.beginQueryEXT(l.TIME_ELAPSED_EXT,h)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}collectGpuTimers(){const l=this.gpuTimers;return this.gpuTimers={},l}collectDeferredRenderGpuQueries(){const l=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],l}queryGpuTimers(l){const h={};for(const g in l){const v=l[g],w=this.context.extTimerQuery,C=w.getQueryObjectEXT(v.query,w.QUERY_RESULT_EXT)/1e6;w.deleteQueryEXT(v.query),h[g]=C}return h}queryGpuTimeDeferredRender(l){if(!this.options.gpuTimingDeferredRender)return 0;const h=this.context.extTimerQuery;let g=0;for(const v of l)g+=h.getQueryObjectEXT(v,h.QUERY_RESULT_EXT)/1e6,h.deleteQueryEXT(v);return g}translatePosMatrix(l,h,g,v,w){if(!g[0]&&!g[1])return l;const C=w?v==="map"?this.transform.angle:0:v==="viewport"?-this.transform.angle:0;if(C){const z=Math.sin(C),D=Math.cos(C);g=[g[0]*D-g[1]*z,g[0]*z+g[1]*D]}const M=[w?g[0]:Ge(h,g[0],this.transform.zoom),w?g[1]:Ge(h,g[1],this.transform.zoom),0],R=new Float32Array(16);return a.translate(R,l,M),R}saveTileTexture(l){const h=this._tileTextures[l.size[0]];h?h.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const h=this._tileTextures[l];return h&&h.length>0?h.pop():null}isPatternMissing(l){return l===null||l!==void 0&&!this.imageManager.getPattern(l.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const l=this.terrain&&this.terrain.renderingToTexture,h=this.terrain&&this.terrain.exaggeration()===0,g=this.style&&this.style.fog,v=[];return this.terrainRenderModeElevated()&&v.push("TERRAIN"),this.transform.projection.name==="globe"&&v.push("GLOBE"),h&&v.push("ZERO_EXAGGERATION"),g&&!l&&g.getOpacity(this.transform.pitch)!==0&&v.push("FOG"),l&&v.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&v.push("OVERDRAW_INSPECTOR"),v}useProgram(l,h,g){this.cache=this.cache||{};const v=g||[],w=this.currentGlobalDefines().concat(v),C=Af.cacheKey(bf[l],l,w,h);return this.cache[C]||(this.cache[C]=new Af(this.context,l,bf[l],h,nx[l],w)),this.cache[C]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(l,h,g){if(this.terrain&&this.terrain.renderingToTexture)return;const v=this.style.fog;if(v){const w=v.getOpacity(this.transform.pitch),C=((M,R,z,D,W,te,ie,ae,le,de,Q)=>{const xe=M.transform,ye=R.properties.get("color").toArray01();ye[3]=D;const we=M.frameCounter/1e3%1;return{u_fog_matrix:z?xe.calculateFogTileMatrix(z):M.identityMat,u_fog_range:R.getFovAdjustedRange(xe._fov),u_fog_color:ye,u_fog_horizon_blend:R.properties.get("horizon-blend"),u_fog_temporal_offset:we,u_frustum_tl:W,u_frustum_tr:te,u_frustum_br:ie,u_frustum_bl:ae,u_globe_pos:le,u_globe_radius:de,u_viewport:Q,u_globe_transition:a.globeToMercatorTransition(xe.zoom),u_is_globe:+(xe.projection.name==="globe")}})(this,v,g,w,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*a.exported.devicePixelRatio,this.transform.height*a.exported.devicePixelRatio]);h.setFogUniformValues(l,C)}}setTileLoadedFlag(l){this.tileLoaded=l}saveCanvasCopy(){const l=this.canvasCopy();l&&(this.frameCopies.push(l),this.tileLoaded=!1)}canvasCopy(){const l=this.context.gl,h=l.createTexture();return l.bindTexture(l.TEXTURE_2D,h),l.copyTexImage2D(l.TEXTURE_2D,0,l.RGBA,0,0,l.drawingBufferWidth,l.drawingBufferHeight,0),h}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const l=this.style&&this.style.fog;return!!l&&l.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const l=this._backgroundTiles,h=this._backgroundTiles={},g=this.transform.coveringTiles({tileSize:512});for(const v of g)h[v.key]=l[v.key]||new a.Tile(v,512,this.transform.tileZoom,this);return h}clearBackgroundTiles(){this._backgroundTiles={}}}class Vf{constructor(l=0,h=0,g=0,v=0){if(isNaN(l)||l<0||isNaN(h)||h<0||isNaN(g)||g<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=h,this.left=g,this.right=v}interpolate(l,h,g){return h.top!=null&&l.top!=null&&(this.top=a.number(l.top,h.top,g)),h.bottom!=null&&l.bottom!=null&&(this.bottom=a.number(l.bottom,h.bottom,g)),h.left!=null&&l.left!=null&&(this.left=a.number(l.left,h.left,g)),h.right!=null&&l.right!=null&&(this.right=a.number(l.right,h.right,g)),this}getCenter(l,h){const g=a.clamp((this.left+l-this.right)/2,0,l),v=a.clamp((this.top+h-this.bottom)/2,0,h);return new a.pointGeometry(g,v)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new Vf(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function uy(p,l){const h=a.getColumn(p,3);a.fromQuat(p,l),a.setColumn(p,3,h)}function _d(p,l){const h=a.identity$1([]);return a.rotateZ$1(h,h,-l),a.rotateX$1(h,h,-p),h}function dy(p,l){const h=[p[0],p[1],0],g=[l[0],l[1],0];if(a.length(h)>=1e-15){const C=a.normalize([],h);a.scale$2(g,C,a.dot(g,C)),l[0]=g[0],l[1]=g[1]}const v=a.cross([],l,p);if(a.len(v)<1e-15)return null;const w=Math.atan2(-v[1],v[0]);return _d(Math.atan2(Math.sqrt(p[0]*p[0]+p[1]*p[1]),-p[2]),w)}class vd{constructor(l,h){this.position=l,this.orientation=h}get position(){return this._position}set position(l){if(l){const h=l instanceof a.MercatorCoordinate?l:new a.MercatorCoordinate(l[0],l[1],l[2]);this._renderWorldCopies&&(h.x=a.wrap(h.x,0,1)),this._position=h}else this._position=null}lookAtPoint(l,h){if(this.orientation=null,!this.position)return;const g=this.position,v=this._elevation?this._elevation.getAtPointOrZero(a.MercatorCoordinate.fromLngLat(l)):0,w=a.MercatorCoordinate.fromLngLat(l,v),C=[w.x-g.x,w.y-g.y,w.z-g.z];h||(h=[0,0,1]),h[2]=Math.abs(h[2]),this.orientation=dy(C,h)}setPitchBearing(l,h){this.orientation=_d(a.degToRad(l),a.degToRad(-h))}}class Sl{constructor(l,h){this._transform=a.identity([]),this.orientation=h,this.position=l}get mercatorPosition(){const l=this.position;return new a.MercatorCoordinate(l[0],l[1],l[2])}get position(){const l=a.getColumn(this._transform,3);return[l[0],l[1],l[2]]}set position(l){var h;l&&a.setColumn(this._transform,3,[(h=l)[0],h[1],h[2],1])}get orientation(){return this._orientation}set orientation(l){this._orientation=l||a.identity$1([]),l&&uy(this._transform,this._orientation)}getPitchBearing(){const l=this.forward(),h=this.right();return{bearing:Math.atan2(-h[1],h[0]),pitch:Math.atan2(Math.sqrt(l[0]*l[0]+l[1]*l[1]),-l[2])}}setPitchBearing(l,h){this._orientation=_d(l,h),uy(this._transform,this._orientation)}forward(){const l=a.getColumn(this._transform,2);return[-l[0],-l[1],-l[2]]}up(){const l=a.getColumn(this._transform,1);return[-l[0],-l[1],-l[2]]}right(){const l=a.getColumn(this._transform,0);return[l[0],l[1],l[2]]}getCameraToWorld(l,h){const g=new Float64Array(16);return a.invert(g,this.getWorldToCamera(l,h)),g}getWorldToCameraPosition(l,h,g){const v=this.position;a.scale$2(v,v,-l);const w=new Float64Array(16);return a.fromScaling(w,[g,g,g]),a.translate(w,w,v),w[10]*=h,w}getWorldToCamera(l,h){const g=new Float64Array(16),v=new Float64Array(4),w=this.position;return a.conjugate(v,this._orientation),a.scale$2(w,w,-l),a.fromQuat(g,v),a.translate(g,g,w),g[1]*=-1,g[5]*=-1,g[9]*=-1,g[13]*=-1,g[8]*=h,g[9]*=h,g[10]*=h,g[11]*=h,g}getCameraToClipPerspective(l,h,g,v){const w=new Float64Array(16);return a.perspective(w,l,h,g,v),w}getDistanceToElevation(l,h=!1){const g=l===0?0:a.mercatorZfromAltitude(l,h?a.latFromMercatorY(this.position[1]):this.position[1]),v=this.forward();return(g-this.position[2])/v[2]}clone(){return new Sl([...this.position],[...this.orientation])}}function El(p,l){const h=Ms(p.projection,p.zoom,p.width,p.height),g=function(w,C,M,R,z){const D=new a.LngLat(M.lng-180*As,M.lat),W=new a.LngLat(M.lng+180*As,M.lat),te=w.project(D.lng,D.lat),ie=w.project(W.lng,W.lat),ae=-Math.atan2(ie.y-te.y,ie.x-te.x),le=a.MercatorCoordinate.fromLngLat(M);le.y=a.clamp(le.y,-.999975,.999975);const de=le.toLngLat(),Q=w.project(de.lng,de.lat),xe=a.MercatorCoordinate.fromLngLat(de);xe.x+=As;const ye=xe.toLngLat(),we=w.project(ye.lng,ye.lat),Ie=Wc(we.x-Q.x,we.y-Q.y,ae),Ae=a.MercatorCoordinate.fromLngLat(de);Ae.y+=As;const Fe=Ae.toLngLat(),He=w.project(Fe.lng,Fe.lat),tt=Wc(He.x-Q.x,He.y-Q.y,ae),ot=Math.abs(Ie.x)/Math.abs(tt.y),Ot=a.identity([]);a.rotateZ(Ot,Ot,-ae*(1-(z?0:R)));const Ye=a.identity([]);return a.scale(Ye,Ye,[1,1-(1-ot)*R,1]),Ye[4]=-tt.x/tt.y*R,a.rotateZ(Ye,Ye,ae),a.multiply(Ye,Ot,Ye),Ye}(p.projection,0,p.center,h,l),v=xd(p);return a.scale(g,g,[v,v,1]),g}function xd(p){const l=p.projection,h=Ms(p.projection,p.zoom,p.width,p.height),g=Gc(l,p.center),v=Gc(l,a.LngLat.convert(l.center));return Math.pow(2,g*h+(1-h)*v)}function Ms(p,l,h,g,v=1/0){const w=p.range;if(!w)return 0;const C=Math.min(v,Math.max(h,g)),M=Math.log(C/1024)/Math.LN2;return a.smoothstep(w[0]+M,w[1]+M,l)}const As=1/4e4;function Gc(p,l){const h=a.clamp(l.lat,-a.MAX_MERCATOR_LATITUDE,a.MAX_MERCATOR_LATITUDE),g=new a.LngLat(l.lng-180*As,h),v=new a.LngLat(l.lng+180*As,h),w=p.project(g.lng,h),C=p.project(v.lng,h),M=a.MercatorCoordinate.fromLngLat(g),R=a.MercatorCoordinate.fromLngLat(v),z=C.x-w.x,D=C.y-w.y,W=R.x-M.x,te=R.y-M.y,ie=Math.sqrt((W*W+te*te)/(z*z+D*D));return Math.log(ie)/Math.LN2}function Wc(p,l,h){const g=Math.cos(h),v=Math.sin(h);return{x:p*g-l*v,y:p*v+l*g}}class Zt{constructor(l,h,g,v,w,C,M){this.tileSize=512,this._renderWorldCopies=w===void 0||w,this._minZoom=l||0,this._maxZoom=h||22,this._minPitch=g??0,this._maxPitch=v??60,this.setProjection(C),this.setMaxBounds(M),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Vf,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Sl,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const l=new Zt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return l._elevation=this._elevation,l._centerAltitude=this._centerAltitude,l._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,l.tileSize=this.tileSize,l.mercatorFromTransition=this.mercatorFromTransition,l.width=this.width,l.height=this.height,l.cameraElevationReference=this.cameraElevationReference,l._center=this._center,l._setZoom(this.zoom),l._seaLevelZoom=this._seaLevelZoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._nearZ=this._nearZ,l._farZ=this._farZ,l._averageElevation=this._averageElevation,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._camera=this._camera.clone(),l._calcMatrices(),l.freezeTileCoverage=this.freezeTileCoverage,l.frustumCorners=this.frustumCorners,l}get elevation(){return this._elevation}set elevation(l){this._elevation!==l&&(this._elevation=l,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(l,h=!1){const g=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||g)&&this._updateCameraOnTerrain(),(l||g)&&this._constrainCamera(h),this._calcMatrices()}getProjection(){return a.pick(this.projection,["name","center","parallels"])}setProjection(l){this.projectionOptions=l||{name:"mercator"};const h=this.projection?this.getProjection():void 0;this.projection=a.getProjection(this.projectionOptions);const g=!b(h,this.getProjection());return g&&this._calcMatrices(),this.mercatorFromTransition=!1,g}setMercatorFromTransition(){const l=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=a.getProjection({name:"mercator"});const h=l!==this.projection.name;return h&&this._calcMatrices(),h}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get cameraWorldSize(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return a.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.pointGeometry(this.width,this.height)}get bearing(){return a.wrap(this.rotation,-180,180)}set bearing(l){this.rotation=l}get rotation(){return-this.angle/Math.PI*180}set rotation(l){const h=-l*Math.PI/180;var g;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=(g=new a.ARRAY_TYPE(4),a.ARRAY_TYPE!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g),function(v,w,C){var M=w[0],R=w[1],z=w[2],D=w[3],W=Math.sin(C),te=Math.cos(C);v[0]=M*te+z*W,v[1]=R*te+D*W,v[2]=M*-W+z*te,v[3]=R*-W+D*te}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const h=a.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const l=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/l)}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=a.degToRad(l),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(l){this._averageElevation=l,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(l){const h=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._setZoom(h),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(l){this._zoom=l,this.scale=this.zoomScale(l),this.tileZoom=Math.floor(l),this.zoomFraction=l-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const l=this._elevation;this._centerAltitude=l.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=l.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const l=this._elevation,h=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],g=this.horizonLineFromTop();let v=0,w=0;for(let C=0;C<h.length;C++){const M=new a.pointGeometry(h[C][0]*this.width,g+h[C][1]*(this.height-g)),R=l.pointCoordinate(M);if(!R)continue;const z=1/Math.hypot(R[0]-this._camera.position[0],R[1]-this._camera.position[1]);v+=R[3]*z,w+=z}return w===0?NaN:v/w}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const l=this._seaLevelZoom,h=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),g=this.pixelsPerMeter/this.worldSize*h,v=this._mercatorZfromZoom(l),w=this._mercatorZfromZoom(this._maxZoom),C=Math.max(v-g,w);this._setZoom(this._zoomFromMercatorZ(C))}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}computeZoomRelativeTo(l){const h=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,l.toAltitude()));let g;g=l.z<this._camera.position[2]?[h.x,h.y,h.z]:[l.x,l.y,l.z];const v=a.length(a.sub([],this._camera.position,g));return a.clamp(this._zoomFromMercatorZ(v),this._minZoom,this._maxZoom)}setFreeCameraOptions(l){if(!this.height||!l.position&&!l.orientation)return;this._updateCameraState();let h=!1;if(l.orientation&&!a.exactEquals(l.orientation,this._camera.orientation)&&(h=this._setCameraOrientation(l.orientation)),l.position){const g=[l.position.x,l.position.y,l.position.z];a.exactEquals$1(g,this._camera.position)||(this._setCameraPosition(g),h=!0)}h&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const l=this._camera.position,h=new vd;return h.position=new a.MercatorCoordinate(l[0],l[1],l[2]),h.orientation=this._camera.orientation,h._elevation=this.elevation,h._renderWorldCopies=this.renderWorldCopies,h}_setCameraOrientation(l){if(!a.length$1(l))return!1;a.normalize$1(l,l);const h=a.transformQuat([],[0,0,-1],l),g=a.transformQuat([],[0,-1,0],l);if(g[2]<0)return!1;const v=dy(h,g);return!!v&&(this._camera.orientation=v,!0)}_setCameraPosition(l){const h=this.zoomScale(this.minZoom)*this.tileSize,g=this.zoomScale(this.maxZoom)*this.tileSize,v=this.cameraToCenterDistance;l[2]=a.clamp(l[2],v/g,v/h),this._camera.position=l}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,h,g){this._unmodified=!1,this._edgeInsets.interpolate(l,h,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const h=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,h)}getVisibleUnwrappedCoordinates(l){const h=[new a.UnwrappedTileID(0,l)];if(this.renderWorldCopies){const g=this.pointCoordinate(new a.pointGeometry(0,0)),v=this.pointCoordinate(new a.pointGeometry(this.width,0)),w=this.pointCoordinate(new a.pointGeometry(this.width,this.height)),C=this.pointCoordinate(new a.pointGeometry(0,this.height)),M=Math.floor(Math.min(g.x,v.x,w.x,C.x)),R=Math.floor(Math.max(g.x,v.x,w.x,C.x)),z=1;for(let D=M-z;D<=R+z;D++)D!==0&&h.push(new a.UnwrappedTileID(D,l))}return h}coveringTiles(l){let h=this.coveringZoomLevel(l);const g=h,v=this.elevation&&!l.isTerrainDEM,w=this.projection.name==="mercator";if(l.minzoom!==void 0&&h<l.minzoom)return[];l.maxzoom!==void 0&&h>l.maxzoom&&(h=l.maxzoom);const C=this.locationCoordinate(this.center),M=this.center.lat,R=1<<h,z=[R*C.x,R*C.y,0],D=this.projection.name==="globe",W=!D,te=a.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,h,W),ie=D?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ae=R*a.mercatorZfromAltitude(1,this.center.lat),le=this._camera.position[2]/a.mercatorZfromAltitude(1,this.center.lat),de=[R*ie.x,R*ie.y,le*(W?1:ae)],Q=this.cameraToCenterDistance/l.tileSize*(l.roundZoom?1:.502),xe=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?h:0,ye=l.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,we=l.isTerrainDEM?-ye:this._elevation?this._elevation.getMinElevationBelowMSL():0,Ie=this.projection.isReprojectedInTileSpace?xd(this):1,Ae=rt=>{const at=new a.MercatorCoordinate(rt.x+25e-6,rt.y,rt.z),wt=new a.MercatorCoordinate(rt.x,rt.y+25e-6,rt.z),kt=rt.toLngLat(),un=at.toLngLat(),Dn=wt.toLngLat(),on=this.locationCoordinate(kt),Xt=this.locationCoordinate(un),dn=this.locationCoordinate(Dn),$n=Math.hypot(Xt.x-on.x,Xt.y-on.y),yn=Math.hypot(dn.x-on.x,dn.y-on.y);return Math.sqrt($n*yn)*Ie/25e-6},Fe=rt=>{const qe=ye,at=we;return{aabb:a.tileAABB(this,R,0,0,0,rt,at,qe,this.projection),zoom:0,x:0,y:0,minZ:at,maxZ:qe,wrap:rt,fullyVisible:!1}},He=[];let tt=[];const ot=h,Ot=l.reparseOverscaled?g:h,Ye=rt=>rt*rt,xt=Ye((le-this._centerAltitude)*ae),dt=rt=>{if(!this._elevation||!rt.tileID||!w)return;const qe=this._elevation.getMinMaxForTile(rt.tileID),at=rt.aabb;qe?(at.min[2]=qe.min,at.max[2]=qe.max,at.center[2]=(at.min[2]+at.max[2])/2):(rt.shouldSplit=Tt(rt),rt.shouldSplit||(at.min[2]=at.max[2]=at.center[2]=this._centerAltitude))},Tt=rt=>{if(rt.zoom<xe)return!0;if(rt.zoom===ot)return!1;if(rt.shouldSplit!=null)return rt.shouldSplit;const qe=rt.aabb.distanceX(de),at=rt.aabb.distanceY(de);let wt=xt,kt=1;if(D){wt=Ye(rt.aabb.distanceZ(de));const on=Math.pow(2,rt.zoom),Xt=a.latFromMercatorY((rt.y+1)/on),dn=a.latFromMercatorY(rt.y/on),$n=Math.min(Math.max(M,Xt),dn),yn=a.circumferenceAtLatitude($n)/a.circumferenceAtLatitude(M);if(kt=$n===M?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,yn/this._mercatorScaleRatio),this.zoom<=a.GLOBE_ZOOM_THRESHOLD_MIN&&rt.zoom===ot-1&&yn>=.9)return!0}else if(v&&(wt=Ye(rt.aabb.distanceZ(de)*ae)),this.projection.isReprojectedInTileSpace&&g<=5){const on=Math.pow(2,rt.zoom),Xt=Ae(new a.MercatorCoordinate((rt.x+.5)/on,(rt.y+.5)/on));kt=Xt>.85?1:Xt}const un=qe*qe+at*at+wt,Dn=Ye((1<<ot-rt.zoom)*Q*kt*((on,Xt)=>{if(Xt*Ye(.707)<on)return 1;const dn=Math.sqrt(Xt/on);return dn/(1.4144271570014144+(Math.pow(1.1,dn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(wt,xt),un));return un<Dn};if(this.renderWorldCopies)for(let rt=1;rt<=3;rt++)He.push(Fe(-rt)),He.push(Fe(rt));for(He.push(Fe(0));He.length>0;){const rt=He.pop(),qe=rt.x,at=rt.y;let wt=rt.fullyVisible;if(!wt){const kt=rt.aabb.intersects(te);if(kt===0)continue;wt=kt===2}if(rt.zoom!==ot&&Tt(rt))for(let kt=0;kt<4;kt++){const un=(qe<<1)+kt%2,Dn=(at<<1)+(kt>>1),on={aabb:w?rt.aabb.quadrant(kt):a.tileAABB(this,R,rt.zoom+1,un,Dn,rt.wrap,rt.minZ,rt.maxZ,this.projection),zoom:rt.zoom+1,x:un,y:Dn,wrap:rt.wrap,fullyVisible:wt,tileID:void 0,shouldSplit:void 0,minZ:rt.minZ,maxZ:rt.maxZ};v&&!D&&(on.tileID=new a.OverscaledTileID(rt.zoom+1===ot?Ot:rt.zoom+1,rt.wrap,rt.zoom+1,un,Dn),dt(on)),He.push(on)}else{const kt=rt.zoom===ot?Ot:rt.zoom;if(l.minzoom&&l.minzoom>kt)continue;const un=z[0]-(.5+qe+(rt.wrap<<rt.zoom))*(1<<h-rt.zoom),Dn=z[1]-.5-at,on=rt.tileID?rt.tileID:new a.OverscaledTileID(kt,rt.wrap,rt.zoom,qe,at);tt.push({tileID:on,distanceSq:un*un+Dn*Dn})}}if(this.fogCullDistSq){const rt=this.fogCullDistSq,qe=this.horizonLineFromTop();tt=tt.filter(at=>{const wt=[0,0,0,1],kt=[a.EXTENT,a.EXTENT,0,1],un=this.calculateFogTileMatrix(at.tileID.toUnwrapped());a.transformMat4$1(wt,wt,un),a.transformMat4$1(kt,kt,un);const Dn=a.getAABBPointSquareDist(wt,kt);if(Dn===0)return!0;let on=!1;const Xt=this._elevation;if(Xt&&Dn>rt&&qe!==0){const dn=this.calculateProjMatrix(at.tileID.toUnwrapped());let $n;l.isTerrainDEM||($n=Xt.getMinMaxForTile(at.tileID)),$n||($n={min:we,max:ye});const yn=a.furthestTileCorner(this.rotation),lr=[yn[0]*a.EXTENT,yn[1]*a.EXTENT,$n.max];a.transformMat4(lr,lr,dn),on=(1-lr[1])*this.height*.5<qe}return Dn<rt||on})}return tt.sort((rt,qe)=>rt.distanceSq-qe.distanceSq).map(rt=>rt.tileID)}resize(l,h){this.width=l,this.height=h,this.pixelsToGLUnits=[2/l,-2/h],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const h=a.clamp(l.lat,-a.MAX_MERCATOR_LATITUDE,a.MAX_MERCATOR_LATITUDE),g=this.projection.project(l.lng,h);return new a.pointGeometry(g.x*this.worldSize,g.y*this.worldSize)}unproject(l){return this.projection.unproject(l.x/this.worldSize,l.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/a.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(l,h){let g,v;const w=this.centerPoint;if(this.projection.name==="globe"){const M=this.worldSize;g=(h.x-w.x)/M,v=(h.y-w.y)/M}else{const M=this.pointCoordinate(h),R=this.pointCoordinate(w);g=M.x-R.x,v=M.y-R.y}const C=this.locationCoordinate(l);this.setLocation(new a.MercatorCoordinate(C.x-g,C.y-v))}setLocation(l){this.center=this.coordinateLocation(l),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(l){return this.projection.locationPoint(this,l)}locationPoint3D(l){return this.projection.locationPoint(this,l,!0)}pointLocation(l){return this.coordinateLocation(this.pointCoordinate(l))}pointLocation3D(l){return this.coordinateLocation(this.pointCoordinate3D(l))}locationCoordinate(l,h){const g=h?a.mercatorZfromAltitude(h,l.lat):void 0,v=this.projection.project(l.lng,l.lat);return new a.MercatorCoordinate(v.x,v.y,g)}coordinateLocation(l){return this.projection.unproject(l.x,l.y)}pointRayIntersection(l,h){const g=h??this._centerAltitude,v=[l.x,l.y,0,1],w=[l.x,l.y,1,1];a.transformMat4$1(v,v,this.pixelMatrixInverse),a.transformMat4$1(w,w,this.pixelMatrixInverse);const C=w[3];a.scale$1(v,v,1/v[3]),a.scale$1(w,w,1/C);const M=v[2],R=w[2];return{p0:v,p1:w,t:M===R?0:(g-M)/(R-M)}}screenPointToMercatorRay(l){const h=[l.x,l.y,0,1],g=[l.x,l.y,1,1];return a.transformMat4$1(h,h,this.pixelMatrixInverse),a.transformMat4$1(g,g,this.pixelMatrixInverse),a.scale$1(h,h,1/h[3]),a.scale$1(g,g,1/g[3]),h[2]=a.mercatorZfromAltitude(h[2],this._center.lat)*this.worldSize,g[2]=a.mercatorZfromAltitude(g[2],this._center.lat)*this.worldSize,a.scale$1(h,h,1/this.worldSize),a.scale$1(g,g,1/this.worldSize),new a.Ray([h[0],h[1],h[2]],a.normalize([],a.sub([],g,h)))}rayIntersectionCoordinate(l){const{p0:h,p1:g,t:v}=l,w=a.mercatorZfromAltitude(h[2],this._center.lat),C=a.mercatorZfromAltitude(g[2],this._center.lat);return new a.MercatorCoordinate(a.number(h[0],g[0],v)/this.worldSize,a.number(h[1],g[1],v)/this.worldSize,a.number(w,C,v))}pointCoordinate(l,h=this._centerAltitude){return this.projection.pointCoordinate(this,l.x,l.y,h)}pointCoordinate3D(l){if(!this.elevation)return this.pointCoordinate(l);let h=this.projection.pointCoordinate3D(this,l.x,l.y);if(h)return new a.MercatorCoordinate(h[0],h[1],h[2]);let g=0,v=this.horizonLineFromTop();if(l.y>v)return this.pointCoordinate(l);const w=.02*v,C=l.clone();for(let M=0;M<10&&v-g>w;M++){C.y=a.number(g,v,.66);const R=this.projection.pointCoordinate3D(this,C.x,C.y);R?(v=C.y,h=R):g=C.y}return h?new a.MercatorCoordinate(h[0],h[1],h[2]):this.pointCoordinate(l)}isPointAboveHorizon(l){return this.projection.isPointAboveHorizon(this,l)}_coordinatePoint(l,h){const g=h&&this.elevation?this.elevation.getAtPointOrZero(l,this._centerAltitude):this._centerAltitude,v=[l.x*this.worldSize,l.y*this.worldSize,g+l.toAltitude(),1];return a.transformMat4$1(v,v,this.pixelMatrix),v[3]>0?new a.pointGeometry(v[0]/v[3],v[1]/v[3]):new a.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:l,left:h}=this._edgeInsets,g=this.height-this._edgeInsets.bottom,v=this.width-this._edgeInsets.right,w=this.pointLocation3D(new a.pointGeometry(h,l)),C=this.pointLocation3D(new a.pointGeometry(v,l)),M=this.pointLocation3D(new a.pointGeometry(v,g)),R=this.pointLocation3D(new a.pointGeometry(h,g));let z=Math.min(w.lng,C.lng,M.lng,R.lng),D=Math.max(w.lng,C.lng,M.lng,R.lng),W=Math.min(w.lat,C.lat,M.lat,R.lat),te=Math.max(w.lat,C.lat,M.lat,R.lat);const ie=Math.pow(2,-this.zoom)/16*270,ae=this.projection.name==="globe"?1:4,le=(de,Q,xe,ye,we)=>{const Ie=(de+xe)/2,Ae=(Q+ye)/2,Fe=new a.pointGeometry(Ie,Ae),{lng:He,lat:tt}=this.pointLocation3D(Fe),ot=Math.max(0,z-He,W-tt,He-D,tt-te);z=Math.min(z,He),D=Math.max(D,He),W=Math.min(W,tt),te=Math.max(te,tt),(we<ae||ot>ie)&&(le(de,Q,Ie,Ae,we+1),le(Ie,Ae,xe,ye,we+1))};if(le(h,l,v,l,1),le(v,l,v,g,1),le(v,g,h,g,1),le(h,g,h,l,1),this.projection.name==="globe"){const[de,Q]=a.polesInViewport(this);de?(te=90,D=180,z=-180):Q&&(W=-90,D=180,z=-180)}return new a.LngLatBounds(new a.LngLat(z,W),new a.LngLat(D,te))}_getBoundsRectangular(l,h){const{top:g,left:v}=this._edgeInsets,w=this.height-this._edgeInsets.bottom,C=this.width-this._edgeInsets.right,M=new a.pointGeometry(v,g),R=new a.pointGeometry(C,g),z=new a.pointGeometry(C,w),D=new a.pointGeometry(v,w);let W=this.pointCoordinate(M,l),te=this.pointCoordinate(R,l);const ie=this.pointCoordinate(z,h),ae=this.pointCoordinate(D,h),le=(de,Q)=>(Q.y-de.y)/(Q.x-de.x);return W.y>1&&te.y>=0?W=new a.MercatorCoordinate((1-ae.y)/le(ae,W)+ae.x,1):W.y<0&&te.y<=1&&(W=new a.MercatorCoordinate(-ae.y/le(ae,W)+ae.x,0)),te.y>1&&W.y>=0?te=new a.MercatorCoordinate((1-ie.y)/le(ie,te)+ie.x,1):te.y<0&&W.y<=1&&(te=new a.MercatorCoordinate(-ie.y/le(ie,te)+ie.x,0)),new a.LngLatBounds().extend(this.coordinateLocation(W)).extend(this.coordinateLocation(te)).extend(this.coordinateLocation(ae)).extend(this.coordinateLocation(ie))}_getBoundsRectangularTerrain(){const l=this.elevation;if(!l.visibleDemTiles.length||l.isUsingMockSource())return this._getBoundsRectangular(0,0);const h=l.visibleDemTiles.reduce((g,v)=>{if(v.dem){const w=v.dem.tree;g.min=Math.min(g.min,w.minimums[0]),g.max=Math.max(g.max,w.maximums[0])}return g},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(h.min*l.exaggeration(),h.max*l.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(l=!0){const h=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,g=this.height/2-h*(1-this._horizonShift);return l?Math.max(0,g):g}getMaxBounds(){return this.maxBounds}setMaxBounds(l){this.maxBounds=l,this.minLat=-a.MAX_MERCATOR_LATITUDE,this.maxLat=a.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,l&&(this.minLat=l.getSouth(),this.maxLat=l.getNorth(),this.minLng=l.getWest(),this.maxLng=l.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=a.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=a.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=a.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=a.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(l,h){return this.projection.createTileMatrix(this,h,l)}calculateDistanceTileData(l){const h=l.key,g=this._distanceTileDataCache;if(g[h])return g[h];const v=l.canonical,w=1/this.height,C=this.cameraWorldSize,M=C/this.zoomScale(v.z),R=(v.x+Math.pow(2,v.z)*l.wrap)*M,z=v.y*M,D=this.point;D.x*=C/this.worldSize,D.y*=C/this.worldSize;const W=this.angle,te=Math.sin(-W),ie=-Math.cos(-W);return g[h]={bearing:[te,ie],center:[(D.x-R)*w,(D.y-z)*w],scale:M/a.EXTENT*w},g[h]}calculateFogTileMatrix(l){const h=l.key,g=this._fogTileMatrixCache;if(g[h])return g[h];const v=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,l);return a.multiply(v,this.worldToFogMatrix,v),g[h]=new Float32Array(v),g[h]}calculateProjMatrix(l,h=!1){const g=l.key,v=h?this._alignedProjMatrixCache:this._projMatrixCache;if(v[g])return v[g];const w=this.calculatePosMatrix(l,this.worldSize);return a.multiply(w,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:h?this.alignedProjMatrix:this.projMatrix,w),v[g]=new Float32Array(w),v[g]}calculatePixelsToTileUnitsMatrix(l){const h=l.tileID.key,g=this._pixelsToTileUnitsCache;if(g[h])return g[h];const v=function(w,C){const{scale:M}=w.tileTransform,R=M*a.EXTENT/(w.tileSize*Math.pow(2,C.zoom-w.tileID.overscaledZ+w.tileID.canonical.z));return z=new Float32Array(4),te=(D=C.inverseAdjustmentMatrix)[1],ie=D[2],ae=D[3],de=(W=[R,R])[1],z[0]=D[0]*(le=W[0]),z[1]=te*le,z[2]=ie*de,z[3]=ae*de,z;var z,D,W,te,ie,ae,le,de}(l,this);return g[h]=v,g[h]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const l=1/this.worldSize,h=a.fromScaling([],[l,l,l]);return a.multiply(h,h,this.globeMatrix),h}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const l=this._elevation;this._updateCameraState();const h=a.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,g=this._computeCameraPosition(h),v=this._camera.forward(),w=a.mercatorZfromAltitude(1,this._center.lat);g[2]/=w,v[2]/=w,a.normalize(v,v);const C=l.raycast(g,v,l.exaggeration());if(C){const M=a.scaleAndAdd([],g,v,C),R=new a.MercatorCoordinate(M[0],M[1],a.mercatorZfromAltitude(M[2],a.latFromMercatorY(M[1]))),z=(R.z+a.length([R.x-g[0],R.y-g[1],R.z-g[2]*w]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(z),this._centerAltitude=R.toAltitude(),this._center=this.coordinateLocation(R),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(l=!1){if(!this._elevation)return;const h=this._elevation,g=a.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,v=this._computeCameraPosition(g),w=h.getAtPointOrZero(new a.MercatorCoordinate(...v)),C=this.pixelsPerMeter/this.worldSize*w,M=this._minimumHeightOverTerrain(),R=v[2]-C;if(R<=M)if(R<0||l){const z=this.locationCoordinate(this._center,this._centerAltitude),D=[v[0],v[1],z.z-v[2]],W=a.length(D);D[2]-=(M-R)/this._pixelsPerMercatorPixel;const te=a.length(D);if(te===0)return;a.scale$2(D,D,W/te*this._pixelsPerMercatorPixel),this._camera.position=[v[0],v[1],z.z*this._pixelsPerMercatorPixel-D[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const l=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||l){const te=this.center;return te.lat=a.clamp(te.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!l)&&(te.lng=a.clamp(te.lng,this.minLng,this.maxLng)),this.center=te,void(this._constraining=!1)}const h=this._unmodified,{x:g,y:v}=this.point;let w=0,C=g,M=v;const R=this.width/2,z=this.height/2,D=this.worldMinY*this.scale,W=this.worldMaxY*this.scale;if(v-z<D&&(M=D+z),v+z>W&&(M=W-z),W-D<this.height&&(w=Math.max(w,this.height/(W-D)),M=(W+D)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const te=this.worldMinX*this.scale,ie=this.worldMaxX*this.scale,ae=this.worldSize/2-(te+ie)/2;C=(g+ae+this.worldSize)%this.worldSize-ae,C-R<te&&(C=te+R),C+R>ie&&(C=ie-R),ie-te<this.width&&(w=Math.max(w,this.width/(ie-te)),C=(ie+te)/2)}C===g&&M===v||(this.center=this.unproject(new a.pointGeometry(C,M))),w&&(this.zoom+=this.scaleZoom(w)),this._constrainCamera(),this._unmodified=h,this._constraining=!1}_minZoomForBounds(){let l=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(l=Math.max(l,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),l}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,h=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=a.mercatorZfromAltitude(1,this.center.lat)/a.mercatorZfromAltitude(1,a.GLOBE_SCALE_MATCH_LATITUDE));const g=Ms(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,g),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const v=this.projection.zAxisUnit==="meters"?h:1,w=this._camera.getWorldToCamera(this.worldSize,v),C=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);C[8]=2*-l.x/this.width,C[9]=2*l.y/this.height;let M=a.mul([],C,w);if(this.projection.isReprojectedInTileSpace){const Ae=this.locationCoordinate(this.center),Fe=a.identity([]);a.translate(Fe,Fe,[Ae.x*this.worldSize,Ae.y*this.worldSize,0]),a.multiply(Fe,Fe,El(this)),a.translate(Fe,Fe,[-Ae.x*this.worldSize,-Ae.y*this.worldSize,0]),a.multiply(M,M,Fe),this.inverseAdjustmentMatrix=function(He){const tt=El(He,!0);return fe([],[tt[0],tt[1],tt[4],tt[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=a.scale([],M,[this.worldSize,this.worldSize,this.worldSize/v,1]),this.projMatrix=M,this.invProjMatrix=a.invert(new Float64Array(16),this.projMatrix);const R=a.invert([],C);this.frustumCorners=a.FrustumCorners.fromInvProjectionMatrix(R,this.horizonLineFromTop(),this.height);const z=new Float32Array(16);a.identity(z),a.scale(z,z,[1,-1,1]),a.rotateX(z,z,this._pitch),a.rotateZ(z,z,this.angle);const D=a.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),W=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;D[8]=2*-l.x/this.width,D[9]=2*(l.y+W)/this.height,this.skyboxMatrix=a.multiply(z,D,z);const te=this.point,ie=te.x,ae=te.y,le=this.width%2/2,de=this.height%2/2,Q=Math.cos(this.angle),xe=Math.sin(this.angle),ye=ie-Math.round(ie)+Q*le+xe*de,we=ae-Math.round(ae)+Q*de+xe*le,Ie=new Float64Array(M);if(a.translate(Ie,Ie,[ye>.5?ye-1:ye,we>.5?we-1:we,0]),this.alignedProjMatrix=Ie,M=a.create(),a.scale(M,M,[this.width/2,-this.height/2,1]),a.translate(M,M,[1,-1,0]),this.labelPlaneMatrix=M,M=a.create(),a.scale(M,M,[1,-1,1]),a.translate(M,M,[-1,-1,0]),a.scale(M,M,[2/this.width,2/this.height,1]),this.glCoordMatrix=M,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},M=a.invert(new Float64Array(16),this.pixelMatrix),!M)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=M,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=a.calculateGlobeMatrix(this);const Ae=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=a.transformMat4(Ae,Ae,w),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=M;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const l=this.cameraWorldSizeForFog,h=this.cameraPixelsPerMeter,g=this._camera.position,v=1/this.height/this._pixelsPerMercatorPixel,w=[l,l,h];a.scale$2(w,w,v),a.scale$2(g,g,-1),a.multiply$2(g,g,w);const C=a.create();a.translate(C,C,g),a.scale(C,C,w),this.mercatorFogMatrix=C,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(l,h,v)}_computeCameraPosition(l){const h=(l=l||this.pixelsPerMeter)/this.pixelsPerMeter,g=this._camera.forward(),v=this.point,w=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*h-l/this.worldSize*this._centerAltitude;return[v.x/this.worldSize-g[0]*w,v.y/this.worldSize-g[1]*w,l/this.worldSize*this._centerAltitude-g[2]*w]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(l){const h=this._maxCameraBoundsDistance()*Math.cos(this._pitch),g=this._camera.position[2],v=l[2];let w=1;this.projection.wrap&&(this.center=this.center.wrap()),v>0&&(w=Math.min((h-g)/v,1)),this._camera.position=a.scaleAndAdd([],this._camera.position,l,w),this._updateStateFromCamera()}_updateStateFromCamera(){const l=this._camera.position,h=this._camera.forward(),{pitch:g,bearing:v}=this._camera.getPitchBearing(),w=a.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,C=this._mercatorZfromZoom(this._maxZoom)*Math.cos(a.degToRad(this._maxPitch)),M=Math.max((l[2]-w)/Math.cos(g),C),R=this._zoomFromMercatorZ(M);a.scaleAndAdd(l,l,h,M),this._pitch=a.clamp(g,a.degToRad(this.minPitch),a.degToRad(this.maxPitch)),this.angle=a.wrap(v,-Math.PI,Math.PI),this._setZoom(a.clamp(R,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new a.MercatorCoordinate(l[0],l[1],l[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(l){return Math.pow(2,l)*this.tileSize}_mercatorZfromZoom(l){return this.cameraToCenterDistance/this._worldSizeFromZoom(l)}_minimumHeightOverTerrain(){const l=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(l)}_zoomFromMercatorZ(l){return this.scaleZoom(this.cameraToCenterDistance/(l*this.tileSize))}zoomFromMercatorZAdjusted(l){let h=0,g=a.GLOBE_ZOOM_THRESHOLD_MAX,v=0,w=1/0;for(;g-h>1e-6&&g>h;){const C=h+.5*(g-h),M=this.tileSize*Math.pow(2,C),R=this.getCameraToCenterDistance(this.projection,C,M),z=this.scaleZoom(R/(l*this.tileSize)),D=Math.abs(C-z);D<w&&(w=D,v=C),C<z?h=C:g=C}return v}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(a.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(l,h){const g=Math.min(l.x,h.x),v=Math.max(l.x,h.x),w=Math.min(l.y,h.y),C=Math.max(l.y,h.y);if(w<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const M=[new a.pointGeometry(g,w),new a.pointGeometry(v,C),new a.pointGeometry(g,C),new a.pointGeometry(v,w)],R=this.renderWorldCopies?-3:0,z=this.renderWorldCopies?4:1;for(const D of M){const W=this.pointRayIntersection(D);if(W.t<0)return!0;const te=this.rayIntersectionCoordinate(W);if(te.x<R||te.y<0||te.x>z||te.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+a.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new a.pointGeometry(0,0),new a.pointGeometry(this.width,this.height))}zoomDeltaToMovement(l,h){const g=a.length(a.sub([],this._camera.position,l)),v=this._zoomFromMercatorZ(g)+h;return g-this._mercatorZfromZoom(v)}getCameraPoint(){if(this.projection.name==="globe"){const l=function([h,g,v],w){const C=[h,g,v,1];a.transformMat4$1(C,C,w);const M=C[3]=Math.max(C[3],1e-6);return C[0]/=M,C[1]/=M,C[2]/=M,C}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new a.pointGeometry(l[0],l[1])}{const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.pointGeometry(0,l))}}getCameraToCenterDistance(l,h=this.zoom,g=this.worldSize){const v=Ms(l,h,this.width,this.height,1024),w=l.pixelSpaceConversion(this.center.lat,g,v);return .5/Math.tan(.5*this._fov)*this.height*w}getWorldToCameraMatrix(){const l=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&a.multiply(l,l,this.globeMatrix),l}}function To(p,l){let h=!1,g=null;const v=()=>{g=null,h&&(p(),g=setTimeout(v,l),h=!1)};return()=>(h=!0,g||v(),g)}class hy{constructor(l){this._hashName=l&&encodeURIComponent(l),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=To(this._updateHashUnthrottled.bind(this),300)}addTo(l){return this._map=l,a.window.addEventListener("hashchange",this._onHashChange,!1),l.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),a.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const l=this._map;if(!l)return"";const h=jf(l);if(this._hashName){const g=this._hashName;let v=!1;const w=a.window.location.hash.slice(1).split("&").map(C=>{const M=C.split("=")[0];return M===g?(v=!0,`${M}=${h}`):C}).filter(C=>C);return v||w.push(`${g}=${h}`),`#${w.join("&")}`}return`#${h}`}_getCurrentHash(){const l=a.window.location.hash.replace("#","");if(this._hashName){let h;return l.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(h=g)}),(h&&h[1]||"").split("/")}return l.split("/")}_onHashChange(){const l=this._map;if(!l)return!1;const h=this._getCurrentHash();if(h.length>=3&&!h.some(g=>isNaN(g))){const g=l.dragRotate.isEnabled()&&l.touchZoomRotate.isEnabled()?+(h[3]||0):l.getBearing();return l.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:g,pitch:+(h[4]||0)}),!0}return!1}_updateHashUnthrottled(){const l=a.window.location.href.replace(/(#.+)?$/,this.getHashString());a.window.history.replaceState(a.window.history.state,null,l)}}function jf(p,l){const h=p.getCenter(),g=Math.round(100*p.getZoom())/100,v=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,v),C=Math.round(h.lng*w)/w,M=Math.round(h.lat*w)/w,R=p.getBearing(),z=p.getPitch();let D=l?`/${C}/${M}/${g}`:`${g}/${M}/${C}`;return(R||z)&&(D+="/"+Math.round(10*R)/10),z&&(D+=`/${Math.round(z)}`),D}const qc={linearity:.3,easing:a.bezier(0,0,.3,1)},Tl=a.extend({deceleration:2500,maxSpeed:1400},qc),fy=a.extend({deceleration:20,maxSpeed:1400},qc),bd=a.extend({deceleration:1e3,maxSpeed:360},qc),Gf=a.extend({deceleration:1e3,maxSpeed:90},qc);class wd{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.exported.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,h=a.exported.now();for(;l.length>0&&h-l[0].time>160;)l.shift()}_onMoveEnd(l){if(a.exported.prefersReducedMotion||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const h={zoom:0,bearing:0,pitch:0,pan:new a.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:w}of this._inertiaBuffer)h.zoom+=w.zoomDelta||0,h.bearing+=w.bearingDelta||0,h.pitch+=w.pitchDelta||0,w.panDelta&&h.pan._add(w.panDelta),w.around&&(h.around=w.around),w.pinchAround&&(h.pinchAround=w.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(h.pan.mag()){const w=Zc(h.pan.mag(),g,a.extend({},Tl,l||{}));v.offset=h.pan.mult(w.amount/h.pan.mag()),v.center=this._map.transform.center,Hc(v,w)}if(h.zoom){const w=Zc(h.zoom,g,fy);v.zoom=this._map.transform.zoom+w.amount,Hc(v,w)}if(h.bearing){const w=Zc(h.bearing,g,bd);v.bearing=this._map.transform.bearing+a.clamp(w.amount,-179,179),Hc(v,w)}if(h.pitch){const w=Zc(h.pitch,g,Gf);v.pitch=this._map.transform.pitch+w.amount,Hc(v,w)}if(v.zoom||v.bearing){const w=h.pinchAround===void 0?h.around:h.pinchAround;v.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),v.noMoveStart=!0,v}}function Hc(p,l){(!p.duration||p.duration<l.duration)&&(p.duration=l.duration,p.easing=l.easing)}function Zc(p,l,h){const{maxSpeed:g,linearity:v,deceleration:w}=h,C=a.clamp(p*v/(l/1e3),-g,g),M=Math.abs(C)/(w*v);return{easing:h.easing,duration:1e3*M,amount:C*(M/2)}}class Ei extends a.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,h,g,v={}){const w=Y(h.getCanvasContainer(),g),C=h.unproject(w);super(l,a.extend({point:w,lngLat:C,originalEvent:g},v)),this._defaultPrevented=!1,this.target=h}}class Sd extends a.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,h,g){const v=l==="touchend"?g.changedTouches:g.touches,w=he(h.getCanvasContainer(),v),C=w.map(R=>h.unproject(R)),M=w.reduce((R,z,D,W)=>R.add(z.div(W.length)),new a.pointGeometry(0,0));super(l,{points:w,point:M,lngLats:C,lngLat:h.unproject(M),originalEvent:g}),this._defaultPrevented=!1}}class ax extends a.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,h,g){super(l,{originalEvent:g}),this._defaultPrevented=!1}}class py{constructor(l,h){this._map=l,this._clickTolerance=h.clickTolerance}reset(){this._mousedownPos=void 0}wheel(l){return this._firePreventable(new ax(l.type,this._map,l))}mousedown(l,h){return this._mousedownPos=h,this._firePreventable(new Ei(l.type,this._map,l))}mouseup(l){this._map.fire(new Ei(l.type,this._map,l))}preclick(l){const h=a.extend({},l);h.type="preclick",this._map.fire(new Ei(h.type,this._map,h))}click(l,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||(this.preclick(l),this._map.fire(new Ei(l.type,this._map,l)))}dblclick(l){return this._firePreventable(new Ei(l.type,this._map,l))}mouseover(l){this._map.fire(new Ei(l.type,this._map,l))}mouseout(l){this._map.fire(new Ei(l.type,this._map,l))}touchstart(l){return this._firePreventable(new Sd(l.type,this._map,l))}touchmove(l){this._map.fire(new Sd(l.type,this._map,l))}touchend(l){this._map.fire(new Sd(l.type,this._map,l))}touchcancel(l){this._map.fire(new Sd(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ed{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(l){this._map.fire(new Ei(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ei("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new Ei(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Wf{constructor(l,h){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,h){this.isEnabled()&&l.shiftKey&&l.button===0&&(B(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(l,h){if(!this._active)return;const g=h,v=this._startPos,w=this._lastPos;if(!v||!w||w.equals(g)||!this._box&&g.dist(v)<this._clickTolerance)return;this._lastPos=g,this._box||(this._box=O("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));const C=Math.min(v.x,g.x),M=Math.max(v.x,g.x),R=Math.min(v.y,g.y),z=Math.max(v.y,g.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${C}px,${R}px)`,this._box.style.width=M-C+"px",this._box.style.height=z-R+"px")})}mouseupWindow(l,h){if(!this._active)return;const g=this._startPos,v=h;if(g&&l.button===0){if(this.reset(),J(),g.x!==v.x||g.y!==v.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:w=>w.fitScreenCoordinates(g,v,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",l)}}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),U(),delete this._startPos,delete this._lastPos}_fireEvent(l,h){return this._map.fire(new a.Event(l,{originalEvent:h}))}}function Td(p,l){const h={};for(let g=0;g<p.length;g++)h[p[g].identifier]=l[g];return h}class my{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(l,h,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=l.timeStamp),g.length===this.numTouches&&(this.centroid=function(v){const w=new a.pointGeometry(0,0);for(const C of v)w._add(C);return w.div(v.length)}(h),this.touches=Td(g,h)))}touchmove(l,h,g){if(this.aborted||!this.centroid)return;const v=Td(g,h);for(const w in this.touches){const C=this.touches[w],M=v[w];(!M||M.dist(C)>30)&&(this.aborted=!0)}}touchend(l,h,g){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class Cl{constructor(l){this.singleTap=new my(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(l,h,g){this.singleTap.touchstart(l,h,g)}touchmove(l,h,g){this.singleTap.touchmove(l,h,g)}touchend(l,h,g){const v=this.singleTap.touchend(l,h,g);if(v){const w=l.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(v)<30;if(w&&C||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class qf{constructor(){this._zoomIn=new Cl({numTouches:1,numTaps:2}),this._zoomOut=new Cl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,h,g){this._zoomIn.touchstart(l,h,g),this._zoomOut.touchstart(l,h,g)}touchmove(l,h,g){this._zoomIn.touchmove(l,h,g),this._zoomOut.touchmove(l,h,g)}touchend(l,h,g){const v=this._zoomIn.touchend(l,h,g),w=this._zoomOut.touchend(l,h,g);return v?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:C.getZoom()+1,around:C.unproject(v)},{originalEvent:l})}):w?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:C.getZoom()-1,around:C.unproject(w)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const gy={0:1,2:2};class Cd{constructor(l){this.reset(),this._clickTolerance=l.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(l,h){return!1}_move(l,h){return{}}mousedown(l,h){if(this._lastPoint)return;const g=se(l);this._correctButton(l,g)&&(this._lastPoint=h,this._eventButton=g)}mousemoveWindow(l,h){const g=this._lastPoint;if(g){if(l.preventDefault(),this._eventButton!=null&&function(v,w){const C=gy[w];return v.buttons===void 0||(v.buttons&C)!==C}(l,this._eventButton))this.reset();else if(this._moved||!(h.dist(g)<this._clickTolerance))return this._moved=!0,this._lastPoint=h,this._move(g,h)}}mouseupWindow(l){this._lastPoint&&se(l)===this._eventButton&&(this._moved&&J(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yy extends Cd{mousedown(l,h){super.mousedown(l,h),this._lastPoint&&(this._active=!0)}_correctButton(l,h){return h===0&&!l.ctrlKey}_move(l,h){return{around:h,panDelta:h.sub(l)}}}class Hf extends Cd{_correctButton(l,h){return h===0&&l.ctrlKey||h===2}_move(l,h){const g=.8*(h.x-l.x);if(g)return this._active=!0,{bearingDelta:g}}contextmenu(l){l.preventDefault()}}class Zf extends Cd{_correctButton(l,h){return h===0&&l.ctrlKey||h===2}_move(l,h){const g=-.5*(h.y-l.y);if(g)return this._active=!0,{pitchDelta:g}}contextmenu(l){l.preventDefault()}}class Ml{constructor(l,h){this._map=l,this._el=l.getCanvasContainer(),this._minTouches=1,this._clickTolerance=h.clickTolerance||1,this.reset(),a.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new a.pointGeometry(0,0)}touchstart(l,h,g){return this._calculateTransform(l,h,g)}touchmove(l,h,g){if(this._active&&!(g.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(g.length===1&&!a.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return l.cancelable&&l.preventDefault(),this._calculateTransform(l,h,g)}}touchend(l,h,g){this._calculateTransform(l,h,g),this._active&&g.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,h,g){g.length>0&&(this._active=!0);const v=Td(g,h),w=new a.pointGeometry(0,0),C=new a.pointGeometry(0,0);let M=0;for(const z in v){const D=v[z],W=this._touches[z];W&&(w._add(D),C._add(D.sub(W)),M++,v[z]=D)}if(this._touches=v,M<this._minTouches||!C.mag())return;const R=C.div(M);return this._sum._add(R),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(M),panDelta:R}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=O("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Md{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(l){}_move(l,h,g){return{}}touchstart(l,h,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([h[0],h[1]]))}touchmove(l,h,g){const v=this._firstTwoTouches;if(!v)return;l.preventDefault();const[w,C]=v,M=Xc(g,h,w),R=Xc(g,h,C);if(!M||!R)return;const z=this._aroundCenter?null:M.add(R).div(2);return this._move([M,R],z,l)}touchend(l,h,g){if(!this._firstTwoTouches)return;const[v,w]=this._firstTwoTouches,C=Xc(g,h,v),M=Xc(g,h,w);C&&M||(this._active&&J(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Xc(p,l,h){for(let g=0;g<p.length;g++)if(p[g].identifier===h)return l[g]}function _y(p,l){return Math.log(p/l)/Math.LN2}class vy extends Md{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,h){const g=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(_y(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:_y(this._distance,g),pinchAround:h}}}function Xf(p,l){return 180*p.angleWith(l)/Math.PI}class xy extends Md{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,h){const g=this._vector;if(this._vector=l[0].sub(l[1]),g&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Xf(this._vector,g),pinchAround:h}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const h=25/(Math.PI*this._minDiameter)*360,g=this._startVector;if(!g)return!1;const v=Xf(l,g);return Math.abs(v)<h}}function Ad(p){return Math.abs(p.y)>Math.abs(p.x)}class Fi extends Md{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(l){this._lastPoints=l,Ad(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,h,g){const v=this._lastPoints;if(!v)return;const w=l[0].sub(v[0]),C=l[1].sub(v[1]);return this._map._cooperativeGestures&&!a.isFullscreen()&&g.touches.length<3||(this._valid=this.gestureBeginsVertically(w,C,g.timeStamp),!this._valid)?void 0:(this._lastPoints=l,this._active=!0,{pitchDelta:(w.y+C.y)/2*-.5})}gestureBeginsVertically(l,h,g){if(this._valid!==void 0)return this._valid;const v=l.mag()>=2,w=h.mag()>=2;if(!v&&!w)return;if(!v||!w)return this._firstMove==null&&(this._firstMove=g),g-this._firstMove<100&&void 0;const C=l.y>0==h.y>0;return Ad(l)&&Ad(h)&&C}}const sx={panStep:100,bearingStep:15,pitchStep:10};class by{constructor(){const l=sx;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let h=0,g=0,v=0,w=0,C=0;switch(l.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:l.shiftKey?g=-1:(l.preventDefault(),w=-1);break;case 39:l.shiftKey?g=1:(l.preventDefault(),w=1);break;case 38:l.shiftKey?v=1:(l.preventDefault(),C=-1);break;case 40:l.shiftKey?v=-1:(l.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(g=0,v=0),{cameraAnimation:M=>{const R=M.getZoom();M.easeTo({duration:300,easeId:"keyboardHandler",easing:lx,zoom:h?Math.round(R)+h*(l.shiftKey?2:1):R,bearing:M.getBearing()+g*this._bearingStep,pitch:M.getPitch()+v*this._pitchStep,offset:[-w*this._panStep,-C*this._panStep],center:M.getCenter()},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function lx(p){return p*(2-p)}const wy=4.000244140625;class Ea{constructor(l,h){this._map=l,this._el=l.getCanvasContainer(),this._handler=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,a.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(l.ctrlKey||l.metaKey||this.isZooming()||a.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let h=l.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const g=a.exported.now(),v=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,h!==0&&h%wy==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(v*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),l.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=l,this._delta-=h,this._active||this._start(l)),l.preventDefault()}_onTimeout(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=Y(this._el,l);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:h,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._map.transform;this._type==="wheel"&&l.projection.wrap&&(l._center.lng>=180||l._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const h=()=>l._terrainEnabled()&&this._aroundCoord?l.computeZoomRelativeTo(this._aroundCoord):l.zoom;if(this._delta!==0){const R=this._type==="wheel"&&Math.abs(this._delta)>wy?this._wheelZoomRate:this._defaultZoomRate;let z=2/(1+Math.exp(-Math.abs(this._delta*R)));this._delta<0&&z!==0&&(z=1/z);const D=h(),W=Math.pow(2,D),te=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):W;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(te*z))),this._type==="wheel"&&(this._startZoom=D,this._easing=this._smoothOutEasing(200)),this._delta=0}const g=typeof this._targetZoom=="number"?this._targetZoom:h(),v=this._startZoom,w=this._easing;let C,M=!1;if(this._type==="wheel"&&v&&w){const R=Math.min((a.exported.now()-this._lastWheelEventTime)/200,1),z=w(R);C=a.number(v,g,z),R<1?this._frameId||(this._frameId=!0):M=!0}else C=g,M=!0;return this._active=!0,M&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!M,zoomDelta:C-h(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let h=a.ease;if(this._prevEase){const g=this._prevEase,v=(a.exported.now()-g.start)/g.duration,w=g.easing(v+.01)-g.easing(v),C=.27/Math.sqrt(w*w+1e-4)*.01,M=Math.sqrt(.0729-C*C);h=a.bezier(C,M,.25,1)}return this._prevEase={start:a.exported.now(),duration:l,easing:h},h}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=O("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(a.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class Sy{constructor(l,h){this._clickZoom=l,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Al{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(l,h){return l.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:g.getZoom()+(l.shiftKey?-1:1),around:g.unproject(h)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class oa{constructor(){this._tap=new Cl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(l,h,g){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?g.length>0&&(this._swipePoint=h[0],this._swipeTouch=g[0].identifier):this._tap.touchstart(l,h,g))}touchmove(l,h,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const v=h[0],w=v.y-this._swipePoint.y;return this._swipePoint=v,l.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(l,h,g)}touchend(l,h,g){this._tapTime?this._swipePoint&&g.length===0&&this.reset():this._tap.touchend(l,h,g)&&(this._tapTime=l.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kd{constructor(l,h,g){this._el=l,this._mousePan=h,this._touchPan=g}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class nn{constructor(l,h,g){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=h,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Ey{constructor(l,h,g,v){this._el=l,this._touchZoom=h,this._touchRotate=g,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Kc=p=>p.zoom||p.drag||p.pitch||p.rotate;class Yc extends a.Event{}class Qc{constructor(){this.constants=[1,1,.01],this.radius=0}setup(l,h){const g=a.sub([],h,l);this.radius=a.length(g[2]<0?a.div([],g,this.constants):[g[0],g[1],0])}projectRay(l){a.div(l,l,this.constants),a.normalize(l,l),a.mul$1(l,l,this.constants);const h=a.scale$2([],l,this.radius);if(h[2]>0){const g=a.scale$2([],[0,0,1],a.dot(h,[0,0,1])),v=a.scale$2([],a.normalize([],[h[0],h[1],0]),this.radius),w=a.add([],h,a.scale$2([],a.sub([],a.add([],v,g),h),2));h[0]=w[0],h[1]=w[1]}return h}}function Jc(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta}class Ty{constructor(l,h){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new wd(l),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Qc,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(h),a.bindAll(["handleEvent","handleWindowEvent"],this);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[a.window,"blur",void 0]];for(const[v,w,C]of this._listeners)v.addEventListener(w,v===a.window.document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(const[l,h,g]of this._listeners)l.removeEventListener(h,l===a.window.document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(l){const h=this._map,g=h.getCanvasContainer();this._add("mapEvent",new py(h,l));const v=h.boxZoom=new Wf(h,l);this._add("boxZoom",v);const w=new qf,C=new Al;h.doubleClickZoom=new Sy(C,w),this._add("tapZoom",w),this._add("clickZoom",C);const M=new oa;this._add("tapDragZoom",M);const R=h.touchPitch=new Fi(h);this._add("touchPitch",R);const z=new Hf(l),D=new Zf(l);h.dragRotate=new nn(l,z,D),this._add("mouseRotate",z,["mousePitch"]),this._add("mousePitch",D,["mouseRotate"]);const W=new yy(l),te=new Ml(h,l);h.dragPan=new kd(g,W,te),this._add("mousePan",W),this._add("touchPan",te,["touchZoom","touchRotate"]);const ie=new xy,ae=new vy;h.touchZoomRotate=new Ey(g,ae,ie,M),this._add("touchRotate",ie,["touchPan","touchZoom"]),this._add("touchZoom",ae,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Ed(h));const le=h.scrollZoom=new Ea(h,this);this._add("scrollZoom",le,["mousePan"]);const de=h.keyboard=new by;this._add("keyboard",de);for(const Q of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])l.interactive&&l[Q]&&h[Q].enable(l[Q])}_add(l,h,g){this._handlers.push({handlerName:l,handler:h,allowed:g}),this._handlersById[l]=h}stop(l){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Kc(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(l,h,g){for(const v in l)if(v!==g&&(!h||h.indexOf(v)<0))return!0;return!1}handleWindowEvent(l){this.handleEvent(l,`${l.type}Window`)}_getMapTouches(l){const h=[];for(const g of l)this._el.contains(g.target)&&h.push(g);return h}handleEvent(l,h){this._updatingCamera=!0;const g=l.type==="renderFrame",v=g?void 0:l,w={needsRenderFrame:!1},C={},M={},R=l.touches?this._getMapTouches(l.touches):void 0,z=R?he(this._el,R):g?void 0:Y(this._el,l);for(const{handlerName:te,handler:ie,allowed:ae}of this._handlers){if(!ie.isEnabled())continue;let le;this._blockedByActive(M,ae,te)?ie.reset():ie[h||l.type]&&(le=ie[h||l.type](l,z,R),this.mergeHandlerResult(w,C,le,te,v),le&&le.needsRenderFrame&&this._triggerRenderFrame()),(le||ie.isActive())&&(M[te]=ie)}const D={};for(const te in this._previousActiveHandlers)M[te]||(D[te]=v);this._previousActiveHandlers=M,(Object.keys(D).length||Jc(w))&&(this._changes.push([w,C,D]),this._triggerRenderFrame()),(Object.keys(M).length||Jc(w))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:W}=w;W&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],W(this._map))}mergeHandlerResult(l,h,g,v,w){if(!g)return;a.extend(l,g);const C={handlerName:v,originalEvent:g.originalEvent||w};g.zoomDelta!==void 0&&(h.zoom=C),g.panDelta!==void 0&&(h.drag=C),g.pitchDelta!==void 0&&(h.pitch=C),g.bearingDelta!==void 0&&(h.rotate=C)}_applyChanges(){const l={},h={},g={};for(const[v,w,C]of this._changes)v.panDelta&&(l.panDelta=(l.panDelta||new a.pointGeometry(0,0))._add(v.panDelta)),v.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+v.pitchDelta),v.around!==void 0&&(l.around=v.around),v.aroundCoord!==void 0&&(l.aroundCoord=v.aroundCoord),v.pinchAround!==void 0&&(l.pinchAround=v.pinchAround),v.noInertia&&(l.noInertia=v.noInertia),a.extend(h,w),a.extend(g,C);this._updateMapTransform(l,h,g),this._changes=[]}_updateMapTransform(l,h,g){const v=this._map,w=v.transform,C=xe=>[xe.x,xe.y,xe.z];if((xe=>{const ye=this._eventsInProgress.drag;return ye&&!this._handlersById[ye.handlerName].isActive()})()&&!Jc(l)){const xe=w.zoom;w.cameraElevationReference="sea",w.recenterOnTerrain(),w.cameraElevationReference="ground",xe!==w.zoom&&this._map._update(!0)}if(w._isCameraConstrained&&v._stop(!0),!Jc(l))return void this._fireEvents(h,g,!0);let{panDelta:M,zoomDelta:R,bearingDelta:z,pitchDelta:D,around:W,aroundCoord:te,pinchAround:ie}=l;w._isCameraConstrained&&(R>0&&(R=0),w._isCameraConstrained=!1),ie!==void 0&&(W=ie),(R||(xe=>h.drag&&!this._eventsInProgress.drag)())&&W&&(this._dragOrigin=C(w.pointCoordinate3D(W)),this._trackingEllipsoid.setup(w._camera.position,this._dragOrigin)),w.cameraElevationReference="sea",v._stop(!0),W=W||v.transform.centerPoint,z&&(w.bearing+=z),D&&(w.pitch+=D),w._updateCameraState();const ae=[0,0,0];if(M)if(w.projection.name==="mercator"){const xe=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(W).dir),ye=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(W.sub(M)).dir);ae[0]=ye[0]-xe[0],ae[1]=ye[1]-xe[1]}else{const xe=w.pointCoordinate(W);if(w.projection.name==="globe"){M=M.rotate(-w.angle);const ye=w._pixelsPerMercatorPixel/w.worldSize;ae[0]=-M.x*a.mercatorScale(a.latFromMercatorY(xe.y))*ye,ae[1]=-M.y*a.mercatorScale(w.center.lat)*ye}else{const ye=w.pointCoordinate(W.sub(M));xe&&ye&&(ae[0]=ye.x-xe.x,ae[1]=ye.y-xe.y)}}const le=w.zoom,de=[0,0,0];if(R){const xe=C(te||w.pointCoordinate3D(W)),ye={dir:a.normalize([],a.sub([],xe,w._camera.position))};if(ye.dir[2]<0){const we=w.zoomDeltaToMovement(xe,R);a.scale$2(de,ye.dir,we)}}const Q=a.add(ae,ae,de);w._translateCameraConstrained(Q),R&&Math.abs(w.zoom-le)>1e-4&&w.recenterOnTerrain(),w.cameraElevationReference="ground",this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(h,g,!0)}_fireEvents(l,h,g){const v=Kc(this._eventsInProgress),w=Kc(l),C={};for(const D in l){const{originalEvent:W}=l[D];this._eventsInProgress[D]||(C[`${D}start`]=W),this._eventsInProgress[D]=l[D]}!v&&w&&this._fireEvent("movestart",w.originalEvent);for(const D in C)this._fireEvent(D,C[D]);w&&this._fireEvent("move",w.originalEvent);for(const D in l){const{originalEvent:W}=l[D];this._fireEvent(D,W)}const M={};let R;for(const D in this._eventsInProgress){const{handlerName:W,originalEvent:te}=this._eventsInProgress[D];this._handlersById[W].isActive()||(delete this._eventsInProgress[D],R=h[W]||te,M[`${D}end`]=R)}for(const D in M)this._fireEvent(D,M[D]);const z=Kc(this._eventsInProgress);if(g&&(v||w)&&!z){this._updatingCamera=!0;const D=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),W=te=>te!==0&&-this._bearingSnap<te&&te<this._bearingSnap;D?(W(D.bearing||this._map.getBearing())&&(D.bearing=0),this._map.easeTo(D,{originalEvent:R})):(this._map.fire(new a.Event("moveend",{originalEvent:R})),W(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,h){this._map.fire(new a.Event(l,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{this._frameId=void 0,this.handleEvent(new Yc("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Kf="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Cy extends a.Evented{constructor(l,h){super(),this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=h.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}getCenter(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(l,h){return this.jumpTo({center:l},h)}panBy(l,h,g){return l=a.pointGeometry.convert(l).mult(-1),this.panTo(this.transform.center,a.extend({offset:l},h),g)}panTo(l,h,g){return this.easeTo(a.extend({center:l},h),g)}getZoom(){return this.transform.zoom}setZoom(l,h){return this.jumpTo({zoom:l},h),this}zoomTo(l,h,g){return this.easeTo(a.extend({zoom:l},h),g)}zoomIn(l,h){return this.zoomTo(this.getZoom()+1,l,h),this}zoomOut(l,h){return this.zoomTo(this.getZoom()-1,l,h),this}getBearing(){return this.transform.bearing}setBearing(l,h){return this.jumpTo({bearing:l},h),this}getPadding(){return this.transform.padding}setPadding(l,h){return this.jumpTo({padding:l},h),this}rotateTo(l,h,g){return this.easeTo(a.extend({bearing:l},h),g)}resetNorth(l,h){return this.rotateTo(0,a.extend({duration:1e3},l),h),this}resetNorthPitch(l,h){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},l),h),this}snapToNorth(l,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,h):this}getPitch(){return this.transform.pitch}setPitch(l,h){return this.jumpTo({pitch:l},h),this}cameraForBounds(l,h){l=a.LngLatBounds.convert(l);const g=h&&h.bearing||0,v=h&&h.pitch||0,w=l.getNorthWest(),C=l.getSouthEast();return this._cameraForBounds(this.transform,w,C,g,v,h)}_extendCameraOptions(l){const h={top:0,bottom:0,right:0,left:0};if(typeof(l=a.extend({padding:h,offset:[0,0],maxZoom:this.transform.maxZoom},l)).padding=="number"){const g=l.padding;l.padding={top:g,bottom:g,right:g,left:g}}return l.padding=a.extend(h,l.padding),l}_minimumAABBFrustumDistance(l,h){const g=h.max[0]-h.min[0],v=h.max[1]-h.min[1];return g/v>l.aspect?g/(2*Math.tan(.5*l.fovX)*l.aspect):v/(2*Math.tan(.5*l.fovY)*l.aspect)}_cameraForBoundsOnGlobe(l,h,g,v,w,C){const M=l.clone(),R=this._extendCameraOptions(C);M.bearing=v,M.pitch=w;const z=a.LngLat.convert(h),D=a.LngLat.convert(g),W=.5*(z.lat+D.lat),te=.5*(z.lng+D.lng),ie=a.latLngToECEF(W,te),ae=a.normalize([],ie),le=a.normalize([],a.cross([],ae,[0,1,0])),de=a.cross([],le,ae),Q=[le[0],le[1],le[2],0,de[0],de[1],de[2],0,ae[0],ae[1],ae[2],0,0,0,0,1],xe=[ie,a.latLngToECEF(z.lat,z.lng),a.latLngToECEF(D.lat,z.lng),a.latLngToECEF(D.lat,D.lng),a.latLngToECEF(z.lat,D.lng),a.latLngToECEF(W,z.lng),a.latLngToECEF(W,D.lng),a.latLngToECEF(z.lat,te),a.latLngToECEF(D.lat,te)];let ye=a.Aabb.fromPoints(xe.map(wt=>[a.dot(le,wt),a.dot(de,wt),a.dot(ae,wt)]));const we=a.transformMat4([],ye.center,Q);a.squaredLength(we)===0&&a.set(we,0,0,1),a.normalize(we,we),a.scale$2(we,we,a.GLOBE_RADIUS),M.center=a.ecefToLatLng(we);const Ie=M.getWorldToCameraMatrix(),Ae=a.invert(new Float64Array(16),Ie);ye=a.Aabb.applyTransform(ye,a.multiply([],Ie,Q)),a.transformMat4(we,we,Ie);const Fe=.5*(ye.max[2]-ye.min[2]),He=this._minimumAABBFrustumDistance(M,ye),tt=a.scale$2([],[0,0,1],Fe),ot=a.add(tt,we,tt),Ot=He+(M.pitch===0?0:a.distance(we,ot)),Ye=M.globeCenterInViewSpace,xt=a.sub([],we,[Ye[0],Ye[1],Ye[2]]);a.normalize(xt,xt),a.scale$2(xt,xt,Ot);const dt=a.add([],we,xt);a.transformMat4(dt,dt,Ae);const Tt=a.earthRadius/a.GLOBE_RADIUS,rt=a.length(dt),qe=a.mercatorZfromAltitude(Math.max(rt*Tt-a.earthRadius,Number.EPSILON),0),at=Math.min(M.zoomFromMercatorZAdjusted(qe),R.maxZoom);return at>.5*(a.GLOBE_ZOOM_THRESHOLD_MIN+a.GLOBE_ZOOM_THRESHOLD_MAX)?(M.setProjection({name:"mercator"}),M.zoom=at,this._cameraForBounds(M,h,g,v,w,C)):{center:M.center,zoom:at,bearing:v,pitch:w}}queryTerrainElevation(l,h){const g=this.transform.elevation;return g?(h=a.extend({},{exaggerated:!0},h),g.getAtPoint(a.MercatorCoordinate.fromLngLat(l),null,h.exaggerated)):null}_cameraForBounds(l,h,g,v,w,C){if(l.projection.name==="globe")return this._cameraForBoundsOnGlobe(l,h,g,v,w,C);const M=l.clone(),R=this._extendCameraOptions(C),z=M.padding;M.bearing=v,M.pitch=w;const D=a.LngLat.convert(h),W=a.LngLat.convert(g),te=new a.LngLat(D.lng,W.lat),ie=new a.LngLat(W.lng,D.lat),ae=M.project(D),le=M.project(W),de=this.queryTerrainElevation(D),Q=this.queryTerrainElevation(W),xe=this.queryTerrainElevation(te),ye=this.queryTerrainElevation(ie),we=[[ae.x,ae.y,Math.min(de||0,Q||0,xe||0,ye||0)],[le.x,le.y,Math.max(de||0,Q||0,xe||0,ye||0)]];let Ie=a.Aabb.fromPoints(we);const Ae=M.getWorldToCameraMatrix(),Fe=a.invert(new Float64Array(16),Ae);Ie=a.Aabb.applyTransform(Ie,Ae);const He=a.sub([],Ie.max,Ie.min),tt=z.left||0,ot=z.right||0,Ot=z.bottom||0,Ye=z.top||0,{left:xt,right:dt,top:Tt,bottom:rt}=R.padding,qe=.5*(tt+ot),at=.5*(Ye+Ot),wt=Math.min(M.scaleZoom(M.scale*Math.min((M.width-(tt+ot+xt+dt))/He[0],(M.height-(Ot+Ye+rt+Tt))/He[1])),R.maxZoom),kt=M.scale/M.zoomScale(wt);Ie=new a.Aabb([Ie.min[0]-(xt+qe)*kt,Ie.min[1]-(rt+at)*kt,Ie.min[2]],[Ie.max[0]+(dt+qe)*kt,Ie.max[1]+(Tt+at)*kt,Ie.max[2]]);const un=.5*He[2],Dn=this._minimumAABBFrustumDistance(M,Ie),on=[0,0,1,0];a.transformMat4$1(on,on,Ae),a.normalize$2(on,on);const Xt=a.scale$2([],on,Dn+un),dn=a.add([],Ie.center,Xt),$n=(typeof R.offset.x=="number"&&typeof R.offset.y=="number"?new a.pointGeometry(R.offset.x,R.offset.y):a.pointGeometry.convert(R.offset)).rotate(-a.degToRad(v));Ie.center[0]-=$n.x*kt,Ie.center[1]+=$n.y*kt,a.transformMat4(Ie.center,Ie.center,Fe),a.transformMat4(dn,dn,Fe);const yn=[Ie.center[0],Ie.center[1],dn[2]*M.pixelsPerMeter];a.scale$2(yn,yn,1/M.worldSize);const lr=a.lngFromMercatorX(yn[0]),ur=a.latFromMercatorY(yn[1]),Mr=Math.min(M._zoomFromMercatorZ(yn[2]),R.maxZoom),wr=new a.LngLat(lr,ur);return M.mercatorFromTransition&&Mr<.5*(a.GLOBE_ZOOM_THRESHOLD_MIN+a.GLOBE_ZOOM_THRESHOLD_MAX)?(M.setProjection({name:"globe"}),M.zoom=Mr,this._cameraForBounds(M,h,g,v,w,C)):{center:wr,zoom:Mr,bearing:v,pitch:w}}fitBounds(l,h,g){const v=this.cameraForBounds(l,h);return this._fitInternal(v,h,g)}fitScreenCoordinates(l,h,g,v,w){const C=a.pointGeometry.convert(l),M=a.pointGeometry.convert(h),R=new a.pointGeometry(Math.min(C.x,M.x),Math.min(C.y,M.y)),z=new a.pointGeometry(Math.max(C.x,M.x),Math.max(C.y,M.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(C,M))return this;const D=this.transform.pointLocation3D(R),W=this.transform.pointLocation3D(z),te=this.transform.pointLocation3D(new a.pointGeometry(R.x,z.y)),ie=this.transform.pointLocation3D(new a.pointGeometry(z.x,R.y)),ae=[Math.min(D.lng,W.lng,te.lng,ie.lng),Math.min(D.lat,W.lat,te.lat,ie.lat)],le=[Math.max(D.lng,W.lng,te.lng,ie.lng),Math.max(D.lat,W.lat,te.lat,ie.lat)],de=v&&v.pitch?v.pitch:this.getPitch(),Q=this._cameraForBounds(this.transform,ae,le,g,de,v);return this._fitInternal(Q,v,w)}_fitInternal(l,h,g){return l?(delete(h=a.extend(l,h)).padding,h.linear?this.easeTo(h,g):this.flyTo(h,g)):this}jumpTo(l,h){this.stop();const g=l.preloadOnly?this.transform.clone():this.transform;let v=!1,w=!1,C=!1;return"zoom"in l&&g.zoom!==+l.zoom&&(v=!0,g.zoom=+l.zoom),l.center!==void 0&&(g.center=a.LngLat.convert(l.center)),"bearing"in l&&g.bearing!==+l.bearing&&(w=!0,g.bearing=+l.bearing),"pitch"in l&&g.pitch!==+l.pitch&&(C=!0,g.pitch=+l.pitch),l.padding==null||g.isPaddingEqual(l.padding)||(g.padding=l.padding),l.preloadOnly?(this._preloadTiles(g),this):(this.fire(new a.Event("movestart",h)).fire(new a.Event("move",h)),v&&this.fire(new a.Event("zoomstart",h)).fire(new a.Event("zoom",h)).fire(new a.Event("zoomend",h)),w&&this.fire(new a.Event("rotatestart",h)).fire(new a.Event("rotate",h)).fire(new a.Event("rotateend",h)),C&&this.fire(new a.Event("pitchstart",h)).fire(new a.Event("pitch",h)).fire(new a.Event("pitchend",h)),this.fire(new a.Event("moveend",h)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||a.warnOnce(Kf),this.transform.getFreeCameraOptions()}setFreeCameraOptions(l,h){const g=this.transform;if(!g.projection.supportsFreeCamera)return a.warnOnce(Kf),this;this.stop();const v=g.zoom,w=g.pitch,C=g.bearing;g.setFreeCameraOptions(l);const M=v!==g.zoom,R=w!==g.pitch,z=C!==g.bearing;return this.fire(new a.Event("movestart",h)).fire(new a.Event("move",h)),M&&this.fire(new a.Event("zoomstart",h)).fire(new a.Event("zoom",h)).fire(new a.Event("zoomend",h)),z&&this.fire(new a.Event("rotatestart",h)).fire(new a.Event("rotate",h)).fire(new a.Event("rotateend",h)),R&&this.fire(new a.Event("pitchstart",h)).fire(new a.Event("pitch",h)).fire(new a.Event("pitchend",h)),this.fire(new a.Event("moveend",h)),this}easeTo(l,h){this._stop(!1,l.easeId),((l=a.extend({offset:[0,0],duration:500,easing:a.ease},l)).animate===!1||!l.essential&&a.exported.prefersReducedMotion)&&(l.duration=0);const g=this.transform,v=this.getZoom(),w=this.getBearing(),C=this.getPitch(),M=this.getPadding(),R="zoom"in l?+l.zoom:v,z="bearing"in l?this._normalizeBearing(l.bearing,w):w,D="pitch"in l?+l.pitch:C,W="padding"in l?l.padding:g.padding,te=a.pointGeometry.convert(l.offset);let ie,ae,le;if(g.projection.name==="globe"){const tt=a.MercatorCoordinate.fromLngLat(g.center),ot=te.rotate(-g.angle);tt.x+=ot.x/g.worldSize,tt.y+=ot.y/g.worldSize;const Ot=tt.toLngLat(),Ye=a.LngLat.convert(l.center||Ot);this._normalizeCenter(Ye),ie=g.centerPoint.add(ot),ae=new a.pointGeometry(tt.x,tt.y).mult(g.worldSize),le=new a.pointGeometry(a.mercatorXfromLng(Ye.lng),a.mercatorYfromLat(Ye.lat)).mult(g.worldSize).sub(ae)}else{ie=g.centerPoint.add(te);const tt=g.pointLocation(ie),ot=a.LngLat.convert(l.center||tt);this._normalizeCenter(ot),ae=g.project(tt),le=g.project(ot).sub(ae)}const de=g.zoomScale(R-v);let Q,xe;l.around&&(Q=a.LngLat.convert(l.around),xe=g.locationPoint(Q));const ye=this._zooming||R!==v,we=this._rotating||w!==z,Ie=this._pitching||D!==C,Ae=!g.isPaddingEqual(W),Fe=tt=>ot=>{if(ye&&(tt.zoom=a.number(v,R,ot)),we&&(tt.bearing=a.number(w,z,ot)),Ie&&(tt.pitch=a.number(C,D,ot)),Ae&&(tt.interpolatePadding(M,W,ot),ie=tt.centerPoint.add(te)),Q)tt.setLocationAtPoint(Q,xe);else{const Ot=tt.zoomScale(tt.zoom-v),Ye=R>v?Math.min(2,de):Math.max(.5,de),xt=Math.pow(Ye,1-ot),dt=tt.unproject(ae.add(le.mult(ot*xt)).mult(Ot));tt.setLocationAtPoint(tt.renderWorldCopies?dt.wrap():dt,ie)}return l.preloadOnly||this._fireMoveEvents(h),tt};if(l.preloadOnly){const tt=this._emulate(Fe,l.duration,g);return this._preloadTiles(tt),this}const He={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=ye,this._rotating=we,this._pitching=Ie,this._padding=Ae,this._easeId=l.easeId,this._prepareEase(h,l.noMoveStart,He),this._ease(Fe(g),tt=>{g.recenterOnTerrain(),this._afterEase(h,tt)},l),this}_prepareEase(l,h,g={}){this._moving=!0,this.transform.cameraElevationReference="sea",h||g.moving||this.fire(new a.Event("movestart",l)),this._zooming&&!g.zooming&&this.fire(new a.Event("zoomstart",l)),this._rotating&&!g.rotating&&this.fire(new a.Event("rotatestart",l)),this._pitching&&!g.pitching&&this.fire(new a.Event("pitchstart",l))}_fireMoveEvents(l){this.fire(new a.Event("move",l)),this._zooming&&this.fire(new a.Event("zoom",l)),this._rotating&&this.fire(new a.Event("rotate",l)),this._pitching&&this.fire(new a.Event("pitch",l))}_afterEase(l,h){if(this._easeId&&h&&this._easeId===h)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const g=this._zooming,v=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new a.Event("zoomend",l)),v&&this.fire(new a.Event("rotateend",l)),w&&this.fire(new a.Event("pitchend",l)),this.fire(new a.Event("moveend",l))}flyTo(l,h){if(!l.essential&&a.exported.prefersReducedMotion){const wt=a.pick(l,["center","zoom","bearing","pitch","around"]);return this.jumpTo(wt,h)}this.stop(),l=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},l);const g=this.transform,v=this.getZoom(),w=this.getBearing(),C=this.getPitch(),M=this.getPadding(),R="zoom"in l?a.clamp(+l.zoom,g.minZoom,g.maxZoom):v,z="bearing"in l?this._normalizeBearing(l.bearing,w):w,D="pitch"in l?+l.pitch:C,W="padding"in l?l.padding:g.padding,te=g.zoomScale(R-v),ie=a.pointGeometry.convert(l.offset);let ae=g.centerPoint.add(ie);const le=g.pointLocation(ae),de=a.LngLat.convert(l.center||le);this._normalizeCenter(de);const Q=g.project(le),xe=g.project(de).sub(Q);let ye=l.curve;const we=Math.max(g.width,g.height),Ie=we/te,Ae=xe.mag();if("minZoom"in l){const wt=a.clamp(Math.min(l.minZoom,v,R),g.minZoom,g.maxZoom),kt=we/g.zoomScale(wt-v);ye=Math.sqrt(kt/Ae*2)}const Fe=ye*ye;function He(wt){const kt=(Ie*Ie-we*we+(wt?-1:1)*Fe*Fe*Ae*Ae)/(2*(wt?Ie:we)*Fe*Ae);return Math.log(Math.sqrt(kt*kt+1)-kt)}function tt(wt){return(Math.exp(wt)-Math.exp(-wt))/2}function ot(wt){return(Math.exp(wt)+Math.exp(-wt))/2}const Ot=He(0);let Ye=function(wt){return ot(Ot)/ot(Ot+ye*wt)},xt=function(wt){return we*((ot(Ot)*(tt(kt=Ot+ye*wt)/ot(kt))-tt(Ot))/Fe)/Ae;var kt},dt=(He(1)-Ot)/ye;if(Math.abs(Ae)<1e-6||!isFinite(dt)){if(Math.abs(we-Ie)<1e-6)return this.easeTo(l,h);const wt=Ie<we?-1:1;dt=Math.abs(Math.log(Ie/we))/ye,xt=function(){return 0},Ye=function(kt){return Math.exp(wt*ye*kt)}}l.duration="duration"in l?+l.duration:1e3*dt/("screenSpeed"in l?+l.screenSpeed/ye:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0);const Tt=w!==z,rt=D!==C,qe=!g.isPaddingEqual(W),at=wt=>kt=>{const un=kt*dt,Dn=1/Ye(un);wt.zoom=kt===1?R:v+wt.scaleZoom(Dn),Tt&&(wt.bearing=a.number(w,z,kt)),rt&&(wt.pitch=a.number(C,D,kt)),qe&&(wt.interpolatePadding(M,W,kt),ae=wt.centerPoint.add(ie));const on=kt===1?de:wt.unproject(Q.add(xe.mult(xt(un))).mult(Dn));return wt.setLocationAtPoint(wt.renderWorldCopies?on.wrap():on,ae),wt._updateCameraOnTerrain(),l.preloadOnly||this._fireMoveEvents(h),wt};if(l.preloadOnly){const wt=this._emulate(at,l.duration,g);return this._preloadTiles(wt),this}return this._zooming=!0,this._rotating=Tt,this._pitching=rt,this._padding=qe,this._prepareEase(h,!1),this._ease(at(g),()=>this._afterEase(h),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,h){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const g=this._onEaseEnd;this._onEaseEnd=void 0,g.call(this,h)}if(!l){const g=this.handlers;g&&g.stop(!1)}return this}_ease(l,h,g){g.animate===!1||g.duration===0?(l(1),h()):(this._easeStart=a.exported.now(),this._easeOptions=g,this._onEaseFrame=l,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const l=Math.min((a.exported.now()-this._easeStart)/this._easeOptions.duration,1),h=this._onEaseFrame;h&&h(this._easeOptions.easing(l)),l<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(l,h){l=a.wrap(l,-180,180);const g=Math.abs(l-h);return Math.abs(l-360-h)<g&&(l-=360),Math.abs(l+360-h)<g&&(l+=360),l}_normalizeCenter(l){const h=this.transform;if(!h.renderWorldCopies||h.maxBounds)return;const g=l.lng-h.center.lng;l.lng+=g>180?-360:g<-180?360:0}_emulate(l,h,g){const v=Math.ceil(15*h/1e3),w=[],C=l(g.clone());for(let M=0;M<=v;M++){const R=C(M/v);w.push(R.clone())}return w}}class Yf{constructor(l={}){this.options=l,a.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(l){const h=this.options&&this.options.compact;return this._map=l,this._container=O("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=O("button","mapboxgl-ctrl-attrib-button",this._container),O("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=O("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),h&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),h===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(l,h){const g=this._map._getUIString(`AttributionControl.${h}`);l.setAttribute("aria-label",g),l.removeAttribute("title"),l.firstElementChild&&l.firstElementChild.setAttribute("title",g)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));const h=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(l){const g=h.reduce((v,w,C)=>(w.value&&(v+=`${w.key}=${w.value}${C<h.length-1?"&":""}`),v),"?");l.href=`${a.config.FEEDBACK_URL}/${g}#${jf(this._map,!0)}`,l.rel="noopener nofollow",this._setElementTitle(l,"MapFeedback")}}_updateData(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let l=[];if(this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const h=this._map.style._sourceCaches;for(const v in h){const w=h[v];if(w.used){const C=w.getSource();C.attribution&&l.indexOf(C.attribution)<0&&l.push(C.attribution)}}l.sort((v,w)=>v.length-w.length),l=l.filter((v,w)=>{for(let C=w+1;C<l.length;C++)if(l[C].indexOf(v)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=[...this.options.customAttribution,...l]:l.unshift(this.options.customAttribution));const g=l.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,l.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Qf{constructor(){a.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(l){this._map=l,this._container=O("div","mapboxgl-ctrl");const h=O("a","mapboxgl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://www.mapbox.com/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(l){l&&l.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const l=this._map.style._sourceCaches;if(Object.entries(l).length===0)return!0;for(const h in l){const g=l[h].getSource();if(g.hasOwnProperty("mapbox_logo")&&!g.mapbox_logo)return!1}return!0}_updateCompact(){const l=this._container.children;if(l.length){const h=l[0];this._map.getCanvasContainer().offsetWidth<250?h.classList.add("mapboxgl-compact"):h.classList.remove("mapboxgl-compact")}}}class eu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const h=++this._id;return this._queue.push({callback:l,id:h,cancelled:!1}),h}remove(l){const h=this._currentlyRunning,g=h?this._queue.concat(h):this._queue;for(const v of g)if(v.id===l)return void(v.cancelled=!0)}run(l=0){const h=this._currentlyRunning=this._queue;this._queue=[];for(const g of h)if(!g.cancelled&&(g.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Rd(p,l,h){if(p=new a.LngLat(p.lng,p.lat),l){const g=new a.LngLat(p.lng-360,p.lat),v=new a.LngLat(p.lng+360,p.lat),w=360*Math.ceil(Math.abs(p.lng-h.center.lng)/360),C=h.locationPoint(p).distSqr(l),M=l.x<0||l.y<0||l.x>h.width||l.y>h.height;h.locationPoint(g).distSqr(l)<C&&(M||Math.abs(g.lng-h.center.lng)<w)?p=g:h.locationPoint(v).distSqr(l)<C&&(M||Math.abs(v.lng-h.center.lng)<w)&&(p=v)}for(;Math.abs(p.lng-h.center.lng)>180;){const g=h.locationPoint(p);if(g.x>=0&&g.y>=0&&g.x<=h.width&&g.y<=h.height)break;p.lng>h.center.lng?p.lng-=360:p.lng+=360}return p}const kl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Id extends a.Evented{constructor(l,h){if(super(),(l instanceof a.window.HTMLElement||h)&&(l=a.extend({element:l},h)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=l&&l.occludedOpacity||.2,l&&l.element)this._element=l.element,this._offset=a.pointGeometry.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=O("div");const v=41,w=27,C=G("svg",{display:"block",height:v*this._scale+"px",width:w*this._scale+"px",viewBox:`0 0 ${w} ${v}`},this._element),M=G("radialGradient",{id:"shadowGradient"},G("defs",{},C));G("stop",{offset:"10%","stop-opacity":.4},M),G("stop",{offset:"100%","stop-opacity":.05},M),G("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},C),G("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},C),G("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},C),G("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},C),this._offset=a.pointGeometry.convert(l&&l.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",v=>{v.preventDefault()}),this._element.addEventListener("mousedown",v=>{v.preventDefault()});const g=this._element.classList;for(const v in kl)g.remove(`mapboxgl-marker-anchor-${v}`);g.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(l){return l===this._map||(this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._updateMoving),l.on("moveend",this._update),l.on("remove",this._clearFadeTimer),l._addMarker(this),this.setDraggable(this._draggable),this._update(),l.on("click",this._onMapClick)),this}remove(){const l=this._map;return l&&(l.off("click",this._onMapClick),l.off("move",this._updateMoving),l.off("moveend",this._update),l.off("mousedown",this._addDragHandler),l.off("touchstart",this._addDragHandler),l.off("mouseup",this._onUp),l.off("touchend",this._onUp),l.off("mousemove",this._onMove),l.off("touchmove",this._onMove),l.off("remove",this._clearFadeTimer),l._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=a.LngLat.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const v=Math.sqrt(Math.pow(13.5,2)/2);l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,l._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(l){const h=l.code,g=l.charCode||l.keyCode;h!=="Space"&&h!=="Enter"&&g!==32&&g!==13||this.togglePopup()}_onMapClick(l){const h=l.originalEvent.target,g=this._element;this._popup&&(h===g||g.contains(h))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?(l.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(l.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const l=this._map,h=this._pos;if(!l||!h)return!1;const g=l.unproject(h),v=l.getFreeCameraOptions();if(!v.position)return!1;const w=v.position.toLngLat();return w.distanceTo(g)<.9*w.distanceTo(this._lngLat)}_evaluateOpacity(){const l=this._map;if(!l)return;const h=this._pos;if(!h||h.x<0||h.x>l.transform.width||h.y<0||h.y>l.transform.height)return void this._clearFadeTimer();const g=l.unproject(h);let v;l._showingGlobe()&&a.isLngLatBehindGlobe(l.transform,this._lngLat)?v=0:(v=1-l._queryFogOpacity(g),l.transform._terrainEnabled()&&l.getTerrain()&&this._behindTerrain()&&(v*=this._occludedOpacity)),this._element.style.opacity=`${v}`,this._element.style.pointerEvents=v>0?"auto":"none",this._popup&&this._popup._setOpacity(v),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const l=this._pos;if(!l||!this._map)return;const h=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${l.x}px,${l.y}px)
            ${kl[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${h.x}px,${h.y}px)
        `}_calculateXYTransform(){const l=this._pos,h=this._map,g=this.getPitchAlignment();if(!h||!l||g!=="map")return"";if(!h._showingGlobe()){const R=h.getPitch();return R?`rotateX(${R}deg)`:""}const v=a.radToDeg(a.globeTiltAtLngLat(h.transform,this._lngLat)),w=l.sub(a.globeCenterToScreenPoint(h.transform)),C=Math.abs(w.x)+Math.abs(w.y);if(C===0)return"";const M=v/C;return`rotateX(${-w.y*M}deg) rotateY(${w.x*M}deg)`}_calculateZTransform(){const l=this._pos,h=this._map;if(!h||!l)return"";let g=0;const v=this.getRotationAlignment();if(v==="map")if(h._showingGlobe()){const w=h.project(new a.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),C=h.project(new a.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(w);g=a.radToDeg(Math.atan2(C.y,C.x))-90}else g=-h.getBearing();else if(v==="horizon"){const w=a.smoothstep(4,6,h.getZoom()),C=a.globeCenterToScreenPoint(h.transform);C.y+=w*h.transform.height;const M=l.sub(C),R=a.radToDeg(Math.atan2(M.y,M.x));g=(R>90?R-270:R+90)*(1-w)}return g+=this._rotation,g?`rotateZ(${g}deg)`:""}_update(l){a.window.cancelAnimationFrame(this._updateFrameId);const h=this._map;h&&(h.transform.renderWorldCopies&&(this._lngLat=Rd(this._lngLat,this._pos,h.transform)),this._pos=h.project(this._lngLat),l===!0?this._updateFrameId=a.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),h._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(h._showingGlobe()||h.getTerrain()||h.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(l){return this._offset=a.pointGeometry.convert(l),this._update(),this}_onMove(l){const h=this._map;if(!h)return;const g=this._pointerdownPos,v=this._positionDelta;if(g&&v){if(!this._isDragging){const w=this._clickTolerance||h._clickTolerance;if(l.point.dist(g)<w)return;this._isDragging=!0}this._pos=l.point.sub(v),this._lngLat=h.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const l=this._map;l&&(l.off("mousemove",this._onMove),l.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"}_addDragHandler(l){const h=this._map,g=this._pos;h&&g&&this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(g),this._pointerdownPos=l.point,this._state="pending",h.on("mousemove",this._onMove),h.on("touchmove",this._onMove),h.once("mouseup",this._onUp),h.once("touchend",this._onUp))}setDraggable(l){this._draggable=!!l;const h=this._map;return h&&(l?(h.on("mousedown",this._addDragHandler),h.on("touchstart",this._addDragHandler)):(h.off("mousedown",this._addDragHandler),h.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(l){return this._occludedOpacity=l||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const My={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ay=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Jf(p=new a.pointGeometry(0,0),l="bottom"){if(typeof p=="number"){const h=Math.round(Math.sqrt(.5*Math.pow(p,2)));switch(l){case"top":return new a.pointGeometry(0,p);case"top-left":return new a.pointGeometry(h,h);case"top-right":return new a.pointGeometry(-h,h);case"bottom":return new a.pointGeometry(0,-p);case"bottom-left":return new a.pointGeometry(h,-h);case"bottom-right":return new a.pointGeometry(-h,-h);case"left":return new a.pointGeometry(p,0);case"right":return new a.pointGeometry(-p,0)}return new a.pointGeometry(0,0)}return p instanceof a.pointGeometry||Array.isArray(p)?a.pointGeometry.convert(p):a.pointGeometry.convert(p[l]||[0,0])}class ky{constructor(l){this.jumpTo(l)}getValue(l){if(l<=this._startTime)return this._start;if(l>=this._endTime)return this._end;const h=a.easeCubicInOut((l-this._startTime)/(this._endTime-this._startTime));return this._start*(1-h)+this._end*h}isEasing(l){return l>=this._startTime&&l<=this._endTime}jumpTo(l){this._startTime=-1/0,this._endTime=-1/0,this._start=l,this._end=l}easeTo(l,h,g){this._start=this.getValue(h),this._end=l,this._startTime=h,this._endTime=h+g}}const Ry={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Iy={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},ep={showCompass:!0,showZoom:!0,visualizePitch:!1};class Py{constructor(l,h,g=!1){this._clickTolerance=10,this.element=h,this.mouseRotate=new Hf({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,g&&(this.mousePitch=new Zf({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),h.addEventListener("mousedown",this.mousedown),h.addEventListener("touchstart",this.touchstart,{passive:!1}),h.addEventListener("touchmove",this.touchmove),h.addEventListener("touchend",this.touchend),h.addEventListener("touchcancel",this.reset)}down(l,h){this.mouseRotate.mousedown(l,h),this.mousePitch&&this.mousePitch.mousedown(l,h),B()}move(l,h){const g=this.map,v=this.mouseRotate.mousemoveWindow(l,h),w=v&&v.bearingDelta;if(w&&g.setBearing(g.getBearing()+w),this.mousePitch){const C=this.mousePitch.mousemoveWindow(l,h),M=C&&C.pitchDelta;M&&g.setPitch(g.getPitch()+M)}}off(){const l=this.element;l.removeEventListener("mousedown",this.mousedown),l.removeEventListener("touchstart",this.touchstart,{passive:!1}),l.removeEventListener("touchmove",this.touchmove),l.removeEventListener("touchend",this.touchend),l.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){U(),a.window.removeEventListener("mousemove",this.mousemove),a.window.removeEventListener("mouseup",this.mouseup)}mousedown(l){this.down(a.extend({},l,{ctrlKey:!0,preventDefault:()=>l.preventDefault()}),Y(this.element,l)),a.window.addEventListener("mousemove",this.mousemove),a.window.addEventListener("mouseup",this.mouseup)}mousemove(l){this.move(l,Y(this.element,l))}mouseup(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()}touchstart(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=he(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>l.preventDefault()},this._startPos))}touchmove(l){l.targetTouches.length!==1?this.reset():(this._lastPos=he(this.element,l.targetTouches)[0],this.move({preventDefault:()=>l.preventDefault()},this._lastPos))}touchend(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Ly={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Dy={maxWidth:100,unit:"metric"};function zy(p,l,h){const g=Pd(l),v=g/l,w={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[h];this._map._requestDomTask(()=>{this._container.style.width=p*v+"px",this._container.innerHTML=`${g}&nbsp;${w}`})}function Pd(p){const l=Math.pow(10,`${Math.floor(p)}`.length-1);let h=p/l;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:h>=1?1:function(g){const v=Math.pow(10,Math.ceil(-Math.log(g)/Math.LN10));return Math.round(g*v)/v}(h),l*h}const tu={version:a.version,supported:S,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:class extends Cy{constructor(p){if(a.LivePerformanceUtils.mark(a.PerformanceMarkers.create),(p=a.extend({},Iy,p)).minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(p.antialias&&a.isSafariWithAntialiasingBug(a.window)&&(p.antialias=!1,a.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Zt(p.minZoom,p.maxZoom,p.minPitch,p.maxPitch,p.renderWorldCopies),p),this._interactive=p.interactive,this._minTileCacheSize=p.minTileCacheSize,this._maxTileCacheSize=p.maxTileCacheSize,this._failIfMajorPerformanceCaveat=p.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=p.preserveDrawingBuffer,this._antialias=p.antialias,this._useWebGL2=p.useWebGL2,this._trackResize=p.trackResize,this._bearingSnap=p.bearingSnap,this._refreshExpiredTiles=p.refreshExpiredTiles,this._fadeDuration=p.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=p.crossSourceCollisions,this._collectResourceTiming=p.collectResourceTiming,this._optimizeForTerrain=p.optimizeForTerrain,this._language=this._parseLanguage(p.language),this._worldview=p.worldview,this._renderTaskQueue=new eu,this._domRenderTaskQueue=new eu,this._controls=[],this._markers=[],this._popups=[],this._mapId=a.uniqueId(),this._locale=a.extend({},Ry,p.locale),this._clickTolerance=p.clickTolerance,this._cooperativeGestures=p.cooperativeGestures,this._performanceMetricsCollection=p.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new ky(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new a.RequestManager(p.transformRequest,p.accessToken,p.testMode),this._silenceAuthErrors=!!p.testMode,typeof p.container=="string"){if(this._container=a.window.document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof a.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(this._container.childNodes.length>0&&a.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),p.maxBounds&&this.setMaxBounds(p.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),a.window!==void 0&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",this._onWindowResize,!1),a.window.addEventListener("orientationchange",this._onWindowResize,!1),a.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),a.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Ty(this,p),this._localFontFamily=p.localFontFamily,this._localIdeographFontFamily=p.localIdeographFontFamily,p.style&&this.setStyle(p.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),p.projection&&this.setProjection(p.projection),this._hash=p.hash&&new hy(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,a.extend({},p.fitBoundsOptions,{duration:0})))),this.resize(),p.attributionControl&&this.addControl(new Yf({customAttribution:p.customAttribution})),this._logoControl=new Qf,this.addControl(this._logoControl,p.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",l=>{this._update(l.dataType==="style"),this.fire(new a.Event(`${l.dataType}data`,l))}),this.on("dataloading",l=>{this.fire(new a.Event(`${l.dataType}dataloading`,l))})}_getMapId(){return this._mapId}addControl(p,l){if(l===void 0&&(l=p.getDefaultPosition?p.getDefaultPosition():"top-right"),!p||!p.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=p.onAdd(this);this._controls.push(p);const g=this._controlPositions[l];return l.indexOf("bottom")!==-1?g.insertBefore(h,g.firstChild):g.appendChild(h),this}removeControl(p){if(!p||!p.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(p);return l>-1&&this._controls.splice(l,1),p.onRemove(this),this}hasControl(p){return this._controls.indexOf(p)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(p){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const l=!this._moving;return l&&this.fire(new a.Event("movestart",p)).fire(new a.Event("move",p)),this.fire(new a.Event("resize",p)),l&&this.fire(new a.Event("moveend",p)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(p){return this.transform.setMaxBounds(a.LngLatBounds.convert(p)),this._update()}setMinZoom(p){if((p=p??-2)>=-2&&p<=this.transform.maxZoom)return this.transform.minZoom=p,this._update(),this.getZoom()<p?this.setZoom(p):this.fire(new a.Event("zoomstart")).fire(new a.Event("zoom")).fire(new a.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(p){if((p=p??22)>=this.transform.minZoom)return this.transform.maxZoom=p,this._update(),this.getZoom()>p?this.setZoom(p):this.fire(new a.Event("zoomstart")).fire(new a.Event("zoom")).fire(new a.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(p){if((p=p??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(p>=0&&p<=this.transform.maxPitch)return this.transform.minPitch=p,this._update(),this.getPitch()<p?this.setPitch(p):this.fire(new a.Event("pitchstart")).fire(new a.Event("pitch")).fire(new a.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(p){if((p=p??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(p>=this.transform.minPitch)return this.transform.maxPitch=p,this._update(),this.getPitch()>p?this.setPitch(p):this.fire(new a.Event("pitchstart")).fire(new a.Event("pitch")).fire(new a.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(p){return this.transform.renderWorldCopies=p,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(p){return p==="auto"?a.window.navigator.language:Array.isArray(p)?p.length===0?void 0:p.map(l=>l==="auto"?a.window.navigator.language:l):p}setLanguage(p){const l=this._parseLanguage(p);if(!this.style||l===this._language)return this;this._language=l,this.style._reloadSources();for(const h of this._controls)h._setLanguage&&h._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(p){return this.style&&p!==this._worldview?(this._worldview=p,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(p){return this._lazyInitEmptyStyle(),p?typeof p=="string"&&(p={name:p}):p=null,this._useExplicitProjection=!!p,this._prioritizeAndUpdateProjection(p,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const p=this.transform,l=p.projection.name;let h;l==="globe"&&p.zoom>=a.GLOBE_ZOOM_THRESHOLD_MAX?(p.setMercatorFromTransition(),h=!0):l==="mercator"&&p.zoom<a.GLOBE_ZOOM_THRESHOLD_MAX&&(p.setProjection({name:"globe"}),h=!0),h&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(p,l){return this._updateProjection(p||l||{name:"mercator"})}_updateProjection(p){let l;if(l=p.name==="globe"&&this.transform.zoom>=a.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(p),this.style.applyProjectionUpdate(),l){this.painter.clearBackgroundTiles();for(const h in this.style._sourceCaches)this.style._sourceCaches[h].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(p){return this.transform.locationPoint3D(a.LngLat.convert(p))}unproject(p){return this.transform.pointLocation3D(a.pointGeometry.convert(p))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(p,l,h){if(p==="mouseenter"||p==="mouseover"){let g=!1;const v=C=>{const M=l.filter(z=>this.getLayer(z)),R=M.length?this.queryRenderedFeatures(C.point,{layers:M}):[];R.length?g||(g=!0,h.call(this,new Ei(p,this,C.originalEvent,{features:R}))):g=!1},w=()=>{g=!1};return{layers:new Set(l),listener:h,delegates:{mousemove:v,mouseout:w}}}if(p==="mouseleave"||p==="mouseout"){let g=!1;const v=C=>{const M=l.filter(R=>this.getLayer(R));(M.length?this.queryRenderedFeatures(C.point,{layers:M}):[]).length?g=!0:g&&(g=!1,h.call(this,new Ei(p,this,C.originalEvent)))},w=C=>{g&&(g=!1,h.call(this,new Ei(p,this,C.originalEvent)))};return{layers:new Set(l),listener:h,delegates:{mousemove:v,mouseout:w}}}{const g=v=>{const w=l.filter(M=>this.getLayer(M)),C=w.length?this.queryRenderedFeatures(v.point,{layers:w}):[];C.length&&(v.features=C,h.call(this,v),delete v.features)};return{layers:new Set(l),listener:h,delegates:{[p]:g}}}}on(p,l,h){if(h===void 0)return super.on(p,l);Array.isArray(l)||(l=[l]);const g=this._createDelegatedListener(p,l,h);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[p]=this._delegatedListeners[p]||[],this._delegatedListeners[p].push(g);for(const v in g.delegates)this.on(v,g.delegates[v]);return this}once(p,l,h){if(h===void 0)return super.once(p,l);Array.isArray(l)||(l=[l]);const g=this._createDelegatedListener(p,l,h);for(const v in g.delegates)this.once(v,g.delegates[v]);return this}off(p,l,h){if(h===void 0)return super.off(p,l);l=new Set(Array.isArray(l)?l:[l]);const g=(w,C)=>{if(w.size!==C.size)return!1;for(const M of w)if(!C.has(M))return!1;return!0},v=this._delegatedListeners?this._delegatedListeners[p]:void 0;return v&&(w=>{for(let C=0;C<w.length;C++){const M=w[C];if(M.listener===h&&g(M.layers,l)){for(const R in M.delegates)this.off(R,M.delegates[R]);return w.splice(C,1),this}}})(v),this}queryRenderedFeatures(p,l){return this.style?(l!==void 0||p===void 0||p instanceof a.pointGeometry||Array.isArray(p)||(l=p,p=void 0),this.style.queryRenderedFeatures(p=p||[[0,0],[this.transform.width,this.transform.height]],l=l||{},this.transform)):[]}querySourceFeatures(p,l){return this.style.querySourceFeatures(p,l)}setStyle(p,l){return(l=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&l.localFontFamily===this._localFontFamily&&this.style&&p?(this._diffStyle(p,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._localFontFamily=l.localFontFamily,this._updateStyle(p,l))}_getUIString(p){const l=this._locale[p];if(l==null)throw new Error(`Missing UI string '${p}'`);return l}_updateStyle(p,l){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),p&&(this.style=new Eo(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof p=="string"?this.style.loadURL(p):this.style.loadJSON(p)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Eo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(p,l){if(typeof p=="string"){const h=this._requestManager.normalizeStyleURL(p),g=this._requestManager.transformRequest(h,a.ResourceType.Style);a.getJSON(g,(v,w)=>{v?this.fire(new a.ErrorEvent(v)):w&&this._updateDiff(w,l)})}else typeof p=="object"&&this._updateDiff(p,l)}_updateDiff(p,l){try{this.style.setState(p)&&this._update(!0)}catch(h){a.warnOnce(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(p,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(a.warnOnce("There is no style added to the map."),!1)}addSource(p,l){return this._lazyInitEmptyStyle(),this.style.addSource(p,l),this._update(!0)}isSourceLoaded(p){return!!this.style&&this.style._isSourceCacheLoaded(p)}areTilesLoaded(){const p=this.style&&this.style._sourceCaches;for(const l in p){const h=p[l]._tiles;for(const g in h){const v=h[g];if(v.state!=="loaded"&&v.state!=="errored")return!1}}return!0}addSourceType(p,l,h){this._lazyInitEmptyStyle(),this.style.addSourceType(p,l,h)}removeSource(p){return this.style.removeSource(p),this._updateTerrain(),this._update(!0)}getSource(p){return this.style.getSource(p)}addImage(p,l,{pixelRatio:h=1,sdf:g=!1,stretchX:v,stretchY:w,content:C}={}){if(this._lazyInitEmptyStyle(),l instanceof a.window.HTMLImageElement||a.window.ImageBitmap&&l instanceof a.window.ImageBitmap){const{width:M,height:R,data:z}=a.exported.getImageData(l);this.style.addImage(p,{data:new a.RGBAImage({width:M,height:R},z),pixelRatio:h,stretchX:v,stretchY:w,content:C,sdf:g,version:0})}else if(l.width===void 0||l.height===void 0)this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:M,height:R}=l,z=l;this.style.addImage(p,{data:new a.RGBAImage({width:M,height:R},new Uint8Array(z.data)),pixelRatio:h,stretchX:v,stretchY:w,content:C,sdf:g,version:0,userImage:z}),z.onAdd&&z.onAdd(this,p)}}updateImage(p,l){const h=this.style.getImage(p);if(!h)return void this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=l instanceof a.window.HTMLImageElement||a.window.ImageBitmap&&l instanceof a.window.ImageBitmap?a.exported.getImageData(l):l,{width:v,height:w}=g;v!==void 0&&w!==void 0?v===h.data.width&&w===h.data.height?(h.data.replace(g.data,!(l instanceof a.window.HTMLImageElement||a.window.ImageBitmap&&l instanceof a.window.ImageBitmap)),this.style.updateImage(p,h)):this.fire(new a.ErrorEvent(new Error(`The width and height of the updated image (${v}, ${w})
                must be that same as the previous version of the image
                (${h.data.width}, ${h.data.height})`))):this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(p){return p?!!this.style.getImage(p):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(p){this.style.removeImage(p)}loadImage(p,l){a.getImage(this._requestManager.transformRequest(p,a.ResourceType.Image),(h,g)=>{l(h,g instanceof a.window.HTMLImageElement?a.exported.getImageData(g):g)})}listImages(){return this.style.listImages()}addLayer(p,l){return this._lazyInitEmptyStyle(),this.style.addLayer(p,l),this._update(!0)}moveLayer(p,l){return this.style.moveLayer(p,l),this._update(!0)}removeLayer(p){return this.style.removeLayer(p),this._update(!0)}getLayer(p){return this.style.getLayer(p)}setLayerZoomRange(p,l,h){return this.style.setLayerZoomRange(p,l,h),this._update(!0)}setFilter(p,l,h={}){return this.style.setFilter(p,l,h),this._update(!0)}getFilter(p){return this.style.getFilter(p)}setPaintProperty(p,l,h,g={}){return this.style.setPaintProperty(p,l,h,g),this._update(!0)}getPaintProperty(p,l){return this.style.getPaintProperty(p,l)}setLayoutProperty(p,l,h,g={}){return this.style.setLayoutProperty(p,l,h,g),this._update(!0)}getLayoutProperty(p,l){return this.style.getLayoutProperty(p,l)}setLight(p,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(p,l),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(p){return this._lazyInitEmptyStyle(),!p&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(p),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(p){return this._lazyInitEmptyStyle(),this.style.setFog(p),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(p){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(a.LngLat.convert(p),this.transform):0}setFeatureState(p,l){return this.style.setFeatureState(p,l),this._update()}removeFeatureState(p,l){return this.style.removeFeatureState(p,l),this._update()}getFeatureState(p){return this.style.getFeatureState(p)}_updateContainerDimensions(){if(!this._container)return;const p=this._container.getBoundingClientRect().width||400,l=this._container.getBoundingClientRect().height||300;let h,g,v,w=this._container;for(;w&&(!g||!v);){const C=a.window.getComputedStyle(w).transform;C&&C!=="none"&&(h=C.match(/matrix.*\((.+)\)/)[1].split(", "),h[0]&&h[0]!=="0"&&h[0]!=="1"&&(g=h[0]),h[3]&&h[3]!=="0"&&h[3]!=="1"&&(v=h[3])),w=w.parentElement}this._containerWidth=g?Math.abs(p/g):p,this._containerHeight=v?Math.abs(l/v):l}_detectMissingCSS(){a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const p=this._container;p.classList.add("mapboxgl-map"),(this._missingCSSCanary=O("div","mapboxgl-canary",p)).style.visibility="hidden",this._detectMissingCSS();const l=this._canvasContainer=O("div","mapboxgl-canvas-container",p);this._interactive&&l.classList.add("mapboxgl-interactive"),this._canvas=O("canvas","mapboxgl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const h=this._controlContainer=O("div","mapboxgl-control-container",p),g=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(v=>{g[v]=O("div",`mapboxgl-ctrl-${v}`,h)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(p,l){const h=a.exported.devicePixelRatio||1;this._canvas.width=h*Math.ceil(p),this._canvas.height=h*Math.ceil(l),this._canvas.style.width=`${p}px`,this._canvas.style.height=`${l}px`}_addMarker(p){this._markers.push(p)}_removeMarker(p){const l=this._markers.indexOf(p);l!==-1&&this._markers.splice(l,1)}_addPopup(p){this._popups.push(p)}_removePopup(p){const l=this._popups.indexOf(p);l!==-1&&this._popups.splice(l,1)}_setupPainter(){const p=a.extend({},S.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),l=this._useWebGL2&&this._canvas.getContext("webgl2",p),h=l||this._canvas.getContext("webgl",p)||this._canvas.getContext("experimental-webgl",p);h?(this._useWebGL2&&!l&&a.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),a.storeAuthState(h,!0),this.painter=new jc(h,this.transform,!!l),this.on("data",g=>{g.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),a.exported$1.testSupport(h)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(p){p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:p}))}_contextRestored(p){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:p}))}_onMapScroll(p){if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(p){return this.style?(this._styleDirty=this._styleDirty||p,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(p){return this._update(),this._renderTaskQueue.add(p)}_cancelRenderFrame(p){this._renderTaskQueue.remove(p)}_requestDomTask(p){!this.loaded()||this.loaded()&&!this.isMoving()?p():this._domRenderTaskQueue.add(p)}_render(p){let l;const h=this.painter.context.extTimerQuery,g=a.exported.now();if(this.listens("gpu-timing-frame")&&(l=h.createQueryEXT(),h.beginQueryEXT(h.TIME_ELAPSED_EXT,l)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],a.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],a.window.performance.now())),this._renderTaskQueue.run(p),this._domRenderTaskQueue.run(p),this._removed)return;this._updateProjectionTransition();const v=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const M=this.transform.zoom,R=this.transform.pitch,z=a.exported.now(),D=new a.EvaluationParameters(M,{now:z,fadeDuration:v,pitch:R,transition:this.style.getTransition()});this.style.update(D)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let w=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),w=this._updateAverageElevation(g),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):w=this._updateAverageElevation(g),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,v,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:v,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),l){const M=a.exported.now()-g;h.endQueryEXT(h.TIME_ELAPSED_EXT,l),setTimeout(()=>{const R=h.getQueryObjectEXT(l,h.QUERY_RESULT_EXT)/1e6;h.deleteQueryEXT(l),this.fire(new a.Event("gpu-timing-frame",{cpuTime:M,gpuTime:R})),a.window.performance.mark("frame-gpu",{startTime:g,detail:{gpuTime:R}})},50)}if(this.listens("gpu-timing-layer")){const M=this.painter.collectGpuTimers();setTimeout(()=>{const R=this.painter.queryGpuTimers(M);this.fire(new a.Event("gpu-timing-layer",{layerTimes:R}))},50)}if(this.listens("gpu-timing-deferred-render")){const M=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const R=this.painter.queryGpuTimeDeferredRender(M);this.fire(new a.Event("gpu-timing-deferred-render",{gpuTime:R}))},50)}const C=this._sourcesDirty||this._styleDirty||this._placementDirty||w;if(C||this._repaint)this.triggerRepaint();else{const M=!this.isMoving()&&this.loaded();if(M&&(w=this._updateAverageElevation(g,!0)),w)this.triggerRepaint();else if(this._triggerFrame(!1),M&&(this.fire(new a.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const R=this._calculateSpeedIndex();this.fire(new a.Event("speedindexcompleted",{speedIndex:R})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||C||(this._fullyLoaded=!0,a.LivePerformanceUtils.mark(a.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&a.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(p){for(const l of this._markers)p&&!this.getRenderWorldCopies()&&(l._lngLat=l._lngLat.wrap()),l._update();for(const l of this._popups)!p||this.getRenderWorldCopies()||l._trackPointer||(l._lngLat=l._lngLat.wrap()),l._update()}_updateAverageElevation(p,l=!1){const h=g=>(this.transform.averageElevation=g,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&h(0);if((l||p-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(p)){const g=this.transform.averageElevation;let v=this.transform.sampleAverageElevation(),w=!1;this.transform.elevation&&(w=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(v)?v=0:this._averageElevationLastSampledAt=p;const C=Math.abs(g-v);if(C>1){if(this._isInitialLoad||w)return this._averageElevation.jumpTo(v),h(v);this._averageElevation.easeTo(v,p,300)}else if(C>1e-4)return this._averageElevation.jumpTo(v),h(v)}return!!this._averageElevation.isEasing(p)&&h(this._averageElevation.getValue(p))}_authenticate(){a.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,p=>{if(p&&(p.message===a.AUTH_ERR_MSG||p.status===401)){const l=this.painter.context.gl;a.storeAuthState(l,!1),this._logoControl instanceof Qf&&this._logoControl._updateLogo(),l&&l.clear(l.DEPTH_BUFFER_BIT|l.COLOR_BUFFER_BIT|l.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new a.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),a.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const p=this._isDragging();this.painter.updateTerrain(this.style,p)}_calculateSpeedIndex(){const p=this.painter.canvasCopy(),l=this.painter.getCanvasCopiesAndTimestamps();l.timeStamps.push(performance.now());const h=this.painter.context.gl,g=h.createFramebuffer();function v(w){h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,w,0);const C=new Uint8Array(h.drawingBufferWidth*h.drawingBufferHeight*4);return h.readPixels(0,0,h.drawingBufferWidth,h.drawingBufferHeight,h.RGBA,h.UNSIGNED_BYTE,C),C}return h.bindFramebuffer(h.FRAMEBUFFER,g),this._canvasPixelComparison(v(p),l.canvasCopies.map(v),l.timeStamps)}_canvasPixelComparison(p,l,h){let g=h[1]-h[0];const v=p.length/4;for(let w=0;w<l.length;w++){const C=l[w];let M=0;for(let R=0;R<C.length;R+=4)C[R]===p[R]&&C[R+1]===p[R+1]&&C[R+2]===p[R+2]&&C[R+3]===p[R+3]&&(M+=1);g+=(h[w+2]-h[w+1])*(1-M/v)}return g}remove(){this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),a.window!==void 0&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("orientationchange",this._onWindowResize,!1),a.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1),a.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const p=this.painter.context.gl.getExtension("WEBGL_lose_context");p&&p.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),a.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new a.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(p){this._renderNextFrame=this._renderNextFrame||p,this.style&&!this._frame&&(this._frame=a.exported.frame(l=>{const h=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,h&&this._render(l)}))}_preloadTiles(p){const l=this.style?Object.values(this.style._sourceCaches):[];return a.asyncAll(l,(h,g)=>h._preloadTiles(p,g),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(p){this._trackResize&&this.resize({originalEvent:p})._update()}_onVisibilityChange(){a.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(p){this._showTileBoundaries!==p&&(this._showTileBoundaries=p,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(p){this._showTerrainWireframe!==p&&(this._showTerrainWireframe=p,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(p){this._speedIndexTiming!==p&&(this._speedIndexTiming=p,this._update())}get showPadding(){return!!this._showPadding}set showPadding(p){this._showPadding!==p&&(this._showPadding=p,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(p){this._showCollisionBoxes!==p&&(this._showCollisionBoxes=p,p?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(p){this._showOverdrawInspector!==p&&(this._showOverdrawInspector=p,this._update())}get repaint(){return!!this._repaint}set repaint(p){this._repaint!==p&&(this._repaint=p,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(p){this._vertices=p,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(p){this._showTileAABBs!==p&&(this._showTileAABBs=p,p&&this._update())}_setCacheLimits(p,l){a.setCacheLimits(p,l)}get version(){return a.version}},NavigationControl:class{constructor(p){this.options=a.extend({},ep,p),this._container=O("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",l=>{this._map&&this._map.zoomIn({},{originalEvent:l})}),O("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",l=>{this._map&&this._map.zoomOut({},{originalEvent:l})}),O("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",l=>{const h=this._map;h&&(this.options.visualizePitch?h.resetNorthPitch({},{originalEvent:l}):h.resetNorth({},{originalEvent:l}))}),this._compassIcon=O("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const p=this._map;if(!p)return;const l=p.getZoom(),h=l===p.getMaxZoom(),g=l===p.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())}_rotateCompassArrow(){const p=this._map;if(!p)return;const l=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(p.transform.pitch*(Math.PI/180)),.5)}) rotateX(${p.transform.pitch}deg) rotateZ(${p.transform.angle*(180/Math.PI)}deg)`:`rotate(${p.transform.angle*(180/Math.PI)}deg)`;p._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=l)})}onAdd(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),p.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&p.on("pitch",this._rotateCompassArrow),p.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Py(p,this._compass,this.options.visualizePitch)),this._container}onRemove(){const p=this._map;p&&(this._container.remove(),this.options.showZoom&&p.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&p.off("pitch",this._rotateCompassArrow),p.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(p,l){const h=O("button",p,this._container);return h.type="button",h.addEventListener("click",l),h}_setButtonTitle(p,l){if(!this._map)return;const h=this._map._getUIString(`NavigationControl.${l}`);p.setAttribute("aria-label",h),p.firstElementChild&&p.firstElementChild.setAttribute("title",h)}},GeolocateControl:class extends a.Evented{constructor(p){super(),this.options=a.extend({geolocation:a.window.navigator.geolocation},Ly,p),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=To(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(p){return this._map=p,this._container=O("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(p){const l=(h=!!this.options.geolocation)=>{this._supportsGeolocation=h,p(h)};this._supportsGeolocation!==void 0?p(this._supportsGeolocation):a.window.navigator.permissions!==void 0?a.window.navigator.permissions.query({name:"geolocation"}).then(h=>l(h.state!=="denied")).catch(()=>l()):l()}_isOutOfMapMaxBounds(p){const l=this._map.getMaxBounds(),h=p.coords;return!!l&&(h.longitude<l.getWest()||h.longitude>l.getEast()||h.latitude<l.getSouth()||h.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(p){if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(p),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(p),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",p)),this._finish()}}_updateCamera(p){const l=new a.LngLat(p.coords.longitude,p.coords.latitude),h=p.coords.accuracy,g=this._map.getBearing(),v=a.extend({bearing:g},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(h),v,{geolocateSource:!0})}_updateMarker(p){if(p){const l=new a.LngLat(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const p=this._map.transform,l=a.mercatorZfromAltitude(1,p._center.lat)*p.worldSize,h=Math.ceil(2*this._accuracy*l);this._circleElement.style.width=`${h}px`,this._circleElement.style.height=`${h}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(p){if(this._map){if(this.options.trackUserLocation)if(p.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(p.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",p)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(p){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=O("button","mapboxgl-ctrl-geolocate",this._container),O("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",p===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=O("div","mapboxgl-user-location"),this._dotElement.appendChild(O("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(O("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Id({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=O("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Id({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new a.Event("trackuserlocationend")))})}}_onDeviceOrientation(p){this._userLocationDotMarker&&(p.webkitCompassHeading?this._heading=p.webkitCompassHeading:p.absolute===!0&&(this._heading=-1*p.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let p;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(p={maximumAge:6e5,timeout:0},this._noTimeout=!0):(p=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,p),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const p=()=>{a.window.addEventListener("ondeviceorientationabsolute"in a.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};a.window.DeviceMotionEvent!==void 0&&typeof a.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(l=>{l==="granted"&&p()}).catch(console.error):p()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),a.window.removeEventListener("deviceorientation",this._onDeviceOrientation),a.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Yf,ScaleControl:class{constructor(p){this.options=a.extend({},Dy,p),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=zy.bind(this)),a.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const p=this.options.maxWidth||100,l=this._map,h=l._containerHeight/2,g=l._containerWidth/2-p/2,v=l.unproject([g,h]),w=l.unproject([g+p,h]),C=v.distanceTo(w);if(this.options.unit==="imperial"){const M=3.2808*C;M>5280?this._setScale(p,M/5280,"mile"):this._setScale(p,M,"foot")}else this.options.unit==="nautical"?this._setScale(p,C/1852,"nautical-mile"):C>=1e3?this._setScale(p,C/1e3,"kilometer"):this._setScale(p,C,"meter")}_setScale(p,l,h){const g=Pd(l),v=g/l;this._map._requestDomTask(()=>{this._container.style.width=p*v+"px",this._container.innerHTML=h!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:h}).format(g):`${g}&nbsp;nm`})}onAdd(p){return this._map=p,this._language=p.getLanguage(),this._container=O("div","mapboxgl-ctrl mapboxgl-ctrl-scale",p.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(p){this._language=p,this._update()}setUnit(p){this.options.unit=p,this._update()}},FullscreenControl:class{constructor(p){this._fullscreen=!1,p&&p.container&&(p.container instanceof a.window.HTMLElement?this._container=p.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in a.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=O("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!a.window.document.fullscreenEnabled&&!a.window.document.webkitFullscreenEnabled)}_setupUI(){const p=this._fullscreenButton=O("button","mapboxgl-ctrl-fullscreen",this._controlContainer);O("span","mapboxgl-ctrl-icon",p).setAttribute("aria-hidden","true"),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",p)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(a.window.document.fullscreenElement||a.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends a.Evented{constructor(p){super(),this.options=a.extend(Object.create(My),p),a.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(p&&p.className?p.className.trim().split(/\s+/):[])}addTo(p){return this._map&&this.remove(),this._map=p,this.options.closeOnClick&&p.on("preclick",this._onClose),this.options.closeOnMove&&p.on("move",this._onClose),p.on("remove",this.remove),this._update(),p._addPopup(this),this._focusFirstElement(),this._trackPointer?(p.on("mousemove",this._onMouseEvent),p.on("mouseup",this._onMouseEvent),p._canvasContainer.classList.add("mapboxgl-track-pointer")):p.on("move",this._update),this.fire(new a.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const p=this._map;return p&&(p.off("move",this._update),p.off("move",this._onClose),p.off("preclick",this._onClose),p.off("click",this._onClose),p.off("remove",this.remove),p.off("mousemove",this._onMouseEvent),p.off("mouseup",this._onMouseEvent),p.off("drag",this._onMouseEvent),p._canvasContainer&&p._canvasContainer.classList.remove("mapboxgl-track-pointer"),p._removePopup(this),this._map=void 0),this.fire(new a.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(p){this._lngLat=a.LngLat.convert(p),this._pos=null,this._trackPointer=!1,this._update();const l=this._map;return l&&(l.on("move",this._update),l.off("mousemove",this._onMouseEvent),l._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const p=this._map;return p&&(p.off("move",this._update),p.on("mousemove",this._onMouseEvent),p.on("drag",this._onMouseEvent),p._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(p){return this.setDOMContent(a.window.document.createTextNode(p))}setHTML(p){const l=a.window.document.createDocumentFragment(),h=a.window.document.createElement("body");let g;for(h.innerHTML=p;g=h.firstChild,g;)l.appendChild(g);return this.setDOMContent(l)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(p){return this.options.maxWidth=p,this._update(),this}setDOMContent(p){let l=this._content;if(l)for(;l.hasChildNodes();)l.firstChild&&l.removeChild(l.firstChild);else l=this._content=O("div","mapboxgl-popup-content",this._container||void 0);if(l.appendChild(p),this.options.closeButton){const h=this._closeButton=O("button","mapboxgl-popup-close-button",l);h.type="button",h.setAttribute("aria-label","Close popup"),h.setAttribute("aria-hidden","true"),h.innerHTML="&#215;",h.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(p){return this._classList.add(p),this._updateClassList(),this}removeClassName(p){return this._classList.delete(p),this._updateClassList(),this}setOffset(p){return this.options.offset=p,this._update(),this}toggleClassName(p){let l;return this._classList.delete(p)?l=!1:(this._classList.add(p),l=!0),this._updateClassList(),l}_onMouseEvent(p){this._update(p.point)}_getAnchor(p){if(this.options.anchor)return this.options.anchor;const l=this._map,h=this._container,g=this._pos;if(!l||!h||!g)return"bottom";const v=h.offsetWidth,w=h.offsetHeight,C=g.x<v/2,M=g.x>l.transform.width-v/2;if(g.y+p<w)return C?"top-left":M?"top-right":"top";if(g.y>l.transform.height-w){if(C)return"bottom-left";if(M)return"bottom-right"}return C?"left":M?"right":"bottom"}_updateClassList(){const p=this._container;if(!p)return;const l=[...this._classList];l.push("mapboxgl-popup"),this._anchor&&l.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&l.push("mapboxgl-popup-track-pointer"),p.className=l.join(" ")}_update(p){const l=this._map,h=this._content;if(!l||!this._lngLat&&!this._trackPointer||!h)return;let g=this._container;if(g||(g=this._container=O("div","mapboxgl-popup",l.getContainer()),this._tip=O("div","mapboxgl-popup-tip",g),g.appendChild(h)),this.options.maxWidth&&g.style.maxWidth!==this.options.maxWidth&&(g.style.maxWidth=this.options.maxWidth),l.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Rd(this._lngLat,this._pos,l.transform)),!this._trackPointer||p){const v=this._pos=this._trackPointer&&p?p:l.project(this._lngLat),w=Jf(this.options.offset),C=this._anchor=this._getAnchor(w.y),M=Jf(this.options.offset,C),R=v.add(M).round();l._requestDomTask(()=>{this._container&&C&&(this._container.style.transform=`${kl[C]} translate(${R.x}px,${R.y}px)`)})}if(!this._marker&&l._showingGlobe()){const v=a.isLngLatBehindGlobe(l.transform,this._lngLat)?0:1;this._setOpacity(v)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const p=this._container.querySelector(Ay);p&&p.focus()}_onClose(){this.remove()}_setOpacity(p){this._container&&(this._container.style.opacity=`${p}`),this._content&&(this._content.style.pointerEvents=p?"auto":"none")}},Marker:Id,Style:Eo,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.pointGeometry,MercatorCoordinate:a.MercatorCoordinate,FreeCameraOptions:vd,Evented:a.Evented,config:a.config,prewarm:function(){An().acquire(cn)},clearPrewarmedResources:function(){const p=mn;p&&(p.isPreloaded()&&p.numActive()===1?(p.release(cn),mn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(p){a.config.ACCESS_TOKEN=p},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(p){a.config.API_URL=p},get workerCount(){return gn.workerCount},set workerCount(p){gn.workerCount=p},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(p){a.config.MAX_PARALLEL_IMAGE_REQUESTS=p},clearStorage(p){a.clearTileCache(p)},workerUrl:"",workerClass:null,setNow:a.exported.setNow,restoreNow:a.exported.restoreNow};return tu});var y=c;return y})})(R4);var P4=R4.exports;const mT=ef(P4),Hoe=$P({__proto__:null,default:mT},[P4]),Zoe=()=>{const{open:e,Drawer:t,toggleDrawer:r}=d4(),i=Hi(),c=new Date,[d,y]=H.useState(`${c.getFullYear()}.${c.getMonth()<10?"0"+c.getMonth():c.getMonth()}`),a="ontouchstart"in window;return en(gc,{children:[ne(Rn,{sx:{"& .mapboxgl-map":{touchAction:"none"}},children:ne(K1,{initialViewState:{latitude:35.8555,longitude:128.4936,zoom:14,bearing:0,pitch:0},mapboxAccessToken:"pk.eyJ1IjoiM28xNCIsImEiOiJjbGdxZjhldTUwMHIzM3NxdmcxNHY5dzA4In0.zfZX942Gc86CfIXcM5G9Vw",mapStyle:`mapbox://styles/mapbox/${i.palette.mode}-v9`,style:{width:"100%",height:"100vh",backgroundColor:i.palette.mode==="light"?"#f6f6f4":"#343332"},mapLib:mT})}),!a&&ne(Rn,{onClick:r,sx:h4}),ne(t,{open:e,toggleDrawer:r,headerChildren:moe(d),drawerBleeding:100,children:ne(voe,{setDisplayDate:y})})]})};function Xoe(){const{setHeadOpt:e,navigate:t,setWrapperOpt:r}=ea(),i={latitude:void 0,longitude:void 0,address:null,category:null,photo:[],title:"",content:""},[c,d]=H.useState(i),y={menus:[{key:"",value:"/add-post"},{key:"",value:"/add-post/category"},{key:"",value:"/add-post/content"}],isForward:!1,icon_R:zg,fn_R:()=>t("/")},a={isFullWidth:!0,isNoneHeadPadding:!1,isBtn:!0};return H.useEffect(()=>{e(y),r(a)},[]),H.useEffect(()=>{console.log("[header]  : ",c)},[c]),ne(mE,{context:{setHeadOpt:e,post:c,setPost:d}})}var L4={},D4={exports:{}};(function(e){var t=function(r){var i=Object.prototype,c=i.hasOwnProperty,d=Object.defineProperty||function(Ee,_e,$e){Ee[_e]=$e.value},y,a=typeof Symbol=="function"?Symbol:{},b=a.iterator||"@@iterator",S=a.asyncIterator||"@@asyncIterator",k=a.toStringTag||"@@toStringTag";function P(Ee,_e,$e){return Object.defineProperty(Ee,_e,{value:$e,enumerable:!0,configurable:!0,writable:!0}),Ee[_e]}try{P({},"")}catch{P=function(_e,$e,be){return _e[$e]=be}}function O(Ee,_e,$e,be){var Me=_e&&_e.prototype instanceof Z?_e:Z,Ge=Object.create(Me.prototype),ut=new nt(be||[]);return d(Ge,"_invoke",{value:Je(Ee,$e,ut)}),Ge}r.wrap=O;function G(Ee,_e,$e){try{return{type:"normal",arg:Ee.call(_e,$e)}}catch(be){return{type:"throw",arg:be}}}var F="suspendedStart",q="suspendedYield",ce="executing",B="completed",U={};function Z(){}function J(){}function Y(){}var he={};P(he,b,function(){return this});var se=Object.getPrototypeOf,De=se&&se(se(_t([])));De&&De!==i&&c.call(De,b)&&(he=De);var fe=Y.prototype=Z.prototype=Object.create(he);J.prototype=Y,d(fe,"constructor",{value:Y,configurable:!0}),d(Y,"constructor",{value:J,configurable:!0}),J.displayName=P(Y,k,"GeneratorFunction");function $(Ee){["next","throw","return"].forEach(function(_e){P(Ee,_e,function($e){return this._invoke(_e,$e)})})}r.isGeneratorFunction=function(Ee){var _e=typeof Ee=="function"&&Ee.constructor;return _e?_e===J||(_e.displayName||_e.name)==="GeneratorFunction":!1},r.mark=function(Ee){return Object.setPrototypeOf?Object.setPrototypeOf(Ee,Y):(Ee.__proto__=Y,P(Ee,k,"GeneratorFunction")),Ee.prototype=Object.create(fe),Ee},r.awrap=function(Ee){return{__await:Ee}};function ue(Ee,_e){function $e(Ge,ut,ht,Lt){var zt=G(Ee[Ge],Ee,ut);if(zt.type==="throw")Lt(zt.arg);else{var Rt=zt.arg,St=Rt.value;return St&&typeof St=="object"&&c.call(St,"__await")?_e.resolve(St.__await).then(function(Et){$e("next",Et,ht,Lt)},function(Et){$e("throw",Et,ht,Lt)}):_e.resolve(St).then(function(Et){Rt.value=Et,ht(Rt)},function(Et){return $e("throw",Et,ht,Lt)})}}var be;function Me(Ge,ut){function ht(){return new _e(function(Lt,zt){$e(Ge,ut,Lt,zt)})}return be=be?be.then(ht,ht):ht()}d(this,"_invoke",{value:Me})}$(ue.prototype),P(ue.prototype,S,function(){return this}),r.AsyncIterator=ue,r.async=function(Ee,_e,$e,be,Me){Me===void 0&&(Me=Promise);var Ge=new ue(O(Ee,_e,$e,be),Me);return r.isGeneratorFunction(_e)?Ge:Ge.next().then(function(ut){return ut.done?ut.value:Ge.next()})};function Je(Ee,_e,$e){var be=F;return function(Ge,ut){if(be===ce)throw new Error("Generator is already running");if(be===B){if(Ge==="throw")throw ut;return Ue()}for($e.method=Ge,$e.arg=ut;;){var ht=$e.delegate;if(ht){var Lt=Ke(ht,$e);if(Lt){if(Lt===U)continue;return Lt}}if($e.method==="next")$e.sent=$e._sent=$e.arg;else if($e.method==="throw"){if(be===F)throw be=B,$e.arg;$e.dispatchException($e.arg)}else $e.method==="return"&&$e.abrupt("return",$e.arg);be=ce;var zt=G(Ee,_e,$e);if(zt.type==="normal"){if(be=$e.done?B:q,zt.arg===U)continue;return{value:zt.arg,done:$e.done}}else zt.type==="throw"&&(be=B,$e.method="throw",$e.arg=zt.arg)}}}function Ke(Ee,_e){var $e=_e.method,be=Ee.iterator[$e];if(be===y)return _e.delegate=null,$e==="throw"&&Ee.iterator.return&&(_e.method="return",_e.arg=y,Ke(Ee,_e),_e.method==="throw")||$e!=="return"&&(_e.method="throw",_e.arg=new TypeError("The iterator does not provide a '"+$e+"' method")),U;var Me=G(be,Ee.iterator,_e.arg);if(Me.type==="throw")return _e.method="throw",_e.arg=Me.arg,_e.delegate=null,U;var Ge=Me.arg;if(!Ge)return _e.method="throw",_e.arg=new TypeError("iterator result is not an object"),_e.delegate=null,U;if(Ge.done)_e[Ee.resultName]=Ge.value,_e.next=Ee.nextLoc,_e.method!=="return"&&(_e.method="next",_e.arg=y);else return Ge;return _e.delegate=null,U}$(fe),P(fe,k,"Generator"),P(fe,b,function(){return this}),P(fe,"toString",function(){return"[object Generator]"});function ke(Ee){var _e={tryLoc:Ee[0]};1 in Ee&&(_e.catchLoc=Ee[1]),2 in Ee&&(_e.finallyLoc=Ee[2],_e.afterLoc=Ee[3]),this.tryEntries.push(_e)}function ze(Ee){var _e=Ee.completion||{};_e.type="normal",delete _e.arg,Ee.completion=_e}function nt(Ee){this.tryEntries=[{tryLoc:"root"}],Ee.forEach(ke,this),this.reset(!0)}r.keys=function(Ee){var _e=Object(Ee),$e=[];for(var be in _e)$e.push(be);return $e.reverse(),function Me(){for(;$e.length;){var Ge=$e.pop();if(Ge in _e)return Me.value=Ge,Me.done=!1,Me}return Me.done=!0,Me}};function _t(Ee){if(Ee){var _e=Ee[b];if(_e)return _e.call(Ee);if(typeof Ee.next=="function")return Ee;if(!isNaN(Ee.length)){var $e=-1,be=function Me(){for(;++$e<Ee.length;)if(c.call(Ee,$e))return Me.value=Ee[$e],Me.done=!1,Me;return Me.value=y,Me.done=!0,Me};return be.next=be}}return{next:Ue}}r.values=_t;function Ue(){return{value:y,done:!0}}return nt.prototype={constructor:nt,reset:function(Ee){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.method="next",this.arg=y,this.tryEntries.forEach(ze),!Ee)for(var _e in this)_e.charAt(0)==="t"&&c.call(this,_e)&&!isNaN(+_e.slice(1))&&(this[_e]=y)},stop:function(){this.done=!0;var Ee=this.tryEntries[0],_e=Ee.completion;if(_e.type==="throw")throw _e.arg;return this.rval},dispatchException:function(Ee){if(this.done)throw Ee;var _e=this;function $e(Lt,zt){return Ge.type="throw",Ge.arg=Ee,_e.next=Lt,zt&&(_e.method="next",_e.arg=y),!!zt}for(var be=this.tryEntries.length-1;be>=0;--be){var Me=this.tryEntries[be],Ge=Me.completion;if(Me.tryLoc==="root")return $e("end");if(Me.tryLoc<=this.prev){var ut=c.call(Me,"catchLoc"),ht=c.call(Me,"finallyLoc");if(ut&&ht){if(this.prev<Me.catchLoc)return $e(Me.catchLoc,!0);if(this.prev<Me.finallyLoc)return $e(Me.finallyLoc)}else if(ut){if(this.prev<Me.catchLoc)return $e(Me.catchLoc,!0)}else if(ht){if(this.prev<Me.finallyLoc)return $e(Me.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(Ee,_e){for(var $e=this.tryEntries.length-1;$e>=0;--$e){var be=this.tryEntries[$e];if(be.tryLoc<=this.prev&&c.call(be,"finallyLoc")&&this.prev<be.finallyLoc){var Me=be;break}}Me&&(Ee==="break"||Ee==="continue")&&Me.tryLoc<=_e&&_e<=Me.finallyLoc&&(Me=null);var Ge=Me?Me.completion:{};return Ge.type=Ee,Ge.arg=_e,Me?(this.method="next",this.next=Me.finallyLoc,U):this.complete(Ge)},complete:function(Ee,_e){if(Ee.type==="throw")throw Ee.arg;return Ee.type==="break"||Ee.type==="continue"?this.next=Ee.arg:Ee.type==="return"?(this.rval=this.arg=Ee.arg,this.method="return",this.next="end"):Ee.type==="normal"&&_e&&(this.next=_e),U},finish:function(Ee){for(var _e=this.tryEntries.length-1;_e>=0;--_e){var $e=this.tryEntries[_e];if($e.finallyLoc===Ee)return this.complete($e.completion,$e.afterLoc),ze($e),U}},catch:function(Ee){for(var _e=this.tryEntries.length-1;_e>=0;--_e){var $e=this.tryEntries[_e];if($e.tryLoc===Ee){var be=$e.completion;if(be.type==="throw"){var Me=be.arg;ze($e)}return Me}}throw new Error("illegal catch attempt")},delegateYield:function(Ee,_e,$e){return this.delegate={iterator:_t(Ee),resultName:_e,nextLoc:$e},this.method==="next"&&(this.arg=y),U}},r}(e.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})(D4);var Koe=D4.exports;(function(e){var t=Koe;function r(F,q,ce,B,U,Z,J){try{var Y=F[Z](J),he=Y.value}catch(se){return void ce(se)}Y.done?q(he):Promise.resolve(he).then(B,U)}function i(F){return function(){var q=this,ce=arguments;return new Promise(function(B,U){var Z=F.apply(q,ce);function J(he){r(Z,B,U,J,Y,"next",he)}function Y(he){r(Z,B,U,J,Y,"throw",he)}J(void 0)})}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=!1,d=null,y="en",a=null,b=null,S="https://maps.googleapis.com/maps/api/geocode/json";function k(F){var q=arguments.length>1&&arguments[1]!==void 0&&arguments[1];c&&(q?console.warn(F):console.log(F))}function P(F){return O.apply(this,arguments)}function O(){return(O=i(t.mark(function F(q){var ce,B;return t.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,fetch(q).catch(function(){return Promise.reject(new Error("Error fetching data"))});case 2:return ce=U.sent,U.next=5,ce.json().catch(function(){return k("Error parsing server response"),Promise.reject(new Error("Error parsing server response"))});case 5:if((B=U.sent).status!=="OK"){U.next=9;break}return k(B),U.abrupt("return",B);case 9:return k("".concat(B.error_message,`.
Server returned status code `).concat(B.status),!0),U.abrupt("return",Promise.reject(new Error("".concat(B.error_message,`.
Server returned status code `).concat(B.status))));case 11:case"end":return U.stop()}},F)}))).apply(this,arguments)}var G={setApiKey:function(F){d=F},setLanguage:function(F){y=F},setRegion:function(F){a=F},setLocationType:function(F){b=F},enableDebug:function(){var F=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];c=F},fromLatLng:function(F,q,ce,B,U,Z){return i(t.mark(function J(){var Y,he;return t.wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if(F&&q){se.next=3;break}return k("Provided coordinates are invalid",!0),se.abrupt("return",Promise.reject(new Error("Provided coordinates are invalid")));case 3:return Y="".concat(F,",").concat(q),he="".concat(S,"?latlng=").concat(encodeURIComponent(Y)),(ce||d)&&(he+="&key=".concat(d=ce||d)),(B||y)&&(he+="&language=".concat(y=B||y)),(U||a)&&(a=U||a,he+="&region=".concat(encodeURIComponent(a))),(Z||b)&&(b=Z||b,he+="&location_type=".concat(encodeURIComponent(b))),se.abrupt("return",P(he));case 9:case"end":return se.stop()}},J)}))()},fromAddress:function(F,q,ce,B){return i(t.mark(function U(){var Z;return t.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(F){J.next=3;break}return k("Provided address is invalid",!0),J.abrupt("return",Promise.reject(new Error("Provided address is invalid")));case 3:return Z="".concat(S,"?address=").concat(encodeURIComponent(F)),(q||d)&&(Z+="&key=".concat(d=q||d)),(ce||y)&&(Z+="&language=".concat(y=ce||y)),(B||a)&&(a=B||a,Z+="&region=".concat(encodeURIComponent(a))),J.abrupt("return",P(Z));case 8:case"end":return J.stop()}},U)}))()}};e.default=G})(L4);const n_=ef(L4);function Yoe({setViewport:e}){navigator.geolocation.getCurrentPosition(t=>{e({latitude:t.coords.latitude,longitude:t.coords.longitude,zoom:15})})}async function Qoe(e){const t=[];n_.setApiKey("AIzaSyAgl2juFj3hlySKnJ9J7kWsYy9e9TFNKOM"),n_.setLanguage("ko"),n_.setRegion("ko");try{return(await n_.fromLatLng(String(e.latitude),String(e.longitude))).results[1].address_components.map(i=>{i.types.map(c=>{switch(c){case"sublocality":t.push(i.long_name),console.log(typeof t);break;case"administrative_area_level_1":t.push(i.long_name);break;case"administrative_area_level_2":t.push(i.long_name);break}})}),t}catch(r){return console.error(r),[]}}const Tw={longitude:127.9068,latitude:35.6699,zoom:6},Joe=()=>{const{post:e,setPost:t}=ea(),[r,i]=H.useState(void 0),[c,d]=H.useState(void 0),y=H.useRef(Tw),a=Hi();return H.useEffect(()=>{y.current==Tw&&Yoe({setViewport:i})},[navigator]),H.useEffect(()=>{y.current=r,y.current!==void 0&&Qoe(y.current).then(b=>{d(b.reverse().join(" "))}),t(b=>({...b,latitude:r==null?void 0:r.latitude,longitude:r==null?void 0:r.longitude,address:c})),console.log("  : ",e)},[r,y,c]),en(Rn,{sx:{padding:"1rem 0",maxHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"space-between","& .mapboxgl-ctrl-fullscreen, & .mapboxgl-ctrl-compass, & .mapboxgl-ctrl.mapboxgl-ctrl-scale, & .mapboxgl-ctrl-attrib-button, & .mapboxgl-ctrl-attrib-inner, & .mapboxgl-ctrl-logo ":{display:"none"}},children:[en(Rn,{sx:{padding:"1rem 1.5rem"},children:[en(Nr,{variant:"h5",fontWeight:600,children:["   ",ne("br",{}),"   "]}),ne(Nr,{variant:"subtitle1",sx:{color:"#A2A2A2"},children:c||ne(Y2,{variant:"text",animation:"wave",width:250})})]}),ne(Rn,{padding:0,children:y.current!==Tw?en(K1,{initialViewState:{latitude:35.8555,longitude:128.4936,zoom:6,bearing:0,pitch:0},mapboxAccessToken:"pk.eyJ1IjoiM28xNCIsImEiOiJjbGdxZjhldTUwMHIzM3NxdmcxNHY5dzA4In0.zfZX942Gc86CfIXcM5G9Vw",mapStyle:`mapbox://styles/mapbox/${a.palette.mode}-v9`,style:{width:"100%",height:"500px",maxHeight:"55vh",backgroundColor:a.palette.mode==="light"?"#f6f6f4":"#343332"},mapLib:mT,children:[ne(Voe,{position:"top-left"}),ne(Uoe,{position:"top-left"}),ne(Goe,{position:"top-left"}),ne(qoe,{})]}):ne(Y2,{variant:"rectangular",sx:{maxHeight:"65vh"}})})]})},eae=al({palette:{primary:{main:"#EEF1EE"},secondary:{main:"#00A651"}}}),tae=({category:e})=>{const[t,r]=H.useState("primary"),{post:i,setPost:c}=ea(),d=()=>{console.log(""),i!=null&&i.category?i.category===e.id?(c(y=>({...y,category:null})),r(t==="primary"?"secondary":"primary")):console.log("  "):(c(y=>({...y,category:e.id})),r(t==="primary"?"secondary":"primary")),console.log(i)};return H.useEffect(()=>{(i==null?void 0:i.category)===e.id&&r("secondary")},[]),ne(Pg,{theme:eae,children:ne(n4,{activeColor:t,handleButtonClick:d,category:e})})},nae=()=>{mD();const{post:e}=ea();return H.useEffect(()=>{console.log("post ",e)},[]),en(Rn,{sx:{maxHeight:"100vh",padding:"1rem",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[en(Rn,{sx:{padding:"1rem 0.5rem"},children:[ne(Nr,{variant:"h5",fontWeight:600,children:"  "}),ne(Nr,{variant:"h5",fontWeight:600,paddingBottom:"1rem",children:""}),ne(Nr,{variant:"subtitle1",fontWeight:500,sx:{color:"#A2A2A2"},children:"1   ."})]}),ne(Rn,{children:ne(Zl,{container:!0,rowSpacing:3,columnSpacing:2,margin:"0 auto",children:sv.map(t=>ne(Zl,{xs:6,sx:{height:"7rem","@media (max-width: 375px)":{height:"6rem"}},children:ne(tae,{category:t})},sv.indexOf(t)))})})]})};var z4={},gT={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getListFiles=e.getImage=e.getBase64=e.getAcceptTypeString=e.openFileDialog=void 0,e.openFileDialog=function(t){t.current&&t.current.click()},e.getAcceptTypeString=function(t,r){return t!=null&&t.length?t.map(function(i){return"."+i}).join(", "):r?"":"image/*"},e.getBase64=function(t){var r=new FileReader;return new Promise(function(i){r.addEventListener("load",function(){return i(String(r.result))}),r.readAsDataURL(t)})},e.getImage=function(t){var r=new Image;return new Promise(function(i){r.addEventListener("load",function(){return i(r)}),r.src=URL.createObjectURL(t)})},e.getListFiles=function(t,r){for(var i=[],c=0;c<t.length;c+=1)i.push(e.getBase64(t[c]));return Promise.all(i).then(function(d){var y=d.map(function(a,b){var S;return S={},S[r]=a,S.file=t[b],S});return y})}})(gT);var O4={},Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});Hs.DEFAULT_DATA_URL_KEY=Hs.INIT_MAX_NUMBER=Hs.DEFAULT_NULL_INDEX=void 0;Hs.DEFAULT_NULL_INDEX=-1;Hs.INIT_MAX_NUMBER=1e3;Hs.DEFAULT_DATA_URL_KEY="dataURL";(function(e){var t=Ai&&Ai.__awaiter||function(d,y,a,b){function S(k){return k instanceof a?k:new a(function(P){P(k)})}return new(a||(a=Promise))(function(k,P){function O(q){try{F(b.next(q))}catch(ce){P(ce)}}function G(q){try{F(b.throw(q))}catch(ce){P(ce)}}function F(q){q.done?k(q.value):S(q.value).then(O,G)}F((b=b.apply(d,y||[])).next())})},r=Ai&&Ai.__generator||function(d,y){var a={label:0,sent:function(){if(k[0]&1)throw k[1];return k[1]},trys:[],ops:[]},b,S,k,P;return P={next:O(0),throw:O(1),return:O(2)},typeof Symbol=="function"&&(P[Symbol.iterator]=function(){return this}),P;function O(F){return function(q){return G([F,q])}}function G(F){if(b)throw new TypeError("Generator is already executing.");for(;a;)try{if(b=1,S&&(k=F[0]&2?S.return:F[0]?S.throw||((k=S.return)&&k.call(S),0):S.next)&&!(k=k.call(S,F[1])).done)return k;switch(S=0,k&&(F=[F[0]&2,k.value]),F[0]){case 0:case 1:k=F;break;case 4:return a.label++,{value:F[1],done:!1};case 5:a.label++,S=F[1],F=[0];continue;case 7:F=a.ops.pop(),a.trys.pop();continue;default:if(k=a.trys,!(k=k.length>0&&k[k.length-1])&&(F[0]===6||F[0]===2)){a=0;continue}if(F[0]===3&&(!k||F[1]>k[0]&&F[1]<k[3])){a.label=F[1];break}if(F[0]===6&&a.label<k[1]){a.label=k[1],k=F;break}if(k&&a.label<k[2]){a.label=k[2],a.ops.push(F);break}k[2]&&a.ops.pop(),a.trys.pop();continue}F=y.call(d,a)}catch(q){F=[6,q],S=0}finally{b=k=0}if(F[0]&5)throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.getErrorValidation=e.isMaxNumberValid=e.isAcceptTypeValid=e.isMaxFileSizeValid=e.isImageValid=e.isResolutionValid=void 0;var i=Hs,c=gT;e.isResolutionValid=function(d,y,a,b){if(a===void 0&&(a=0),b===void 0&&(b=1),!a||!b||!d.width||!d.height)return!0;switch(y){case"absolute":{if(d.width===a&&d.height===b)return!0;break}case"ratio":{var S=a/b;if(d.width/d.height===S)return!0;break}case"less":{if(d.width<=a&&d.height<=b)return!0;break}case"more":{if(d.width>=a&&d.height>=b)return!0;break}}return!1},e.isImageValid=function(d){return!!d.includes("image")},e.isMaxFileSizeValid=function(d,y){return y?d<=y:!0},e.isAcceptTypeValid=function(d,y){if(d&&d.length>0){var a=y.split(".").pop()||"";if(d.findIndex(function(b){return b.toLowerCase()===a.toLowerCase()})<0)return!1}return!0},e.isMaxNumberValid=function(d,y,a){if(y!==0&&!y)return!0;if(a===i.DEFAULT_NULL_INDEX){if(d<=y)return!0}else if(d<=y+1)return!0;return!1},e.getErrorValidation=function(d){var y=d.fileList,a=d.value,b=d.maxNumber,S=d.keyUpdate,k=d.acceptType,P=d.maxFileSize,O=d.resolutionType,G=d.resolutionWidth,F=d.resolutionHeight,q=d.allowNonImageType;return t(void 0,void 0,void 0,function(){var ce,B,U,Z,J;return r(this,function(Y){switch(Y.label){case 0:return ce={},e.isMaxNumberValid(y.length+a.length,b,S)?[3,1]:(ce.maxNumber=!0,[3,5]);case 1:B=0,Y.label=2;case 2:return B<y.length?(U=y[B].file,U?!q&&!e.isImageValid(U.type)?(ce.acceptType=!0,[3,5]):e.isAcceptTypeValid(k,U.name)?e.isMaxFileSizeValid(U.size,P)?O?[4,c.getImage(U)]:[3,4]:(ce.maxFileSize=!0,[3,5]):(ce.acceptType=!0,[3,5]):[3,4]):[3,5];case 3:if(Z=Y.sent(),J=e.isResolutionValid(Z,O,G,F),!J)return ce.resolution=!0,[3,5];Y.label=4;case 4:return B+=1,[3,2];case 5:return Object.values(ce).find(Boolean)?[2,ce]:[2,null]}})})}})(O4);var tS=Ai&&Ai.__assign||function(){return tS=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},tS.apply(this,arguments)},rae=Ai&&Ai.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),iae=Ai&&Ai.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),oae=Ai&&Ai.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&rae(t,e,r);return iae(t,e),t},Cw=Ai&&Ai.__awaiter||function(e,t,r,i){function c(d){return d instanceof r?d:new r(function(y){y(d)})}return new(r||(r=Promise))(function(d,y){function a(k){try{S(i.next(k))}catch(P){y(P)}}function b(k){try{S(i.throw(k))}catch(P){y(P)}}function S(k){k.done?d(k.value):c(k.value).then(a,b)}S((i=i.apply(e,t||[])).next())})},Mw=Ai&&Ai.__generator||function(e,t){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},i,c,d,y;return y={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function a(S){return function(k){return b([S,k])}}function b(S){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,c&&(d=S[0]&2?c.return:S[0]?c.throw||((d=c.return)&&d.call(c),0):c.next)&&!(d=d.call(c,S[1])).done)return d;switch(c=0,d&&(S=[S[0]&2,d.value]),S[0]){case 0:case 1:d=S;break;case 4:return r.label++,{value:S[1],done:!1};case 5:r.label++,c=S[1],S=[0];continue;case 7:S=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(S[0]===6||S[0]===2)){r=0;continue}if(S[0]===3&&(!d||S[1]>d[0]&&S[1]<d[3])){r.label=S[1];break}if(S[0]===6&&r.label<d[1]){r.label=d[1],d=S;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(S);break}d[2]&&r.ops.pop(),r.trys.pop();continue}S=t.call(e,r)}catch(k){S=[6,k],c=0}finally{i=d=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}},Aw=Ai&&Ai.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),c=0,t=0;t<r;t++)for(var d=arguments[t],y=0,a=d.length;y<a;y++,c++)i[c]=d[y];return i};Object.defineProperty(z4,"__esModule",{value:!0});var Da=oae(H),kw=gT,aae=O4,Gl=Hs,sae=function(e){var t=e.value,r=t===void 0?[]:t,i=e.onChange,c=e.onError,d=e.children,y=e.dataURLKey,a=y===void 0?Gl.DEFAULT_DATA_URL_KEY:y,b=e.multiple,S=b===void 0?!1:b,k=e.maxNumber,P=k===void 0?Gl.INIT_MAX_NUMBER:k,O=e.acceptType,G=e.maxFileSize,F=e.resolutionWidth,q=e.resolutionHeight,ce=e.resolutionType,B=e.inputProps,U=B===void 0?{}:B,Z=e.allowNonImageType,J=Z===void 0?!1:Z,Y=r||[],he=Da.useRef(null),se=Da.useState(Gl.DEFAULT_NULL_INDEX),De=se[0],fe=se[1],$=Da.useState(null),ue=$[0],Je=$[1],Ke=Da.useState(!1),ke=Ke[0],ze=Ke[1],nt=Da.useCallback(function(){return kw.openFileDialog(he)},[he]),_t=Da.useCallback(function(){fe(Gl.DEFAULT_NULL_INDEX),nt()},[nt]),Ue=Da.useCallback(function(){i==null||i([])},[i]),Ee=function(St){var Et=Aw(Y);Array.isArray(St)?St.forEach(function(Ct){Et.splice(Ct,1)}):Et.splice(St,1),i==null||i(Et)},_e=function(St){fe(St),nt()},$e=function(St){return Cw(void 0,void 0,void 0,function(){var Et;return Mw(this,function(Ct){switch(Ct.label){case 0:return[4,aae.getErrorValidation({fileList:St,maxFileSize:G,maxNumber:P,acceptType:O,keyUpdate:De,resolutionType:ce,resolutionWidth:F,resolutionHeight:q,value:Y,allowNonImageType:J})];case 1:return Et=Ct.sent(),Et?(Je(Et),c==null||c(Et,St),[2,!1]):(ue&&Je(null),[2,!0])}})})},be=function(St){return Cw(void 0,void 0,void 0,function(){var Et,Ct,Kt,Nt,pn,Pn;return Mw(this,function(vn){switch(vn.label){case 0:return St?[4,kw.getListFiles(St,a)]:[2];case 1:return Et=vn.sent(),Et.length?[4,$e(Et)]:[2];case 2:if(Ct=vn.sent(),!Ct)return[2];if(Nt=[],De>Gl.DEFAULT_NULL_INDEX)pn=Et[0],Kt=Aw(Y),Kt[De]=pn,Nt.push(De);else if(S)for(Kt=Aw(Y,Et),Pn=Y.length;Pn<Kt.length;Pn+=1)Nt.push(Pn);else Kt=[Et[0]],Nt.push(0);return i==null||i(Kt,Nt),[2]}})})},Me=function(St){return Cw(void 0,void 0,void 0,function(){return Mw(this,function(Et){switch(Et.label){case 0:return[4,be(St.target.files)];case 1:return Et.sent(),De>Gl.DEFAULT_NULL_INDEX&&fe(Gl.DEFAULT_NULL_INDEX),he.current&&(he.current.value=""),[2]}})})},Ge=Da.useMemo(function(){return kw.getAcceptTypeString(O,J)},[O,J]),ut=function(St){St.preventDefault(),St.stopPropagation()},ht=function(St){St.preventDefault(),St.stopPropagation(),St.dataTransfer.items&&St.dataTransfer.items.length>0&&ze(!0)},Lt=function(St){St.preventDefault(),St.stopPropagation(),ze(!1)},zt=function(St){St.preventDefault(),St.stopPropagation(),ze(!1),St.dataTransfer.files&&St.dataTransfer.files.length>0&&be(St.dataTransfer.files)},Rt=function(St){St.preventDefault(),St.stopPropagation(),St.dataTransfer.clearData()};return Da.default.createElement(Da.default.Fragment,null,Da.default.createElement("input",tS({type:"file",accept:Ge,ref:he,multiple:S&&De===Gl.DEFAULT_NULL_INDEX,onChange:Me,style:{display:"none"}},U)),d==null?void 0:d({imageList:Y,onImageUpload:_t,onImageRemoveAll:Ue,onImageUpdate:_e,onImageRemove:Ee,errors:ue,dragProps:{onDrop:zt,onDragEnter:ht,onDragLeave:Lt,onDragOver:ut,onDragStart:Rt},isDragging:ke}))},lae=z4.default=sae;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var F4=function(e,t){return(F4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var c in i)i.hasOwnProperty(c)&&(r[c]=i[c])})(e,t)},cae,r_,uae=(function(e){/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var t={}.hasOwnProperty;function r(){for(var i=[],c=0;c<arguments.length;c++){var d=arguments[c];if(d){var y=typeof d;if(y==="string"||y==="number")i.push(d);else if(Array.isArray(d)&&d.length){var a=r.apply(null,d);a&&i.push(a)}else if(y==="object")for(var b in d)t.call(d,b)&&d[b]&&i.push(b)}}return i.join(" ")}e.exports?(r.default=r,e.exports=r):window.classNames=r})()}(r_={path:cae,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(t==null&&r_.path)}},r_.exports),r_.exports);function nS(e,t,r){var i,c,d,y,a;function b(){var k=Date.now()-y;k<t&&k>=0?i=setTimeout(b,t-k):(i=null,r||(a=e.apply(d,c),d=c=null))}t==null&&(t=100);var S=function(){d=this,c=arguments,y=Date.now();var k=r&&!i;return i||(i=setTimeout(b,t)),k&&(a=e.apply(d,c),d=c=null),a};return S.clear=function(){i&&(clearTimeout(i),i=null)},S.flush=function(){i&&(a=e.apply(d,c),d=c=null,clearTimeout(i),i=null)},S}nS.debounce=nS;var dae=nS;(function(e,t){t===void 0&&(t={});var r=t.insertAt;if(e&&typeof document<"u"){var i=document.head||document.getElementsByTagName("head")[0],c=document.createElement("style");c.type="text/css",r==="top"&&i.firstChild?i.insertBefore(c,i.firstChild):i.appendChild(c),c.styleSheet?c.styleSheet.cssText=e:c.appendChild(document.createTextNode(e))}})(`.indiana-scroll-container {
  overflow: auto; }
  .indiana-scroll-container--dragging {
    scroll-behavior: auto !important; }
    .indiana-scroll-container--dragging > * {
      pointer-events: none;
      cursor: -webkit-grab;
      cursor: grab; }
  .indiana-scroll-container--hide-scrollbars {
    overflow: hidden;
    overflow: -moz-scrollbars-none;
    -ms-overflow-style: none;
    scrollbar-width: none; }
    .indiana-scroll-container--hide-scrollbars::-webkit-scrollbar {
      display: none !important;
      height: 0 !important;
      width: 0 !important;
      background: transparent !important;
      -webkit-appearance: none !important; }
  .indiana-scroll-container--native-scroll {
    overflow: auto; }

.indiana-dragging {
  cursor: -webkit-grab;
  cursor: grab; }
`);var Rw,hae=(Rw="indiana-scroll-container",function(e,t){if(!e)return Rw;var r;typeof e=="string"?r=e:t=e;var i=Rw;return r&&(i+="__"+r),i+(t?Object.keys(t).reduce(function(c,d){var y=t[d];return y&&(c+=" "+(typeof y=="boolean"?i+"--"+d:i+"--"+d+"_"+y)),c},""):"")}),fae=function(e){function t(r){var i=e.call(this,r)||this;return i.onEndScroll=function(){i.scrolling=!1,!i.pressed&&i.started&&i.processEnd()},i.onScroll=function(c){var d=i.container.current;d.scrollLeft===i.scrollLeft&&d.scrollTop===i.scrollTop||(i.scrolling=!0,i.processScroll(c),i.onEndScroll())},i.onTouchStart=function(c){var d=i.props.nativeMobileScroll;if(i.isDraggable(c.target))if(i.internal=!0,d&&i.scrolling)i.pressed=!0;else{var y=c.touches[0];i.processClick(c,y.clientX,y.clientY),!d&&i.props.stopPropagation&&c.stopPropagation()}},i.onTouchEnd=function(c){var d=i.props.nativeMobileScroll;i.pressed&&(!i.started||i.scrolling&&d?i.pressed=!1:i.processEnd(),i.forceUpdate())},i.onTouchMove=function(c){var d=i.props.nativeMobileScroll;if(i.pressed&&(!d||!i.isMobile)){var y=c.touches[0];y&&i.processMove(c,y.clientX,y.clientY),c.preventDefault(),i.props.stopPropagation&&c.stopPropagation()}},i.onMouseDown=function(c){i.isDraggable(c.target)&&i.isScrollable()&&(i.internal=!0,i.props.buttons.indexOf(c.button)!==-1&&(i.processClick(c,c.clientX,c.clientY),c.preventDefault(),i.props.stopPropagation&&c.stopPropagation()))},i.onMouseMove=function(c){i.pressed&&(i.processMove(c,c.clientX,c.clientY),c.preventDefault(),i.props.stopPropagation&&c.stopPropagation())},i.onMouseUp=function(c){i.pressed&&(i.started?i.processEnd():(i.internal=!1,i.pressed=!1,i.forceUpdate(),i.props.onClick&&i.props.onClick(c)),c.preventDefault(),i.props.stopPropagation&&c.stopPropagation())},i.container=Qe.createRef(),i.onEndScroll=dae(i.onEndScroll,300),i.scrolling=!1,i.started=!1,i.pressed=!1,i.internal=!1,i.getRef=i.getRef.bind(i),i}return function(r,i){function c(){this.constructor=r}F4(r,i),r.prototype=i===null?Object.create(i):(c.prototype=i.prototype,new c)}(t,e),t.prototype.componentDidMount=function(){var r=this.props.nativeMobileScroll,i=this.container.current;window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd),i.addEventListener("touchstart",this.onTouchStart,{passive:!1}),i.addEventListener("mousedown",this.onMouseDown,{passive:!1}),r&&(this.isMobile=this.isMobileDevice(),this.isMobile&&this.forceUpdate())},t.prototype.componentWillUnmount=function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},t.prototype.getElement=function(){return this.container.current},t.prototype.isMobileDevice=function(){return window.orientation!==void 0||navigator.userAgent.indexOf("IEMobile")!==-1},t.prototype.isDraggable=function(r){var i=this.props.ignoreElements;if(i){var c=r.closest(i);return c===null||c.contains(this.getElement())}return!0},t.prototype.isScrollable=function(){var r=this.container.current;return r&&(r.scrollWidth>r.clientWidth||r.scrollHeight>r.clientHeight)},t.prototype.processClick=function(r,i,c){var d=this.container.current;this.scrollLeft=d.scrollLeft,this.scrollTop=d.scrollTop,this.clientX=i,this.clientY=c,this.pressed=!0},t.prototype.processStart=function(r){r===void 0&&(r=!0);var i=this.props.onStartScroll;this.started=!0,r&&document.body.classList.add("indiana-dragging"),i&&i({external:!this.internal}),this.forceUpdate()},t.prototype.processScroll=function(r){if(this.started){var i=this.props.onScroll;i&&i({external:!this.internal})}else this.processStart(!1)},t.prototype.processMove=function(r,i,c){var d=this.props,y=d.horizontal,a=d.vertical,b=d.activationDistance,S=d.onScroll,k=this.container.current;this.started?(y&&(k.scrollLeft-=i-this.clientX),a&&(k.scrollTop-=c-this.clientY),S&&S({external:!this.internal}),this.clientX=i,this.clientY=c,this.scrollLeft=k.scrollLeft,this.scrollTop=k.scrollTop):(y&&Math.abs(i-this.clientX)>b||a&&Math.abs(c-this.clientY)>b)&&(this.clientX=i,this.clientY=c,this.processStart())},t.prototype.processEnd=function(){var r=this.props.onEndScroll;this.container.current&&r&&r({external:!this.internal}),this.pressed=!1,this.started=!1,this.scrolling=!1,this.internal=!1,document.body.classList.remove("indiana-dragging"),this.forceUpdate()},t.prototype.getRef=function(r){[this.container,this.props.innerRef].forEach(function(i){i&&(typeof i=="function"?i(r):i.current=r)})},t.prototype.render=function(){var r=this.props,i=r.children,c=r.draggingClassName,d=r.className,y=r.style,a=r.hideScrollbars,b=r.component;return Qe.createElement(b,{className:uae(d,this.pressed&&c,hae({dragging:this.pressed,"hide-scrollbars":a,"native-scroll":this.isMobile})),style:y,ref:this.getRef,onScroll:this.onScroll},i)},t.defaultProps={nativeMobileScroll:!0,hideScrollbars:!0,activationDistance:10,vertical:!0,horizontal:!0,stopPropagation:!1,style:{},component:"div",buttons:[0]},t}(H.PureComponent);const pae=e=>al({palette:{mode:e.palette.mode,primary:{main:"#00A651"},secondary:{main:"#EEF1EE"}},components:{MuiTextField:{styleOverrides:{root:{"--TextField-brandBorderColor":"#E0E3E7","--TextField-brandBorderHoverColor":"#B2BAC2","--TextField-brandBorderFocusedColor":"#6F7E8C","& label.Mui-focused":{color:"var(--TextField-brandBorderFocusedColor)"}}}},MuiOutlinedInput:{styleOverrides:{notchedOutline:{borderColor:"var(--TextField-brandBorderColor)"}}},MuiFilledInput:{styleOverrides:{root:{"&:before, &:after":{borderBottom:"2px solid var(--TextField-brandBorderColor)"},"&:hover:not(.Mui-disabled, .Mui-error):before":{borderBottom:"2px solid var(--TextField-brandBorderHoverColor)"},"&.Mui-focused:after":{borderBottom:"2px solid var(--TextField-brandBorderFocusedColor)"}}}},MuiInput:{styleOverrides:{root:{"&:before":{borderBottom:"2px solid var(--TextField-brandBorderColor)"},"&:hover:not(.Mui-disabled, .Mui-error):before":{borderBottom:"2px solid var(--TextField-brandBorderHoverColor)"},"&.Mui-focused:after":{borderBottom:"2px solid var(--TextField-brandBorderFocusedColor)"}}}}}}),mae=()=>{const{post:e}=ea(),t=Hi(),[r,i]=H.useState([]),c=10,d=(G,F)=>{console.log(G,F),i(G)},[y,a]=H.useState(!1),[b,S]=H.useState({}),[k,P]=H.useState(null),O=G=>{P(G),a(F=>!F),S({filter:b==="brightness(70%)"?"none":"brightness(70%)"})};return ne(Pg,{theme:pae(t),children:en(Rn,{sx:{maxHeight:"100vh",padding:"1rem 1.5rem",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[en(Rn,{sx:{display:"flex",flexDirection:"column"},children:[ne(Rn,{sx:{pb:"1rem"},children:ne(JK,{label:e==null?void 0:e.category,size:"medium",color:"primary",sx:{fontWeight:"900"}})}),ne(uw,{label:"  ",variant:"standard",InputProps:{readOnly:!0},defaultValue:e==null?void 0:e.address,margin:"dense"}),ne(uw,{label:"   ",variant:"standard",margin:"dense",color:"primary"}),ne(uw,{multiline:!0,rows:4,label:"  ?",variant:"standard",margin:"dense",InputProps:{disableUnderline:!0}})]}),ne(Rn,{children:ne(lae,{multiple:!0,value:r,onChange:d,maxNumber:c,children:({imageList:G,onImageUpload:F,onImageRemove:q})=>en(fae,{className:"scroll-container",horizontal:!0,vertical:!1,style:{display:"flex",height:"100%",alignItems:"center"},children:[G.map((ce,B)=>en(Rn,{sx:{width:"100%",p:4,position:"relative"},onClick:()=>O(B),children:[ne("img",{src:ce.dataURL,style:{width:"20rem",height:"20rem",objectFit:"cover",borderRadius:"15px",...b}}),y&&ne("button",{onClick:()=>{q(B)},style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"transparent",border:"none",padding:0,color:"white",fontSize:"2rem"},children:""})]},B)),en(nl,{onClick:F,style:{margin:"0 auto",border:"2px dashed #B2B1B1",borderRadius:"20px",backgroundColor:"#F3F3F3",width:"20rem",height:"20rem"},children:[" ",ne("br",{})," "]})]})})})]})})};var B4="en",yT={},rS={};function N4(){return B4}function gae(e){B4=e}function yae(e){return yT[e]}function _ae(e){if(!e)throw new Error("No locale data passed");yT[e.locale]=e,rS[e.locale.toLowerCase()]=e.locale}function oP(e){if(yT[e])return e;if(rS[e.toLowerCase()])return rS[e.toLowerCase()]}function $4(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.localeMatcher||"lookup";switch(r){case"lookup":return aP(e);case"best fit":return aP(e);default:throw new RangeError('Invalid "localeMatcher" option: '.concat(r))}}function aP(e){var t=oP(e);if(t)return t;for(var r=e.split("-");e.length>1;){r.pop(),e=r.join("-");var i=oP(e);if(i)return i}}var Xe={af:function(t){return t==1?"one":"other"},am:function(t){return t>=0&&t<=1?"one":"other"},ar:function(t){var r=String(t).split("."),i=Number(r[0])==t,c=i&&r[0].slice(-2);return t==0?"zero":t==1?"one":t==2?"two":c>=3&&c<=10?"few":c>=11&&c<=99?"many":"other"},ast:function(t){var r=String(t).split("."),i=!r[1];return t==1&&i?"one":"other"},be:function(t){var r=String(t).split("."),i=Number(r[0])==t,c=i&&r[0].slice(-1),d=i&&r[0].slice(-2);return c==1&&d!=11?"one":c>=2&&c<=4&&(d<12||d>14)?"few":i&&c==0||c>=5&&c<=9||d>=11&&d<=14?"many":"other"},br:function(t){var r=String(t).split("."),i=Number(r[0])==t,c=i&&r[0].slice(-1),d=i&&r[0].slice(-2),y=i&&r[0].slice(-6);return c==1&&d!=11&&d!=71&&d!=91?"one":c==2&&d!=12&&d!=72&&d!=92?"two":(c==3||c==4||c==9)&&(d<10||d>19)&&(d<70||d>79)&&(d<90||d>99)?"few":t!=0&&i&&y==0?"many":"other"},bs:function(t){var r=String(t).split("."),i=r[0],c=r[1]||"",d=!r[1],y=i.slice(-1),a=i.slice(-2),b=c.slice(-1),S=c.slice(-2);return d&&y==1&&a!=11||b==1&&S!=11?"one":d&&y>=2&&y<=4&&(a<12||a>14)||b>=2&&b<=4&&(S<12||S>14)?"few":"other"},ca:function(t){var r=String(t).split("."),i=r[0],c=!r[1],d=i.slice(-6);return t==1&&c?"one":i!=0&&d==0&&c?"many":"other"},ceb:function(t){var r=String(t).split("."),i=r[0],c=r[1]||"",d=!r[1],y=i.slice(-1),a=c.slice(-1);return d&&(i==1||i==2||i==3)||d&&y!=4&&y!=6&&y!=9||!d&&a!=4&&a!=6&&a!=9?"one":"other"},cs:function(t){var r=String(t).split("."),i=r[0],c=!r[1];return t==1&&c?"one":i>=2&&i<=4&&c?"few":c?"other":"many"},cy:function(t){return t==0?"zero":t==1?"one":t==2?"two":t==3?"few":t==6?"many":"other"},da:function(t){var r=String(t).split("."),i=r[0],c=Number(r[0])==t;return t==1||!c&&(i==0||i==1)?"one":"other"},dsb:function(t){var r=String(t).split("."),i=r[0],c=r[1]||"",d=!r[1],y=i.slice(-2),a=c.slice(-2);return d&&y==1||a==1?"one":d&&y==2||a==2?"two":d&&(y==3||y==4)||a==3||a==4?"few":"other"},dz:function(t){return"other"},es:function(t){var r=String(t).split("."),i=r[0],c=!r[1],d=i.slice(-6);return t==1?"one":i!=0&&d==0&&c?"many":"other"},ff:function(t){return t>=0&&t<2?"one":"other"},fr:function(t){var r=String(t).split("."),i=r[0],c=!r[1],d=i.slice(-6);return t>=0&&t<2?"one":i!=0&&d==0&&c?"many":"other"},ga:function(t){var r=String(t).split("."),i=Number(r[0])==t;return t==1?"one":t==2?"two":i&&t>=3&&t<=6?"few":i&&t>=7&&t<=10?"many":"other"},gd:function(t){var r=String(t).split("."),i=Number(r[0])==t;return t==1||t==11?"one":t==2||t==12?"two":i&&t>=3&&t<=10||i&&t>=13&&t<=19?"few":"other"},he:function(t){var r=String(t).split("."),i=r[0],c=!r[1];return i==1&&c||i==0&&!c?"one":i==2&&c?"two":"other"},is:function(t){var r=String(t).split("."),i=r[0],c=(r[1]||"").replace(/0+$/,""),d=Number(r[0])==t,y=i.slice(-1),a=i.slice(-2);return d&&y==1&&a!=11||c%10==1&&c%100!=11?"one":"other"},ksh:function(t){return t==0?"zero":t==1?"one":"other"},lt:function(t){var r=String(t).split("."),i=r[1]||"",c=Number(r[0])==t,d=c&&r[0].slice(-1),y=c&&r[0].slice(-2);return d==1&&(y<11||y>19)?"one":d>=2&&d<=9&&(y<11||y>19)?"few":i!=0?"many":"other"},lv:function(t){var r=String(t).split("."),i=r[1]||"",c=i.length,d=Number(r[0])==t,y=d&&r[0].slice(-1),a=d&&r[0].slice(-2),b=i.slice(-2),S=i.slice(-1);return d&&y==0||a>=11&&a<=19||c==2&&b>=11&&b<=19?"zero":y==1&&a!=11||c==2&&S==1&&b!=11||c!=2&&S==1?"one":"other"},mk:function(t){var r=String(t).split("."),i=r[0],c=r[1]||"",d=!r[1],y=i.slice(-1),a=i.slice(-2),b=c.slice(-1),S=c.slice(-2);return d&&y==1&&a!=11||b==1&&S!=11?"one":"other"},mt:function(t){var r=String(t).split("."),i=Number(r[0])==t,c=i&&r[0].slice(-2);return t==1?"one":t==2?"two":t==0||c>=3&&c<=10?"few":c>=11&&c<=19?"many":"other"},pa:function(t){return t==0||t==1?"one":"other"},pl:function(t){var r=String(t).split("."),i=r[0],c=!r[1],d=i.slice(-1),y=i.slice(-2);return t==1&&c?"one":c&&d>=2&&d<=4&&(y<12||y>14)?"few":c&&i!=1&&(d==0||d==1)||c&&d>=5&&d<=9||c&&y>=12&&y<=14?"many":"other"},pt:function(t){var r=String(t).split("."),i=r[0],c=!r[1],d=i.slice(-6);return i==0||i==1?"one":i!=0&&d==0&&c?"many":"other"},ro:function(t){var r=String(t).split("."),i=!r[1],c=Number(r[0])==t,d=c&&r[0].slice(-2);return t==1&&i?"one":!i||t==0||t!=1&&d>=1&&d<=19?"few":"other"},ru:function(t){var r=String(t).split("."),i=r[0],c=!r[1],d=i.slice(-1),y=i.slice(-2);return c&&d==1&&y!=11?"one":c&&d>=2&&d<=4&&(y<12||y>14)?"few":c&&d==0||c&&d>=5&&d<=9||c&&y>=11&&y<=14?"many":"other"},se:function(t){return t==1?"one":t==2?"two":"other"},si:function(t){var r=String(t).split("."),i=r[0],c=r[1]||"";return t==0||t==1||i==0&&c==1?"one":"other"},sl:function(t){var r=String(t).split("."),i=r[0],c=!r[1],d=i.slice(-2);return c&&d==1?"one":c&&d==2?"two":c&&(d==3||d==4)||!c?"few":"other"}};Xe.as=Xe.am;Xe.az=Xe.af;Xe.bg=Xe.af;Xe.bn=Xe.am;Xe.brx=Xe.af;Xe.ce=Xe.af;Xe.chr=Xe.af;Xe.de=Xe.ast;Xe.ee=Xe.af;Xe.el=Xe.af;Xe.en=Xe.ast;Xe.et=Xe.ast;Xe.eu=Xe.af;Xe.fa=Xe.am;Xe.fi=Xe.ast;Xe.fil=Xe.ceb;Xe.fo=Xe.af;Xe.fur=Xe.af;Xe.fy=Xe.ast;Xe.gl=Xe.ast;Xe.gu=Xe.am;Xe.ha=Xe.af;Xe.hi=Xe.am;Xe.hr=Xe.bs;Xe.hsb=Xe.dsb;Xe.hu=Xe.af;Xe.hy=Xe.ff;Xe.ia=Xe.ast;Xe.id=Xe.dz;Xe.ig=Xe.dz;Xe.it=Xe.ca;Xe.ja=Xe.dz;Xe.jgo=Xe.af;Xe.jv=Xe.dz;Xe.ka=Xe.af;Xe.kea=Xe.dz;Xe.kk=Xe.af;Xe.kl=Xe.af;Xe.km=Xe.dz;Xe.kn=Xe.am;Xe.ko=Xe.dz;Xe.ks=Xe.af;Xe.ku=Xe.af;Xe.ky=Xe.af;Xe.lb=Xe.af;Xe.lkt=Xe.dz;Xe.lo=Xe.dz;Xe.ml=Xe.af;Xe.mn=Xe.af;Xe.mr=Xe.af;Xe.ms=Xe.dz;Xe.my=Xe.dz;Xe.nb=Xe.af;Xe.ne=Xe.af;Xe.nl=Xe.ast;Xe.nn=Xe.af;Xe.no=Xe.af;Xe.or=Xe.af;Xe.pcm=Xe.am;Xe.ps=Xe.af;Xe.rm=Xe.af;Xe.sah=Xe.dz;Xe.sc=Xe.ast;Xe.sd=Xe.af;Xe.sk=Xe.cs;Xe.so=Xe.af;Xe.sq=Xe.af;Xe.sr=Xe.bs;Xe.su=Xe.dz;Xe.sv=Xe.ast;Xe.sw=Xe.ast;Xe.ta=Xe.af;Xe.te=Xe.af;Xe.th=Xe.dz;Xe.ti=Xe.pa;Xe.tk=Xe.af;Xe.to=Xe.dz;Xe.tr=Xe.af;Xe.ug=Xe.af;Xe.uk=Xe.ru;Xe.ur=Xe.ast;Xe.uz=Xe.af;Xe.vi=Xe.dz;Xe.wae=Xe.af;Xe.wo=Xe.dz;Xe.xh=Xe.af;Xe.yi=Xe.ast;Xe.yo=Xe.dz;Xe.yue=Xe.dz;Xe.zh=Xe.dz;Xe.zu=Xe.am;const sP=Xe;function lP(e){return e==="pt-PT"?e:xae(e)}var vae=/^([a-z0-9]+)/i;function xae(e){var t=e.match(vae);if(!t)throw new TypeError("Invalid locale: ".concat(e));return t[1]}function bae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cP(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function wae(e,t,r){return t&&cP(e.prototype,t),r&&cP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var iS=function(){function e(t,r){bae(this,e);var i=e.supportedLocalesOf(t);if(i.length===0)throw new RangeError("Unsupported locale: "+t);if(r&&r.type!=="cardinal")throw new RangeError('Only "cardinal" "type" is supported');this.$=sP[lP(i[0])]}return wae(e,[{key:"select",value:function(r){return this.$(r)}}],[{key:"supportedLocalesOf",value:function(r){return typeof r=="string"&&(r=[r]),r.filter(function(i){return sP[lP(i)]})}}]),e}();function oS(e){"@babel/helpers - typeof";return oS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oS(e)}function uP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function dP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uP(Object(r),!0).forEach(function(i){Sae(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uP(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Sae(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hP(e,t){return Mae(e)||Cae(e,t)||Tae(e,t)||Eae()}function Eae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tae(e,t){if(e){if(typeof e=="string")return fP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fP(e,t)}}function fP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function Cae(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i=[],c=!0,d=!1,y,a;try{for(r=r.call(e);!(c=(y=r.next()).done)&&(i.push(y.value),!(t&&i.length===t));c=!0);}catch(b){d=!0,a=b}finally{try{!c&&r.return!=null&&r.return()}finally{if(d)throw a}}return i}}function Mae(e){if(Array.isArray(e))return e}function Aae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pP(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function kae(e,t,r){return t&&pP(e.prototype,t),r&&pP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var Rae=["second","minute","hour","day","week","month","quarter","year"],Iae=["auto","always"],Pae=["long","short","narrow"],Lae=["lookup","best fit"],mc=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Aae(this,e);var i=r.numeric,c=r.style,d=r.localeMatcher;if(this.numeric="always",this.style="long",this.localeMatcher="lookup",i!==void 0){if(Iae.indexOf(i)<0)throw new RangeError('Invalid "numeric" option: '.concat(i));this.numeric=i}if(c!==void 0){if(Pae.indexOf(c)<0)throw new RangeError('Invalid "style" option: '.concat(c));this.style=c}if(d!==void 0){if(Lae.indexOf(d)<0)throw new RangeError('Invalid "localeMatcher" option: '.concat(d));this.localeMatcher=d}if(typeof t=="string"&&(t=[t]),t.push(N4()),this.locale=e.supportedLocalesOf(t,{localeMatcher:this.localeMatcher})[0],!this.locale)throw new Error("No supported locale was found");iS.supportedLocalesOf(this.locale).length>0?this.pluralRules=new iS(this.locale):console.warn('"'.concat(this.locale,'" locale is not supported')),typeof Intl<"u"&&Intl.NumberFormat?(this.numberFormat=new Intl.NumberFormat(this.locale),this.numberingSystem=this.numberFormat.resolvedOptions().numberingSystem):this.numberingSystem="latn",this.locale=$4(this.locale,{localeMatcher:this.localeMatcher})}return kae(e,[{key:"format",value:function(){var r=mP(arguments),i=hP(r,2),c=i[0],d=i[1];return this.getRule(c,d).replace("{0}",this.formatNumber(Math.abs(c)))}},{key:"formatToParts",value:function(){var r=mP(arguments),i=hP(r,2),c=i[0],d=i[1],y=this.getRule(c,d),a=y.indexOf("{0}");if(a<0)return[{type:"literal",value:y}];var b=[];return a>0&&b.push({type:"literal",value:y.slice(0,a)}),b=b.concat(this.formatNumberToParts(Math.abs(c)).map(function(S){return dP(dP({},S),{},{unit:d})})),a+3<y.length-1&&b.push({type:"literal",value:y.slice(a+3)}),b}},{key:"getRule",value:function(r,i){var c=yae(this.locale)[this.style][i];if(typeof c=="string")return c;if(this.numeric==="auto"){if(r===-2||r===-1){var d=c["previous".concat(r===-1?"":"-"+Math.abs(r))];if(d)return d}else if(r===1||r===2){var y=c["next".concat(r===1?"":"-"+Math.abs(r))];if(y)return y}else if(r===0&&c.current)return c.current}var a=c[Bae(r)?"past":"future"];if(typeof a=="string")return a;var b=this.pluralRules&&this.pluralRules.select(Math.abs(r))||"other";return a[b]||a.other}},{key:"formatNumber",value:function(r){return this.numberFormat?this.numberFormat.format(r):String(r)}},{key:"formatNumberToParts",value:function(r){return this.numberFormat&&this.numberFormat.formatToParts?this.numberFormat.formatToParts(r):[{type:"integer",value:this.formatNumber(r)}]}},{key:"resolvedOptions",value:function(){return{locale:this.locale,style:this.style,numeric:this.numeric,numberingSystem:this.numberingSystem}}}]),e}();mc.supportedLocalesOf=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof e=="string")e=[e];else if(!Array.isArray(e))throw new TypeError('Invalid "locales" argument');return e.filter(function(r){return $4(r,t)})};mc.addLocale=_ae;mc.setDefaultLocale=gae;mc.getDefaultLocale=N4;mc.PluralRules=iS;var Iw='Invalid "unit" argument';function Dae(e){if(oS(e)==="symbol")throw new TypeError(Iw);if(typeof e!="string")throw new RangeError("".concat(Iw,": ").concat(e));if(e[e.length-1]==="s"&&(e=e.slice(0,e.length-1)),Rae.indexOf(e)<0)throw new RangeError("".concat(Iw,": ").concat(e));return e}var zae='Invalid "number" argument';function Oae(e){if(e=Number(e),Number.isFinite&&!Number.isFinite(e))throw new RangeError("".concat(zae,": ").concat(e));return e}function Fae(e){return 1/e===-1/0}function Bae(e){return e<0||e===0&&Fae(e)}function mP(e){if(e.length<2)throw new TypeError('"unit" argument is required');return[Oae(e[0]),Dae(e[1])]}function mv(e){"@babel/helpers - typeof";return mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mv(e)}function Nae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gP(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function $ae(e,t,r){return t&&gP(e.prototype,t),r&&gP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var yP=function(){function e(){Nae(this,e),this.cache={}}return $ae(e,[{key:"get",value:function(){for(var r=this.cache,i=arguments.length,c=new Array(i),d=0;d<i;d++)c[d]=arguments[d];for(var y=0,a=c;y<a.length;y++){var b=a[y];if(mv(r)!=="object")return;r=r[b]}return r}},{key:"put",value:function(){for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];for(var d=i.pop(),y=i.pop(),a=this.cache,b=0,S=i;b<S.length;b++){var k=S[b];mv(a[k])!=="object"&&(a[k]={}),a=a[k]}return a[y]=d}}]),e}();function aS(e){"@babel/helpers - typeof";return aS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aS(e)}function Uae(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=Vae(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vae(e,t){if(e){if(typeof e=="string")return _P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _P(e,t)}}function _P(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function jae(e,t){for(var r=Uae(e),i;!(i=r()).done;){var c=i.value;if(t(c))return c;for(var d=c.split("-");d.length>1;)if(d.pop(),c=d.join("-"),t(c))return c}throw new Error("No locale data has been registered for any of the locales: ".concat(e.join(", ")))}function Gae(){var e=(typeof Intl>"u"?"undefined":aS(Intl))==="object";return e&&typeof Intl.DateTimeFormat=="function"}function sS(e){"@babel/helpers - typeof";return sS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sS(e)}function Wae(e){return Hae(e)&&(Array.isArray(e.steps)||Array.isArray(e.gradation)||Array.isArray(e.flavour)||typeof e.flavour=="string"||Array.isArray(e.labels)||typeof e.labels=="string"||Array.isArray(e.units)||typeof e.custom=="function")}var qae={}.constructor;function Hae(e){return sS(e)!==void 0&&e!==null&&e.constructor===qae}var Vs=60,gv=60*Vs,Du=24*gv,lS=7*Du,cS=30.44*Du,U4=146097/400*Du;function zh(e){switch(e){case"second":return 1;case"minute":return Vs;case"hour":return gv;case"day":return Du;case"week":return lS;case"month":return cS;case"year":return U4}}function V4(e){return e.factor!==void 0?e.factor:zh(e.unit||e.formatAs)||1}function lg(e){switch(e){case"floor":return Math.floor;default:return Math.round}}function _T(e){switch(e){case"floor":return 1;default:return .5}}function uS(e){"@babel/helpers - typeof";return uS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uS(e)}function j4(e,t){var r=t.prevStep,i=t.timestamp,c=t.now,d=t.future,y=t.round,a;return r&&(r.id||r.unit)&&(a=e["threshold_for_".concat(r.id||r.unit)]),a===void 0&&e.threshold!==void 0&&(a=e.threshold,typeof a=="function"&&(a=a(c,d))),a===void 0&&(a=e.minTime),uS(a)==="object"&&(r&&r.id&&a[r.id]!==void 0?a=a[r.id]:a=a.default),typeof a=="function"&&(a=a(i,{future:d,getMinTimeForUnit:function(S,k){return vP(S,k||r&&r.formatAs,{round:y})}})),a===void 0&&e.test&&(e.test(i,{now:c,future:d})?a=0:a=9007199254740991),a===void 0&&(r?e.formatAs&&r.formatAs&&(a=vP(e.formatAs,r.formatAs,{round:y})):a=0),a===void 0&&console.warn("[javascript-time-ago] A step should specify `minTime`:\n"+JSON.stringify(e,null,2)),a}function vP(e,t,r){var i=r.round,c=zh(e),d;if(t==="now"?d=zh(e):d=zh(t),c!==void 0&&d!==void 0)return c-d*(1-_T(i))}function xP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function Zae(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xP(Object(r),!0).forEach(function(i){Xae(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xP(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Xae(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kae(e,t,r){var i=r.now,c=r.future,d=r.round,y=r.units,a=r.getNextStep;e=Qae(e,y);var b=Yae(e,t,{now:i,future:c,round:d});if(a){if(b){var S=e[e.indexOf(b)-1],k=e[e.indexOf(b)+1];return[S,b,k]}return[void 0,void 0,e[0]]}return b}function Yae(e,t,r){var i=r.now,c=r.future,d=r.round;if(e.length!==0){var y=G4(e,t,{now:i,future:c||t<0,round:d});if(y!==-1){var a=e[y];if(a.granularity){var b=lg(d)(Math.abs(t)/V4(a)/a.granularity)*a.granularity;if(b===0&&y>0)return e[y-1]}return a}}}function G4(e,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,c=j4(e[i],Zae({prevStep:e[i-1],timestamp:r.now-t*1e3},r));return c===void 0||Math.abs(t)<c?i-1:i===e.length-1?i:G4(e,t,r,i+1)}function Qae(e,t){return e.filter(function(r){var i=r.unit,c=r.formatAs;return i=i||c,i?t.indexOf(i)>=0:!0})}function Jae(e,t,r){var i=r.now,c=r.round;if(zh(e)){var d=zh(e)*1e3,y=t>i,a=Math.abs(t-i),b=lg(c)(a/d)*d;return y?b>0?a-b+tse(c,d):a-b+1:-(a-b)+ese(c,d)}}function ese(e,t){return _T(e)*t}function tse(e,t){return(1-_T(e))*t+1}var nse=365*24*60*60*1e3,W4=1e3*nse;function rse(e,t,r){var i=r.prevStep,c=r.nextStep,d=r.now,y=r.future,a=r.round,b=e.getTime?e.getTime():e,S=function(F){return Jae(F,b,{now:d,round:a})},k=ose(y?t:c,b,{future:y,now:d,round:a,prevStep:y?i:t});if(k!==void 0){var P;if(t&&(t.getTimeToNextUpdate&&(P=t.getTimeToNextUpdate(b,{getTimeToNextUpdateForUnit:S,getRoundFunction:lg,now:d,future:y,round:a})),P===void 0)){var O=t.unit||t.formatAs;O&&(P=S(O))}return P===void 0?k:Math.min(P,k)}}function ise(e,t,r){var i=r.now,c=r.future,d=r.round,y=r.prevStep,a=j4(e,{timestamp:t,now:i,future:c,round:d,prevStep:y});if(a!==void 0)return c?t-a*1e3+1:a===0&&t===i?W4:t+a*1e3}function ose(e,t,r){var i=r.now,c=r.future,d=r.round,y=r.prevStep;if(e){var a=ise(e,t,{now:i,future:c,round:d,prevStep:y});return a===void 0?void 0:a-i}else return c?t-i+1:W4}var q4={};function Sh(e){return q4[e]}function H4(e){if(!e)throw new Error("[javascript-time-ago] No locale data passed.");q4[e.locale]=e}const ase=[{formatAs:"now"},{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"},{formatAs:"day"},{formatAs:"week"},{formatAs:"month"},{formatAs:"year"}],dS={steps:ase,labels:"long"};function bP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function wP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bP(Object(r),!0).forEach(function(i){sse(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bP(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function sse(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const hS=wP(wP({},dS),{},{steps:dS.steps.filter(function(e){return e.formatAs!=="second"})}),Z4=[{factor:1,unit:"now"},{threshold:1,threshold_for_now:45.5,factor:1,unit:"second"},{threshold:45.5,factor:Vs,unit:"minute"},{threshold:2.5*Vs,granularity:5,factor:Vs,unit:"minute"},{threshold:22.5*Vs,factor:.5*gv,unit:"half-hour"},{threshold:42.5*Vs,threshold_for_minute:52.5*Vs,factor:gv,unit:"hour"},{threshold:20.5/24*Du,factor:Du,unit:"day"},{threshold:5.5*Du,factor:lS,unit:"week"},{threshold:3.5*lS,factor:cS,unit:"month"},{threshold:10.5*cS,factor:U4,unit:"year"}],SP={gradation:Z4,flavour:"long",units:["now","minute","hour","day","week","month","year"]},lse={gradation:Z4,flavour:"long-time",units:["now","minute","hour","day","week","month","year"]};function X4(e){return e instanceof Date?e:new Date(e)}var fS=[{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"}],ms={},cse={minTime:function(t,r){r.future;var i=r.getMinTimeForUnit;return i("day")},format:function(t,r){return ms[r]||(ms[r]={}),ms[r].dayMonth||(ms[r].dayMonth=new Intl.DateTimeFormat(r,{month:"short",day:"numeric"})),ms[r].dayMonth.format(X4(t))}},use={minTime:function(t,r){var i=r.future;if(i){var c=new Date(new Date(t).getFullYear(),0).getTime()-1;return(t-c)/1e3}else{var d=new Date(new Date(t).getFullYear()+1,0).getTime();return(d-t)/1e3}},format:function(t,r){return ms[r]||(ms[r]={}),ms[r].dayMonthYear||(ms[r].dayMonthYear=new Intl.DateTimeFormat(r,{year:"numeric",month:"short",day:"numeric"})),ms[r].dayMonthYear.format(X4(t))}};Gae()?fS.push(cse,use):fS.push({formatAs:"day"},{formatAs:"week"},{formatAs:"month"},{formatAs:"year"});const Wu={steps:fS,labels:["mini","short-time","narrow","short"]};function EP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function TP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EP(Object(r),!0).forEach(function(i){dse(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EP(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function dse(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const hse=TP(TP({},Wu),{},{steps:[{formatAs:"now"}].concat(Wu.steps)});function CP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function MP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CP(Object(r),!0).forEach(function(i){fse(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CP(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function fse(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const pS=MP(MP({},Wu),{},{steps:Wu.steps.filter(function(e){return e.formatAs!=="second"})});function AP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function kP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AP(Object(r),!0).forEach(function(i){pse(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AP(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function pse(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const mse=kP(kP({},pS),{},{steps:[{formatAs:"now"}].concat(pS.steps)});function RP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function i_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RP(Object(r),!0).forEach(function(i){gse(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RP(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function gse(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const yse=i_(i_({},Wu),{},{steps:Wu.steps.filter(function(e){return e.formatAs!=="second"}).map(function(e){return e.formatAs==="minute"?i_(i_({},e),{},{minTime:Vs}):e})}),cg={steps:[{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"},{formatAs:"day"},{formatAs:"month"},{formatAs:"year"}],labels:["mini","short-time","narrow","short"]};function IP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function PP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IP(Object(r),!0).forEach(function(i){_se(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IP(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function _se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const vse=PP(PP({},cg),{},{steps:[{formatAs:"now"}].concat(cg.steps)});function LP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function DP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LP(Object(r),!0).forEach(function(i){xse(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LP(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function xse(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const mS=DP(DP({},cg),{},{steps:cg.steps.filter(function(e){return e.formatAs!=="second"})});function zP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function OP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zP(Object(r),!0).forEach(function(i){bse(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zP(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function bse(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const wse=OP(OP({},mS),{},{steps:[{formatAs:"now"}].concat(mS.steps)});function Sse(e){switch(e){case"default":case"round":return dS;case"round-minute":return hS;case"approximate":return SP;case"time":case"approximate-time":return lse;case"mini":return cg;case"mini-now":return vse;case"mini-minute":return mS;case"mini-minute-now":return wse;case"twitter":return Wu;case"twitter-now":return hse;case"twitter-minute":return pS;case"twitter-minute-now":return mse;case"twitter-first-minute":return yse;default:return SP}}function yv(e){"@babel/helpers - typeof";return yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yv(e)}function Ese(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=K4(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tse(e,t){return Ase(e)||Mse(e,t)||K4(e,t)||Cse()}function Cse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K4(e,t){if(e){if(typeof e=="string")return FP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FP(e,t)}}function FP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function Mse(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i=[],c=!0,d=!1,y,a;try{for(r=r.call(e);!(c=(y=r.next()).done)&&(i.push(y.value),!(t&&i.length===t));c=!0);}catch(b){d=!0,a=b}finally{try{!c&&r.return!=null&&r.return()}finally{if(d)throw a}}return i}}function Ase(e){if(Array.isArray(e))return e}function kse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BP(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Rse(e,t,r){return t&&BP(e.prototype,t),r&&BP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var bo=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.polyfill;kse(this,e),typeof t=="string"&&(t=[t]),this.locale=jae(t.concat(e.getDefaultLocale()),Sh),typeof Intl<"u"&&Intl.NumberFormat&&(this.numberFormat=new Intl.NumberFormat(this.locale)),i===!1?(this.IntlRelativeTimeFormat=Intl.RelativeTimeFormat,this.IntlPluralRules=Intl.PluralRules):(this.IntlRelativeTimeFormat=mc,this.IntlPluralRules=mc.PluralRules),this.relativeTimeFormatCache=new yP,this.pluralRulesCache=new yP}return Rse(e,[{key:"format",value:function(r,i,c){c||(i&&!zse(i)?(c=i,i=void 0):c={}),i||(i=hS),typeof i=="string"&&(i=Sse(i));var d=Ise(r),y=this.getLabels(i.flavour||i.labels),a=y.labels,b=y.labelsType,S;i.now!==void 0&&(S=i.now),S===void 0&&c.now!==void 0&&(S=c.now),S===void 0&&(S=Date.now());var k=(S-d)/1e3,P=c.future||k<0,O=Dse(a,Sh(this.locale).now,Sh(this.locale).long,P);if(i.custom){var G=i.custom({now:S,date:new Date(d),time:d,elapsed:k,locale:this.locale});if(G!==void 0)return G}var F=Lse(i.units,a,O),q=c.round||i.round,ce=Kae(i.gradation||i.steps||hS.steps,k,{now:S,units:F,round:q,future:P,getNextStep:!0}),B=Tse(ce,3),U=B[0],Z=B[1],J=B[2],Y=this.formatDateForStep(d,Z,k,{labels:a,labelsType:b,nowLabel:O,now:S,future:P,round:q})||"";if(c.getTimeToNextUpdate){var he=rse(d,Z,{nextStep:J,prevStep:U,now:S,future:P,round:q});return[Y,he]}return Y}},{key:"formatDateForStep",value:function(r,i,c,d){var y=this,a=d.labels,b=d.labelsType,S=d.nowLabel,k=d.now,P=d.future,O=d.round;if(i){if(i.format)return i.format(r,this.locale,{formatAs:function(B,U){return y.formatValue(U,B,{labels:a,future:P})},now:k,future:P});var G=i.unit||i.formatAs;if(!G)throw new Error("[javascript-time-ago] Each step must define either `formatAs` or `format()`. Step: ".concat(JSON.stringify(i)));if(G==="now")return S;var F=Math.abs(c)/V4(i);i.granularity&&(F=lg(O)(F/i.granularity)*i.granularity);var q=-1*Math.sign(c)*lg(O)(F);switch(q===0&&(P?q=0:q=-0),b){case"long":case"short":case"narrow":return this.getFormatter(b).format(q,G);default:return this.formatValue(q,G,{labels:a,future:P})}}}},{key:"formatValue",value:function(r,i,c){var d=c.labels,y=c.future;return this.getFormattingRule(d,i,r,{future:y}).replace("{0}",this.formatNumber(Math.abs(r)))}},{key:"getFormattingRule",value:function(r,i,c,d){var y=d.future;if(this.locale,r=r[i],typeof r=="string")return r;var a=c===0?y?"future":"past":c<0?"past":"future",b=r[a]||r;if(typeof b=="string")return b;var S=this.getPluralRules().select(Math.abs(c));return b[S]||b.other}},{key:"formatNumber",value:function(r){return this.numberFormat?this.numberFormat.format(r):String(r)}},{key:"getFormatter",value:function(r){return this.relativeTimeFormatCache.get(this.locale,r)||this.relativeTimeFormatCache.put(this.locale,r,new this.IntlRelativeTimeFormat(this.locale,{style:r}))}},{key:"getPluralRules",value:function(){return this.pluralRulesCache.get(this.locale)||this.pluralRulesCache.put(this.locale,new this.IntlPluralRules(this.locale))}},{key:"getLabels",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];typeof r=="string"&&(r=[r]),r=r.map(function(a){switch(a){case"tiny":case"mini-time":return"mini";default:return a}}),r=r.concat("long");for(var i=Sh(this.locale),c=Ese(r),d;!(d=c()).done;){var y=d.value;if(i[y])return{labelsType:y,labels:i[y]}}}}]),e}(),Y4="en";bo.getDefaultLocale=function(){return Y4};bo.setDefaultLocale=function(e){return Y4=e};bo.addDefaultLocale=function(e){if(NP)return console.error("[javascript-time-ago] `TimeAgo.addDefaultLocale()` can only be called once. To add other locales, use `TimeAgo.addLocale()`.");NP=!0,bo.setDefaultLocale(e.locale),bo.addLocale(e)};var NP;bo.addLocale=function(e){H4(e),mc.addLocale(e)};bo.locale=bo.addLocale;bo.addLabels=function(e,t,r){var i=Sh(e);i||(H4({locale:e}),i=Sh(e)),i[t]=r};function Ise(e){if(e.constructor===Date||Pse(e))return e.getTime();if(typeof e=="number")return e;throw new Error("Unsupported relative time formatter input: ".concat(yv(e),", ").concat(e))}function Pse(e){return yv(e)==="object"&&typeof e.getTime=="function"}function Lse(e,t,r){var i=Object.keys(t);return r&&i.push("now"),e&&(i=e.filter(function(c){return c==="now"||i.indexOf(c)>=0})),i}function Dse(e,t,r,i){var c=e.now||t&&t.now;if(c)return typeof c=="string"?c:i?c.future:c.past;if(r&&r.second&&r.second.current)return r.second.current}function zse(e){return typeof e=="string"||Wae(e)}const vT={locale:"ko",long:{year:{previous:"",current:"",next:"",past:"{0} ",future:"{0} "},quarter:{previous:" ",current:" ",next:" ",past:"{0} ",future:"{0} "},month:{previous:"",current:" ",next:" ",past:"{0} ",future:"{0} "},week:{previous:"",current:" ",next:" ",past:"{0} ",future:"{0} "},day:{previous:"","previous-2":"",current:"",next:"","next-2":"",past:"{0} ",future:"{0} "},hour:{current:" ",past:"{0} ",future:"{0} "},minute:{current:" ",past:"{0} ",future:"{0} "},second:{current:"",past:"{0} ",future:"{0} "}},short:{year:{previous:"",current:"",next:"",past:"{0} ",future:"{0} "},quarter:{previous:" ",current:" ",next:" ",past:"{0} ",future:"{0} "},month:{previous:"",current:" ",next:" ",past:"{0} ",future:"{0} "},week:{previous:"",current:" ",next:" ",past:"{0} ",future:"{0} "},day:{previous:"","previous-2":"",current:"",next:"","next-2":"",past:"{0} ",future:"{0} "},hour:{current:" ",past:"{0} ",future:"{0} "},minute:{current:" ",past:"{0} ",future:"{0} "},second:{current:"",past:"{0} ",future:"{0} "}},narrow:{year:{previous:"",current:"",next:"",past:"{0} ",future:"{0} "},quarter:{previous:" ",current:" ",next:" ",past:"{0} ",future:"{0} "},month:{previous:"",current:" ",next:" ",past:"{0} ",future:"{0} "},week:{previous:"",current:" ",next:" ",past:"{0} ",future:"{0} "},day:{previous:"","previous-2":"",current:"",next:"","next-2":"",past:"{0} ",future:"{0} "},hour:{current:" ",past:"{0} ",future:"{0} "},minute:{current:" ",past:"{0} ",future:"{0} "},second:{current:"",past:"{0} ",future:"{0} "}},now:{now:{current:"",future:" ",past:""}},mini:{year:"{0}",quarter:"{0}",month:"{0}",week:"{0}",day:"{0}",hour:"{0}",minute:"{0}",second:"{0}",now:""}},Ose=go(Rn)(({theme:e})=>({display:"flex",flexDirection:"column",padding:"0.5rem",gap:1,color:e.palette.text.primary,"& .description":{width:"100%"},"& .notiHead":{display:"flex",flexDirection:"row",justifyContent:"space-between",paddingRight:.5},"& .notiHead .date":{fontSize:"0.8rem"},"&:hover":{backgroundColor:Kr(Qs[800],.2)}}));function _o({prop:e}){bo.addLocale(vT);const t=new bo("ko");return t.format(new Date),en(Ose,{onClick:()=>console.log("hello"),children:[en(Rn,{className:"notiHead",children:[en(Nr,{variant:"subtitle2",children:[" ",e.title]}),ne(Nr,{variant:"body2",className:"date",children:t.format(e.alertAt)})]}),ne(Nr,{variant:"body2",className:"description",children:e.data})]})}function Fse(){const{headOpt:e,setHeadOpt:t,navigate:r,setWrapperOpt:i}=ea(),c={menus:[{key:"",value:"/notification"}],icon_R:zg,fn_R:()=>r(-1),headerType:"V3"},d={isNoneHeadPadding:!1};H.useLayoutEffect(()=>{t(c),i(d)},[]);const y={title:"  !!",data:"     !",alertAt:new Date},a={title:"  !!",data:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed euismod, nisi a egestas ultrices , nisl urna viverra diam, a ultricies ante nunc sit amet nisl. Sed euismod, nisi a egestas ultrices , nisl urna viverra diam, a ultricies ante nunc sit amet nisl. ( )",alertAt:new Date(2023,4,3,23,55)};return e?ne(hf,{sx:{padding:0,maxHeight:"calc(100vh - 56px)",overflow:"hidden","@media (min-width: 600px)":{maxHeight:"calc(100vh - 64px)"}},children:en(Rn,{sx:{maxHeight:"calc(100vh - 56px)",overflow:"scroll",paddingBottom:10,"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-thumb":{background:"#ddd",borderRadius:"5px"},"&::-webkit-scrollbar-button:vertical:end:decrement":{display:"block",height:"20px"},"&::-webkit-scrollbar-corner":{display:"none"},"@media (min-width: 600px)":{maxHeight:"calc(100vh - 64px)"}},children:[ne(_o,{prop:y}),ne(_o,{prop:y}),ne(_o,{prop:y}),ne(_o,{prop:y}),ne(_o,{prop:a}),ne(_o,{prop:y}),ne(_o,{prop:y}),ne(_o,{prop:y}),ne(_o,{prop:a}),ne(_o,{prop:y}),ne(_o,{prop:y}),ne(_o,{prop:y}),ne(_o,{prop:a}),ne(_o,{prop:y}),ne(_o,{prop:y})]})}):ne(Rn,{})}function Bse(){const{setHeadOpt:e,navigate:t,setWrapperOpt:r}=ea(),i=YG(Eg),c={menus:[{key:"",value:"/mypage"}],icon_L:hT,fn_L:()=>t(-1),icon_R:a4,fn_R:()=>t("/mypage/setting"),headerType:"V3"},d={isNoneHeadPadding:!1};return H.useLayoutEffect(()=>{e(c),r(d)},[]),en(hf,{children:[ne(Rn,{sx:{height:"20rem"},children:ne(Nr,{variant:"h3",children:"HELLO"})}),ne(nl,{fullWidth:!0,onClick:()=>t("/mypage/edit"),children:" "}),ne(nl,{fullWidth:!0,onClick:i,children:""})]})}function Nse(){const{setHeadOpt:e,navigate:t}=ea(),r={menus:[{key:" ",value:"/mypage/edit"}],icon_L:zg,fn_L:()=>t(-1),headerType:"V3"};return H.useLayoutEffect(()=>{e(r)},[]),ne(hf,{children:ne(Rn,{sx:{height:"20rem"},children:ne(Nr,{variant:"h3",children:" "})})})}function $se(){const{setHeadOpt:e,navigate:t}=ea(),[r,i]=sf(Nz),c={menus:[{key:"",value:"/mypage/setting"}],icon_R:zg,fn_R:()=>t(-1),headerType:"V2"};return H.useLayoutEffect(()=>{e(c)},[]),ne(vte,{defaultValue:"system",value:r.theme,onChange:d=>{i(y=>({...y,theme:d.target.value})),localStorage.getItem("isFlutter")==="1"&&Theming.postMessage(d.target.value)},children:en(hf,{spacing:1,children:[ne(Nr,{variant:"h5",children:" "}),ne(nw,{value:"system",control:ne(aw,{}),label:"  "}),ne(nw,{value:"light",control:ne(aw,{}),label:" "}),ne(nw,{value:"dark",control:ne(aw,{}),label:" "})]})})}const Use=async e=>await fetch(`${ZO}/post?post_id=${e}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwidXNlcl9pZCI6IjEyOTAzODEwMjk4MyIsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNTE2MjM5MDIyfQ.pGdZm2StiLp1ksKdF5qlMOEg1QYBg9BUAo5xWZkIuEg"}}).then(r=>r.json()),Vse=go(Rn)(({theme:e})=>({padding:"0 1rem",position:"relative","& .detail_header":{width:"100%",backgroundColor:e.palette.background.default,padding:"1rem",borderRadius:"1rem",display:"flex",flexDirection:"column",gap:"1rem"},"& .detail_header .header_user":{display:"flex",gap:"1rem",alignItems:"center"},"& .detail_header .header_content":{minHeight:"3rem"}}));function jse(){bo.addLocale(vT);const e=new bo("ko"),t=new Date;return ne(Vse,{children:en(Rn,{className:"detail_header",children:[en(Rn,{className:"header_user",children:[ne(u4,{}),en(Rn,{sx:{width:"100%"},children:[ne(Nr,{variant:"body1",children:" "}),ne(Nr,{variant:"body2",children:e.format(t)})]}),ne(Rn,{sx:{minWidth:"4rem",height:"2rem",lineHeight:"2rem",borderRadius:"1rem",backgroundColor:cl,padding:"0rem 1rem",textAlign:"center",color:"#fff"},children:ne(Nr,{variant:"button",children:""})})]}),en(Rn,{className:"header_content",children:[" ,, !  ",ne("br",{}),"   "]})]})})}const Gse=go(Rn)(({theme:e})=>({display:"flex",alignItems:"row",justifyContent:"space-between"}));function Pw({value:e,createAt:t}){return en(Gse,{children:[ne(Rn,{className:"value",children:e}),ne(Rn,{className:"createAt",children:t})]})}const Wse=go(Rn)(({theme:e})=>({"& .comments":{padding:"1rem",backgroundColor:e.palette.background.default,borderRadius:"1rem"}}));function qse(){bo.addLocale(vT);const e=new bo("ko"),t=new Date;return ne(Wse,{sx:{padding:"0 1rem"},children:en(hf,{spacing:2,className:"comments",children:[ne(Pw,{value:" ?",createAt:e.format(t)}),ne(Pw,{value:"",createAt:e.format(t)}),ne(Pw,{value:"    ",createAt:e.format(t)})]})})}const Hse=Qe.lazy(()=>C4(()=>import("./index-efb70728.js"),[]));function Zse(){const{postId:e}=U8(),{setHeadOpt:t,navigate:r,setWrapperOpt:i}=ea(),c=Hi(),d={menus:[{key:"",value:"/detail"}],icon_L:hT,fn_L:()=>r(-1),headerType:"V3",bgColor:"#ffffff00 !important",contentColor:"#fff"},y={isFullWidth:!0,isNoneHeadPadding:!0,noneFullHeight:!0};H.useLayoutEffect(()=>{H.startTransition(()=>{t(d),i(y)})},[]);const{data:a}=doe("getWooyeon",()=>Use(e),{suspense:!0});return ne(H.Suspense,{fallback:ne("div",{children:"loading... "}),children:en(Rn,{sx:{position:"relative",top:0,backgroundColor:c.palette.background.paper},children:[ne(H.Suspense,{fallback:ne(Y2,{variant:"rectangular",width:"100%",height:400}),children:ne(Hse,{wooyeon:a})}),en(hf,{sx:{top:"-24px",position:"relative",paddingTop:"1rem"},spacing:2,children:[ne(jse,{}),ne(qse,{})]})]})})}const Xse=()=>{const[e]=sf(Eg),t=r$([{path:"auth/",element:ne(nI,{isHeader:!1}),children:[{index:!0,element:ne(mre,{}),loader:()=>!!e.first&&Ub("/auth/cate")},{path:"cate",element:ne(_re,{})}],loader:()=>e.role!=="GUEST"&&Ub("/")},{path:"/",element:ne(nI,{isHeader:!0}),errorElement:ne("div",{children:"error"}),children:[{path:"/",element:ne(gie,{}),children:[{index:!0,element:ne(hoe,{})},{path:"previous",element:ne(Zoe,{})}]},{path:"add-post/",element:ne(Xoe,{}),children:[{index:!0,element:ne(Joe,{})},{path:"category",element:ne(nae,{})},{path:"content",element:ne(mae,{})}]},{path:"notification",element:ne(Fse,{})},{path:"mypage/",children:[{index:!0,element:ne(Bse,{})},{path:"edit",element:ne(Nse,{})},{path:"setting",element:ne($se,{})}]},{path:"detail/:postId",element:ne(Zse,{})}],loader:()=>e.role==="GUEST"&&Ub("/auth")}]);return ne(J8,{router:t})},Kse=go("div")(({theme:e})=>({height:"100%",backgroundColor:(e==null?void 0:e.palette.mode)==="dark"?"#262626":Qs[100]}));function Yse(){const[e]=sf(Nz),t=window.matchMedia("(prefers-color-scheme: dark)"),[r,i]=H.useState(()=>window.matchMedia("(prefers-color-scheme: dark)").matches?hw:dw),c=new Jie,d=()=>{t.matches===!0?i(hw):i(dw)};return H.useEffect(()=>{e.theme!=="system"?e.theme==="dark"?i(hw):i(dw):d()},[e]),H.useEffect(()=>{if(e.theme==="system")return t.addEventListener("change",d),()=>{t.removeEventListener("change",d)}},[]),en(Pg,{theme:r,children:[ne(kO,{}),ne(oT,{styles:{body:{userSelect:"none",touchAction:"pan-x",backgroundColor:e.theme==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"#262626":Qs[100]:e.theme==="dark"?"#262626":Qs[100]},touchAction:"none"}}),ne(Kse,{children:ne(ooe,{client:c,children:ne(Xse,{})})})]})}Dw.createRoot(document.getElementById("root")).render(ne(Qe.StrictMode,{children:ne(KG,{children:ne(Cq,{injectFirst:!0,children:ne(Yse,{})})})}));export{Rn as B,Nee as M,e4 as S,en as a,ne as j,go as n,H as r};
